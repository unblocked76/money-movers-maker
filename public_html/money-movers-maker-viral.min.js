!function(e){var t;"object"==typeof exports?module.exports=e():("undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.p2=e())}(function(){return function r(o,a,s){function l(t,e){if(!a[t]){if(!o[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(p)return p(t,!0);throw new Error("Cannot find module '"+t+"'")}var n=a[t]={exports:{}};o[t][0].call(n.exports,function(e){return l(o[t][1][e]||e)},n,n.exports,r,o,a,s)}return a[t].exports}for(var p="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(e,t,i){function n(){}var u=e("./Scalar");(t.exports=n).lineInt=function(e,t,i){i=i||0;var n,r,o,a,s,l,p,h=[0,0];return n=e[1][1]-e[0][1],r=e[0][0]-e[1][0],o=n*e[0][0]+r*e[0][1],a=t[1][1]-t[0][1],s=t[0][0]-t[1][0],l=a*t[0][0]+s*t[0][1],p=n*s-a*r,u.eq(p,0,i)||(h[0]=(s*o-r*l)/p,h[1]=(n*l-a*o)/p),h},n.segmentsIntersect=function(e,t,i,n){var r=t[0]-e[0],o=t[1]-e[1],a=n[0]-i[0],s=n[1]-i[1];if(a*o-s*r==0)return!1;var l=(r*(i[1]-e[1])+o*(e[0]-i[0]))/(a*o-s*r),p=(a*(e[1]-i[1])+s*(i[0]-e[0]))/(s*r-a*o);return 0<=l&&l<=1&&0<=p&&p<=1}},{"./Scalar":4}],2:[function(e,t,i){function p(){}(t.exports=p).area=function(e,t,i){return(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])},p.left=function(e,t,i){return 0<p.area(e,t,i)},p.leftOn=function(e,t,i){return 0<=p.area(e,t,i)},p.right=function(e,t,i){return p.area(e,t,i)<0},p.rightOn=function(e,t,i){return p.area(e,t,i)<=0};var h=[],u=[];p.collinear=function(e,t,i,n){if(n){var r=h,o=u;r[0]=t[0]-e[0],r[1]=t[1]-e[1],o[0]=i[0]-t[0],o[1]=i[1]-t[1];var a=r[0]*o[0]+r[1]*o[1],s=Math.sqrt(r[0]*r[0]+r[1]*r[1]),l=Math.sqrt(o[0]*o[0]+o[1]*o[1]);return Math.acos(a/(s*l))<n}return 0==p.area(e,t,i)},p.sqdist=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}},{}],3:[function(e,t,i){function b(){this.vertices=[]}function w(e,t,i,n,r){r=r||0;var o=t[1]-e[1],a=e[0]-t[0],s=o*e[0]+a*e[1],l=n[1]-i[1],p=i[0]-n[0],h=l*i[0]+p*i[1],u=o*p-l*a;return c.eq(u,0,r)?[0,0]:[(p*s-a*h)/u,(o*h-l*s)/u]}var s=e("./Line"),S=e("./Point"),c=e("./Scalar");(t.exports=b).prototype.at=function(e){var t=this.vertices,i=t.length;return t[e<0?e%i+i:e%i]},b.prototype.first=function(){return this.vertices[0]},b.prototype.last=function(){return this.vertices[this.vertices.length-1]},b.prototype.clear=function(){this.vertices.length=0},b.prototype.append=function(e,t,i){if(void 0===t)throw new Error("From is not given!");if(void 0===i)throw new Error("To is not given!");if(i-1<t)throw new Error("lol1");if(i>e.vertices.length)throw new Error("lol2");if(t<0)throw new Error("lol3");for(var n=t;n<i;n++)this.vertices.push(e.vertices[n])},b.prototype.makeCCW=function(){for(var e=0,t=this.vertices,i=1;i<this.vertices.length;++i)(t[i][1]<t[e][1]||t[i][1]==t[e][1]&&t[i][0]>t[e][0])&&(e=i);S.left(this.at(e-1),this.at(e),this.at(e+1))||this.reverse()},b.prototype.reverse=function(){for(var e=[],t=0,i=this.vertices.length;t!==i;t++)e.push(this.vertices.pop());this.vertices=e},b.prototype.isReflex=function(e){return S.right(this.at(e-1),this.at(e),this.at(e+1))};var l=[],p=[];b.prototype.canSee=function(e,t){var i,n,r=l,o=p;if(S.leftOn(this.at(e+1),this.at(e),this.at(t))&&S.rightOn(this.at(e-1),this.at(e),this.at(t)))return!1;n=S.sqdist(this.at(e),this.at(t));for(var a=0;a!==this.vertices.length;++a)if((a+1)%this.vertices.length!==e&&a!==e&&S.leftOn(this.at(e),this.at(t),this.at(a+1))&&S.rightOn(this.at(e),this.at(t),this.at(a))&&(r[0]=this.at(e),r[1]=this.at(t),o[0]=this.at(a),o[1]=this.at(a+1),i=s.lineInt(r,o),S.sqdist(this.at(e),i)<n))return!1;return!0},b.prototype.copy=function(e,t,i){var n=i||new b;if(n.clear(),e<t)for(var r=e;r<=t;r++)n.vertices.push(this.vertices[r]);else{for(r=0;r<=t;r++)n.vertices.push(this.vertices[r]);for(r=e;r<this.vertices.length;r++)n.vertices.push(this.vertices[r])}return n},b.prototype.getCutEdges=function(){for(var e=[],t=[],i=[],n=new b,r=Number.MAX_VALUE,o=0;o<this.vertices.length;++o)if(this.isReflex(o))for(var a=0;a<this.vertices.length;++a)if(this.canSee(o,a)){t=this.copy(o,a,n).getCutEdges(),i=this.copy(a,o,n).getCutEdges();for(var s=0;s<i.length;s++)t.push(i[s]);t.length<r&&(r=(e=t).length,e.push([this.at(o),this.at(a)]))}return e},b.prototype.decomp=function(){var e=this.getCutEdges();return 0<e.length?this.slice(e):[this]},b.prototype.slice=function(e){if(0==e.length)return[this];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2==e[0].length&&e[0][0]instanceof Array){for(var t=[this],i=0;i<e.length;i++)for(var n=e[i],r=0;r<t.length;r++){var o=t[r].slice(n);if(o){t.splice(r,1),t.push(o[0],o[1]);break}}return t}n=e,i=this.vertices.indexOf(n[0]),r=this.vertices.indexOf(n[1]);return-1!=i&&-1!=r&&[this.copy(i,r),this.copy(r,i)]},b.prototype.isSimple=function(){for(var e=this.vertices,t=0;t<e.length-1;t++)for(var i=0;i<t-1;i++)if(s.segmentsIntersect(e[t],e[t+1],e[i],e[i+1]))return!1;for(t=1;t<e.length-2;t++)if(s.segmentsIntersect(e[0],e[e.length-1],e[t],e[t+1]))return!1;return!0},b.prototype.quickDecomp=function(e,t,i,n,r,o){r=r||100,o=o||0,n=n||25,e=void 0!==e?e:[],t=t||[],i=i||[];var a=[0,0],s=[0,0],l=[0,0],p=0,h=0,u=0,c=0,d=0,_=0,y=0,m=new b,f=new b,x=this,v=this.vertices;if(v.length<3)return e;if(++o>r)return e;for(var z=0;z<this.vertices.length;++z)if(x.isReflex(z)){t.push(x.vertices[z]),p=h=Number.MAX_VALUE;for(var g=0;g<this.vertices.length;++g)S.left(x.at(z-1),x.at(z),x.at(g))&&S.rightOn(x.at(z-1),x.at(z),x.at(g-1))&&(l=w(x.at(z-1),x.at(z),x.at(g),x.at(g-1)),S.right(x.at(z+1),x.at(z),l)&&(u=S.sqdist(x.vertices[z],l))<h&&(h=u,s=l,_=g)),S.left(x.at(z+1),x.at(z),x.at(g+1))&&S.rightOn(x.at(z+1),x.at(z),x.at(g))&&(l=w(x.at(z+1),x.at(z),x.at(g),x.at(g+1)),S.left(x.at(z-1),x.at(z),l)&&(u=S.sqdist(x.vertices[z],l))<p&&(p=u,a=l,d=g));if(_==(d+1)%this.vertices.length)l[0]=(s[0]+a[0])/2,l[1]=(s[1]+a[1])/2,i.push(l),z<d?(m.append(x,z,d+1),m.vertices.push(l),f.vertices.push(l),0!=_&&f.append(x,_,x.vertices.length),f.append(x,0,z+1)):(0!=z&&m.append(x,z,x.vertices.length),m.append(x,0,d+1),m.vertices.push(l),f.vertices.push(l),f.append(x,_,z+1));else{if(d<_&&(d+=this.vertices.length),c=Number.MAX_VALUE,d<_)return e;for(g=_;g<=d;++g)S.leftOn(x.at(z-1),x.at(z),x.at(g))&&S.rightOn(x.at(z+1),x.at(z),x.at(g))&&(u=S.sqdist(x.at(z),x.at(g)))<c&&(c=u,y=g%this.vertices.length);z<y?(m.append(x,z,y+1),0!=y&&f.append(x,y,v.length),f.append(x,0,z+1)):(0!=z&&m.append(x,z,v.length),m.append(x,0,y+1),f.append(x,y,z+1))}return m.vertices.length<f.vertices.length?(m.quickDecomp(e,t,i,n,r,o),f.quickDecomp(e,t,i,n,r,o)):(f.quickDecomp(e,t,i,n,r,o),m.quickDecomp(e,t,i,n,r,o)),e}return e.push(this),e},b.prototype.removeCollinearPoints=function(e){for(var t=0,i=this.vertices.length-1;3<this.vertices.length&&0<=i;--i)S.collinear(this.at(i-1),this.at(i),this.at(i+1),e)&&(this.vertices.splice(i%this.vertices.length,1),i--,t++);return t}},{"./Line":1,"./Point":2,"./Scalar":4}],4:[function(e,t,i){function n(){}(t.exports=n).eq=function(e,t,i){return i=i||0,Math.abs(e-t)<i}},{}],5:[function(e,t,i){t.exports={Polygon:e("./Polygon"),Point:e("./Point")}},{"./Point":2,"./Polygon":3}],6:[function(e,t,i){t.exports={name:"p2",version:"0.7.0",description:"A JavaScript 2D physics engine.",author:"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",keywords:["p2.js","p2","physics","engine","2d"],main:"./src/p2.js",engines:{node:"*"},repository:{type:"git",url:"https://github.com/schteppe/p2.js.git"},bugs:{url:"https://github.com/schteppe/p2.js/issues"},licenses:[{type:"MIT"}],devDependencies:{grunt:"^0.4.5","grunt-contrib-jshint":"^0.11.2","grunt-contrib-nodeunit":"^0.4.1","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.5.0","grunt-browserify":"~2.0.1","grunt-contrib-concat":"^0.4.0"},dependencies:{"poly-decomp":"0.1.0"}}},{}],7:[function(e,t,i){function n(e){this.lowerBound=d.create(),e&&e.lowerBound&&d.copy(this.lowerBound,e.lowerBound),this.upperBound=d.create(),e&&e.upperBound&&d.copy(this.upperBound,e.upperBound)}var d=e("../math/vec2");e("../utils/Utils"),t.exports=n;var _=d.create();n.prototype.setFromPoints=function(e,t,i,n){var r=this.lowerBound,o=this.upperBound;"number"!=typeof i&&(i=0),0!==i?d.rotate(r,e[0],i):d.copy(r,e[0]),d.copy(o,r);for(var a=Math.cos(i),s=Math.sin(i),l=1;l<e.length;l++){var p=e[l];if(0!==i){var h=p[0],u=p[1];_[0]=a*h-s*u,_[1]=s*h+a*u,p=_}for(var c=0;c<2;c++)p[c]>o[c]&&(o[c]=p[c]),p[c]<r[c]&&(r[c]=p[c])}t&&(d.add(this.lowerBound,this.lowerBound,t),d.add(this.upperBound,this.upperBound,t)),n&&(this.lowerBound[0]-=n,this.lowerBound[1]-=n,this.upperBound[0]+=n,this.upperBound[1]+=n)},n.prototype.copy=function(e){d.copy(this.lowerBound,e.lowerBound),d.copy(this.upperBound,e.upperBound)},n.prototype.extend=function(e){for(var t=2;t--;){var i=e.lowerBound[t];this.lowerBound[t]>i&&(this.lowerBound[t]=i);var n=e.upperBound[t];this.upperBound[t]<n&&(this.upperBound[t]=n)}},n.prototype.overlaps=function(e){var t=this.lowerBound,i=this.upperBound,n=e.lowerBound,r=e.upperBound;return(n[0]<=i[0]&&i[0]<=r[0]||t[0]<=r[0]&&r[0]<=i[0])&&(n[1]<=i[1]&&i[1]<=r[1]||t[1]<=r[1]&&r[1]<=i[1])},n.prototype.containsPoint=function(e){var t=this.lowerBound,i=this.upperBound;return t[0]<=e[0]&&e[0]<=i[0]&&t[1]<=e[1]&&e[1]<=i[1]},n.prototype.overlapsRay=function(e){var t=1/e.direction[0],i=1/e.direction[1],n=(this.lowerBound[0]-e.from[0])*t,r=(this.upperBound[0]-e.from[0])*t,o=(this.lowerBound[1]-e.from[1])*i,a=(this.upperBound[1]-e.from[1])*i,s=Math.max(Math.max(Math.min(n,r),Math.min(o,a))),l=Math.min(Math.min(Math.max(n,r),Math.max(o,a)));return l<0?-1:l<s?-1:s}},{"../math/vec2":30,"../utils/Utils":57}],8:[function(e,t,i){function n(e){this.type=e,this.result=[],this.world=null,this.boundingVolumeType=n.AABB}var r=e("../math/vec2"),o=e("../objects/Body");(t.exports=n).AABB=1,n.BOUNDING_CIRCLE=2,n.prototype.setWorld=function(e){this.world=e},n.prototype.getCollisionPairs=function(e){};var a=r.create();n.boundingRadiusCheck=function(e,t){r.sub(a,e.position,t.position);var i=r.squaredLength(a),n=e.boundingRadius+t.boundingRadius;return i<=n*n},n.aabbCheck=function(e,t){return e.getAABB().overlaps(t.getAABB())},n.prototype.boundingVolumeCheck=function(e,t){var i;switch(this.boundingVolumeType){case n.BOUNDING_CIRCLE:i=n.boundingRadiusCheck(e,t);break;case n.AABB:i=n.aabbCheck(e,t);break;default:throw new Error("Bounding volume type not recognized: "+this.boundingVolumeType)}return i},n.canCollide=function(e,t){var i=o.KINEMATIC,n=o.STATIC;return!(e.type===n&&t.type===n||e.type===i&&t.type===n||e.type===n&&t.type===i||e.type===i&&t.type===i||e.sleepState===o.SLEEPING&&t.sleepState===o.SLEEPING||e.sleepState===o.SLEEPING&&t.type===n||t.sleepState===o.SLEEPING&&e.type===n)},n.NAIVE=1,n.SAP=2},{"../math/vec2":30,"../objects/Body":31}],9:[function(e,t,i){function n(){l.call(this,l.NAIVE)}var l=(e("../shapes/Circle"),e("../shapes/Plane"),e("../shapes/Shape"),e("../shapes/Particle"),e("../collision/Broadphase"));e("../math/vec2"),(((t.exports=n).prototype=new l).constructor=n).prototype.getCollisionPairs=function(e){for(var t=e.bodies,i=this.result,n=i.length=0,r=t.length;n!==r;n++)for(var o=t[n],a=0;a<n;a++){var s=t[a];l.canCollide(o,s)&&this.boundingVolumeCheck(o,s)&&i.push(o,s)}return i},n.prototype.aabbQuery=function(e,t,i){i=i||[];for(var n=e.bodies,r=0;r<n.length;r++){var o=n[r];o.aabbNeedsUpdate&&o.updateAABB(),o.aabb.overlaps(t)&&i.push(o)}return i}},{"../collision/Broadphase":8,"../math/vec2":30,"../shapes/Circle":39,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45}],10:[function(e,t,i){function N(){this.contactEquations=[],this.frictionEquations=[],this.enableFriction=!0,this.enabledEquations=!0,this.slipForce=10,this.frictionCoefficient=.3,this.surfaceVelocity=0,this.contactEquationPool=new n({size:32}),this.frictionEquationPool=new r({size:64}),this.restitution=0,this.stiffness=a.DEFAULT_STIFFNESS,this.relaxation=a.DEFAULT_RELAXATION,this.frictionStiffness=a.DEFAULT_STIFFNESS,this.frictionRelaxation=a.DEFAULT_RELAXATION,this.enableFrictionReduction=!0,this.collidingBodiesLastStep=new o,this.contactSkinSize=.01}function v(e,t){U.set(e.vertices[0],.5*-t.length,-t.radius),U.set(e.vertices[1],.5*t.length,-t.radius),U.set(e.vertices[2],.5*t.length,t.radius),U.set(e.vertices[3],.5*-t.length,t.radius)}function O(e,t,i,n){for(var r=y,o=m,a=f,s=x,l=e,p=t.vertices,h=null,u=0;u!==p.length+1;u++){var c=p[u%p.length],d=p[(u+1)%p.length];U.rotate(r,c,n),U.rotate(o,d,n),H(r,r,i),H(o,o,i),V(a,r,l),V(s,o,l);var _=U.crossLength(a,s);if(null===h&&(h=_),_*h<=0)return!1;h=_}return!0}var U=e("../math/vec2"),V=U.sub,H=U.add,W=U.dot,n=(e("../utils/Utils"),e("../utils/ContactEquationPool")),r=e("../utils/FrictionEquationPool"),o=e("../utils/TupleDictionary"),a=e("../equations/Equation"),s=(e("../equations/ContactEquation"),e("../equations/FrictionEquation"),e("../shapes/Circle")),l=e("../shapes/Convex"),p=e("../shapes/Shape"),w=(e("../objects/Body"),e("../shapes/Box"));t.exports=N;var S=U.fromValues(0,1),X=U.fromValues(0,0),q=U.fromValues(0,0),Y=U.fromValues(0,0),K=U.fromValues(0,0),Z=U.fromValues(0,0),I=U.fromValues(0,0),J=U.fromValues(0,0),Q=U.fromValues(0,0),$=U.fromValues(0,0),B=U.fromValues(0,0),L=U.fromValues(0,0),D=U.fromValues(0,0),R=U.fromValues(0,0),F=U.fromValues(0,0),A=U.fromValues(0,0),E=U.fromValues(0,0),k=U.fromValues(0,0),T=U.fromValues(0,0),j=[],h=U.create(),u=U.create();N.prototype.bodiesOverlap=function(e,t){for(var i=h,n=u,r=0,o=e.shapes.length;r!==o;r++){var a=e.shapes[r];e.toWorldFrame(i,a.position);for(var s=0,l=t.shapes.length;s!==l;s++){var p=t.shapes[s];if(t.toWorldFrame(n,p.position),this[a.type|p.type](e,a,i,a.angle+e.angle,t,p,n,p.angle+t.angle,!0))return!0}}return!1},N.prototype.collidedLastStep=function(e,t){var i=0|e.id,n=0|t.id;return!!this.collidingBodiesLastStep.get(i,n)},N.prototype.reset=function(){this.collidingBodiesLastStep.reset();for(var e=this.contactEquations,t=e.length;t--;){var i=e[t],n=i.bodyA.id,r=i.bodyB.id;this.collidingBodiesLastStep.set(n,r,!0)}for(var o=this.contactEquations,a=this.frictionEquations,s=0;s<o.length;s++)this.contactEquationPool.release(o[s]);for(s=0;s<a.length;s++)this.frictionEquationPool.release(a[s]);this.contactEquations.length=this.frictionEquations.length=0},N.prototype.createContactEquation=function(e,t,i,n){var r=this.contactEquationPool.get();return r.bodyA=e,r.bodyB=t,r.shapeA=i,r.shapeB=n,r.restitution=this.restitution,r.firstImpact=!this.collidedLastStep(e,t),r.stiffness=this.stiffness,r.relaxation=this.relaxation,r.needsUpdate=!0,r.enabled=this.enabledEquations,r.offset=this.contactSkinSize,r},N.prototype.createFrictionEquation=function(e,t,i,n){var r=this.frictionEquationPool.get();return r.bodyA=e,r.bodyB=t,r.shapeA=i,r.shapeB=n,r.setSlipForce(this.slipForce),r.frictionCoefficient=this.frictionCoefficient,r.relativeVelocity=this.surfaceVelocity,r.enabled=this.enabledEquations,r.needsUpdate=!0,r.stiffness=this.frictionStiffness,r.relaxation=this.frictionRelaxation,r.contactEquations.length=0,r},N.prototype.createFrictionFromContact=function(e){var t=this.createFrictionEquation(e.bodyA,e.bodyB,e.shapeA,e.shapeB);return U.copy(t.contactPointA,e.contactPointA),U.copy(t.contactPointB,e.contactPointB),U.rotate90cw(t.t,e.normalA),t.contactEquations.push(e),t},N.prototype.createFrictionFromAverage=function(e){var t=this.contactEquations[this.contactEquations.length-1],i=this.createFrictionEquation(t.bodyA,t.bodyB,t.shapeA,t.shapeB),n=t.bodyA;t.bodyB,U.set(i.contactPointA,0,0),U.set(i.contactPointB,0,0),U.set(i.t,0,0);for(var r=0;r!==e;r++)(t=this.contactEquations[this.contactEquations.length-1-r]).bodyA===n?(U.add(i.t,i.t,t.normalA),U.add(i.contactPointA,i.contactPointA,t.contactPointA),U.add(i.contactPointB,i.contactPointB,t.contactPointB)):(U.sub(i.t,i.t,t.normalA),U.add(i.contactPointA,i.contactPointA,t.contactPointB),U.add(i.contactPointB,i.contactPointB,t.contactPointA)),i.contactEquations.push(t);var o=1/e;return U.scale(i.contactPointA,i.contactPointA,o),U.scale(i.contactPointB,i.contactPointB,o),U.normalize(i.t,i.t),U.rotate90cw(i.t,i.t),i},N.prototype[p.LINE|p.CONVEX]=N.prototype.convexLine=function(e,t,i,n,r,o,a,s,l){return!l&&0},N.prototype[p.LINE|p.BOX]=N.prototype.lineBox=function(e,t,i,n,r,o,a,s,l){return!l&&0};var d=new w({width:1,height:1}),_=U.create();N.prototype[p.CAPSULE|p.CONVEX]=N.prototype[p.CAPSULE|p.BOX]=N.prototype.convexCapsule=function(e,t,i,n,r,o,a,s,l){var p=_;U.set(p,o.length/2,0),U.rotate(p,p,s),U.add(p,p,a);var h=this.circleConvex(r,o,p,s,e,t,i,n,l,o.radius);U.set(p,-o.length/2,0),U.rotate(p,p,s),U.add(p,p,a);var u=this.circleConvex(r,o,p,s,e,t,i,n,l,o.radius);if(l&&(h||u))return!0;var c=d;return v(c,o),this.convexConvex(e,t,i,n,r,c,a,s,l)+h+u},N.prototype[p.CAPSULE|p.LINE]=N.prototype.lineCapsule=function(e,t,i,n,r,o,a,s,l){return!l&&0};var z=U.create(),g=U.create(),b=new w({width:1,height:1});N.prototype[p.CAPSULE|p.CAPSULE]=N.prototype.capsuleCapsule=function(e,t,i,n,r,o,a,s,l){for(var p=z,h=g,u=0,c=0;c<2;c++){U.set(p,(0===c?-1:1)*t.length/2,0),U.rotate(p,p,n),U.add(p,p,i);for(var d=0;d<2;d++){U.set(h,(0===d?-1:1)*o.length/2,0),U.rotate(h,h,s),U.add(h,h,a),this.enableFrictionReduction&&(f=this.enableFriction,this.enableFriction=!1);var _=this.circleCircle(e,t,p,n,r,o,h,s,l,t.radius,o.radius);if(this.enableFrictionReduction&&(this.enableFriction=f),l&&_)return!0;u+=_}}this.enableFrictionReduction&&(f=this.enableFriction,this.enableFriction=!1);var y=b;v(y,t);var m=this.convexCapsule(e,y,i,n,r,o,a,s,l);if(this.enableFrictionReduction&&(this.enableFriction=f),l&&m)return!0;if(u+=m,this.enableFrictionReduction){var f=this.enableFriction;this.enableFriction=!1}v(y,o);var x=this.convexCapsule(r,y,a,s,e,t,i,n,l);return this.enableFrictionReduction&&(this.enableFriction=f),!(!l||!x)||(u+=x,this.enableFrictionReduction&&u&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(u)),u)},N.prototype[p.LINE|p.LINE]=N.prototype.lineLine=function(e,t,i,n,r,o,a,s,l){return!l&&0},N.prototype[p.PLANE|p.LINE]=N.prototype.planeLine=function(e,t,i,n,r,o,a,s,l){var p=X,h=q,u=Y,c=K,d=Z,_=I,y=J,m=Q,f=$,x=j,v=0;U.set(p,-o.length/2,0),U.set(h,o.length/2,0),U.rotate(u,p,s),U.rotate(c,h,s),H(u,u,a),H(c,c,a),U.copy(p,u),U.copy(h,c),V(d,h,p),U.normalize(_,d),U.rotate90cw(f,_),U.rotate(m,S,n),x[0]=p,x[1]=h;for(var z=0;z<x.length;z++){var g=x[z];V(y,g,i);var b=W(y,m);if(b<0){if(l)return!0;var w=this.createContactEquation(e,r,t,o);v++,U.copy(w.normalA,m),U.normalize(w.normalA,w.normalA),U.scale(y,m,b),V(w.contactPointA,g,y),V(w.contactPointA,w.contactPointA,e.position),V(w.contactPointB,g,a),H(w.contactPointB,w.contactPointB,a),V(w.contactPointB,w.contactPointB,r.position),this.contactEquations.push(w),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(w))}}return!l&&(this.enableFrictionReduction||v&&this.enableFriction&&this.frictionEquations.push(this.createFrictionFromAverage(v)),v)},N.prototype[p.PARTICLE|p.CAPSULE]=N.prototype.particleCapsule=function(e,t,i,n,r,o,a,s,l){return this.circleLine(e,t,i,n,r,o,a,s,l,o.radius,0)},N.prototype[p.CIRCLE|p.LINE]=N.prototype.circleLine=function(e,t,i,n,r,o,a,s,l,p,h){p=p||0,h=void 0!==h?h:t.radius;var u=X,c=q,d=Y,_=K,y=Z,m=I,f=J,x=Q,v=$,z=B,g=L,b=D,w=R,S=F,C=j;U.set(x,-o.length/2,0),U.set(v,o.length/2,0),U.rotate(z,x,s),U.rotate(g,v,s),H(z,z,a),H(g,g,a),U.copy(x,z),U.copy(v,g),V(m,v,x),U.normalize(f,m),U.rotate90cw(y,f),V(b,i,x);var M=W(b,y);V(_,x,a),V(w,i,a);var P=h+p;if(Math.abs(M)<P){U.scale(u,y,M),V(d,i,u),U.scale(c,y,W(y,w)),U.normalize(c,c),U.scale(c,c,p),H(d,d,c);var k=W(f,d),T=W(f,x),O=W(f,v);if(T<k&&k<O){if(l)return!0;var A=this.createContactEquation(e,r,t,o);return U.scale(A.normalA,u,-1),U.normalize(A.normalA,A.normalA),U.scale(A.contactPointA,A.normalA,h),H(A.contactPointA,A.contactPointA,i),V(A.contactPointA,A.contactPointA,e.position),V(A.contactPointB,d,a),H(A.contactPointB,A.contactPointB,a),V(A.contactPointB,A.contactPointB,r.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A)),1}}C[0]=x,C[1]=v;for(var E=0;E<C.length;E++){var G=C[E];if(V(b,G,i),U.squaredLength(b)<Math.pow(P,2)){if(l)return!0;A=this.createContactEquation(e,r,t,o);return U.copy(A.normalA,b),U.normalize(A.normalA,A.normalA),U.scale(A.contactPointA,A.normalA,h),H(A.contactPointA,A.contactPointA,i),V(A.contactPointA,A.contactPointA,e.position),V(A.contactPointB,G,a),U.scale(S,A.normalA,-p),H(A.contactPointB,A.contactPointB,S),H(A.contactPointB,A.contactPointB,a),V(A.contactPointB,A.contactPointB,r.position),this.contactEquations.push(A),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(A)),1}}return 0},N.prototype[p.CIRCLE|p.CAPSULE]=N.prototype.circleCapsule=function(e,t,i,n,r,o,a,s,l){return this.circleLine(e,t,i,n,r,o,a,s,l,o.radius)},N.prototype[p.CIRCLE|p.CONVEX]=N.prototype[p.CIRCLE|p.BOX]=N.prototype.circleConvex=function(e,t,i,n,r,o,a,s,l,p){p="number"==typeof p?p:t.radius;for(var h=X,u=q,c=Y,d=K,_=Z,y=B,m=L,f=R,x=F,v=A,z=E,g=!1,b=Number.MAX_VALUE,w=o.vertices,S=0;S!==w.length+1;S++){var C=w[S%w.length],M=w[(S+1)%w.length];if(U.rotate(h,C,s),U.rotate(u,M,s),H(h,h,a),H(u,u,a),V(c,u,h),U.normalize(d,c),U.rotate90cw(_,d),U.scale(x,_,-t.radius),H(x,x,i),O(x,o,a,s)){U.sub(v,h,x);var P=Math.abs(U.dot(v,_));P<b&&(U.copy(z,x),b=P,U.scale(f,_,P),U.add(f,f,x),g=!0)}}if(g){if(l)return!0;var k=this.createContactEquation(e,r,t,o);return U.sub(k.normalA,z,i),U.normalize(k.normalA,k.normalA),U.scale(k.contactPointA,k.normalA,p),H(k.contactPointA,k.contactPointA,i),V(k.contactPointA,k.contactPointA,e.position),V(k.contactPointB,f,a),H(k.contactPointB,k.contactPointB,a),V(k.contactPointB,k.contactPointB,r.position),this.contactEquations.push(k),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k)),1}if(0<p)for(S=0;S<w.length;S++){var T=w[S];if(U.rotate(m,T,s),H(m,m,a),V(y,m,i),U.squaredLength(y)<Math.pow(p,2)){if(l)return!0;k=this.createContactEquation(e,r,t,o);return U.copy(k.normalA,y),U.normalize(k.normalA,k.normalA),U.scale(k.contactPointA,k.normalA,p),H(k.contactPointA,k.contactPointA,i),V(k.contactPointA,k.contactPointA,e.position),V(k.contactPointB,m,a),H(k.contactPointB,k.contactPointB,a),V(k.contactPointB,k.contactPointB,r.position),this.contactEquations.push(k),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(k)),1}}return 0};var y=U.create(),m=U.create(),f=U.create(),x=U.create();N.prototype[p.PARTICLE|p.CONVEX]=N.prototype[p.PARTICLE|p.BOX]=N.prototype.particleConvex=function(e,t,i,n,r,o,a,s,l){var p=X,h=q,u=Y,c=K,d=Z,_=I,y=J,m=B,f=R,x=k,v=T,z=Number.MAX_VALUE,g=!1,b=o.vertices;if(!O(i,o,a,s))return 0;if(l)return!0;for(var w=0;w!==b.length+1;w++){var S=b[w%b.length],C=b[(w+1)%b.length];U.rotate(p,S,s),U.rotate(h,C,s),H(p,p,a),H(h,h,a),V(u,h,p),U.normalize(c,u),U.rotate90cw(d,c),V(m,i,p),W(m,d),V(_,p,a),V(y,i,a),U.sub(x,p,i);var M=Math.abs(U.dot(x,d));M<z&&(z=M,U.scale(f,d,M),U.add(f,f,i),U.copy(v,d),g=!0)}if(g){var P=this.createContactEquation(e,r,t,o);return U.scale(P.normalA,v,-1),U.normalize(P.normalA,P.normalA),U.set(P.contactPointA,0,0),H(P.contactPointA,P.contactPointA,i),V(P.contactPointA,P.contactPointA,e.position),V(P.contactPointB,f,a),H(P.contactPointB,P.contactPointB,a),V(P.contactPointB,P.contactPointB,r.position),this.contactEquations.push(P),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(P)),1}return 0},N.prototype[p.CIRCLE]=N.prototype.circleCircle=function(e,t,i,n,r,o,a,s,l,p,h){var u=X;p=p||t.radius,h=h||o.radius;V(u,i,a);var c=p+h;if(U.squaredLength(u)>Math.pow(c,2))return 0;if(l)return!0;var d=this.createContactEquation(e,r,t,o);return V(d.normalA,a,i),U.normalize(d.normalA,d.normalA),U.scale(d.contactPointA,d.normalA,p),U.scale(d.contactPointB,d.normalA,-h),H(d.contactPointA,d.contactPointA,i),V(d.contactPointA,d.contactPointA,e.position),H(d.contactPointB,d.contactPointB,a),V(d.contactPointB,d.contactPointB,r.position),this.contactEquations.push(d),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(d)),1},N.prototype[p.PLANE|p.CONVEX]=N.prototype[p.PLANE|p.BOX]=N.prototype.planeConvex=function(e,t,i,n,r,o,a,s,l){var p=X,h=q,u=Y,c=0;U.rotate(h,S,n);for(var d=0;d!==o.vertices.length;d++){var _=o.vertices[d];if(U.rotate(p,_,s),H(p,p,a),V(u,p,i),W(u,h)<=0){if(l)return!0;c++;var y=this.createContactEquation(e,r,t,o);V(u,p,i),U.copy(y.normalA,h);var m=W(u,y.normalA);U.scale(u,y.normalA,m),V(y.contactPointB,p,r.position),V(y.contactPointA,p,u),V(y.contactPointA,y.contactPointA,e.position),this.contactEquations.push(y),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(y))}}return this.enableFrictionReduction&&this.enableFriction&&c&&this.frictionEquations.push(this.createFrictionFromAverage(c)),c},N.prototype[p.PARTICLE|p.PLANE]=N.prototype.particlePlane=function(e,t,i,n,r,o,a,s,l){var p=X,h=q;s=s||0,V(p,i,a),U.rotate(h,S,s);var u=W(p,h);if(0<u)return 0;if(l)return!0;var c=this.createContactEquation(r,e,o,t);return U.copy(c.normalA,h),U.scale(p,c.normalA,u),V(c.contactPointA,i,p),V(c.contactPointA,c.contactPointA,r.position),V(c.contactPointB,i,e.position),this.contactEquations.push(c),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(c)),1},N.prototype[p.CIRCLE|p.PARTICLE]=N.prototype.circleParticle=function(e,t,i,n,r,o,a,s,l){var p=X;if(V(p,a,i),U.squaredLength(p)>Math.pow(t.radius,2))return 0;if(l)return!0;var h=this.createContactEquation(e,r,t,o);return U.copy(h.normalA,p),U.normalize(h.normalA,h.normalA),U.scale(h.contactPointA,h.normalA,t.radius),H(h.contactPointA,h.contactPointA,i),V(h.contactPointA,h.contactPointA,e.position),V(h.contactPointB,a,r.position),this.contactEquations.push(h),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(h)),1};var C=new s({radius:1}),M=U.create(),P=U.create();U.create(),N.prototype[p.PLANE|p.CAPSULE]=N.prototype.planeCapsule=function(e,t,i,n,r,o,a,s,l){var p,h=M,u=P,c=C;U.set(h,-o.length/2,0),U.rotate(h,h,s),H(h,h,a),U.set(u,o.length/2,0),U.rotate(u,u,s),H(u,u,a),c.radius=o.radius,this.enableFrictionReduction&&(p=this.enableFriction,this.enableFriction=!1);var d=this.circlePlane(r,c,h,0,e,t,i,n,l),_=this.circlePlane(r,c,u,0,e,t,i,n,l);if(this.enableFrictionReduction&&(this.enableFriction=p),l)return d||_;var y=d+_;return this.enableFrictionReduction&&y&&this.frictionEquations.push(this.createFrictionFromAverage(y)),y},N.prototype[p.CIRCLE|p.PLANE]=N.prototype.circlePlane=function(e,t,i,n,r,o,a,s,l){var p=e,h=t,u=i,c=r,d=a,_=s;_=_||0;var y=X,m=q,f=Y;V(y,u,d),U.rotate(m,S,_);var x=W(m,y);if(x>h.radius)return 0;if(l)return!0;var v=this.createContactEquation(c,p,o,t);return U.copy(v.normalA,m),U.scale(v.contactPointB,v.normalA,-h.radius),H(v.contactPointB,v.contactPointB,u),V(v.contactPointB,v.contactPointB,p.position),U.scale(f,v.normalA,x),V(v.contactPointA,y,f),H(v.contactPointA,v.contactPointA,d),V(v.contactPointA,v.contactPointA,c.position),this.contactEquations.push(v),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(v)),1},N.prototype[p.CONVEX]=N.prototype[p.CONVEX|p.BOX]=N.prototype[p.BOX]=N.prototype.convexConvex=function(e,t,i,n,r,o,a,s,l,p){var h=X,u=q,c=Y,d=K,_=Z,y=J,m=Q,f=$,x=0;p="number"==typeof p?p:0;if(!N.findSeparatingAxis(t,i,n,o,a,s,h))return 0;V(m,a,i),0<W(h,m)&&U.scale(h,h,-1);var v=N.getClosestEdge(t,n,h,!0),z=N.getClosestEdge(o,s,h);if(-1===v||-1===z)return 0;for(var g=0;g<2;g++){var b,w=v,S=z,C=t,M=o,P=i,k=a,T=n,O=s,A=e,E=r;if(0===g)b=w,w=S,S=b,b=C,C=M,M=b,b=P,P=k,k=b,b=T,T=O,O=b,b=A,A=E,E=b;for(var G=S;G<S+2;G++){var I=M.vertices[(G+M.vertices.length)%M.vertices.length];U.rotate(u,I,O),H(u,u,k);for(var B=0,L=w-1;L<w+2;L++){var D=C.vertices[(L+C.vertices.length)%C.vertices.length],R=C.vertices[(L+1+C.vertices.length)%C.vertices.length];U.rotate(c,D,T),U.rotate(d,R,T),H(c,c,P),H(d,d,P),V(_,d,c),U.rotate90cw(f,_),U.normalize(f,f),V(m,u,c);var F=W(f,m);(L===w&&F<=p||L!==w&&F<=0)&&B++}if(3<=B){if(l)return!0;var j=this.createContactEquation(A,E,C,M);x++;D=C.vertices[w%C.vertices.length],R=C.vertices[(w+1)%C.vertices.length];U.rotate(c,D,T),U.rotate(d,R,T),H(c,c,P),H(d,d,P),V(_,d,c),U.rotate90cw(j.normalA,_),U.normalize(j.normalA,j.normalA),V(m,u,c);F=W(j.normalA,m);U.scale(y,j.normalA,F),V(j.contactPointA,u,P),V(j.contactPointA,j.contactPointA,y),H(j.contactPointA,j.contactPointA,P),V(j.contactPointA,j.contactPointA,A.position),V(j.contactPointB,u,k),H(j.contactPointB,j.contactPointB,k),V(j.contactPointB,j.contactPointB,E.position),this.contactEquations.push(j),this.enableFrictionReduction||this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(j))}}}return this.enableFrictionReduction&&this.enableFriction&&x&&this.frictionEquations.push(this.createFrictionFromAverage(x)),x};var G=U.fromValues(0,0);N.projectConvexOntoAxis=function(e,t,i,n,r){var o,a,s=null,l=null,p=G;U.rotate(p,n,-i);for(var h=0;h<e.vertices.length;h++)o=e.vertices[h],a=W(o,p),(null===s||s<a)&&(s=a),(null===l||a<l)&&(l=a);if(s<l){var u=l;l=s,s=u}var c=W(t,n);U.set(r,l+c,s+c)};var ee=U.fromValues(0,0),te=U.fromValues(0,0),ie=U.fromValues(0,0),ne=U.fromValues(0,0),re=U.fromValues(0,0),oe=U.fromValues(0,0);N.findSeparatingAxis=function(e,t,i,n,r,o,a){var s=null,l=!1,p=!1,h=ee,u=te,c=ie,d=ne,_=re,y=oe;if(e instanceof w&&n instanceof w)for(var m=0;2!==m;m++){var f=e,x=i;1===m&&(f=n,x=o);for(var v=0;2!==v;v++){0===v?U.set(d,0,1):1===v&&U.set(d,1,0),0!==x&&U.rotate(d,d,x),N.projectConvexOntoAxis(e,t,i,d,_),N.projectConvexOntoAxis(n,r,o,d,y);var z=_,g=y;_[0]>y[0]&&(g=_,z=y),l=(b=g[0]-z[1])<=0,(null===s||s<b)&&(U.copy(a,d),s=b,p=l)}}else for(m=0;2!==m;m++){f=e,x=i;1===m&&(f=n,x=o);for(v=0;v!==f.vertices.length;v++){U.rotate(u,f.vertices[v],x),U.rotate(c,f.vertices[(v+1)%f.vertices.length],x),V(h,c,u),U.rotate90cw(d,h),U.normalize(d,d),N.projectConvexOntoAxis(e,t,i,d,_),N.projectConvexOntoAxis(n,r,o,d,y);var b;z=_,g=y;_[0]>y[0]&&(g=_,z=y),l=(b=g[0]-z[1])<=0,(null===s||s<b)&&(U.copy(a,d),s=b,p=l)}}return p};var c=U.fromValues(0,0),ae=U.fromValues(0,0),se=U.fromValues(0,0);N.getClosestEdge=function(e,t,i,n){var r=c,o=ae,a=se;U.rotate(r,i,-t),n&&U.scale(r,r,-1);for(var s=-1,l=e.vertices.length,p=-1,h=0;h!==l;h++){V(o,e.vertices[(h+1)%l],e.vertices[h%l]),U.rotate90cw(a,o),U.normalize(a,a);var u=W(a,r);(-1===s||p<u)&&(s=h%l,p=u)}return s};var le=U.create(),pe=U.create(),he=U.create(),ue=U.create(),ce=U.create(),de=U.create(),_e=U.create();N.prototype[p.CIRCLE|p.HEIGHTFIELD]=N.prototype.circleHeightfield=function(e,t,i,n,r,o,a,s,l,p){var h=o.heights,u=(p=p||t.radius,o.elementWidth),c=pe,d=le,_=ce,y=_e,m=de,f=he,x=ue,v=Math.floor((i[0]-p-a[0])/u),z=Math.ceil((i[0]+p-a[0])/u);v<0&&(v=0),z>=h.length&&(z=h.length-1);for(var g=h[v],b=h[z],w=v;w<z;w++)h[w]<b&&(b=h[w]),h[w]>g&&(g=h[w]);if(i[1]-p>g)return!l&&0;var S=!1;for(w=v;w<z;w++){U.set(f,w*u,h[w]),U.set(x,(w+1)*u,h[w+1]),U.add(f,f,a),U.add(x,x,a),U.sub(m,x,f),U.rotate(m,m,Math.PI/2),U.normalize(m,m),U.scale(d,m,-p),U.add(d,d,i),U.sub(c,d,f);var C=U.dot(c,m);if(d[0]>=f[0]&&d[0]<x[0]&&C<=0){if(l)return!0;S=!0,U.scale(c,m,-C),U.add(_,d,c),U.copy(y,m);var M=this.createContactEquation(r,e,o,t);U.copy(M.normalA,y),U.scale(M.contactPointB,M.normalA,-p),H(M.contactPointB,M.contactPointB,i),V(M.contactPointB,M.contactPointB,e.position),U.copy(M.contactPointA,_),U.sub(M.contactPointA,M.contactPointA,r.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}}if(S=!1,0<p)for(w=v;w<=z;w++)if(U.set(f,w*u,h[w]),U.add(f,f,a),U.sub(c,i,f),U.squaredLength(c)<Math.pow(p,2)){if(l)return!0;S=!0;M=this.createContactEquation(r,e,o,t);U.copy(M.normalA,c),U.normalize(M.normalA,M.normalA),U.scale(M.contactPointB,M.normalA,-p),H(M.contactPointB,M.contactPointB,i),V(M.contactPointB,M.contactPointB,e.position),V(M.contactPointA,f,a),H(M.contactPointA,M.contactPointA,a),V(M.contactPointA,M.contactPointA,r.position),this.contactEquations.push(M),this.enableFriction&&this.frictionEquations.push(this.createFrictionFromContact(M))}return S?1:0};var ye=U.create(),me=U.create(),fe=U.create(),xe=new l({vertices:[U.create(),U.create(),U.create(),U.create()]});N.prototype[p.BOX|p.HEIGHTFIELD]=N.prototype[p.CONVEX|p.HEIGHTFIELD]=N.prototype.convexHeightfield=function(e,t,i,n,r,o,a,s,l){var p=o.heights,h=o.elementWidth,u=ye,c=me,d=fe,_=xe,y=Math.floor((e.aabb.lowerBound[0]-a[0])/h),m=Math.ceil((e.aabb.upperBound[0]-a[0])/h);y<0&&(y=0),m>=p.length&&(m=p.length-1);for(var f=p[y],x=p[m],v=y;v<m;v++)p[v]<x&&(x=p[v]),p[v]>f&&(f=p[v]);if(e.aabb.lowerBound[1]>f)return!l&&0;var z=0;for(v=y;v<m;v++){U.set(u,v*h,p[v]),U.set(c,(v+1)*h,p[v+1]),U.add(u,u,a),U.add(c,c,a);U.set(d,.5*(c[0]+u[0]),.5*(c[1]+u[1]-100)),U.sub(_.vertices[0],c,d),U.sub(_.vertices[1],u,d),U.copy(_.vertices[2],_.vertices[1]),U.copy(_.vertices[3],_.vertices[0]),_.vertices[2][1]-=100,_.vertices[3][1]-=100,z+=this.convexConvex(e,t,i,n,r,_,d,0,l)}return z}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../shapes/Box":37,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Shape":45,"../utils/ContactEquationPool":48,"../utils/FrictionEquationPool":49,"../utils/TupleDictionary":56,"../utils/Utils":57}],11:[function(e,t,i){function a(e){e=e||{},this.from=e.from?l.fromValues(e.from[0],e.from[1]):l.create(),this.to=e.to?l.fromValues(e.to[0],e.to[1]):l.create(),this.checkCollisionResponse=void 0===e.checkCollisionResponse||e.checkCollisionResponse,this.skipBackfaces=!!e.skipBackfaces,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:-1,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:-1,this.mode=void 0!==e.mode?e.mode:a.ANY,this.callback=e.callback||function(e){},this.direction=l.create(),this.length=1,this.update()}t.exports=a;var l=e("../math/vec2");e("../collision/RaycastResult"),e("../shapes/Shape"),e("../collision/AABB"),(a.prototype.constructor=a).CLOSEST=1,a.ANY=2,a.ALL=4,a.prototype.update=function(){var e=this.direction;l.sub(e,this.to,this.from),this.length=l.length(e),l.normalize(e,e)},a.prototype.intersectBodies=function(e,t){for(var i=0,n=t.length;!e.shouldStop(this)&&i<n;i++){var r=t[i],o=r.getAABB();(0<=o.overlapsRay(this)||o.containsPoint(this.from))&&this.intersectBody(e,r)}};var p=l.create();a.prototype.intersectBody=function(e,t){var i=this.checkCollisionResponse;if(!i||t.collisionResponse)for(var n=p,r=0,o=t.shapes.length;r<o;r++){var a=t.shapes[r];if((!i||a.collisionResponse)&&0!=(this.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&this.collisionMask)){l.rotate(n,a.position,t.angle),l.add(n,n,t.position);var s=a.angle+t.angle;if(this.intersectShape(e,a,s,n,t),e.shouldStop(this))break}}},a.prototype.intersectShape=function(e,t,i,n,r){(function(e,t,i){l.sub(o,i,e);var n=l.dot(o,t);return l.scale(s,t,n),l.add(s,s,e),l.squaredDistance(i,s)})(this.from,this.direction,n)>t.boundingRadius*t.boundingRadius||(this._currentBody=r,(this._currentShape=t).raycast(e,this,n,i),this._currentBody=this._currentShape=null)},a.prototype.getAABB=function(e){var t=this.to,i=this.from;l.set(e.lowerBound,Math.min(t[0],i[0]),Math.min(t[1],i[1])),l.set(e.upperBound,Math.max(t[0],i[0]),Math.max(t[1],i[1]))},l.create(),a.prototype.reportIntersection=function(e,t,i,n){var r=(this.from,this.to,this._currentShape),o=this._currentBody;if(!(this.skipBackfaces&&0<l.dot(i,this.direction)))switch(this.mode){case a.ALL:e.set(i,r,o,t,n),this.callback(e);break;case a.CLOSEST:(t<e.fraction||!e.hasHit())&&e.set(i,r,o,t,n);break;case a.ANY:e.set(i,r,o,t,n)}};var o=l.create(),s=l.create()},{"../collision/AABB":7,"../collision/RaycastResult":12,"../math/vec2":30,"../shapes/Shape":45}],12:[function(e,t,i){function n(){this.normal=o.create(),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1}var o=e("../math/vec2"),r=e("../collision/Ray");(t.exports=n).prototype.reset=function(){o.set(this.normal,0,0),this.shape=null,this.body=null,this.faceIndex=-1,this.fraction=-1,this.isStopped=!1},n.prototype.getHitDistance=function(e){return o.distance(e.from,e.to)*this.fraction},n.prototype.hasHit=function(){return-1!==this.fraction},n.prototype.getHitPoint=function(e,t){o.lerp(e,t.from,t.to,this.fraction)},n.prototype.stop=function(){this.isStopped=!0},n.prototype.shouldStop=function(e){return this.isStopped||-1!==this.fraction&&e.mode===r.ANY},n.prototype.set=function(e,t,i,n,r){o.copy(this.normal,e),this.shape=t,this.body=i,this.fraction=n,this.faceIndex=r}},{"../collision/Ray":11,"../math/vec2":30}],13:[function(e,t,i){function n(){u.call(this,u.SAP),this.axisList=[],this.axisIndex=0;var i=this;this._addBodyHandler=function(e){i.axisList.push(e.body)},this._removeBodyHandler=function(e){var t=i.axisList.indexOf(e.body);-1!==t&&i.axisList.splice(t,1)}}var r=e("../utils/Utils"),u=e("../collision/Broadphase");(((t.exports=n).prototype=new u).constructor=n).prototype.setWorld=function(e){this.axisList.length=0,r.appendArray(this.axisList,e.bodies),e.off("addBody",this._addBodyHandler).off("removeBody",this._removeBodyHandler),e.on("addBody",this._addBodyHandler).on("removeBody",this._removeBodyHandler),this.world=e},n.sortAxisList=function(e,t){t|=0;for(var i=1,n=e.length;i<n;i++){for(var r=e[i],o=i-1;0<=o&&!(e[o].aabb.lowerBound[t]<=r.aabb.lowerBound[t]);o--)e[o+1]=e[o];e[o+1]=r}return e},n.prototype.sortList=function(){var e=this.axisList,t=this.axisIndex;n.sortAxisList(e,t)},n.prototype.getCollisionPairs=function(e){var t=this.axisList,i=this.result,n=this.axisIndex;i.length=0;for(var r=t.length;r--;){var o=t[r];o.aabbNeedsUpdate&&o.updateAABB()}this.sortList();for(var a=0,s=0|t.length;a!==s;a++)for(var l=t[a],p=a+1;p<s;p++){var h=t[p];if(!(h.aabb.lowerBound[n]<=l.aabb.upperBound[n]))break;u.canCollide(l,h)&&this.boundingVolumeCheck(l,h)&&i.push(l,h)}return i},n.prototype.aabbQuery=function(e,t,i){i=i||[],this.sortList();var n=this.axisIndex,r="x";1===n&&(r="y"),2===n&&(r="z");for(var o=this.axisList,a=(t.lowerBound[r],t.upperBound[r],0);a<o.length;a++){var s=o[a];s.aabbNeedsUpdate&&s.updateAABB(),s.aabb.overlaps(t)&&i.push(s)}return i}},{"../collision/Broadphase":8,"../utils/Utils":57}],14:[function(e,t,i){function n(e,t,i,n){this.type=i,n=r.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}t.exports=n;var r=e("../utils/Utils");n.prototype.update=function(){throw new Error("method update() not implmemented in this Constraint subclass!")},n.DISTANCE=1,n.GEAR=2,n.LOCK=3,n.PRISMATIC=4,n.REVOLUTE=5,n.prototype.setStiffness=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var n=t[i];n.stiffness=e,n.needsUpdate=!0}},n.prototype.setRelaxation=function(e){for(var t=this.equations,i=0;i!==t.length;i++){var n=t[i];n.relaxation=e,n.needsUpdate=!0}}},{"../utils/Utils":57}],15:[function(e,t,i){function n(e,t,i){i=m.defaults(i,{localAnchorA:[0,0],localAnchorB:[0,0]}),d.call(this,e,t,d.DISTANCE,i),this.localAnchorA=y.fromValues(i.localAnchorA[0],i.localAnchorA[1]),this.localAnchorB=y.fromValues(i.localAnchorB[0],i.localAnchorB[1]);var n,r=this.localAnchorA,o=this.localAnchorB;if(this.distance=0,"number"==typeof i.distance)this.distance=i.distance;else{var a=y.create(),s=y.create(),l=y.create();y.rotate(a,r,e.angle),y.rotate(s,o,t.angle),y.add(l,t.position,s),y.sub(l,l,a),y.sub(l,l,e.position),this.distance=y.length(l)}n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce;var p=new _(e,t,-n,n);this.equations=[p],this.maxForce=n;l=y.create();var h=y.create(),u=y.create(),c=this;p.computeGq=function(){var e=this.bodyA,t=this.bodyB,i=e.position,n=t.position;return y.rotate(h,r,e.angle),y.rotate(u,o,t.angle),y.add(l,n,u),y.sub(l,l,h),y.sub(l,l,i),y.length(l)-c.distance},this.setMaxForce(n),this.upperLimitEnabled=!1,this.upperLimit=1,this.lowerLimitEnabled=!1,this.lowerLimit=0,this.position=0}var d=e("./Constraint"),_=e("../equations/Equation"),y=e("../math/vec2"),m=e("../utils/Utils");((t.exports=n).prototype=new d).constructor=n;var h=y.create(),u=y.create(),c=y.create();n.prototype.update=function(){var e=this.equations[0],t=this.bodyA,i=this.bodyB,n=(this.distance,t.position),r=i.position,o=this.equations[0],a=e.G;y.rotate(u,this.localAnchorA,t.angle),y.rotate(c,this.localAnchorB,i.angle),y.add(h,r,c),y.sub(h,h,u),y.sub(h,h,n),this.position=y.length(h);var s=!1;if(this.upperLimitEnabled&&this.position>this.upperLimit&&(o.maxForce=0,o.minForce=-this.maxForce,this.distance=this.upperLimit,s=!0),this.lowerLimitEnabled&&this.position<this.lowerLimit&&(o.maxForce=this.maxForce,o.minForce=0,this.distance=this.lowerLimit,s=!0),!this.lowerLimitEnabled&&!this.upperLimitEnabled||s){o.enabled=!0,y.normalize(h,h);var l=y.crossLength(u,h),p=y.crossLength(c,h);a[0]=-h[0],a[1]=-h[1],a[2]=-l,a[3]=h[0],a[4]=h[1],a[5]=p}else o.enabled=!1},n.prototype.setMaxForce=function(e){var t=this.equations[0];t.minForce=-e,t.maxForce=e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce}},{"../equations/Equation":22,"../math/vec2":30,"../utils/Utils":57,"./Constraint":14}],16:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,r.GEAR,i),this.ratio=void 0!==i.ratio?i.ratio:1,this.angle=void 0!==i.angle?i.angle:t.angle-this.ratio*e.angle,i.angle=this.angle,i.ratio=this.ratio,this.equations=[new o(e,t,i)],void 0!==i.maxTorque&&this.setMaxTorque(i.maxTorque)}var r=e("./Constraint"),o=(e("../equations/Equation"),e("../equations/AngleLockEquation"));e("../math/vec2"),(((t.exports=n).prototype=new r).constructor=n).prototype.update=function(){var e=this.equations[0];e.ratio!==this.ratio&&e.setRatio(this.ratio),e.angle=this.angle},n.prototype.setMaxTorque=function(e){this.equations[0].setMaxTorque(e)},n.prototype.getMaxTorque=function(e){return this.equations[0].maxForce}},{"../equations/AngleLockEquation":20,"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],17:[function(e,t,i){function n(e,t,i){i=i||{},c.call(this,e,t,c.LOCK,i);var n=void 0===i.maxForce?Number.MAX_VALUE:i.maxForce,r=(i.localAngleB,new _(e,t,-n,n)),o=new _(e,t,-n,n),a=new _(e,t,-n,n),s=d.create(),l=d.create(),p=this;r.computeGq=function(){return d.rotate(s,p.localOffsetB,e.angle),d.sub(l,t.position,e.position),d.sub(l,l,s),l[0]},o.computeGq=function(){return d.rotate(s,p.localOffsetB,e.angle),d.sub(l,t.position,e.position),d.sub(l,l,s),l[1]};var h=d.create(),u=d.create();a.computeGq=function(){return d.rotate(h,p.localOffsetB,t.angle-p.localAngleB),d.scale(h,h,-1),d.sub(l,e.position,t.position),d.add(l,l,h),d.rotate(u,h,-Math.PI/2),d.normalize(u,u),d.dot(l,u)},this.localOffsetB=d.create(),i.localOffsetB?d.copy(this.localOffsetB,i.localOffsetB):(d.sub(this.localOffsetB,t.position,e.position),d.rotate(this.localOffsetB,this.localOffsetB,-e.angle)),this.localAngleB=0,"number"==typeof i.localAngleB?this.localAngleB=i.localAngleB:this.localAngleB=t.angle-e.angle,this.equations.push(r,o,a),this.setMaxForce(n)}var c=e("./Constraint"),d=e("../math/vec2"),_=e("../equations/Equation");(((t.exports=n).prototype=new c).constructor=n).prototype.setMaxForce=function(e){for(var t=this.equations,i=0;i<this.equations.length;i++)t[i].maxForce=e,t[i].minForce=-e},n.prototype.getMaxForce=function(){return this.equations[0].maxForce};var o=d.create(),a=d.create(),s=d.create(),l=d.fromValues(1,0),p=d.fromValues(0,1);n.prototype.update=function(){var e=this.equations[0],t=this.equations[1],i=this.equations[2],n=this.bodyA,r=this.bodyB;d.rotate(o,this.localOffsetB,n.angle),d.rotate(a,this.localOffsetB,r.angle-this.localAngleB),d.scale(a,a,-1),d.rotate(s,a,Math.PI/2),d.normalize(s,s),e.G[0]=-1,e.G[1]=0,e.G[2]=-d.crossLength(o,l),e.G[3]=1,t.G[0]=0,t.G[1]=-1,t.G[2]=-d.crossLength(o,p),t.G[4]=1,i.G[0]=-s[0],i.G[1]=-s[1],i.G[3]=s[0],i.G[4]=s[1],i.G[5]=d.crossLength(a,s)}},{"../equations/Equation":22,"../math/vec2":30,"./Constraint":14}],18:[function(e,t,i){function n(n,r,e){e=e||{},y.call(this,n,r,y.PRISMATIC,e);var o=x.fromValues(0,0),a=x.fromValues(1,0),s=x.fromValues(0,0);e.localAnchorA&&x.copy(o,e.localAnchorA),e.localAxisA&&x.copy(a,e.localAxisA),e.localAnchorB&&x.copy(s,e.localAnchorB),this.localAnchorA=o,this.localAnchorB=s,this.localAxisA=a;var t=this.maxForce=void 0!==e.maxForce?e.maxForce:Number.MAX_VALUE,i=new f(n,r,-t,t),l=new x.create,p=new x.create,h=new x.create,u=new x.create;if(i.computeGq=function(){return x.dot(h,u)},i.updateJacobian=function(){var e=this.G,t=n.position,i=r.position;x.rotate(l,o,n.angle),x.rotate(p,s,r.angle),x.add(h,i,p),x.sub(h,h,t),x.sub(h,h,l),x.rotate(u,a,n.angle+Math.PI/2),e[0]=-u[0],e[1]=-u[1],e[2]=-x.crossLength(l,u)+x.crossLength(u,h),e[3]=u[0],e[4]=u[1],e[5]=x.crossLength(p,u)},this.equations.push(i),!e.disableRotationalLock){var c=new v(n,r,-t,t);this.equations.push(c)}this.position=0,this.velocity=0,this.lowerLimitEnabled=void 0!==e.lowerLimit,this.upperLimitEnabled=void 0!==e.upperLimit,this.lowerLimit=void 0!==e.lowerLimit?e.lowerLimit:0,this.upperLimit=void 0!==e.upperLimit?e.upperLimit:1,this.upperLimitEquation=new m(n,r),this.lowerLimitEquation=new m(n,r),this.upperLimitEquation.minForce=this.lowerLimitEquation.minForce=0,this.upperLimitEquation.maxForce=this.lowerLimitEquation.maxForce=t,this.motorEquation=new f(n,r),this.motorEnabled=!1,this.motorSpeed=0;var d=this,_=this.motorEquation;_.computeGW,_.computeGq=function(){return 0},_.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.velocity,r=i.velocity,o=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,n,o,r,a)+d.motorSpeed}}var y=e("./Constraint"),m=e("../equations/ContactEquation"),f=e("../equations/Equation"),x=e("../math/vec2"),v=e("../equations/RotationalLockEquation");((t.exports=n).prototype=new y).constructor=n;var _=x.create(),z=x.create(),g=x.create(),b=x.create(),w=x.create(),S=x.create();n.prototype.update=function(){var e=this.equations,t=e[0],i=this.upperLimit,n=this.lowerLimit,r=this.upperLimitEquation,o=this.lowerLimitEquation,a=this.bodyA,s=this.bodyB,l=this.localAxisA,p=this.localAnchorA,h=this.localAnchorB;t.updateJacobian(),x.rotate(_,l,a.angle),x.rotate(b,p,a.angle),x.add(z,b,a.position),x.rotate(w,h,s.angle),x.add(g,w,s.position);var u,c=this.position=x.dot(g,_)-x.dot(z,_);if(this.motorEnabled){var d=this.motorEquation.G;d[0]=_[0],d[1]=_[1],d[2]=x.crossLength(_,w),d[3]=-_[0],d[4]=-_[1],d[5]=-x.crossLength(_,b)}this.upperLimitEnabled&&i<c?(x.scale(r.normalA,_,-1),x.sub(r.contactPointA,z,a.position),x.sub(r.contactPointB,g,s.position),x.scale(S,_,i),x.add(r.contactPointA,r.contactPointA,S),-1===e.indexOf(r)&&e.push(r)):-1!==(u=e.indexOf(r))&&e.splice(u,1);this.lowerLimitEnabled&&c<n?(x.scale(o.normalA,_,1),x.sub(o.contactPointA,z,a.position),x.sub(o.contactPointB,g,s.position),x.scale(S,_,n),x.sub(o.contactPointB,o.contactPointB,S),-1===e.indexOf(o)&&e.push(o)):-1!==(u=e.indexOf(o))&&e.splice(u,1)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)}},{"../equations/ContactEquation":21,"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../math/vec2":30,"./Constraint":14}],19:[function(e,t,i){function n(e,t,i){i=i||{},l.call(this,e,t,l.REVOLUTE,i);var n=this.maxForce=void 0!==i.maxForce?i.maxForce:Number.MAX_VALUE;this.pivotA=d.create(),this.pivotB=d.create(),i.worldPivot?(d.sub(this.pivotA,i.worldPivot,e.position),d.sub(this.pivotB,i.worldPivot,t.position),d.rotate(this.pivotA,this.pivotA,-e.angle),d.rotate(this.pivotB,this.pivotB,-t.angle)):(d.copy(this.pivotA,i.localPivotA),d.copy(this.pivotB,i.localPivotB));var r=this.equations=[new p(e,t,-n,n),new p(e,t,-n,n)],o=r[0],a=r[1],s=this;o.computeGq=function(){return d.rotate(_,s.pivotA,e.angle),d.rotate(y,s.pivotB,t.angle),d.add(c,t.position,y),d.sub(c,c,e.position),d.sub(c,c,_),d.dot(c,m)},a.computeGq=function(){return d.rotate(_,s.pivotA,e.angle),d.rotate(y,s.pivotB,t.angle),d.add(c,t.position,y),d.sub(c,c,e.position),d.sub(c,c,_),d.dot(c,f)},a.minForce=o.minForce=-n,a.maxForce=o.maxForce=n,this.motorEquation=new h(e,t),this.motorEnabled=!1,this.angle=0,this.lowerLimitEnabled=!1,this.upperLimitEnabled=!1,this.lowerLimit=0,this.upperLimit=0,this.upperLimitEquation=new u(e,t),this.lowerLimitEquation=new u(e,t),this.upperLimitEquation.minForce=0,this.lowerLimitEquation.maxForce=0}var l=e("./Constraint"),p=e("../equations/Equation"),h=e("../equations/RotationalVelocityEquation"),u=e("../equations/RotationalLockEquation"),d=e("../math/vec2");t.exports=n;var _=d.create(),y=d.create(),m=d.fromValues(1,0),f=d.fromValues(0,1),c=d.create();((n.prototype=new l).constructor=n).prototype.setLimits=function(e,t){"number"==typeof e?(this.lowerLimit=e,this.lowerLimitEnabled=!0):(this.lowerLimit=e,this.lowerLimitEnabled=!1),"number"==typeof t?(this.upperLimit=t,this.upperLimitEnabled=!0):(this.upperLimit=t,this.upperLimitEnabled=!1)},n.prototype.update=function(){var e,t=this.bodyA,i=this.bodyB,n=this.pivotA,r=this.pivotB,o=this.equations,a=(o[0],o[1],o[0]),s=o[1],l=this.upperLimit,p=this.lowerLimit,h=this.upperLimitEquation,u=this.lowerLimitEquation,c=this.angle=i.angle-t.angle;this.upperLimitEnabled&&l<c?(h.angle=l,-1===o.indexOf(h)&&o.push(h)):-1!==(e=o.indexOf(h))&&o.splice(e,1);this.lowerLimitEnabled&&c<p?(u.angle=p,-1===o.indexOf(u)&&o.push(u)):-1!==(e=o.indexOf(u))&&o.splice(e,1);d.rotate(_,n,t.angle),d.rotate(y,r,i.angle),a.G[0]=-1,a.G[1]=0,a.G[2]=-d.crossLength(_,m),a.G[3]=1,a.G[4]=0,a.G[5]=d.crossLength(y,m),s.G[0]=0,s.G[1]=-1,s.G[2]=-d.crossLength(_,f),s.G[3]=0,s.G[4]=1,s.G[5]=d.crossLength(y,f)},n.prototype.enableMotor=function(){this.motorEnabled||(this.equations.push(this.motorEquation),this.motorEnabled=!0)},n.prototype.disableMotor=function(){if(this.motorEnabled){var e=this.equations.indexOf(this.motorEquation);this.equations.splice(e,1),this.motorEnabled=!1}},n.prototype.motorIsEnabled=function(){return!!this.motorEnabled},n.prototype.setMotorSpeed=function(e){if(this.motorEnabled){var t=this.equations.indexOf(this.motorEquation);this.equations[t].relativeVelocity=e}},n.prototype.getMotorSpeed=function(){return!!this.motorEnabled&&this.motorEquation.relativeVelocity}},{"../equations/Equation":22,"../equations/RotationalLockEquation":24,"../equations/RotationalVelocityEquation":25,"../math/vec2":30,"./Constraint":14}],20:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0,this.ratio="number"==typeof i.ratio?i.ratio:1,this.setRatio(this.ratio)}var r=e("./Equation");e("../math/vec2"),(((t.exports=n).prototype=new r).constructor=n).prototype.computeGq=function(){return this.ratio*this.bodyA.angle-this.bodyB.angle+this.angle},n.prototype.setRatio=function(e){var t=this.G;t[2]=e,t[5]=-1,this.ratio=e},n.prototype.setMaxTorque=function(e){this.maxForce=e,this.minForce=-e}},{"../math/vec2":30,"./Equation":22}],21:[function(e,t,i){function n(e,t){r.call(this,e,t,0,Number.MAX_VALUE),this.contactPointA=m.create(),this.penetrationVec=m.create(),this.contactPointB=m.create(),this.normalA=m.create(),this.restitution=0,this.firstImpact=!1,this.shapeA=null,this.shapeB=null}var r=e("./Equation"),m=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeB=function(e,t,i){var n,r,o=this.bodyA,a=this.bodyB,s=this.contactPointA,l=this.contactPointB,p=o.position,h=a.position,u=this.penetrationVec,c=this.normalA,d=this.G,_=m.crossLength(s,c),y=m.crossLength(l,c);return d[0]=-c[0],d[1]=-c[1],d[2]=-_,d[3]=c[0],d[4]=c[1],d[5]=y,m.add(u,h,l),m.sub(u,u,p),m.sub(u,u,s),this.firstImpact&&0!==this.restitution?(r=0,n=1/t*(1+this.restitution)*this.computeGW()):(r=m.dot(c,u)+this.offset,n=this.computeGW()),-r*e-n*t-i*this.computeGiMf()}},{"../math/vec2":30,"./Equation":22}],22:[function(e,t,i){function o(e,t,i,n){this.minForce=void 0===i?-Number.MAX_VALUE:i,this.maxForce=void 0===n?Number.MAX_VALUE:n,this.bodyA=e,this.bodyB=t,this.stiffness=o.DEFAULT_STIFFNESS,this.relaxation=o.DEFAULT_RELAXATION,this.G=new a.ARRAY_TYPE(6);for(var r=0;r<6;r++)this.G[r]=0;this.offset=0,this.a=0,this.b=0,this.epsilon=0,this.timeStep=1/60,this.needsUpdate=!0,this.multiplier=0,this.relativeVelocity=0,this.enabled=!0}t.exports=o;var u=e("../math/vec2"),a=e("../utils/Utils");e("../objects/Body"),(o.prototype.constructor=o).DEFAULT_STIFFNESS=1e6,o.DEFAULT_RELAXATION=4,o.prototype.update=function(){var e=this.stiffness,t=this.relaxation,i=this.timeStep;this.a=4/(i*(1+4*t)),this.b=4*t/(1+4*t),this.epsilon=4/(i*i*e*(1+4*t)),this.needsUpdate=!1},o.prototype.gmult=function(e,t,i,n,r){return e[0]*t[0]+e[1]*t[1]+e[2]*i+e[3]*n[0]+e[4]*n[1]+e[5]*r},o.prototype.computeB=function(e,t,i){var n=this.computeGW();return-this.computeGq()*e-n*t-this.computeGiMf()*i};var s=u.create(),l=u.create();o.prototype.computeGq=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=(t.position,i.position,t.angle),r=i.angle;return this.gmult(e,s,n,l,r)+this.offset},o.prototype.computeGW=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.velocity,r=i.velocity,o=t.angularVelocity,a=i.angularVelocity;return this.gmult(e,n,o,r,a)+this.relativeVelocity},o.prototype.computeGWlambda=function(){var e=this.G,t=this.bodyA,i=this.bodyB,n=t.vlambda,r=i.vlambda,o=t.wlambda,a=i.wlambda;return this.gmult(e,n,o,r,a)};var c=u.create(),d=u.create();o.prototype.computeGiMf=function(){var e=this.bodyA,t=this.bodyB,i=e.force,n=e.angularForce,r=t.force,o=t.angularForce,a=e.invMassSolve,s=t.invMassSolve,l=e.invInertiaSolve,p=t.invInertiaSolve,h=this.G;return u.scale(c,i,a),u.multiply(c,e.massMultiplier,c),u.scale(d,r,s),u.multiply(d,t.massMultiplier,d),this.gmult(h,c,n*l,d,o*p)},o.prototype.computeGiMGt=function(){var e=this.bodyA,t=this.bodyB,i=e.invMassSolve,n=t.invMassSolve,r=e.invInertiaSolve,o=t.invInertiaSolve,a=this.G;return a[0]*a[0]*i*e.massMultiplier[0]+a[1]*a[1]*i*e.massMultiplier[1]+a[2]*a[2]*r+a[3]*a[3]*n*t.massMultiplier[0]+a[4]*a[4]*n*t.massMultiplier[1]+a[5]*a[5]*o};var _=u.create(),y=u.create(),m=u.create();u.create(),u.create(),u.create(),o.prototype.addToWlambda=function(e){var t=this.bodyA,i=this.bodyB,n=_,r=y,o=m,a=t.invMassSolve,s=i.invMassSolve,l=t.invInertiaSolve,p=i.invInertiaSolve,h=this.G;r[0]=h[0],r[1]=h[1],o[0]=h[3],o[1]=h[4],u.scale(n,r,a*e),u.multiply(n,n,t.massMultiplier),u.add(t.vlambda,t.vlambda,n),t.wlambda+=l*h[2]*e,u.scale(n,o,s*e),u.multiply(n,n,i.massMultiplier),u.add(i.vlambda,i.vlambda,n),i.wlambda+=p*h[5]*e},o.prototype.computeInvC=function(e){return 1/(this.computeGiMGt()+e)}},{"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],23:[function(e,t,i){function n(e,t,i){r.call(this,e,t,-i,i),this.contactPointA=s.create(),this.contactPointB=s.create(),this.t=s.create(),this.contactEquations=[],this.shapeA=null,this.shapeB=null,this.frictionCoefficient=.3}var s=e("../math/vec2"),r=e("./Equation");e("../utils/Utils"),(((t.exports=n).prototype=new r).constructor=n).prototype.setSlipForce=function(e){this.maxForce=e,this.minForce=-e},n.prototype.getSlipForce=function(){return this.maxForce},n.prototype.computeB=function(e,t,i){var n=(this.bodyA,this.bodyB,this.contactPointA),r=this.contactPointB,o=this.t,a=this.G;return a[0]=-o[0],a[1]=-o[1],a[2]=-s.crossLength(n,o),a[3]=o[0],a[4]=o[1],a[5]=s.crossLength(r,o),-this.computeGW()*t-i*this.computeGiMf()}},{"../math/vec2":30,"../utils/Utils":57,"./Equation":22}],24:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.angle=i.angle||0;var n=this.G;n[2]=1,n[5]=-1}var r=e("./Equation"),o=e("../math/vec2");((t.exports=n).prototype=new r).constructor=n;var a=o.create(),s=o.create(),l=o.fromValues(1,0),p=o.fromValues(0,1);n.prototype.computeGq=function(){return o.rotate(a,l,this.bodyA.angle+this.angle),o.rotate(s,p,this.bodyB.angle),o.dot(a,s)}},{"../math/vec2":30,"./Equation":22}],25:[function(e,t,i){function n(e,t){r.call(this,e,t,-Number.MAX_VALUE,Number.MAX_VALUE),this.relativeVelocity=1,this.ratio=1}var r=e("./Equation");e("../math/vec2"),(((t.exports=n).prototype=new r).constructor=n).prototype.computeB=function(e,t,i){var n=this.G;n[2]=-1,n[5]=this.ratio;var r=this.computeGiMf();return-this.computeGW()*t-i*r}},{"../math/vec2":30,"./Equation":22}],26:[function(e,t,i){var n=function(){};(t.exports=n).prototype={constructor:n,on:function(e,t,i){t.context=i||this,void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this},has:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;if(t){if(void 0!==i[e]&&-1!==i[e].indexOf(t))return!0}else if(void 0!==i[e])return!0;return!1},off:function(e,t){if(void 0===this._listeners)return this;var i=this._listeners,n=i[e].indexOf(t);return-1!==n&&i[e].splice(n,1),this},emit:function(e){if(void 0===this._listeners)return this;var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var i=0,n=t.length;i<n;i++){var r=t[i];r.call(r.context,e)}}return this}}},{}],27:[function(e,t,i){function n(e,t,i){if(i=i||{},!(e instanceof r&&t instanceof r))throw new Error("First two arguments must be Material instances.");this.id=n.idCounter++,this.materialA=e,this.materialB=t,this.friction=void 0!==i.friction?Number(i.friction):.3,this.restitution=void 0!==i.restitution?Number(i.restitution):0,this.stiffness=void 0!==i.stiffness?Number(i.stiffness):o.DEFAULT_STIFFNESS,this.relaxation=void 0!==i.relaxation?Number(i.relaxation):o.DEFAULT_RELAXATION,this.frictionStiffness=void 0!==i.frictionStiffness?Number(i.frictionStiffness):o.DEFAULT_STIFFNESS,this.frictionRelaxation=void 0!==i.frictionRelaxation?Number(i.frictionRelaxation):o.DEFAULT_RELAXATION,this.surfaceVelocity=void 0!==i.surfaceVelocity?Number(i.surfaceVelocity):0,this.contactSkinSize=.005}var r=e("./Material"),o=e("../equations/Equation");(t.exports=n).idCounter=0},{"../equations/Equation":22,"./Material":28}],28:[function(e,t,i){function n(e){this.id=e||n.idCounter++}(t.exports=n).idCounter=0},{}],29:[function(e,t,i){var x={GetArea:function(e){if(e.length<6)return 0;for(var t=e.length-2,i=0,n=0;n<t;n+=2)i+=(e[n+2]-e[n])*(e[n+1]+e[n+3]);return.5*-(i+=(e[0]-e[t])*(e[t+1]+e[1]))},Triangulate:function(e){var t=e.length>>1;if(t<3)return[];for(var i=[],n=[],r=0;r<t;r++)n.push(r);r=0;for(var o=t;3<o;){var a=n[(r+0)%o],s=n[(r+1)%o],l=n[(r+2)%o],p=e[2*a],h=e[2*a+1],u=e[2*s],c=e[2*s+1],d=e[2*l],_=e[2*l+1],y=!1;if(x._convex(p,h,u,c,d,_)){y=!0;for(var m=0;m<o;m++){var f=n[m];if(f!=a&&f!=s&&f!=l&&x._PointInTriangle(e[2*f],e[2*f+1],p,h,u,c,d,_)){y=!1;break}}}if(y)i.push(a,s,l),n.splice((r+1)%o,1),o--,r=0;else if(r++>3*o)break}return i.push(n[0],n[1],n[2]),i},_PointInTriangle:function(e,t,i,n,r,o,a,s){var l=a-i,p=s-n,h=r-i,u=o-n,c=e-i,d=t-n,_=l*l+p*p,y=l*h+p*u,m=l*c+p*d,f=h*h+u*u,x=h*c+u*d,v=1/(_*f-y*y),z=(f*m-y*x)*v,g=(_*x-y*m)*v;return 0<=z&&0<=g&&z+g<1},_convex:function(e,t,i,n,r,o){return 0<=(t-n)*(r-i)+(i-e)*(o-n)}};t.exports=x},{}],30:[function(e,t,i){var a=t.exports={},n=e("../utils/Utils");a.crossLength=function(e,t){return e[0]*t[1]-e[1]*t[0]},a.crossVZ=function(e,t,i){return a.rotate(e,t,-Math.PI/2),a.scale(e,e,i),e},a.crossZV=function(e,t,i){return a.rotate(e,i,Math.PI/2),a.scale(e,e,t),e},a.rotate=function(e,t,i){if(0!==i){var n=Math.cos(i),r=Math.sin(i),o=t[0],a=t[1];e[0]=n*o-r*a,e[1]=r*o+n*a}else e[0]=t[0],e[1]=t[1]},a.rotate90cw=function(e,t){var i=t[0],n=t[1];e[0]=n,e[1]=-i},a.toLocalFrame=function(e,t,i,n){a.copy(e,t),a.sub(e,e,i),a.rotate(e,e,-n)},a.toGlobalFrame=function(e,t,i,n){a.copy(e,t),a.rotate(e,e,n),a.add(e,e,i)},a.vectorToLocalFrame=function(e,t,i){a.rotate(e,t,-i)},a.vectorToGlobalFrame=function(e,t,i){a.rotate(e,t,i)},a.centroid=function(e,t,i,n){return a.add(e,t,i),a.add(e,e,n),a.scale(e,e,1/3),e},a.create=function(){var e=new n.ARRAY_TYPE(2);return e[0]=0,e[1]=0,e},a.clone=function(e){var t=new n.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t},a.fromValues=function(e,t){var i=new n.ARRAY_TYPE(2);return i[0]=e,i[1]=t,i},a.copy=function(e,t){return e[0]=t[0],e[1]=t[1],e},a.set=function(e,t,i){return e[0]=t,e[1]=i,e},a.add=function(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e},a.subtract=function(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e},a.sub=a.subtract,a.multiply=function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},a.mul=a.multiply,a.divide=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},a.div=a.divide,a.scale=function(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e},a.distance=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},a.dist=a.distance,a.squaredDistance=function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n},a.sqrDist=a.squaredDistance,a.length=function(e){var t=e[0],i=e[1];return Math.sqrt(t*t+i*i)},a.len=a.length,a.squaredLength=function(e){var t=e[0],i=e[1];return t*t+i*i},a.sqrLen=a.squaredLength,a.negate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e},a.normalize=function(e,t){var i=t[0],n=t[1],r=i*i+n*n;return 0<r&&(r=1/Math.sqrt(r),e[0]=t[0]*r,e[1]=t[1]*r),e},a.dot=function(e,t){return e[0]*t[0]+e[1]*t[1]},a.str=function(e){return"vec2("+e[0]+", "+e[1]+")"},a.lerp=function(e,t,i,n){var r=t[0],o=t[1];return e[0]=r+n*(i[0]-r),e[1]=o+n*(i[1]-o),e},a.reflect=function(e,t,i){var n=t[0]*i[0]+t[1]*i[1];e[0]=t[0]-2*i[0]*n,e[1]=t[1]-2*i[1]*n},a.getLineSegmentsIntersection=function(e,t,i,n,r){var o=a.getLineSegmentsIntersectionFraction(t,i,n,r);return!(o<0||(e[0]=t[0]+o*(i[0]-t[0]),e[1]=t[1]+o*(i[1]-t[1]),0))},a.getLineSegmentsIntersectionFraction=function(e,t,i,n){var r,o,a=t[0]-e[0],s=t[1]-e[1],l=n[0]-i[0],p=n[1]-i[1];return r=(-s*(e[0]-i[0])+a*(e[1]-i[1]))/(-l*s+a*p),o=(l*(e[1]-i[1])-p*(e[0]-i[0]))/(-l*s+a*p),0<=r&&r<=1&&0<=o&&o<=1?o:-1}},{"../utils/Utils":57}],31:[function(e,t,i){function s(e){e=e||{},a.call(this),this.id=e.id||++s._idCounter,this.world=null,this.shapes=[],this.mass=e.mass||0,this.invMass=0,this.inertia=0,this.invInertia=0,this.invMassSolve=0,this.invInertiaSolve=0,this.fixedRotation=!!e.fixedRotation,this.fixedX=!!e.fixedX,this.fixedY=!!e.fixedY,this.massMultiplier=u.create(),this.position=u.fromValues(0,0),e.position&&u.copy(this.position,e.position),this.interpolatedPosition=u.fromValues(0,0),this.interpolatedAngle=0,this.previousPosition=u.fromValues(0,0),this.previousAngle=0,this.velocity=u.fromValues(0,0),e.velocity&&u.copy(this.velocity,e.velocity),this.vlambda=u.fromValues(0,0),this.wlambda=0,this.angle=e.angle||0,this.angularVelocity=e.angularVelocity||0,this.force=u.create(),e.force&&u.copy(this.force,e.force),this.angularForce=e.angularForce||0,this.damping="number"==typeof e.damping?e.damping:.1,this.angularDamping="number"==typeof e.angularDamping?e.angularDamping:.1,this.type=s.STATIC,void 0!==e.type?this.type=e.type:e.mass?this.type=s.DYNAMIC:this.type=s.STATIC,this.boundingRadius=0,this.aabb=new o,this.aabbNeedsUpdate=!0,this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.wantsToSleep=!1,this.sleepState=s.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.2,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.gravityScale=void 0!==e.gravityScale?e.gravityScale:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.idleTime=0,this.timeLastSleepy=0,this.ccdSpeedThreshold=void 0!==e.ccdSpeedThreshold?e.ccdSpeedThreshold:-1,this.ccdIterations=void 0!==e.ccdIterations?e.ccdIterations:10,this.concavePath=null,this._wakeUpAfterNarrowphase=!1,this.updateMassProperties()}var u=e("../math/vec2"),p=e("poly-decomp"),h=e("../shapes/Convex"),n=e("../collision/RaycastResult"),r=e("../collision/Ray"),o=e("../collision/AABB"),a=e("../events/EventEmitter");(((t.exports=s).prototype=new a).constructor=s)._idCounter=0,s.prototype.updateSolveMassProperties=function(){this.sleepState===s.SLEEPING||this.type===s.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve=0):(this.invMassSolve=this.invMass,this.invInertiaSolve=this.invInertia)},s.prototype.setDensity=function(e){var t=this.getArea();this.mass=t*e,this.updateMassProperties()},s.prototype.getArea=function(){for(var e=0,t=0;t<this.shapes.length;t++)e+=this.shapes[t].area;return e},s.prototype.getAABB=function(){return this.aabbNeedsUpdate&&this.updateAABB(),this.aabb};var l=new o,c=u.create();s.prototype.updateAABB=function(){for(var e=this.shapes,t=e.length,i=c,n=this.angle,r=0;r!==t;r++){var o=e[r],a=o.angle+n;u.rotate(i,o.position,n),u.add(i,i,this.position),o.computeAABB(l,i,a),0===r?this.aabb.copy(l):this.aabb.extend(l)}this.aabbNeedsUpdate=!1},s.prototype.updateBoundingRadius=function(){for(var e=this.shapes,t=e.length,i=0,n=0;n!==t;n++){var r=e[n],o=u.length(r.position),a=r.boundingRadius;i<o+a&&(i=o+a)}this.boundingRadius=i},s.prototype.addShape=function(e,t,i){if(e.body)throw new Error("A shape can only be added to one body.");e.body=this,t?u.copy(e.position,t):u.set(e.position,0,0),e.angle=i||0,this.shapes.push(e),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0},s.prototype.removeShape=function(e){var t=this.shapes.indexOf(e);return-1!==t&&(this.shapes.splice(t,1),this.aabbNeedsUpdate=!0,!(e.body=null))},s.prototype.updateMassProperties=function(){if(this.type===s.STATIC||this.type===s.KINEMATIC)this.mass=Number.MAX_VALUE,this.invMass=0,this.inertia=Number.MAX_VALUE,this.invInertia=0;else{var e=this.shapes,t=e.length,i=this.mass/t,n=0;if(this.fixedRotation)this.inertia=Number.MAX_VALUE,this.invInertia=0;else{for(var r=0;r<t;r++){var o=e[r],a=u.squaredLength(o.position);n+=o.computeMomentOfInertia(i)+i*a}this.inertia=n,this.invInertia=0<n?1/n:0}this.invMass=1/this.mass,u.set(this.massMultiplier,this.fixedX?0:1,this.fixedY?0:1)}},u.create(),s.prototype.applyForce=function(e,t){if(u.add(this.force,this.force,e),t){var i=u.crossLength(t,e);this.angularForce+=i}};var d=u.create(),_=u.create(),y=u.create();s.prototype.applyForceLocal=function(e,t){t=t||y;var i=d,n=_;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(n,t),this.applyForce(i,n)};var m=u.create();s.prototype.applyImpulse=function(e,t){if(this.type===s.DYNAMIC){var i=m;if(u.scale(i,e,this.invMass),u.multiply(i,this.massMultiplier,i),u.add(this.velocity,i,this.velocity),t){var n=u.crossLength(t,e);n*=this.invInertia,this.angularVelocity+=n}}};var f=u.create(),x=u.create(),v=u.create();s.prototype.applyImpulseLocal=function(e,t){t=t||v;var i=f,n=x;this.vectorToWorldFrame(i,e),this.vectorToWorldFrame(n,t),this.applyImpulse(i,n)},s.prototype.toLocalFrame=function(e,t){u.toLocalFrame(e,t,this.position,this.angle)},s.prototype.toWorldFrame=function(e,t){u.toGlobalFrame(e,t,this.position,this.angle)},s.prototype.vectorToLocalFrame=function(e,t){u.vectorToLocalFrame(e,t,this.angle)},s.prototype.vectorToWorldFrame=function(e,t){u.vectorToGlobalFrame(e,t,this.angle)},s.prototype.fromPolygon=function(e,t){t=t||{};for(var i=this.shapes.length;0<=i;--i)this.removeShape(this.shapes[i]);var n,r=new p.Polygon;if(r.vertices=e,r.makeCCW(),"number"==typeof t.removeCollinearPoints&&r.removeCollinearPoints(t.removeCollinearPoints),void 0===t.skipSimpleCheck&&!r.isSimple())return!1;this.concavePath=r.vertices.slice(0);for(i=0;i<this.concavePath.length;i++){var o=[0,0];u.copy(o,this.concavePath[i]),this.concavePath[i]=o}n=t.optimalDecomp?r.decomp():r.quickDecomp();var a=u.create();for(i=0;i!==n.length;i++){for(var s=new h({vertices:n[i].vertices}),l=0;l!==s.vertices.length;l++){o=s.vertices[l];u.sub(o,o,s.centerOfMass)}u.scale(a,s.centerOfMass,1),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.addShape(s,a)}return this.adjustCenterOfMass(),this.aabbNeedsUpdate=!0};var z=(u.fromValues(0,0),u.fromValues(0,0)),g=u.fromValues(0,0),b=u.fromValues(0,0);s.prototype.adjustCenterOfMass=function(){var e=z,t=g,i=b,n=0;u.set(t,0,0);for(var r=0;r!==this.shapes.length;r++){var o=this.shapes[r];u.scale(e,o.position,o.area),u.add(t,t,e),n+=o.area}u.scale(i,t,1/n);for(r=0;r!==this.shapes.length;r++){o=this.shapes[r];u.sub(o.position,o.position,i)}u.add(this.position,this.position,i);for(r=0;this.concavePath&&r<this.concavePath.length;r++)u.sub(this.concavePath[r],this.concavePath[r],i);this.updateMassProperties(),this.updateBoundingRadius()},s.prototype.setZeroForce=function(){u.set(this.force,0,0),this.angularForce=0},s.prototype.resetConstraintVelocity=function(){var e=this.vlambda;u.set(e,0,0),this.wlambda=0},s.prototype.addConstraintVelocity=function(){var e=this.velocity;u.add(e,e,this.vlambda),this.angularVelocity+=this.wlambda},s.prototype.applyDamping=function(e){if(this.type===s.DYNAMIC){var t=this.velocity;u.scale(t,t,Math.pow(1-this.damping,e)),this.angularVelocity*=Math.pow(1-this.angularDamping,e)}},s.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=s.AWAKE,this.idleTime=0,e!==s.AWAKE&&this.emit(s.wakeUpEvent)},s.prototype.sleep=function(){this.sleepState=s.SLEEPING,this.angularVelocity=0,this.angularForce=0,u.set(this.velocity,0,0),u.set(this.force,0,0),this.emit(s.sleepEvent)},s.prototype.sleepTick=function(e,t,i){this.allowSleep&&this.type!==s.SLEEPING&&(this.wantsToSleep=!1,this.sleepState,u.squaredLength(this.velocity)+Math.pow(this.angularVelocity,2)>=Math.pow(this.sleepSpeedLimit,2)?(this.idleTime=0,this.sleepState=s.AWAKE):(this.idleTime+=i,this.sleepState=s.SLEEPY),this.idleTime>this.sleepTimeLimit&&(t?this.wantsToSleep=!0:this.sleep()))},s.prototype.overlaps=function(e){return this.world.overlapKeeper.bodiesAreOverlapping(this,e)};var w=u.create(),S=u.create();s.prototype.integrate=function(e){var t=this.invMass,i=this.force,n=this.position,r=this.velocity;u.copy(this.previousPosition,this.position),this.previousAngle=this.angle,this.fixedRotation||(this.angularVelocity+=this.angularForce*this.invInertia*e),u.scale(w,i,e*t),u.multiply(w,this.massMultiplier,w),u.add(r,w,r),this.integrateToTimeOfImpact(e)||(u.scale(S,r,e),u.add(n,n,S),this.fixedRotation||(this.angle+=this.angularVelocity*e)),this.aabbNeedsUpdate=!0};var C=new n,M=new r({mode:r.ALL}),P=u.create(),k=u.create(),T=u.create(),O=u.create();s.prototype.integrateToTimeOfImpact=function(e){if(this.ccdSpeedThreshold<0||u.squaredLength(this.velocity)<Math.pow(this.ccdSpeedThreshold,2))return!1;u.normalize(P,this.velocity),u.scale(k,this.velocity,e),u.add(k,k,this.position),u.sub(T,k,this.position);var t,i=this.angularVelocity*e,n=u.length(T),r=1,o=this;if(C.reset(),M.callback=function(e){e.body!==o&&(t=e.body,e.getHitPoint(k,M),u.sub(T,k,o.position),r=u.length(T)/n,e.stop())},u.copy(M.from,this.position),u.copy(M.to,k),M.update(),this.world.raycast(C,M),!t)return!1;var a=this.angle;u.copy(O,this.position);for(var s=0,l=0,p=0,h=r;l<=h&&s<this.ccdIterations;)s++,p=(h-l)/2,u.scale(S,T,r),u.add(this.position,O,S),this.angle=a+i*r,this.updateAABB(),this.aabb.overlaps(t.aabb)&&this.world.narrowphase.bodiesOverlap(this,t)?l=p:h=p;return r=p,u.copy(this.position,O),this.angle=a,u.scale(S,T,r),u.add(this.position,this.position,S),this.fixedRotation||(this.angle+=i*r),!0},s.prototype.getVelocityAtPoint=function(e,t){return u.crossVZ(e,t,this.angularVelocity),u.subtract(e,this.velocity,e),e},s.sleepyEvent={type:"sleepy"},s.sleepEvent={type:"sleep"},s.wakeUpEvent={type:"wakeup"},s.DYNAMIC=1,s.STATIC=2,s.KINEMATIC=4,s.AWAKE=0,s.SLEEPY=1,s.SLEEPING=2},{"../collision/AABB":7,"../collision/Ray":11,"../collision/RaycastResult":12,"../events/EventEmitter":26,"../math/vec2":30,"../shapes/Convex":40,"poly-decomp":5}],32:[function(e,t,i){function n(e,t,i){i=i||{},a.call(this,e,t,i),this.localAnchorA=f.fromValues(0,0),this.localAnchorB=f.fromValues(0,0),i.localAnchorA&&f.copy(this.localAnchorA,i.localAnchorA),i.localAnchorB&&f.copy(this.localAnchorB,i.localAnchorB),i.worldAnchorA&&this.setWorldAnchorA(i.worldAnchorA),i.worldAnchorB&&this.setWorldAnchorB(i.worldAnchorB);var n=f.create(),r=f.create();this.getWorldAnchorA(n),this.getWorldAnchorB(r);var o=f.distance(n,r);this.restLength="number"==typeof i.restLength?i.restLength:o}var f=e("../math/vec2"),a=e("./Spring");e("../utils/Utils"),(((t.exports=n).prototype=new a).constructor=n).prototype.setWorldAnchorA=function(e){this.bodyA.toLocalFrame(this.localAnchorA,e)},n.prototype.setWorldAnchorB=function(e){this.bodyB.toLocalFrame(this.localAnchorB,e)},n.prototype.getWorldAnchorA=function(e){this.bodyA.toWorldFrame(e,this.localAnchorA)},n.prototype.getWorldAnchorB=function(e){this.bodyB.toWorldFrame(e,this.localAnchorB)};var x=f.create(),v=f.create(),z=f.create(),g=f.create(),b=f.create(),w=f.create(),S=f.create(),C=f.create(),M=f.create();n.prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restLength,n=this.bodyA,r=this.bodyB,o=x,a=v,s=z,l=g,p=M,h=b,u=w,c=S,d=C;this.getWorldAnchorA(h),this.getWorldAnchorB(u),f.sub(c,h,n.position),f.sub(d,u,r.position),f.sub(o,u,h);var _=f.len(o);f.normalize(a,o),f.sub(s,r.velocity,n.velocity),f.crossZV(p,r.angularVelocity,d),f.add(s,s,p),f.crossZV(p,n.angularVelocity,c),f.sub(s,s,p),f.scale(l,a,-e*(_-i)-t*f.dot(s,a)),f.sub(n.force,n.force,l),f.add(r.force,r.force,l);var y=f.crossLength(c,l),m=f.crossLength(d,l);n.angularForce-=y,r.angularForce+=m}},{"../math/vec2":30,"../utils/Utils":57,"./Spring":34}],33:[function(e,t,i){function n(e,t,i){i=i||{},r.call(this,e,t,i),this.restAngle="number"==typeof i.restAngle?i.restAngle:t.angle-e.angle}var r=(e("../math/vec2"),e("./Spring"));(((t.exports=n).prototype=new r).constructor=n).prototype.applyForce=function(){var e=this.stiffness,t=this.damping,i=this.restAngle,n=this.bodyA,r=this.bodyB,o=-e*(r.angle-n.angle-i)-t*(r.angularVelocity-n.angularVelocity)*0;n.angularForce-=o,r.angularForce+=o}},{"../math/vec2":30,"./Spring":34}],34:[function(e,t,i){function n(e,t,i){i=r.defaults(i,{stiffness:100,damping:1}),this.stiffness=i.stiffness,this.damping=i.damping,this.bodyA=e,this.bodyB=t}var r=(e("../math/vec2"),e("../utils/Utils"));(t.exports=n).prototype.applyForce=function(){}},{"../math/vec2":30,"../utils/Utils":57}],35:[function(e,t,i){function n(e,t){t=t||{},this.chassisBody=e,this.wheels=[],this.groundBody=new l({mass:0}),this.world=null;var i=this;this.preStepCallback=function(){i.update()}}function r(e,t){t=t||{},this.vehicle=e,this.forwardEquation=new s(e.chassisBody,e.groundBody),this.sideEquation=new s(e.chassisBody,e.groundBody),this.steerValue=0,this.engineForce=0,this.setSideFriction(void 0!==t.sideFriction?t.sideFriction:5),this.localForwardVector=o.fromValues(0,1),t.localForwardVector&&o.copy(this.localForwardVector,t.localForwardVector),this.localPosition=o.fromValues(0,0),t.localPosition&&o.copy(this.localPosition,t.localPosition),a.apply(this,e.chassisBody,e.groundBody),this.equations.push(this.forwardEquation,this.sideEquation),this.setBrakeForce(0)}var o=e("../math/vec2"),a=(e("../utils/Utils"),e("../constraints/Constraint")),s=e("../equations/FrictionEquation"),l=e("../objects/Body");(t.exports=n).prototype.addToWorld=function(e){(this.world=e).addBody(this.groundBody),e.on("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.addConstraint(i)}},n.prototype.removeFromWorld=function(){var e=this.world;e.removeBody(this.groundBody),e.off("preStep",this.preStepCallback);for(var t=0;t<this.wheels.length;t++){var i=this.wheels[t];e.removeConstraint(i)}this.world=null},n.prototype.addWheel=function(e){var t=new r(this,e);return this.wheels.push(t),t},n.prototype.update=function(){for(var e=0;e<this.wheels.length;e++)this.wheels[e].update()},(r.prototype=new a).setBrakeForce=function(e){this.forwardEquation.setSlipForce(e)},r.prototype.setSideFriction=function(e){this.sideEquation.setSlipForce(e)};var p=o.create(),h=o.create();r.prototype.getSpeed=function(){return this.vehicle.chassisBody.vectorToWorldFrame(h,this.localForwardVector),this.vehicle.chassisBody.getVelocityAtPoint(p,h),o.dot(p,h)};var u=o.create();r.prototype.update=function(){this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t,this.localForwardVector),o.rotate(this.sideEquation.t,this.localForwardVector,Math.PI/2),this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t,this.sideEquation.t),o.rotate(this.forwardEquation.t,this.forwardEquation.t,this.steerValue),o.rotate(this.sideEquation.t,this.sideEquation.t,this.steerValue),this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB,this.localPosition),o.copy(this.sideEquation.contactPointB,this.forwardEquation.contactPointB),this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA,this.localPosition),o.copy(this.sideEquation.contactPointA,this.forwardEquation.contactPointA),o.normalize(u,this.forwardEquation.t),o.scale(u,u,this.engineForce),this.vehicle.chassisBody.applyForce(u,this.forwardEquation.contactPointA)}},{"../constraints/Constraint":14,"../equations/FrictionEquation":23,"../math/vec2":30,"../objects/Body":31,"../utils/Utils":57}],36:[function(e,t,i){var n=t.exports={AABB:e("./collision/AABB"),AngleLockEquation:e("./equations/AngleLockEquation"),Body:e("./objects/Body"),Broadphase:e("./collision/Broadphase"),Capsule:e("./shapes/Capsule"),Circle:e("./shapes/Circle"),Constraint:e("./constraints/Constraint"),ContactEquation:e("./equations/ContactEquation"),ContactEquationPool:e("./utils/ContactEquationPool"),ContactMaterial:e("./material/ContactMaterial"),Convex:e("./shapes/Convex"),DistanceConstraint:e("./constraints/DistanceConstraint"),Equation:e("./equations/Equation"),EventEmitter:e("./events/EventEmitter"),FrictionEquation:e("./equations/FrictionEquation"),FrictionEquationPool:e("./utils/FrictionEquationPool"),GearConstraint:e("./constraints/GearConstraint"),GSSolver:e("./solver/GSSolver"),Heightfield:e("./shapes/Heightfield"),Line:e("./shapes/Line"),LockConstraint:e("./constraints/LockConstraint"),Material:e("./material/Material"),Narrowphase:e("./collision/Narrowphase"),NaiveBroadphase:e("./collision/NaiveBroadphase"),Particle:e("./shapes/Particle"),Plane:e("./shapes/Plane"),Pool:e("./utils/Pool"),RevoluteConstraint:e("./constraints/RevoluteConstraint"),PrismaticConstraint:e("./constraints/PrismaticConstraint"),Ray:e("./collision/Ray"),RaycastResult:e("./collision/RaycastResult"),Box:e("./shapes/Box"),RotationalVelocityEquation:e("./equations/RotationalVelocityEquation"),SAPBroadphase:e("./collision/SAPBroadphase"),Shape:e("./shapes/Shape"),Solver:e("./solver/Solver"),Spring:e("./objects/Spring"),TopDownVehicle:e("./objects/TopDownVehicle"),LinearSpring:e("./objects/LinearSpring"),RotationalSpring:e("./objects/RotationalSpring"),Utils:e("./utils/Utils"),World:e("./world/World"),vec2:e("./math/vec2"),version:e("../package.json").version};Object.defineProperty(n,"Rectangle",{get:function(){return this.Box}})},{"../package.json":6,"./collision/AABB":7,"./collision/Broadphase":8,"./collision/NaiveBroadphase":9,"./collision/Narrowphase":10,"./collision/Ray":11,"./collision/RaycastResult":12,"./collision/SAPBroadphase":13,"./constraints/Constraint":14,"./constraints/DistanceConstraint":15,"./constraints/GearConstraint":16,"./constraints/LockConstraint":17,"./constraints/PrismaticConstraint":18,"./constraints/RevoluteConstraint":19,"./equations/AngleLockEquation":20,"./equations/ContactEquation":21,"./equations/Equation":22,"./equations/FrictionEquation":23,"./equations/RotationalVelocityEquation":25,"./events/EventEmitter":26,"./material/ContactMaterial":27,"./material/Material":28,"./math/vec2":30,"./objects/Body":31,"./objects/LinearSpring":32,"./objects/RotationalSpring":33,"./objects/Spring":34,"./objects/TopDownVehicle":35,"./shapes/Box":37,"./shapes/Capsule":38,"./shapes/Circle":39,"./shapes/Convex":40,"./shapes/Heightfield":41,"./shapes/Line":42,"./shapes/Particle":43,"./shapes/Plane":44,"./shapes/Shape":45,"./solver/GSSolver":46,"./solver/Solver":47,"./utils/ContactEquationPool":48,"./utils/FrictionEquationPool":49,"./utils/Pool":55,"./utils/Utils":57,"./world/World":61}],37:[function(e,t,i){function n(e){"number"==typeof e&&"number"==typeof arguments[1]&&(e={width:e,height:arguments[1]}),e=e||{};var t=this.width=e.width||1,i=this.height=e.height||1,n=[o.fromValues(-t/2,-i/2),o.fromValues(t/2,-i/2),o.fromValues(t/2,i/2),o.fromValues(-t/2,i/2)],r=[o.fromValues(1,0),o.fromValues(0,1)];e.vertices=n,e.axes=r,e.type=a.BOX,s.call(this,e)}var o=e("../math/vec2"),a=e("./Shape"),s=e("./Convex");(((t.exports=n).prototype=new s).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.width,i=this.height;return e*(i*i+t*t)/12},n.prototype.updateBoundingRadius=function(){var e=this.width,t=this.height;this.boundingRadius=Math.sqrt(e*e+t*t)/2},o.create(),o.create(),o.create(),o.create(),n.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)},n.prototype.updateArea=function(){this.area=this.width*this.height}},{"../math/vec2":30,"./Convex":40,"./Shape":45}],38:[function(e,t,i){function n(e){"number"==typeof e&&"number"==typeof arguments[1]&&(e={length:e,radius:arguments[1]}),e=e||{},this.length=e.length||1,this.radius=e.radius||1,e.type=r.CAPSULE,r.call(this,e)}var r=e("./Shape"),b=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.radius,i=this.length+t,n=2*t;return e*(n*n+i*i)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius+this.length/2},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius+2*this.radius*this.length};var o=b.create();n.prototype.computeAABB=function(e,t,i){var n=this.radius;b.set(o,this.length/2,0),0!==i&&b.rotate(o,o,i),b.set(e.upperBound,Math.max(o[0]+n,-o[0]+n),Math.max(o[1]+n,-o[1]+n)),b.set(e.lowerBound,Math.min(o[0]-n,-o[0]-n),Math.min(o[1]-n,-o[1]-n)),b.add(e.lowerBound,e.lowerBound,t),b.add(e.upperBound,e.upperBound,t)};var w=b.create(),S=b.create(),C=b.create(),M=b.create(),P=b.fromValues(0,1);n.prototype.raycast=function(e,t,i,n){for(var r=t.from,o=t.to,a=(t.direction,w),s=S,l=C,p=M,h=this.length/2,u=0;u<2;u++){var c=this.radius*(2*u-1);if(b.set(l,-h,c),b.set(p,h,c),b.toGlobalFrame(l,l,i,n),b.toGlobalFrame(p,p,i,n),0<=(_=b.getLineSegmentsIntersectionFraction(r,o,l,p))&&(b.rotate(s,P,n),b.scale(s,s,2*u-1),t.reportIntersection(e,_,s,-1),e.shouldStop(t)))return}var d=Math.pow(this.radius,2)+Math.pow(h,2);for(u=0;u<2;u++){b.set(l,h*(2*u-1),0),b.toGlobalFrame(l,l,i,n);var _,y=Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2),m=2*((o[0]-r[0])*(r[0]-l[0])+(o[1]-r[1])*(r[1]-l[1])),f=Math.pow(r[0]-l[0],2)+Math.pow(r[1]-l[1],2)-Math.pow(this.radius,2);if(!((_=Math.pow(m,2)-4*y*f)<0))if(0===_){if(b.lerp(a,r,o,_),b.squaredDistance(a,i)>d&&(b.sub(s,a,l),b.normalize(s,s),t.reportIntersection(e,_,s,-1),e.shouldStop(t)))return}else{var x=Math.sqrt(_),v=1/(2*y),z=(-m-x)*v,g=(-m+x)*v;if(0<=z&&z<=1&&(b.lerp(a,r,o,z),b.squaredDistance(a,i)>d&&(b.sub(s,a,l),b.normalize(s,s),t.reportIntersection(e,z,s,-1),e.shouldStop(t))))return;if(0<=g&&g<=1&&(b.lerp(a,r,o,g),b.squaredDistance(a,i)>d&&(b.sub(s,a,l),b.normalize(s,s),t.reportIntersection(e,g,s,-1),e.shouldStop(t))))return}}}},{"../math/vec2":30,"./Shape":45}],39:[function(e,t,i){function n(e){"number"==typeof e&&(e={radius:e}),e=e||{},this.radius=e.radius||1,e.type=r.CIRCLE,r.call(this,e)}var r=e("./Shape"),f=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){var t=this.radius;return e*t*t/2},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.radius},n.prototype.updateArea=function(){this.area=Math.PI*this.radius*this.radius},n.prototype.computeAABB=function(e,t,i){var n=this.radius;f.set(e.upperBound,n,n),f.set(e.lowerBound,-n,-n),t&&(f.add(e.lowerBound,e.lowerBound,t),f.add(e.upperBound,e.upperBound,t))};var x=f.create(),v=f.create();n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=this.radius,s=Math.pow(o[0]-r[0],2)+Math.pow(o[1]-r[1],2),l=2*((o[0]-r[0])*(r[0]-i[0])+(o[1]-r[1])*(r[1]-i[1])),p=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)-Math.pow(a,2),h=Math.pow(l,2)-4*s*p,u=x,c=v;if(!(h<0))if(0===h)f.lerp(u,r,o,h),f.sub(c,u,i),f.normalize(c,c),t.reportIntersection(e,h,c,-1);else{var d=Math.sqrt(h),_=1/(2*s),y=(-l-d)*_,m=(-l+d)*_;if(0<=y&&y<=1&&(f.lerp(u,r,o,y),f.sub(c,u,i),f.normalize(c,c),t.reportIntersection(e,y,c,-1),e.shouldStop(t)))return;0<=m&&m<=1&&(f.lerp(u,r,o,m),f.sub(c,u,i),f.normalize(c,c),t.reportIntersection(e,m,c,-1))}}},{"../math/vec2":30,"./Shape":45}],40:[function(e,t,i){function c(e){Array.isArray(e)&&(e={vertices:e,axes:arguments[1]}),e=e||{},this.vertices=[];for(var t=void 0!==e.vertices?e.vertices:[],i=0;i<t.length;i++){var n=d.create();d.copy(n,t[i]),this.vertices.push(n)}if(this.axes=[],e.axes)for(i=0;i<e.axes.length;i++){var r=d.create();d.copy(r,e.axes[i]),this.axes.push(r)}else for(i=0;i<this.vertices.length;i++){var o=this.vertices[i],a=this.vertices[(i+1)%this.vertices.length],s=d.create();d.sub(s,a,o),d.rotate90cw(s,s),d.normalize(s,s),this.axes.push(s)}if(this.centerOfMass=d.fromValues(0,0),this.triangles=[],this.vertices.length&&(this.updateTriangles(),this.updateCenterOfMass()),this.boundingRadius=0,e.type=l.CONVEX,l.call(this,e),this.updateBoundingRadius(),this.updateArea(),this.area<0)throw new Error("Convex vertices must be given in conter-clockwise winding.")}var l=e("./Shape"),d=e("../math/vec2"),s=e("../math/polyk");e("poly-decomp"),((t.exports=c).prototype=new l).constructor=c;var p=d.create(),a=d.create();c.prototype.projectOntoLocalAxis=function(e,t){for(var i,n,r=null,o=null,a=(e=p,0);a<this.vertices.length;a++)i=this.vertices[a],n=d.dot(i,e),(null===r||r<n)&&(r=n),(null===o||n<o)&&(o=n);if(r<o){var s=o;o=r,r=s}d.set(t,o,r)},c.prototype.projectOntoWorldAxis=function(e,t,i,n){var r=a;this.projectOntoLocalAxis(e,n),0!==i?d.rotate(r,e,i):r=e;var o=d.dot(t,r);d.set(n,n[0]+o,n[1]+o)},c.prototype.updateTriangles=function(){for(var e=[],t=this.triangles.length=0;t<this.vertices.length;t++){var i=this.vertices[t];e.push(i[0],i[1])}var n=s.Triangulate(e);for(t=0;t<n.length;t+=3){var r=n[t],o=n[t+1],a=n[t+2];this.triangles.push([r,o,a])}};var _=d.create(),y=d.create(),m=d.create(),f=d.create(),x=d.create();d.create(),d.create(),d.create(),d.create(),c.prototype.updateCenterOfMass=function(){var e=this.triangles,t=this.vertices,i=this.centerOfMass,n=_,r=m,o=f,a=x,s=y;d.set(i,0,0);for(var l=0,p=0;p!==e.length;p++){var h=e[p];r=t[h[0]],o=t[h[1]],a=t[h[2]];d.centroid(n,r,o,a);var u=c.triangleArea(r,o,a);l+=u,d.scale(s,n,u),d.add(i,i,s)}d.scale(i,i,1/l)},c.prototype.computeMomentOfInertia=function(e){for(var t=0,i=0,n=this.vertices.length,r=n-1,o=0;o<n;r=o,o++){var a=this.vertices[r],s=this.vertices[o],l=Math.abs(d.crossLength(a,s));t+=l*(d.dot(s,s)+d.dot(s,a)+d.dot(a,a)),i+=l}return e/6*(t/i)},c.prototype.updateBoundingRadius=function(){for(var e=this.vertices,t=0,i=0;i!==e.length;i++){var n=d.squaredLength(e[i]);t<n&&(t=n)}this.boundingRadius=Math.sqrt(t)},c.triangleArea=function(e,t,i){return.5*((t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1]))},c.prototype.updateArea=function(){this.updateTriangles(),this.area=0;for(var e=this.triangles,t=this.vertices,i=0;i!==e.length;i++){var n=e[i],r=t[n[0]],o=t[n[1]],a=t[n[2]],s=c.triangleArea(r,o,a);this.area+=s}},c.prototype.computeAABB=function(e,t,i){e.setFromPoints(this.vertices,t,i,0)};var v=d.create(),z=d.create(),g=d.create();c.prototype.raycast=function(e,t,i,n){var r=v,o=z,a=g,s=this.vertices;d.toLocalFrame(r,t.from,i,n),d.toLocalFrame(o,t.to,i,n);for(var l=s.length,p=0;p<l&&!e.shouldStop(t);p++){var h=s[p],u=s[(p+1)%l],c=d.getLineSegmentsIntersectionFraction(r,o,h,u);0<=c&&(d.sub(a,u,h),d.rotate(a,a,-Math.PI/2+n),d.normalize(a,a),t.reportIntersection(e,c,a,p))}}},{"../math/polyk":29,"../math/vec2":30,"./Shape":45,"poly-decomp":5}],41:[function(e,t,i){function n(e){if(Array.isArray(e)&&(e={heights:e},"object"==typeof arguments[1]))for(var t in arguments[1])e[t]=arguments[1][t];e=e||{},this.heights=e.heights?e.heights.slice(0):[],this.maxValue=e.maxValue||null,this.minValue=e.minValue||null,this.elementWidth=e.elementWidth||.1,void 0!==e.maxValue&&void 0!==e.minValue||this.updateMaxMinValues(),e.type=r.HEIGHTFIELD,r.call(this,e)}var r=e("./Shape"),m=e("../math/vec2");e("../utils/Utils"),(((t.exports=n).prototype=new r).constructor=n).prototype.updateMaxMinValues=function(){for(var e=this.heights,t=e[0],i=e[0],n=0;n!==e.length;n++){var r=e[n];t<r&&(t=r),r<i&&(i=r)}this.maxValue=t,this.minValue=i},n.prototype.computeMomentOfInertia=function(e){return Number.MAX_VALUE},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.updateArea=function(){for(var e=this.heights,t=0,i=0;i<e.length-1;i++)t+=(e[i]+e[i+1])/2*this.elementWidth;this.area=t};var o=[m.create(),m.create(),m.create(),m.create()];n.prototype.computeAABB=function(e,t,i){m.set(o[0],0,this.maxValue),m.set(o[1],this.elementWidth*this.heights.length,this.maxValue),m.set(o[2],this.elementWidth*this.heights.length,this.minValue),m.set(o[3],0,this.minValue),e.setFromPoints(o,t,i)},n.prototype.getLineSegment=function(e,t,i){var n=this.heights,r=this.elementWidth;m.set(e,i*r,n[i]),m.set(t,(i+1)*r,n[i+1])},n.prototype.getSegmentIndex=function(e){return Math.floor(e[0]/this.elementWidth)},n.prototype.getClampedSegmentIndex=function(e){var t=this.getSegmentIndex(e);return Math.min(this.heights.length,Math.max(t,0))};var f=(m.create(),m.create()),x=m.create(),v=m.create(),z=m.create(),g=m.create();m.fromValues(0,1),n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=(t.direction,f),s=x,l=v,p=z,h=g;m.toLocalFrame(p,r,i,n),m.toLocalFrame(h,o,i,n);var u=this.getClampedSegmentIndex(p),c=this.getClampedSegmentIndex(h);if(c<u){var d=u;u=c,c=d}for(var _=0;_<this.heights.length-1;_++){this.getLineSegment(s,l,_);var y=m.getLineSegmentsIntersectionFraction(p,h,s,l);if(0<=y&&(m.sub(a,l,s),m.rotate(a,a,n+Math.PI/2),m.normalize(a,a),t.reportIntersection(e,y,a,-1),e.shouldStop(t)))return}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],42:[function(e,t,i){function n(e){"number"==typeof e&&(e={length:e}),e=e||{},this.length=e.length||1,e.type=r.LINE,r.call(this,e)}var r=e("./Shape"),u=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){return e*Math.pow(this.length,2)/12},n.prototype.updateBoundingRadius=function(){this.boundingRadius=this.length/2};var o=[u.create(),u.create()];n.prototype.computeAABB=function(e,t,i){var n=this.length/2;u.set(o[0],-n,0),u.set(o[1],n,0),e.setFromPoints(o,t,i,0)};var c=(u.create(),u.create()),d=u.create(),_=u.create(),y=u.fromValues(0,1);n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=d,s=_,l=this.length/2;u.set(a,-l,0),u.set(s,l,0),u.toGlobalFrame(a,a,i,n),u.toGlobalFrame(s,s,i,n);var p=u.getLineSegmentsIntersectionFraction(a,s,r,o);if(0<=p){var h=c;u.rotate(h,y,n),t.reportIntersection(e,p,h,-1)}}},{"../math/vec2":30,"./Shape":45}],43:[function(e,t,i){function n(e){(e=e||{}).type=r.PARTICLE,r.call(this,e)}var r=e("./Shape"),o=e("../math/vec2");(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=0},n.prototype.computeAABB=function(e,t,i){o.copy(e.lowerBound,t),o.copy(e.upperBound,t)}},{"../math/vec2":30,"./Shape":45}],44:[function(e,t,i){function n(e){(e=e||{}).type=r.PLANE,r.call(this,e)}var r=e("./Shape"),d=e("../math/vec2");e("../utils/Utils"),(((t.exports=n).prototype=new r).constructor=n).prototype.computeMomentOfInertia=function(e){return 0},n.prototype.updateBoundingRadius=function(){this.boundingRadius=Number.MAX_VALUE},n.prototype.computeAABB=function(e,t,i){var n=i%(2*Math.PI),r=d.set,o=Number.MAX_VALUE,a=e.lowerBound,s=e.upperBound;0===n?(r(a,-o,-o),r(s,o,0)):n===Math.PI/2?(r(a,0,-o),r(s,o,o)):n===Math.PI?(r(a,-o,0),r(s,o,o)):n===3*Math.PI/2?(r(a,-o,-o),r(s,0,o)):(r(a,-o,-o),r(s,o,o)),d.add(a,a,t),d.add(s,s,t)},n.prototype.updateArea=function(){this.area=Number.MAX_VALUE};var _=d.create(),y=(d.create(),d.create(),d.create()),m=d.create();n.prototype.raycast=function(e,t,i,n){var r=t.from,o=t.to,a=t.direction,s=_,l=y,p=m;d.set(l,0,1),d.rotate(l,l,n),d.sub(p,r,i);var h=d.dot(p,l);if(d.sub(p,o,i),!(0<h*d.dot(p,l)||d.squaredDistance(r,o)<h*h)){var u=d.dot(l,a);d.sub(s,r,i);var c=-d.dot(l,s)/u/t.length;t.reportIntersection(e,c,l,-1)}}},{"../math/vec2":30,"../utils/Utils":57,"./Shape":45}],45:[function(e,t,i){function n(e){e=e||{},this.body=null,this.position=r.fromValues(0,0),e.position&&r.copy(this.position,e.position),this.angle=e.angle||0,this.type=e.type||0,this.id=n.idCounter++,this.boundingRadius=0,this.collisionGroup=void 0!==e.collisionGroup?e.collisionGroup:1,this.collisionResponse=void 0===e.collisionResponse||e.collisionResponse,this.collisionMask=void 0!==e.collisionMask?e.collisionMask:1,this.material=e.material||null,this.area=0,this.sensor=void 0!==e.sensor&&e.sensor,this.type&&this.updateBoundingRadius(),this.updateArea()}t.exports=n;var r=e("../math/vec2");n.idCounter=0,n.CIRCLE=1,n.PARTICLE=2,n.PLANE=4,n.CONVEX=8,n.LINE=16,n.BOX=32,Object.defineProperty(n,"RECTANGLE",{get:function(){return n.BOX}}),n.CAPSULE=64,n.HEIGHTFIELD=128,n.prototype.computeMomentOfInertia=function(e){},n.prototype.updateBoundingRadius=function(){},n.prototype.updateArea=function(){},n.prototype.computeAABB=function(e,t,i){},n.prototype.raycast=function(e,t,i,n){}},{"../math/vec2":30}],46:[function(e,t,i){function b(e){n.call(this,e,n.GS),e=e||{},this.iterations=e.iterations||10,this.tolerance=e.tolerance||1e-7,this.arrayStep=30,this.lambda=new S.ARRAY_TYPE(this.arrayStep),this.Bs=new S.ARRAY_TYPE(this.arrayStep),this.invCs=new S.ARRAY_TYPE(this.arrayStep),this.useZeroRHS=!1,this.frictionIterations=0,this.usedIterations=0}var w=e("../math/vec2"),n=e("./Solver"),S=e("../utils/Utils"),C=e("../equations/FrictionEquation");(((t.exports=b).prototype=new n).constructor=b).prototype.solve=function(e,t){this.sortEquations();var i,n,r=0,o=this.iterations,a=this.frictionIterations,s=this.equations,l=s.length,p=Math.pow(this.tolerance*l,2),h=t.bodies,u=t.bodies.length,c=(w.add,w.set,this.useZeroRHS),d=this.lambda;if(this.usedIterations=0,l)for(var _=0;_!==u;_++){h[_].updateSolveMassProperties()}d.length<l&&(d=this.lambda=new S.ARRAY_TYPE(l+this.arrayStep),this.Bs=new S.ARRAY_TYPE(l+this.arrayStep),this.invCs=new S.ARRAY_TYPE(l+this.arrayStep)),function(e){for(var t=e.length;t--;)e[t]=0}(d);for(var y=this.invCs,m=this.Bs,_=(d=this.lambda,0);_!==s.length;_++){var f;((f=s[_]).timeStep!==e||f.needsUpdate)&&(f.timeStep=e,f.update()),m[_]=f.computeB(f.a,f.b,e),y[_]=f.computeInvC(f.epsilon)}if(0!==l){for(_=0;_!==u;_++){h[_].resetConstraintVelocity()}if(a){for(r=0;r!==a;r++){for(n=i=0;n!==l;n++){f=s[n];var x=b.iterateEquation(n,f,f.epsilon,m,y,d,c,e,r);i+=Math.abs(x)}if(this.usedIterations++,i*i<=p)break}for(b.updateMultipliers(s,d,1/e),n=0;n!==l;n++){var v=s[n];if(v instanceof C){for(var z=0,g=0;g!==v.contactEquations.length;g++)z+=v.contactEquations[g].multiplier;z*=v.frictionCoefficient/v.contactEquations.length,v.maxForce=z,v.minForce=-z}}}for(r=0;r!==o;r++){for(n=i=0;n!==l;n++){f=s[n];x=b.iterateEquation(n,f,f.epsilon,m,y,d,c,e,r);i+=Math.abs(x)}if(this.usedIterations++,i*i<=p)break}for(_=0;_!==u;_++)h[_].addConstraintVelocity();b.updateMultipliers(s,d,1/e)}},b.updateMultipliers=function(e,t,i){for(var n=e.length;n--;)e[n].multiplier=t[n]*i},b.iterateEquation=function(e,t,i,n,r,o,a,s,l){var p=n[e],h=r[e],u=o[e],c=t.computeGWlambda(),d=t.maxForce,_=t.minForce;a&&(p=0);var y=h*(p-c-i*u),m=u+y;return m<_*s?y=_*s-u:d*s<m&&(y=d*s-u),o[e]+=y,t.addToWlambda(y),y}},{"../equations/FrictionEquation":23,"../math/vec2":30,"../utils/Utils":57,"./Solver":47}],47:[function(e,t,i){function n(e,t){e=e||{},r.call(this),this.type=t,this.equations=[],this.equationSortFunction=e.equationSortFunction||!1}var r=(e("../utils/Utils"),e("../events/EventEmitter"));(((t.exports=n).prototype=new r).constructor=n).prototype.solve=function(e,t){throw new Error("Solver.solve should be implemented by subclasses!")};var o={bodies:[]};n.prototype.solveIsland=function(e,t){this.removeAllEquations(),t.equations.length&&(this.addEquations(t.equations),o.bodies.length=0,t.getBodies(o.bodies),o.bodies.length&&this.solve(e,o))},n.prototype.sortEquations=function(){this.equationSortFunction&&this.equations.sort(this.equationSortFunction)},n.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},n.prototype.addEquations=function(e){for(var t=0,i=e.length;t!==i;t++){var n=e[t];n.enabled&&this.equations.push(n)}},n.prototype.removeEquation=function(e){var t=this.equations.indexOf(e);-1!==t&&this.equations.splice(t,1)},n.prototype.removeAllEquations=function(){this.equations.length=0},n.GS=1,n.ISLAND=2},{"../events/EventEmitter":26,"../utils/Utils":57}],48:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../equations/ContactEquation"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/ContactEquation":21,"./Pool":55}],49:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../equations/FrictionEquation"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.bodyA=e.bodyB=null,this}},{"../equations/FrictionEquation":23,"./Pool":55}],50:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../world/IslandNode"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.reset(),this}},{"../world/IslandNode":60,"./Pool":55}],51:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("../world/Island"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.reset(),this}},{"../world/Island":58,"./Pool":55}],52:[function(e,t,i){function n(){this.overlappingShapesLastState=new r,this.overlappingShapesCurrentState=new r,this.recordPool=new o({size:16}),this.tmpDict=new r,this.tmpArray1=[]}var r=e("./TupleDictionary"),o=(e("./OverlapKeeperRecord"),e("./OverlapKeeperRecordPool"));e("./Utils"),(t.exports=n).prototype.tick=function(){for(var e=this.overlappingShapesLastState,t=this.overlappingShapesCurrentState,i=e.keys.length;i--;){var n=e.keys[i],r=e.getByKey(n);t.getByKey(n),r&&this.recordPool.release(r)}e.reset(),e.copy(t),t.reset()},n.prototype.setOverlapping=function(e,t,i,n){var r=(this.overlappingShapesLastState,this.overlappingShapesCurrentState);if(!r.get(t.id,n.id)){var o=this.recordPool.get();o.set(e,t,i,n),r.set(t.id,n.id,o)}},n.prototype.getNewOverlaps=function(e){return this.getDiff(this.overlappingShapesLastState,this.overlappingShapesCurrentState,e)},n.prototype.getEndOverlaps=function(e){return this.getDiff(this.overlappingShapesCurrentState,this.overlappingShapesLastState,e)},n.prototype.bodiesAreOverlapping=function(e,t){for(var i=this.overlappingShapesCurrentState,n=i.keys.length;n--;){var r=i.keys[n],o=i.data[r];if(o.bodyA===e&&o.bodyB===t||o.bodyA===t&&o.bodyB===e)return!0}return!1},n.prototype.getDiff=function(e,t,i){var n=e,r=t;(i=i||[]).length=0;for(var o=r.keys.length;o--;){var a=r.keys[o],s=r.data[a];if(!s)throw new Error("Key "+a+" had no data!");n.data[a]||i.push(s)}return i},n.prototype.isNewOverlap=function(e,t){var i=0|e.id,n=0|t.id,r=this.overlappingShapesLastState,o=this.overlappingShapesCurrentState;return!r.get(i,n)&&!!o.get(i,n)},n.prototype.getNewBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getNewOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},n.prototype.getEndBodyOverlaps=function(e){this.tmpArray1.length=0;var t=this.getEndOverlaps(this.tmpArray1);return this.getBodyDiff(t,e)},n.prototype.getBodyDiff=function(e,t){t=t||[];for(var i=this.tmpDict,n=e.length;n--;){var r=e[n];i.set(0|r.bodyA.id,0|r.bodyB.id,r)}for(n=i.keys.length;n--;){(r=i.getByKey(i.keys[n]))&&t.push(r.bodyA,r.bodyB)}return i.reset(),t}},{"./OverlapKeeperRecord":53,"./OverlapKeeperRecordPool":54,"./TupleDictionary":56,"./Utils":57}],53:[function(e,t,i){function r(e,t,i,n){this.shapeA=t,this.shapeB=n,this.bodyA=e,this.bodyB=i}(t.exports=r).prototype.set=function(e,t,i,n){r.call(this,e,t,i,n)}},{}],54:[function(e,t,i){function n(){o.apply(this,arguments)}var r=e("./OverlapKeeperRecord"),o=e("./Pool");(((t.exports=n).prototype=new o).constructor=n).prototype.create=function(){return new r},n.prototype.destroy=function(e){return e.bodyA=e.bodyB=e.shapeA=e.shapeB=null,this}},{"./OverlapKeeperRecord":53,"./Pool":55}],55:[function(e,t,i){function n(e){e=e||{},this.objects=[],void 0!==e.size&&this.resize(e.size)}(t.exports=n).prototype.resize=function(e){for(var t=this.objects;t.length>e;)t.pop();for(;t.length<e;)t.push(this.create());return this},n.prototype.get=function(){var e=this.objects;return e.length?e.pop():this.create()},n.prototype.release=function(e){return this.destroy(e),this.objects.push(e),this}},{}],56:[function(e,t,i){function n(){this.data={},this.keys=[]}var r=e("./Utils");(t.exports=n).prototype.getKey=function(e,t){return(0|(e|=0))==(0|(t|=0))?-1:0|((0|t)<(0|e)?e<<16|65535&t:t<<16|65535&e)},n.prototype.getByKey=function(e){return e|=0,this.data[e]},n.prototype.get=function(e,t){return this.data[this.getKey(e,t)]},n.prototype.set=function(e,t,i){if(!i)throw new Error("No data!");var n=this.getKey(e,t);return this.data[n]||this.keys.push(n),this.data[n]=i,n},n.prototype.reset=function(){for(var e=this.data,t=this.keys,i=t.length;i--;)delete e[t[i]];t.length=0},n.prototype.copy=function(e){this.reset(),r.appendArray(this.keys,e.keys);for(var t=e.keys.length;t--;){var i=e.keys[t];this.data[i]=e.data[i]}}},{"./Utils":57}],57:[function(e,t,i){function n(){}(t.exports=n).appendArray=function(e,t){if(t.length<15e4)e.push.apply(e,t);else for(var i=0,n=t.length;i!==n;++i)e.push(t[i])},n.splice=function(e,t,i){i=i||1;for(var n=t,r=e.length-i;n<r;n++)e[n]=e[n+i];e.length=r},n.ARRAY_TYPE="undefined"!=typeof P2_ARRAY_TYPE?P2_ARRAY_TYPE:"undefined"!=typeof Float32Array?Float32Array:Array,n.extend=function(e,t){for(var i in t)e[i]=t[i]},n.defaults=function(e,t){for(var i in e=e||{},t)i in e||(e[i]=t[i]);return e}},{}],58:[function(e,t,i){function n(){this.equations=[],this.bodies=[]}var r=e("../objects/Body");(t.exports=n).prototype.reset=function(){this.equations.length=this.bodies.length=0};var o=[];n.prototype.getBodies=function(e){for(var t=e||[],i=this.equations,n=o.length=0;n!==i.length;n++){var r=i[n];-1===o.indexOf(r.bodyA.id)&&(t.push(r.bodyA),o.push(r.bodyA.id)),-1===o.indexOf(r.bodyB.id)&&(t.push(r.bodyB),o.push(r.bodyB.id))}return t},n.prototype.wantsToSleep=function(){for(var e=0;e<this.bodies.length;e++){var t=this.bodies[e];if(t.type===r.DYNAMIC&&!t.wantsToSleep)return!1}return!0},n.prototype.sleep=function(){for(var e=0;e<this.bodies.length;e++)this.bodies[e].sleep();return!0}},{"../objects/Body":31}],59:[function(e,t,i){function _(e){this.nodePool=new n({size:16}),this.islandPool=new r({size:8}),this.equations=[],this.islands=[],this.nodes=[],this.queue=[]}var n=(e("../math/vec2"),e("./Island"),e("./IslandNode"),e("./../utils/IslandNodePool")),r=e("./../utils/IslandPool"),a=e("../objects/Body");(t.exports=_).getUnvisitedNode=function(e){for(var t=e.length,i=0;i!==t;i++){var n=e[i];if(!n.visited&&n.body.type===a.DYNAMIC)return n}return!1},_.prototype.visit=function(e,t,i){t.push(e.body);for(var n=e.equations.length,r=0;r!==n;r++){var o=e.equations[r];-1===i.indexOf(o)&&i.push(o)}},_.prototype.bfs=function(e,t,i){var n=this.queue;for(n.length=0,n.push(e),e.visited=!0,this.visit(e,t,i);n.length;)for(var r,o=n.pop();r=_.getUnvisitedNode(o.neighbors);)r.visited=!0,this.visit(r,t,i),r.body.type===a.DYNAMIC&&n.push(r)},_.prototype.split=function(e){for(var t=e.bodies,i=this.nodes,n=this.equations;i.length;)this.nodePool.release(i.pop());for(var r=0;r!==t.length;r++){var o=this.nodePool.get();o.body=t[r],i.push(o)}for(var a=0;a!==n.length;a++){var s=n[a],l=(r=t.indexOf(s.bodyA),t.indexOf(s.bodyB)),p=i[r],h=i[l];p.neighbors.push(h),h.neighbors.push(p),p.equations.push(s),h.equations.push(s)}var u=this.islands;for(r=0;r<u.length;r++)this.islandPool.release(u[r]);u.length=0;for(var c;c=_.getUnvisitedNode(i);){var d=this.islandPool.get();this.bfs(c,d.bodies,d.equations),u.push(d)}return u}},{"../math/vec2":30,"../objects/Body":31,"./../utils/IslandNodePool":50,"./../utils/IslandPool":51,"./Island":58,"./IslandNode":60}],60:[function(e,t,i){function n(e){this.body=e,this.neighbors=[],this.equations=[],this.visited=!1}(t.exports=n).prototype.reset=function(){this.equations.length=0,this.neighbors.length=0,this.visited=!1,this.body=null}},{}],61:[function(e,t,i){function W(e){r.apply(this),e=e||{},this.springs=[],this.bodies=[],this.disabledBodyCollisionPairs=[],this.solver=e.solver||new n,this.narrowphase=new p(this),this.islandManager=new u,this.gravity=X.fromValues(0,-9.78),e.gravity&&X.copy(this.gravity,e.gravity),this.frictionGravity=X.length(this.gravity)||10,this.useWorldGravityAsFrictionGravity=!0,this.useFrictionGravityOnZeroGravity=!0,this.broadphase=e.broadphase||new l,this.broadphase.setWorld(this),this.constraints=[],this.defaultMaterial=new o,this.defaultContactMaterial=new a(this.defaultMaterial,this.defaultMaterial),this.lastTimeStep=1/60,this.applySpringForces=!0,this.applyDamping=!0,this.applyGravity=!0,this.solveConstraints=!0,this.contactMaterials=[],this.time=0,this.accumulator=0,this.stepping=!1,this.bodiesToBeRemoved=[],this.islandSplit=void 0===e.islandSplit||!!e.islandSplit,this.emitImpactEvent=!0,this._constraintIdCounter=0,this._bodyIdCounter=0,this.postStepEvent={type:"postStep"},this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.addSpringEvent={type:"addSpring",spring:null},this.impactEvent={type:"impact",bodyA:null,bodyB:null,shapeA:null,shapeB:null,contactEquation:null},this.postBroadphaseEvent={type:"postBroadphase",pairs:null},this.sleepMode=W.NO_SLEEPING,this.beginContactEvent={type:"beginContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null,contactEquations:[]},this.endContactEvent={type:"endContact",shapeA:null,shapeB:null,bodyA:null,bodyB:null},this.preSolveEvent={type:"preSolve",contactEquations:null,frictionEquations:null},this.overlappingShapesLastState={keys:[]},this.overlappingShapesCurrentState={keys:[]},this.overlapKeeper=new h}var n=e("../solver/GSSolver"),X=(e("../solver/Solver"),e("../collision/Ray"),e("../math/vec2")),f=e("../shapes/Circle"),x=e("../shapes/Convex"),v=(e("../shapes/Line"),e("../shapes/Plane")),z=e("../shapes/Capsule"),g=e("../shapes/Particle"),r=e("../events/EventEmitter"),q=e("../objects/Body"),o=(e("../shapes/Shape"),e("../objects/LinearSpring"),e("../material/Material")),a=e("../material/ContactMaterial"),s=(e("../constraints/DistanceConstraint"),e("../constraints/Constraint"),e("../constraints/LockConstraint"),e("../constraints/RevoluteConstraint"),e("../constraints/PrismaticConstraint"),e("../constraints/GearConstraint"),e("../../package.json"),e("../collision/Broadphase"),e("../collision/AABB")),l=e("../collision/SAPBroadphase"),p=e("../collision/Narrowphase"),Y=e("../utils/Utils"),h=e("../utils/OverlapKeeper"),u=e("./IslandManager");e("../objects/RotationalSpring"),(((t.exports=W).prototype=new Object(r.prototype)).constructor=W).NO_SLEEPING=1,W.BODY_SLEEPING=2,W.ISLAND_SLEEPING=4,W.prototype.addConstraint=function(e){this.constraints.push(e)},W.prototype.addContactMaterial=function(e){this.contactMaterials.push(e)},W.prototype.removeContactMaterial=function(e){var t=this.contactMaterials.indexOf(e);-1!==t&&Y.splice(this.contactMaterials,t,1)},W.prototype.getContactMaterial=function(e,t){for(var i=this.contactMaterials,n=0,r=i.length;n!==r;n++){var o=i[n];if(o.materialA.id===e.id&&o.materialB.id===t.id||o.materialA.id===t.id&&o.materialB.id===e.id)return o}return!1},W.prototype.removeConstraint=function(e){var t=this.constraints.indexOf(e);-1!==t&&Y.splice(this.constraints,t,1)};var K=(X.create(),X.create(),X.create(),X.create(),X.create(),X.create(),X.create()),b=X.fromValues(0,0),w=X.fromValues(0,0);X.fromValues(0,0),X.fromValues(0,0),W.prototype.step=function(e,t,i){if(i=i||10,0===(t=t||0))this.internalStep(e),this.time+=e;else{this.accumulator+=t;for(var n=0;this.accumulator>=e&&n<i;)this.internalStep(e),this.time+=e,this.accumulator-=e,n++;for(var r=this.accumulator%e/e,o=0;o!==this.bodies.length;o++){var a=this.bodies[o];X.lerp(a.interpolatedPosition,a.previousPosition,a.position,r),a.interpolatedAngle=a.previousAngle+r*(a.angle-a.previousAngle)}}};var Z=[];W.prototype.internalStep=function(e){this.stepping=!0;var t=this.springs.length,i=this.springs,n=this.bodies,r=this.gravity,o=this.solver,a=this.bodies.length,s=this.broadphase,l=this.narrowphase,p=this.constraints,h=K,u=(X.scale,X.add),c=(X.rotate,this.islandManager);if(this.overlapKeeper.tick(),this.lastTimeStep=e,this.useWorldGravityAsFrictionGravity){var d=X.length(this.gravity);0===d&&this.useFrictionGravityOnZeroGravity||(this.frictionGravity=d)}if(this.applyGravity)for(var _=0;_!==a;_++){var y=(m=n[_]).force;m.type===q.DYNAMIC&&m.sleepState!==q.SLEEPING&&(X.scale(h,r,m.mass*m.gravityScale),u(y,y,h))}if(this.applySpringForces)for(_=0;_!==t;_++){i[_].applyForce()}if(this.applyDamping)for(_=0;_!==a;_++){var m;(m=n[_]).type===q.DYNAMIC&&m.applyDamping(e)}var f=s.getCollisionPairs(this),x=this.disabledBodyCollisionPairs;for(_=x.length-2;0<=_;_-=2)for(var v=f.length-2;0<=v;v-=2)(x[_]===f[v]&&x[_+1]===f[v+1]||x[_+1]===f[v]&&x[_]===f[v+1])&&f.splice(v,2);var z=p.length;for(_=0;_!==z;_++){var g=p[_];if(!g.collideConnected)for(v=f.length-2;0<=v;v-=2)(g.bodyA===f[v]&&g.bodyB===f[v+1]||g.bodyB===f[v]&&g.bodyA===f[v+1])&&f.splice(v,2)}this.postBroadphaseEvent.pairs=f,this.emit(this.postBroadphaseEvent),this.postBroadphaseEvent.pairs=null,l.reset(this);_=0;for(var b=f.length;_!==b;_+=2)for(var w=f[_],S=f[_+1],C=0,M=w.shapes.length;C!==M;C++)for(var P=w.shapes[C],k=P.position,T=P.angle,O=0,A=S.shapes.length;O!==A;O++){var E=S.shapes[O],G=E.position,I=E.angle,B=this.defaultContactMaterial;if(P.material&&E.material){var L=this.getContactMaterial(P.material,E.material);L&&(B=L)}this.runNarrowphase(l,w,P,k,T,S,E,G,I,B,this.frictionGravity)}for(_=0;_!==a;_++){(j=n[_])._wakeUpAfterNarrowphase&&(j.wakeUp(),j._wakeUpAfterNarrowphase=!1)}if(this.has("endContact")){this.overlapKeeper.getEndOverlaps(Z);var D=this.endContactEvent;for(O=Z.length;O--;){var R=Z[O];D.shapeA=R.shapeA,D.shapeB=R.shapeB,D.bodyA=R.bodyA,D.bodyB=R.bodyB,this.emit(D)}Z.length=0}var F=this.preSolveEvent;F.contactEquations=l.contactEquations,F.frictionEquations=l.frictionEquations,this.emit(F),F.contactEquations=F.frictionEquations=null;z=p.length;for(_=0;_!==z;_++)p[_].update();if(l.contactEquations.length||l.frictionEquations.length||z)if(this.islandSplit){for(c.equations.length=0,Y.appendArray(c.equations,l.contactEquations),Y.appendArray(c.equations,l.frictionEquations),_=0;_!==z;_++)Y.appendArray(c.equations,p[_].equations);c.split(this);for(_=0;_!==c.islands.length;_++){(V=c.islands[_]).equations.length&&o.solveIsland(e,V)}}else{for(o.addEquations(l.contactEquations),o.addEquations(l.frictionEquations),_=0;_!==z;_++)o.addEquations(p[_].equations);this.solveConstraints&&o.solve(e,this),o.removeAllEquations()}for(_=0;_!==a;_++){var j;(j=n[_]).integrate(e)}for(_=0;_!==a;_++)n[_].setZeroForce();if(this.emitImpactEvent&&this.has("impact")){var N=this.impactEvent;for(_=0;_!==l.contactEquations.length;_++){var U=l.contactEquations[_];U.firstImpact&&(N.bodyA=U.bodyA,N.bodyB=U.bodyB,N.shapeA=U.shapeA,N.shapeB=U.shapeB,N.contactEquation=U,this.emit(N))}}if(this.sleepMode===W.BODY_SLEEPING)for(_=0;_!==a;_++)n[_].sleepTick(this.time,!1,e);else if(this.sleepMode===W.ISLAND_SLEEPING&&this.islandSplit){for(_=0;_!==a;_++)n[_].sleepTick(this.time,!0,e);for(_=0;_<this.islandManager.islands.length;_++){var V;(V=this.islandManager.islands[_]).wantsToSleep()&&V.sleep()}}this.stepping=!1;var H=this.bodiesToBeRemoved;for(_=0;_!==H.length;_++)this.removeBody(H[_]);H.length=0,this.emit(this.postStepEvent)},W.prototype.runNarrowphase=function(e,t,i,n,r,o,a,s,l,p,h){if(0!=(i.collisionGroup&a.collisionMask)&&0!=(a.collisionGroup&i.collisionMask)){X.rotate(b,n,t.angle),X.rotate(w,s,o.angle),X.add(b,b,t.position),X.add(w,w,o.position);var u,c=r+t.angle,d=l+o.angle;e.enableFriction=0<p.friction,e.frictionCoefficient=p.friction,u=t.type===q.STATIC||t.type===q.KINEMATIC?o.mass:o.type===q.STATIC||o.type===q.KINEMATIC?t.mass:t.mass*o.mass/(t.mass+o.mass),e.slipForce=p.friction*h*u,e.restitution=p.restitution,e.surfaceVelocity=p.surfaceVelocity,e.frictionStiffness=p.frictionStiffness,e.frictionRelaxation=p.frictionRelaxation,e.stiffness=p.stiffness,e.relaxation=p.relaxation,e.contactSkinSize=p.contactSkinSize,e.enabledEquations=t.collisionResponse&&o.collisionResponse&&i.collisionResponse&&a.collisionResponse;var _=e[i.type|a.type],y=0;if(_){var m=i.sensor||a.sensor,f=e.frictionEquations.length;y=i.type<a.type?_.call(e,t,i,b,c,o,a,w,d,m):_.call(e,o,a,w,d,t,i,b,c,m);var x=e.frictionEquations.length-f;if(y){if(t.allowSleep&&t.type===q.DYNAMIC&&t.sleepState===q.SLEEPING&&o.sleepState===q.AWAKE&&o.type!==q.STATIC&&X.squaredLength(o.velocity)+Math.pow(o.angularVelocity,2)>=2*Math.pow(o.sleepSpeedLimit,2)&&(t._wakeUpAfterNarrowphase=!0),o.allowSleep&&o.type===q.DYNAMIC&&o.sleepState===q.SLEEPING&&t.sleepState===q.AWAKE&&t.type!==q.STATIC&&X.squaredLength(t.velocity)+Math.pow(t.angularVelocity,2)>=2*Math.pow(t.sleepSpeedLimit,2)&&(o._wakeUpAfterNarrowphase=!0),this.overlapKeeper.setOverlapping(t,i,o,a),this.has("beginContact")&&this.overlapKeeper.isNewOverlap(i,a)){var v=this.beginContactEvent;if(v.shapeA=i,v.shapeB=a,v.bodyA=t,v.bodyB=o,v.contactEquations.length=0,"number"==typeof y)for(var z=e.contactEquations.length-y;z<e.contactEquations.length;z++)v.contactEquations.push(e.contactEquations[z]);this.emit(v)}if("number"==typeof y&&1<x)for(z=e.frictionEquations.length-x;z<e.frictionEquations.length;z++){var g=e.frictionEquations[z];g.setSlipForce(g.getSlipForce()/x)}}}}},W.prototype.addSpring=function(e){this.springs.push(e);var t=this.addSpringEvent;t.spring=e,this.emit(t),t.spring=null},W.prototype.removeSpring=function(e){var t=this.springs.indexOf(e);-1!==t&&Y.splice(this.springs,t,1)},W.prototype.addBody=function(e){if(-1===this.bodies.indexOf(e)){this.bodies.push(e);var t=(e.world=this).addBodyEvent;t.body=e,this.emit(t),t.body=null}},W.prototype.removeBody=function(e){if(this.stepping)this.bodiesToBeRemoved.push(e);else{e.world=null;var t=this.bodies.indexOf(e);-1!==t&&(Y.splice(this.bodies,t,1),(this.removeBodyEvent.body=e).resetConstraintVelocity(),this.emit(this.removeBodyEvent),this.removeBodyEvent.body=null)}},W.prototype.getBodyById=function(e){for(var t=this.bodies,i=0;i<t.length;i++){var n=t[i];if(n.id===e)return n}return!1},W.prototype.disableBodyCollision=function(e,t){this.disabledBodyCollisionPairs.push(e,t)},W.prototype.enableBodyCollision=function(e,t){for(var i=this.disabledBodyCollisionPairs,n=0;n<i.length;n+=2)if(i[n]===e&&i[n+1]===t||i[n+1]===e&&i[n]===t)return void i.splice(n,2)},W.prototype.clear=function(){this.time=0,this.solver&&this.solver.equations.length&&this.solver.removeAllEquations();for(var e=this.constraints,t=e.length-1;0<=t;t--)this.removeConstraint(e[t]);var i=this.bodies;for(t=i.length-1;0<=t;t--)this.removeBody(i[t]);var n=this.springs;for(t=n.length-1;0<=t;t--)this.removeSpring(n[t]);var r=this.contactMaterials;for(t=r.length-1;0<=t;t--)this.removeContactMaterial(r[t]);W.apply(this)};var S=X.create(),C=(X.fromValues(0,0),X.fromValues(0,0));W.prototype.hitTest=function(e,t,i){i=i||0;var n=new q({position:e}),r=new g,o=e,a=S,s=C;n.addShape(r);for(var l=this.narrowphase,p=[],h=0,u=t.length;h!==u;h++)for(var c=t[h],d=0,_=c.shapes.length;d!==_;d++){var y=c.shapes[d];X.rotate(a,y.position,c.angle),X.add(a,a,c.position);var m=y.angle+c.angle;(y instanceof f&&l.circleParticle(c,y,a,m,n,r,o,0,!0)||y instanceof x&&l.particleConvex(n,r,o,0,c,y,a,m,!0)||y instanceof v&&l.particlePlane(n,r,o,0,c,y,a,m,!0)||y instanceof z&&l.particleCapsule(n,r,o,0,c,y,a,m,!0)||y instanceof g&&X.squaredLength(X.sub(s,a,e))<i*i)&&p.push(c)}return p},W.prototype.setGlobalStiffness=function(e){for(var t=this.constraints,i=0;i!==t.length;i++)for(var n=t[i],r=0;r!==n.equations.length;r++){var o=n.equations[r];o.stiffness=e,o.needsUpdate=!0}var a=this.contactMaterials;for(i=0;i!==a.length;i++){(n=a[i]).stiffness=n.frictionStiffness=e}(n=this.defaultContactMaterial).stiffness=n.frictionStiffness=e},W.prototype.setGlobalRelaxation=function(e){for(var t=0;t!==this.constraints.length;t++)for(var i=this.constraints[t],n=0;n!==i.equations.length;n++){var r=i.equations[n];r.relaxation=e,r.needsUpdate=!0}for(t=0;t!==this.contactMaterials.length;t++){(i=this.contactMaterials[t]).relaxation=i.frictionRelaxation=e}(i=this.defaultContactMaterial).relaxation=i.frictionRelaxation=e};var c=new s,d=[];W.prototype.raycast=function(e,t){return t.getAABB(c),this.broadphase.aabbQuery(this,c,d),t.intersectBodies(e,d),d.length=0,e.hasHit()}},{"../../package.json":6,"../collision/AABB":7,"../collision/Broadphase":8,"../collision/Narrowphase":10,"../collision/Ray":11,"../collision/SAPBroadphase":13,"../constraints/Constraint":14,"../constraints/DistanceConstraint":15,"../constraints/GearConstraint":16,"../constraints/LockConstraint":17,"../constraints/PrismaticConstraint":18,"../constraints/RevoluteConstraint":19,"../events/EventEmitter":26,"../material/ContactMaterial":27,"../material/Material":28,"../math/vec2":30,"../objects/Body":31,"../objects/LinearSpring":32,"../objects/RotationalSpring":33,"../shapes/Capsule":38,"../shapes/Circle":39,"../shapes/Convex":40,"../shapes/Line":42,"../shapes/Particle":43,"../shapes/Plane":44,"../shapes/Shape":45,"../solver/GSSolver":46,"../solver/Solver":47,"../utils/OverlapKeeper":52,"../utils/Utils":57,"./IslandManager":59}]},{},[36])(36)}),function(){var e=this,I=I||{};return I.game=null,I.WEBGL_RENDERER=0,I.CANVAS_RENDERER=1,I.VERSION="v2.2.9",I._UID=0,"undefined"!=typeof Float32Array?(I.Float32Array=Float32Array,I.Uint16Array=Uint16Array,I.Uint32Array=Uint32Array,I.ArrayBuffer=ArrayBuffer):(I.Float32Array=Array,I.Uint16Array=Array),I.PI_2=2*Math.PI,I.RAD_TO_DEG=180/Math.PI,I.DEG_TO_RAD=Math.PI/180,I.RETINA_PREFIX="@2x",I.DisplayObject=function(){this.position=new I.Point(0,0),this.scale=new I.Point(1,1),this.pivot=new I.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new I.Matrix,this.worldPosition=new I.Point(0,0),this.worldScale=new I.Point(1,1),this.worldRotation=0,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new I.Rectangle(0,0,0,0),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},I.DisplayObject.prototype.constructor=I.DisplayObject,I.DisplayObject.prototype={destroy:function(){if(this.children){for(var e=this.children.length;e--;)this.children[e].destroy();this.children=[]}this.hitArea=null,this.parent=null,this.worldTransform=null,this.filterArea=null,this.renderable=!1,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite()},updateTransform:function(e){if(!e&&!this.parent&&!this.game)return this;var t=this.parent;e?t=e:this.parent||(t=this.game.world);var i,n,r,o,a,s,l=t.worldTransform,p=this.worldTransform;return this.rotation%I.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),i=this._cr*this.scale.x,n=this._sr*this.scale.x,r=-this._sr*this.scale.y,o=this._cr*this.scale.y,a=this.position.x,s=this.position.y,(this.pivot.x||this.pivot.y)&&(a-=this.pivot.x*i+this.pivot.y*r,s-=this.pivot.x*n+this.pivot.y*o),p.a=i*l.a+n*l.c,p.b=i*l.b+n*l.d,p.c=r*l.a+o*l.c,p.d=r*l.b+o*l.d):(i=this.scale.x,o=this.scale.y,a=this.position.x-this.pivot.x*i,s=this.position.y-this.pivot.y*o,p.a=i*l.a,p.b=i*l.b,p.c=o*l.c,p.d=o*l.d),p.tx=a*l.a+s*l.c+l.tx,p.ty=a*l.b+s*l.d+l.ty,this.worldAlpha=this.alpha*t.worldAlpha,this.worldPosition.set(p.tx,p.ty),this.worldScale.set(this.scale.x*Math.sqrt(p.a*p.a+p.c*p.c),this.scale.y*Math.sqrt(p.b*p.b+p.d*p.d)),this.worldRotation=Math.atan2(-p.c,p.d),this._currentBounds=null,this.transformCallback&&this.transformCallback.call(this.transformCallbackContext,p,l),this},preUpdate:function(){},generateTexture:function(e,t,i){var n=this.getLocalBounds(),r=new I.RenderTexture(0|n.width,0|n.height,i,t,e);return I.DisplayObject._tempMatrix.tx=-n.x,I.DisplayObject._tempMatrix.ty=-n.y,r.render(this,I.DisplayObject._tempMatrix),r},updateCache:function(){return this._generateCachedSprite(),this},toGlobal:function(e){return this.updateTransform(),this.worldTransform.apply(e)},toLocal:function(e,t){return t&&(e=t.toGlobal(e)),this.updateTransform(),this.worldTransform.applyInverse(e)},_renderCachedSprite:function(e){this._cachedSprite.worldAlpha=this.worldAlpha,e.gl?I.Sprite.prototype._renderWebGL.call(this._cachedSprite,e):I.Sprite.prototype._renderCanvas.call(this._cachedSprite,e)},_generateCachedSprite:function(){this._cacheAsBitmap=!1;var e=this.getLocalBounds();if(e.width=Math.max(1,Math.ceil(e.width)),e.height=Math.max(1,Math.ceil(e.height)),this.updateTransform(),this._cachedSprite)this._cachedSprite.texture.resize(e.width,e.height);else{var t=new I.RenderTexture(e.width,e.height);this._cachedSprite=new I.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform}var i=this._filters;this._filters=null,this._cachedSprite.filters=i,I.DisplayObject._tempMatrix.tx=-e.x,I.DisplayObject._tempMatrix.ty=-e.y,this._cachedSprite.texture.render(this,I.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this._filters=i,this._cacheAsBitmap=!0},_destroyCachedSprite:function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)}},I.DisplayObject.prototype.displayObjectUpdateTransform=I.DisplayObject.prototype.updateTransform,Object.defineProperties(I.DisplayObject.prototype,{x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},worldVisible:{get:function(){if(this.visible){var e=this.parent;if(!e)return this.visible;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}return!1}},mask:{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.isMask=!1),(this._mask=e)&&(this._mask.isMask=!0)}},filters:{get:function(){return this._filters},set:function(e){if(Array.isArray(e)){for(var t=[],i=0;i<e.length;i++)for(var n=e[i].passes,r=0;r<n.length;r++)t.push(n[r]);this._filterBlock={target:this,filterPasses:t}}this._filters=e,this.blendMode&&this.blendMode===I.blendModes.MULTIPLY&&(this.blendMode=I.blendModes.NORMAL)}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&(e?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=e)}}}),I.DisplayObjectContainer=function(){I.DisplayObject.call(this),this.children=[],this.ignoreChildInput=!1},I.DisplayObjectContainer.prototype=Object.create(I.DisplayObject.prototype),I.DisplayObjectContainer.prototype.constructor=I.DisplayObjectContainer,I.DisplayObjectContainer.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},I.DisplayObjectContainer.prototype.addChildAt=function(e,t){if(0<=t&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),(e.parent=this).children.splice(t,0,e),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},I.DisplayObjectContainer.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),n=this.getChildIndex(t);if(i<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=t,this.children[n]=e}},I.DisplayObjectContainer.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},I.DisplayObjectContainer.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(e);this.children.splice(i,1),this.children.splice(t,0,e)},I.DisplayObjectContainer.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[e]},I.DisplayObjectContainer.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1!==t)return this.removeChildAt(t)},I.DisplayObjectContainer.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t&&(t.parent=void 0,this.children.splice(e,1)),t},I.DisplayObjectContainer.prototype.removeChildren=function(e,t){void 0===e&&(e=0),void 0===t&&(t=this.children.length);var i=t-e;if(0<i&&i<=t){for(var n=this.children.splice(e,i),r=0;r<n.length;r++)n[r].parent=void 0;return n}if(0===i&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},I.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var e=0;e<this.children.length;e++)this.children[e].updateTransform()},I.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=I.DisplayObjectContainer.prototype.updateTransform,I.DisplayObjectContainer.prototype.getBounds=function(e){var t,i=e&&e instanceof I.DisplayObject,n=!0;if(i?n=e instanceof I.DisplayObjectContainer&&e.contains(this):e=this,i){var r=e.worldTransform;for(e.worldTransform=I.identityMatrix,t=0;t<e.children.length;t++)e.children[t].updateTransform()}var o,a,s,l=1/0,p=1/0,h=-1/0,u=-1/0,c=!1;for(t=0;t<this.children.length;t++)this.children[t].visible&&(c=!0,l=l<(o=this.children[t].getBounds()).x?l:o.x,p=p<o.y?p:o.y,h=(a=o.width+o.x)<h?h:a,u=(s=o.height+o.y)<u?u:s);var d=this._bounds;if(!c){var _=(d=new I.Rectangle).x,y=d.width+d.x,m=d.y,f=d.height+d.y,x=this.worldTransform,v=x.a,z=x.b,g=x.c,b=x.d,w=x.tx,S=x.ty,C=v*y+g*f+w,M=b*f+z*y+S,P=v*_+g*f+w,k=b*f+z*_+S,T=v*_+g*m+w,O=b*m+z*_+S,A=v*y+g*m+w,E=b*m+z*y+S;l=A<(l=T<(l=P<(l=h=C)?P:l)?T:l)?A:l,p=E<(p=O<(p=k<(p=u=M)?k:p)?O:p)?E:p,h=(h=(h=h<P?P:h)<T?T:h)<A?A:h,u=(u=(u=u<k?k:u)<O?O:u)<E?E:u}if(d.x=l,d.y=p,d.width=h-l,d.height=u-p,i)for(e.worldTransform=r,t=0;t<e.children.length;t++)e.children[t].updateTransform();if(!n){var G=e.getBounds();d.x-=G.x,d.y-=G.y}return d},I.DisplayObjectContainer.prototype.getLocalBounds=function(){return this.getBounds(this)},I.DisplayObjectContainer.prototype.contains=function(e){return!!e&&(e===this||this.contains(e.parent))},I.DisplayObjectContainer.prototype._renderWebGL=function(e){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);var t;if(this._mask||this._filters){for(this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),e.spriteBatch.start()}else for(t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e)}},I.DisplayObjectContainer.prototype._renderCanvas=function(e){if(!1!==this.visible&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(e);this._mask&&e.maskManager.pushMask(this._mask,e);for(var t=0;t<this.children.length;t++)this.children[t]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},Object.defineProperty(I.DisplayObjectContainer.prototype,"width",{get:function(){return this.getLocalBounds().width*this.scale.x},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}}),Object.defineProperty(I.DisplayObjectContainer.prototype,"height",{get:function(){return this.getLocalBounds().height*this.scale.y},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}),I.Sprite=function(e){I.DisplayObjectContainer.call(this),this.anchor=new I.Point,this.texture=e||I.Texture.emptyTexture,this._width=0,this._height=0,this.tint=16777215,this.cachedTint=-1,this.tintedTexture=null,this.blendMode=I.blendModes.NORMAL,this.shader=null,this.exists=!0,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},I.Sprite.prototype=Object.create(I.DisplayObjectContainer.prototype),I.Sprite.prototype.constructor=I.Sprite,Object.defineProperty(I.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(I.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),I.Sprite.prototype.setTexture=function(e,t){void 0!==t&&this.texture.baseTexture.destroy(),this.texture.baseTexture.skipRender=!1,this.texture=e,this.texture.valid=!0,this.cachedTint=-1},I.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},I.Sprite.prototype.getBounds=function(e){var t=this.texture.frame.width,i=this.texture.frame.height,n=t*(1-this.anchor.x),r=t*-this.anchor.x,o=i*(1-this.anchor.y),a=i*-this.anchor.y,s=e||this.worldTransform,l=s.a,p=s.b,h=s.c,u=s.d,c=s.tx,d=s.ty,_=-1/0,y=-1/0,m=1/0,f=1/0;if(0===p&&0===h){if(l<0){l*=-1;var x=n;n=-r,r=-x}if(u<0){u*=-1;x=o;o=-a,a=-x}m=l*r+c,_=l*n+c,f=u*a+d,y=u*o+d}else{var v=l*r+h*a+c,z=u*a+p*r+d,g=l*n+h*a+c,b=u*a+p*n+d,w=l*n+h*o+c,S=u*o+p*n+d,C=l*r+h*o+c,M=u*o+p*r+d;m=C<(m=w<(m=g<(m=v<m?v:m)?g:m)?w:m)?C:m,f=M<(f=S<(f=b<(f=z<f?z:f)?b:f)?S:f)?M:f,_=(_=(_=(_=_<v?v:_)<g?g:_)<w?w:_)<C?C:_,y=(y=(y=(y=y<z?z:y)<b?b:y)<S?S:y)<M?M:y}var P=this._bounds;return P.x=m,P.width=_-m,P.y=f,P.height=y-f,this._currentBounds=P},I.Sprite.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=I.identityMatrix;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform();var i=this.getBounds();for(this.worldTransform=e,t=0;t<this.children.length;t++)this.children[t].updateTransform();return i},I.Sprite.prototype._renderWebGL=function(e,t){if(this.visible&&!(this.alpha<=0)&&this.renderable){var i=this.worldTransform;if(t&&(i=t),this._mask||this._filters){var n=e.spriteBatch;this._filters&&(n.flush(),e.filterManager.pushFilter(this._filterBlock)),this._mask&&(n.stop(),e.maskManager.pushMask(this.mask,e),n.start()),n.render(this);for(var r=0;r<this.children.length;r++)this.children[r]._renderWebGL(e);n.stop(),this._mask&&e.maskManager.popMask(this._mask,e),this._filters&&e.filterManager.popFilter(),n.start()}else{e.spriteBatch.render(this);for(r=0;r<this.children.length;r++)this.children[r]._renderWebGL(e,i)}}},I.Sprite.prototype._renderCanvas=function(e,t){if(!(!this.visible||0===this.alpha||!this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){var i=this.worldTransform;if(t&&(i=t),this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=I.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e),this.texture.valid){var n=this.texture.baseTexture.resolution/e.resolution;e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.scaleMode!==this.texture.baseTexture.scaleMode&&(e.scaleMode=this.texture.baseTexture.scaleMode,e.context[e.smoothProperty]=e.scaleMode===I.scaleModes.LINEAR);var r=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,o=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height,a=i.tx*e.resolution+e.shakeX,s=i.ty*e.resolution+e.shakeY;e.roundPixels?(e.context.setTransform(i.a,i.b,i.c,i.d,0|a,0|s),r|=0,o|=0):e.context.setTransform(i.a,i.b,i.c,i.d,a,s);var l=this.texture.crop.width,p=this.texture.crop.height;if(r/=n,o/=n,16777215!==this.tint)(this.texture.requiresReTint||this.cachedTint!==this.tint)&&(this.tintedTexture=I.CanvasTinter.getTintedTexture(this,this.tint),this.cachedTint=this.tint,this.texture.requiresReTint=!1),e.context.drawImage(this.tintedTexture,0,0,l,p,r,o,l/n,p/n);else{var h=this.texture.crop.x,u=this.texture.crop.y;e.context.drawImage(this.texture.baseTexture.source,h,u,l,p,r,o,l/n,p/n)}}for(var c=0;c<this.children.length;c++)this.children[c]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},I.SpriteBatch=function(e){I.DisplayObjectContainer.call(this),this.textureThing=e,this.ready=!1},I.SpriteBatch.prototype=Object.create(I.DisplayObjectContainer.prototype),I.SpriteBatch.prototype.constructor=I.SpriteBatch,I.SpriteBatch.prototype.initWebGL=function(e){this.fastSpriteBatch=new I.WebGLFastSpriteBatch(e),this.ready=!0},I.SpriteBatch.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},I.SpriteBatch.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(e.gl),this.fastSpriteBatch.gl!==e.gl&&this.fastSpriteBatch.setContext(e.gl),e.spriteBatch.stop(),e.shaderManager.setShader(e.shaderManager.fastShader),this.fastSpriteBatch.begin(this,e),this.fastSpriteBatch.render(this),e.spriteBatch.start())},I.SpriteBatch.prototype._renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.children.length){var t=e.context;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var i=this.worldTransform,n=!0,r=0;r<this.children.length;r++){var o=this.children[r];if(o.visible){var a=o.texture,s=a.frame;if(t.globalAlpha=this.worldAlpha*o.alpha,o.rotation%(2*Math.PI)==0)n&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*(-s.width*o.scale.x)+o.position.x+.5+e.shakeX|0,o.anchor.y*(-s.height*o.scale.y)+o.position.y+.5+e.shakeY|0,s.width*o.scale.x,s.height*o.scale.y);else{n||(n=!0),o.displayObjectUpdateTransform();var l=o.worldTransform,p=l.tx*e.resolution+e.shakeX,h=l.ty*e.resolution+e.shakeY;e.roundPixels?t.setTransform(l.a,l.b,l.c,l.d,0|p,0|h):t.setTransform(l.a,l.b,l.c,l.d,p,h),t.drawImage(a.baseTexture.source,s.x,s.y,s.width,s.height,o.anchor.x*-s.width+.5|0,o.anchor.y*-s.height+.5|0,s.width,s.height)}}}}},I.hex2rgb=function(e){return[(e>>16&255)/255,(e>>8&255)/255,(255&e)/255]},I.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},I.canUseNewCanvasBlendModes=function(){if(void 0===document)return!1;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=e+"AP804Oa6"+t;var n=new Image;n.src=e+"/wCKxvRF"+t;var r=I.CanvasPool.create(this,6,1).getContext("2d");if(r.globalCompositeOperation="multiply",r.drawImage(i,0,0),r.drawImage(n,2,0),!r.getImageData(2,0,1,1))return!1;var o=r.getImageData(2,0,1,1).data;return I.CanvasPool.remove(this),255===o[0]&&0===o[1]&&0===o[2]},I.getNextPowerOfTwo=function(e){if(0<e&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t},I.isPowerOfTwo=function(e,t){return 0<e&&0==(e&e-1)&&0<t&&0==(t&t-1)},I.CanvasPool={create:function(e,t,i){var n,r=I.CanvasPool.getFirst();if(-1===r){var o={parent:e,canvas:document.createElement("canvas")};I.CanvasPool.pool.push(o),n=o.canvas}else I.CanvasPool.pool[r].parent=e,n=I.CanvasPool.pool[r].canvas;return void 0!==t&&(n.width=t,n.height=i),n},getFirst:function(){for(var e=I.CanvasPool.pool,t=0;t<e.length;t++)if(!e[t].parent)return t;return-1},remove:function(e){for(var t=I.CanvasPool.pool,i=0;i<t.length;i++)t[i].parent===e&&(t[i].parent=null,t[i].canvas.width=1,t[i].canvas.height=1)},removeByCanvas:function(e){for(var t=I.CanvasPool.pool,i=0;i<t.length;i++)t[i].canvas===e&&(t[i].parent=null,t[i].canvas.width=1,t[i].canvas.height=1)},getTotal:function(){for(var e=I.CanvasPool.pool,t=0,i=0;i<e.length;i++)e[i].parent&&t++;return t},getFree:function(){for(var e=I.CanvasPool.pool,t=0,i=0;i<e.length;i++)e[i].parent||t++;return t}},I.CanvasPool.pool=[],I.initDefaultShaders=function(){},I.CompileVertexShader=function(e,t){return I._CompileShader(e,t,e.VERTEX_SHADER)},I.CompileFragmentShader=function(e,t){return I._CompileShader(e,t,e.FRAGMENT_SHADER)},I._CompileShader=function(e,t,i){var n=t;Array.isArray(t)&&(n=t.join("\n"));var r=e.createShader(i);return e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(window.console.log(e.getShaderInfoLog(r)),null)},I.compileProgram=function(e,t,i){var n=I.CompileFragmentShader(e,i),r=I.CompileVertexShader(e,t),o=e.createProgram();return e.attachShader(o,r),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||(window.console.log(e.getProgramInfoLog(o)),window.console.log("Could not initialise shaders")),o},I.PixiShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.firstRun=!0,this.dirty=!0,this.attributes=[],this.init()},I.PixiShader.prototype.constructor=I.PixiShader,I.PixiShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc||I.PixiShader.defaultVertexSrc,this.fragmentSrc);for(var i in e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute],this.uniforms)this.uniforms[i].uniformLocation=e.getUniformLocation(t,i);this.initUniforms(),this.program=t},I.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var i in this.uniforms){var n=(e=this.uniforms[i]).type;"sampler2D"===n?(e._init=!1,null!==e.value&&this.initSampler2D(e)):"mat2"===n||"mat3"===n||"mat4"===n?(e.glMatrix=!0,e.glValueLength=1,"mat2"===n?e.glFunc=t.uniformMatrix2fv:"mat3"===n?e.glFunc=t.uniformMatrix3fv:"mat4"===n&&(e.glFunc=t.uniformMatrix4fv)):(e.glFunc=t["uniform"+n],e.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},I.PixiShader.prototype.initSampler2D=function(e){if(e.value&&e.value.baseTexture&&e.value.baseTexture.hasLoaded){var t=this.gl;if(t.activeTexture(t["TEXTURE"+this.textureCount]),t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),e.textureData){var i=e.textureData,n=i.magFilter?i.magFilter:t.LINEAR,r=i.minFilter?i.minFilter:t.LINEAR,o=i.wrapS?i.wrapS:t.CLAMP_TO_EDGE,a=i.wrapT?i.wrapT:t.CLAMP_TO_EDGE,s=i.luminance?t.LUMINANCE:t.RGBA;if(i.repeat&&(o=t.REPEAT,a=t.REPEAT),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var l=i.width?i.width:512,p=i.height?i.height:2,h=i.border?i.border:0;t.texImage2D(t.TEXTURE_2D,0,s,l,p,h,s,t.UNSIGNED_BYTE,null)}else t.texImage2D(t.TEXTURE_2D,0,s,t.RGBA,t.UNSIGNED_BYTE,e.value.baseTexture.source);t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,a)}t.uniform1i(e.uniformLocation,this.textureCount),e._init=!0,this.textureCount++}},I.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var e,t=this.gl;for(var i in this.uniforms)1===(e=this.uniforms[i]).glValueLength?!0===e.glMatrix?e.glFunc.call(t,e.uniformLocation,e.transpose,e.value):e.glFunc.call(t,e.uniformLocation,e.value):2===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y):3===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z):4===e.glValueLength?e.glFunc.call(t,e.uniformLocation,e.value.x,e.value.y,e.value.z,e.value.w):"sampler2D"===e.type&&(e._init?(t.activeTexture(t["TEXTURE"+this.textureCount]),e.value.baseTexture._dirty[t.id]?I.instances[t.id].updateTexture(e.value.baseTexture):t.bindTexture(t.TEXTURE_2D,e.value.baseTexture._glTextures[t.id]),t.uniform1i(e.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(e))},I.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},I.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"],I.PixiFastShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},I.PixiFastShader.prototype.constructor=I.PixiFastShader,I.PixiFastShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.dimensions=e.getUniformLocation(t,"dimensions"),this.uMatrix=e.getUniformLocation(t,"uMatrix"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aPositionCoord=e.getAttribLocation(t,"aPositionCoord"),this.aScale=e.getAttribLocation(t,"aScale"),this.aRotation=e.getAttribLocation(t,"aRotation"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.colorAttribute=e.getAttribLocation(t,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=t},I.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},I.StripShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"],this.init()},I.StripShader.prototype.constructor=I.StripShader,I.StripShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.uSampler=e.getUniformLocation(t,"uSampler"),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.aTextureCoord=e.getAttribLocation(t,"aTextureCoord"),this.attributes=[this.aVertexPosition,this.aTextureCoord],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},I.StripShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},I.PrimitiveShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},I.PrimitiveShader.prototype.constructor=I.PrimitiveShader,I.PrimitiveShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.colorAttribute=e.getAttribLocation(t,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},I.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},I.ComplexPrimitiveShader=function(e){this._UID=I._UID++,this.gl=e,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","uniform float flipY;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"],this.init()},I.ComplexPrimitiveShader.prototype.constructor=I.ComplexPrimitiveShader,I.ComplexPrimitiveShader.prototype.init=function(){var e=this.gl,t=I.compileProgram(e,this.vertexSrc,this.fragmentSrc);e.useProgram(t),this.projectionVector=e.getUniformLocation(t,"projectionVector"),this.offsetVector=e.getUniformLocation(t,"offsetVector"),this.tintColor=e.getUniformLocation(t,"tint"),this.color=e.getUniformLocation(t,"color"),this.flipY=e.getUniformLocation(t,"flipY"),this.aVertexPosition=e.getAttribLocation(t,"aVertexPosition"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=e.getUniformLocation(t,"translationMatrix"),this.alpha=e.getUniformLocation(t,"alpha"),this.program=t},I.ComplexPrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},I.glContexts=[],I.instances=[],I.WebGLRenderer=function(e){this.game=e,I.defaultRenderer||(I.defaultRenderer=this),this.type=I.WEBGL_RENDERER,this.resolution=e.resolution,this.transparent=e.transparent,this.autoResize=!1,this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.clearBeforeRender=e.clearBeforeRender,this.width=e.width,this.height=e.height,this.view=e.canvas,this._contextOptions={alpha:this.transparent,antialias:e.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:this.preserveDrawingBuffer},this.projection=new I.Point,this.offset=new I.Point,this.shaderManager=new I.WebGLShaderManager,this.spriteBatch=new I.WebGLSpriteBatch,this.maskManager=new I.WebGLMaskManager,this.filterManager=new I.WebGLFilterManager,this.stencilManager=new I.WebGLStencilManager,this.blendModeManager=new I.WebGLBlendModeManager,this.renderSession={},this.renderSession.game=this.game,this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.blendModeManager=this.blendModeManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.stencilManager=this.stencilManager,(this.renderSession.renderer=this).renderSession.resolution=this.resolution,this.initContext(),this.mapBlendModes()},I.WebGLRenderer.prototype.constructor=I.WebGLRenderer,I.WebGLRenderer.prototype.initContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(!(this.gl=e))throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=e.id=I.WebGLRenderer.glContextId++,I.glContexts[this.glContextId]=e,I.instances[this.glContextId]=this,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.shaderManager.setContext(e),this.spriteBatch.setContext(e),this.maskManager.setContext(e),this.filterManager.setContext(e),this.blendModeManager.setContext(e),this.stencilManager.setContext(e),this.renderSession.gl=this.gl,this.resize(this.width,this.height)},I.WebGLRenderer.prototype.render=function(e){if(!this.contextLost){var t=this.gl;t.viewport(0,0,this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,null),this.game.clearBeforeRender&&(t.clearColor(e._bgColor.r,e._bgColor.g,e._bgColor.b,e._bgColor.a),t.clear(t.COLOR_BUFFER_BIT)),this.offset.x=this.game.camera._shake.x,this.offset.y=this.game.camera._shake.y,this.renderDisplayObject(e,this.projection)}},I.WebGLRenderer.prototype.renderDisplayObject=function(e,t,i,n){this.renderSession.blendModeManager.setBlendMode(I.blendModes.NORMAL),this.renderSession.drawCount=0,this.renderSession.flipY=i?-1:1,this.renderSession.projection=t,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,i),e._renderWebGL(this.renderSession,n),this.spriteBatch.end()},I.WebGLRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2/this.resolution,this.projection.y=-this.height/2/this.resolution},I.WebGLRenderer.prototype.updateTexture=function(e){if(!e.hasLoaded)return!1;var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===I.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&I.isPowerOfTwo(e.width,e.height)?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===I.scaleModes.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===I.scaleModes.LINEAR?t.LINEAR:t.NEAREST),e._powerOf2?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),!(e._dirty[t.id]=!1)},I.WebGLRenderer.prototype.destroy=function(){I.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null,I.CanvasPool.remove(this),I.instances[this.glContextId]=null,I.WebGLRenderer.glContextId--},I.WebGLRenderer.prototype.mapBlendModes=function(){var e=this.gl;if(!I.blendModesWebGL){var t=[],i=I.blendModes;t[i.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],t[i.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[i.SCREEN]=[e.SRC_ALPHA,e.ONE],t[i.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[i.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],I.blendModesWebGL=t}},I.WebGLRenderer.glContextId=0,I.WebGLBlendModeManager=function(){this.currentBlendMode=99999},I.WebGLBlendModeManager.prototype.constructor=I.WebGLBlendModeManager,I.WebGLBlendModeManager.prototype.setContext=function(e){this.gl=e},I.WebGLBlendModeManager.prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=I.blendModesWebGL[this.currentBlendMode];return t&&this.gl.blendFunc(t[0],t[1]),!0},I.WebGLBlendModeManager.prototype.destroy=function(){this.gl=null},I.WebGLMaskManager=function(){},I.WebGLMaskManager.prototype.constructor=I.WebGLMaskManager,I.WebGLMaskManager.prototype.setContext=function(e){this.gl=e},I.WebGLMaskManager.prototype.pushMask=function(e,t){var i=t.gl;e.dirty&&I.WebGLGraphics.updateGraphics(e,i),void 0!==e._webGL[i.id]&&void 0!==e._webGL[i.id].data&&0!==e._webGL[i.id].data.length&&t.stencilManager.pushStencil(e,e._webGL[i.id].data[0],t)},I.WebGLMaskManager.prototype.popMask=function(e,t){var i=this.gl;void 0!==e._webGL[i.id]&&void 0!==e._webGL[i.id].data&&0!==e._webGL[i.id].data.length&&t.stencilManager.popStencil(e,e._webGL[i.id].data[0],t)},I.WebGLMaskManager.prototype.destroy=function(){this.gl=null},I.WebGLStencilManager=function(){this.stencilStack=[],this.reverse=!0,this.count=0},I.WebGLStencilManager.prototype.setContext=function(e){this.gl=e},I.WebGLStencilManager.prototype.pushStencil=function(e,t,i){var n=this.gl;this.bindGraphics(e,t,i),0===this.stencilStack.length&&(n.enable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),this.reverse=!0,this.count=0),this.stencilStack.push(t);var r=this.count;n.colorMask(!1,!1,!1,!1),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),1===t.mode?(n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0),this.reverse?(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),this.reverse?n.stencilFunc(n.EQUAL,255-(r+1),255):n.stencilFunc(n.EQUAL,r+1,255),this.reverse=!this.reverse):(this.reverse?(n.stencilFunc(n.EQUAL,r,255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,255-r,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0),this.reverse?n.stencilFunc(n.EQUAL,r+1,255):n.stencilFunc(n.EQUAL,255-(r+1),255)),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),this.count++},I.WebGLStencilManager.prototype.bindGraphics=function(e,t,i){this._currentGraphics=e;var n,r=this.gl,o=i.projection,a=i.offset;1===t.mode?(n=i.shaderManager.complexPrimitiveShader,i.shaderManager.setShader(n),r.uniform1f(n.flipY,i.flipY),r.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform2f(n.projectionVector,o.x,-o.y),r.uniform2f(n.offsetVector,-a.x,-a.y),r.uniform3fv(n.tintColor,I.hex2rgb(e.tint)),r.uniform3fv(n.color,t.color),r.uniform1f(n.alpha,e.worldAlpha*t.alpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.aVertexPosition,2,r.FLOAT,!1,8,0)):(n=i.shaderManager.primitiveShader,i.shaderManager.setShader(n),r.uniformMatrix3fv(n.translationMatrix,!1,e.worldTransform.toArray(!0)),r.uniform1f(n.flipY,i.flipY),r.uniform2f(n.projectionVector,o.x,-o.y),r.uniform2f(n.offsetVector,-a.x,-a.y),r.uniform3fv(n.tintColor,I.hex2rgb(e.tint)),r.uniform1f(n.alpha,e.worldAlpha),r.bindBuffer(r.ARRAY_BUFFER,t.buffer),r.vertexAttribPointer(n.aVertexPosition,2,r.FLOAT,!1,24,0),r.vertexAttribPointer(n.colorAttribute,4,r.FLOAT,!1,24,8)),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.indexBuffer)},I.WebGLStencilManager.prototype.popStencil=function(e,t,i){var n=this.gl;if(this.stencilStack.pop(),this.count--,0===this.stencilStack.length)n.disable(n.STENCIL_TEST);else{var r=this.count;this.bindGraphics(e,t,i),n.colorMask(!1,!1,!1,!1),1===t.mode?(this.reverse=!this.reverse,this.reverse?(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)):(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),n.stencilFunc(n.ALWAYS,0,255),n.stencilOp(n.KEEP,n.KEEP,n.INVERT),n.drawElements(n.TRIANGLE_FAN,t.indices.length-4,n.UNSIGNED_SHORT,0)):(this.reverse?(n.stencilFunc(n.EQUAL,r+1,255),n.stencilOp(n.KEEP,n.KEEP,n.DECR)):(n.stencilFunc(n.EQUAL,255-(r+1),255),n.stencilOp(n.KEEP,n.KEEP,n.INCR)),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0)),this.reverse?n.stencilFunc(n.EQUAL,r,255):n.stencilFunc(n.EQUAL,255-r,255),n.colorMask(!0,!0,!0,!0),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)}},I.WebGLStencilManager.prototype.destroy=function(){this.stencilStack=null,this.gl=null},I.WebGLShaderManager=function(){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.stack=[]},I.WebGLShaderManager.prototype.constructor=I.WebGLShaderManager,I.WebGLShaderManager.prototype.setContext=function(e){this.gl=e,this.primitiveShader=new I.PrimitiveShader(e),this.complexPrimitiveShader=new I.ComplexPrimitiveShader(e),this.defaultShader=new I.PixiShader(e),this.fastShader=new I.PixiFastShader(e),this.stripShader=new I.StripShader(e),this.setShader(this.defaultShader)},I.WebGLShaderManager.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(t=0;t<e.length;t++){var i=e[t];this.tempAttribState[i]=!0}var n=this.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.tempAttribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},I.WebGLShaderManager.prototype.setShader=function(e){return this._currentId!==e._UID&&(this._currentId=e._UID,this.currentShader=e,this.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},I.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.complexPrimitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.stripShader.destroy(),this.gl=null},I.WebGLSpriteBatch=function(){this.vertSize=5,this.size=2e3;var e=4*this.size*4*this.vertSize,t=6*this.size;this.vertices=new I.ArrayBuffer(e),this.positions=new I.Float32Array(this.vertices),this.colors=new I.Uint32Array(this.vertices),this.indices=new I.Uint16Array(t);for(var i=this.lastIndexCount=0,n=0;i<t;i+=6,n+=4)this.indices[i+0]=n+0,this.indices[i+1]=n+1,this.indices[i+2]=n+2,this.indices[i+3]=n+0,this.indices[i+4]=n+2,this.indices[i+5]=n+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.dirty=!0,this.textures=[],this.blendModes=[],this.shaders=[],this.sprites=[],this.defaultShader=new I.AbstractFilter(["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"])},I.WebGLSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999;var t=new I.PixiShader(e);t.fragmentSrc=this.defaultShader.fragmentSrc,t.uniforms={},t.init(),this.defaultShader.shaders[e.id]=t},I.WebGLSpriteBatch.prototype.begin=function(e){this.renderSession=e,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},I.WebGLSpriteBatch.prototype.end=function(){this.flush()},I.WebGLSpriteBatch.prototype.render=function(e,t){var i=e.texture,n=e.worldTransform;t&&(n=t),this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=i.baseTexture);var r=i._uvs;if(r){var o,a,s,l,p=e.anchor.x,h=e.anchor.y;if(i.trim){var u=i.trim;o=(a=u.x-p*u.width)+i.crop.width,s=(l=u.y-h*u.height)+i.crop.height}else o=i.frame.width*(1-p),a=i.frame.width*-p,s=i.frame.height*(1-h),l=i.frame.height*-h;var c=4*this.currentBatchSize*this.vertSize,d=i.baseTexture.resolution,_=n.a/d,y=n.b/d,m=n.c/d,f=n.d/d,x=n.tx,v=n.ty,z=this.colors,g=this.positions;this.renderSession.roundPixels?(g[c]=_*a+m*l+x|0,g[c+1]=f*l+y*a+v|0,g[c+5]=_*o+m*l+x|0,g[c+6]=f*l+y*o+v|0,g[c+10]=_*o+m*s+x|0,g[c+11]=f*s+y*o+v|0,g[c+15]=_*a+m*s+x|0,g[c+16]=f*s+y*a+v|0):(g[c]=_*a+m*l+x,g[c+1]=f*l+y*a+v,g[c+5]=_*o+m*l+x,g[c+6]=f*l+y*o+v,g[c+10]=_*o+m*s+x,g[c+11]=f*s+y*o+v,g[c+15]=_*a+m*s+x,g[c+16]=f*s+y*a+v),g[c+2]=r.x0,g[c+3]=r.y0,g[c+7]=r.x1,g[c+8]=r.y1,g[c+12]=r.x2,g[c+13]=r.y2,g[c+17]=r.x3,g[c+18]=r.y3;var b=e.tint;z[c+4]=z[c+9]=z[c+14]=z[c+19]=(b>>16)+(65280&b)+((255&b)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},I.WebGLSpriteBatch.prototype.renderTilingSprite=function(e){var t=e.tilingTexture;this.currentBatchSize>=this.size&&(this.flush(),this.currentBaseTexture=t.baseTexture),e._uvs||(e._uvs=new I.TextureUvs);var i=e._uvs,n=t.baseTexture.width,r=t.baseTexture.height;e.tilePosition.x%=n*e.tileScaleOffset.x,e.tilePosition.y%=r*e.tileScaleOffset.y;var o=e.tilePosition.x/(n*e.tileScaleOffset.x),a=e.tilePosition.y/(r*e.tileScaleOffset.y),s=e.width/n/(e.tileScale.x*e.tileScaleOffset.x),l=e.height/r/(e.tileScale.y*e.tileScaleOffset.y);i.x0=0-o,i.y0=0-a,i.x1=1*s-o,i.y1=0-a,i.x2=1*s-o,i.y2=1*l-a,i.x3=0-o,i.y3=1*l-a;var p=e.tint,h=(p>>16)+(65280&p)+((255&p)<<16)+(255*e.worldAlpha<<24),u=this.positions,c=this.colors,d=e.width,_=e.height,y=e.anchor.x,m=e.anchor.y,f=d*(1-y),x=d*-y,v=_*(1-m),z=_*-m,g=4*this.currentBatchSize*this.vertSize,b=t.baseTexture.resolution,w=e.worldTransform,S=w.a/b,C=w.b/b,M=w.c/b,P=w.d/b,k=w.tx,T=w.ty;u[g++]=S*x+M*z+k,u[g++]=P*z+C*x+T,u[g++]=i.x0,u[g++]=i.y0,c[g++]=h,u[g++]=S*f+M*z+k,u[g++]=P*z+C*f+T,u[g++]=i.x1,u[g++]=i.y1,c[g++]=h,u[g++]=S*f+M*v+k,u[g++]=P*v+C*f+T,u[g++]=i.x2,u[g++]=i.y2,c[g++]=h,u[g++]=S*x+M*v+k,u[g++]=P*v+C*x+T,u[g++]=i.x3,u[g++]=i.y3,c[g++]=h,this.sprites[this.currentBatchSize++]=e},I.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t=this.gl;if(this.dirty){this.dirty=!1,t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e=this.defaultShader.shaders[t.id];var i=4*this.vertSize;t.vertexAttribPointer(e.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(e.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(e.colorAttribute,4,t.UNSIGNED_BYTE,!0,i,16)}if(this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var n=this.positions.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,n)}for(var r,o,a,s,l=0,p=0,h=null,u=this.renderSession.blendModeManager.currentBlendMode,c=null,d=!1,_=!1,y=0,m=this.currentBatchSize;y<m;y++){r=(s=this.sprites[y]).tilingTexture?s.tilingTexture.baseTexture:s.texture.baseTexture,d=u!==(o=s.blendMode),_=c!==(a=s.shader||this.defaultShader);var f=r.skipRender;if(f&&0<s.children.length&&(f=!1),(h!==r&&!f||d||_)&&(this.renderBatch(h,l,p),p=y,l=0,h=r,d&&(u=o,this.renderSession.blendModeManager.setBlendMode(u)),_)){(e=(c=a).shaders[t.id])||((e=new I.PixiShader(t)).fragmentSrc=c.fragmentSrc,e.uniforms=c.uniforms,e.init(),c.shaders[t.id]=e),this.renderSession.shaderManager.setShader(e),e.dirty&&e.syncUniforms();var x=this.renderSession.projection;t.uniform2f(e.projectionVector,x.x,x.y);var v=this.renderSession.offset;t.uniform2f(e.offsetVector,v.x,v.y)}l++}this.renderBatch(h,l,p),this.currentBatchSize=0}},I.WebGLSpriteBatch.prototype.renderBatch=function(e,t,i){if(0!==t){var n=this.gl;if(e._dirty[n.id]){if(!this.renderSession.renderer.updateTexture(e))return}else n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]);n.drawElements(n.TRIANGLES,6*t,n.UNSIGNED_SHORT,6*i*2),this.renderSession.drawCount++}},I.WebGLSpriteBatch.prototype.stop=function(){this.flush(),this.dirty=!0},I.WebGLSpriteBatch.prototype.start=function(){this.dirty=!0},I.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},I.WebGLFastSpriteBatch=function(e){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var t=4*this.size*this.vertSize,i=6*this.maxSize;this.vertices=new I.Float32Array(t),this.indices=new I.Uint16Array(i),this.vertexBuffer=null,this.indexBuffer=null;for(var n=this.lastIndexCount=0,r=0;n<i;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(e)},I.WebGLFastSpriteBatch.prototype.constructor=I.WebGLFastSpriteBatch,I.WebGLFastSpriteBatch.prototype.setContext=function(e){this.gl=e,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW)},I.WebGLFastSpriteBatch.prototype.begin=function(e,t){this.renderSession=t,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=e.worldTransform.toArray(!0),this.start()},I.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},I.WebGLFastSpriteBatch.prototype.render=function(e){var t=e.children,i=t[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.renderSession.blendModeManager.currentBlendMode&&(this.flush(),this.renderSession.blendModeManager.setBlendMode(i.blendMode));for(var n=0,r=t.length;n<r;n++)this.renderSprite(t[n]);this.flush()}},I.WebGLFastSpriteBatch.prototype.renderSprite=function(e){if(e.visible&&(e.texture.baseTexture===this.currentBaseTexture||e.texture.baseTexture.skipRender||(this.flush(),this.currentBaseTexture=e.texture.baseTexture,e.texture._uvs))){var t,i,n,r,o,a,s=this.vertices;if(t=e.texture._uvs,e.texture.frame.width,e.texture.frame.height,e.texture.trim){var l=e.texture.trim;i=(n=l.x-e.anchor.x*l.width)+e.texture.crop.width,r=(o=l.y-e.anchor.y*l.height)+e.texture.crop.height}else i=e.texture.frame.width*(1-e.anchor.x),n=e.texture.frame.width*-e.anchor.x,r=e.texture.frame.height*(1-e.anchor.y),o=e.texture.frame.height*-e.anchor.y;a=4*this.currentBatchSize*this.vertSize,s[a++]=n,s[a++]=o,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x0,s[a++]=t.y1,s[a++]=e.alpha,s[a++]=i,s[a++]=o,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x1,s[a++]=t.y1,s[a++]=e.alpha,s[a++]=i,s[a++]=r,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x2,s[a++]=t.y2,s[a++]=e.alpha,s[a++]=n,s[a++]=r,s[a++]=e.position.x,s[a++]=e.position.y,s[a++]=e.scale.x,s[a++]=e.scale.y,s[a++]=e.rotation,s[a++]=t.x3,s[a++]=t.y3,s[a++]=e.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},I.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var e=this.gl;if(this.currentBaseTexture._glTextures[e.id]||this.renderSession.renderer.updateTexture(this.currentBaseTexture,e),e.bindTexture(e.TEXTURE_2D,this.currentBaseTexture._glTextures[e.id]),this.currentBatchSize>.5*this.size)e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices);else{var t=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);e.bufferSubData(e.ARRAY_BUFFER,0,t)}e.drawElements(e.TRIANGLES,6*this.currentBatchSize,e.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},I.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},I.WebGLFastSpriteBatch.prototype.start=function(){var e=this.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.renderSession.projection;e.uniform2f(this.shader.projectionVector,t.x,t.y),e.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;e.vertexAttribPointer(this.shader.aVertexPosition,2,e.FLOAT,!1,i,0),e.vertexAttribPointer(this.shader.aPositionCoord,2,e.FLOAT,!1,i,8),e.vertexAttribPointer(this.shader.aScale,2,e.FLOAT,!1,i,16),e.vertexAttribPointer(this.shader.aRotation,1,e.FLOAT,!1,i,24),e.vertexAttribPointer(this.shader.aTextureCoord,2,e.FLOAT,!1,i,28),e.vertexAttribPointer(this.shader.colorAttribute,1,e.FLOAT,!1,i,36)},I.WebGLFilterManager=function(){this.filterStack=[],this.offsetX=0,this.offsetY=0},I.WebGLFilterManager.prototype.constructor=I.WebGLFilterManager,I.WebGLFilterManager.prototype.setContext=function(e){this.gl=e,this.texturePool=[],this.initShaderBuffers()},I.WebGLFilterManager.prototype.begin=function(e,t){this.renderSession=e,this.defaultShader=e.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=t},I.WebGLFilterManager.prototype.pushFilter=function(e){var t=this.gl,i=this.renderSession.projection,n=this.renderSession.offset;e._filterArea=e.target.filterArea||e.target.getBounds(),e._previous_stencil_mgr=this.renderSession.stencilManager,this.renderSession.stencilManager=new I.WebGLStencilManager,this.renderSession.stencilManager.setContext(t),t.disable(t.STENCIL_TEST),this.filterStack.push(e);var r=e.filterPasses[0];this.offsetX+=e._filterArea.x,this.offsetY+=e._filterArea.y;var o=this.texturePool.pop();o?o.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution):o=new I.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),t.bindTexture(t.TEXTURE_2D,o.texture);var a=e._filterArea,s=r.padding;a.x-=s,a.y-=s,a.width+=2*s,a.height+=2*s,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),t.bindFramebuffer(t.FRAMEBUFFER,o.frameBuffer),t.viewport(0,0,a.width*this.renderSession.resolution,a.height*this.renderSession.resolution),i.x=a.width/2,i.y=-a.height/2,n.x=-a.x,n.y=-a.y,t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),e._glFilterTexture=o},I.WebGLFilterManager.prototype.popFilter=function(){var e=this.gl,t=this.filterStack.pop(),i=t._filterArea,n=t._glFilterTexture,r=this.renderSession.projection,o=this.renderSession.offset;if(1<t.filterPasses.length){e.viewport(0,0,i.width*this.renderSession.resolution,i.height*this.renderSession.resolution),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=i.height,this.vertexArray[2]=i.width,this.vertexArray[3]=i.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=i.width,this.vertexArray[7]=0,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray);var a=n,s=this.texturePool.pop();s||(s=new I.FilterTexture(this.gl,this.width*this.renderSession.resolution,this.height*this.renderSession.resolution)),s.resize(this.width*this.renderSession.resolution,this.height*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.clear(e.COLOR_BUFFER_BIT),e.disable(e.BLEND);for(var l=0;l<t.filterPasses.length-1;l++){var p=t.filterPasses[l];e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,a.texture),this.applyFilterPass(p,i,i.width,i.height);var h=a;a=s,s=h}e.enable(e.BLEND),n=a,this.texturePool.push(s)}var u=t.filterPasses[t.filterPasses.length-1];this.offsetX-=i.x,this.offsetY-=i.y;var c=this.width,d=this.height,_=0,y=0,m=this.buffer;if(0===this.filterStack.length)e.colorMask(!0,!0,!0,!0);else{var f=this.filterStack[this.filterStack.length-1];c=(i=f._filterArea).width,d=i.height,_=i.x,y=i.y,m=f._glFilterTexture.frameBuffer}r.x=c/2,r.y=-d/2,o.x=_,o.y=y;var x=(i=t._filterArea).x-_,v=i.y-y;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=x,this.vertexArray[1]=v+i.height,this.vertexArray[2]=x+i.width,this.vertexArray[3]=v+i.height,this.vertexArray[4]=x,this.vertexArray[5]=v,this.vertexArray[6]=x+i.width,this.vertexArray[7]=v,e.bufferSubData(e.ARRAY_BUFFER,0,this.vertexArray),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,e.bufferSubData(e.ARRAY_BUFFER,0,this.uvArray),e.viewport(0,0,c*this.renderSession.resolution,d*this.renderSession.resolution),e.bindFramebuffer(e.FRAMEBUFFER,m),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n.texture),this.renderSession.stencilManager&&this.renderSession.stencilManager.destroy(),this.renderSession.stencilManager=t._previous_stencil_mgr,t._previous_stencil_mgr=null,0<this.renderSession.stencilManager.count?e.enable(e.STENCIL_TEST):e.disable(e.STENCIL_TEST),this.applyFilterPass(u,i,c,d),this.texturePool.push(n),t._glFilterTexture=null},I.WebGLFilterManager.prototype.applyFilterPass=function(e,t,i,n){var r=this.gl,o=e.shaders[r.id];o||((o=new I.PixiShader(r)).fragmentSrc=e.fragmentSrc,o.uniforms=e.uniforms,o.init(),e.shaders[r.id]=o),this.renderSession.shaderManager.setShader(o),r.uniform2f(o.projectionVector,i/2,-n/2),r.uniform2f(o.offsetVector,0,0),e.uniforms.dimensions&&(e.uniforms.dimensions.value[0]=this.width,e.uniforms.dimensions.value[1]=this.height,e.uniforms.dimensions.value[2]=this.vertexArray[0],e.uniforms.dimensions.value[3]=this.vertexArray[5]),o.syncUniforms(),r.bindBuffer(r.ARRAY_BUFFER,this.vertexBuffer),r.vertexAttribPointer(o.aVertexPosition,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.uvBuffer),r.vertexAttribPointer(o.aTextureCoord,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.colorBuffer),r.vertexAttribPointer(o.colorAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.indexBuffer),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0),this.renderSession.drawCount++},I.WebGLFilterManager.prototype.initShaderBuffers=function(){var e=this.gl;this.vertexBuffer=e.createBuffer(),this.uvBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.vertexArray=new I.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertexArray,e.STATIC_DRAW),this.uvArray=new I.Float32Array([0,0,1,0,0,1,1,1]),e.bindBuffer(e.ARRAY_BUFFER,this.uvBuffer),e.bufferData(e.ARRAY_BUFFER,this.uvArray,e.STATIC_DRAW),this.colorArray=new I.Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,this.colorArray,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),e.STATIC_DRAW)},I.WebGLFilterManager.prototype.destroy=function(){var e=this.gl;this.filterStack=null,this.offsetX=0;for(var t=this.offsetY=0;t<this.texturePool.length;t++)this.texturePool[t].destroy();this.texturePool=null,e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.uvBuffer),e.deleteBuffer(this.colorBuffer),e.deleteBuffer(this.indexBuffer)},I.FilterTexture=function(e,t,i,n){this.gl=e,this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),n=n||I.scaleModes.DEFAULT,e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n===I.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n===I.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0),this.renderBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.renderBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.renderBuffer),this.resize(t,i)},I.FilterTexture.prototype.constructor=I.FilterTexture,I.FilterTexture.prototype.clear=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},I.FilterTexture.prototype.resize=function(e,t){if(this.width!==e||this.height!==t){this.width=e,this.height=t;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e,t,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t)}},I.FilterTexture.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},I.CanvasBuffer=function(e,t){this.width=e,this.height=t,this.canvas=I.CanvasPool.create(this,this.width,this.height),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t},I.CanvasBuffer.prototype.constructor=I.CanvasBuffer,I.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},I.CanvasBuffer.prototype.resize=function(e,t){this.width=this.canvas.width=e,this.height=this.canvas.height=t},I.CanvasBuffer.prototype.destroy=function(){I.CanvasPool.remove(this)},I.CanvasMaskManager=function(){},I.CanvasMaskManager.prototype.constructor=I.CanvasMaskManager,I.CanvasMaskManager.prototype.pushMask=function(e,t){var i=t.context;i.save();var n=e.alpha,r=e.worldTransform,o=t.resolution;i.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),I.CanvasGraphics.renderGraphicsMask(e,i),i.clip(),e.worldAlpha=n},I.CanvasMaskManager.prototype.popMask=function(e){e.context.restore()},I.CanvasTinter=function(){},I.CanvasTinter.getTintedTexture=function(e,t){var i=e.tintedTexture||I.CanvasPool.create(this);return I.CanvasTinter.tintMethod(e.texture,t,i),i},I.CanvasTinter.tintWithMultiply=function(e,t,i){var n=i.getContext("2d"),r=e.crop;i.width===r.width&&i.height===r.height||(i.width=r.width,i.height=r.height),n.clearRect(0,0,r.width,r.height),n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},I.CanvasTinter.tintWithPerPixel=function(e,t,i){var n=i.getContext("2d"),r=e.crop;i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);for(var o=I.hex2rgb(t),a=o[0],s=o[1],l=o[2],p=n.getImageData(0,0,r.width,r.height),h=p.data,u=0;u<h.length;u+=4)if(h[u+0]*=a,h[u+1]*=s,h[u+2]*=l,!I.CanvasTinter.canHandleAlpha){var c=h[u+3];h[u+0]/=255/c,h[u+1]/=255/c,h[u+2]/=255/c}n.putImageData(p,0,0)},I.CanvasTinter.checkInverseAlpha=function(){var e=new I.CanvasBuffer(2,1);e.context.fillStyle="rgba(10, 20, 30, 0.5)",e.context.fillRect(0,0,1,1);var t=e.context.getImageData(0,0,1,1);if(null===t)return!1;e.context.putImageData(t,1,0);var i=e.context.getImageData(1,0,1,1);return i.data[0]===t.data[0]&&i.data[1]===t.data[1]&&i.data[2]===t.data[2]&&i.data[3]===t.data[3]},I.CanvasTinter.canHandleAlpha=I.CanvasTinter.checkInverseAlpha(),I.CanvasTinter.canUseMultiply=I.canUseNewCanvasBlendModes(),I.CanvasTinter.tintMethod=I.CanvasTinter.canUseMultiply?I.CanvasTinter.tintWithMultiply:I.CanvasTinter.tintWithPerPixel,I.CanvasRenderer=function(e){this.game=e,I.defaultRenderer||(I.defaultRenderer=this),this.type=I.CANVAS_RENDERER,this.resolution=e.resolution,this.clearBeforeRender=e.clearBeforeRender,this.transparent=e.transparent,this.autoResize=!1,this.width=e.width*this.resolution,this.height=e.height*this.resolution,this.view=e.canvas,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.count=0,this.maskManager=new I.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:Phaser.Canvas.getSmoothingPrefix(this.context),roundPixels:!1},this.mapBlendModes(),this.resize(this.width,this.height)},I.CanvasRenderer.prototype.constructor=I.CanvasRenderer,I.CanvasRenderer.prototype.render=function(e){this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode=0,this.renderSession.shakeX=this.game.camera._shake.x,this.renderSession.shakeY=this.game.camera._shake.y,this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):e._bgColor&&(this.context.fillStyle=e._bgColor.rgba,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e)},I.CanvasRenderer.prototype.destroy=function(e){void 0===e&&(e=!0),e&&this.view.parent&&this.view.parent.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},I.CanvasRenderer.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px"),this.renderSession.smoothProperty&&(this.context[this.renderSession.smoothProperty]=this.renderSession.scaleMode===I.scaleModes.LINEAR)},I.CanvasRenderer.prototype.renderDisplayObject=function(e,t,i){this.renderSession.context=t||this.context,this.renderSession.resolution=this.resolution,e._renderCanvas(this.renderSession,i)},I.CanvasRenderer.prototype.mapBlendModes=function(){if(!I.blendModesCanvas){var e=[],t=I.blendModes,i=I.canUseNewCanvasBlendModes();e[t.NORMAL]="source-over",e[t.ADD]="lighter",e[t.MULTIPLY]=i?"multiply":"source-over",e[t.SCREEN]=i?"screen":"source-over",e[t.OVERLAY]=i?"overlay":"source-over",e[t.DARKEN]=i?"darken":"source-over",e[t.LIGHTEN]=i?"lighten":"source-over",e[t.COLOR_DODGE]=i?"color-dodge":"source-over",e[t.COLOR_BURN]=i?"color-burn":"source-over",e[t.HARD_LIGHT]=i?"hard-light":"source-over",e[t.SOFT_LIGHT]=i?"soft-light":"source-over",e[t.DIFFERENCE]=i?"difference":"source-over",e[t.EXCLUSION]=i?"exclusion":"source-over",e[t.HUE]=i?"hue":"source-over",e[t.SATURATION]=i?"saturation":"source-over",e[t.COLOR]=i?"color":"source-over",e[t.LUMINOSITY]=i?"luminosity":"source-over",I.blendModesCanvas=e}},I.BaseTexture=function(e,t){this.resolution=1,this.width=100,this.height=100,this.scaleMode=t||I.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=e,this.premultipliedAlpha=!0,this._glTextures=[],this.mipmap=!1,this._dirty=[!0,!0,!0,!0],e&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height&&(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.dirty()),this.skipRender=!1,this._powerOf2=!1)},I.BaseTexture.prototype.constructor=I.BaseTexture,I.BaseTexture.prototype.forceLoaded=function(e,t){this.hasLoaded=!0,this.width=e,this.height=t,this.dirty()},I.BaseTexture.prototype.destroy=function(){this.source&&I.CanvasPool.removeByCanvas(this.source),this.source=null,this.unloadFromGPU()},I.BaseTexture.prototype.updateSourceImage=function(e){},I.BaseTexture.prototype.dirty=function(){for(var e=0;e<this._glTextures.length;e++)this._dirty[e]=!0},I.BaseTexture.prototype.unloadFromGPU=function(){this.dirty();for(var e=this._glTextures.length-1;0<=e;e--){var t=this._glTextures[e],i=I.glContexts[e];i&&t&&i.deleteTexture(t)}this._glTextures.length=0,this.dirty()},I.BaseTexture.fromCanvas=function(e,t){return 0===e.width&&(e.width=1),0===e.height&&(e.height=1),new I.BaseTexture(e,t)},I.TextureSilentFail=!1,I.Texture=function(e,t,i,n){this.noFrame=!1,t||(this.noFrame=!0,t=new I.Rectangle(0,0,1,1)),e instanceof I.Texture&&(e=e.baseTexture),this.baseTexture=e,this.frame=t,this.trim=n,this.valid=!1,this.isTiling=!1,this.requiresUpdate=!1,this.requiresReTint=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||new I.Rectangle(0,0,1,1),e.hasLoaded&&(this.noFrame&&(t=new I.Rectangle(0,0,e.width,e.height)),this.setFrame(t))},I.Texture.prototype.constructor=I.Texture,I.Texture.prototype.onBaseTextureLoaded=function(){var e=this.baseTexture;this.noFrame&&(this.frame=new I.Rectangle(0,0,e.width,e.height)),this.setFrame(this.frame)},I.Texture.prototype.destroy=function(e){e&&this.baseTexture.destroy(),this.valid=!1},I.Texture.prototype.setFrame=function(e){if(this.noFrame=!1,this.frame=e,this.width=e.width,this.height=e.height,this.crop.x=e.x,this.crop.y=e.y,this.crop.width=e.width,this.crop.height=e.height,this.trim||!(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))this.valid=e&&e.width&&e.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height),this.valid&&this._updateUvs();else{if(!I.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},I.Texture.prototype._updateUvs=function(){this._uvs||(this._uvs=new I.TextureUvs);var e=this.crop,t=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=e.x/t,this._uvs.y0=e.y/i,this._uvs.x1=(e.x+e.width)/t,this._uvs.y1=e.y/i,this._uvs.x2=(e.x+e.width)/t,this._uvs.y2=(e.y+e.height)/i,this._uvs.x3=e.x/t,this._uvs.y3=(e.y+e.height)/i},I.Texture.fromCanvas=function(e,t){var i=I.BaseTexture.fromCanvas(e,t);return new I.Texture(i)},I.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y3=0},I.RenderTexture=function(e,t,i,n,r){if(this.width=e||100,this.height=t||100,this.resolution=r||1,this.frame=new I.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.crop=new I.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution),this.baseTexture=new I.BaseTexture,this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution,this.baseTexture._glTextures=[],this.baseTexture.resolution=this.resolution,this.baseTexture.scaleMode=n||I.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,I.Texture.call(this,this.baseTexture,new I.Rectangle(0,0,this.width*this.resolution,this.height*this.resolution)),this.renderer=i||I.defaultRenderer,this.renderer.type===I.WEBGL_RENDERER){var o=this.renderer.gl;this.baseTexture._dirty[o.id]=!1,this.textureBuffer=new I.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new I.Point(.5*this.width,.5*-this.height)}else this.render=this.renderCanvas,this.textureBuffer=new I.CanvasBuffer(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this.tempMatrix=new Phaser.Matrix,this._updateUvs()},I.RenderTexture.prototype=Object.create(I.Texture.prototype),I.RenderTexture.prototype.constructor=I.RenderTexture,I.RenderTexture.prototype.resize=function(e,t,i){e===this.width&&t===this.height||(this.valid=0<e&&0<t,this.width=e,this.height=t,this.frame.width=this.crop.width=e*this.resolution,this.frame.height=this.crop.height=t*this.resolution,i&&(this.baseTexture.width=this.width*this.resolution,this.baseTexture.height=this.height*this.resolution),this.renderer.type===I.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.valid&&this.textureBuffer.resize(this.width,this.height))},I.RenderTexture.prototype.clear=function(){this.valid&&(this.renderer.type===I.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},I.RenderTexture.prototype.renderWebGL=function(e,t,i){if(this.valid&&0!==e.alpha){var n=e.worldTransform;n.identity(),n.translate(0,2*this.projection.y),t&&n.append(t),n.scale(1,-1);for(var r=0;r<e.children.length;r++)e.children[r].updateTransform();var o=this.renderer.gl;o.viewport(0,0,this.width*this.resolution,this.height*this.resolution),o.bindFramebuffer(o.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear(),this.renderer.spriteBatch.dirty=!0,this.renderer.renderDisplayObject(e,this.projection,this.textureBuffer.frameBuffer,t),this.renderer.spriteBatch.dirty=!0}},I.RenderTexture.prototype.renderCanvas=function(e,t,i){if(this.valid&&0!==e.alpha){var n=e.worldTransform;n.identity(),t&&n.append(t);for(var r=0;r<e.children.length;r++)e.children[r].updateTransform();i&&this.textureBuffer.clear();var o=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,this.textureBuffer.context,t),this.renderer.resolution=o}},I.RenderTexture.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},I.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},I.RenderTexture.prototype.getCanvas=function(){if(this.renderer.type===I.WEBGL_RENDERER){var e=this.renderer.gl,t=this.textureBuffer.width,i=this.textureBuffer.height,n=new Uint8Array(4*t*i);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,i,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var r=new I.CanvasBuffer(t,i),o=r.context.getImageData(0,0,t,i);return o.data.set(n),r.context.putImageData(o,0,0),r.canvas}return this.textureBuffer.canvas},I.AbstractFilter=function(e,t){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=t||{},this.fragmentSrc=e||[]},I.AbstractFilter.prototype.constructor=I.AbstractFilter,I.AbstractFilter.prototype.syncUniforms=function(){for(var e=0,t=this.shaders.length;e<t;e++)this.shaders[e].dirty=!0},I.Strip=function(e){I.DisplayObjectContainer.call(this),this.texture=e,this.uvs=new I.Float32Array([0,1,1,1,1,0,0,1]),this.vertices=new I.Float32Array([0,0,100,0,100,100,0,100]),this.colors=new I.Float32Array([1,1,1,1]),this.indices=new I.Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=I.blendModes.NORMAL,this.canvasPadding=0,this.drawMode=I.Strip.DrawModes.TRIANGLE_STRIP},I.Strip.prototype=Object.create(I.DisplayObjectContainer.prototype),I.Strip.prototype.constructor=I.Strip,I.Strip.prototype._renderWebGL=function(e){!this.visible||this.alpha<=0||(e.spriteBatch.stop(),this._vertexBuffer||this._initWebGL(e),e.shaderManager.setShader(e.shaderManager.stripShader),this._renderStrip(e),e.spriteBatch.start())},I.Strip.prototype._initWebGL=function(e){var t=e.gl;this._vertexBuffer=t.createBuffer(),this._indexBuffer=t.createBuffer(),this._uvBuffer=t.createBuffer(),this._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this._colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colors,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)},I.Strip.prototype._renderStrip=function(e){var t=e.gl,i=e.projection,n=e.offset,r=e.shaderManager.stripShader,o=this.drawMode===I.Strip.DrawModes.TRIANGLE_STRIP?t.TRIANGLE_STRIP:t.TRIANGLES;e.blendModeManager.setBlendMode(this.blendMode),t.uniformMatrix3fv(r.translationMatrix,!1,this.worldTransform.toArray(!0)),t.uniform2f(r.projectionVector,i.x,-i.y),t.uniform2f(r.offsetVector,-n.x,-n.y),t.uniform1f(r.alpha,this.worldAlpha),this.dirty?(this.dirty=!1,t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.STATIC_DRAW),t.vertexAttribPointer(r.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvs,t.STATIC_DRAW),t.vertexAttribPointer(r.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW)):(t.bindBuffer(t.ARRAY_BUFFER,this._vertexBuffer),t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices),t.vertexAttribPointer(r.aVertexPosition,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this._uvBuffer),t.vertexAttribPointer(r.aTextureCoord,2,t.FLOAT,!1,0,0),t.activeTexture(t.TEXTURE0),this.texture.baseTexture._dirty[t.id]?e.renderer.updateTexture(this.texture.baseTexture):t.bindTexture(t.TEXTURE_2D,this.texture.baseTexture._glTextures[t.id]),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._indexBuffer)),t.drawElements(o,this.indices.length,t.UNSIGNED_SHORT,0)},I.Strip.prototype._renderCanvas=function(e){var t=e.context,i=this.worldTransform,n=i.tx*e.resolution+e.shakeX,r=i.ty*e.resolution+e.shakeY;e.roundPixels?t.setTransform(i.a,i.b,i.c,i.d,0|n,0|r):t.setTransform(i.a,i.b,i.c,i.d,n,r),this.drawMode===I.Strip.DrawModes.TRIANGLE_STRIP?this._renderCanvasTriangleStrip(t):this._renderCanvasTriangles(t)},I.Strip.prototype._renderCanvasTriangleStrip=function(e){var t=this.vertices,i=this.uvs,n=t.length/2;this.count++;for(var r=0;r<n-2;r++){var o=2*r;this._renderCanvasDrawTriangle(e,t,i,o,o+2,o+4)}},I.Strip.prototype._renderCanvasTriangles=function(e){var t=this.vertices,i=this.uvs,n=this.indices,r=n.length;this.count++;for(var o=0;o<r;o+=3){var a=2*n[o],s=2*n[o+1],l=2*n[o+2];this._renderCanvasDrawTriangle(e,t,i,a,s,l)}},I.Strip.prototype._renderCanvasDrawTriangle=function(e,t,i,n,r,o){var a=this.texture.baseTexture.source,s=this.texture.width,l=this.texture.height,p=t[n],h=t[r],u=t[o],c=t[n+1],d=t[r+1],_=t[o+1],y=i[n]*s,m=i[r]*s,f=i[o]*s,x=i[n+1]*l,v=i[r+1]*l,z=i[o+1]*l;if(0<this.canvasPadding){var g=this.canvasPadding/this.worldTransform.a,b=this.canvasPadding/this.worldTransform.d,w=(p+h+u)/3,S=(c+d+_)/3,C=p-w,M=c-S,P=Math.sqrt(C*C+M*M);p=w+C/P*(P+g),c=S+M/P*(P+b),M=d-S,h=w+(C=h-w)/(P=Math.sqrt(C*C+M*M))*(P+g),d=S+M/P*(P+b),M=_-S,u=w+(C=u-w)/(P=Math.sqrt(C*C+M*M))*(P+g),_=S+M/P*(P+b)}e.save(),e.beginPath(),e.moveTo(p,c),e.lineTo(h,d),e.lineTo(u,_),e.closePath(),e.clip();var k=y*v+x*f+m*z-v*f-x*m-y*z,T=p*v+x*u+h*z-v*u-x*h-p*z,O=y*h+p*f+m*u-h*f-p*m-y*u,A=y*v*u+x*h*f+p*m*z-p*v*f-x*m*u-y*h*z,E=c*v+x*_+d*z-v*_-x*d-c*z,G=y*d+c*f+m*_-d*f-c*m-y*_,I=y*v*_+x*d*f+c*m*z-c*v*f-x*m*_-y*d*z;e.transform(T/k,E/k,O/k,G/k,A/k,I/k),e.drawImage(a,0,0),e.restore()},I.Strip.prototype.renderStripFlat=function(e){var t=this.context,i=e.vertices,n=i.length/2;this.count++,t.beginPath();for(var r=1;r<n-2;r++){var o=2*r,a=i[o],s=i[o+2],l=i[o+4],p=i[o+1],h=i[o+3],u=i[o+5];t.moveTo(a,p),t.lineTo(s,h),t.lineTo(l,u)}t.fillStyle="#FF0000",t.fill(),t.closePath()},I.Strip.prototype.onTextureUpdate=function(){this.updateFrame=!0},I.Strip.prototype.getBounds=function(e){for(var t=e||this.worldTransform,i=t.a,n=t.b,r=t.c,o=t.d,a=t.tx,s=t.ty,l=-1/0,p=-1/0,h=1/0,u=1/0,c=this.vertices,d=0,_=c.length;d<_;d+=2){var y=c[d],m=c[d+1],f=i*y+r*m+a,x=o*m+n*y+s;h=f<h?f:h,u=x<u?x:u,l=l<f?f:l,p=p<x?x:p}if(h===-1/0||p===1/0)return I.EmptyRectangle;var v=this._bounds;return v.x=h,v.width=l-h,v.y=u,v.height=p-u,this._currentBounds=v},I.Strip.DrawModes={TRIANGLE_STRIP:0,TRIANGLES:1},I.Rope=function(e,t){I.Strip.call(this,e),this.points=t,this.vertices=new I.Float32Array(4*t.length),this.uvs=new I.Float32Array(4*t.length),this.colors=new I.Float32Array(2*t.length),this.indices=new I.Uint16Array(2*t.length),this.refresh()},I.Rope.prototype=Object.create(I.Strip.prototype),I.Rope.prototype.constructor=I.Rope,I.Rope.prototype.refresh=function(){var e=this.points;if(!(e.length<1)){var t=this.uvs,i=(e[0],this.indices),n=this.colors;this.count-=.2,t[0]=0,t[1]=0,t[2]=0,t[3]=1,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var r,o,a=e.length,s=1;s<a;s++)e[s],o=s/(a-1),t[r=4*s]=o,t[r+1]=0,t[r+2]=o,t[r+3]=1,n[r=2*s]=1,n[r+1]=1,i[r=2*s]=r,i[r+1]=r+1}},I.Rope.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){var t,i=e[0],n={x:0,y:0};this.count-=.2;for(var r,o,a,s,l=this.vertices,p=e.length,h=0;h<p;h++)r=e[h],o=4*h,t=h<e.length-1?e[h+1]:r,n.y=-(t.x-i.x),n.x=t.y-i.y,1<10*(1-h/(p-1))&&1,a=Math.sqrt(n.x*n.x+n.y*n.y),s=this.texture.height/2,n.x/=a,n.y/=a,n.x*=s,n.y*=s,l[o]=r.x+n.x,l[o+1]=r.y+n.y,l[o+2]=r.x-n.x,l[o+3]=r.y-n.y,i=r;I.DisplayObjectContainer.prototype.updateTransform.call(this)}},I.Rope.prototype.setTexture=function(e){this.texture=e},I.TilingSprite=function(e,t,i){I.Sprite.call(this,e),this._width=t||128,this._height=i||128,this.tileScale=new I.Point(1,1),this.tileScaleOffset=new I.Point(1,1),this.tilePosition=new I.Point,this.renderable=!0,this.tint=16777215,this.textureDebug=!1,this.blendMode=I.blendModes.NORMAL,this.canvasBuffer=null,this.tilingTexture=null,this.tilePattern=null,this.refreshTexture=!0,this.frameWidth=0,this.frameHeight=0},I.TilingSprite.prototype=Object.create(I.Sprite.prototype),I.TilingSprite.prototype.constructor=I.TilingSprite,I.TilingSprite.prototype.setTexture=function(e){this.texture!==e&&(this.texture=e,this.refreshTexture=!0,this.cachedTint=16777215)},I.TilingSprite.prototype._renderWebGL=function(e){if(this.visible&&this.renderable&&0!==this.alpha){if(this._mask&&(e.spriteBatch.stop(),e.maskManager.pushMask(this.mask,e),e.spriteBatch.start()),this._filters&&(e.spriteBatch.flush(),e.filterManager.pushFilter(this._filterBlock)),this.refreshTexture){if(this.generateTilingTexture(!0,e),!this.tilingTexture)return;this.tilingTexture.needsUpdate&&(e.renderer.updateTexture(this.tilingTexture.baseTexture),this.tilingTexture.needsUpdate=!1)}e.spriteBatch.renderTilingSprite(this);for(var t=0;t<this.children.length;t++)this.children[t]._renderWebGL(e);e.spriteBatch.stop(),this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this._mask,e),e.spriteBatch.start()}},I.TilingSprite.prototype._renderCanvas=function(e){if(this.visible&&this.renderable&&0!==this.alpha){var t=e.context;this._mask&&e.maskManager.pushMask(this._mask,e),t.globalAlpha=this.worldAlpha;var i=this.worldTransform,n=e.resolution,r=i.tx*n+e.shakeX,o=i.ty*n+e.shakeY;if(t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,r,o),this.refreshTexture){if(this.generateTilingTexture(!1,e),!this.tilingTexture)return;this.tilePattern=t.createPattern(this.tilingTexture.baseTexture.source,"repeat")}var a=e.currentBlendMode;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=I.blendModesCanvas[e.currentBlendMode]);var s=this.tilePosition,l=this.tileScale;s.x%=this.tilingTexture.baseTexture.width,s.y%=this.tilingTexture.baseTexture.height,t.scale(l.x,l.y),t.translate(s.x+this.anchor.x*-this._width,s.y+this.anchor.y*-this._height),t.fillStyle=this.tilePattern;r=-s.x,o=-s.y;var p=this._width/l.x,h=this._height/l.y;e.roundPixels&&(r|=0,o|=0,p|=0,h|=0),t.fillRect(r,o,p,h),t.scale(1/l.x,1/l.y),t.translate(-s.x+this.anchor.x*this._width,-s.y+this.anchor.y*this._height),this._mask&&e.maskManager.popMask(e);for(var u=0;u<this.children.length;u++)this.children[u]._renderCanvas(e);a!==this.blendMode&&(e.currentBlendMode=a,t.globalCompositeOperation=I.blendModesCanvas[a])}},I.TilingSprite.prototype.onTextureUpdate=function(){},I.TilingSprite.prototype.generateTilingTexture=function(e,t){if(this.texture.baseTexture.hasLoaded){var i=this.texture,n=i.frame,r=this._frame.sourceSizeW||this._frame.width,o=this._frame.sourceSizeH||this._frame.height,a=0,s=0;this._frame.trimmed&&(a=this._frame.spriteSourceSizeX,s=this._frame.spriteSourceSizeY),e&&(r=I.getNextPowerOfTwo(r),o=I.getNextPowerOfTwo(o)),this.canvasBuffer?(this.canvasBuffer.resize(r,o),this.tilingTexture.baseTexture.width=r,this.tilingTexture.baseTexture.height=o):(this.canvasBuffer=new I.CanvasBuffer(r,o),this.tilingTexture=I.Texture.fromCanvas(this.canvasBuffer.canvas),this.tilingTexture.isTiling=!0),this.tilingTexture.needsUpdate=!0,this.textureDebug&&(this.canvasBuffer.context.strokeStyle="#00ff00",this.canvasBuffer.context.strokeRect(0,0,r,o));var l=i.crop.width,p=i.crop.height;l===r&&p===o||(l=r,p=o),this.canvasBuffer.context.drawImage(i.baseTexture.source,i.crop.x,i.crop.y,i.crop.width,i.crop.height,a,s,l,p),this.tileScaleOffset.x=n.width/r,this.tileScaleOffset.y=n.height/o,this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}},I.TilingSprite.prototype.getBounds=function(){var e=this._width,t=this._height,i=e*(1-this.anchor.x),n=e*-this.anchor.x,r=t*(1-this.anchor.y),o=t*-this.anchor.y,a=this.worldTransform,s=a.a,l=a.b,p=a.c,h=a.d,u=a.tx,c=a.ty,d=s*n+p*o+u,_=h*o+l*n+c,y=s*i+p*o+u,m=h*o+l*i+c,f=s*i+p*r+u,x=h*r+l*i+c,v=s*n+p*r+u,z=h*r+l*n+c,g=-1/0,b=-1/0,w=1/0,S=1/0;w=v<(w=f<(w=y<(w=d<w?d:w)?y:w)?f:w)?v:w,S=z<(S=x<(S=m<(S=_<S?_:S)?m:S)?x:S)?z:S,g=(g=(g=(g=g<d?d:g)<y?y:g)<f?f:g)<v?v:g,b=(b=(b=(b=b<_?_:b)<m?m:b)<x?x:b)<z?z:b;var C=this._bounds;return C.x=w,C.width=g-w,C.y=S,C.height=b-S,this._currentBounds=C},I.TilingSprite.prototype.destroy=function(){I.Sprite.prototype.destroy.call(this),this.canvasBuffer&&(this.canvasBuffer.destroy(),this.canvasBuffer=null),this.tileScale=null,this.tileScaleOffset=null,this.tilePosition=null,this.tilingTexture&&(this.tilingTexture.destroy(!0),this.tilingTexture=null)},Object.defineProperty(I.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e}}),Object.defineProperty(I.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e}}),"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=I),exports.PIXI=I):"undefined"!=typeof define&&define.amd?define("PIXI",e.PIXI=I):e.PIXI=I,I}.call(this),function(){function n(e,t){this._scaleFactor=e,this._deltaMode=t,this.originalEvent=null}var o,e=this,U=U||{VERSION:"2.6.15",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,ROPE:20,CIRCLE:21,RECTANGLE:22,LINE:23,MATRIX:24,POINT:25,ROUNDEDRECTANGLE:26,CREATURE:27,VIDEO:28,PENDING_ATLAS:-1,HORIZONTAL:0,VERTICAL:1,LANDSCAPE:0,PORTRAIT:1,ANGLE_UP:270,ANGLE_DOWN:90,ANGLE_LEFT:180,ANGLE_RIGHT:0,ANGLE_NORTH_EAST:315,ANGLE_NORTH_WEST:225,ANGLE_SOUTH_EAST:45,ANGLE_SOUTH_WEST:135,TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1},PIXI:PIXI||{}};if(Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Function.prototype.bind||(Function.prototype.bind=(o=Array.prototype.slice,function(t){function i(){var e=r.concat(o.call(arguments));n.apply(this instanceof i?this:t,e)}var n=this,r=o.call(arguments,1);if("function"!=typeof n)throw new TypeError;return i.prototype=function e(t){if(t&&(e.prototype=t),!(this instanceof e))return new e}(n.prototype),i})),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e){"use strict";if(null==this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=2<=arguments.length?arguments[1]:void 0,r=0;r<i;r++)r in t&&e.call(n,t[r],r,t)}),"function"!=typeof window.Uint32Array&&"object"!=typeof window.Uint32Array){var t=function(e){var t=new Array;window[e]=function(e){if("number"==typeof e){Array.call(this,e),this.length=e;for(var t=0;t<this.length;t++)this[t]=0}else{Array.call(this,e.length),this.length=e.length;for(t=0;t<this.length;t++)this[t]=e[t]}},window[e].prototype=t,window[e].constructor=window[e]};t("Uint32Array"),t("Int16Array")}for(var i in window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){}),/firefox/i.test(navigator.userAgent)&&(window.oldGetComputedStyle=window.getComputedStyle,window.getComputedStyle=function(e,t){var i=window.oldGetComputedStyle(e,t);return null===i?{getPropertyValue:function(){}}:i}),U.Utils={reverseString:function(e){return e.split("").reverse().join("")},getProperty:function(e,t){for(var i=t.split("."),n=i.pop(),r=i.length,o=1,a=i[0];o<r&&(e=e[a]);)a=i[o],o++;return e?e[n]:null},setProperty:function(e,t,i){for(var n=t.split("."),r=n.pop(),o=n.length,a=1,s=n[0];a<o&&(e=e[s]);)s=n[a],a++;return e&&(e[r]=i),e},chanceRoll:function(e){return void 0===e&&(e=50),0<e&&100*Math.random()<=e},randomChoice:function(e,t){return Math.random()<.5?e:t},parseDimension:function(e,t){var i=0,n=0;return"string"==typeof e?"%"===e.substr(-1)?(i=parseInt(e,10)/100,n=0===t?window.innerWidth*i:window.innerHeight*i):n=parseInt(e,10):n=e,n},pad:function(e,t,i,n){if(void 0===t)t=0;if(void 0===i)i=" ";if(void 0===n)n=3;var r=0;if(t+1>=(e=e.toString()).length)switch(n){case 1:e=new Array(t+1-e.length).join(i)+e;break;case 3:var o=Math.ceil((r=t-e.length)/2);e=new Array(r-o+1).join(i)+e+new Array(o+1).join(i);break;default:e+=new Array(t+1-e.length).join(i)}return e},isPlainObject:function(e){if("object"!=typeof e||e.nodeType||e===e.window)return!1;try{if(e.constructor&&!{}.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},extend:function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,p=!1;for("boolean"==typeof a&&(p=a,a=arguments[1]||{},s=2),l===s&&(a=this,--s);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(p&&n&&(U.Utils.isPlainObject(n)||(r=Array.isArray(n)))?(r?(r=!1,o=i&&Array.isArray(i)?i:[]):o=i&&U.Utils.isPlainObject(i)?i:{},a[t]=U.Utils.extend(p,o,n)):void 0!==n&&(a[t]=n));return a},mixinPrototype:function(e,t,i){void 0===i&&(i=!1);for(var n=Object.keys(t),r=0;r<n.length;r++){var o=n[r],a=t[o];!i&&o in e||(!a||"function"!=typeof a.get&&"function"!=typeof a.set?e[o]=a:"function"==typeof a.clone?e[o]=a.clone():Object.defineProperty(e,o,a))}},mixin:function(e,t){if(!e||"object"!=typeof e)return t;for(var i in e){var n=e[i];if(!n.childNodes&&!n.cloneNode){var r=typeof e[i];e[i]&&"object"===r?typeof t[i]===r?t[i]=U.Utils.mixin(e[i],t[i]):t[i]=U.Utils.mixin(e[i],new n.constructor):t[i]=e[i]}}return t}},U.Circle=function(e,t,i){e=e||0,t=t||0,i=i||0,this.x=e,this.y=t,this._diameter=i,(this._radius=0)<i&&(this._radius=.5*i),this.type=U.CIRCLE},U.Circle.prototype={circumference:function(){return Math.PI*this._radius*2},random:function(e){void 0===e&&(e=new U.Point);var t=2*Math.PI*Math.random(),i=Math.random()+Math.random(),n=1<i?2-i:i,r=n*Math.cos(t),o=n*Math.sin(t);return e.x=this.x+r*this.radius,e.y=this.y+o*this.radius,e},getBounds:function(){return new U.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(e,t,i){return this.x=e,this.y=t,this._diameter=i,this._radius=.5*i,this},copyFrom:function(e){return this.setTo(e.x,e.y,e.diameter)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.diameter=this._diameter,e},distance:function(e,t){var i=U.Math.distance(this.x,this.y,e.x,e.y);return t?Math.round(i):i},clone:function(e){return null==e?e=new U.Circle(this.x,this.y,this.diameter):e.setTo(this.x,this.y,this.diameter),e},contains:function(e,t){return U.Circle.contains(this,e,t)},circumferencePoint:function(e,t,i){return U.Circle.circumferencePoint(this,e,t,i)},offset:function(e,t){return this.x+=e,this.y+=t,this},offsetPoint:function(e){return this.offset(e.x,e.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},U.Circle.prototype.constructor=U.Circle,Object.defineProperty(U.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(e){0<e&&(this._diameter=e,this._radius=.5*e)}}),Object.defineProperty(U.Circle.prototype,"radius",{get:function(){return this._radius},set:function(e){0<e&&(this._radius=e,this._diameter=2*e)}}),Object.defineProperty(U.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(e){e>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-e}}),Object.defineProperty(U.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(e){e<this.x?(this._radius=0,this._diameter=0):this.radius=e-this.x}}),Object.defineProperty(U.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(e){e>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-e}}),Object.defineProperty(U.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(e){e<this.y?(this._radius=0,this._diameter=0):this.radius=e-this.y}}),Object.defineProperty(U.Circle.prototype,"area",{get:function(){return 0<this._radius?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(U.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(e){!0===e&&this.setTo(0,0,0)}}),U.Circle.contains=function(e,t,i){return 0<e.radius&&t>=e.left&&t<=e.right&&i>=e.top&&i<=e.bottom&&(e.x-t)*(e.x-t)+(e.y-i)*(e.y-i)<=e.radius*e.radius},U.Circle.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.diameter===t.diameter},U.Circle.intersects=function(e,t){return U.Math.distance(e.x,e.y,t.x,t.y)<=e.radius+t.radius},U.Circle.circumferencePoint=function(e,t,i,n){return void 0===i&&(i=!1),void 0===n&&(n=new U.Point),!0===i&&(t=U.Math.degToRad(t)),n.x=e.x+e.radius*Math.cos(t),n.y=e.y+e.radius*Math.sin(t),n},U.Circle.intersectsRectangle=function(e,t){var i=Math.abs(e.x-t.x-t.halfWidth);if(i>t.halfWidth+e.radius)return!1;var n=Math.abs(e.y-t.y-t.halfHeight);if(n>t.halfHeight+e.radius)return!1;if(i<=t.halfWidth||n<=t.halfHeight)return!0;var r=i-t.halfWidth,o=n-t.halfHeight;return r*r+o*o<=e.radius*e.radius},PIXI.Circle=U.Circle,U.Ellipse=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.x=e,this.y=t,this.width=i,this.height=n,this.type=U.ELLIPSE},U.Ellipse.prototype={setTo:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},getBounds:function(){return new U.Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)},copyFrom:function(e){return this.setTo(e.x,e.y,e.width,e.height)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},clone:function(e){return null==e?e=new U.Ellipse(this.x,this.y,this.width,this.height):e.setTo(this.x,this.y,this.width,this.height),e},contains:function(e,t){return U.Ellipse.contains(this,e,t)},random:function(e){void 0===e&&(e=new U.Point);var t=Math.random()*Math.PI*2,i=Math.random();return e.x=Math.sqrt(i)*Math.cos(t),e.y=Math.sqrt(i)*Math.sin(t),e.x=this.x+e.x*this.width/2,e.y=this.y+e.y*this.height/2,e},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},U.Ellipse.prototype.constructor=U.Ellipse,Object.defineProperty(U.Ellipse.prototype,"left",{get:function(){return this.x},set:function(e){this.x=e}}),Object.defineProperty(U.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<this.x?this.width=0:this.width=e-this.x}}),Object.defineProperty(U.Ellipse.prototype,"top",{get:function(){return this.y},set:function(e){this.y=e}}),Object.defineProperty(U.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<this.y?this.height=0:this.height=e-this.y}}),Object.defineProperty(U.Ellipse.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(e){!0===e&&this.setTo(0,0,0,0)}}),U.Ellipse.contains=function(e,t,i){if(e.width<=0||e.height<=0)return!1;var n=(t-e.x)/e.width-.5,r=(i-e.y)/e.height-.5;return(n*=n)+(r*=r)<.25},PIXI.Ellipse=U.Ellipse,U.Line=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.start=new U.Point(e,t),this.end=new U.Point(i,n),this.type=U.LINE},U.Line.prototype={setTo:function(e,t,i,n){return this.start.setTo(e,t),this.end.setTo(i,n),this},fromSprite:function(e,t,i){return void 0===i&&(i=!1),i?this.setTo(e.center.x,e.center.y,t.center.x,t.center.y):this.setTo(e.x,e.y,t.x,t.y)},fromAngle:function(e,t,i,n){return this.start.setTo(e,t),this.end.setTo(e+Math.cos(i)*n,t+Math.sin(i)*n),this},rotate:function(e,t){var i=(this.start.x+this.end.x)/2,n=(this.start.y+this.end.y)/2;return this.start.rotate(i,n,e,t),this.end.rotate(i,n,e,t),this},rotateAround:function(e,t,i,n){return this.start.rotate(e,t,i,n),this.end.rotate(e,t,i,n),this},intersects:function(e,t,i){return U.Line.intersectsPoints(this.start,this.end,e.start,e.end,t,i)},reflect:function(e){return U.Line.reflect(this,e)},midPoint:function(e){return void 0===e&&(e=new U.Point),e.x=(this.start.x+this.end.x)/2,e.y=(this.start.y+this.end.y)/2,e},centerOn:function(e,t){var i=e-(this.start.x+this.end.x)/2,n=t-(this.start.y+this.end.y)/2;this.start.add(i,n),this.end.add(i,n)},pointOnLine:function(e,t){return(e-this.start.x)*(this.end.y-this.start.y)==(this.end.x-this.start.x)*(t-this.start.y)},pointOnSegment:function(e,t){var i=Math.min(this.start.x,this.end.x),n=Math.max(this.start.x,this.end.x),r=Math.min(this.start.y,this.end.y),o=Math.max(this.start.y,this.end.y);return this.pointOnLine(e,t)&&i<=e&&e<=n&&r<=t&&t<=o},random:function(e){void 0===e&&(e=new U.Point);var t=Math.random();return e.x=this.start.x+t*(this.end.x-this.start.x),e.y=this.start.y+t*(this.end.y-this.start.y),e},coordinatesOnLine:function(e,t){void 0===e&&(e=1),void 0===t&&(t=[]);var i=Math.round(this.start.x),n=Math.round(this.start.y),r=Math.round(this.end.x),o=Math.round(this.end.y),a=Math.abs(r-i),s=Math.abs(o-n),l=i<r?1:-1,p=n<o?1:-1,h=a-s;t.push([i,n]);for(var u=1;i!==r||n!==o;){var c=h<<1;-s<c&&(h-=s,i+=l),c<a&&(h+=a,n+=p),u%e==0&&t.push([i,n]),u++}return t},clone:function(e){return null==e?e=new U.Line(this.start.x,this.start.y,this.end.x,this.end.y):e.setTo(this.start.x,this.start.y,this.end.x,this.end.y),e}},Object.defineProperty(U.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(U.Line.prototype,"angle",{get:function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(U.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(U.Line.prototype,"perpSlope",{get:function(){return-(this.end.x-this.start.x)/(this.end.y-this.start.y)}}),Object.defineProperty(U.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}}),Object.defineProperty(U.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}}),Object.defineProperty(U.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(U.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}}),Object.defineProperty(U.Line.prototype,"normalX",{get:function(){return Math.cos(this.angle-1.5707963267948966)}}),Object.defineProperty(U.Line.prototype,"normalY",{get:function(){return Math.sin(this.angle-1.5707963267948966)}}),Object.defineProperty(U.Line.prototype,"normalAngle",{get:function(){return U.Math.wrap(this.angle-1.5707963267948966,-Math.PI,Math.PI)}}),U.Line.intersectsPoints=function(e,t,i,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=new U.Point);var a=t.y-e.y,s=n.y-i.y,l=e.x-t.x,p=i.x-n.x,h=t.x*e.y-e.x*t.y,u=n.x*i.y-i.x*n.y,c=a*p-s*l;if(0===c)return null;if(o.x=(l*u-p*h)/c,o.y=(s*h-a*u)/c,r){var d=(n.y-i.y)*(t.x-e.x)-(n.x-i.x)*(t.y-e.y),_=((n.x-i.x)*(e.y-i.y)-(n.y-i.y)*(e.x-i.x))/d,y=((t.x-e.x)*(e.y-i.y)-(t.y-e.y)*(e.x-i.x))/d;return 0<=_&&_<=1&&0<=y&&y<=1?o:null}return o},U.Line.intersects=function(e,t,i,n){return U.Line.intersectsPoints(e.start,e.end,t.start,t.end,i,n)},U.Line.intersectsRectangle=function(e,t){if(!U.Rectangle.intersects(e,t))return!1;var i=e.start.x,n=e.start.y,r=e.end.x,o=e.end.y,a=t.x,s=t.y,l=t.right,p=t.bottom,h=0;if(a<=i&&i<=l&&s<=n&&n<=p||a<=r&&r<=l&&s<=o&&o<=p)return!0;if(i<a&&a<=r){if((h=n+(o-n)*(a-i)/(r-i))>s&&h<=p)return!0}else if(l<i&&r<=l&&(h=n+(o-n)*(l-i)/(r-i))>=s&&h<=p)return!0;if(n<s&&s<=o){if((h=i+(r-i)*(s-n)/(o-n))>=a&&h<=l)return!0}else if(p<n&&o<=p&&(h=i+(r-i)*(p-n)/(o-n))>=a&&h<=l)return!0;return!1},U.Line.reflect=function(e,t){return 2*t.normalAngle-3.141592653589793-e.angle},U.Matrix=function(e,t,i,n,r,o){null!=e||(e=1),null!=t||(t=0),null!=i||(i=0),null!=n||(n=1),null!=r||(r=0),null!=o||(o=0),this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=o,this.type=U.MATRIX},U.Matrix.prototype={fromArray:function(e){return this.setTo(e[0],e[1],e[3],e[4],e[2],e[5])},setTo:function(e,t,i,n,r,o){return this.a=e,this.b=t,this.c=i,this.d=n,this.tx=r,this.ty=o,this},clone:function(e){return null==e?e=new U.Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty):(e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty),e},copyTo:function(e){return e.copyFrom(this),e},copyFrom:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this},toArray:function(e,t){return void 0===t&&(t=new PIXI.Float32Array(9)),e?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0),t[8]=1,t},apply:function(e,t){return void 0===t&&(t=new U.Point),t.x=this.a*e.x+this.c*e.y+this.tx,t.y=this.b*e.x+this.d*e.y+this.ty,t},applyInverse:function(e,t){void 0===t&&(t=new U.Point);var i=1/(this.a*this.d+this.c*-this.b),n=e.x,r=e.y;return t.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},translate:function(e,t){return this.tx+=e,this.ty+=t,this},scale:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,r=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=r*t-this.d*i,this.d=r*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},append:function(e){var t=this.a,i=this.b,n=this.c,r=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*r,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*r,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*r+this.ty,this},identity:function(){return this.setTo(1,0,0,1,0,0)}},U.identityMatrix=new U.Matrix,PIXI.Matrix=U.Matrix,PIXI.identityMatrix=U.identityMatrix,U.Point=function(e,t){e=e||0,t=t||0,this.x=e,this.y=t,this.type=U.POINT},U.Point.prototype={copyFrom:function(e){return this.setTo(e.x,e.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(e,t){return this.x=e||0,this.y=t||(0!==t?this.x:0),this},set:function(e,t){return this.x=e||0,this.y=t||(0!==t?this.x:0),this},add:function(e,t){return this.x+=e,this.y+=t,this},subtract:function(e,t){return this.x-=e,this.y-=t,this},multiply:function(e,t){return this.x*=e,this.y*=t,this},divide:function(e,t){return this.x/=e,this.y/=t,this},clampX:function(e,t){return this.x=U.Math.clamp(this.x,e,t),this},clampY:function(e,t){return this.y=U.Math.clamp(this.y,e,t),this},clamp:function(e,t){return this.x=U.Math.clamp(this.x,e,t),this.y=U.Math.clamp(this.y,e,t),this},clone:function(e){return null==e?e=new U.Point(this.x,this.y):e.setTo(this.x,this.y),e},copyTo:function(e){return e.x=this.x,e.y=this.y,e},distance:function(e,t){return U.Point.distance(this,e,t)},equals:function(e){return e.x===this.x&&e.y===this.y},angle:function(e,t){return void 0===t&&(t=!1),t?U.Math.radToDeg(Math.atan2(e.y-this.y,e.x-this.x)):Math.atan2(e.y-this.y,e.x-this.x)},rotate:function(e,t,i,n,r){return U.Point.rotate(this,e,t,i,n,r)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(e){return this.normalize().multiply(e,e)},normalize:function(){if(!this.isZero()){var e=this.getMagnitude();this.x/=e,this.y/=e}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},floor:function(){return this.setTo(Math.floor(this.x),Math.floor(this.y))},ceil:function(){return this.setTo(Math.ceil(this.x),Math.ceil(this.y))},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},U.Point.prototype.constructor=U.Point,U.Point.add=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x+t.x,i.y=e.y+t.y,i},U.Point.subtract=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x-t.x,i.y=e.y-t.y,i},U.Point.multiply=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x*t.x,i.y=e.y*t.y,i},U.Point.divide=function(e,t,i){return void 0===i&&(i=new U.Point),i.x=e.x/t.x,i.y=e.y/t.y,i},U.Point.equals=function(e,t){return e.x===t.x&&e.y===t.y},U.Point.angle=function(e,t){return Math.atan2(e.y-t.y,e.x-t.x)},U.Point.negative=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-e.x,-e.y)},U.Point.multiplyAdd=function(e,t,i,n){return void 0===n&&(n=new U.Point),n.setTo(e.x+t.x*i,e.y+t.y*i)},U.Point.interpolate=function(e,t,i,n){return void 0===n&&(n=new U.Point),n.setTo(e.x+(t.x-e.x)*i,e.y+(t.y-e.y)*i)},U.Point.perp=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-e.y,e.x)},U.Point.rperp=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(e.y,-e.x)},U.Point.distance=function(e,t,i){var n=U.Math.distance(e.x,e.y,t.x,t.y);return i?Math.round(n):n},U.Point.project=function(e,t,i){void 0===i&&(i=new U.Point);var n=e.dot(t)/t.getMagnitudeSq();return 0!==n&&i.setTo(n*t.x,n*t.y),i},U.Point.projectUnit=function(e,t,i){void 0===i&&(i=new U.Point);var n=e.dot(t);return 0!==n&&i.setTo(n*t.x,n*t.y),i},U.Point.normalRightHand=function(e,t){return void 0===t&&(t=new U.Point),t.setTo(-1*e.y,e.x)},U.Point.normalize=function(e,t){void 0===t&&(t=new U.Point);var i=e.getMagnitude();return 0!==i&&t.setTo(e.x/i,e.y/i),t},U.Point.rotate=function(e,t,i,n,r,o){if(r&&(n=U.Math.degToRad(n)),void 0===o){e.subtract(t,i);var a=Math.sin(n),s=Math.cos(n),l=s*e.x-a*e.y,p=a*e.x+s*e.y;e.x=l+t,e.y=p+i}else{var h=n+Math.atan2(e.y-i,e.x-t);e.x=t+o*Math.cos(h),e.y=i+o*Math.sin(h)}return e},U.Point.centroid=function(e,t){if(void 0===t&&(t=new U.Point),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("Phaser.Point. Parameter 'points' must be an array");var i=e.length;if(i<1)throw new Error("Phaser.Point. Parameter 'points' array must not be empty");if(1===i)return t.copyFrom(e[0]),t;for(var n=0;n<i;n++)U.Point.add(t,e[n],t);return t.divide(i,i),t},U.Point.parse=function(e,t,i){t=t||"x",i=i||"y";var n=new U.Point;return e[t]&&(n.x=parseInt(e[t],10)),e[i]&&(n.y=parseInt(e[i],10)),n},PIXI.Point=U.Point,U.Polygon=function(){this.area=0,this._points=[],0<arguments.length&&this.setTo.apply(this,arguments),this.closed=!0,this.flattened=!1,this.type=U.POLYGON},U.Polygon.prototype={toNumberArray:function(e){void 0===e&&(e=[]);for(var t=0;t<this._points.length;t++)"number"==typeof this._points[t]?(e.push(this._points[t]),e.push(this._points[t+1]),t++):(e.push(this._points[t].x),e.push(this._points[t].y));return e},flatten:function(){return this._points=this.toNumberArray(),this.flattened=!0,this},clone:function(e){var t=this._points.slice();return null==e?e=new U.Polygon(t):e.setTo(t),e},contains:function(e,t){var i=!1;if(this.flattened)for(var n=-2,r=this._points.length-2;(n+=2)<this._points.length;r=n){var o=this._points[n],a=this._points[n+1],s=this._points[r],l=this._points[r+1];(a<=t&&t<l||l<=t&&t<a)&&e<(s-o)*(t-a)/(l-a)+o&&(i=!i)}else for(n=-1,r=this._points.length-1;++n<this._points.length;r=n){o=this._points[n].x,a=this._points[n].y,s=this._points[r].x,l=this._points[r].y;(a<=t&&t<l||l<=t&&t<a)&&e<(s-o)*(t-a)/(l-a)+o&&(i=!i)}return i},setTo:function(e){if(this.area=0,this._points=[],0<arguments.length){Array.isArray(e)||(e=Array.prototype.slice.call(arguments));for(var t=Number.MAX_VALUE,i=0,n=e.length;i<n;i++){if("number"==typeof e[i]){var r=new PIXI.Point(e[i],e[i+1]);i++}else if(Array.isArray(e[i]))r=new PIXI.Point(e[i][0],e[i][1]);else r=new PIXI.Point(e[i].x,e[i].y);this._points.push(r),r.y<t&&(t=r.y)}this.calculateArea(t)}return this},calculateArea:function(e){for(var t,i,n,r,o=0,a=this._points.length;o<a;o++)t=this._points[o],i=o===a-1?this._points[0]:this._points[o+1],n=(t.y-e+(i.y-e))/2,r=t.x-i.x,this.area+=n*r;return this.area}},U.Polygon.prototype.constructor=U.Polygon,Object.defineProperty(U.Polygon.prototype,"points",{get:function(){return this._points},set:function(e){null!=e?this.setTo(e):this.setTo()}}),PIXI.Polygon=U.Polygon,U.Rectangle=function(e,t,i,n){e=e||0,t=t||0,i=i||0,n=n||0,this.x=e,this.y=t,this.width=i,this.height=n,this.type=U.RECTANGLE},U.Rectangle.prototype={offset:function(e,t){return this.x+=e,this.y+=t,this},offsetPoint:function(e){return this.offset(e.x,e.y)},setTo:function(e,t,i,n){return this.x=e,this.y=t,this.width=i,this.height=n,this},scale:function(e,t){return void 0===t&&(t=e),this.width*=e,this.height*=t,this},centerOn:function(e,t){return this.centerX=e,this.centerY=t,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},ceil:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y)},ceilAll:function(){this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.width=Math.ceil(this.width),this.height=Math.ceil(this.height)},copyFrom:function(e){return this.setTo(e.x,e.y,e.width,e.height)},copyTo:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e},inflate:function(e,t){return U.Rectangle.inflate(this,e,t)},size:function(e){return U.Rectangle.size(this,e)},resize:function(e,t){return this.width=e,this.height=t,this},clone:function(e){return U.Rectangle.clone(this,e)},contains:function(e,t){return U.Rectangle.contains(this,e,t)},containsRect:function(e){return U.Rectangle.containsRect(e,this)},equals:function(e){return U.Rectangle.equals(this,e)},intersection:function(e,t){return U.Rectangle.intersection(this,e,t)},intersects:function(e){return U.Rectangle.intersects(this,e)},intersectsRaw:function(e,t,i,n,r){return U.Rectangle.intersectsRaw(this,e,t,i,n,r)},union:function(e,t){return U.Rectangle.union(this,e,t)},random:function(e){return void 0===e&&(e=new U.Point),e.x=this.randomX,e.y=this.randomY,e},getPoint:function(e,t){switch(void 0===t&&(t=new U.Point),e){default:case U.TOP_LEFT:return t.set(this.x,this.y);case U.TOP_CENTER:return t.set(this.centerX,this.y);case U.TOP_RIGHT:return t.set(this.right,this.y);case U.LEFT_CENTER:return t.set(this.x,this.centerY);case U.CENTER:return t.set(this.centerX,this.centerY);case U.RIGHT_CENTER:return t.set(this.right,this.centerY);case U.BOTTOM_LEFT:return t.set(this.x,this.bottom);case U.BOTTOM_CENTER:return t.set(this.centerX,this.bottom);case U.BOTTOM_RIGHT:return t.set(this.right,this.bottom)}},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(U.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(U.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(U.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(e){e<=this.y?this.height=0:this.height=e-this.y}}),Object.defineProperty(U.Rectangle.prototype,"bottomLeft",{get:function(){return new U.Point(this.x,this.bottom)},set:function(e){this.x=e.x,this.bottom=e.y}}),Object.defineProperty(U.Rectangle.prototype,"bottomRight",{get:function(){return new U.Point(this.right,this.bottom)},set:function(e){this.right=e.x,this.bottom=e.y}}),Object.defineProperty(U.Rectangle.prototype,"left",{get:function(){return this.x},set:function(e){e>=this.right?this.width=0:this.width=this.right-e,this.x=e}}),Object.defineProperty(U.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(e){e<=this.x?this.width=0:this.width=e-this.x}}),Object.defineProperty(U.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(U.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(U.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(e){this.x=e-this.halfWidth}}),Object.defineProperty(U.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(e){this.y=e-this.halfHeight}}),Object.defineProperty(U.Rectangle.prototype,"randomX",{get:function(){return this.x+Math.random()*this.width}}),Object.defineProperty(U.Rectangle.prototype,"randomY",{get:function(){return this.y+Math.random()*this.height}}),Object.defineProperty(U.Rectangle.prototype,"top",{get:function(){return this.y},set:function(e){e>=this.bottom?(this.height=0,this.y=e):this.height=this.bottom-e}}),Object.defineProperty(U.Rectangle.prototype,"topLeft",{get:function(){return new U.Point(this.x,this.y)},set:function(e){this.x=e.x,this.y=e.y}}),Object.defineProperty(U.Rectangle.prototype,"topRight",{get:function(){return new U.Point(this.x+this.width,this.y)},set:function(e){this.right=e.x,this.y=e.y}}),Object.defineProperty(U.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(e){!0===e&&this.setTo(0,0,0,0)}}),U.Rectangle.prototype.constructor=U.Rectangle,U.Rectangle.inflate=function(e,t,i){return e.x-=t,e.width+=2*t,e.y-=i,e.height+=2*i,e},U.Rectangle.inflatePoint=function(e,t){return U.Rectangle.inflate(e,t.x,t.y)},U.Rectangle.size=function(e,t){return null==t?t=new U.Point(e.width,e.height):t.setTo(e.width,e.height),t},U.Rectangle.clone=function(e,t){return null==t?t=new U.Rectangle(e.x,e.y,e.width,e.height):t.setTo(e.x,e.y,e.width,e.height),t},U.Rectangle.contains=function(e,t,i){return!(e.width<=0||e.height<=0)&&t>=e.x&&t<e.right&&i>=e.y&&i<e.bottom},U.Rectangle.containsRaw=function(e,t,i,n,r,o){return e<=r&&r<e+i&&t<=o&&o<t+n},U.Rectangle.containsPoint=function(e,t){return U.Rectangle.contains(e,t.x,t.y)},U.Rectangle.containsRect=function(e,t){return!(e.volume>t.volume)&&e.x>=t.x&&e.y>=t.y&&e.right<t.right&&e.bottom<t.bottom},U.Rectangle.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height},U.Rectangle.sameDimensions=function(e,t){return e.width===t.width&&e.height===t.height},U.Rectangle.intersection=function(e,t,i){return void 0===i&&(i=new U.Rectangle),U.Rectangle.intersects(e,t)&&(i.x=Math.max(e.x,t.x),i.y=Math.max(e.y,t.y),i.width=Math.min(e.right,t.right)-i.x,i.height=Math.min(e.bottom,t.bottom)-i.y),i},U.Rectangle.intersects=function(e,t){return!(e.width<=0||e.height<=0||t.width<=0||t.height<=0||e.right<t.x||e.bottom<t.y||e.x>t.right||e.y>t.bottom)},U.Rectangle.intersectsRaw=function(e,t,i,n,r,o){return void 0===o&&(o=0),!(t>e.right+o||i<e.left-o||n>e.bottom+o||r<e.top-o)},U.Rectangle.union=function(e,t,i){return void 0===i&&(i=new U.Rectangle),i.setTo(Math.min(e.x,t.x),Math.min(e.y,t.y),Math.max(e.right,t.right)-Math.min(e.left,t.left),Math.max(e.bottom,t.bottom)-Math.min(e.top,t.top))},U.Rectangle.aabb=function(e,t){void 0===t&&(t=new U.Rectangle);var i=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return e.forEach(function(e){e.x>i&&(i=e.x),e.x<n&&(n=e.x),e.y>r&&(r=e.y),e.y<o&&(o=e.y)}),t.setTo(n,o,i-n,r-o),t},PIXI.Rectangle=U.Rectangle,PIXI.EmptyRectangle=new U.Rectangle(0,0,0,0),U.RoundedRectangle=function(e,t,i,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=20),this.x=e,this.y=t,this.width=i,this.height=n,this.radius=r||20,this.type=U.ROUNDEDRECTANGLE},U.RoundedRectangle.prototype={clone:function(){return new U.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},contains:function(e,t){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(i<=e&&e<=i+this.width){var n=this.y;if(n<=t&&t<=n+this.height)return!0}return!1}},U.RoundedRectangle.prototype.constructor=U.RoundedRectangle,PIXI.RoundedRectangle=U.RoundedRectangle,U.Camera=function(e,t,i,n,r,o){this.game=e,this.world=e.world,this.id=0,this.view=new U.Rectangle(i,n,r,o),this.bounds=new U.Rectangle(i,n,r,o),this.deadzone=null,this.visible=!0,this.roundPx=!0,this.atLimit={x:!1,y:!1},this.target=null,this.displayObject=null,this.scale=null,this.totalInView=0,this.lerp=new U.Point(1,1),this.onShakeComplete=new U.Signal,this.onFlashComplete=new U.Signal,this.onFadeComplete=new U.Signal,this.fx=null,this._targetPosition=new U.Point,this._edge=0,this._position=new U.Point,this._shake={intensity:0,duration:0,horizontal:!1,vertical:!1,shakeBounds:!0,x:0,y:0},this._fxDuration=0,this._fxType=0},U.Camera.FOLLOW_LOCKON=0,U.Camera.FOLLOW_PLATFORMER=1,U.Camera.FOLLOW_TOPDOWN=2,U.Camera.FOLLOW_TOPDOWN_TIGHT=3,U.Camera.SHAKE_BOTH=4,U.Camera.SHAKE_HORIZONTAL=5,U.Camera.SHAKE_VERTICAL=6,U.Camera.ENABLE_FX=!0,U.Camera.prototype={boot:function(){this.displayObject=this.game.world,this.scale=this.game.world.scale,this.game.camera=this,U.Graphics&&U.Camera.ENABLE_FX&&(this.fx=new U.Graphics(this.game),this.game.stage.addChild(this.fx))},preUpdate:function(){this.totalInView=0},follow:function(e,t,i,n){var r;switch(void 0===t&&(t=U.Camera.FOLLOW_LOCKON),void 0===i&&(i=1),void 0===n&&(n=1),this.target=e,this.lerp.set(i,n),t){case U.Camera.FOLLOW_PLATFORMER:var o=this.width/8,a=this.height/3;this.deadzone=new U.Rectangle((this.width-o)/2,(this.height-a)/2-.25*a,o,a);break;case U.Camera.FOLLOW_TOPDOWN:r=Math.max(this.width,this.height)/4,this.deadzone=new U.Rectangle((this.width-r)/2,(this.height-r)/2,r,r);break;case U.Camera.FOLLOW_TOPDOWN_TIGHT:r=Math.max(this.width,this.height)/8,this.deadzone=new U.Rectangle((this.width-r)/2,(this.height-r)/2,r,r);break;case U.Camera.FOLLOW_LOCKON:default:this.deadzone=null}},unfollow:function(){this.target=null},focusOn:function(e){this.setPosition(Math.round(e.x-this.view.halfWidth),Math.round(e.y-this.view.halfHeight))},focusOnXY:function(e,t){this.setPosition(Math.round(e-this.view.halfWidth),Math.round(t-this.view.halfHeight))},shake:function(e,t,i,n,r){return void 0===e&&(e=.05),void 0===t&&(t=500),void 0===i&&(i=!0),void 0===n&&(n=U.Camera.SHAKE_BOTH),void 0===r&&(r=!0),!(!i&&0<this._shake.duration||(this._shake.intensity=e,this._shake.duration=t,this._shake.shakeBounds=r,this._shake.x=0,this._shake.y=0,this._shake.horizontal=n===U.Camera.SHAKE_BOTH||n===U.Camera.SHAKE_HORIZONTAL,this._shake.vertical=n===U.Camera.SHAKE_BOTH||n===U.Camera.SHAKE_VERTICAL,0))},flash:function(e,t,i){return void 0===e&&(e=16777215),void 0===t&&(t=500),void 0===i&&(i=!1),!(!this.fx||!i&&0<this._fxDuration||(this.fx.clear(),this.fx.beginFill(e),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=1,this._fxDuration=t,this._fxType=0))},fade:function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=500),void 0===i&&(i=!1),!(!this.fx||!i&&0<this._fxDuration||(this.fx.clear(),this.fx.beginFill(e),this.fx.drawRect(0,0,this.width,this.height),this.fx.endFill(),this.fx.alpha=0,this._fxDuration=t,this._fxType=1,0))},update:function(){0<this._fxDuration&&this.updateFX(),0<this._shake.duration&&this.updateShake(),this.bounds&&this.checkBounds(),this.roundPx&&(this.view.floor(),this._shake.x=Math.floor(this._shake.x),this._shake.y=Math.floor(this._shake.y)),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateFX:function(){0===this._fxType?(this.fx.alpha-=this.game.time.elapsedMS/this._fxDuration,this.fx.alpha<=0&&(this._fxDuration=0,this.fx.alpha=0,this.onFlashComplete.dispatch())):(this.fx.alpha+=this.game.time.elapsedMS/this._fxDuration,1<=this.fx.alpha&&(this._fxDuration=0,this.fx.alpha=1,this.onFadeComplete.dispatch()))},updateShake:function(){this._shake.duration-=this.game.time.elapsedMS,this._shake.duration<=0?(this.onShakeComplete.dispatch(),this._shake.x=0,this._shake.y=0):(this._shake.horizontal&&(this._shake.x=this.game.rnd.frac()*this._shake.intensity*this.view.width*2-this._shake.intensity*this.view.width),this._shake.vertical&&(this._shake.y=this.game.rnd.frac()*this._shake.intensity*this.view.height*2-this._shake.intensity*this.view.height))},updateTarget:function(){this._targetPosition.x=this.view.x+this.target.worldPosition.x,this._targetPosition.y=this.view.y+this.target.worldPosition.y,this.deadzone?(this._edge=this._targetPosition.x-this.view.x,this._edge<this.deadzone.left?this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.left,this.lerp.x):this._edge>this.deadzone.right&&(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.deadzone.right,this.lerp.x)),this._edge=this._targetPosition.y-this.view.y,this._edge<this.deadzone.top?this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.top,this.lerp.y):this._edge>this.deadzone.bottom&&(this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.deadzone.bottom,this.lerp.y))):(this.view.x=this.game.math.linear(this.view.x,this._targetPosition.x-this.view.halfWidth,this.lerp.x),this.view.y=this.game.math.linear(this.view.y,this._targetPosition.y-this.view.halfHeight,this.lerp.y)),this.bounds&&this.checkBounds(),this.roundPx&&this.view.floor(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},setBoundsToWorld:function(){this.bounds&&this.bounds.copyFrom(this.game.world.bounds)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1;var e=this.view.x+this._shake.x,t=this.view.right+this._shake.x,i=this.view.y+this._shake.y,n=this.view.bottom+this._shake.y;e<=this.bounds.x*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.x*this.scale.x,this._shake.shakeBounds||(this._shake.x=0)),t>=this.bounds.right*this.scale.x&&(this.atLimit.x=!0,this.view.x=this.bounds.right*this.scale.x-this.width,this._shake.shakeBounds||(this._shake.x=0)),i<=this.bounds.top*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.top*this.scale.y,this._shake.shakeBounds||(this._shake.y=0)),n>=this.bounds.bottom*this.scale.y&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom*this.scale.y-this.height,this._shake.shakeBounds||(this._shake.y=0))},setPosition:function(e,t){this.view.x=e,this.view.y=t,this.bounds&&this.checkBounds()},setSize:function(e,t){this.view.width=e,this.view.height=t},reset:function(){this.target=null,this.view.x=0,this.view.y=0,this._shake.duration=0,this.resetFX()},resetFX:function(){this.fx&&(this.fx.clear(),this.fx.alpha=0,this._fxDuration=0)}},U.Camera.prototype.constructor=U.Camera,Object.defineProperty(U.Camera.prototype,"x",{get:function(){return this.view.x},set:function(e){this.view.x=e,this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"y",{get:function(){return this.view.y},set:function(e){this.view.y=e,this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"position",{get:function(){return this._position.set(this.view.x,this.view.y),this._position},set:function(e){void 0!==e.x&&(this.view.x=e.x),void 0!==e.y&&(this.view.y=e.y),this.bounds&&this.checkBounds()}}),Object.defineProperty(U.Camera.prototype,"width",{get:function(){return this.view.width},set:function(e){this.view.width=e}}),Object.defineProperty(U.Camera.prototype,"height",{get:function(){return this.view.height},set:function(e){this.view.height=e}}),Object.defineProperty(U.Camera.prototype,"shakeIntensity",{get:function(){return this._shake.intensity},set:function(e){this._shake.intensity=e}}),U.State=function(){this.game=null,this.key="",this.add=null,this.make=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.scale=null,this.stage=null,this.state=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null,this.rnd=null},U.State.prototype={init:function(){},preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},preRender:function(){},render:function(){},resize:function(){},paused:function(){},resumed:function(){},pauseUpdate:function(){},shutdown:function(){}},U.State.prototype.constructor=U.State,U.StateManager=function(e,t){this.game=e,this.states={},(this._pendingState=null)!=t&&(this._pendingState=t),this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.current="",this.onStateChange=new U.Signal,this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.onShutDownCallback=null},U.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),null!==this._pendingState&&"string"!=typeof this._pendingState&&this.add("default",this._pendingState,!0)},add:function(e,t,i){var n;return void 0===i&&(i=!1),t instanceof U.State?n=t:"object"==typeof t?(n=t).game=this.game:"function"==typeof t&&(n=new t(this.game)),this.states[e]=n,i&&(this.game.isBooted?this.start(e):this._pendingState=e),n},remove:function(e){this.current===e&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onPreRenderCallback=null,this.onRenderCallback=null,this.onResizeCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null),delete this.states[e]},start:function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1),this.checkState(e)&&(this._pendingState=e,this._clearWorld=t,this._clearCache=i,3<arguments.length&&(this._args=Array.prototype.splice.call(arguments,3)))},restart:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!1),this._pendingState=this.current,this._clearWorld=e,this._clearCache=t,2<arguments.length&&(this._args=Array.prototype.slice.call(arguments,2))},dummy:function(){},preUpdate:function(){if(this._pendingState&&this.game.isBooted){var e=this.current;if(this.clearCurrentState(),this.setCurrentState(this._pendingState),this.onStateChange.dispatch(this.current,e),this.current!==this._pendingState)return;this._pendingState=null,this.onPreloadCallback?(this.game.load.reset(!0),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()&&0===this.game.load.totalQueuedPacks()?this.loadComplete():this.game.load.start()):this.loadComplete()}},clearCurrentState:function(){this.current&&(this.onShutDownCallback&&this.onShutDownCallback.call(this.callbackContext,this.game),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.physics.clear(),this.game.time.removeAll(),this.game.scale.reset(this._clearWorld),this.game.debug&&this.game.debug.reset(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache&&this.game.cache.destroy()))},checkState:function(e){return this.states[e]&&!!(this.states[e].preload||this.states[e].create||this.states[e].update||this.states[e].render)||!1},link:function(e){this.states[e].game=this.game,this.states[e].add=this.game.add,this.states[e].make=this.game.make,this.states[e].camera=this.game.camera,this.states[e].cache=this.game.cache,this.states[e].input=this.game.input,this.states[e].load=this.game.load,this.states[e].math=this.game.math,this.states[e].sound=this.game.sound,this.states[e].scale=this.game.scale,(this.states[e].state=this).states[e].stage=this.game.stage,this.states[e].time=this.game.time,this.states[e].tweens=this.game.tweens,this.states[e].world=this.game.world,this.states[e].particles=this.game.particles,this.states[e].rnd=this.game.rnd,this.states[e].physics=this.game.physics,this.states[e].key=e},unlink:function(e){this.states[e]&&(this.states[e].game=null,this.states[e].add=null,this.states[e].make=null,this.states[e].camera=null,this.states[e].cache=null,this.states[e].input=null,this.states[e].load=null,this.states[e].math=null,this.states[e].sound=null,this.states[e].scale=null,this.states[e].state=null,this.states[e].stage=null,this.states[e].time=null,this.states[e].tweens=null,this.states[e].world=null,this.states[e].particles=null,this.states[e].rnd=null,this.states[e].physics=null)},setCurrentState:function(e){this.callbackContext=this.states[e],this.link(e),this.onInitCallback=this.states[e].init||this.dummy,this.onPreloadCallback=this.states[e].preload||null,this.onLoadRenderCallback=this.states[e].loadRender||null,this.onLoadUpdateCallback=this.states[e].loadUpdate||null,this.onCreateCallback=this.states[e].create||null,this.onUpdateCallback=this.states[e].update||null,this.onPreRenderCallback=this.states[e].preRender||null,this.onRenderCallback=this.states[e].render||null,this.onResizeCallback=this.states[e].resize||null,this.onPausedCallback=this.states[e].paused||null,this.onResumedCallback=this.states[e].resumed||null,this.onPauseUpdateCallback=this.states[e].pauseUpdate||null,this.onShutDownCallback=this.states[e].shutdown||this.dummy,""!==this.current&&this.game.physics.reset(),this.current=e,this._created=!1,this.onInitCallback.apply(this.callbackContext,this._args),e===this._pendingState&&(this._args=[]),this.game._kickstart=!0},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){!1===this._created&&this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game),!1===this._created&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game)},resume:function(){this._created&&this.onResumedCallback&&this.onResumedCallback.call(this.callbackContext,this.game)},update:function(){this._created?this.onUpdateCallback&&this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pauseUpdate:function(){this._created?this.onPauseUpdateCallback&&this.onPauseUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(e){this._created&&this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game,e)},resize:function(e,t){this.onResizeCallback&&this.onResizeCallback.call(this.callbackContext,e,t)},render:function(){this._created?this.onRenderCallback&&(this.game.renderType===U.CANVAS?(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0),this.onRenderCallback.call(this.callbackContext,this.game),this.game.context.restore()):this.onRenderCallback.call(this.callbackContext,this.game)):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this._clearWorld=!0,this._clearCache=!0,this.clearCurrentState(),this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.game=null,this.states={},this._pendingState=null,this.current=""}},U.StateManager.prototype.constructor=U.StateManager,Object.defineProperty(U.StateManager.prototype,"created",{get:function(){return this._created}}),U.Signal=function(){},U.Signal.prototype={_bindings:null,_prevParams:null,memorize:!1,_shouldPropagate:!0,active:!0,_boundDispatch:!1,validateListener:function(e,t){if("function"!=typeof e)throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))},_registerListener:function(e,t,i,n,r){var o,a=this._indexOfListener(e,i);if(-1!==a){if((o=this._bindings[a]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else o=new U.SignalBinding(this,e,t,i,n,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(e){this._bindings||(this._bindings=[]);for(var t=this._bindings.length;t--,this._bindings[t]&&e._priority<=this._bindings[t]._priority;);this._bindings.splice(t+1,0,e)},_indexOfListener:function(e,t){if(!this._bindings)return-1;void 0===t&&(t=null);for(var i,n=this._bindings.length;n--;)if((i=this._bindings[n])._listener===e&&i.context===t)return n;return-1},has:function(e,t){return-1!==this._indexOfListener(e,t)},add:function(e,t,i){this.validateListener(e,"add");var n=[];if(3<arguments.length)for(var r=3;r<arguments.length;r++)n.push(arguments[r]);return this._registerListener(e,!1,t,i,n)},addOnce:function(e,t,i){this.validateListener(e,"addOnce");var n=[];if(3<arguments.length)for(var r=3;r<arguments.length;r++)n.push(arguments[r]);return this._registerListener(e,!0,t,i,n)},remove:function(e,t){this.validateListener(e,"remove");var i=this._indexOfListener(e,t);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),e},removeAll:function(e){if(void 0===e&&(e=null),this._bindings){for(var t=this._bindings.length;t--;)e?this._bindings[t].context===e&&(this._bindings[t]._destroy(),this._bindings.splice(t,1)):this._bindings[t]._destroy();e||(this._bindings.length=0)}},getNumListeners:function(){return this._bindings?this._bindings.length:0},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active&&this._bindings){var e,t=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=t),i)for(e=this._bindings.slice(),this._shouldPropagate=!0;e[--i]&&this._shouldPropagate&&!1!==e[i].execute(t););}},forget:function(){this._prevParams&&(this._prevParams=null)},dispose:function(){this.removeAll(),this._bindings=null,this._prevParams&&(this._prevParams=null)},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},Object.defineProperty(U.Signal.prototype,"boundDispatch",{get:function(){var e=this;return this._boundDispatch||(this._boundDispatch=function(){return e.dispatch.apply(e,arguments)})}}),U.Signal.prototype.constructor=U.Signal,U.SignalBinding=function(e,t,i,n,r,o){this._listener=t,i&&(this._isOnce=!0),null!=n&&(this.context=n),this._signal=e,r&&(this._priority=r),o&&o.length&&(this._args=o)},U.SignalBinding.prototype={context:null,_isOnce:!1,_priority:0,_args:null,callCount:0,active:!0,params:null,execute:function(e){var t,i;return this.active&&this._listener&&(i=this.params?this.params.concat(e):e,this._args&&(i=i.concat(this._args)),t=this._listener.apply(this.context,i),this.callCount++,this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},U.SignalBinding.prototype.constructor=U.SignalBinding,U.Filter=function(e,t,i){this.game=e,this.type=U.WEBGL_FILTER,this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.prevPoint=new U.Point;var n=new Date;if(this.uniforms={resolution:{type:"2f",value:{x:256,y:256}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:0,y:0}},date:{type:"4fv",value:[n.getFullYear(),n.getMonth(),n.getDate(),60*n.getHours()*60+60*n.getMinutes()+n.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}},t)for(var r in t)this.uniforms[r]=t[r];this.fragmentSrc=i||""},U.Filter.prototype={init:function(){},setResolution:function(e,t){this.uniforms.resolution.value.x=e,this.uniforms.resolution.value.y=t},update:function(e){if(void 0!==e){var t=e.x/this.game.width,i=1-e.y/this.game.height;t===this.prevPoint.x&&i===this.prevPoint.y||(this.uniforms.mouse.value.x=t.toFixed(2),this.uniforms.mouse.value.y=i.toFixed(2),this.prevPoint.set(t,i))}this.uniforms.time.value=this.game.time.totalElapsedSeconds()},addToWorld:function(e,t,i,n,r,o){void 0===r&&(r=0),void 0===o&&(o=0),null!=i?this.width=i:i=this.width,null!=n?this.height=n:n=this.height;var a=this.game.add.image(e,t,"__default");return a.width=i,a.height=n,a.anchor.set(r,o),a.filters=[this],a},destroy:function(){this.game=null}},U.Filter.prototype.constructor=U.Filter,Object.defineProperty(U.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(e){this.uniforms.resolution.value.x=e}}),Object.defineProperty(U.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(e){this.uniforms.resolution.value.y=e}}),U.Plugin=function(e,t){void 0===t&&(t=null),this.game=e,this.parent=t,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},U.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},U.Plugin.prototype.constructor=U.Plugin,U.PluginManager=function(e){this.game=e,this.plugins=[],this._len=0,this._i=0},U.PluginManager.prototype={add:function(e){var t=Array.prototype.slice.call(arguments,1),i=!1;return"function"==typeof e?e=new e(this.game,this):(e.game=this.game,e.parent=this),"function"==typeof e.preUpdate&&(i=e.hasPreUpdate=!0),"function"==typeof e.update&&(i=e.hasUpdate=!0),"function"==typeof e.postUpdate&&(i=e.hasPostUpdate=!0),"function"==typeof e.render&&(i=e.hasRender=!0),"function"==typeof e.postRender&&(i=e.hasPostRender=!0),i?((e.hasPreUpdate||e.hasUpdate||e.hasPostUpdate)&&(e.active=!0),(e.hasRender||e.hasPostRender)&&(e.visible=!0),this._len=this.plugins.push(e),"function"==typeof e.init&&e.init.apply(e,t),e):null},remove:function(e,t){for(void 0===t&&(t=!0),this._i=this._len;this._i--;)if(this.plugins[this._i]===e)return t&&e.destroy(),this.plugins.splice(this._i,1),void this._len--},removeAll:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].destroy();this.plugins.length=0,this._len=0},preUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate&&this.plugins[this._i].preUpdate()},update:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasUpdate&&this.plugins[this._i].update()},postUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate&&this.plugins[this._i].postUpdate()},render:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasRender&&this.plugins[this._i].render()},postRender:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender&&this.plugins[this._i].postRender()},destroy:function(){this.removeAll(),this.game=null}},U.PluginManager.prototype.constructor=U.PluginManager,U.Stage=function(e){this.game=e,PIXI.DisplayObjectContainer.call(this),this.name="_stage_root",this.disableVisibilityChange=!1,this.exists=!0,this.worldTransform=new PIXI.Matrix,(this.stage=this).currentRenderOrderID=0,this._hiddenVar="hidden",this._onChange=null,this._bgColor={r:0,g:0,b:0,a:0,color:0,rgba:"#000000"},this.game.transparent||(this._bgColor.a=1),e.config&&this.parseConfig(e.config)},U.Stage.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.Stage.prototype.constructor=U.Stage,U.Stage.prototype.parseConfig=function(e){e.disableVisibilityChange&&(this.disableVisibilityChange=e.disableVisibilityChange),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor)},U.Stage.prototype.boot=function(){U.DOM.getOffset(this.game.canvas,this.offset),U.Canvas.setUserSelect(this.game.canvas,"none"),U.Canvas.setTouchAction(this.game.canvas,"none"),this.checkVisibility()},U.Stage.prototype.preUpdate=function(){for(var e=this.currentRenderOrderID=0;e<this.children.length;){var t=this.children[e];t.preUpdate(),this===t.parent&&e++}},U.Stage.prototype.update=function(){for(var e=this.children.length;e--;)this.children[e].update()},U.Stage.prototype.postUpdate=function(){this.game.camera.update(),this.game.camera.target&&(this.game.camera.target.postUpdate(),this.updateTransform(),this.game.camera.updateTarget());for(var e=0;e<this.children.length;e++)this.children[e].postUpdate();this.updateTransform()},U.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var e=0;e<this.children.length;e++)this.children[e].updateTransform()},U.Stage.prototype.checkVisibility=function(){void 0!==document.hidden?this._hiddenVar="visibilitychange":void 0!==document.webkitHidden?this._hiddenVar="webkitvisibilitychange":void 0!==document.mozHidden?this._hiddenVar="mozvisibilitychange":void 0!==document.msHidden?this._hiddenVar="msvisibilitychange":this._hiddenVar=null;var t=this;this._onChange=function(e){return t.visibilityChange(e)},this._onClick=function(e){document.hasFocus()||t.visibilityChange(e)},this._hiddenVar&&document.addEventListener(this._hiddenVar,this._onChange,!1),window.onblur=this._onChange,window.onfocus=this._onChange,window.onpagehide=this._onChange,window.onpageshow=this._onChange,window.addEventListener("click",this._onClick),this.game.device.cocoonJSApp&&(CocoonJS.App.onSuspended.addEventListener(function(){U.Stage.prototype.visibilityChange.call(t,{type:"pause"})}),CocoonJS.App.onActivated.addEventListener(function(){U.Stage.prototype.visibilityChange.call(t,{type:"resume"})}))},U.Stage.prototype.visibilityChange=function(e){switch(e.type){case"blur":case"pagehide":return void this.game.focusLoss(e);case"click":case"focus":case"pageshow":return void this.game.focusGain(e)}this.disableVisibilityChange||(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden||"pause"===e.type?this.game.gamePaused(e):this.game.gameResumed(e))},U.Stage.prototype.setBackgroundColor=function(e){this.game.transparent||(U.Color.valueToColor(e,this._bgColor),U.Color.updateColor(this._bgColor),this._bgColor.r/=255,this._bgColor.g/=255,this._bgColor.b/=255,this._bgColor.a=1)},U.Stage.prototype.destroy=function(){this._hiddenVar&&document.removeEventListener(this._hiddenVar,this._onChange,!1),window.onpagehide=null,window.onpageshow=null,window.onblur=null,window.onfocus=null,window.removeEventListener("click",this._onClick)},Object.defineProperty(U.Stage.prototype,"backgroundColor",{get:function(){return this._bgColor.color},set:function(e){this.setBackgroundColor(e)}}),Object.defineProperty(U.Stage.prototype,"smoothed",{get:function(){return PIXI.scaleModes.DEFAULT===PIXI.scaleModes.LINEAR},set:function(e){PIXI.scaleModes.DEFAULT=e?PIXI.scaleModes.LINEAR:PIXI.scaleModes.NEAREST}}),U.Group=function(e,t,i,n,r,o){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===o&&(o=U.Physics.ARCADE),this.game=e,void 0===t&&(t=e.world),this.name=i||"group",this.z=0,PIXI.DisplayObjectContainer.call(this),n?(this.game.stage.addChild(this),this.z=this.game.stage.children.length):t&&(t.addChild(this),this.z=t.children.length),this.type=U.GROUP,this.physicsType=U.GROUP,this.alive=!0,this.exists=!0,this.ignoreDestroy=!1,this.pendingDestroy=!1,this.classType=U.Sprite,this.cursor=null,this.inputEnableChildren=!1,this.onChildInputDown=new U.Signal,this.onChildInputUp=new U.Signal,this.onChildInputOver=new U.Signal,this.onChildInputOut=new U.Signal,this.enableBody=r,this.enableBodyDebug=!1,this.physicsBodyType=o,this.physicsSortDirection=null,this.onDestroy=new U.Signal,this.cursorIndex=0,this.fixedToCamera=!1,this.cameraOffset=new U.Point,this.hash=[],this._sortProperty="z"},U.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.Group.prototype.constructor=U.Group,U.Group.RETURN_NONE=0,U.Group.RETURN_TOTAL=1,U.Group.RETURN_CHILD=2,U.Group.RETURN_ALL=3,U.Group.SORT_ASCENDING=-1,U.Group.SORT_DESCENDING=1,U.Group.prototype.add=function(e,t,i){return void 0===t&&(t=!1),e.parent===this||(e.body&&e.parent&&e.parent.hash&&e.parent.removeFromHash(e),void 0===i?(e.z=this.children.length,this.addChild(e)):(this.addChildAt(e,i),this.updateZ()),this.enableBody&&e.hasOwnProperty("body")&&null===e.body?this.game.physics.enable(e,this.physicsBodyType):e.body&&this.addToHash(e),!this.inputEnableChildren||e.input&&!e.inputEnabled||(e.inputEnabled=!0),!t&&e.events&&e.events.onAddedToGroup$dispatch(e,this),null===this.cursor&&(this.cursor=e)),e},U.Group.prototype.addAt=function(e,t,i){this.add(e,i,t)},U.Group.prototype.addToHash=function(e){return e.parent===this&&-1===this.hash.indexOf(e)&&(this.hash.push(e),!0)},U.Group.prototype.removeFromHash=function(e){if(e){var t=this.hash.indexOf(e);if(-1!==t)return this.hash.splice(t,1),!0}return!1},U.Group.prototype.addMultiple=function(e,t){if(e instanceof U.Group)e.moveAll(this,t);else if(Array.isArray(e))for(var i=0;i<e.length;i++)this.add(e[i],t);return e},U.Group.prototype.getAt=function(e){return e<0||e>=this.children.length?-1:this.getChildAt(e)},U.Group.prototype.create=function(e,t,i,n,r,o){void 0===r&&(r=!0);var a=new this.classType(this.game,e,t,i,n);return a.exists=r,a.visible=r,a.alive=r,this.add(a,!1,o)},U.Group.prototype.createMultiple=function(n,e,t,r){void 0===t&&(t=0),void 0===r&&(r=!1),Array.isArray(e)||(e=[e]),Array.isArray(t)||(t=[t]);var o=this,a=[];return e.forEach(function(i){t.forEach(function(e){for(var t=0;t<n;t++)a.push(o.create(0,0,i,e,r))})}),a},U.Group.prototype.updateZ=function(){for(var e=this.children.length;e--;)this.children[e].z=e},U.Group.prototype.align=function(e,t,i,n,r,o){if(void 0===r&&(r=U.TOP_LEFT),void 0===o&&(o=0),0===this.children.length||o>this.children.length||-1===e&&-1===t)return!1;for(var a=new U.Rectangle(0,0,i,n),s=e*i,l=t*n,p=o;p<this.children.length;p++){var h=this.children[p];if(h.alignIn)if(h.alignIn(a,r),-1===e)a.y+=n,a.y===l&&(a.x+=i,a.y=0);else if(-1===t)a.x+=i,a.x===s&&(a.x=0,a.y+=n);else if(a.x+=i,a.x===s&&(a.x=0,a.y+=n,a.y===l))return!0}return!0},U.Group.prototype.resetCursor=function(e){if(void 0===e&&(e=0),e>this.children.length-1&&(e=0),this.cursor)return this.cursorIndex=e,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.next=function(){if(this.cursor)return this.cursorIndex>=this.children.length-1?this.cursorIndex=0:this.cursorIndex++,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.previous=function(){if(this.cursor)return 0===this.cursorIndex?this.cursorIndex=this.children.length-1:this.cursorIndex--,this.cursor=this.children[this.cursorIndex],this.cursor},U.Group.prototype.swap=function(e,t){this.swapChildren(e,t),this.updateZ()},U.Group.prototype.bringToTop=function(e){return e.parent===this&&this.getIndex(e)<this.children.length&&(this.remove(e,!1,!0),this.add(e,!0)),e},U.Group.prototype.sendToBack=function(e){return e.parent===this&&0<this.getIndex(e)&&(this.remove(e,!1,!0),this.addAt(e,0,!0)),e},U.Group.prototype.moveUp=function(e){if(e.parent===this&&this.getIndex(e)<this.children.length-1){var t=this.getIndex(e),i=this.getAt(t+1);i&&this.swap(e,i)}return e},U.Group.prototype.moveDown=function(e){if(e.parent===this&&0<this.getIndex(e)){var t=this.getIndex(e),i=this.getAt(t-1);i&&this.swap(e,i)}return e},U.Group.prototype.xy=function(e,t,i){if(e<0||e>this.children.length)return-1;this.getChildAt(e).x=t,this.getChildAt(e).y=i},U.Group.prototype.reverse=function(){this.children.reverse(),this.updateZ()},U.Group.prototype.getIndex=function(e){return this.children.indexOf(e)},U.Group.prototype.getByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null},U.Group.prototype.replace=function(e,t){var i=this.getIndex(e);if(-1!==i)return t.parent&&(t.parent instanceof U.Group?t.parent.remove(t):t.parent.removeChild(t)),this.remove(e),this.addAt(t,i),e},U.Group.prototype.hasProperty=function(e,t){var i=t.length;return 1===i&&t[0]in e||2===i&&t[0]in e&&t[1]in e[t[0]]||3===i&&t[0]in e&&t[1]in e[t[0]]&&t[2]in e[t[0]][t[1]]||4===i&&t[0]in e&&t[1]in e[t[0]]&&t[2]in e[t[0]][t[1]]&&t[3]in e[t[0]][t[1]][t[2]]},U.Group.prototype.setProperty=function(e,t,i,n,r){if(void 0===r&&(r=!1),n=n||0,!this.hasProperty(e,t)&&(!r||0<n))return!1;var o=t.length;return 1===o?0===n?e[t[0]]=i:1===n?e[t[0]]+=i:2===n?e[t[0]]-=i:3===n?e[t[0]]*=i:4===n&&(e[t[0]]/=i):2===o?0===n?e[t[0]][t[1]]=i:1===n?e[t[0]][t[1]]+=i:2===n?e[t[0]][t[1]]-=i:3===n?e[t[0]][t[1]]*=i:4===n&&(e[t[0]][t[1]]/=i):3===o?0===n?e[t[0]][t[1]][t[2]]=i:1===n?e[t[0]][t[1]][t[2]]+=i:2===n?e[t[0]][t[1]][t[2]]-=i:3===n?e[t[0]][t[1]][t[2]]*=i:4===n&&(e[t[0]][t[1]][t[2]]/=i):4===o&&(0===n?e[t[0]][t[1]][t[2]][t[3]]=i:1===n?e[t[0]][t[1]][t[2]][t[3]]+=i:2===n?e[t[0]][t[1]][t[2]][t[3]]-=i:3===n?e[t[0]][t[1]][t[2]][t[3]]*=i:4===n&&(e[t[0]][t[1]][t[2]][t[3]]/=i)),!0},U.Group.prototype.checkProperty=function(e,t,i,n){return void 0===n&&(n=!1),!(!U.Utils.getProperty(e,t)&&n)&&U.Utils.getProperty(e,t)===i},U.Group.prototype.set=function(e,t,i,n,r,o,a){if(void 0===a&&(a=!1),t=t.split("."),void 0===n&&(n=!1),void 0===r&&(r=!1),(!1===n||n&&e.alive)&&(!1===r||r&&e.visible))return this.setProperty(e,t,i,o,a)},U.Group.prototype.setAll=function(e,t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),e=e.split("."),r=r||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!n||n&&this.children[a].visible)&&this.setProperty(this.children[a],e,t,r,o)},U.Group.prototype.setAllChildren=function(e,t,i,n,r,o){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=!1),r=r||0;for(var a=0;a<this.children.length;a++)(!i||i&&this.children[a].alive)&&(!n||n&&this.children[a].visible)&&(this.children[a]instanceof U.Group?this.children[a].setAllChildren(e,t,i,n,r,o):this.setProperty(this.children[a],e.split("."),t,r,o))},U.Group.prototype.checkAll=function(e,t,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=!1);for(var o=0;o<this.children.length;o++)if((!i||i&&this.children[o].alive)&&(!n||n&&this.children[o].visible)&&!this.checkProperty(this.children[o],e,t,r))return!1;return!0},U.Group.prototype.addAll=function(e,t,i,n){this.setAll(e,t,i,n,1)},U.Group.prototype.subAll=function(e,t,i,n){this.setAll(e,t,i,n,2)},U.Group.prototype.multiplyAll=function(e,t,i,n){this.setAll(e,t,i,n,3)},U.Group.prototype.divideAll=function(e,t,i,n){this.setAll(e,t,i,n,4)},U.Group.prototype.callAllExists=function(e,t){var i;if(2<arguments.length){i=[];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}for(n=0;n<this.children.length;n++)this.children[n].exists===t&&this.children[n][e]&&this.children[n][e].apply(this.children[n],i)},U.Group.prototype.callbackFromArray=function(e,t,i){if(1===i){if(e[t[0]])return e[t[0]]}else if(2===i){if(e[t[0]][t[1]])return e[t[0]][t[1]]}else if(3===i){if(e[t[0]][t[1]][t[2]])return e[t[0]][t[1]][t[2]]}else if(4===i){if(e[t[0]][t[1]][t[2]][t[3]])return e[t[0]][t[1]][t[2]][t[3]]}else if(e[t])return e[t];return!1},U.Group.prototype.callAll=function(e,t){if(void 0!==e){var i,n=(e=e.split(".")).length;if(null==t||""===t)t=null;else if("string"==typeof t)var r=(t=t.split(".")).length;if(2<arguments.length){i=[];for(var o=2;o<arguments.length;o++)i.push(arguments[o])}var a=null,s=null;for(o=0;o<this.children.length;o++)a=this.callbackFromArray(this.children[o],e,n),t&&a?(s=this.callbackFromArray(this.children[o],t,r),a&&a.apply(s,i)):a&&a.apply(this.children[o],i)}},U.Group.prototype.preUpdate=function(){if(this.pendingDestroy)return this.destroy(),!1;if(!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);for(var e=0;e<this.children.length;e++)this.children[e].preUpdate();return!0},U.Group.prototype.update=function(){for(var e=this.children.length;e--;)this.children[e].update()},U.Group.prototype.postUpdate=function(){this.fixedToCamera&&(this.x=this.game.camera.view.x+this.cameraOffset.x,this.y=this.game.camera.view.y+this.cameraOffset.y);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()},U.Group.prototype.filter=function(e,t){for(var i=-1,n=this.children.length,r=[];++i<n;){var o=this.children[i];(!t||t&&o.exists)&&e(o,i,this.children)&&r.push(o)}return new U.ArraySet(r)},U.Group.prototype.forEach=function(e,t,i){if(void 0===i&&(i=!1),arguments.length<=3)for(var n=0;n<this.children.length;n++)(!i||i&&this.children[n].exists)&&e.call(t,this.children[n]);else{var r=[null];for(n=3;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.children.length;n++)(!i||i&&this.children[n].exists)&&(r[0]=this.children[n],e.apply(t,r))}},U.Group.prototype.forEachExists=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("exists",!0,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.forEachAlive=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("alive",!0,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.forEachDead=function(e,t){var i;if(2<arguments.length){i=[null];for(var n=2;n<arguments.length;n++)i.push(arguments[n])}this.iterate("alive",!1,U.Group.RETURN_TOTAL,e,t,i)},U.Group.prototype.sort=function(e,t){this.children.length<2||(void 0===e&&(e="z"),void 0===t&&(t=U.Group.SORT_ASCENDING),this._sortProperty=e,t===U.Group.SORT_ASCENDING?this.children.sort(this.ascendingSortHandler.bind(this)):this.children.sort(this.descendingSortHandler.bind(this)),this.updateZ())},U.Group.prototype.customSort=function(e,t){this.children.length<2||(this.children.sort(e.bind(t)),this.updateZ())},U.Group.prototype.ascendingSortHandler=function(e,t){return e[this._sortProperty]<t[this._sortProperty]?-1:e[this._sortProperty]>t[this._sortProperty]?1:e.z<t.z?-1:1},U.Group.prototype.descendingSortHandler=function(e,t){return e[this._sortProperty]<t[this._sortProperty]?1:e[this._sortProperty]>t[this._sortProperty]?-1:0},U.Group.prototype.iterate=function(e,t,i,n,r,o){if(0===this.children.length){if(i===U.Group.RETURN_TOTAL)return 0;if(i===U.Group.RETURN_ALL)return[]}var a=0;if(i===U.Group.RETURN_ALL)var s=[];for(var l=0;l<this.children.length;l++)if(this.children[l][e]===t){if(a++,n&&(o?(o[0]=this.children[l],n.apply(r,o)):n.call(r,this.children[l])),i===U.Group.RETURN_CHILD)return this.children[l];i===U.Group.RETURN_ALL&&s.push(this.children[l])}return i===U.Group.RETURN_TOTAL?a:i===U.Group.RETURN_ALL?s:null},U.Group.prototype.getFirstExists=function(e,t,i,n,r,o){void 0===t&&(t=!1),"boolean"!=typeof e&&(e=!0);var a=this.iterate("exists",e,U.Group.RETURN_CHILD);return null===a&&t?this.create(i,n,r,o):this.resetChild(a,i,n,r,o)},U.Group.prototype.getFirstAlive=function(e,t,i,n,r){void 0===e&&(e=!1);var o=this.iterate("alive",!0,U.Group.RETURN_CHILD);return null===o&&e?this.create(t,i,n,r):this.resetChild(o,t,i,n,r)},U.Group.prototype.getFirstDead=function(e,t,i,n,r){void 0===e&&(e=!1);var o=this.iterate("alive",!1,U.Group.RETURN_CHILD);return null===o&&e?this.create(t,i,n,r):this.resetChild(o,t,i,n,r)},U.Group.prototype.resetChild=function(e,t,i,n,r){return null===e?null:(void 0===t&&(t=null),void 0===i&&(i=null),null!==t&&null!==i&&e.reset(t,i),void 0!==n&&e.loadTexture(n,r),e)},U.Group.prototype.getTop=function(){if(0<this.children.length)return this.children[this.children.length-1]},U.Group.prototype.getBottom=function(){if(0<this.children.length)return this.children[0]},U.Group.prototype.getClosestTo=function(e,t,i){for(var n=Number.MAX_VALUE,r=0,o=null,a=0;a<this.children.length;a++){var s=this.children[a];s.exists&&(r=Math.abs(U.Point.distance(e,s)))<n&&(!t||t.call(i,s,r))&&(n=r,o=s)}return o},U.Group.prototype.getFurthestFrom=function(e,t,i){for(var n=0,r=0,o=null,a=0;a<this.children.length;a++){var s=this.children[a];s.exists&&(r=Math.abs(U.Point.distance(e,s)))>n&&(!t||t.call(i,s,r))&&(n=r,o=s)}return o},U.Group.prototype.countLiving=function(){return this.iterate("alive",!0,U.Group.RETURN_TOTAL)},U.Group.prototype.countDead=function(){return this.iterate("alive",!1,U.Group.RETURN_TOTAL)},U.Group.prototype.getRandom=function(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.children.length),0===t?null:U.ArrayUtils.getRandomItem(this.children,e,t)},U.Group.prototype.getRandomExists=function(e,t){var i=this.getAll("exists",!0,e,t);return this.game.rnd.pick(i)},U.Group.prototype.getAll=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=this.children.length);for(var r=[],o=i;o<n;o++){var a=this.children[o];e&&a[e]===t&&r.push(a)}return r},U.Group.prototype.remove=function(e,t,i){if(void 0===t&&(t=!1),void 0===i&&(i=!1),0===this.children.length||-1===this.children.indexOf(e))return!1;i||!e.events||e.destroyPhase||e.events.onRemovedFromGroup$dispatch(e,this);var n=this.removeChild(e);return this.removeFromHash(e),this.updateZ(),this.cursor===e&&this.next(),t&&n&&n.destroy(!0),!0},U.Group.prototype.moveAll=function(e,t){if(void 0===t&&(t=!1),0<this.children.length&&e instanceof U.Group){for(;e.add(this.children[0],t),0<this.children.length;);this.hash=[],this.cursor=null}return e},U.Group.prototype.removeAll=function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),0!==this.children.length){do{!t&&this.children[0].events&&this.children[0].events.onRemovedFromGroup$dispatch(this.children[0],this);var n=this.removeChild(this.children[0]);this.removeFromHash(n),e&&n&&n.destroy(!0,i)}while(0<this.children.length);this.hash=[],this.cursor=null}},U.Group.prototype.removeBetween=function(e,t,i,n){if(void 0===t&&(t=this.children.length-1),void 0===i&&(i=!1),void 0===n&&(n=!1),0!==this.children.length){if(t<e||e<0||t>this.children.length)return!1;for(var r=t;e<=r;){!n&&this.children[r].events&&this.children[r].events.onRemovedFromGroup$dispatch(this.children[r],this);var o=this.removeChild(this.children[r]);this.removeFromHash(o),i&&o&&o.destroy(!0),this.cursor===this.children[r]&&(this.cursor=null),r--}this.updateZ()}},U.Group.prototype.destroy=function(e,t){null===this.game||this.ignoreDestroy||(void 0===e&&(e=!0),void 0===t&&(t=!1),this.onDestroy.dispatch(this,e,t),this.removeAll(e),this.cursor=null,this.filters=null,this.pendingDestroy=!1,t||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},Object.defineProperty(U.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,U.Group.RETURN_TOTAL)}}),Object.defineProperty(U.Group.prototype,"length",{get:function(){return this.children.length}}),Object.defineProperty(U.Group.prototype,"angle",{get:function(){return U.Math.radToDeg(this.rotation)},set:function(e){this.rotation=U.Math.degToRad(e)}}),Object.defineProperty(U.Group.prototype,"centerX",{get:function(){return this.getBounds(this.parent).centerX},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i-t.halfWidth}}),Object.defineProperty(U.Group.prototype,"centerY",{get:function(){return this.getBounds(this.parent).centerY},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i-t.halfHeight}}),Object.defineProperty(U.Group.prototype,"left",{get:function(){return this.getBounds(this.parent).left},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i}}),Object.defineProperty(U.Group.prototype,"right",{get:function(){return this.getBounds(this.parent).right},set:function(e){var t=this.getBounds(this.parent),i=this.x-t.x;this.x=e+i-t.width}}),Object.defineProperty(U.Group.prototype,"top",{get:function(){return this.getBounds(this.parent).top},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i}}),Object.defineProperty(U.Group.prototype,"bottom",{get:function(){return this.getBounds(this.parent).bottom},set:function(e){var t=this.getBounds(this.parent),i=this.y-t.y;this.y=e+i-t.height}}),U.World=function(e){U.Group.call(this,e,null,"__world",!1),this.bounds=new U.Rectangle(0,0,e.width,e.height),this.camera=null,this._definedSize=!1,this._width=e.width,this._height=e.height,this.game.state.onStateChange.add(this.stateChange,this)},U.World.prototype=Object.create(U.Group.prototype),U.World.prototype.constructor=U.World,U.World.prototype.boot=function(){this.camera=new U.Camera(this.game,0,0,0,this.game.width,this.game.height),this.game.stage.addChild(this),this.camera.boot()},U.World.prototype.stateChange=function(){this.x=0,this.y=0,this.camera.reset()},U.World.prototype.setBounds=function(e,t,i,n){this._definedSize=!0,this._width=i,this._height=n,this.bounds.setTo(e,t,i,n),this.x=e,this.y=t,this.camera.bounds&&this.camera.bounds.setTo(e,t,Math.max(i,this.game.width),Math.max(n,this.game.height)),this.game.physics.setBoundsToWorld()},U.World.prototype.resize=function(e,t){this._definedSize&&(e<this._width&&(e=this._width),t<this._height&&(t=this._height)),this.bounds.width=e,this.bounds.height=t,this.game.camera.setBoundsToWorld(),this.game.physics.setBoundsToWorld()},U.World.prototype.shutdown=function(){this.destroy(!0,!0)},U.World.prototype.wrap=function(e,t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=!1),void 0===n&&(n=!0),void 0===r&&(r=!0),i?(e.getBounds(),n&&(e.x+e._currentBounds.width<this.bounds.x?e.x=this.bounds.right:e.x>this.bounds.right&&(e.x=this.bounds.left)),r&&(e.y+e._currentBounds.height<this.bounds.top?e.y=this.bounds.bottom:e.y>this.bounds.bottom&&(e.y=this.bounds.top))):(n&&e.x+t<this.bounds.x?e.x=this.bounds.right+t:n&&e.x-t>this.bounds.right&&(e.x=this.bounds.left-t),r&&e.y+t<this.bounds.top?e.y=this.bounds.bottom+t:r&&e.y-t>this.bounds.bottom&&(e.y=this.bounds.top-t))},Object.defineProperty(U.World.prototype,"width",{get:function(){return this.bounds.width},set:function(e){e<this.game.width&&(e=this.game.width),this.bounds.width=e,this._width=e,this._definedSize=!0}}),Object.defineProperty(U.World.prototype,"height",{get:function(){return this.bounds.height},set:function(e){e<this.game.height&&(e=this.game.height),this.bounds.height=e,this._height=e,this._definedSize=!0}}),Object.defineProperty(U.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth+this.bounds.x}}),Object.defineProperty(U.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight+this.bounds.y}}),Object.defineProperty(U.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.between(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.between(this.bounds.x,this.bounds.width)}}),Object.defineProperty(U.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.between(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.between(this.bounds.y,this.bounds.height)}}),U.Game=function(e,t,i,n,r,o,a,s){return this.id=U.GAMES.push(this)-1,this.config=null,this.physicsConfig=s,this.parent="",this.width=800,this.height=600,this.resolution=1,this._width=800,this._height=600,this.transparent=!1,this.antialias=!0,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!0,this.renderer=null,this.renderType=U.AUTO,this.state=null,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.make=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.scale=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.plugins=null,this.rnd=null,this.device=U.Device,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null,this.create=null,this.lockRender=!1,this.stepping=!1,this.pendingStep=!1,this.stepCount=0,this.onPause=null,this.onResume=null,this.onBlur=null,this.onFocus=null,this._paused=!1,this._codePaused=!1,this.currentUpdateID=0,this.updatesThisFrame=1,this._deltaTime=0,this._lastCount=0,this._spiraling=0,this._kickstart=!0,this.fpsProblemNotifier=new U.Signal,this.forceSingleUpdate=!0,this._nextFpsNotification=0,1===arguments.length&&"object"==typeof e?this.parseConfig(e):(this.config={enableDebug:!0},void 0!==e&&(this._width=e),void 0!==t&&(this._height=t),void 0!==i&&(this.renderType=i),void 0!==n&&(this.parent=n),void 0!==o&&(this.transparent=o),void 0!==a&&(this.antialias=a),this.rnd=new U.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.state=new U.StateManager(this,r)),this.device.whenReady(this.boot,this),this},U.Game.prototype={parseConfig:function(e){void 0===(this.config=e).enableDebug&&(this.config.enableDebug=!0),e.width&&(this._width=e.width),e.height&&(this._height=e.height),e.renderer&&(this.renderType=e.renderer),e.parent&&(this.parent=e.parent),void 0!==e.transparent&&(this.transparent=e.transparent),void 0!==e.antialias&&(this.antialias=e.antialias),e.resolution&&(this.resolution=e.resolution),void 0!==e.preserveDrawingBuffer&&(this.preserveDrawingBuffer=e.preserveDrawingBuffer),e.physicsConfig&&(this.physicsConfig=e.physicsConfig);var t=[(Date.now()*Math.random()).toString()];e.seed&&(t=e.seed),this.rnd=new U.RandomDataGenerator(t);var i=null;e.state&&(i=e.state),this.state=new U.StateManager(this,i)},boot:function(){this.isBooted||(this.onPause=new U.Signal,this.onResume=new U.Signal,this.onBlur=new U.Signal,this.onFocus=new U.Signal,this.isBooted=!0,(PIXI.game=this).math=U.Math,this.scale=new U.ScaleManager(this,this._width,this._height),this.stage=new U.Stage(this),this.setUpRenderer(),this.world=new U.World(this),this.add=new U.GameObjectFactory(this),this.make=new U.GameObjectCreator(this),this.cache=new U.Cache(this),this.load=new U.Loader(this),this.time=new U.Time(this),this.tweens=new U.TweenManager(this),this.input=new U.Input(this),this.sound=new U.SoundManager(this),this.physics=new U.Physics(this,this.physicsConfig),this.particles=new U.Particles(this),this.create=new U.Create(this),this.plugins=new U.PluginManager(this),this.net=new U.Net(this),this.time.boot(),this.stage.boot(),this.world.boot(),this.scale.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.config.enableDebug?(this.debug=new U.Utils.Debug(this),this.debug.boot()):this.debug={preUpdate:function(){},update:function(){},reset:function(){}},this.showDebugHeader(),this.isRunning=!0,this.config&&this.config.forceSetTimeOut?this.raf=new U.RequestAnimationFrame(this,this.config.forceSetTimeOut):this.raf=new U.RequestAnimationFrame(this,!1),this._kickstart=!0,window.focus&&(!window.PhaserGlobal||window.PhaserGlobal&&!window.PhaserGlobal.stopFocus)&&window.focus(),this.raf.start())},showDebugHeader:function(){if(!window.PhaserGlobal||!window.PhaserGlobal.hideBanner){var e=U.VERSION,t="Canvas",i="HTML Audio",n=1;if(this.renderType===U.WEBGL?(t="WebGL",n++):this.renderType===U.HEADLESS&&(t="Headless"),this.device.webAudio&&(i="WebAudio",n++),this.device.chrome)for(var r=["%c %c %c @azerion/phaser v"+e+" | Pixi.js | "+t+" | "+i+"  %c %c %c https://github.com/azerion / https://www.azerion.com %c%c%c","background: #7ab3eb","background: #378ce1","color: #ffffff; background: #207cd8;","background: #378ce1","background: #7ab3eb","background: #ffffff"],o=0;o<3;o++)o<n?r.push("color: #ff2424; background: #fff"):r.push("color: #959595; background: #fff");else window.console}},setUpRenderer:function(){if(this.config.canvas?this.canvas=this.config.canvas:this.canvas=U.Canvas.create(this,this.width,this.height,this.config.canvasID,!0),this.config.canvasStyle?this.canvas.style=this.config.canvasStyle:this.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",this.renderType===U.HEADLESS||this.renderType===U.CANVAS||this.renderType===U.AUTO&&!this.device.webGL){if(!this.device.canvas)throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");this.renderType=U.CANVAS,this.renderer=new PIXI.CanvasRenderer(this),this.context=this.renderer.context}else this.renderType=U.WEBGL,this.renderer=new PIXI.WebGLRenderer(this),this.context=null,this.canvas.addEventListener("webglcontextlost",this.contextLost.bind(this),!1),this.canvas.addEventListener("webglcontextrestored",this.contextRestored.bind(this),!1);this.device.cocoonJS&&(this.canvas.screencanvas=this.renderType===U.CANVAS),this.renderType!==U.HEADLESS&&(this.stage.smoothed=this.antialias,U.Canvas.addToDOM(this.canvas,this.parent,!1),U.Canvas.setTouchAction(this.canvas))},contextLost:function(e){e.preventDefault(),this.renderer.contextLost=!0},contextRestored:function(){this.renderer.initContext(),this.cache.clearGLTextures(),this.renderer.contextLost=!1},update:function(e){if(this.time.update(e),this._kickstart)return this.updateLogic(this.time.desiredFpsMult),this.updateRender(this.time.slowMotion*this.time.desiredFps),void(this._kickstart=!1);if(1<this._spiraling&&!this.forceSingleUpdate)this.time.time>this._nextFpsNotification&&(this._nextFpsNotification=this.time.time+1e4,this.fpsProblemNotifier.dispatch()),this._deltaTime=0,this._spiraling=0,this.updateRender(this.time.slowMotion*this.time.desiredFps);else{var t=1e3*this.time.slowMotion/this.time.desiredFps;this._deltaTime+=Math.max(Math.min(3*t,this.time.elapsed),0);var i=0;for(this.updatesThisFrame=Math.floor(this._deltaTime/t),this.forceSingleUpdate&&(this.updatesThisFrame=Math.min(1,this.updatesThisFrame));this._deltaTime>=t&&(this._deltaTime-=t,this.currentUpdateID=i,this.updateLogic(this.time.desiredFpsMult),i++,!this.forceSingleUpdate||1!==i);)this.time.refresh();i>this._lastCount?this._spiraling++:i<this._lastCount&&(this._spiraling=0),this._lastCount=i,this.updateRender(this._deltaTime/t)}},updateLogic:function(e){this._paused||this.pendingStep?(this.scale.pauseUpdate(),this.state.pauseUpdate(),this.debug.preUpdate()):(this.stepping&&(this.pendingStep=!0),this.scale.preUpdate(),this.debug.preUpdate(),this.camera.preUpdate(),this.physics.preUpdate(),this.state.preUpdate(e),this.plugins.preUpdate(e),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.sound.update(),this.input.update(),this.physics.update(),this.particles.update(),this.plugins.update(),this.stage.postUpdate(),this.plugins.postUpdate()),this.stage.updateTransform()},updateRender:function(e){this.lockRender||(this.state.preRender(e),this.renderType!==U.HEADLESS&&(this.renderer.render(this.stage),this.plugins.render(e),this.state.render(e)),this.plugins.postRender(e))},enableStep:function(){this.stepping=!0,this.pendingStep=!1,this.stepCount=0},disableStep:function(){this.stepping=!1,this.pendingStep=!1},step:function(){this.pendingStep=!1,this.stepCount++},destroy:function(){this.raf.stop(),this.state.destroy(),this.sound.destroy(),this.scale.destroy(),this.stage.destroy(),this.input.destroy(),this.physics.destroy(),this.plugins.destroy(),this.state=null,this.sound=null,this.scale=null,this.stage=null,this.input=null,this.physics=null,this.plugins=null,this.cache=null,this.load=null,this.time=null,this.world=null,this.isBooted=!1,this.renderer.destroy(!1),U.Canvas.removeFromDOM(this.canvas),PIXI.defaultRenderer=null,U.GAMES[this.id]=null},gamePaused:function(e){this._paused||(this._paused=!0,this.time.gamePaused(),this.sound.muteOnPause&&this.sound.setMute(),this.onPause.dispatch(e),this.device.cordova&&this.device.iOS&&(this.lockRender=!0))},gameResumed:function(e){this._paused&&!this._codePaused&&(this._paused=!1,this.time.gameResumed(),this.input.reset(),this.sound.muteOnPause&&this.sound.unsetMute(),this.onResume.dispatch(e),this.device.cordova&&this.device.iOS&&(this.lockRender=!1))},focusLoss:function(e){this.onBlur.dispatch(e),this.stage.disableVisibilityChange||this.gamePaused(e)},focusGain:function(e){this.onFocus.dispatch(e),this.stage.disableVisibilityChange||this.gameResumed(e)}},U.Game.prototype.constructor=U.Game,Object.defineProperty(U.Game.prototype,"paused",{get:function(){return this._paused},set:function(e){!0===e?(!1===this._paused&&(this._paused=!0,this.sound.setMute(),this.time.gamePaused(),this.onPause.dispatch(this)),this._codePaused=!0):(this._paused&&(this._paused=!1,this.input.reset(),this.sound.unsetMute(),this.time.gameResumed(),this.onResume.dispatch(this)),this._codePaused=!1)}}),U.Input=function(e){this.game=e,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.customCandidateHandler=null,this.customCandidateHandlerContext=null,this.pollRate=0,this.enabled=!0,this.multiInputOverride=U.Input.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=-1,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.pointer1=null,this.pointer2=null,this.pointer3=null,this.pointer4=null,this.pointer5=null,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this.pointers=[],this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.touch=null,this.mspointer=null,this.gamepad=null,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.minPriorityID=0,this.interactiveItems=new U.ArraySet,this._localPoint=new U.Point,this._pollCounter=0,this._oldPosition=null,this._x=0,this._y=0},U.Input.MOUSE_OVERRIDES_TOUCH=0,U.Input.TOUCH_OVERRIDES_MOUSE=1,U.Input.MOUSE_TOUCH_COMBINE=2,U.Input.MAX_POINTERS=10,U.Input.prototype={boot:function(){this.mousePointer=new U.Pointer(this.game,0,U.PointerMode.CURSOR),this.addPointer(),this.addPointer(),this.mouse=new U.Mouse(this.game),this.touch=new U.Touch(this.game),this.mspointer=new U.MSPointer(this.game),U.Keyboard&&(this.keyboard=new U.Keyboard(this.game)),U.Gamepad&&(this.gamepad=new U.Gamepad(this.game)),this.onDown=new U.Signal,this.onUp=new U.Signal,this.onTap=new U.Signal,this.onHold=new U.Signal,this.scale=new U.Point(1,1),this.speed=new U.Point,this.position=new U.Point,this._oldPosition=new U.Point,this.circle=new U.Circle(0,0,45),this.activePointer=this.mousePointer,this.hitCanvas=PIXI.CanvasPool.create(this,1,1),this.hitContext=this.hitCanvas.getContext("2d"),this.game.device.mspointer?this.mspointer.start():this.game.device.touch&&this.touch.start(),this.mspointer.active||this.mouse.start(),this.mousePointer.active=!0,this.keyboard&&this.keyboard.start();var t=this;this._onClickTrampoline=function(e){t.onClickTrampoline(e)},this.game.canvas.addEventListener("click",this._onClickTrampoline,!1)},destroy:function(){this.mouse.stop(),this.touch.stop(),this.mspointer.stop(),this.keyboard&&this.keyboard.stop(),this.gamepad&&this.gamepad.stop(),this.moveCallbacks=[],PIXI.CanvasPool.remove(this),this.game.canvas.removeEventListener("click",this._onClickTrampoline)},setInteractiveCandidateHandler:function(e,t){this.customCandidateHandler=e,this.customCandidateHandlerContext=t},addMoveCallback:function(e,t){this.moveCallbacks.push({callback:e,context:t})},deleteMoveCallback:function(e,t){for(var i=this.moveCallbacks.length;i--;)if(this.moveCallbacks[i].callback===e&&this.moveCallbacks[i].context===t)return void this.moveCallbacks.splice(i,1)},addPointer:function(){if(this.pointers.length>=U.Input.MAX_POINTERS)return null;var e=this.pointers.length+1,t=new U.Pointer(this.game,e,U.PointerMode.TOUCH);return this.pointers.push(t),this["pointer"+e]=t},update:function(){if(this.keyboard&&this.keyboard.update(),0<this.pollRate&&this._pollCounter<this.pollRate)this._pollCounter++;else{this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.gamepad&&this.gamepad.active&&this.gamepad.update();for(var e=0;e<this.pointers.length;e++)this.pointers[e].update();this._pollCounter=0}},reset:function(e){if(this.game.isBooted&&!this.resetLocked){void 0===e&&(e=!1),this.mousePointer.reset(),this.keyboard&&this.keyboard.reset(e),this.gamepad&&this.gamepad.reset();for(var t=0;t<this.pointers.length;t++)this.pointers[t].reset();"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),e&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new U.Signal,this.onUp=new U.Signal,this.onTap=new U.Signal,this.onHold=new U.Signal,this.moveCallbacks=[]),this._pollCounter=0}},resetSpeed:function(e,t){this._oldPosition.setTo(e,t),this.speed.setTo(0,0)},startPointer:function(e){if(0<=this.maxPointers&&this.countActivePointers(this.maxPointers)>=this.maxPointers)return null;if(!this.pointer1.active)return this.pointer1.start(e);if(!this.pointer2.active)return this.pointer2.start(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(!i.active)return i.start(e)}return null},updatePointer:function(e){if(this.pointer1.active&&this.pointer1.identifier===e.identifier)return this.pointer1.move(e);if(this.pointer2.active&&this.pointer2.identifier===e.identifier)return this.pointer2.move(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active&&i.identifier===e.identifier)return i.move(e)}return null},stopPointer:function(e){if(this.pointer1.active&&this.pointer1.identifier===e.identifier)return this.pointer1.stop(e);if(this.pointer2.active&&this.pointer2.identifier===e.identifier)return this.pointer2.stop(e);for(var t=2;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active&&i.identifier===e.identifier)return i.stop(e)}return null},countActivePointers:function(e){void 0===e&&(e=this.pointers.length);for(var t=e,i=0;i<this.pointers.length&&0<t;i++)this.pointers[i].active&&t--;return e-t},getPointer:function(e){void 0===e&&(e=!1);for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.active===e)return i}return null},getPointerFromIdentifier:function(e){for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.identifier===e)return i}return null},getPointerFromId:function(e){for(var t=0;t<this.pointers.length;t++){var i=this.pointers[t];if(i.pointerId===e)return i}return null},getLocalPosition:function(e,t,i){void 0===i&&(i=new U.Point);var n=e.worldTransform,r=1/(n.a*n.d+n.c*-n.b);return i.setTo(n.d*r*t.x+-n.c*r*t.y+(n.ty*n.c-n.tx*n.d)*r,n.a*r*t.y+-n.b*r*t.x+(-n.ty*n.a+n.tx*n.b)*r)},hitTest:function(e,t,i){if(!e.worldVisible)return!1;if(this.getLocalPosition(e,t,this._localPoint),i.copyFrom(this._localPoint),e.hitArea&&e.hitArea.contains)return e.hitArea.contains(this._localPoint.x,this._localPoint.y);if(e instanceof U.TileSprite){var n=e.width,r=e.height,o=-n*e.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+n){var a=-r*e.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+r)return!0}}else if(e instanceof PIXI.Sprite){n=e.texture.frame.width,r=e.texture.frame.height,o=-n*e.anchor.x;if(this._localPoint.x>=o&&this._localPoint.x<o+n){a=-r*e.anchor.y;if(this._localPoint.y>=a&&this._localPoint.y<a+r)return!0}}else if(U.Graphics&&e instanceof U.Graphics)for(var s=0;s<e.graphicsData.length;s++){var l=e.graphicsData[s];if(l.fill&&l.shape&&l.shape.contains(this._localPoint.x,this._localPoint.y))return!0}for(s=0;s<e.children.length;s++)if(this.hitTest(e.children[s],t,i))return!0;return!1},onClickTrampoline:function(){this.activePointer.processClickTrampolines()}},U.Input.prototype.constructor=U.Input,Object.defineProperty(U.Input.prototype,"x",{get:function(){return this._x},set:function(e){this._x=Math.floor(e)}}),Object.defineProperty(U.Input.prototype,"y",{get:function(){return this._y},set:function(e){this._y=Math.floor(e)}}),Object.defineProperty(U.Input.prototype,"pollLocked",{get:function(){return 0<this.pollRate&&this._pollCounter<this.pollRate}}),Object.defineProperty(U.Input.prototype,"totalInactivePointers",{get:function(){return this.pointers.length-this.countActivePointers()}}),Object.defineProperty(U.Input.prototype,"totalActivePointers",{get:function(){return this.countActivePointers()}}),Object.defineProperty(U.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(U.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),U.Mouse=function(e){this.game=e,this.input=e.input,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.mouseWheelCallback=null,this.capture=!1,this.button=-1,this.wheelDelta=0,this.enabled=!0,this.locked=!1,this.stopOnGameOut=!1,this.pointerLock=new U.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null,this._onMouseWheel=null,this._wheelEvent=null},U.Mouse.NO_BUTTON=-1,U.Mouse.LEFT_BUTTON=0,U.Mouse.MIDDLE_BUTTON=1,U.Mouse.RIGHT_BUTTON=2,U.Mouse.BACK_BUTTON=3,U.Mouse.FORWARD_BUTTON=4,U.Mouse.WHEEL_UP=1,U.Mouse.WHEEL_DOWN=-1,U.Mouse.prototype={start:function(){if((!this.game.device.android||!1!==this.game.device.chrome)&&null===this._onMouseDown){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseUpGlobal=function(e){return t.onMouseUpGlobal(e)},this._onMouseOutGlobal=function(e){return t.onMouseOutGlobal(e)},this._onMouseOut=function(e){return t.onMouseOut(e)},this._onMouseOver=function(e){return t.onMouseOver(e)},this._onMouseWheel=function(e){return t.onMouseWheel(e)};var e=this.game.canvas;e.addEventListener("mousedown",this._onMouseDown,!0),e.addEventListener("mousemove",this._onMouseMove,!0),e.addEventListener("mouseup",this._onMouseUp,!0),this.game.device.cocoonJS||(window.addEventListener("mouseup",this._onMouseUpGlobal,!0),window.addEventListener("mouseout",this._onMouseOutGlobal,!0),e.addEventListener("mouseover",this._onMouseOver,!0),e.addEventListener("mouseout",this._onMouseOut,!0));var i=this.game.device.wheelEvent;i&&(e.addEventListener(i,this._onMouseWheel,!0),"mousewheel"===i?this._wheelEvent=new n(-.025,1):"DOMMouseScroll"===i&&(this._wheelEvent=new n(1,1)))}},onMouseDown:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.start(e))},onMouseMove:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.move(e))},onMouseUp:function(e){this.event=e,this.capture&&e.preventDefault(),this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=0,this.input.mousePointer.stop(e))},onMouseUpGlobal:function(e){this.input.mousePointer.withinGame||(this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,e),e.identifier=0,this.input.mousePointer.stop(e))},onMouseOutGlobal:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!1,this.input.enabled&&this.enabled&&(this.input.mousePointer.stop(e),this.input.mousePointer.leftButton.stop(e),this.input.mousePointer.rightButton.stop(e))},onMouseOut:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!1,this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&this.stopOnGameOut&&(e.identifier=0,this.input.mousePointer.stop(e))},onMouseOver:function(e){this.event=e,this.capture&&e.preventDefault(),this.input.mousePointer.withinGame=!0,this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,e)},onMouseWheel:function(e){this._wheelEvent&&(e=this._wheelEvent.bindEvent(e)),this.event=e,this.capture&&e.preventDefault(),this.wheelDelta=U.Math.clamp(-e.deltaY,-1,1),this.mouseWheelCallback&&this.mouseWheelCallback.call(this.callbackContext,e)},requestPointerLock:function(){if(this.game.device.pointerLock){var e=this.game.canvas;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock();var t=this;this._pointerLockChange=function(e){return t.pointerLockChange(e)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},pointerLockChange:function(e){var t=this.game.canvas;document.pointerLockElement===t||document.mozPointerLockElement===t||document.webkitPointerLockElement===t?(this.locked=!0,this.pointerLock.dispatch(!0,e)):(this.locked=!1,this.pointerLock.dispatch(!1,e))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){var e=this.game.canvas;e.removeEventListener("mousedown",this._onMouseDown,!0),e.removeEventListener("mousemove",this._onMouseMove,!0),e.removeEventListener("mouseup",this._onMouseUp,!0),e.removeEventListener("mouseover",this._onMouseOver,!0),e.removeEventListener("mouseout",this._onMouseOut,!0);var t=this.game.device.wheelEvent;t&&e.removeEventListener(t,this._onMouseWheel,!0),window.removeEventListener("mouseup",this._onMouseUpGlobal,!0),window.removeEventListener("mouseout",this._onMouseOutGlobal,!0),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)}},U.Mouse.prototype.constructor=U.Mouse,((n.prototype={}).constructor=n).prototype.bindEvent=function(e){if(!n._stubsGenerated&&e){var t=function(t){return function(){var e=this.originalEvent[t];return"function"!=typeof e?e:e.bind(this.originalEvent)}};for(var i in e)i in n.prototype||Object.defineProperty(n.prototype,i,{get:t(i)});n._stubsGenerated=!0}return this.originalEvent=e,this},Object.defineProperties(n.prototype,{type:{value:"wheel"},deltaMode:{get:function(){return this._deltaMode}},deltaY:{get:function(){return this._scaleFactor*(this.originalEvent.wheelDelta||this.originalEvent.detail)||0}},deltaX:{get:function(){return this._scaleFactor*this.originalEvent.wheelDeltaX||0}},deltaZ:{value:0}}),U.MSPointer=function(e){this.game=e,this.input=e.input,this.callbackContext=this.game,this.pointerDownCallback=null,this.pointerMoveCallback=null,this.pointerUpCallback=null,this.capture=!1,this.event=null,this.active=!1,this.enabled=!0,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null,this._onMSPointerUpGlobal=null,this._onMSPointerOut=null,this._onMSPointerOver=null},U.MSPointer.prototype={start:function(){if(!this.game.device.mspointer)return!1;if(null!==this._onMSPointerDown)return!1;var t=this;this._onMSPointerDown=function(e){return t.onPointerDown(e)},this._onMSPointerMove=function(e){return t.onPointerMove(e)},this._onMSPointerUp=function(e){return t.onPointerUp(e)},this._onMSPointerUpGlobal=function(e){return t.onPointerUpGlobal(e)},this._onMSPointerOut=function(e){return t.onPointerOut(e)},this._onMSPointerOver=function(e){return t.onPointerOver(e)};var e=this.game.canvas;return e.addEventListener("MSPointerDown",this._onMSPointerDown,!1),e.addEventListener("MSPointerMove",this._onMSPointerMove,!1),e.addEventListener("MSPointerUp",this._onMSPointerUp,!1),e.addEventListener("pointerdown",this._onMSPointerDown,!1),e.addEventListener("pointermove",this._onMSPointerMove,!1),e.addEventListener("pointerup",this._onMSPointerUp,!1),e.style["-ms-content-zooming"]="none",e.style["-ms-touch-action"]="none",this.game.device.cocoonJS||(window.addEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),e.addEventListener("MSPointerOver",this._onMSPointerOver,!0),e.addEventListener("MSPointerOut",this._onMSPointerOut,!0),window.addEventListener("pointerup",this._onMSPointerUpGlobal,!0),e.addEventListener("pointerover",this._onMSPointerOver,!0),e.addEventListener("pointerout",this._onMSPointerOut,!0)),this.active=!0},onPointerDown:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerDownCallback&&this.pointerDownCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.start(e):this.input.startPointer(e))},onPointerMove:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerMoveCallback&&this.pointerMoveCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.move(e):this.input.updatePointer(e))},onPointerUp:function(e){this.event=e,this.capture&&e.preventDefault(),this.pointerUpCallback&&this.pointerUpCallback.call(this.callbackContext,e),this.input.enabled&&this.enabled&&(e.identifier=e.pointerId,"mouse"===e.pointerType||4===e.pointerType?this.input.mousePointer.stop(e):this.input.stopPointer(e))},onPointerUpGlobal:function(e){if("mouse"!==e.pointerType&&4!==e.pointerType||this.input.mousePointer.withinGame){var t=this.input.getPointerFromIdentifier(e.identifier);t&&t.withinGame&&this.onPointerUp(e)}else this.onPointerUp(e)},onPointerOut:function(e){if(this.event=e,this.capture&&e.preventDefault(),"mouse"===e.pointerType||4===e.pointerType)this.input.mousePointer.withinGame=!1;else{var t=this.input.getPointerFromIdentifier(e.identifier);t&&(t.withinGame=!1)}this.input.mouse.mouseOutCallback&&this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext,e),this.input.enabled&&this.enabled&&this.input.mouse.stopOnGameOut&&(e.identifier=0,t?t.stop(e):this.input.mousePointer.stop(e))},onPointerOver:function(e){if(this.event=e,this.capture&&e.preventDefault(),"mouse"===e.pointerType||4===e.pointerType)this.input.mousePointer.withinGame=!0;else{var t=this.input.getPointerFromIdentifier(e.identifier);t&&(t.withinGame=!0)}this.input.mouse.mouseOverCallback&&this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext,e)},stop:function(){var e=this.game.canvas;e.removeEventListener("MSPointerDown",this._onMSPointerDown,!1),e.removeEventListener("MSPointerMove",this._onMSPointerMove,!1),e.removeEventListener("MSPointerUp",this._onMSPointerUp,!1),e.removeEventListener("pointerdown",this._onMSPointerDown,!1),e.removeEventListener("pointermove",this._onMSPointerMove,!1),e.removeEventListener("pointerup",this._onMSPointerUp,!1),window.removeEventListener("MSPointerUp",this._onMSPointerUpGlobal,!0),e.removeEventListener("MSPointerOver",this._onMSPointerOver,!0),e.removeEventListener("MSPointerOut",this._onMSPointerOut,!0),window.removeEventListener("pointerup",this._onMSPointerUpGlobal,!0),e.removeEventListener("pointerover",this._onMSPointerOver,!0),e.removeEventListener("pointerout",this._onMSPointerOut,!0),this.active=!1}},U.MSPointer.prototype.constructor=U.MSPointer,U.DeviceButton=function(e,t){this.parent=e,this.game=e.game,this.event=null,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1,this.value=0,this.buttonCode=t,this.onDown=new U.Signal,this.onUp=new U.Signal,this.onFloat=new U.Signal},U.DeviceButton.prototype={start:function(e,t){this.isDown||(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.repeats=0,this.event=e,this.value=t,e&&(this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey),this.onDown.dispatch(this,t))},stop:function(e,t){this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.event=e,this.value=t,e&&(this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.ctrlKey=e.ctrlKey),this.onUp.dispatch(this,t))},padFloat:function(e){this.value=e,this.onFloat.dispatch(this,e)},justPressed:function(e){return e=e||250,this.isDown&&this.timeDown+e>this.game.time.time},justReleased:function(e){return e=e||250,this.isUp&&this.timeUp+e>this.game.time.time},reset:function(){this.isDown=!1,this.isUp=!0,this.timeDown=this.game.time.time,this.repeats=0,this.altKey=!1,this.shiftKey=!1,this.ctrlKey=!1},destroy:function(){this.onDown.dispose(),this.onUp.dispose(),this.onFloat.dispose(),this.parent=null,this.game=null}},U.DeviceButton.prototype.constructor=U.DeviceButton,Object.defineProperty(U.DeviceButton.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),U.Pointer=function(e,t,i){this.game=e,this.id=t,this.type=U.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.pointerMode=i||U.PointerMode.CURSOR|U.PointerMode.CONTACT,this.target=null,this.button=null,this.leftButton=new U.DeviceButton(this,U.Pointer.LEFT_BUTTON),this.middleButton=new U.DeviceButton(this,U.Pointer.MIDDLE_BUTTON),this.rightButton=new U.DeviceButton(this,U.Pointer.RIGHT_BUTTON),this.backButton=new U.DeviceButton(this,U.Pointer.BACK_BUTTON),this.forwardButton=new U.DeviceButton(this,U.Pointer.FORWARD_BUTTON),this.eraserButton=new U.DeviceButton(this,U.Pointer.ERASER_BUTTON),this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=0===t,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.interactiveCandidates=[],this.active=!1,this.dirty=!1,this.position=new U.Point,this.positionDown=new U.Point,this.positionUp=new U.Point,this.circle=new U.Circle(0,0,44),this._clickTrampolines=null,this._trampolineTargetObject=null},U.Pointer.NO_BUTTON=0,U.Pointer.LEFT_BUTTON=1,U.Pointer.RIGHT_BUTTON=2,U.Pointer.MIDDLE_BUTTON=4,U.Pointer.BACK_BUTTON=8,U.Pointer.FORWARD_BUTTON=16,U.Pointer.ERASER_BUTTON=32,U.Pointer.prototype={resetButtons:function(){this.isDown=!1,this.isUp=!0,this.isMouse&&(this.leftButton.reset(),this.middleButton.reset(),this.rightButton.reset(),this.backButton.reset(),this.forwardButton.reset(),this.eraserButton.reset())},processButtonsDown:function(e,t){U.Pointer.LEFT_BUTTON&e&&this.leftButton.start(t),U.Pointer.RIGHT_BUTTON&e&&this.rightButton.start(t),U.Pointer.MIDDLE_BUTTON&e&&this.middleButton.start(t),U.Pointer.BACK_BUTTON&e&&this.backButton.start(t),U.Pointer.FORWARD_BUTTON&e&&this.forwardButton.start(t),U.Pointer.ERASER_BUTTON&e&&this.eraserButton.start(t)},processButtonsUp:function(e,t){e===U.Mouse.LEFT_BUTTON&&this.leftButton.stop(t),e===U.Mouse.RIGHT_BUTTON&&this.rightButton.stop(t),e===U.Mouse.MIDDLE_BUTTON&&this.middleButton.stop(t),e===U.Mouse.BACK_BUTTON&&this.backButton.stop(t),e===U.Mouse.FORWARD_BUTTON&&this.forwardButton.stop(t),5===e&&this.eraserButton.stop(t)},updateButtons:function(e){this.button=e.button;var t="down"===e.type.toLowerCase().substr(-4);void 0!==e.buttons?t?this.processButtonsDown(e.buttons,e):this.processButtonsUp(e.button,e):t?this.leftButton.start(e):(this.leftButton.stop(e),this.rightButton.stop(e)),1===e.buttons&&e.ctrlKey&&this.leftButton.isDown&&(this.leftButton.stop(e),this.rightButton.start(e)),this.isUp=!0,this.isDown=!1,(this.leftButton.isDown||this.rightButton.isDown||this.middleButton.isDown||this.backButton.isDown||this.forwardButton.isDown||this.eraserButton.isDown)&&(this.isUp=!1,this.isDown=!0)},start:function(e){var t=this.game.input;return e.pointerId&&(this.pointerId=e.pointerId),this.identifier=e.identifier,this.target=e.target,this.isMouse?this.updateButtons(e):(this.isDown=!0,this.isUp=!1),this.active=!0,this.withinGame=!0,this.dirty=!1,this._history=[],this._clickTrampolines=null,this._trampolineTargetObject=null,this.msSinceLastClick=this.game.time.time-this.timeDown,this.timeDown=this.game.time.time,this._holdSent=!1,this.move(e,!0),this.positionDown.setTo(this.x,this.y),(t.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&(t.x=this.x,t.y=this.y,t.position.setTo(this.x,this.y),t.onDown.dispatch(this,e),t.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){var e=this.game.input;this.active&&(this.dirty&&(0<e.interactiveItems.total&&this.processInteractiveObjects(!1),this.dirty=!1),!1===this._holdSent&&this.duration>=e.holdRate&&((e.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||e.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||e.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===e.totalActivePointers)&&e.onHold.dispatch(this),this._holdSent=!0),e.recordPointerHistory&&this.game.time.time>=this._nextDrop&&(this._nextDrop=this.game.time.time+e.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>e.recordLimit&&this._history.shift()))},move:function(e,t){var i=this.game.input;if(!i.pollLocked){void 0===t&&(t=!1),void 0!==e.button&&(this.button=e.button),t&&this.isMouse&&this.updateButtons(e),this.clientX=e.clientX,this.clientY=e.clientY,this.pageX=e.pageX,this.pageY=e.pageY,this.screenX=e.screenX,this.screenY=e.screenY,this.isMouse&&i.mouse.locked&&!t&&(this.rawMovementX=e.movementX||e.mozMovementX||e.webkitMovementX||0,this.rawMovementY=e.movementY||e.mozMovementY||e.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.scale.offset.x)*i.scale.x,this.y=(this.pageY-this.game.scale.offset.y)*i.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(i.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||i.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||i.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===i.totalActivePointers)&&(i.activePointer=this,i.x=this.x,i.y=this.y,i.position.setTo(i.x,i.y),i.circle.x=i.x,i.circle.y=i.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY);for(var n=i.moveCallbacks.length;n--;)i.moveCallbacks[n].callback.call(i.moveCallbacks[n].context,this,this.x,this.y,t);return null!==this.targetObject&&!0===this.targetObject.isDragged?!1===this.targetObject.update(this)&&(this.targetObject=null):0<i.interactiveItems.total&&this.processInteractiveObjects(t),this}},processInteractiveObjects:function(e){var t=0,i=-1,n=null,r=this.game.input.interactiveItems.first;for(this.interactiveCandidates=[];r;)r.checked=!1,r.validForInput(i,t,!1)&&(r.checked=!0,(e&&r.checkPointerDown(this,!0)||!e&&r.checkPointerOver(this,!0))&&(t=r.sprite.renderOrderID,i=r.priorityID,n=r,this.interactiveCandidates.push(r))),r=this.game.input.interactiveItems.next;for(r=this.game.input.interactiveItems.first;r;)!r.checked&&r.validForInput(i,t,!0)&&(e&&r.checkPointerDown(this,!1)||!e&&r.checkPointerOver(this,!1))&&(t=r.sprite.renderOrderID,i=r.priorityID,n=r,this.interactiveCandidates.push(r)),r=this.game.input.interactiveItems.next;return this.game.input.customCandidateHandler&&(n=this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext,this,this.interactiveCandidates,n)),this.swapTarget(n,!1),null!==this.targetObject},swapTarget:function(e,t){void 0===t&&(t=!1),null===e?this.targetObject&&(this.targetObject._pointerOutHandler(this,t),this.targetObject=null):null===this.targetObject?(this.targetObject=e)._pointerOverHandler(this,t):this.targetObject===e?!1===e.update(this)&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this,t),this.targetObject=e,this.targetObject._pointerOverHandler(this,t))},leave:function(e){this.withinGame=!1,this.move(e,!1)},stop:function(e){var t=this.game.input;return this._stateReset&&this.withinGame?void e.preventDefault():(this.timeUp=this.game.time.time,(t.multiInputOverride===U.Input.MOUSE_OVERRIDES_TOUCH||t.multiInputOverride===U.Input.MOUSE_TOUCH_COMBINE||t.multiInputOverride===U.Input.TOUCH_OVERRIDES_MOUSE&&0===t.totalActivePointers)&&(t.onUp.dispatch(this,e),0<=this.duration&&this.duration<=t.tapRate&&(this.timeUp-this.previousTapTime<t.doubleTapRate?t.onTap.dispatch(this,!0):t.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.isMouse?this.updateButtons(e):(this.isDown=!1,this.isUp=!0),0<this.id&&(this.active=!1),this.withinGame=this.game.scale.bounds.contains(e.pageX,e.pageY),this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),!1===this.isMouse&&t.currentPointers--,t.interactiveItems.callAll("_releasedHandler",this),this._clickTrampolines&&(this._trampolineTargetObject=this.targetObject),this.targetObject=null,this)},justPressed:function(e){return e=e||this.game.input.justPressedRate,!0===this.isDown&&this.timeDown+e>this.game.time.time},justReleased:function(e){return e=e||this.game.input.justReleasedRate,this.isUp&&this.timeUp+e>this.game.time.time},addClickTrampoline:function(e,t,i,n){if(this.isDown){for(var r=this._clickTrampolines=this._clickTrampolines||[],o=0;o<r.length;o++)if(r[o].name===e){r.splice(o,1);break}r.push({name:e,targetObject:this.targetObject,callback:t,callbackContext:i,callbackArgs:n})}},processClickTrampolines:function(){var e=this._clickTrampolines;if(e){for(var t=0;t<e.length;t++){var i=e[t];i.targetObject===this._trampolineTargetObject&&i.callback.apply(i.callbackContext,i.callbackArgs)}this._clickTrampolines=null,this._trampolineTargetObject=null}},reset:function(){!1===this.isMouse&&(this.active=!1),this.pointerId=null,this.identifier=null,this.dirty=!1,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.resetButtons(),this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},U.Pointer.prototype.constructor=U.Pointer,Object.defineProperty(U.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.time-this.timeDown}}),Object.defineProperty(U.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(U.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),U.PointerMode={CURSOR:1,CONTACT:2},U.Touch=function(e){this.game=e,this.enabled=!0,this.touchLockCallbacks=[],this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},U.Touch.prototype={start:function(){if(null===this._onTouchStart){var t=this;this.game.device.touch&&(this._onTouchStart=function(e){return t.onTouchStart(e)},this._onTouchMove=function(e){return t.onTouchMove(e)},this._onTouchEnd=function(e){return t.onTouchEnd(e)},this._onTouchEnter=function(e){return t.onTouchEnter(e)},this._onTouchLeave=function(e){return t.onTouchLeave(e)},this._onTouchCancel=function(e){return t.onTouchCancel(e)},this.game.canvas.addEventListener("touchstart",this._onTouchStart,!1),this.game.canvas.addEventListener("touchmove",this._onTouchMove,!1),this.game.canvas.addEventListener("touchend",this._onTouchEnd,!1),this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,!1),this.game.device.cocoonJS||(this.game.canvas.addEventListener("touchenter",this._onTouchEnter,!1),this.game.canvas.addEventListener("touchleave",this._onTouchLeave,!1)))}},consumeDocumentTouches:function(){this._documentTouchMove=function(e){e.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},addTouchLockCallback:function(e,t,i){void 0===i&&(i=!1),this.touchLockCallbacks.push({callback:e,context:t,onEnd:i})},removeTouchLockCallback:function(e,t){for(var i=this.touchLockCallbacks.length;i--;)if(this.touchLockCallbacks[i].callback===e&&this.touchLockCallbacks[i].context===t)return this.touchLockCallbacks.splice(i,1),!0;return!1},onTouchStart:function(e){for(var t=this.touchLockCallbacks.length;t--;){var i=this.touchLockCallbacks[t];!i.onEnd&&i.callback.call(i.context,this,e)&&this.touchLockCallbacks.splice(t,1)}if(this.event=e,this.game.input.enabled&&this.enabled){this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(t=0;t<e.changedTouches.length;t++)this.game.input.startPointer(e.changedTouches[t])}},onTouchCancel:function(e){if(this.event=e,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,e),this.game.input.enabled&&this.enabled){this.preventDefault&&e.preventDefault();for(var t=0;t<e.changedTouches.length;t++)this.game.input.stopPointer(e.changedTouches[t])}},onTouchEnter:function(e){this.event=e,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,e),this.game.input.enabled&&this.enabled&&this.preventDefault&&e.preventDefault()},onTouchLeave:function(e){this.event=e,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault()},onTouchMove:function(e){this.event=e,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(var t=0;t<e.changedTouches.length;t++)this.game.input.updatePointer(e.changedTouches[t])},onTouchEnd:function(e){for(var t=this.touchLockCallbacks.length;t--;){var i=this.touchLockCallbacks[t];i.onEnd&&i.callback.call(i.context,this,e)&&this.touchLockCallbacks.splice(t,1)}this.event=e,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,e),this.preventDefault&&e.preventDefault();for(t=0;t<e.changedTouches.length;t++)this.game.input.stopPointer(e.changedTouches[t])},stop:function(){this.game.device.touch&&(this.game.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},U.Touch.prototype.constructor=U.Touch,U.InputHandler=function(e){this.sprite=e,this.game=e.game,this.enabled=!1,this.checked=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.scaleLayer=!1,this.dragOffset=new U.Point,this.dragFromCenter=!1,this.dragStopBlocksInputUp=!1,this.dragStartPoint=new U.Point,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this.downPoint=new U.Point,this.snapPoint=new U.Point,this._dragPoint=new U.Point,this._dragPhase=!1,this._pendingDrag=!1,this._dragTimePass=!1,this._dragDistancePass=!1,this._wasEnabled=!1,this._tempPoint=new U.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,camX:0,camY:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},U.InputHandler.prototype={start:function(e,t){if(e=e||0,void 0===t&&(t=!1),!1===this.enabled){this.game.input.interactiveItems.add(this),this.useHandCursor=t,this.priorityID=e;for(var i=0;i<10;i++)this._pointerData[i]={id:i,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new U.Point,this.enabled=!0,this._wasEnabled=!0}return this.sprite.events.onAddedToGroup.add(this.addedToGroup,this),this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this),this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1;for(var e=0;e<10;e++)this._pointerData[e]={id:e,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){!1!==this.enabled&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(e,t,i){return void 0===i&&(i=!0),!(!this.enabled||0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID||this.sprite.parent&&this.sprite.parent.ignoreChildInput||!i&&(this.pixelPerfectClick||this.pixelPerfectOver)||!(this.priorityID>e||this.priorityID===e&&this.sprite.renderOrderID>t))},isPixelPerfect:function(){return this.pixelPerfectClick||this.pixelPerfectOver},pointerX:function(e){return e=e||0,this._pointerData[e].x},pointerY:function(e){return e=e||0,this._pointerData[e].y},pointerDown:function(e){return e=e||0,this._pointerData[e].isDown},pointerUp:function(e){return e=e||0,this._pointerData[e].isUp},pointerTimeDown:function(e){return e=e||0,this._pointerData[e].timeDown},pointerTimeUp:function(e){return e=e||0,this._pointerData[e].timeUp},pointerOver:function(e){if(!this.enabled)return!1;if(void 0===e){for(var t=0;t<10;t++)if(this._pointerData[t].isOver)return!0;return!1}return this._pointerData[e].isOver},pointerOut:function(e){if(!this.enabled)return!1;if(void 0!==e)return this._pointerData[e].isOut;for(var t=0;t<10;t++)if(this._pointerData[t].isOut)return!0},pointerTimeOver:function(e){return e=e||0,this._pointerData[e].timeOver},pointerTimeOut:function(e){return e=e||0,this._pointerData[e].timeOut},pointerDragged:function(e){return e=e||0,this._pointerData[e].isDragged},checkPointerDown:function(e,t){return!!(e.isDown&&this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&!!this.game.input.hitTest(this.sprite,e,this._tempPoint)&&(void 0===t&&(t=!1),!(!t&&this.pixelPerfectClick)||this.checkPixel(this._tempPoint.x,this._tempPoint.y))},checkPointerOver:function(e,t){return!!(this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&0!==this.sprite.worldScale.x&&0!==this.sprite.worldScale.y)&&!!this.game.input.hitTest(this.sprite,e,this._tempPoint)&&(void 0===t&&(t=!1),!(!t&&this.pixelPerfectOver)||this.checkPixel(this._tempPoint.x,this._tempPoint.y))},checkPixel:function(e,t,i){if(this.sprite.texture.baseTexture.source){if(null===e&&null===t){this.game.input.getLocalPosition(this.sprite,i,this._tempPoint);e=this._tempPoint.x,t=this._tempPoint.y}if(0!==this.sprite.anchor.x&&(e-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(t-=-this.sprite.texture.frame.height*this.sprite.anchor.y),e+=this.sprite.texture.frame.x,t+=this.sprite.texture.frame.y,this.sprite.texture.trim&&(e-=this.sprite.texture.trim.x,t-=this.sprite.texture.trim.y,e<this.sprite.texture.crop.x||e>this.sprite.texture.crop.right||t<this.sprite.texture.crop.y||t>this.sprite.texture.crop.bottom))return this._dx=e,this._dy=t,!1;if(this._dx=e,this._dy=t,this.game.input.hitContext.clearRect(0,0,1,1),this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,e,t,1,1,0,0,1,1),this.game.input.hitContext.getImageData(0,0,1,1).data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(e){if(null!==this.sprite&&void 0!==this.sprite.parent)return this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this._pendingDrag?(this._dragDistancePass||(this._dragDistancePass=U.Math.distance(e.x,e.y,this.downPoint.x,this.downPoint.y)>=this.dragDistanceThreshold),this._dragDistancePass&&this._dragTimePass&&this.startDrag(e),!0):this.draggable&&this._draggedPointerID===e.id?this.updateDrag(e,!1):this._pointerData[e.id].isOver?this.checkPointerOver(e)?(this._pointerData[e.id].x=e.x-this.sprite.x,this._pointerData[e.id].y=e.y-this.sprite.y,!0):(this._pointerOutHandler(e),!1):void 0:(this._pointerOutHandler(e),!1)},_pointerOverHandler:function(e,t){if(null!==this.sprite){var i=this._pointerData[e.id];if(!1===i.isOver||e.dirty){var n=!1===i.isOver;i.isOver=!0,i.isOut=!1,i.timeOver=this.game.time.time,i.x=e.x-this.sprite.x,i.y=e.y-this.sprite.y,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),!t&&n&&this.sprite&&this.sprite.events&&this.sprite.events.onInputOver$dispatch(this.sprite,e),this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputOver.dispatch(this.sprite,e)}}},_pointerOutHandler:function(e,t){if(null!==this.sprite){var i=this._pointerData[e.id];i.isOver=!1,i.isOut=!0,i.timeOut=this.game.time.time,this.useHandCursor&&!1===i.isDragged&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),!t&&this.sprite&&this.sprite.events&&(this.sprite.events.onInputOut$dispatch(this.sprite,e),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputOut.dispatch(this.sprite,e))}},_touchedHandler:function(e){if(null!==this.sprite){var t=this._pointerData[e.id];if(!t.isDown&&t.isOver){if(this.pixelPerfectClick&&!this.checkPixel(null,null,e))return;if(t.isDown=!0,t.isUp=!1,t.timeDown=this.game.time.time,this.downPoint.set(e.x,e.y),e.dirty=!0,this.sprite&&this.sprite.events&&(this.sprite.events.onInputDown$dispatch(this.sprite,e),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputDown.dispatch(this.sprite,e),null===this.sprite))return;this.draggable&&!1===this.isDragged&&(0===this.dragTimeThreshold&&0===this.dragDistanceThreshold?this.startDrag(e):(this._pendingDrag=!0,this._dragDistancePass=0===this.dragDistanceThreshold,0<this.dragTimeThreshold?(this._dragTimePass=!1,this.game.time.events.add(this.dragTimeThreshold,this.dragTimeElapsed,this,e)):this._dragTimePass=!0)),this.bringToTop&&this.sprite.bringToTop()}}},dragTimeElapsed:function(e){this._dragTimePass=!0,this._pendingDrag&&this.sprite&&this._dragDistancePass&&this.startDrag(e)},_releasedHandler:function(e){if(null!==this.sprite){var t=this._pointerData[e.id];if(t.isDown&&e.isUp){t.isDown=!1,t.isUp=!0,t.timeUp=this.game.time.time,t.downDuration=t.timeUp-t.timeDown;var i=this.checkPointerOver(e);this.sprite&&this.sprite.events&&(this.dragStopBlocksInputUp&&(!this.dragStopBlocksInputUp||this.draggable&&this.isDragged&&this._draggedPointerID===e.id)||this.sprite.events.onInputUp$dispatch(this.sprite,e,i),this.sprite&&this.sprite.parent&&this.sprite.parent.type===U.GROUP&&this.sprite.parent.onChildInputUp.dispatch(this.sprite,e,i),i&&(i=this.checkPointerOver(e))),!(t.isOver=i)&&this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),e.dirty=!0,this._pendingDrag=!1,this.draggable&&this.isDragged&&this._draggedPointerID===e.id&&this.stopDrag(e)}}},updateDrag:function(e,t){if(void 0===t&&(t=!1),e.isUp)return this.stopDrag(e),!1;var i=this.globalToLocalX(e.x)+this._dragPoint.x+this.dragOffset.x,n=this.globalToLocalY(e.y)+this._dragPoint.y+this.dragOffset.y;if(this.sprite.fixedToCamera)this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=i),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=n),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.cameraOffset.x,this.sprite.cameraOffset.y));else{var r=this.game.camera.x-this._pointerData[e.id].camX,o=this.game.camera.y-this._pointerData[e.id].camY;this.allowHorizontalDrag&&(this.sprite.x=i+r),this.allowVerticalDrag&&(this.sprite.y=n+o),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY,this.snapPoint.set(this.sprite.x,this.sprite.y))}return this.sprite.events.onDragUpdate.dispatch(this.sprite,e,i,n,this.snapPoint,t),!0},justOver:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isOver&&this.overDuration(e)<t},justOut:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isOut&&this.game.time.time-this._pointerData[e].timeOut<t},justPressed:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isDown&&this.downDuration(e)<t},justReleased:function(e,t){return e=e||0,t=t||500,this._pointerData[e].isUp&&this.game.time.time-this._pointerData[e].timeUp<t},overDuration:function(e){return e=e||0,this._pointerData[e].isOver?this.game.time.time-this._pointerData[e].timeOver:-1},downDuration:function(e){return e=e||0,this._pointerData[e].isDown?this.game.time.time-this._pointerData[e].timeDown:-1},enableDrag:function(e,t,i,n,r,o){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=255),void 0===r&&(r=null),void 0===o&&(o=null),this._dragPoint=new U.Point,this.draggable=!0,this.bringToTop=t,this.dragOffset=new U.Point,this.dragFromCenter=e,this.pixelPerfectClick=i,this.pixelPerfectAlpha=n,r&&(this.boundsRect=r),o&&(this.boundsSprite=o)},disableDrag:function(){if(this._pointerData)for(var e=0;e<10;e++)this._pointerData[e].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1,this._pendingDrag=!1},startDrag:function(e){var t=this.sprite.x,i=this.sprite.y;if(this.isDragged=!0,this._draggedPointerID=e.id,this._pointerData[e.id].camX=this.game.camera.x,this._pointerData[e.id].camY=this.game.camera.y,this._pointerData[e.id].isDragged=!0,this.sprite.fixedToCamera){if(this.dragFromCenter){var n=this.sprite.getBounds();this.sprite.cameraOffset.x=this.globalToLocalX(e.x)+(this.sprite.cameraOffset.x-n.centerX),this.sprite.cameraOffset.y=this.globalToLocalY(e.y)+(this.sprite.cameraOffset.y-n.centerY)}this._dragPoint.setTo(this.sprite.cameraOffset.x-e.x,this.sprite.cameraOffset.y-e.y)}else{if(this.dragFromCenter){n=this.sprite.getBounds();this.sprite.x=this.globalToLocalX(e.x)+(this.sprite.x-n.centerX),this.sprite.y=this.globalToLocalY(e.y)+(this.sprite.y-n.centerY)}this._dragPoint.setTo(this.sprite.x-this.globalToLocalX(e.x),this.sprite.y-this.globalToLocalY(e.y))}this.updateDrag(e,!0),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.dragStartPoint.set(t,i),this.sprite.events.onDragStart$dispatch(this.sprite,e,t,i),this._pendingDrag=!1},globalToLocalX:function(e){return this.scaleLayer&&(e-=this.game.scale.grid.boundsFluid.x,e*=this.game.scale.grid.scaleFluidInversed.x),e},globalToLocalY:function(e){return this.scaleLayer&&(e-=this.game.scale.grid.boundsFluid.y,e*=this.game.scale.grid.scaleFluidInversed.y),e},stopDrag:function(e){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[e.id].isDragged=!1,this._dragPhase=!1,this._pendingDrag=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop$dispatch(this.sprite,e),!1===this.checkPointerOver(e)&&this._pointerOutHandler(e)},setDragLock:function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.allowHorizontalDrag=e,this.allowVerticalDrag=t},enableSnap:function(e,t,i,n,r,o){void 0===i&&(i=!0),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),this.snapX=e,this.snapY=t,this.snapOffsetX=r,this.snapOffsetY=o,this.snapOnDrag=i,this.snapOnRelease=n},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.left:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.left<this.boundsRect.left?this.sprite.x=this.boundsRect.x+this.sprite.offsetX:this.sprite.right>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsRect.top?this.sprite.y=this.boundsRect.top+this.sprite.offsetY:this.sprite.bottom>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-(this.sprite.height-this.sprite.offsetY)))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.cameraOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.cameraOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.cameraOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.cameraOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.cameraOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.cameraOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.left<this.boundsSprite.left?this.sprite.x=this.boundsSprite.left+this.sprite.offsetX:this.sprite.right>this.boundsSprite.right&&(this.sprite.x=this.boundsSprite.right-(this.sprite.width-this.sprite.offsetX)),this.sprite.top<this.boundsSprite.top?this.sprite.y=this.boundsSprite.top+this.sprite.offsetY:this.sprite.bottom>this.boundsSprite.bottom&&(this.sprite.y=this.boundsSprite.bottom-(this.sprite.height-this.sprite.offsetY)))}},U.InputHandler.prototype.constructor=U.InputHandler,U.Gamepad=function(e){this.game=e,this._gamepadIndexMap={},this._rawPads=[],this._active=!1,this.enabled=!0,this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||-1!==navigator.userAgent.indexOf("Firefox/")||!!navigator.getGamepads,this._prevRawGamepadTypes=[],this._prevTimestamps=[],(this.callbackContext=this).onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this._ongamepadconnected=null,this._gamepaddisconnected=null,this._gamepads=[new U.SinglePad(e,this),new U.SinglePad(e,this),new U.SinglePad(e,this),new U.SinglePad(e,this)]},U.Gamepad.prototype={addCallbacks:function(e,t){void 0!==t&&(this.onConnectCallback="function"==typeof t.onConnect?t.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof t.onDisconnect?t.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof t.onDown?t.onDown:this.onDownCallback,this.onUpCallback="function"==typeof t.onUp?t.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof t.onAxis?t.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof t.onFloat?t.onFloat:this.onFloatCallback,this.callbackContext=e)},start:function(){if(!this._active){this._active=!0;var t=this;this._onGamepadConnected=function(e){return t.onGamepadConnected(e)},this._onGamepadDisconnected=function(e){return t.onGamepadDisconnected(e)},window.addEventListener("gamepadconnected",this._onGamepadConnected,!1),window.addEventListener("gamepaddisconnected",this._onGamepadDisconnected,!1)}},onGamepadConnected:function(e){var t=e.gamepad;this._rawPads.push(t),this._gamepads[t.index].connect(t)},onGamepadDisconnected:function(e){var t=e.gamepad;for(var i in this._rawPads)this._rawPads[i].index===t.index&&this._rawPads.splice(i,1);this._gamepads[t.index].disconnect()},update:function(){this._pollGamepads(),this.pad1.pollStatus(),this.pad2.pollStatus(),this.pad3.pollStatus(),this.pad4.pollStatus()},_pollGamepads:function(){if(this._active){if(navigator.getGamepads)var e=navigator.getGamepads();else if(navigator.webkitGetGamepads)e=navigator.webkitGetGamepads();else if(navigator.webkitGamepads)e=navigator.webkitGamepads();if(e){for(var t=!(this._rawPads=[]),i=0;i<e.length&&(typeof e[i]!==this._prevRawGamepadTypes[i]&&(t=!0,this._prevRawGamepadTypes[i]=typeof e[i]),e[i]&&this._rawPads.push(e[i]),3!==i);i++);for(var n=0;n<this._gamepads.length;n++)this._gamepads[n]._rawPad=this._rawPads[n];if(t){for(var r,o={rawIndices:{},padIndices:{}},a=0;a<this._gamepads.length;a++)if((r=this._gamepads[a]).connected)for(var s=0;s<this._rawPads.length;s++)this._rawPads[s].index===r.index&&(o.rawIndices[r.index]=!0,o.padIndices[a]=!0);for(var l=0;l<this._gamepads.length;l++)if(r=this._gamepads[l],!o.padIndices[l]){this._rawPads.length<1&&r.disconnect();for(var p=0;p<this._rawPads.length&&!o.padIndices[l];p++){var h=this._rawPads[p];if(h){if(o.rawIndices[h.index]){r.disconnect();continue}r.connect(h),o.rawIndices[h.index]=!0,o.padIndices[l]=!0}else r.disconnect()}}}}}},setDeadZones:function(e){for(var t=0;t<this._gamepads.length;t++)this._gamepads[t].deadZone=e},stop:function(){this._active=!1,window.removeEventListener("gamepadconnected",this._onGamepadConnected),window.removeEventListener("gamepaddisconnected",this._onGamepadDisconnected)},reset:function(){this.update();for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].reset()},justPressed:function(e,t){for(var i=0;i<this._gamepads.length;i++)if(!0===this._gamepads[i].justPressed(e,t))return!0;return!1},justReleased:function(e,t){for(var i=0;i<this._gamepads.length;i++)if(!0===this._gamepads[i].justReleased(e,t))return!0;return!1},isDown:function(e){for(var t=0;t<this._gamepads.length;t++)if(!0===this._gamepads[t].isDown(e))return!0;return!1},destroy:function(){this.stop();for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].destroy()}},U.Gamepad.prototype.constructor=U.Gamepad,Object.defineProperty(U.Gamepad.prototype,"active",{get:function(){return this._active}}),Object.defineProperty(U.Gamepad.prototype,"supported",{get:function(){return this._gamepadSupportAvailable}}),Object.defineProperty(U.Gamepad.prototype,"padsConnected",{get:function(){return this._rawPads.length}}),Object.defineProperty(U.Gamepad.prototype,"pad1",{get:function(){return this._gamepads[0]}}),Object.defineProperty(U.Gamepad.prototype,"pad2",{get:function(){return this._gamepads[1]}}),Object.defineProperty(U.Gamepad.prototype,"pad3",{get:function(){return this._gamepads[2]}}),Object.defineProperty(U.Gamepad.prototype,"pad4",{get:function(){return this._gamepads[3]}}),U.Gamepad.BUTTON_0=0,U.Gamepad.BUTTON_1=1,U.Gamepad.BUTTON_2=2,U.Gamepad.BUTTON_3=3,U.Gamepad.BUTTON_4=4,U.Gamepad.BUTTON_5=5,U.Gamepad.BUTTON_6=6,U.Gamepad.BUTTON_7=7,U.Gamepad.BUTTON_8=8,U.Gamepad.BUTTON_9=9,U.Gamepad.BUTTON_10=10,U.Gamepad.BUTTON_11=11,U.Gamepad.BUTTON_12=12,U.Gamepad.BUTTON_13=13,U.Gamepad.BUTTON_14=14,U.Gamepad.BUTTON_15=15,U.Gamepad.AXIS_0=0,U.Gamepad.AXIS_1=1,U.Gamepad.AXIS_2=2,U.Gamepad.AXIS_3=3,U.Gamepad.AXIS_4=4,U.Gamepad.AXIS_5=5,U.Gamepad.AXIS_6=6,U.Gamepad.AXIS_7=7,U.Gamepad.AXIS_8=8,U.Gamepad.AXIS_9=9,U.Gamepad.XBOX360_A=0,U.Gamepad.XBOX360_B=1,U.Gamepad.XBOX360_X=2,U.Gamepad.XBOX360_Y=3,U.Gamepad.XBOX360_LEFT_BUMPER=4,U.Gamepad.XBOX360_RIGHT_BUMPER=5,U.Gamepad.XBOX360_LEFT_TRIGGER=6,U.Gamepad.XBOX360_RIGHT_TRIGGER=7,U.Gamepad.XBOX360_BACK=8,U.Gamepad.XBOX360_START=9,U.Gamepad.XBOX360_STICK_LEFT_BUTTON=10,U.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11,U.Gamepad.XBOX360_DPAD_LEFT=14,U.Gamepad.XBOX360_DPAD_RIGHT=15,U.Gamepad.XBOX360_DPAD_UP=12,U.Gamepad.XBOX360_DPAD_DOWN=13,U.Gamepad.XBOX360_STICK_LEFT_X=0,U.Gamepad.XBOX360_STICK_LEFT_Y=1,U.Gamepad.XBOX360_STICK_RIGHT_X=2,U.Gamepad.XBOX360_STICK_RIGHT_Y=3,U.Gamepad.PS3XC_X=0,U.Gamepad.PS3XC_CIRCLE=1,U.Gamepad.PS3XC_SQUARE=2,U.Gamepad.PS3XC_TRIANGLE=3,U.Gamepad.PS3XC_L1=4,U.Gamepad.PS3XC_R1=5,U.Gamepad.PS3XC_L2=6,U.Gamepad.PS3XC_R2=7,U.Gamepad.PS3XC_SELECT=8,U.Gamepad.PS3XC_START=9,U.Gamepad.PS3XC_STICK_LEFT_BUTTON=10,U.Gamepad.PS3XC_STICK_RIGHT_BUTTON=11,U.Gamepad.PS3XC_DPAD_UP=12,U.Gamepad.PS3XC_DPAD_DOWN=13,U.Gamepad.PS3XC_DPAD_LEFT=14,U.Gamepad.PS3XC_DPAD_RIGHT=15,U.Gamepad.PS3XC_STICK_LEFT_X=0,U.Gamepad.PS3XC_STICK_LEFT_Y=1,U.Gamepad.PS3XC_STICK_RIGHT_X=2,U.Gamepad.PS3XC_STICK_RIGHT_Y=3,U.SinglePad=function(e,t){this.game=e,this.index=null,this.connected=!1,(this.callbackContext=this).onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this.deadZone=.26,this._padParent=t,this._rawPad=null,this._prevTimestamp=null,this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0},U.SinglePad.prototype={addCallbacks:function(e,t){void 0!==t&&(this.onConnectCallback="function"==typeof t.onConnect?t.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof t.onDisconnect?t.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof t.onDown?t.onDown:this.onDownCallback,this.onUpCallback="function"==typeof t.onUp?t.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof t.onAxis?t.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof t.onFloat?t.onFloat:this.onFloatCallback,this.callbackContext=e)},getButton:function(e){return this._buttons[e]?this._buttons[e]:null},pollStatus:function(){if(this.connected&&this.game.input.enabled&&this.game.input.gamepad.enabled&&(!this._rawPad.timestamp||this._rawPad.timestamp!==this._prevTimestamp)){for(var e=0;e<this._buttonsLen;e++){var t=isNaN(this._rawPad.buttons[e])?this._rawPad.buttons[e].value:this._rawPad.buttons[e];t!==this._buttons[e].value&&(1===t?this.processButtonDown(e,t):0===t?this.processButtonUp(e,t):this.processButtonFloat(e,t))}for(var i=0;i<this._axesLen;i++){var n=this._rawPad.axes[i];0<n&&n>this.deadZone||n<0&&n<-this.deadZone?this.processAxisChange(i,n):this.processAxisChange(i,0)}this._prevTimestamp=this._rawPad.timestamp}},connect:function(e){var t=!this.connected;this.connected=!0,this.index=e.index,this._rawPad=e,this._buttons=[],this._buttonsLen=e.buttons.length,this._axes=[],this._axesLen=e.axes.length;for(var i=0;i<this._axesLen;i++)this._axes[i]=e.axes[i];for(var n in e.buttons)n=parseInt(n,10),this._buttons[n]=new U.DeviceButton(this,n);t&&this._padParent.onConnectCallback&&this._padParent.onConnectCallback.call(this._padParent.callbackContext,this.index),t&&this.onConnectCallback&&this.onConnectCallback.call(this.callbackContext)},disconnect:function(){var e=this.connected,t=this.index;this.connected=!1,this.index=null,this._rawPad=void 0;for(var i=0;i<this._buttonsLen;i++)this._buttons[i].destroy();this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0,e&&this._padParent.onDisconnectCallback&&this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,t),e&&this.onDisconnectCallback&&this.onDisconnectCallback.call(this.callbackContext)},destroy:function(){this._rawPad=void 0;for(var e=0;e<this._buttonsLen;e++)this._buttons[e].destroy();this._buttons=[],this._buttonsLen=0,this._axes=[],this._axesLen=0,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null},processAxisChange:function(e,t){this._axes[e]!==t&&(this._axes[e]=t,this._padParent.onAxisCallback&&this._padParent.onAxisCallback.call(this._padParent.callbackContext,this,e,t),this.onAxisCallback&&this.onAxisCallback.call(this.callbackContext,this,e,t))},processButtonDown:function(e,t){this._buttons[e]&&this._buttons[e].start(null,t),this._padParent.onDownCallback&&this._padParent.onDownCallback.call(this._padParent.callbackContext,e,t,this.index),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,e,t)},processButtonUp:function(e,t){this._padParent.onUpCallback&&this._padParent.onUpCallback.call(this._padParent.callbackContext,e,t,this.index),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,e,t),this._buttons[e]&&this._buttons[e].stop(null,t)},processButtonFloat:function(e,t){this._padParent.onFloatCallback&&this._padParent.onFloatCallback.call(this._padParent.callbackContext,e,t,this.index),this.onFloatCallback&&this.onFloatCallback.call(this.callbackContext,e,t),this._buttons[e]&&this._buttons[e].padFloat(t)},axis:function(e){return!!this._axes[e]&&this._axes[e]},isDown:function(e){return!!this._buttons[e]&&this._buttons[e].isDown},isUp:function(e){return!!this._buttons[e]&&this._buttons[e].isUp},justReleased:function(e,t){if(this._buttons[e])return this._buttons[e].justReleased(t)},justPressed:function(e,t){if(this._buttons[e])return this._buttons[e].justPressed(t)},buttonValue:function(e){return this._buttons[e]?this._buttons[e].value:null},reset:function(){for(var e=0;e<this._axes.length;e++)this._axes[e]=0}},U.SinglePad.prototype.constructor=U.SinglePad,U.Key=function(e,t){this.game=e,this._enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=t,this.onDown=new U.Signal,this.onHoldCallback=null,this.onHoldContext=null,this.onUp=new U.Signal,this._justDown=!1,this._justUp=!1},U.Key.prototype={update:function(){this._enabled&&this.isDown&&(this.duration=this.game.time.time-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(e){this._enabled&&(this.event=e,this.isDown||(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.time,this.duration=0,this.repeats=0,this._justDown=!0,this.onDown.dispatch(this)))},processKeyUp:function(e){this._enabled&&(this.event=e,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=this.game.time.time-this.timeDown,this._justUp=!0,this.onUp.dispatch(this)))},reset:function(e){void 0===e&&(e=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.time,this.duration=0,this._enabled=!0,this._justDown=!1,this._justUp=!1,e&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},downDuration:function(e){return void 0===e&&(e=50),this.isDown&&this.duration<e},upDuration:function(e){return void 0===e&&(e=50),!this.isDown&&this.game.time.time-this.timeUp<e}},Object.defineProperty(U.Key.prototype,"justDown",{get:function(){var e=this._justDown;return this._justDown=!1,e}}),Object.defineProperty(U.Key.prototype,"justUp",{get:function(){var e=this._justUp;return this._justUp=!1,e}}),Object.defineProperty(U.Key.prototype,"enabled",{get:function(){return this._enabled},set:function(e){(e=!!e)!==this._enabled&&(e||this.reset(!1),this._enabled=e)}}),U.Key.prototype.constructor=U.Key,U.Keyboard=function(e){this.game=e,this.enabled=!0,this.event=null,this.pressEvent=null,(this.callbackContext=this).onDownCallback=null,this.onPressCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyPress=null,this._onKeyUp=null,this._i=0,this._k=0},U.Keyboard.prototype={addCallbacks:function(e,t,i,n){this.callbackContext=e,null!=t&&(this.onDownCallback=t),null!=i&&(this.onUpCallback=i),null!=n&&(this.onPressCallback=n)},addKey:function(e){return this._keys[e]||(this._keys[e]=new U.Key(this.game,e),this.addKeyCapture(e)),this._keys[e]},addKeys:function(e){var t={};for(var i in e)t[i]=this.addKey(e[i]);return t},removeKey:function(e){this._keys[e]&&(this._keys[e]=null,this.removeKeyCapture(e))},createCursorKeys:function(){return this.addKeys({up:U.KeyCode.UP,down:U.KeyCode.DOWN,left:U.KeyCode.LEFT,right:U.KeyCode.RIGHT})},start:function(){if(!this.game.device.cocoonJS&&null===this._onKeyDown){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},this._onKeyPress=function(e){return t.processKeyPress(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1),window.addEventListener("keypress",this._onKeyPress,!1)}},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),window.removeEventListener("keypress",this._onKeyPress),this._onKeyDown=null,this._onKeyUp=null,this._onKeyPress=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(e){if("object"==typeof e)for(var t in e)this._capture[e[t]]=!0;else this._capture[e]=!0},removeKeyCapture:function(e){delete this._capture[e]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(e){if(this.event=e,this.game.input.enabled&&this.enabled){var t=e.keyCode;this._capture[t]&&e.preventDefault(),this._keys[t]||(this._keys[t]=new U.Key(this.game,t)),this._keys[t].processKeyDown(e),this._k=t,this.onDownCallback&&this.onDownCallback.call(this.callbackContext,e)}},processKeyPress:function(e){this.pressEvent=e,this.game.input.enabled&&this.enabled&&this.onPressCallback&&this.onPressCallback.call(this.callbackContext,String.fromCharCode(e.charCode),e)},processKeyUp:function(e){if(this.event=e,this.game.input.enabled&&this.enabled){var t=e.keyCode;this._capture[t]&&e.preventDefault(),this._keys[t]||(this._keys[t]=new U.Key(this.game,t)),this._keys[t].processKeyUp(e),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,e)}},reset:function(e){void 0===e&&(e=!0),this.event=null;for(var t=this._keys.length;t--;)this._keys[t]&&this._keys[t].reset(e)},downDuration:function(e,t){return this._keys[e]?this._keys[e].downDuration(t):null},upDuration:function(e,t){return this._keys[e]?this._keys[e].upDuration(t):null},isDown:function(e){return this._keys[e]?this._keys[e].isDown:null}},Object.defineProperty(U.Keyboard.prototype,"lastChar",{get:function(){return 32===this.event.charCode?"":String.fromCharCode(this.pressEvent.charCode)}}),Object.defineProperty(U.Keyboard.prototype,"lastKey",{get:function(){return this._keys[this._k]}}),U.Keyboard.prototype.constructor=U.Keyboard,U.KeyCode={A:"A".charCodeAt(0),B:"B".charCodeAt(0),C:"C".charCodeAt(0),D:"D".charCodeAt(0),E:"E".charCodeAt(0),F:"F".charCodeAt(0),G:"G".charCodeAt(0),H:"H".charCodeAt(0),I:"I".charCodeAt(0),J:"J".charCodeAt(0),K:"K".charCodeAt(0),L:"L".charCodeAt(0),M:"M".charCodeAt(0),N:"N".charCodeAt(0),O:"O".charCodeAt(0),P:"P".charCodeAt(0),Q:"Q".charCodeAt(0),R:"R".charCodeAt(0),S:"S".charCodeAt(0),T:"T".charCodeAt(0),U:"U".charCodeAt(0),V:"V".charCodeAt(0),W:"W".charCodeAt(0),X:"X".charCodeAt(0),Y:"Y".charCodeAt(0),Z:"Z".charCodeAt(0),ZERO:"0".charCodeAt(0),ONE:"1".charCodeAt(0),TWO:"2".charCodeAt(0),THREE:"3".charCodeAt(0),FOUR:"4".charCodeAt(0),FIVE:"5".charCodeAt(0),SIX:"6".charCodeAt(0),SEVEN:"7".charCodeAt(0),EIGHT:"8".charCodeAt(0),NINE:"9".charCodeAt(0),NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_ADD:107,NUMPAD_ENTER:108,NUMPAD_SUBTRACT:109,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,COLON:186,EQUALS:187,COMMA:188,UNDERSCORE:189,PERIOD:190,QUESTION_MARK:191,TILDE:192,OPEN_BRACKET:219,BACKWARD_SLASH:220,CLOSED_BRACKET:221,QUOTES:222,BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,CAPS_LOCK:20,ESC:27,SPACEBAR:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS:43,MINUS:44,INSERT:45,DELETE:46,HELP:47,NUM_LOCK:144},U.KeyCode)U.KeyCode.hasOwnProperty(i)&&!i.match(/[a-z]/)&&(U.Keyboard[i]=U.KeyCode[i]);for(var r in U.Component=function(){},U.Component.Angle=function(){},U.Component.Angle.prototype={angle:{get:function(){return U.Math.wrapAngle(U.Math.radToDeg(this.rotation))},set:function(e){this.rotation=U.Math.degToRad(U.Math.wrapAngle(e))}}},U.Component.Animation=function(){},U.Component.Animation.prototype={play:function(e,t,i,n){if(this.animations)return this.animations.play(e,t,i,n)}},U.Component.AutoCull=function(){},U.Component.AutoCull.prototype={autoCull:!1,inCamera:{get:function(){return this.autoCull||this.checkWorldBounds||(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y),this.game.world.camera.view.intersects(this._bounds)}}},U.Component.Bounds=function(){},U.Component.Bounds.prototype={offsetX:{get:function(){return this.anchor.x*this.width}},offsetY:{get:function(){return this.anchor.y*this.height}},centerX:{get:function(){return this.x-this.offsetX+.5*this.width},set:function(e){this.x=e+this.offsetX-.5*this.width}},centerY:{get:function(){return this.y-this.offsetY+.5*this.height},set:function(e){this.y=e+this.offsetY-.5*this.height}},left:{get:function(){return this.x-this.offsetX},set:function(e){this.x=e+this.offsetX}},right:{get:function(){return this.x+this.width-this.offsetX},set:function(e){this.x=e-this.width+this.offsetX}},top:{get:function(){return this.y-this.offsetY},set:function(e){this.y=e+this.offsetY}},bottom:{get:function(){return this.y+this.height-this.offsetY},set:function(e){this.y=e-this.height+this.offsetY}},alignIn:function(e,t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),t){default:case U.TOP_LEFT:this.left=e.left-i,this.top=e.top-n;break;case U.TOP_CENTER:this.centerX=e.centerX+i,this.top=e.top-n;break;case U.TOP_RIGHT:this.right=e.right+i,this.top=e.top-n;break;case U.LEFT_CENTER:this.left=e.left-i,this.centerY=e.centerY+n;break;case U.CENTER:this.centerX=e.centerX+i,this.centerY=e.centerY+n;break;case U.RIGHT_CENTER:this.right=e.right+i,this.centerY=e.centerY+n;break;case U.BOTTOM_LEFT:this.left=e.left-i,this.bottom=e.bottom+n;break;case U.BOTTOM_CENTER:this.centerX=e.centerX+i,this.bottom=e.bottom+n;break;case U.BOTTOM_RIGHT:this.right=e.right+i,this.bottom=e.bottom+n}return this},alignTo:function(e,t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),t){default:case U.TOP_LEFT:this.left=e.left-i,this.bottom=e.top-n;break;case U.TOP_CENTER:this.centerX=e.centerX+i,this.bottom=e.top-n;break;case U.TOP_RIGHT:this.right=e.right+i,this.bottom=e.top-n;break;case U.LEFT_TOP:this.right=e.left-i,this.top=e.top-n;break;case U.LEFT_CENTER:this.right=e.left-i,this.centerY=e.centerY+n;break;case U.LEFT_BOTTOM:this.right=e.left-i,this.bottom=e.bottom+n;break;case U.RIGHT_TOP:this.left=e.right+i,this.top=e.top-n;break;case U.RIGHT_CENTER:this.left=e.right+i,this.centerY=e.centerY+n;break;case U.RIGHT_BOTTOM:this.left=e.right+i,this.bottom=e.bottom+n;break;case U.BOTTOM_LEFT:this.left=e.left-i,this.top=e.bottom+n;break;case U.BOTTOM_CENTER:this.centerX=e.centerX+i,this.top=e.bottom+n;break;case U.BOTTOM_RIGHT:this.right=e.right+i,this.top=e.bottom+n}return this}},U.Group.prototype.alignIn=U.Component.Bounds.prototype.alignIn,U.Group.prototype.alignTo=U.Component.Bounds.prototype.alignTo,U.Component.BringToTop=function(){},U.Component.BringToTop.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},U.Component.BringToTop.prototype.sendToBack=function(){return this.parent&&this.parent.sendToBack(this),this},U.Component.BringToTop.prototype.moveUp=function(){return this.parent&&this.parent.moveUp(this),this},U.Component.BringToTop.prototype.moveDown=function(){return this.parent&&this.parent.moveDown(this),this},U.Component.Core=function(){},U.Component.Core.install=function(e){U.Utils.mixinPrototype(this,U.Component.Core.prototype),this.components={};for(var t=0;t<e.length;t++){var i=e[t],n=!1;"Destroy"===i&&(n=!0),U.Utils.mixinPrototype(this,U.Component[i].prototype,n),this.components[i]=!0}},U.Component.Core.init=function(e,t,i,n,r){this.game=e,this.key=n,this.data={},this.position.set(t,i),this.world=new U.Point(t,i),this.previousPosition=new U.Point(t,i),this.events=new U.Events(this),this._bounds=new U.Rectangle,this.components.PhysicsBody&&(this.body=this.body),this.components.Animation&&(this.animations=new U.AnimationManager(this)),this.components.LoadTexture&&null!==n&&this.loadTexture(n,r),this.components.FixedToCamera&&(this.cameraOffset=new U.Point(t,i))},U.Component.Core.preUpdate=function(){if(!this.pendingDestroy){if(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!this.exists||!this.parent.exists)return!(this.renderOrderID=-1);this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this.renderOrderID=this.game.stage.currentRenderOrderID++),this.animations&&this.animations.update(),this.body&&this.body.preUpdate();for(var e=0;e<this.children.length;e++)this.children[e].preUpdate();return!0}this.destroy()},U.Component.Core.prototype={game:null,name:"",data:{},components:{},z:0,events:void 0,animations:void 0,key:"",world:null,debug:!1,previousPosition:null,previousRotation:0,renderOrderID:0,fresh:!0,pendingDestroy:!1,_bounds:null,_exists:!0,exists:{get:function(){return this._exists},set:function(e){e?(this._exists=!0,this.body&&this.body.type===U.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._exists=!1,this.body&&this.body.type===U.Physics.P2JS&&this.body.removeFromWorld(),this.visible=!1)}},update:function(){},postUpdate:function(){this.customRender&&this.key.render(),this.components.PhysicsBody&&U.Component.PhysicsBody.postUpdate.call(this),this.components.FixedToCamera&&U.Component.FixedToCamera.postUpdate.call(this);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()}},U.Component.Crop=function(){},U.Component.Crop.prototype={cropRect:null,_crop:null,crop:function(e,t){void 0===t&&(t=!1),e?(t&&null!==this.cropRect?this.cropRect.setTo(e.x,e.y,e.width,e.height):t&&null===this.cropRect?this.cropRect=new U.Rectangle(e.x,e.y,e.width,e.height):this.cropRect=e,this.updateCrop()):(this._crop=null,this.cropRect=null,this.resetFrame())},updateCrop:function(){if(this.cropRect){var e=this.texture.crop.x,t=this.texture.crop.y,i=this.texture.crop.width,n=this.texture.crop.height;this._crop=U.Rectangle.clone(this.cropRect,this._crop),this._crop.x+=this._frame.x,this._crop.y+=this._frame.y;var r=Math.max(this._frame.x,this._crop.x),o=Math.max(this._frame.y,this._crop.y),a=Math.min(this._frame.right,this._crop.right)-r,s=Math.min(this._frame.bottom,this._crop.bottom)-o;this.texture.crop.x=r,this.texture.crop.y=o,this.texture.crop.width=a,this.texture.crop.height=s,this.texture.frame.width=Math.min(a,this.cropRect.width),this.texture.frame.height=Math.min(s,this.cropRect.height),this.texture.width=this.texture.frame.width,this.texture.height=this.texture.frame.height,this.texture._updateUvs(),16777215===this.tint||e===r&&t===o&&i===a&&n===s||(this.texture.requiresReTint=!0)}}},U.Component.Delta=function(){},U.Component.Delta.prototype={deltaX:{get:function(){return this.world.x-this.previousPosition.x}},deltaY:{get:function(){return this.world.y-this.previousPosition.y}},deltaZ:{get:function(){return this.rotation-this.previousRotation}}},U.Component.Destroy=function(){},U.Component.Destroy.prototype={destroyPhase:!1,destroy:function(e,t){if(null!==this.game&&!this.destroyPhase){void 0===e&&(e=!0),void 0===t&&(t=!1),this.destroyPhase=!0,this.events&&this.events.onDestroy$dispatch(this),this.parent&&(this.parent instanceof U.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.body&&this.body.destroy(),this.events&&this.events.destroy(),this.game.tweens.removeFrom(this);var i=this.children.length;if(e)for(;i--;)this.children[i].destroy(e);else for(;i--;)this.removeChild(this.children[i]);this._crop&&(this._crop=null,this.cropRect=null),this._frame&&(this._frame=null),U.Video&&this.key instanceof U.Video&&this.key.onChangeSource.remove(this.resizeFrame,this),U.BitmapText&&this._glyphs&&(this._glyphs=[]),this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this.data={},this.renderable=!1,this.transformCallback&&(this.transformCallback=null,this.transformCallbackContext=null),this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this.filterArea=null,this._bounds=null,this._currentBounds=null,this._mask=null,this._destroyCachedSprite(),t&&this.texture.destroy(!0),this.destroyPhase=!1,this.pendingDestroy=!1}}},U.Events=function(e){this.parent=e},U.Events.prototype={destroy:function(){this._parent=null,this._onDestroy&&this._onDestroy.dispose(),this._onAddedToGroup&&this._onAddedToGroup.dispose(),this._onRemovedFromGroup&&this._onRemovedFromGroup.dispose(),this._onRemovedFromWorld&&this._onRemovedFromWorld.dispose(),this._onKilled&&this._onKilled.dispose(),this._onRevived&&this._onRevived.dispose(),this._onEnterBounds&&this._onEnterBounds.dispose(),this._onOutOfBounds&&this._onOutOfBounds.dispose(),this._onInputOver&&this._onInputOver.dispose(),this._onInputOut&&this._onInputOut.dispose(),this._onInputDown&&this._onInputDown.dispose(),this._onInputUp&&this._onInputUp.dispose(),this._onDragStart&&this._onDragStart.dispose(),this._onDragUpdate&&this._onDragUpdate.dispose(),this._onDragStop&&this._onDragStop.dispose(),this._onAnimationStart&&this._onAnimationStart.dispose(),this._onAnimationComplete&&this._onAnimationComplete.dispose(),this._onAnimationLoop&&this._onAnimationLoop.dispose()},onAddedToGroup:null,onRemovedFromGroup:null,onRemovedFromWorld:null,onDestroy:null,onKilled:null,onRevived:null,onOutOfBounds:null,onEnterBounds:null,onInputOver:null,onInputOut:null,onInputDown:null,onInputUp:null,onDragStart:null,onDragUpdate:null,onDragStop:null,onAnimationStart:null,onAnimationComplete:null,onAnimationLoop:null},U.Events.prototype.constructor=U.Events,U.Events.prototype)U.Events.prototype.hasOwnProperty(r)&&0===r.indexOf("on")&&null===U.Events.prototype[r]&&function(e,t){"use strict";Object.defineProperty(U.Events.prototype,e,{get:function(){return this[t]||(this[t]=new U.Signal)}}),U.Events.prototype[e+"$dispatch"]=function(){return this[t]?this[t].dispatch.apply(this[t],arguments):null}}(r,"_"+r);U.Component.FixedToCamera=function(){},U.Component.FixedToCamera.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},U.Component.FixedToCamera.prototype={_fixedToCamera:!1,fixedToCamera:{get:function(){return this._fixedToCamera},set:function(e){e?(this._fixedToCamera=!0,this.cameraOffset.set(this.x,this.y)):this._fixedToCamera=!1}},cameraOffset:new U.Point},U.Component.Health=function(){},U.Component.Health.prototype={health:1,maxHealth:100,damage:function(e){return this.alive&&(this.health-=e,this.health<=0&&this.kill()),this},setHealth:function(e){return this.health=e,this.health>this.maxHealth&&(this.health=this.maxHealth),this},heal:function(e){return this.alive&&(this.health+=e,this.health>this.maxHealth&&(this.health=this.maxHealth)),this}},U.Component.InCamera=function(){},U.Component.InCamera.prototype={inCamera:{get:function(){return this.game.world.camera.view.intersects(this._bounds)}}},U.Component.InputEnabled=function(){},U.Component.InputEnabled.prototype={input:null,inputEnabled:{get:function(){return this.input&&this.input.enabled},set:function(e){e?null===this.input?(this.input=new U.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}},U.Component.InWorld=function(){},U.Component.InWorld.preUpdate=function(){if(this.autoCull||this.checkWorldBounds){if(this._bounds.copyFrom(this.getBounds()),this._bounds.x+=this.game.camera.view.x,this._bounds.y+=this.game.camera.view.y,this.autoCull)if(this.game.world.camera.view.intersects(this._bounds))this.renderable=!0,this.game.world.camera.totalInView++;else if(this.renderable=!1,this.outOfCameraBoundsKill)return this.kill(),!1;if(this.checkWorldBounds)if(this._outOfBoundsFired&&this.game.world.bounds.intersects(this._bounds))this._outOfBoundsFired=!1,this.events.onEnterBounds$dispatch(this);else if(!this._outOfBoundsFired&&!this.game.world.bounds.intersects(this._bounds)&&(this._outOfBoundsFired=!0,this.events.onOutOfBounds$dispatch(this),this.outOfBoundsKill))return this.kill(),!1}return!0},U.Component.InWorld.prototype={checkWorldBounds:!1,outOfBoundsKill:!1,outOfCameraBoundsKill:!1,_outOfBoundsFired:!1,inWorld:{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}},U.Component.LifeSpan=function(){},U.Component.LifeSpan.preUpdate=function(){return!(0<this.lifespan&&(this.lifespan-=this.game.time.physicsElapsedMS,this.lifespan<=0)&&(this.kill(),1))},U.Component.LifeSpan.prototype={alive:!0,lifespan:0,revive:function(e){return void 0===e&&(e=100),this.alive=!0,this.exists=!0,this.visible=!0,"function"==typeof this.setHealth&&this.setHealth(e),this.events&&this.events.onRevived$dispatch(this),this},kill:function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled$dispatch(this),this}},U.Component.LoadTexture=function(){},U.Component.LoadTexture.prototype={customRender:!1,_frame:null,loadTexture:function(e,t,i){e===U.PENDING_ATLAS?(e=t,t=0):t=t||0,(i||void 0===i)&&this.animations&&this.animations.stop(),this.key=e,this.customRender=!1;var n=this.game.cache,r=!0,o=!this.texture.baseTexture.scaleMode;if(U.RenderTexture&&e instanceof U.RenderTexture)this.key=e.key,this.setTexture(e);else if(U.BitmapData&&e instanceof U.BitmapData)this.customRender=!0,this.setTexture(e.texture),r=n.hasFrameData(e.key,U.Cache.BITMAPDATA)?!this.animations.loadFrameData(n.getFrameData(e.key,U.Cache.BITMAPDATA),t):!this.animations.loadFrameData(e.frameData,0);else if(U.Video&&e instanceof U.Video){this.customRender=!0;var a=e.texture.valid;this.setTexture(e.texture),this.setFrame(e.texture.frame.clone()),e.onChangeSource.add(this.resizeFrame,this),this.texture.valid=a}else if(U.Tilemap&&e instanceof U.TilemapLayer)this.setTexture(PIXI.Texture.fromCanvas(e.canvas));else if(e instanceof PIXI.Texture)this.setTexture(e);else{var s=n.getImage(e,!0);this.key=s.key,this.setTexture(new PIXI.Texture(s.base)),this.texture.baseTexture.skipRender="__default"===e,r=!this.animations.loadFrameData(s.frameData,t)}r&&(this._frame=U.Rectangle.clone(this.texture.frame)),o||(this.texture.baseTexture.scaleMode=1)},setFrame:function(e){this._frame=e,this.texture.frame.x=e.x,this.texture.frame.y=e.y,this.texture.frame.width=e.width,this.texture.frame.height=e.height,this.texture.crop.x=e.x,this.texture.crop.y=e.y,this.texture.crop.width=e.width,this.texture.crop.height=e.height,e.trimmed?(this.texture.trim?(this.texture.trim.x=e.spriteSourceSizeX,this.texture.trim.y=e.spriteSourceSizeY,this.texture.trim.width=e.sourceSizeW,this.texture.trim.height=e.sourceSizeH):this.texture.trim={x:e.spriteSourceSizeX,y:e.spriteSourceSizeY,width:e.sourceSizeW,height:e.sourceSizeH},this.texture.width=e.sourceSizeW,this.texture.height=e.sourceSizeH,this.texture.frame.width=e.sourceSizeW,this.texture.frame.height=e.sourceSizeH):!e.trimmed&&this.texture.trim&&(this.texture.trim=null),this.cropRect&&this.updateCrop(),this.texture.requiresReTint=!0,this.texture._updateUvs(),this.tilingTexture&&(this.refreshTexture=!0)},resizeFrame:function(e,t,i){this.texture.frame.resize(t,i),this.texture.setFrame(this.texture.frame)},resetFrame:function(){this._frame&&this.setFrame(this._frame)},frame:{get:function(){return this.animations.frame},set:function(e){this.animations.frame=e}},frameName:{get:function(){return this.animations.frameName},set:function(e){this.animations.frameName=e}}},U.Component.Overlap=function(){},U.Component.Overlap.prototype={overlap:function(e){return U.Rectangle.intersects(this.getBounds(),e.getBounds())}},U.Component.PhysicsBody=function(){},U.Component.PhysicsBody.preUpdate=function(){return this.fresh&&this.exists?(this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,this.body&&this.body.preUpdate(),this.fresh=!1):(this.previousPosition.set(this.world.x,this.world.y),this.previousRotation=this.rotation,!(!this._exists||!this.parent.exists)||!(this.renderOrderID=-1))},U.Component.PhysicsBody.postUpdate=function(){this.exists&&this.body&&this.body.postUpdate()},U.Component.PhysicsBody.prototype={body:null,x:{get:function(){return this.position.x},set:function(e){this.position.x=e,this.body&&!this.body.dirty&&(this.body._reset=!0)}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e,this.body&&!this.body.dirty&&(this.body._reset=!0)}}},U.Component.Reset=function(){},U.Component.Reset.prototype.reset=function(e,t,i){return void 0===i&&(i=1),this.world.set(e,t),this.position.set(e,t),this.fresh=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this.components.InWorld&&(this._outOfBoundsFired=!1),this.components.LifeSpan&&(this.alive=!0,this.health=i),this.components.PhysicsBody&&this.body&&this.body.reset(e,t,!1,!1),this},U.Component.ScaleMinMax=function(){},U.Component.ScaleMinMax.prototype={transformCallback:null,transformCallbackContext:this,scaleMin:null,scaleMax:null,checkTransform:function(e){this.scaleMin&&(e.a<this.scaleMin.x&&(e.a=this.scaleMin.x),e.d<this.scaleMin.y&&(e.d=this.scaleMin.y)),this.scaleMax&&(e.a>this.scaleMax.x&&(e.a=this.scaleMax.x),e.d>this.scaleMax.y&&(e.d=this.scaleMax.y))},setScaleMinMax:function(e,t,i,n){void 0===t?t=i=n=e:void 0===i&&(i=n=t,t=e),null===e?this.scaleMin=null:this.scaleMin?this.scaleMin.set(e,t):this.scaleMin=new U.Point(e,t),null===i?this.scaleMax=null:this.scaleMax?this.scaleMax.set(i,n):this.scaleMax=new U.Point(i,n),null===this.scaleMin?this.transformCallback=null:(this.transformCallback=this.checkTransform,this.transformCallbackContext=this)}},U.Component.Smoothed=function(){},U.Component.Smoothed.prototype={smoothed:{get:function(){return!this.texture.baseTexture.scaleMode},set:function(e){e?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}},U.GameObjectFactory=function(e){this.game=e,this.world=this.game.world},U.GameObjectFactory.prototype={existing:function(e){return this.world.add(e)},weapon:function(e,t,i,n){var r=this.game.plugins.add(U.Weapon);return r.createBullets(e,t,i,n),r},image:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.add(new U.Image(this.game,e,t,i,n))},sprite:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.create(e,t,i,n)},creature:function(e,t,i,n,r){void 0===r&&(r=this.world);var o=new U.Creature(this.game,e,t,i,n);return r.add(o),o},tween:function(e){return this.game.tweens.create(e)},group:function(e,t,i,n,r){return new U.Group(this.game,e,t,i,n,r)},physicsGroup:function(e,t,i,n){return new U.Group(this.game,t,i,n,!0,e)},spriteBatch:function(e,t,i){return void 0===e&&(e=null),void 0===t&&(t="group"),void 0===i&&(i=!1),new U.SpriteBatch(this.game,e,t,i)},audio:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},sound:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},audioSprite:function(e){return this.game.sound.addSprite(e)},tileSprite:function(e,t,i,n,r,o,a){return void 0===a&&(a=this.world),a.add(new U.TileSprite(this.game,e,t,i,n,r,o))},rope:function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new U.Rope(this.game,e,t,i,n,r))},text:function(e,t,i,n,r){return void 0===r&&(r=this.world),r.add(new U.Text(this.game,e,t,i,n))},button:function(e,t,i,n,r,o,a,s,l,p){return void 0===p&&(p=this.world),p.add(new U.Button(this.game,e,t,i,n,r,o,a,s,l))},graphics:function(e,t,i){return void 0===i&&(i=this.world),i.add(new U.Graphics(this.game,e,t))},emitter:function(e,t,i){return this.game.particles.add(new U.Particles.Arcade.Emitter(this.game,e,t,i))},retroFont:function(e,t,i,n,r,o,a,s,l){return new U.RetroFont(this.game,e,t,i,n,r,o,a,s,l)},bitmapText:function(e,t,i,n,r,o){return void 0===o&&(o=this.world),o.add(new U.BitmapText(this.game,e,t,i,n,r))},tilemap:function(e,t,i,n,r){return new U.Tilemap(this.game,e,t,i,n,r)},renderTexture:function(e,t,i,n){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===n&&(n=!1);var r=new U.RenderTexture(this.game,e,t,i);return n&&this.game.cache.addRenderTexture(i,r),r},video:function(e,t){return new U.Video(this.game,e,t)},bitmapData:function(e,t,i,n){void 0===n&&(n=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var r=new U.BitmapData(this.game,i,e,t);return n&&this.game.cache.addBitmapData(i,r),r},filter:function(e){var t=Array.prototype.slice.call(arguments,1);return(e=new U.Filter[e](this.game)).init.apply(e,t),e},plugin:function(e){return this.game.plugins.add(e)}},U.GameObjectFactory.prototype.constructor=U.GameObjectFactory,U.GameObjectCreator=function(e){this.game=e,this.world=this.game.world},U.GameObjectCreator.prototype={image:function(e,t,i,n){return new U.Image(this.game,e,t,i,n)},sprite:function(e,t,i,n){return new U.Sprite(this.game,e,t,i,n)},tween:function(e){return new U.Tween(e,this.game,this.game.tweens)},group:function(e,t,i,n,r){return new U.Group(this.game,e,t,i,n,r)},spriteBatch:function(e,t,i){return void 0===t&&(t="group"),void 0===i&&(i=!1),new U.SpriteBatch(this.game,e,t,i)},audio:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},audioSprite:function(e){return this.game.sound.addSprite(e)},sound:function(e,t,i,n){return this.game.sound.add(e,t,i,n)},tileSprite:function(e,t,i,n,r,o){return new U.TileSprite(this.game,e,t,i,n,r,o)},rope:function(e,t,i,n,r){return new U.Rope(this.game,e,t,i,n,r)},text:function(e,t,i,n){return new U.Text(this.game,e,t,i,n)},button:function(e,t,i,n,r,o,a,s,l){return new U.Button(this.game,e,t,i,n,r,o,a,s,l)},graphics:function(e,t){return new U.Graphics(this.game,e,t)},emitter:function(e,t,i){return new U.Particles.Arcade.Emitter(this.game,e,t,i)},retroFont:function(e,t,i,n,r,o,a,s,l){return new U.RetroFont(this.game,e,t,i,n,r,o,a,s,l)},bitmapText:function(e,t,i,n,r,o){return new U.BitmapText(this.game,e,t,i,n,r,o)},tilemap:function(e,t,i,n,r){return new U.Tilemap(this.game,e,t,i,n,r)},renderTexture:function(e,t,i,n){void 0!==i&&""!==i||(i=this.game.rnd.uuid()),void 0===n&&(n=!1);var r=new U.RenderTexture(this.game,e,t,i);return n&&this.game.cache.addRenderTexture(i,r),r},bitmapData:function(e,t,i,n){void 0===n&&(n=!1),void 0!==i&&""!==i||(i=this.game.rnd.uuid());var r=new U.BitmapData(this.game,i,e,t);return n&&this.game.cache.addBitmapData(i,r),r},filter:function(e){var t=Array.prototype.slice.call(arguments,1);return(e=new U.Filter[e](this.game)).init.apply(e,t),e}},U.GameObjectCreator.prototype.constructor=U.GameObjectCreator,U.Sprite=function(e,t,i,n,r){t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.SPRITE,this.physicsType=U.SPRITE,PIXI.Sprite.call(this,U.Cache.DEFAULT),U.Component.Core.init.call(this,e,t,i,n,r)},U.Sprite.prototype=Object.create(PIXI.Sprite.prototype),U.Sprite.prototype.constructor=U.Sprite,U.Component.Core.install.call(U.Sprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),U.Sprite.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Sprite.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Sprite.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Sprite.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Sprite.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Image=function(e,t,i,n,r){t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.IMAGE,PIXI.Sprite.call(this,U.Cache.DEFAULT),U.Component.Core.init.call(this,e,t,i,n,r)},U.Image.prototype=Object.create(PIXI.Sprite.prototype),U.Image.prototype.constructor=U.Image,U.Component.Core.install.call(U.Image.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Destroy","FixedToCamera","InputEnabled","LifeSpan","LoadTexture","Overlap","Reset","ScaleMinMax","Smoothed"]),U.Image.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Image.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Image.prototype.preUpdate=function(){return!!this.preUpdateInWorld()&&this.preUpdateCore()},U.Button=function(e,t,i,n,r,o,a,s,l,p){t=t||0,i=i||0,n=n||null,r=r||null,o=o||this,U.Image.call(this,e,t,i,n,s),this.type=U.BUTTON,this.physicsType=U.SPRITE,this._onOverFrame=null,this._onOutFrame=null,this._onDownFrame=null,this._onUpFrame=null,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new U.Signal,this.onInputOut=new U.Signal,this.onInputDown=new U.Signal,this.onInputUp=new U.Signal,this.onOverMouseOnly=!0,this.justReleasedPreventsOver=U.PointerMode.TOUCH,this.freezeFrames=!1,this.forceOut=!1,this.inputEnabled=!0,this.input.start(0,!0),this.input.useHandCursor=!0,this.setFrames(a,s,l,p),null!==r&&this.onInputUp.add(r,o),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this),this.events.onRemovedFromWorld.add(this.removedFromWorld,this)},U.Button.prototype=Object.create(U.Image.prototype),U.Button.prototype.constructor=U.Button;var l="Over",p="Out",h="Down",u="Up";U.Button.prototype.clearFrames=function(){this.setFrames(null,null,null,null)},U.Button.prototype.removedFromWorld=function(){this.inputEnabled=!1},U.Button.prototype.setStateFrame=function(e,t,i){var n="_on"+e+"Frame";null!==t?(this[n]=t,i&&this.changeStateFrame(e)):this[n]=null},U.Button.prototype.changeStateFrame=function(e){if(this.freezeFrames)return!1;var t=this["_on"+e+"Frame"];return"string"==typeof t?(this.frameName=t,!0):"number"==typeof t&&(this.frame=t,!0)},U.Button.prototype.setFrames=function(e,t,i,n){this.setStateFrame(l,e,this.input.pointerOver()),this.setStateFrame(p,t,!this.input.pointerOver()),this.setStateFrame(h,i,this.input.pointerDown()),this.setStateFrame(u,n,this.input.pointerUp())},U.Button.prototype.setStateSound=function(e,t,i){var n="on"+e+"Sound",r="on"+e+"SoundMarker";t instanceof U.Sound||t instanceof U.AudioSprite?(this[n]=t,this[r]="string"==typeof i?i:""):(this[n]=null,this[r]="")},U.Button.prototype.playStateSound=function(e){var t=this["on"+e+"Sound"];if(t){var i=this["on"+e+"SoundMarker"];return t.play(i),!0}return!1},U.Button.prototype.setSounds=function(e,t,i,n,r,o,a,s){this.setStateSound(l,e,t),this.setStateSound(p,r,o),this.setStateSound(h,i,n),this.setStateSound(u,a,s)},U.Button.prototype.setOverSound=function(e,t){this.setStateSound(l,e,t)},U.Button.prototype.setOutSound=function(e,t){this.setStateSound(p,e,t)},U.Button.prototype.setDownSound=function(e,t){this.setStateSound(h,e,t)},U.Button.prototype.setUpSound=function(e,t){this.setStateSound(u,e,t)},U.Button.prototype.onInputOverHandler=function(e,t){t.justReleased()&&(this.justReleasedPreventsOver&t.pointerMode)===t.pointerMode||(this.changeStateFrame(l),this.onOverMouseOnly&&!t.isMouse||(this.playStateSound(l),this.onInputOver&&this.onInputOver.dispatch(this,t)))},U.Button.prototype.onInputOutHandler=function(e,t){this.changeStateFrame(p),this.playStateSound(p),this.onInputOut&&this.onInputOut.dispatch(this,t)},U.Button.prototype.onInputDownHandler=function(e,t){this.changeStateFrame(h),this.playStateSound(h),this.onInputDown&&this.onInputDown.dispatch(this,t)},U.Button.prototype.onInputUpHandler=function(e,t,i){if(this.playStateSound(u),this.onInputUp&&this.onInputUp.dispatch(this,t,i),!this.freezeFrames)if(!0===this.forceOut||(this.forceOut&t.pointerMode)===t.pointerMode)this.changeStateFrame(p);else{this.changeStateFrame(u)||(i?this.changeStateFrame(l):this.changeStateFrame(p))}},U.SpriteBatch=function(e,t,i,n){null!=t||(t=e.world),PIXI.SpriteBatch.call(this),U.Group.call(this,e,t,i,n),this.type=U.SPRITEBATCH},U.SpriteBatch.prototype=U.Utils.extend(!0,U.SpriteBatch.prototype,PIXI.SpriteBatch.prototype,U.Group.prototype),U.SpriteBatch.prototype.constructor=U.SpriteBatch,U.BitmapData=function(e,t,i,n,r){void 0!==i&&0!==i||(i=256),void 0!==n&&0!==n||(n=256),void 0===r&&(r=!1),this.game=e,this.key=t,this.width=i,this.height=n,this.canvas=U.Canvas.create(this,i,n,null,r),this.context=this.canvas.getContext("2d",{alpha:!0}),this.ctx=this.context,this.smoothProperty=e.renderType===U.CANVAS?e.renderer.renderSession.smoothProperty:U.Canvas.getSmoothingPrefix(this.context),this.imageData=this.context.getImageData(0,0,i,n),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.frameData=new U.FrameData,this.textureFrame=this.frameData.addFrame(new U.Frame(0,0,0,i,n,"bitmapData")),this.texture.frame=this.textureFrame,this.type=U.BITMAPDATA,this.disableTextureUpload=!1,this.dirty=!1,this.cls=this.clear,this._image=null,this._pos=new U.Point,this._size=new U.Point,this._scale=new U.Point,this._rotate=0,this._alpha={prev:1,current:1},this._anchor=new U.Point,this._tempR=0,this._tempG=0,this._tempB=0,this._circle=new U.Circle,this._swapCanvas=void 0},U.BitmapData.prototype={move:function(e,t,i){return 0!==e&&this.moveH(e,i),0!==t&&this.moveV(t,i),this},moveH:function(e,t){void 0===t&&(t=!0),void 0===this._swapCanvas&&(this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),n=this.height,r=this.canvas;if(i.clearRect(0,0,this.width,this.height),e<0){e=Math.abs(e);var o=this.width-e;t&&i.drawImage(r,0,0,e,n,o,0,e,n),i.drawImage(r,e,0,o,n,0,0,o,n)}else{o=this.width-e;t&&i.drawImage(r,o,0,e,n,0,0,e,n),i.drawImage(r,0,0,o,n,e,0,o,n)}return this.clear(),this.copy(this._swapCanvas)},moveV:function(e,t){void 0===t&&(t=!0),void 0===this._swapCanvas&&(this._swapCanvas=PIXI.CanvasPool.create(this,this.width,this.height));var i=this._swapCanvas.getContext("2d"),n=this.width,r=this.canvas;if(i.clearRect(0,0,this.width,this.height),e<0){e=Math.abs(e);var o=this.height-e;t&&i.drawImage(r,0,0,n,e,0,o,n,e),i.drawImage(r,0,e,n,o,0,0,n,o)}else{o=this.height-e;t&&i.drawImage(r,0,o,n,e,0,0,n,e),i.drawImage(r,0,0,n,o,0,e,n,o)}return this.clear(),this.copy(this._swapCanvas)},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].loadTexture&&e[t].loadTexture(this);else e.loadTexture(this);return this},load:function(e){if("string"==typeof e&&(e=this.game.cache.getImage(e)),e)return this.resize(e.width,e.height),this.cls(),this.draw(e),this.update(),this},clear:function(e,t,i,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.width),void 0===n&&(n=this.height),this.context.clearRect(e,t,i,n),this.dirty=!0,this},fill:function(e,t,i,n){return void 0===n&&(n=1),this.context.fillStyle="rgba("+e+","+t+","+i+","+n+")",this.context.fillRect(0,0,this.width,this.height),this.dirty=!0,this},generateTexture:function(e){var t=new Image;t.src=this.canvas.toDataURL("image/png");var i=this.game.cache.addImage(e,"",t);return new PIXI.Texture(i.base)},resize:function(e,t){return e===this.width&&t===this.height||(this.width=e,this.height=t,this.canvas.width=e,this.canvas.height=t,void 0!==this._swapCanvas&&(this._swapCanvas.width=e,this._swapCanvas.height=t),this.baseTexture.width=e,this.baseTexture.height=t,this.textureFrame.width=e,this.textureFrame.height=t,this.texture.width=e,this.texture.height=t,this.texture.crop.width=e,this.texture.crop.height=t,this.update(),this.dirty=!0),this},update:function(e,t,i,n){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=Math.max(1,this.width)),void 0===n&&(n=Math.max(1,this.height)),this.imageData=this.context.getImageData(e,t,i,n),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this},processPixelRGB:function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height);for(var a=i+r,s=n+o,l=U.Color.createColor(),p={r:0,g:0,b:0,a:0},h=!1,u=n;u<s;u++)for(var c=i;c<a;c++)U.Color.unpackPixel(this.getPixel32(c,u),l),!1!==(p=e.call(t,l,c,u))&&null!=p&&(this.setPixel32(c,u,p.r,p.g,p.b,p.a,!1),h=!0);return h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},processPixel:function(e,t,i,n,r,o){void 0===i&&(i=0),void 0===n&&(n=0),void 0===r&&(r=this.width),void 0===o&&(o=this.height);for(var a=i+r,s=n+o,l=0,p=0,h=!1,u=n;u<s;u++)for(var c=i;c<a;c++)l=this.getPixel32(c,u),(p=e.call(t,l,c,u))!==l&&(this.pixels[u*this.width+c]=p,h=!0);return h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0),this},replaceRGB:function(e,t,i,n,r,o,a,s,l){var p=0,h=0,u=this.width,c=this.height,d=U.Color.packPixel(e,t,i,n);void 0!==l&&l instanceof U.Rectangle&&(p=l.x,h=l.y,u=l.width,c=l.height);for(var _=0;_<c;_++)for(var y=0;y<u;y++)this.getPixel32(p+y,h+_)===d&&this.setPixel32(p+y,h+_,r,o,a,s,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this},setHSL:function(e,t,i,n){var r=e||0===e,o=t||0===t,a=i||0===i;if(r||o||a){void 0===n&&(n=new U.Rectangle(0,0,this.width,this.height));for(var s=U.Color.createColor(),l=n.y;l<n.bottom;l++)for(var p=n.x;p<n.right;p++)U.Color.unpackPixel(this.getPixel32(p,l),s,!0),r&&(s.h=e),o&&(s.s=t),a&&(s.l=i),U.Color.HSLtoRGB(s.h,s.s,s.l,s),this.setPixel32(p,l,s.r,s.g,s.b,s.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},shiftHSL:function(e,t,i,n){if(null!=e||(e=!1),null!=t||(t=!1),null!=i||(i=!1),e||t||i){void 0===n&&(n=new U.Rectangle(0,0,this.width,this.height));for(var r=U.Color.createColor(),o=n.y;o<n.bottom;o++)for(var a=n.x;a<n.right;a++)U.Color.unpackPixel(this.getPixel32(a,o),r,!0),e&&(r.h=this.game.math.wrap(r.h+e,0,1)),t&&(r.s=this.game.math.clamp(r.s+t,0,1)),i&&(r.l=this.game.math.clamp(r.l+i,0,1)),U.Color.HSLtoRGB(r.h,r.s,r.l,r),this.setPixel32(a,o,r.r,r.g,r.b,r.a,!1);return this.context.putImageData(this.imageData,0,0),this.dirty=!0,this}},setPixel32:function(e,t,i,n,r,o,a){return void 0===a&&(a=!0),0<=e&&e<=this.width&&0<=t&&t<=this.height&&(U.Device.LITTLE_ENDIAN?this.pixels[t*this.width+e]=o<<24|r<<16|n<<8|i:this.pixels[t*this.width+e]=i<<24|n<<16|r<<8|o,a&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)),this},setPixel:function(e,t,i,n,r,o){return this.setPixel32(e,t,i,n,r,255,o)},getPixel:function(e,t,i){i||(i=U.Color.createColor());var n=~~(e+t*this.width);return n*=4,i.r=this.data[n],i.g=this.data[++n],i.b=this.data[++n],i.a=this.data[++n],i},getPixel32:function(e,t){if(0<=e&&e<=this.width&&0<=t&&t<=this.height)return this.pixels[t*this.width+e]},getPixelRGB:function(e,t,i,n,r){return U.Color.unpackPixel(this.getPixel32(e,t),i,n,r)},getPixels:function(e){return this.context.getImageData(e.x,e.y,e.width,e.height)},getFirstPixel:function(e){void 0===e&&(e=0);var t=U.Color.createColor(),i=0,n=0,r=1,o=!1;for(1===e?(r=-1,n=this.height):3===e&&(r=-1,i=this.width);U.Color.unpackPixel(this.getPixel32(i,n),t),0===e||1===e?++i===this.width&&(i=0,((n+=r)>=this.height||n<=0)&&(o=!0)):2!==e&&3!==e||++n===this.height&&(n=0,((i+=r)>=this.width||i<=0)&&(o=!0)),0===t.a&&!o;);return t.x=i,t.y=n,t},getBounds:function(e){return void 0===e&&(e=new U.Rectangle),e.x=this.getFirstPixel(2).x,e.x===this.width?e.setTo(0,0,0,0):(e.y=this.getFirstPixel(0).y,e.width=this.getFirstPixel(3).x-e.x+1,e.height=this.getFirstPixel(1).y-e.y+1,e)},addToWorld:function(e,t,i,n,r,o){r=r||1,o=o||1;var a=this.game.add.image(e,t,this);return a.anchor.set(i,n),a.scale.set(r,o),a},copy:function(e,t,i,n,r,o,a,s,l,p,h,u,c,d,_,y,m){if(null!=e||(e=this),(e instanceof U.RenderTexture||e instanceof PIXI.RenderTexture)&&(e=e.getCanvas()),(this._image=e)instanceof U.Sprite||e instanceof U.Image||e instanceof U.Text||e instanceof PIXI.Sprite)this._pos.set(e.texture.crop.x,e.texture.crop.y),this._size.set(e.texture.crop.width,e.texture.crop.height),this._scale.set(e.scale.x,e.scale.y),this._anchor.set(e.anchor.x,e.anchor.y),this._rotate=e.rotation,this._alpha.current=e.alpha,e.texture instanceof U.RenderTexture||e.texture instanceof PIXI.RenderTexture?this._image=e.texture.getCanvas():this._image=e.texture.baseTexture.source,null!=o||(o=e.x),null!=a||(a=e.y),e.texture.trim&&(o+=e.texture.trim.x-e.anchor.x*e.texture.trim.width,a+=e.texture.trim.y-e.anchor.y*e.texture.trim.height),16777215!==e.tint&&(e.cachedTint!==e.tint&&(e.cachedTint=e.tint,e.tintedTexture=PIXI.CanvasTinter.getTintedTexture(e,e.tint)),this._image=e.tintedTexture,this._pos.set(0));else{if(this._pos.set(0),this._scale.set(1),this._anchor.set(0),this._rotate=0,this._alpha.current=1,e instanceof U.BitmapData)this._image=e.canvas;else if("string"==typeof e){if(null===(e=this.game.cache.getImage(e)))return;this._image=e}this._size.set(this._image.width,this._image.height)}if(null!=t||(t=0),null!=i||(i=0),n&&(this._size.x=n),r&&(this._size.y=r),null!=o||(o=t),null!=a||(a=i),null!=s||(s=this._size.x),null!=l||(l=this._size.y),"number"==typeof p&&(this._rotate=p),"number"==typeof h&&(this._anchor.x=h),"number"==typeof u&&(this._anchor.y=u),"number"==typeof c&&(this._scale.x=c),"number"==typeof d&&(this._scale.y=d),"number"==typeof _&&(this._alpha.current=_),void 0===y&&(y=null),void 0===m&&(m=!1),!(this._alpha.current<=0||0===this._scale.x||0===this._scale.y||0===this._size.x||0===this._size.y)){var f=this.context;return this._alpha.prev=f.globalAlpha,f.save(),f.globalAlpha=this._alpha.current,y&&(this.op=y),m&&(o|=0,a|=0),f.translate(o,a),f.scale(this._scale.x,this._scale.y),f.rotate(this._rotate),f.drawImage(this._image,this._pos.x+t,this._pos.y+i,this._size.x,this._size.y,-s*this._anchor.x,-l*this._anchor.y,s,l),f.restore(),f.globalAlpha=this._alpha.prev,this.dirty=!0,this}},copyTransform:function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!1),!e.hasOwnProperty("worldTransform")||!e.worldVisible||0===e.worldAlpha)return this;var n=e.worldTransform;if(this._pos.set(e.texture.crop.x,e.texture.crop.y),this._size.set(e.texture.crop.width,e.texture.crop.height),0===n.a||0===n.d||0===this._size.x||0===this._size.y)return this;e.texture instanceof U.RenderTexture||e.texture instanceof PIXI.RenderTexture?this._image=e.texture.getCanvas():this._image=e.texture.baseTexture.source;var r=n.tx,o=n.ty;e.texture.trim&&(r+=e.texture.trim.x-e.anchor.x*e.texture.trim.width,o+=e.texture.trim.y-e.anchor.y*e.texture.trim.height),16777215!==e.tint&&(e.cachedTint!==e.tint&&(e.cachedTint=e.tint,e.tintedTexture=PIXI.CanvasTinter.getTintedTexture(e,e.tint)),this._image=e.tintedTexture,this._pos.set(0)),i&&(r|=0,o|=0);var a=this.context;return this._alpha.prev=a.globalAlpha,a.save(),a.globalAlpha=this._alpha.current,t&&(this.op=t),a[this.smoothProperty]=e.texture.baseTexture.scaleMode===PIXI.scaleModes.LINEAR,a.setTransform(n.a,n.b,n.c,n.d,r,o),a.drawImage(this._image,this._pos.x,this._pos.y,this._size.x,this._size.y,-this._size.x*e.anchor.x,-this._size.y*e.anchor.y,this._size.x,this._size.y),a.restore(),a.globalAlpha=this._alpha.prev,this.dirty=!0,this},copyRect:function(e,t,i,n,r,o,a){return this.copy(e,t.x,t.y,t.width,t.height,i,n,t.width,t.height,0,0,0,1,1,r,o,a)},draw:function(e,t,i,n,r,o,a){return this.copy(e,null,null,null,null,t,i,n,r,null,null,null,null,null,null,o,a)},drawGroup:function(e,t,i){return 0<e.total&&e.forEachExists(this.drawGroupProxy,this,t,i),this},drawGroupProxy:function(e,t,i){if(e.hasOwnProperty("texture")&&this.copyTransform(e,t,i),e.type===U.GROUP&&e.exists)this.drawGroup(e,t,i);else if(e.hasOwnProperty("children")&&0<e.children.length)for(var n=0;n<e.children.length;n++)e.children[n].exists&&this.copyTransform(e.children[n],t,i)},drawFull:function(e,t,i){if(!1===e.worldVisible||0===e.worldAlpha||e.hasOwnProperty("exists")&&!1===e.exists)return this;if(e.type!==U.GROUP&&e.type!==U.EMITTER&&e.type!==U.BITMAPTEXT)if(e.type===U.GRAPHICS){var n=e.getBounds();this.ctx.save(),this.ctx.translate(n.x,n.y),PIXI.CanvasGraphics.renderGraphics(e,this.ctx),this.ctx.restore()}else this.copy(e,null,null,null,null,e.worldPosition.x,e.worldPosition.y,null,null,e.worldRotation,null,null,e.worldScale.x,e.worldScale.y,e.worldAlpha,t,i);if(e.children)for(var r=0;r<e.children.length;r++)this.drawFull(e.children[r],t,i);return this},shadow:function(e,t,i,n){var r=this.context;return null==e?r.shadowColor="rgba(0,0,0,0)":(r.shadowColor=e,r.shadowBlur=t||5,r.shadowOffsetX=i||10,r.shadowOffsetY=n||10),this},alphaMask:function(e,t,i,n){return null==n?this.draw(t).blendSourceAtop():this.draw(t,n.x,n.y,n.width,n.height).blendSourceAtop(),null==i?this.draw(e).blendReset():this.draw(e,i.x,i.y,i.width,i.height).blendReset(),this},extract:function(n,r,o,a,s,e,l,p,h){return void 0===s&&(s=255),void 0===e&&(e=!1),void 0===l&&(l=r),void 0===p&&(p=o),void 0===h&&(h=a),e&&n.resize(this.width,this.height),this.processPixelRGB(function(e,t,i){return e.r===r&&e.g===o&&e.b===a&&n.setPixel32(t,i,l,p,h,s,!1),!1},this),n.context.putImageData(n.imageData,0,0),n.dirty=!0,n},rect:function(e,t,i,n,r){return void 0!==r&&(this.context.fillStyle=r),this.context.fillRect(e,t,i,n),this},text:function(e,t,i,n,r,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n="14px Courier"),void 0===r&&(r="rgb(255,255,255)"),void 0===o&&(o=!0);var a=this.context,s=a.font;return a.font=n,o&&(a.fillStyle="rgb(0,0,0)",a.fillText(e,t+1,i+1)),a.fillStyle=r,a.fillText(e,t,i),a.font=s,this},circle:function(e,t,i,n){var r=this.context;return void 0!==n&&(r.fillStyle=n),r.beginPath(),r.arc(e,t,i,0,2*Math.PI,!1),r.closePath(),r.fill(),this},line:function(e,t,i,n,r,o){void 0===r&&(r="#fff"),void 0===o&&(o=1);var a=this.context;return a.beginPath(),a.moveTo(e,t),a.lineTo(i,n),a.lineWidth=o,a.strokeStyle=r,a.stroke(),a.closePath(),this},textureLine:function(e,t,i){if(void 0===i&&(i="repeat-x"),"string"!=typeof t||(t=this.game.cache.getImage(t))){var n=e.length;"no-repeat"===i&&n>t.width&&(n=t.width);var r=this.context;return r.fillStyle=r.createPattern(t,i),this._circle=new U.Circle(e.start.x,e.start.y,t.height),this._circle.circumferencePoint(e.angle-1.5707963267948966,!1,this._pos),r.save(),r.translate(this._pos.x,this._pos.y),r.rotate(e.angle),r.fillRect(0,0,n,t.height),r.restore(),this.dirty=!0,this}},render:function(){return!this.disableTextureUpload&&this.dirty&&(this.baseTexture.dirty(),this.dirty=!1),this},destroy:function(){this.frameData.destroy(),this.texture.destroy(!0),PIXI.CanvasPool.remove(this)},blendReset:function(){return this.op="source-over",this},blendSourceOver:function(){return this.op="source-over",this},blendSourceIn:function(){return this.op="source-in",this},blendSourceOut:function(){return this.op="source-out",this},blendSourceAtop:function(){return this.op="source-atop",this},blendDestinationOver:function(){return this.op="destination-over",this},blendDestinationIn:function(){return this.op="destination-in",this},blendDestinationOut:function(){return this.op="destination-out",this},blendDestinationAtop:function(){return this.op="destination-atop",this},blendXor:function(){return this.op="xor",this},blendAdd:function(){return this.op="lighter",this},blendMultiply:function(){return this.op="multiply",this},blendScreen:function(){return this.op="screen",this},blendOverlay:function(){return this.op="overlay",this},blendDarken:function(){return this.op="darken",this},blendLighten:function(){return this.op="lighten",this},blendColorDodge:function(){return this.op="color-dodge",this},blendColorBurn:function(){return this.op="color-burn",this},blendHardLight:function(){return this.op="hard-light",this},blendSoftLight:function(){return this.op="soft-light",this},blendDifference:function(){return this.op="difference",this},blendExclusion:function(){return this.op="exclusion",this},blendHue:function(){return this.op="hue",this},blendSaturation:function(){return this.op="saturation",this},blendColor:function(){return this.op="color",this},blendLuminosity:function(){return this.op="luminosity",this}},Object.defineProperty(U.BitmapData.prototype,"smoothed",{get:function(){U.Canvas.getSmoothingEnabled(this.context)},set:function(e){U.Canvas.setSmoothingEnabled(this.context,e)}}),Object.defineProperty(U.BitmapData.prototype,"op",{get:function(){return this.context.globalCompositeOperation},set:function(e){this.context.globalCompositeOperation=e}}),U.BitmapData.getTransform=function(e,t,i,n,r,o){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),"number"!=typeof i&&(i=1),"number"!=typeof n&&(n=1),"number"!=typeof r&&(r=0),"number"!=typeof o&&(o=0),{sx:i,sy:n,scaleX:i,scaleY:n,skewX:r,skewY:o,translateX:e,translateY:t,tx:e,ty:t}},U.BitmapData.prototype.constructor=U.BitmapData,PIXI.Graphics=function(){PIXI.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode=PIXI.blendModes.NORMAL,this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new PIXI.Rectangle(0,0,1,1),this.dirty=!0,this._boundsDirty=!1,this.webGLDirty=!1,this.cachedSpriteDirty=!1},PIXI.Graphics.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),PIXI.Graphics.prototype.constructor=PIXI.Graphics,PIXI.Graphics.prototype.lineStyle=function(e,t,i){return this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===i?1:i,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},PIXI.Graphics.prototype.moveTo=function(e,t){return this.drawShape(new PIXI.Polygon([e,t])),this},PIXI.Graphics.prototype.lineTo=function(e,t){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(e,t),this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.quadraticCurveTo=function(e,t,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,o,a=this.currentPath.shape.points;0===a.length&&this.moveTo(0,0);for(var s=a[a.length-2],l=a[a.length-1],p=0,h=1;h<=20;++h)r=s+(e-s)*(p=h/20),o=l+(t-l)*p,a.push(r+(e+(i-e)*p-r)*p,o+(t+(n-t)*p-o)*p);return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.bezierCurveTo=function(e,t,i,n,r,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var a,s,l,p,h,u=this.currentPath.shape.points,c=u[u.length-2],d=u[u.length-1],_=0,y=1;y<=20;++y)l=(s=(a=1-(_=y/20))*a)*a,h=(p=_*_)*_,u.push(l*c+3*s*_*e+3*a*p*i+h*r,l*d+3*s*_*t+3*a*p*n+h*o);return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.arcTo=function(e,t,i,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1]-t,l=a-e,p=n-t,h=i-e,u=Math.abs(s*h-l*p);if(u<1e-8||0===r)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var c=s*s+l*l,d=p*p+h*h,_=s*p+l*h,y=r*Math.sqrt(c)/u,m=r*Math.sqrt(d)/u,f=y*_/c,x=m*_/d,v=y*h+m*l,z=y*p+m*s,g=l*(m+f),b=s*(m+f),w=h*(y+x),S=p*(y+x),C=Math.atan2(b-z,g-v),M=Math.atan2(S-z,w-v);this.arc(v+e,z+t,r,C,M,h*s<l*p)}return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.arc=function(e,t,i,n,r,o,a){if(n===r)return this;void 0===o&&(o=!1),void 0===a&&(a=40),!o&&r<=n?r+=2*Math.PI:o&&n<=r&&(n+=2*Math.PI);var s=o?-1*(n-r):r-n,l=Math.ceil(Math.abs(s)/(2*Math.PI))*a;if(0===s)return this;var p=e+Math.cos(n)*i,h=t+Math.sin(n)*i;o&&this.filling?this.moveTo(e,t):this.moveTo(p,h);for(var u=this.currentPath.shape.points,c=s/(2*l),d=2*c,_=Math.cos(c),y=Math.sin(c),m=l-1,f=m%1/m,x=0;x<=m;x++){var v=c+n+d*(x+f*x),z=Math.cos(v),g=-Math.sin(v);u.push((_*z+y*g)*i+e,(_*-g+y*z)*i+t)}return this.dirty=!0,this._boundsDirty=!0,this},PIXI.Graphics.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},PIXI.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},PIXI.Graphics.prototype.drawRect=function(e,t,i,n){return this.drawShape(new PIXI.Rectangle(e,t,i,n)),this},PIXI.Graphics.prototype.drawRoundedRect=function(e,t,i,n,r){return this.drawShape(new PIXI.RoundedRectangle(e,t,i,n,r)),this},PIXI.Graphics.prototype.drawCircle=function(e,t,i){return this.drawShape(new PIXI.Circle(e,t,i)),this},PIXI.Graphics.prototype.drawEllipse=function(e,t,i,n){return this.drawShape(new PIXI.Ellipse(e,t,i,n)),this},PIXI.Graphics.prototype.drawPolygon=function(e){(e instanceof U.Polygon||e instanceof PIXI.Polygon)&&(e=e.points);var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}return this.drawShape(new U.Polygon(t)),this},PIXI.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this._boundsDirty=!0,this.clearDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},PIXI.Graphics.prototype.generateTexture=function(e,t,i){void 0===e&&(e=1),void 0===t&&(t=PIXI.scaleModes.DEFAULT),void 0===i&&(i=0);var n=this.getBounds();n.width+=i,n.height+=i;var r=new PIXI.CanvasBuffer(n.width*e,n.height*e),o=PIXI.Texture.fromCanvas(r.canvas,t);return o.baseTexture.resolution=e,r.context.scale(e,e),r.context.translate(-n.x,-n.y),PIXI.CanvasGraphics.renderGraphics(this,r.context),o},PIXI.Graphics.prototype._renderWebGL=function(e){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.worldAlpha=this.worldAlpha,void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite,e);if(e.spriteBatch.stop(),e.blendModeManager.setBlendMode(this.blendMode),this._mask&&e.maskManager.pushMask(this._mask,e),this._filters&&e.filterManager.pushFilter(this._filterBlock),this.blendMode!==e.spriteBatch.currentBlendMode){e.spriteBatch.currentBlendMode=this.blendMode;var t=PIXI.blendModesWebGL[e.spriteBatch.currentBlendMode];e.spriteBatch.gl.blendFunc(t[0],t[1])}if(this.webGLDirty&&(this.dirty=!0,this.webGLDirty=!1),PIXI.WebGLGraphics.renderGraphics(this,e),this.children.length){e.spriteBatch.start();for(var i=0;i<this.children.length;i++)this.children[i]._renderWebGL(e);e.spriteBatch.stop()}this._filters&&e.filterManager.popFilter(),this._mask&&e.maskManager.popMask(this.mask,e),e.drawCount++,e.spriteBatch.start()}},PIXI.Graphics.prototype._renderCanvas=function(e){if(!1!==this.visible&&0!==this.alpha&&!0!==this.isMask){if(this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return(this.dirty||this.cachedSpriteDirty)&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this.dirty=!1),this._cachedSprite.alpha=this.alpha,void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite,e);var t=e.context,i=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=PIXI.blendModesCanvas[e.currentBlendMode]),this._mask&&e.maskManager.pushMask(this._mask,e);var n=e.resolution,r=i.tx*e.resolution+e.shakeX,o=i.ty*e.resolution+e.shakeY;t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,r,o),PIXI.CanvasGraphics.renderGraphics(this,t);for(var a=0;a<this.children.length;a++)this.children[a]._renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},PIXI.Graphics.prototype.getBounds=function(e){if(!this._currentBounds){if(!this.renderable)return PIXI.EmptyRectangle;this.dirty&&(this.updateLocalBounds(),this.webGLDirty=!0,this.cachedSpriteDirty=!0,this.dirty=!1);var t=this._localBounds,i=t.x,n=t.width+t.x,r=t.y,o=t.height+t.y,a=e||this.worldTransform,s=a.a,l=a.b,p=a.c,h=a.d,u=a.tx,c=a.ty,d=s*n+p*o+u,_=h*o+l*n+c,y=s*i+p*o+u,m=h*o+l*i+c,f=s*i+p*r+u,x=h*r+l*i+c,v=s*n+p*r+u,z=h*r+l*n+c,g=d,b=_,w=d,S=_;w=v<(w=f<(w=y<w?y:w)?f:w)?v:w,S=z<(S=x<(S=m<S?m:S)?x:S)?z:S,g=(g=(g=g<y?y:g)<f?f:g)<v?v:g,b=(b=(b=b<m?m:b)<x?x:b)<z?z:b,this._bounds.x=w,this._bounds.width=g-w,this._bounds.y=S,this._bounds.height=b-S,this._currentBounds=this._bounds}return this._currentBounds},PIXI.Graphics.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=PIXI.identityMatrix;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform();var i=this.getBounds();for(this.worldTransform=e,t=0;t<this.children.length;t++)this.children[t].updateTransform();return i},PIXI.Graphics.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,tempPoint);for(var t=this.graphicsData,i=0;i<t.length;i++){var n=t[i];if(n.fill&&n.shape&&n.shape.contains(tempPoint.x,tempPoint.y))return!0}return!1},PIXI.Graphics.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var r,o,a,s,l,p,h=0;h<this.graphicsData.length;h++){var u=this.graphicsData[h],c=u.type,d=u.lineWidth;if(r=u.shape,c===PIXI.Graphics.RECT||c===PIXI.Graphics.RREC)a=r.x-d/2,s=r.y-d/2,e=a<e?a:e,t=t<a+(l=r.width+d)?a+l:t,i=s<i?s:i,n=n<s+(p=r.height+d)?s+p:n;else if(c===PIXI.Graphics.CIRC)a=r.x,s=r.y,e=a-(l=r.radius+d/2)<e?a-l:e,t=t<a+l?a+l:t,i=s-(p=r.radius+d/2)<i?s-p:i,n=n<s+p?s+p:n;else if(c===PIXI.Graphics.ELIP)a=r.x,s=r.y,e=a-(l=r.width+d/2)<e?a-l:e,t=t<a+l?a+l:t,i=s-(p=r.height+d/2)<i?s-p:i,n=n<s+p?s+p:n;else{o=r.points;for(var _=0;_<o.length;_++)o[_]instanceof U.Point?(a=o[_].x,s=o[_].y):(a=o[_],s=o[_+1],_<o.length-1&&_++),e=a-d<e?a-d:e,t=t<a+d?a+d:t,i=s-d<i?s-d:i,n=n<s+d?s+d:n}}else n=i=t=e=0;var y=this.boundsPadding;this._localBounds.x=e-y,this._localBounds.width=t-e+2*y,this._localBounds.y=i-y,this._localBounds.height=n-i+2*y},PIXI.Graphics.prototype._generateCachedSprite=function(){var e=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(e.width,e.height);else{var t=new PIXI.CanvasBuffer(e.width,e.height),i=PIXI.Texture.fromCanvas(t.canvas);this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-e.x/e.width,this._cachedSprite.anchor.y=-e.y/e.height,this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,PIXI.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},PIXI.Graphics.prototype.updateCachedSpriteTexture=function(){var e=this._cachedSprite,t=e.texture,i=e.buffer.canvas;t.baseTexture.width=i.width,t.baseTexture.height=i.height,t.crop.width=t.frame.width=i.width,t.crop.height=t.frame.height=i.height,e._width=i.width,e._height=i.height,t.baseTexture.dirty()},PIXI.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},PIXI.Graphics.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,e instanceof U.Polygon&&(e=e.clone()).flatten();var t=new PIXI.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===PIXI.Graphics.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this.dirty=!0,this._boundsDirty=!0,t},Object.defineProperty(PIXI.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap=e,this._cacheAsBitmap?this._generateCachedSprite():this.destroyCachedSprite(),this.dirty=!0,this.webGLDirty=!0}}),PIXI.GraphicsData=function(e,t,i,n,r,o,a){this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this._lineTint=t,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=o,this.shape=a,this.type=a.type},PIXI.GraphicsData.prototype.constructor=PIXI.GraphicsData,PIXI.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},PIXI.EarCut={},PIXI.EarCut.Triangulate=function(e,t,i){i=i||2;var n,r,o,a,s,l,p,h=t&&t.length,u=h?t[0]*i:e.length,c=PIXI.EarCut.linkedList(e,0,u,i,!0),d=[];if(!c)return d;if(h&&(c=PIXI.EarCut.eliminateHoles(e,t,c,i)),e.length>80*i){n=o=e[0],r=a=e[1];for(var _=i;_<u;_+=i)(s=e[_])<n&&(n=s),(l=e[_+1])<r&&(r=l),o<s&&(o=s),a<l&&(a=l);p=Math.max(o-n,a-r)}return PIXI.EarCut.earcutLinked(c,d,i,n,r,p),d},PIXI.EarCut.linkedList=function(e,t,i,n,r){var o,a,s,l=0;for(o=t,a=i-n;o<i;o+=n)l+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;if(r===0<l)for(o=t;o<i;o+=n)s=PIXI.EarCut.insertNode(o,e[o],e[o+1],s);else for(o=i-n;t<=o;o-=n)s=PIXI.EarCut.insertNode(o,e[o],e[o+1],s);return s},PIXI.EarCut.filterPoints=function(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!PIXI.EarCut.equals(n,n.next)&&0!==PIXI.EarCut.area(n.prev,n,n.next))n=n.next;else{if(PIXI.EarCut.removeNode(n),(n=t=n.prev)===n.next)return null;i=!0}}while(i||n!==t);return t},PIXI.EarCut.earcutLinked=function(e,t,i,n,r,o,a){if(e){!a&&o&&PIXI.EarCut.indexCurve(e,n,r,o);for(var s,l,p=e;e.prev!==e.next;)if(s=e.prev,l=e.next,o?PIXI.EarCut.isEarHashed(e,n,r,o):PIXI.EarCut.isEar(e))t.push(s.i/i),t.push(e.i/i),t.push(l.i/i),PIXI.EarCut.removeNode(e),e=l.next,p=l.next;else if((e=l)===p){a?1===a?(e=PIXI.EarCut.cureLocalIntersections(e,t,i),PIXI.EarCut.earcutLinked(e,t,i,n,r,o,2)):2===a&&PIXI.EarCut.splitEarcut(e,t,i,n,r,o):PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(e),t,i,n,r,o,1);break}}},PIXI.EarCut.isEar=function(e){var t=e.prev,i=e,n=e.next;if(0<=PIXI.EarCut.area(t,i,n))return!1;for(var r=e.next.next;r!==e.prev;){if(PIXI.EarCut.pointInTriangle(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&0<=PIXI.EarCut.area(r.prev,r,r.next))return!1;r=r.next}return!0},PIXI.EarCut.isEarHashed=function(e,t,i,n){var r=e.prev,o=e,a=e.next;if(0<=PIXI.EarCut.area(r,o,a))return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,p=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,h=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,u=PIXI.EarCut.zOrder(s,l,t,i,n),c=PIXI.EarCut.zOrder(p,h,t,i,n),d=e.nextZ;d&&d.z<=c;){if(d!==e.prev&&d!==e.next&&PIXI.EarCut.pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=PIXI.EarCut.area(d.prev,d,d.next))return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=u;){if(d!==e.prev&&d!==e.next&&PIXI.EarCut.pointInTriangle(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&0<=PIXI.EarCut.area(d.prev,d,d.next))return!1;d=d.prevZ}return!0},PIXI.EarCut.cureLocalIntersections=function(e,t,i){var n=e;do{var r=n.prev,o=n.next.next;PIXI.EarCut.intersects(r,n,n.next,o)&&PIXI.EarCut.locallyInside(r,o)&&PIXI.EarCut.locallyInside(o,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(o.i/i),PIXI.EarCut.removeNode(n),PIXI.EarCut.removeNode(n.next),n=e=o),n=n.next}while(n!==e);return n},PIXI.EarCut.splitEarcut=function(e,t,i,n,r,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&PIXI.EarCut.isValidDiagonal(a,s)){var l=PIXI.EarCut.splitPolygon(a,s);return a=PIXI.EarCut.filterPoints(a,a.next),l=PIXI.EarCut.filterPoints(l,l.next),PIXI.EarCut.earcutLinked(a,t,i,n,r,o),void PIXI.EarCut.earcutLinked(l,t,i,n,r,o)}s=s.next}a=a.next}while(a!==e)},PIXI.EarCut.eliminateHoles=function(e,t,i,n){var r,o,a,s,l,p=[];for(r=0,o=t.length;r<o;r++)a=t[r]*n,s=r<o-1?t[r+1]*n:e.length,(l=PIXI.EarCut.linkedList(e,a,s,n,!1))===l.next&&(l.steiner=!0),p.push(PIXI.EarCut.getLeftmost(l));for(p.sort(compareX),r=0;r<p.length;r++)PIXI.EarCut.eliminateHole(p[r],i),i=PIXI.EarCut.filterPoints(i,i.next);return i},PIXI.EarCut.compareX=function(e,t){return e.x-t.x},PIXI.EarCut.eliminateHole=function(e,t){if(t=PIXI.EarCut.findHoleBridge(e,t)){var i=PIXI.EarCut.splitPolygon(t,e);PIXI.EarCut.filterPoints(i,i.next)}},PIXI.EarCut.findHoleBridge=function(e,t){var i,n=t,r=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);s<=r&&a<s&&(a=s,i=n.x<n.next.x?n:n.next)}n=n.next}while(n!==t);if(!i)return null;if(e.x===i.x)return i.prev;var l,p=i,h=1/0;for(n=i.next;n!==p;)r>=n.x&&n.x>=i.x&&PIXI.EarCut.pointInTriangle(o<i.y?r:a,o,i.x,i.y,o<i.y?a:r,o,n.x,n.y)&&((l=Math.abs(o-n.y)/(r-n.x))<h||l===h&&n.x>i.x)&&PIXI.EarCut.locallyInside(n,e)&&(i=n,h=l),n=n.next;return i},PIXI.EarCut.indexCurve=function(e,t,i,n){for(var r=e;null===r.z&&(r.z=PIXI.EarCut.zOrder(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,(r=r.next)!==e;);r.prevZ.nextZ=null,r.prevZ=null,PIXI.EarCut.sortLinked(r)},PIXI.EarCut.sortLinked=function(e){var t,i,n,r,o,a,s,l,p=1;do{for(i=e,o=e=null,a=0;i;){for(a++,n=i,t=s=0;t<p&&(s++,n=n.nextZ);t++);for(l=p;0<s||0<l&&n;)0===s?(n=(r=n).nextZ,l--):0!==l&&n?i.z<=n.z?(i=(r=i).nextZ,s--):(n=(r=n).nextZ,l--):(i=(r=i).nextZ,s--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,p*=2}while(1<a);return e},PIXI.EarCut.zOrder=function(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)/r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)/r)|t<<8))|t<<4))|t<<2))|t<<1))<<1},PIXI.EarCut.getLeftmost=function(e){for(var t=e,i=e;t.x<i.x&&(i=t),(t=t.next)!==e;);return i},PIXI.EarCut.pointInTriangle=function(e,t,i,n,r,o,a,s){return 0<=(r-a)*(t-s)-(e-a)*(o-s)&&0<=(e-a)*(n-s)-(i-a)*(t-s)&&0<=(i-a)*(o-s)-(r-a)*(n-s)},PIXI.EarCut.isValidDiagonal=function(e,t){return PIXI.EarCut.equals(e,t)||e.next.i!==t.i&&e.prev.i!==t.i&&!PIXI.EarCut.intersectsPolygon(e,t)&&PIXI.EarCut.locallyInside(e,t)&&PIXI.EarCut.locallyInside(t,e)&&PIXI.EarCut.middleInside(e,t)},PIXI.EarCut.area=function(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)},PIXI.EarCut.equals=function(e,t){return e.x===t.x&&e.y===t.y},PIXI.EarCut.intersects=function(e,t,i,n){return 0<PIXI.EarCut.area(e,t,i)!=0<PIXI.EarCut.area(e,t,n)&&0<PIXI.EarCut.area(i,n,e)!=0<PIXI.EarCut.area(i,n,t)},PIXI.EarCut.intersectsPolygon=function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&PIXI.EarCut.intersects(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1},PIXI.EarCut.locallyInside=function(e,t){return PIXI.EarCut.area(e.prev,e,e.next)<0?0<=PIXI.EarCut.area(e,t,e.next)&&0<=PIXI.EarCut.area(e,e.prev,t):PIXI.EarCut.area(e,t,e.prev)<0||PIXI.EarCut.area(e,e.next,t)<0},PIXI.EarCut.middleInside=function(e,t){for(var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;i.y>o!=i.next.y>o&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),(i=i.next)!==e;);return n},PIXI.EarCut.splitPolygon=function(e,t){var i=new PIXI.EarCut.Node(e.i,e.x,e.y),n=new PIXI.EarCut.Node(t.i,t.x,t.y),r=e.next,o=t.prev;return(e.next=t).prev=e,(i.next=r).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n},PIXI.EarCut.insertNode=function(e,t,i,n){var r=new PIXI.EarCut.Node(e,t,i);return n?(r.next=n.next,(r.prev=n).next.prev=r,n.next=r):(r.prev=r).next=r,r},PIXI.EarCut.removeNode=function(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)},PIXI.EarCut.Node=function(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1},PIXI.WebGLGraphics=function(){},PIXI.WebGLGraphics.stencilBufferLimit=6,PIXI.WebGLGraphics.renderGraphics=function(e,t){var i,n=t.gl,r=t.projection,o=t.offset,a=t.shaderManager.primitiveShader;e.dirty&&PIXI.WebGLGraphics.updateGraphics(e,n);for(var s=e._webGL[n.id],l=0;l<s.data.length;l++)1===s.data[l].mode?(i=s.data[l],t.stencilManager.pushStencil(e,i,t),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(i.indices.length-4)),t.stencilManager.popStencil(e,i,t)):(i=s.data[l],t.shaderManager.setShader(a),a=t.shaderManager.primitiveShader,n.uniformMatrix3fv(a.translationMatrix,!1,e.worldTransform.toArray(!0)),n.uniform1f(a.flipY,1),n.uniform2f(a.projectionVector,r.x,-r.y),n.uniform2f(a.offsetVector,-o.x,-o.y),n.uniform3fv(a.tintColor,PIXI.hex2rgb(e.tint)),n.uniform1f(a.alpha,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,i.buffer),n.vertexAttribPointer(a.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,i.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,i.indices.length,n.UNSIGNED_SHORT,0))},PIXI.WebGLGraphics.updateGraphics=function(e,t){var i,n,r=e._webGL[t.id];if(r||(r=e._webGL[t.id]={lastIndex:0,data:[],gl:t}),e.dirty=!1,e.clearDirty){for(e.clearDirty=!1,i=0;i<r.data.length;i++){var o=r.data[i];o.reset(),PIXI.WebGLGraphics.graphicsDataPool.push(o)}r.data=[],r.lastIndex=0}for(i=r.lastIndex;i<e.graphicsData.length;i++){var a=e.graphicsData[i];if(a.type===PIXI.Graphics.POLY){if(a.points=a.shape.points.slice(),a.shape.closed&&(a.points[0]===a.points[a.points.length-2]&&a.points[1]===a.points[a.points.length-1]||a.points.push(a.points[0],a.points[1])),a.fill&&a.points.length>=PIXI.WebGLGraphics.stencilBufferLimit)if(a.points.length<2*PIXI.WebGLGraphics.stencilBufferLimit){n=PIXI.WebGLGraphics.switchMode(r,0),PIXI.WebGLGraphics.buildPoly(a,n)||(n=PIXI.WebGLGraphics.switchMode(r,1),PIXI.WebGLGraphics.buildComplexPoly(a,n))}else n=PIXI.WebGLGraphics.switchMode(r,1),PIXI.WebGLGraphics.buildComplexPoly(a,n);0<a.lineWidth&&(n=PIXI.WebGLGraphics.switchMode(r,0),PIXI.WebGLGraphics.buildLine(a,n))}else n=PIXI.WebGLGraphics.switchMode(r,0),a.type===PIXI.Graphics.RECT?PIXI.WebGLGraphics.buildRectangle(a,n):a.type===PIXI.Graphics.CIRC||a.type===PIXI.Graphics.ELIP?PIXI.WebGLGraphics.buildCircle(a,n):a.type===PIXI.Graphics.RREC&&PIXI.WebGLGraphics.buildRoundedRectangle(a,n);r.lastIndex++}for(i=0;i<r.data.length;i++)(n=r.data[i]).dirty&&n.upload()},PIXI.WebGLGraphics.switchMode=function(e,t){var i;return e.data.length?(i=e.data[e.data.length-1]).mode===t&&1!==t||((i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(e.gl)).mode=t,e.data.push(i)):((i=PIXI.WebGLGraphics.graphicsDataPool.pop()||new PIXI.WebGLGraphicsData(e.gl)).mode=t,e.data.push(i)),i.dirty=!0,i},PIXI.WebGLGraphics.buildRectangle=function(e,t){var i=e.shape,n=i.x,r=i.y,o=i.width,a=i.height;if(e.fill){var s=PIXI.hex2rgb(e.fillColor),l=e.fillAlpha,p=s[0]*l,h=s[1]*l,u=s[2]*l,c=t.points,d=t.indices,_=c.length/6;c.push(n,r),c.push(p,h,u,l),c.push(n+o,r),c.push(p,h,u,l),c.push(n,r+a),c.push(p,h,u,l),c.push(n+o,r+a),c.push(p,h,u,l),d.push(_,_,_+1,_+2,_+3,_+3)}if(e.lineWidth){var y=e.points;e.points=[n,r,n+o,r,n+o,r+a,n,r+a,n,r],PIXI.WebGLGraphics.buildLine(e,t),e.points=y}},PIXI.WebGLGraphics.buildRoundedRectangle=function(e,t){var i=e.shape,n=i.x,r=i.y,o=i.width,a=i.height,s=i.radius,l=[];if(l.push(n,r+s),l=(l=(l=(l=l.concat(PIXI.WebGLGraphics.quadraticBezierCurve(n,r+a-s,n,r+a,n+s,r+a))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+o-s,r+a,n+o,r+a,n+o,r+a-s))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+o,r+s,n+o,r,n+o-s,r))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(n+s,r,n,r,n,r+s)),e.fill){var p=PIXI.hex2rgb(e.fillColor),h=e.fillAlpha,u=p[0]*h,c=p[1]*h,d=p[2]*h,_=t.points,y=t.indices,m=_.length/6,f=PIXI.EarCut.Triangulate(l,null,2),x=0;for(x=0;x<f.length;x+=3)y.push(f[x]+m),y.push(f[x]+m),y.push(f[x+1]+m),y.push(f[x+2]+m),y.push(f[x+2]+m);for(x=0;x<l.length;x++)_.push(l[x],l[++x],u,c,d,h)}if(e.lineWidth){var v=e.points;e.points=l,PIXI.WebGLGraphics.buildLine(e,t),e.points=v}},PIXI.WebGLGraphics.quadraticBezierCurve=function(e,t,i,n,r,o){function a(e,t,i){return e+(t-e)*i}for(var s,l,p,h,u,c,d=[],_=0,y=0;y<=20;y++)s=a(e,i,_=y/20),l=a(t,n,_),p=a(i,r,_),h=a(n,o,_),u=a(s,p,_),c=a(l,h,_),d.push(u,c);return d},PIXI.WebGLGraphics.buildCircle=function(e,t){var i,n,r=e.shape,o=r.x,a=r.y;e.type===PIXI.Graphics.CIRC?(i=r.radius,n=r.radius):(i=r.width,n=r.height);var s=2*Math.PI/40,l=0;if(e.fill){var p=PIXI.hex2rgb(e.fillColor),h=e.fillAlpha,u=p[0]*h,c=p[1]*h,d=p[2]*h,_=t.points,y=t.indices,m=_.length/6;for(y.push(m),l=0;l<41;l++)_.push(o,a,u,c,d,h),_.push(o+Math.sin(s*l)*i,a+Math.cos(s*l)*n,u,c,d,h),y.push(m++,m++);y.push(m-1)}if(e.lineWidth){var f=e.points;for(e.points=[],l=0;l<41;l++)e.points.push(o+Math.sin(s*l)*i,a+Math.cos(s*l)*n);PIXI.WebGLGraphics.buildLine(e,t),e.points=f}},PIXI.WebGLGraphics.buildLine=function(e,t){var i=0,n=e.points;if(0!==n.length){if(e.lineWidth%2)for(i=0;i<n.length;i++)n[i]+=.5;var r=new PIXI.Point(n[0],n[1]),o=new PIXI.Point(n[n.length-2],n[n.length-1]);if(r.x===o.x&&r.y===o.y){(n=n.slice()).pop(),n.pop();var a=(o=new PIXI.Point(n[n.length-2],n[n.length-1])).x+.5*(r.x-o.x),s=o.y+.5*(r.y-o.y);n.unshift(a,s),n.push(a,s)}var l,p,h,u,c,d,_,y,m,f,x,v,z,g,b,w,S,C,M,P,k,T,O=t.points,A=t.indices,E=n.length/2,G=n.length,I=O.length/6,B=e.lineWidth/2,L=PIXI.hex2rgb(e.lineColor),D=e.lineAlpha,R=L[0]*D,F=L[1]*D,j=L[2]*D;for(h=n[0],u=n[1],c=n[2],m=-(u-(d=n[3])),f=h-c,m/=T=Math.sqrt(m*m+f*f),f/=T,m*=B,f*=B,O.push(h-m,u-f,R,F,j,D),O.push(h+m,u+f,R,F,j,D),i=1;i<E-1;i++)h=n[2*(i-1)],u=n[2*(i-1)+1],c=n[2*i],d=n[2*i+1],_=n[2*(i+1)],y=n[2*(i+1)+1],m=-(u-d),f=h-c,m/=T=Math.sqrt(m*m+f*f),f/=T,m*=B,f*=B,x=-(d-y),v=c-_,x/=T=Math.sqrt(x*x+v*v),v/=T,S=(-m+h)*(-f+d)-(-m+c)*(-f+u),P=(-(x*=B)+_)*(-(v*=B)+d)-(-x+c)*(-v+y),k=(b=-f+u-(-f+d))*(M=-x+c-(-x+_))-(C=-v+y-(-v+d))*(w=-m+c-(-m+h)),Math.abs(k)<.1?(k+=10.1,O.push(c-m,d-f,R,F,j,D),O.push(c+m,d+f,R,F,j,D)):19600<((l=(w*P-M*S)/k)-c)*(l-c)+((p=(C*S-b*P)/k)-d)+(p-d)?(z=m-x,g=f-v,z/=T=Math.sqrt(z*z+g*g),g/=T,z*=B,g*=B,O.push(c-z,d-g),O.push(R,F,j,D),O.push(c+z,d+g),O.push(R,F,j,D),O.push(c-z,d-g),O.push(R,F,j,D),G++):(O.push(l,p),O.push(R,F,j,D),O.push(c-(l-c),d-(p-d)),O.push(R,F,j,D));for(h=n[2*(E-2)],u=n[2*(E-2)+1],c=n[2*(E-1)],m=-(u-(d=n[2*(E-1)+1])),f=h-c,m/=T=Math.sqrt(m*m+f*f),f/=T,m*=B,f*=B,O.push(c-m,d-f),O.push(R,F,j,D),O.push(c+m,d+f),O.push(R,F,j,D),A.push(I),i=0;i<G;i++)A.push(I++);A.push(I-1)}},PIXI.WebGLGraphics.buildComplexPoly=function(e,t){var i=e.points.slice();if(!(i.length<6)){var n=t.indices;t.points=i,t.alpha=e.fillAlpha,t.color=PIXI.hex2rgb(e.fillColor);for(var r,o,a=1/0,s=-1/0,l=1/0,p=-1/0,h=0;h<i.length;h+=2)a=(r=i[h])<a?r:a,s=s<r?r:s,l=(o=i[h+1])<l?o:l,p=p<o?o:p;i.push(a,l,s,l,s,p,a,p);var u=i.length/2;for(h=0;h<u;h++)n.push(h)}},PIXI.WebGLGraphics.buildPoly=function(e,t){var i=e.points;if(!(i.length<6)){var n=t.points,r=t.indices,o=i.length/2,a=PIXI.hex2rgb(e.fillColor),s=e.fillAlpha,l=a[0]*s,p=a[1]*s,h=a[2]*s,u=PIXI.EarCut.Triangulate(i,null,2);if(!u)return!1;var c=n.length/6,d=0;for(d=0;d<u.length;d+=3)r.push(u[d]+c),r.push(u[d]+c),r.push(u[d+1]+c),r.push(u[d+2]+c),r.push(u[d+2]+c);for(d=0;d<o;d++)n.push(i[2*d],i[2*d+1],l,p,h,s);return!0}},PIXI.WebGLGraphics.graphicsDataPool=[],PIXI.WebGLGraphicsData=function(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0},PIXI.WebGLGraphicsData.prototype.reset=function(){this.points=[],this.indices=[]},PIXI.WebGLGraphicsData.prototype.upload=function(){var e=this.gl;this.glPoints=new PIXI.Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndicies=new PIXI.Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndicies,e.STATIC_DRAW),this.dirty=!1},PIXI.CanvasGraphics=function(){},PIXI.CanvasGraphics.renderGraphics=function(e,t){var i=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var n=0;n<e.graphicsData.length;n++){var r=e.graphicsData[n],o=r.shape,a=r._fillTint,s=r._lineTint;if(t.lineWidth=r.lineWidth,r.type===PIXI.Graphics.POLY){t.beginPath();var l=o.points;t.moveTo(l[0],l[1]);for(var p=1;p<l.length/2;p++)t.lineTo(l[2*p],l[2*p+1]);o.closed&&t.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(r.type===PIXI.Graphics.RECT)(r.fillColor||0===r.fillColor)&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fillRect(o.x,o.y,o.width,o.height)),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.strokeRect(o.x,o.y,o.width,o.height));else if(r.type===PIXI.Graphics.CIRC)t.beginPath(),t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke());else if(r.type===PIXI.Graphics.ELIP){var h=2*o.width,u=2*o.height,c=o.x-h/2,d=o.y-u/2;t.beginPath();var _=h/2*.5522848,y=u/2*.5522848,m=c+h,f=d+u,x=c+h/2,v=d+u/2;t.moveTo(c,v),t.bezierCurveTo(c,v-y,x-_,d,x,d),t.bezierCurveTo(x+_,d,m,v-y,m,v),t.bezierCurveTo(m,v+y,x+_,f,x,f),t.bezierCurveTo(x-_,f,c,v+y,c,v),t.closePath(),r.fill&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(r.type===PIXI.Graphics.RREC){var z=o.x,g=o.y,b=o.width,w=o.height,S=o.radius,C=Math.min(b,w)/2|0;S=C<S?C:S,t.beginPath(),t.moveTo(z,g+S),t.lineTo(z,g+w-S),t.quadraticCurveTo(z,g+w,z+S,g+w),t.lineTo(z+b-S,g+w),t.quadraticCurveTo(z+b,g+w,z+b,g+w-S),t.lineTo(z+b,g+S),t.quadraticCurveTo(z+b,g,z+b-S,g),t.lineTo(z+S,g),t.quadraticCurveTo(z,g,z,g+S),t.closePath(),(r.fillColor||0===r.fillColor)&&(t.globalAlpha=r.fillAlpha*i,t.fillStyle="#"+("00000"+(0|a).toString(16)).substr(-6),t.fill()),r.lineWidth&&(t.globalAlpha=r.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}}},PIXI.CanvasGraphics.renderGraphicsMask=function(e,t){var i=e.graphicsData.length;if(0!==i){t.beginPath();for(var n=0;n<i;n++){var r=e.graphicsData[n],o=r.shape;if(r.type===PIXI.Graphics.POLY){var a=o.points;t.moveTo(a[0],a[1]);for(var s=1;s<a.length/2;s++)t.lineTo(a[2*s],a[2*s+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&t.closePath()}else if(r.type===PIXI.Graphics.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(r.type===PIXI.Graphics.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(r.type===PIXI.Graphics.ELIP){var l=2*o.width,p=2*o.height,h=o.x-l/2,u=o.y-p/2,c=l/2*.5522848,d=p/2*.5522848,_=h+l,y=u+p,m=h+l/2,f=u+p/2;t.moveTo(h,f),t.bezierCurveTo(h,f-d,m-c,u,m,u),t.bezierCurveTo(m+c,u,_,f-d,_,f),t.bezierCurveTo(_,f+d,m+c,y,m,y),t.bezierCurveTo(m-c,y,h,f+d,h,f),t.closePath()}else if(r.type===PIXI.Graphics.RREC){var x=o.x,v=o.y,z=o.width,g=o.height,b=o.radius,w=Math.min(z,g)/2|0;b=w<b?w:b,t.moveTo(x,v+b),t.lineTo(x,v+g-b),t.quadraticCurveTo(x,v+g,x+b,v+g),t.lineTo(x+z-b,v+g),t.quadraticCurveTo(x+z,v+g,x+z,v+g-b),t.lineTo(x+z,v+b),t.quadraticCurveTo(x+z,v,x+z-b,v),t.lineTo(x+b,v),t.quadraticCurveTo(x,v,x,v+b),t.closePath()}}}},PIXI.CanvasGraphics.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,n=(255&e.tint)/255,r=0;r<e.graphicsData.length;r++){var o=e.graphicsData[r],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255}},U.Graphics=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.type=U.GRAPHICS,this.physicsType=U.SPRITE,this.anchor=new U.Point,PIXI.Graphics.call(this),U.Component.Core.init.call(this,e,t,i,"",null)},U.Graphics.prototype=Object.create(PIXI.Graphics.prototype),U.Graphics.prototype.constructor=U.Graphics,U.Component.Core.install.call(U.Graphics.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),U.Graphics.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Graphics.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Graphics.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Graphics.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Graphics.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Graphics.prototype.postUpdate=function(){U.Component.PhysicsBody.postUpdate.call(this),U.Component.FixedToCamera.postUpdate.call(this),this._boundsDirty&&(this.updateLocalBounds(),this._boundsDirty=!1);for(var e=0;e<this.children.length;e++)this.children[e].postUpdate()},U.Graphics.prototype.destroy=function(e){this.clear(),U.Component.Destroy.prototype.destroy.call(this,e)},U.Graphics.prototype.drawTriangle=function(e,t){void 0===t&&(t=!1);var i=new U.Polygon(e);if(t){var n=new U.Point(this.game.camera.x-e[0].x,this.game.camera.y-e[0].y),r=new U.Point(e[1].x-e[0].x,e[1].y-e[0].y),o=new U.Point(e[1].x-e[2].x,e[1].y-e[2].y).cross(r);0<n.dot(o)&&this.drawPolygon(i)}else this.drawPolygon(i)},U.Graphics.prototype.drawTriangles=function(e,t,i){void 0===i&&(i=!1);var n,r=new U.Point,o=new U.Point,a=new U.Point,s=[];if(t)if(e[0]instanceof U.Point)for(n=0;n<t.length/3;n++)s.push(e[t[3*n]]),s.push(e[t[3*n+1]]),s.push(e[t[3*n+2]]),3===s.length&&(this.drawTriangle(s,i),s=[]);else for(n=0;n<t.length;n++)r.x=e[2*t[n]],r.y=e[2*t[n]+1],s.push(r.copyTo({})),3===s.length&&(this.drawTriangle(s,i),s=[]);else if(e[0]instanceof U.Point)for(n=0;n<e.length/3;n++)this.drawTriangle([e[3*n],e[3*n+1],e[3*n+2]],i);else for(n=0;n<e.length/6;n++)r.x=e[6*n+0],r.y=e[6*n+1],o.x=e[6*n+2],o.y=e[6*n+3],a.x=e[6*n+4],a.y=e[6*n+5],this.drawTriangle([r,o,a],i)},U.RenderTexture=function(e,t,i,n,r,o){void 0===n&&(n=""),void 0===r&&(r=U.scaleModes.DEFAULT),void 0===o&&(o=1),this.game=e,this.key=n,this.type=U.RENDERTEXTURE,this._tempMatrix=new PIXI.Matrix,PIXI.RenderTexture.call(this,t,i,this.game.renderer,r,o),this.render=U.RenderTexture.prototype.render},U.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype),U.RenderTexture.prototype.constructor=U.RenderTexture,U.RenderTexture.prototype.renderXY=function(e,t,i,n){e.updateTransform(),this._tempMatrix.copyFrom(e.worldTransform),this._tempMatrix.tx=t,this._tempMatrix.ty=i,this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,n):this.renderCanvas(e,this._tempMatrix,n)},U.RenderTexture.prototype.renderRawXY=function(e,t,i,n){this._tempMatrix.identity().translate(t,i),this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,n):this.renderCanvas(e,this._tempMatrix,n)},U.RenderTexture.prototype.render=function(e,t,i){null==t?this._tempMatrix.copyFrom(e.worldTransform):this._tempMatrix.copyFrom(t),this.renderer.type===PIXI.WEBGL_RENDERER?this.renderWebGL(e,this._tempMatrix,i):this.renderCanvas(e,this._tempMatrix,i)},U.Text=function(e,t,i,n,r){t=t||0,i=i||0,n=null==n?"":n.toString(),r=U.Utils.extend({},r),this.type=U.TEXT,this.physicsType=U.SPRITE,this.padding=new U.Point,this.textBounds=null,this.canvas=PIXI.CanvasPool.create(this),this.context=this.canvas.getContext("2d"),this.colors=[],this.strokeColors=[],this.fontStyles=[],this.fontWeights=[],this.autoRound=!1,this.useAdvancedWrap=!1,this._res=e.renderer.resolution,this._text=n,this._fontComponents=null,this._lineSpacing=0,this._charCount=0,this._width=0,this._height=0,U.Sprite.call(this,e,t,i,PIXI.Texture.fromCanvas(this.canvas)),this.setStyle(r),""!==n&&this.updateText()},U.Text.prototype=Object.create(U.Sprite.prototype),U.Text.prototype.constructor=U.Text,U.Text.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Text.prototype.update=function(){},U.Text.prototype.destroy=function(e){this.texture.destroy(!0),U.Component.Destroy.prototype.destroy.call(this,e)},U.Text.prototype.setShadow=function(e,t,i,n,r,o){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i="rgba(0, 0, 0, 1)"),void 0===n&&(n=0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.style.shadowOffsetX=e,this.style.shadowOffsetY=t,this.style.shadowColor=i,this.style.shadowBlur=n,this.style.shadowStroke=r,this.style.shadowFill=o,this.dirty=!0,this},U.Text.prototype.setStyle=function(e,t){void 0===t&&(t=!1),(e=e||{}).font=e.font||"bold 20pt Arial",e.backgroundColor=e.backgroundColor||null,e.fill=e.fill||"black",e.align=e.align||"left",e.boundsAlignH=e.boundsAlignH||"left",e.boundsAlignV=e.boundsAlignV||"top",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.maxLines=e.maxLines||0,e.shadowOffsetX=e.shadowOffsetX||0,e.shadowOffsetY=e.shadowOffsetY||0,e.shadowColor=e.shadowColor||"rgba(0,0,0,0)",e.shadowBlur=e.shadowBlur||0,e.tabs=e.tabs||0;var i=this.fontToComponents(e.font);return e.fontStyle&&(i.fontStyle=e.fontStyle),e.fontVariant&&(i.fontVariant=e.fontVariant),e.fontWeight&&(i.fontWeight=e.fontWeight),e.fontSize&&("number"==typeof e.fontSize&&(e.fontSize=e.fontSize+"px"),i.fontSize=e.fontSize),this._fontComponents=i,e.font=this.componentsToFont(this._fontComponents),this.style=e,this.dirty=!0,t&&this.updateText(),this},U.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font;var e=this.text;this.style.wordWrap&&(e=this.runWordWrap(this.text));var t=e.split(/(?:\r\n|\r|\n)/),i=this.style.tabs,n=[],r=0,o=this.determineFontProperties(this.style.font),a=t.length;0<this.style.maxLines&&this.style.maxLines<t.length&&(a=this.style.maxLines);for(var s=this._charCount=0;s<a;s++){if(0===i){var l=this.style.strokeThickness+this.padding.x;0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?l+=this.measureLine(t[s]):l+=this.context.measureText(t[s]).width,this.style.wordWrap&&(l-=this.context.measureText(" ").width)}else{var p=t[s].split(/(?:\t)/);l=this.padding.x+this.style.strokeThickness;if(Array.isArray(i))for(var h=0,u=0;u<p.length;u++){var c;c=0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.measureLine(p[u]):Math.ceil(this.context.measureText(p[u]).width),0<u&&(h+=i[u-1]),l=h+c}else for(u=0;u<p.length;u++){0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?l+=this.measureLine(p[u]):l+=Math.ceil(this.context.measureText(p[u]).width),l+=this.game.math.snapToCeil(l,i)-l}}n[s]=Math.ceil(l),r=Math.max(r,n[s])}this.canvas.width=r*this._res;var d,_,y=o.fontSize+this.style.strokeThickness+this.padding.y,m=y*a,f=this._lineSpacing;for(f<0&&Math.abs(f)>y&&(f=-y),0!==f&&(m+=0<f?f*t.length:f*(t.length-1)),this.canvas.height=m*this._res,this.context.scale(this._res,this._res),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.style.backgroundColor&&(this.context.fillStyle=this.style.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height)),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.textBaseline="alphabetic",this.context.lineWidth=this.style.strokeThickness,this.context.lineCap="round",this.context.lineJoin="round",s=this._charCount=0;s<a;s++)d=this.style.strokeThickness/2,_=this.style.strokeThickness/2+s*y+o.ascent,0<s&&(_+=f*s),"right"===this.style.align?d+=r-n[s]:"center"===this.style.align&&(d+=(r-n[s])/2),this.autoRound&&(d=Math.round(d),_=Math.round(_)),0<this.colors.length||0<this.strokeColors.length||0<this.fontWeights.length||0<this.fontStyles.length?this.updateLine(t[s],d,_):(this.style.stroke&&this.style.strokeThickness&&(this.updateShadow(this.style.shadowStroke),0===i?this.context.strokeText(t[s],d,_):this.renderTabLine(t[s],d,_,!1)),this.style.fill&&(this.updateShadow(this.style.shadowFill),0===i?this.context.fillText(t[s],d,_):this.renderTabLine(t[s],d,_,!0)));this.updateTexture(),this.dirty=!1},U.Text.prototype.renderTabLine=function(e,t,i,n){var r=e.split(/(?:\t)/),o=this.style.tabs,a=0;if(Array.isArray(o))for(var s=0,l=0;l<r.length;l++)0<l&&(s+=o[l-1]),a=t+s,n?this.context.fillText(r[l],a,i):this.context.strokeText(r[l],a,i);else for(l=0;l<r.length;l++){var p=Math.ceil(this.context.measureText(r[l]).width);a=this.game.math.snapToCeil(t,o),n?this.context.fillText(r[l],a,i):this.context.strokeText(r[l],a,i),t=a+p}},U.Text.prototype.updateShadow=function(e){e?(this.context.shadowOffsetX=this.style.shadowOffsetX,this.context.shadowOffsetY=this.style.shadowOffsetY,this.context.shadowColor=this.style.shadowColor,this.context.shadowBlur=this.style.shadowBlur):(this.context.shadowOffsetX=0,this.context.shadowOffsetY=0,this.context.shadowColor=0,this.context.shadowBlur=0)},U.Text.prototype.measureLine=function(e){for(var t=0,i=0;i<e.length;i++){var n=e[i];if(0<this.fontWeights.length||0<this.fontStyles.length){var r=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(r.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(r.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(r)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill)),t+=this.context.measureText(n).width,this._charCount++}return Math.ceil(t)},U.Text.prototype.updateLine=function(e,t,i){for(var n=0;n<e.length;n++){var r=e[n];if(0<this.fontWeights.length||0<this.fontStyles.length){var o=this.fontToComponents(this.context.font);this.fontStyles[this._charCount]&&(o.fontStyle=this.fontStyles[this._charCount]),this.fontWeights[this._charCount]&&(o.fontWeight=this.fontWeights[this._charCount]),this.context.font=this.componentsToFont(o)}this.style.stroke&&this.style.strokeThickness&&(this.strokeColors[this._charCount]&&(this.context.strokeStyle=this.strokeColors[this._charCount]),this.updateShadow(this.style.shadowStroke),this.context.strokeText(r,t,i)),this.style.fill&&(this.colors[this._charCount]&&(this.context.fillStyle=this.colors[this._charCount]),this.updateShadow(this.style.shadowFill),this.context.fillText(r,t,i)),t+=this.context.measureText(r).width,this._charCount++}},U.Text.prototype.clearColors=function(){return this.colors=[],this.strokeColors=[],this.dirty=!0,this},U.Text.prototype.clearFontValues=function(){return this.fontStyles=[],this.fontWeights=[],this.dirty=!0,this},U.Text.prototype.addColor=function(e,t){return this.colors[t]=e,this.dirty=!0,this},U.Text.prototype.addStrokeColor=function(e,t){return this.strokeColors[t]=e,this.dirty=!0,this},U.Text.prototype.addFontStyle=function(e,t){return this.fontStyles[t]=e,this.dirty=!0,this},U.Text.prototype.addFontWeight=function(e,t){return this.fontWeights[t]=e,this.dirty=!0,this},U.Text.prototype.precalculateWordWrap=function(e){return this.texture.baseTexture.resolution=this._res,this.context.font=this.style.font,this.runWordWrap(e).split(/(?:\r\n|\r|\n)/)},U.Text.prototype.runWordWrap=function(e){return this.useAdvancedWrap?this.advancedWordWrap(e):this.basicWordWrap(e)},U.Text.prototype.advancedWordWrap=function(e){for(var t=this.context,i=this.style.wordWrapWidth,n="",r=e.replace(/ +/gi," ").split(/\r?\n/gi),o=r.length,a=0;a<o;a++){var s=r[a],l="";if(s=s.replace(/^ *|\s*$/gi,""),t.measureText(s).width<i)n+=s+"\n";else{for(var p=i,h=s.split(" "),u=0;u<h.length;u++){var c=h[u],d=c+" ",_=t.measureText(d).width;if(p<_){if(0===u){for(var y=d;y.length&&(y=y.slice(0,-1),!((_=t.measureText(y).width)<=p)););if(!y.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var m=c.substr(y.length);h[u]=m,l+=y}var f=h[u].length?u:u+1,x=h.slice(f).join(" ").replace(/[ \n]*$/gi,"");r[a+1]=x+" "+(r[a+1]||""),o=r.length;break}l+=d,p-=_}n+=l.replace(/[ \n]*$/gi,"")+"\n"}}return n.replace(/[\s|\n]*$/gi,"")},U.Text.prototype.basicWordWrap=function(e){for(var t="",i=e.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,o=i[n].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,l=s+this.context.measureText(" ").width;r<l?(0<a&&(t+="\n"),t+=o[a]+" ",r=this.style.wordWrapWidth-s):(r-=l,t+=o[a]+" ")}n<i.length-1&&(t+="\n")}return t},U.Text.prototype.updateFont=function(e){var t=this.componentsToFont(e);this.style.font!==t&&(this.style.font=t,this.dirty=!0,this.parent&&this.updateTransform())},U.Text.prototype.fontToComponents=function(e){var t=e.match(/^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/);if(t){var i=t[5].trim();return/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(i)||/['",]/.exec(i)||(i="'"+i+"'"),{font:e,fontStyle:t[1]||"normal",fontVariant:t[2]||"normal",fontWeight:t[3]||"normal",fontSize:t[4]||"medium",fontFamily:i}}return{font:e}},U.Text.prototype.componentsToFont=function(e){var t,i=[];return(t=e.fontStyle)&&"normal"!==t&&i.push(t),(t=e.fontVariant)&&"normal"!==t&&i.push(t),(t=e.fontWeight)&&"normal"!==t&&i.push(t),(t=e.fontSize)&&"medium"!==t&&i.push(t),(t=e.fontFamily)&&i.push(t),i.length||i.push(e.font),i.join(" ")},U.Text.prototype.setText=function(e,t){return void 0===t&&(t=!1),this.text=e.toString()||"",t?this.updateText():this.dirty=!0,this},U.Text.prototype.parseList=function(e){if(!Array.isArray(e))return this;for(var t="",i=0;i<e.length;i++)Array.isArray(e[i])?(t+=e[i].join("\t"),i<e.length-1&&(t+="\n")):(t+=e[i],i<e.length-1&&(t+="\t"));return this.text=t,this.dirty=!0,this},U.Text.prototype.setTextBounds=function(e,t,i,n){return void 0===e?this.textBounds=null:(this.textBounds?this.textBounds.setTo(e,t,i,n):this.textBounds=new U.Rectangle(e,t,i,n),this.style.wordWrapWidth>i&&(this.style.wordWrapWidth=i)),this.updateTexture(),this},U.Text.prototype.updateTexture=function(){var e=this.texture.baseTexture,t=this.texture.crop,i=this.texture.frame,n=this.canvas.width,r=this.canvas.height;if(e.width=n,e.height=r,t.width=n,t.height=r,i.width=n,i.height=r,this.texture.width=n,this.texture.height=r,this._width=n,this._height=r,this.textBounds){var o=this.textBounds.x,a=this.textBounds.y;"right"===this.style.boundsAlignH?o+=this.textBounds.width-this.canvas.width/this.resolution:"center"===this.style.boundsAlignH&&(o+=this.textBounds.halfWidth-this.canvas.width/this.resolution/2),"bottom"===this.style.boundsAlignV?a+=this.textBounds.height-this.canvas.height/this.resolution:"middle"===this.style.boundsAlignV&&(a+=this.textBounds.halfHeight-this.canvas.height/this.resolution/2),this.pivot.x=-o,this.pivot.y=-a}this.renderable=0!==n&&0!==r,this.texture.requiresReTint=!0,this.texture.baseTexture.dirty()},U.Text.prototype._renderWebGL=function(e){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderWebGL.call(this,e)},U.Text.prototype._renderCanvas=function(e){this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype._renderCanvas.call(this,e)},U.Text.prototype.determineFontProperties=function(e){var t=U.Text.fontPropertiesCache[e];if(!t){t={};var i=U.Text.fontPropertiesCanvas,n=U.Text.fontPropertiesContext;n.font=e;var r=Math.ceil(n.measureText("|Mq").width),o=Math.ceil(n.measureText("|Mq").width),a=2*o;if(o=1.4*o|0,i.width=r,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,r,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|Mq",0,o),!n.getImageData(0,0,r,a))return t.ascent=o,t.descent=o+6,t.fontSize=t.ascent+t.descent,U.Text.fontPropertiesCache[e]=t;var s,l,p=n.getImageData(0,0,r,a).data,h=p.length,u=4*r,c=0,d=!1;for(s=0;s<o;s++){for(l=0;l<u;l+=4)if(255!==p[c+l]){d=!0;break}if(d)break;c+=u}for(t.ascent=o-s,c=h-u,d=!1,s=a;o<s;s--){for(l=0;l<u;l+=4)if(255!==p[c+l]){d=!0;break}if(d)break;c-=u}t.descent=s-o,t.descent+=6,t.fontSize=t.ascent+t.descent,U.Text.fontPropertiesCache[e]=t}return t},U.Text.prototype.getBounds=function(e){return this.dirty&&(this.updateText(),this.dirty=!1),PIXI.Sprite.prototype.getBounds.call(this,e)},Object.defineProperty(U.Text.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e.toString()||"",this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(U.Text.prototype,"cssFont",{get:function(){return this.componentsToFont(this._fontComponents)},set:function(e){e=e||"bold 20pt Arial",this._fontComponents=this.fontToComponents(e),this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"font",{get:function(){return this._fontComponents.fontFamily},set:function(e){e=(e=e||"Arial").trim(),/^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(e)||/['",]/.exec(e)||(e="'"+e+"'"),this._fontComponents.fontFamily=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontSize",{get:function(){var e=this._fontComponents.fontSize;return e&&/(?:^0$|px$)/.exec(e)?parseInt(e,10):e},set:function(e){"number"==typeof(e=e||"0")&&(e+="px"),this._fontComponents.fontSize=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontWeight",{get:function(){return this._fontComponents.fontWeight||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontWeight=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontStyle",{get:function(){return this._fontComponents.fontStyle||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontStyle=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fontVariant",{get:function(){return this._fontComponents.fontVariant||"normal"},set:function(e){e=e||"normal",this._fontComponents.fontVariant=e,this.updateFont(this._fontComponents)}}),Object.defineProperty(U.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(e){e!==this.style.fill&&(this.style.fill=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"align",{get:function(){return this.style.align},set:function(e){e!==this.style.align&&(this.style.align=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"resolution",{get:function(){return this._res},set:function(e){e!==this._res&&(this._res=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"tabs",{get:function(){return this.style.tabs},set:function(e){e!==this.style.tabs&&(this.style.tabs=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"boundsAlignH",{get:function(){return this.style.boundsAlignH},set:function(e){e!==this.style.boundsAlignH&&(this.style.boundsAlignH=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"boundsAlignV",{get:function(){return this.style.boundsAlignV},set:function(e){e!==this.style.boundsAlignV&&(this.style.boundsAlignV=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(e){e!==this.style.stroke&&(this.style.stroke=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(e){e!==this.style.strokeThickness&&(this.style.strokeThickness=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(e){e!==this.style.wordWrap&&(this.style.wordWrap=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(e){e!==this.style.wordWrapWidth&&(this.style.wordWrapWidth=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(e){e!==this._lineSpacing&&(this._lineSpacing=parseFloat(e),this.dirty=!0,this.parent&&this.updateTransform())}}),Object.defineProperty(U.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(e){e!==this.style.shadowOffsetX&&(this.style.shadowOffsetX=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(e){e!==this.style.shadowOffsetY&&(this.style.shadowOffsetY=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(e){e!==this.style.shadowColor&&(this.style.shadowColor=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(e){e!==this.style.shadowBlur&&(this.style.shadowBlur=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowStroke",{get:function(){return this.style.shadowStroke},set:function(e){e!==this.style.shadowStroke&&(this.style.shadowStroke=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"shadowFill",{get:function(){return this.style.shadowFill},set:function(e){e!==this.style.shadowFill&&(this.style.shadowFill=e,this.dirty=!0)}}),Object.defineProperty(U.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(e){this.scale.x=e/this.texture.frame.width,this._width=e}}),Object.defineProperty(U.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(e){this.scale.y=e/this.texture.frame.height,this._height=e}}),U.Text.fontPropertiesCache={},U.Text.fontPropertiesCanvas=document.createElement("canvas"),U.Text.fontPropertiesContext=U.Text.fontPropertiesCanvas.getContext("2d"),U.BitmapText=function(e,t,i,n,r,o,a){t=t||0,i=i||0,n=n||"",r=r||"",o=o||32,a=a||"left",PIXI.DisplayObjectContainer.call(this),this.type=U.BITMAPTEXT,this.physicsType=U.SPRITE,this.textWidth=0,this.textHeight=0,this.anchor=new U.Point,this._prevAnchor=new U.Point,this._glyphs=[],this._maxWidth=0,this._text=r.toString()||"",this._data=e.cache.getBitmapFont(n),this._font=n,this._fontSize=o,this._align=a,this._tint=16777215,this.updateText(),this.dirty=!1,U.Component.Core.init.call(this,e,t,i,"",null)},U.BitmapText.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),U.BitmapText.prototype.constructor=U.BitmapText,U.Component.Core.install.call(U.BitmapText.prototype,["Angle","AutoCull","Bounds","Destroy","FixedToCamera","InputEnabled","InWorld","LifeSpan","PhysicsBody","Reset"]),U.BitmapText.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.BitmapText.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.BitmapText.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.BitmapText.prototype.preUpdateCore=U.Component.Core.preUpdate,U.BitmapText.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.BitmapText.prototype.postUpdate=function(){U.Component.PhysicsBody.postUpdate.call(this),U.Component.FixedToCamera.postUpdate.call(this),this.body&&this.body.type===U.Physics.ARCADE&&(this.textWidth===this.body.sourceWidth&&this.textHeight===this.body.sourceHeight||this.body.setSize(this.textWidth,this.textHeight))},U.BitmapText.prototype.setText=function(e){this.text=e},U.BitmapText.prototype.scanLine=function(e,t,i){for(var n=0,r=0,o=-1,a=0,s=null,l=0<this._maxWidth?this._maxWidth:null,p=[],h=0;h<i.length;h++){var u=h===i.length-1;if(/(?:\r\n|\r|\n)/.test(i.charAt(h)))return{width:r,text:i.substr(0,h),end:u,chars:p};var c,d=i.charCodeAt(h),_=e.chars[d];void 0===_&&(d=32,_=e.chars[d]);var y=s&&_.kerning[s]?_.kerning[s]:0;if(/(\s)/.test(i.charAt(h))&&(o=h,a=r),c=(y+_.texture.width+_.xOffset)*t,l&&l<=r+c&&-1<o)return{width:a||r,text:i.substr(0,h-(h-o)),end:u,chars:p};r+=(_.xAdvance+y)*t,p.push(n+(_.xOffset+y)*t),n+=(_.xAdvance+y)*t,s=d}return{width:r,text:i,end:u,chars:p}},U.BitmapText.prototype.cleanText=function(e,t){void 0===t&&(t="");var i=this._data.font;if(!i)return"";for(var n=e.replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),r=0;r<n.length;r++){for(var o="",a=n[r],s=0;s<a.length;s++)o=i.chars[a.charCodeAt(s)]?o.concat(a[s]):o.concat(t);n[r]=o}return n.join("\n")},U.BitmapText.prototype.updateText=function(){var e=this._data.font;if(e){var t=this.text,i=this._fontSize/e.size,n=[],r=0;this.textWidth=0;do{(h=this.scanLine(e,i,t)).y=r,n.push(h),h.width>this.textWidth&&(this.textWidth=h.width),r+=e.lineHeight*i,t=t.substr(h.text.length+1)}while(!1===h.end);this.textHeight=r;for(var o=0,a=0,s=this.textWidth*this.anchor.x,l=this.textHeight*this.anchor.y,p=0;p<n.length;p++){var h=n[p];"right"===this._align?a=this.textWidth-h.width:"center"===this._align&&(a=(this.textWidth-h.width)/2);for(var u=0;u<h.text.length;u++){var c=h.text.charCodeAt(u),d=e.chars[c];void 0===d&&(c=32,d=e.chars[c]);var _=this._glyphs[o];_?_.texture=d.texture:((_=new PIXI.Sprite(d.texture)).name=h.text[u],this._glyphs.push(_)),_.position.x=h.chars[u]+a-s,_.position.y=h.y+d.yOffset*i-l,_.scale.set(i),_.tint=this.tint,_.texture.requiresReTint=!0,_.parent||this.addChild(_),o++}}for(p=o;p<this._glyphs.length;p++)this.removeChild(this._glyphs[p])}},U.BitmapText.prototype.purgeGlyphs=function(){for(var e=this._glyphs.length,t=[],i=0;i<this._glyphs.length;i++)this._glyphs[i].parent!==this?this._glyphs[i].destroy():t.push(this._glyphs[i]);return this._glyphs=[],this._glyphs=t,this.updateText(),e-t.length},U.BitmapText.prototype.updateTransform=function(){!this.dirty&&this.anchor.equals(this._prevAnchor)||(this.updateText(),this.dirty=!1,this._prevAnchor.copyFrom(this.anchor)),PIXI.DisplayObjectContainer.prototype.updateTransform.call(this)},Object.defineProperty(U.BitmapText.prototype,"align",{get:function(){return this._align},set:function(e){e===this._align||"left"!==e&&"center"!==e&&"right"!==e||(this._align=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(e){e!==this._tint&&(this._tint=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"font",{get:function(){return this._font},set:function(e){e!==this._font&&(this._font=e.trim(),this._data=this.game.cache.getBitmapFont(this._font),this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(e){(e=parseInt(e,10))!==this._fontSize&&0<e&&(this._fontSize=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"text",{get:function(){return this._text},set:function(e){e!==this._text&&(this._text=e.toString()||"",this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(e){e!==this._maxWidth&&(this._maxWidth=e,this.updateText())}}),Object.defineProperty(U.BitmapText.prototype,"smoothed",{get:function(){return!this._data.base.scaleMode},set:function(e){this._data.base.scaleMode=e?0:1}}),U.RetroFont=function(e,t,i,n,r,o,a,s,l,p){if(!e.cache.checkImageKey(t))return!1;null!=o||(o=e.cache.getImage(t).width/i),this.characterWidth=i,this.characterHeight=n,this.characterSpacingX=a||0,this.characterSpacingY=s||0,this.characterPerRow=o,this.offsetX=l||0,this.offsetY=p||0,this.align="left",this.multiLine=!1,this.autoUpperCase=!0,this.customSpacingX=0,this.customSpacingY=0,this.fixedWidth=0,this.fontSet=e.cache.getImage(t),this._text="",this.grabData=[],this.frameData=new U.FrameData;for(var h=this.offsetX,u=this.offsetY,c=0,d=0;d<r.length;d++){var _=this.frameData.addFrame(new U.Frame(d,h,u,this.characterWidth,this.characterHeight));this.grabData[r.charCodeAt(d)]=_.index,++c===this.characterPerRow?(c=0,h=this.offsetX,u+=this.characterHeight+this.characterSpacingY):h+=this.characterWidth+this.characterSpacingX}e.cache.updateFrameData(t,this.frameData),this.stamp=new U.Image(e,0,0,t,0),U.RenderTexture.call(this,e,100,100,"",U.scaleModes.NEAREST),this.type=U.RETROFONT},U.RetroFont.prototype=Object.create(U.RenderTexture.prototype),U.RetroFont.prototype.constructor=U.RetroFont,U.RetroFont.ALIGN_LEFT="left",U.RetroFont.ALIGN_RIGHT="right",U.RetroFont.ALIGN_CENTER="center",U.RetroFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",U.RetroFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",U.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",U.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",U.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",U.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",U.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",U.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",U.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",U.RetroFont.prototype.setFixedWidth=function(e,t){void 0===t&&(t="left"),this.fixedWidth=e,this.align=t},U.RetroFont.prototype.setText=function(e,t,i,n,r,o){this.multiLine=t||!1,this.customSpacingX=i||0,this.customSpacingY=n||0,this.align=r||"left",this.autoUpperCase=!o,0<e.length&&(this.text=e)},U.RetroFont.prototype.buildRetroFontText=function(){var e=0,t=0;if(this.clear(),this.multiLine){var i=this._text.split("\n");0<this.fixedWidth?this.resize(this.fixedWidth,i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0);for(var n=0;n<i.length;n++)e=0,this.align===U.RetroFont.ALIGN_RIGHT?e=this.width-i[n].length*(this.characterWidth+this.customSpacingX):this.align===U.RetroFont.ALIGN_CENTER&&(e=this.width/2-i[n].length*(this.characterWidth+this.customSpacingX)/2,e+=this.customSpacingX/2),e<0&&(e=0),this.pasteLine(i[n],e,t,this.customSpacingX),t+=this.characterHeight+this.customSpacingY}else 0<this.fixedWidth?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),e=0,this.align===U.RetroFont.ALIGN_RIGHT?e=this.width-this._text.length*(this.characterWidth+this.customSpacingX):this.align===U.RetroFont.ALIGN_CENTER&&(e=this.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2,e+=this.customSpacingX/2),e<0&&(e=0),this.pasteLine(this._text,e,0,this.customSpacingX);this.requiresReTint=!0},U.RetroFont.prototype.pasteLine=function(e,t,i,n){for(var r=0;r<e.length;r++)if(" "===e.charAt(r))t+=this.characterWidth+n;else if(0<=this.grabData[e.charCodeAt(r)]&&(this.stamp.frame=this.grabData[e.charCodeAt(r)],this.renderXY(this.stamp,t,i,!1),(t+=this.characterWidth+n)>this.width))break},U.RetroFont.prototype.getLongestLine=function(){var e=0;if(0<this._text.length)for(var t=this._text.split("\n"),i=0;i<t.length;i++)t[i].length>e&&(e=t[i].length);return e},U.RetroFont.prototype.removeUnsupportedCharacters=function(e){for(var t="",i=0;i<this._text.length;i++){var n=this._text[i],r=n.charCodeAt(0);(0<=this.grabData[r]||!e&&"\n"===n)&&(t=t.concat(n))}return t},U.RetroFont.prototype.updateOffset=function(e,t){if(this.offsetX!==e||this.offsetY!==t){for(var i=e-this.offsetX,n=t-this.offsetY,r=this.game.cache.getFrameData(this.stamp.key).getFrames(),o=r.length;o--;)r[o].x+=i,r[o].y+=n;this.buildRetroFontText()}},Object.defineProperty(U.RetroFont.prototype,"text",{get:function(){return this._text},set:function(e){var t;(t=this.autoUpperCase?e.toUpperCase():e)!==this._text&&(this._text=t,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())}}),Object.defineProperty(U.RetroFont.prototype,"smoothed",{get:function(){return this.stamp.smoothed},set:function(e){this.stamp.smoothed=e,this.buildRetroFontText()}}),U.Rope=function(e,t,i,n,r,o){this.points=[],this.points=o,this._hasUpdateAnimation=!1,this._updateAnimationCallback=null,t=t||0,i=i||0,n=n||null,r=r||null,this.type=U.ROPE,PIXI.Rope.call(this,U.Cache.DEFAULT,this.points),U.Component.Core.init.call(this,e,t,i,n,r)},U.Rope.prototype=Object.create(PIXI.Rope.prototype),U.Rope.prototype.constructor=U.Rope,U.Component.Core.install.call(U.Rope.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Crop","Delta","Destroy","FixedToCamera","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","ScaleMinMax","Smoothed"]),U.Rope.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.Rope.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.Rope.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.Rope.prototype.preUpdateCore=U.Component.Core.preUpdate,U.Rope.prototype.preUpdate=function(){return!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.Rope.prototype.update=function(){this._hasUpdateAnimation&&this.updateAnimation.call(this)},U.Rope.prototype.reset=function(e,t){return U.Component.Reset.prototype.reset.call(this,e,t),this},Object.defineProperty(U.Rope.prototype,"updateAnimation",{get:function(){return this._updateAnimation},set:function(e){e&&"function"==typeof e?(this._hasUpdateAnimation=!0,this._updateAnimation=e):(this._hasUpdateAnimation=!1,this._updateAnimation=null)}}),Object.defineProperty(U.Rope.prototype,"segments",{get:function(){for(var e,t,i,n,r,o,a,s,l=[],p=0;p<this.points.length;p++)e=4*p,t=this.vertices[e]*this.scale.x,i=this.vertices[e+1]*this.scale.y,n=this.vertices[e+4]*this.scale.x,r=this.vertices[e+3]*this.scale.y,o=U.Math.difference(t,n),a=U.Math.difference(i,r),t+=this.world.x,i+=this.world.y,s=new U.Rectangle(t,i,o,a),l.push(s);return l}}),U.TileSprite=function(e,t,i,n,r,o,a){t=t||0,i=i||0,n=n||256,r=r||256,o=o||null,a=a||null,this.type=U.TILESPRITE,this.physicsType=U.SPRITE,this._scroll=new U.Point;var s=e.cache.getImage("__default",!0);PIXI.TilingSprite.call(this,new PIXI.Texture(s.base),n,r),U.Component.Core.init.call(this,e,t,i,o,a)},U.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype),U.TileSprite.prototype.constructor=U.TileSprite,U.Component.Core.install.call(U.TileSprite.prototype,["Angle","Animation","AutoCull","Bounds","BringToTop","Destroy","FixedToCamera","Health","InCamera","InputEnabled","InWorld","LifeSpan","LoadTexture","Overlap","PhysicsBody","Reset","Smoothed"]),U.TileSprite.prototype.preUpdatePhysics=U.Component.PhysicsBody.preUpdate,U.TileSprite.prototype.preUpdateLifeSpan=U.Component.LifeSpan.preUpdate,U.TileSprite.prototype.preUpdateInWorld=U.Component.InWorld.preUpdate,U.TileSprite.prototype.preUpdateCore=U.Component.Core.preUpdate,U.TileSprite.prototype.preUpdate=function(){return 0!==this._scroll.x&&(this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed),0!==this._scroll.y&&(this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed),!!(this.preUpdatePhysics()&&this.preUpdateLifeSpan()&&this.preUpdateInWorld())&&this.preUpdateCore()},U.TileSprite.prototype.autoScroll=function(e,t){this._scroll.set(e,t)},U.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0)},U.TileSprite.prototype.destroy=function(e){U.Component.Destroy.prototype.destroy.call(this,e),PIXI.TilingSprite.prototype.destroy.call(this)},U.TileSprite.prototype.reset=function(e,t){return U.Component.Reset.prototype.reset.call(this,e,t),this.tilePosition.x=0,this.tilePosition.y=0,this},U.Device=function(){this.deviceReadyAt=0,this.initialized=!1,this.desktop=!1,this.iOS=!1,this.iOSVersion=0,this.cocoonJS=!1,this.cocoonJSApp=!1,this.wechatMinigame=!1,this.cordova=!1,this.node=!1,this.nodeWebkit=!1,this.electron=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.canvasBitBltShift=null,this.webGL=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.worker=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!0,this.quirksMode=!1,this.touch=!1,this.mspointer=!1,this.wheelEvent=null,this.arora=!1,this.chrome=!1,this.chromeVersion=0,this.epiphany=!1,this.firefox=!1,this.firefoxVersion=0,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.edge=!1,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.safariVersion=0,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.dolby=!1,this.oggVideo=!1,this.h264Video=!1,this.mp4Video=!1,this.webmVideo=!1,this.vp9Video=!1,this.hlsVideo=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.LITTLE_ENDIAN=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1},U.Device=new U.Device,U.Device.onInitialized=new U.Signal,U.Device.whenReady=function(e,t,i){var n=this._readyCheck;if(this.deviceReadyAt||!n)e.call(t,this);else if(n._monitor||i)n._queue=n._queue||[],n._queue.push([e,t]);else{n._monitor=n.bind(this),n._queue=n._queue||[],n._queue.push([e,t]);var r=void 0!==window.cordova,o=navigator.isCocoonJS;"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(n._monitor,0):r&&!o?document.addEventListener("deviceready",n._monitor,!1):(document.addEventListener("DOMContentLoaded",n._monitor,!1),window.addEventListener("load",n._monitor,!1))}},U.Device._readyCheck=function(){var e=this._readyCheck;if(document.body){if(!this.deviceReadyAt){this.deviceReadyAt=Date.now(),document.removeEventListener("deviceready",e._monitor),document.removeEventListener("DOMContentLoaded",e._monitor),window.removeEventListener("load",e._monitor),this._initialize(),this.initialized=!0,this.onInitialized.dispatch(this);for(var t;t=e._queue.shift();){var i=t[0],n=t[1];i.call(n,this)}this._readyCheck=null,this._initialize=null,this.onInitialized=null}}else window.setTimeout(e._monitor,20)},U.Device._initialize=function(){var e,t,i,n,r=this;(function(){var e=navigator.userAgent;/Playstation Vita/.test(e)?r.vita=!0:/Kindle/.test(e)||/\bKF[A-Z][A-Z]+/.test(e)||/Silk.*Mobile Safari/.test(e)?r.kindle=!0:/Android/.test(e)?r.android=!0:/CrOS/.test(e)?r.chromeOS=!0:/iP[ao]d|iPhone/i.test(e)?(r.iOS=!0,navigator.appVersion.match(/OS (\d+)/),r.iOSVersion=parseInt(RegExp.$1,10)):/Linux/.test(e)?r.linux=!0:/Mac OS/.test(e)?r.macOS=!0:/Windows/.test(e)&&(r.windows=!0),(/Windows Phone/i.test(e)||/IEMobile/i.test(e))&&(r.android=!1,r.iOS=!1,r.macOS=!1,r.windows=!0,r.windowsPhone=!0);var t=/Silk/.test(e);(r.windows||r.macOS||r.linux&&!t||r.chromeOS)&&(r.desktop=!0),(r.windowsPhone||/Windows NT/i.test(e)&&/Touch/i.test(e))&&(r.desktop=!1)})(),function(){var e=navigator.userAgent;if(/Arora/.test(e)?r.arora=!0:/Edge\/\d+/.test(e)?r.edge=!0:/Chrome\/(\d+)/.test(e)&&!r.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(e)?r.epiphany=!0:/Firefox\D+(\d+)/.test(e)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(e)&&r.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(e)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(e)?r.midori=!0:/Opera/.test(e)?r.opera=!0:/Safari\/(\d+)/.test(e)&&!r.windowsPhone?(r.safari=!0,/Version\/(\d+)\./.test(e)&&(r.safariVersion=parseInt(RegExp.$1,10))):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(e)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(e)&&(r.silk=!0),navigator.standalone&&(r.webApp=!0),void 0!==window.cordova&&(r.cordova=!0),"undefined"!=typeof process&&"undefined"!=typeof require&&(r.node=!0),r.node&&"object"==typeof process.versions&&(r.nodeWebkit=!!process.versions["node-webkit"],r.electron=!!process.versions.electron),navigator.isCocoonJS&&(r.cocoonJS=!0),void 0!==window.wx&&(r.wechatMinigame=!0),r.cocoonJS)try{r.cocoonJSApp="undefined"!=typeof CocoonJS}catch(e){r.cocoonJSApp=!1}void 0!==window.ejecta&&(r.ejecta=!0),/Crosswalk/.test(e)&&(r.crosswalk=!0)}(),function(){r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var e=document.createElement("audio");try{if(e.canPlayType&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(r.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(r.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(r.mp3=!0),e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(r.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(r.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(r.webm=!0),""!==e.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)r.dolby=!0;else if(r.safari&&9<=r.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var t=parseInt(RegExp.$1,10),i=parseInt(RegExp.$2,10);(10===t&&11<=i||10<t)&&(r.dolby=!0)}}catch(e){}}(),function(){var e=document.createElement("video");try{e.canPlayType&&(e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(r.oggVideo=!0),e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.h264Video=!0,r.mp4Video=!0),e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(r.webmVideo=!0),e.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(r.vp9Video=!0),e.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.hlsVideo=!0))}catch(e){}}(),function(){var e,t=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var n in document.body.insertBefore(t,null),i)void 0!==t.style[n]&&(t.style[n]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(i[n]));document.body.removeChild(t),r.css3D=void 0!==e&&0<e.length&&"none"!==e}(),r.pixelRatio=window.devicePixelRatio||1,r.iPhone=-1!==navigator.userAgent.toLowerCase().indexOf("iphone"),r.iPhone4=2===r.pixelRatio&&r.iPhone,r.iPad=!!(!(n=-1!==navigator.userAgent.toLowerCase().indexOf("ipad"))&&navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints)||n,"undefined"!=typeof Int8Array?r.typedArray=!0:r.typedArray=!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(r.littleEndian=(e=new ArrayBuffer(4),t=new Uint8Array(e),i=new Uint32Array(e),t[0]=161,t[1]=178,t[2]=195,t[3]=212,3569595041===i[0]||2712847316!==i[0]&&null),r.LITTLE_ENDIAN=r.littleEndian),r.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==r.littleEndian&&function(){if(void 0===Uint8ClampedArray)return!1;var e=PIXI.CanvasPool.create(this,1,1).getContext("2d");if(!e)return!1;var t=e.createImageData(1,1);return PIXI.CanvasPool.remove(this),t.data instanceof Uint8ClampedArray}(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),function(){r.canvas=!!window.CanvasRenderingContext2D||r.cocoonJS;try{r.localStorage=!!localStorage.getItem}catch(t){r.localStorage=!1}r.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),r.fileSystem=!!window.requestFileSystem;var t={stencil:!0};r.webGL=function(){try{var e=document.createElement("canvas");return e.screencanvas=!1,!!window.WebGLRenderingContext&&(e.getContext("webgl",t)||e.getContext("experimental-webgl",t))}catch(e){return!1}}(),r.webGL=!!r.webGL,r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,r.quirksMode="CSS1Compat"!==document.compatMode,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(r.getUserMedia=!1),!r.iOS&&(r.ie||r.firefox||r.chrome)&&(r.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(r.canvasBitBltShift=!1)}(),function(){for(var e=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],t=document.createElement("div"),i=0;i<e.length;i++)if(t[e[i]]){r.fullscreen=!0,r.requestFullscreen=e[i];break}var n=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(r.fullscreen)for(i=0;i<n.length;i++)if(document[n[i]]){r.cancelFullscreen=n[i];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(r.fullscreenKeyboard=!0)}(),("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&1<=window.navigator.maxTouchPoints)&&(r.touch=!0),(window.PointerEvent||window.MSPointerEvent||window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(r.mspointer=!0),r.cocoonJS||("onwheel"in window||r.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll"))},U.Device.canPlayAudio=function(e){return!!("mp3"===e&&this.mp3||"ogg"===e&&(this.ogg||this.opus)||"m4a"===e&&this.m4a||"opus"===e&&this.opus||"wav"===e&&this.wav||"webm"===e&&this.webm||"mp4"===e&&this.dolby)},U.Device.canPlayVideo=function(e){return!!("webm"===e&&(this.webmVideo||this.vp9Video)||"mp4"===e&&(this.mp4Video||this.h264Video)||("ogg"===e||"ogv"===e)&&this.oggVideo||"mpeg"===e&&this.hlsVideo)},U.Device.isConsoleOpen=function(){return!(!window.console||!window.console.firebug)||!(!window.console||(console.clear,!console.profiles))&&0<console.profiles.length},U.Device.isAndroidStockBrowser=function(){var e=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return e&&e[1]<537},U.Canvas={create:function(e,t,i,n,r){t=t||256,i=i||256;var o=r?document.createElement("canvas"):PIXI.CanvasPool.create(e,t,i);return"string"==typeof n&&""!==n&&(o.id=n),o.width=t,o.height=i,o.style.display="block",o},setBackgroundColor:function(e,t){return t=t||"rgb(0,0,0)",e.style.backgroundColor=t,e},setTouchAction:function(e,t){return t=t||"none",e.style.msTouchAction=t,e.style["ms-touch-action"]=t,e.style["touch-action"]=t,e},setUserSelect:function(e,t){return t=t||"none",e.style["-webkit-touch-callout"]=t,e.style["-webkit-user-select"]=t,e.style["-khtml-user-select"]=t,e.style["-moz-user-select"]=t,e.style["-ms-user-select"]=t,e.style["user-select"]=t,e.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",e},addToDOM:function(e,t,i){var n;return void 0===i&&(i=!0),t&&("string"==typeof t?n=document.getElementById(t):"object"==typeof t&&1===t.nodeType&&(n=t)),n||(n=document.body),i&&n.style&&(n.style.overflow="hidden"),n.appendChild(e),e},removeFromDOM:function(e){e.parentNode&&e.parentNode.removeChild(e)},setTransform:function(e,t,i,n,r,o,a){return e.setTransform(n,o,a,r,t,i),e},setSmoothingEnabled:function(e,t){var i=U.Canvas.getSmoothingPrefix(e);return i&&(e[i]=t),e},getSmoothingPrefix:function(e){var t=["i","webkitI","msI","mozI","oI"];for(var i in t){var n=t[i]+"mageSmoothingEnabled";if(n in e)return n}return null},getSmoothingEnabled:function(e){var t=U.Canvas.getSmoothingPrefix(e);if(t)return e[t]},setImageRenderingCrisp:function(e){for(var t=["optimizeSpeed","crisp-edges","-moz-crisp-edges","-webkit-optimize-contrast","optimize-contrast","pixelated"],i=0;i<t.length;i++)e.style["image-rendering"]=t[i];return e.style.msInterpolationMode="nearest-neighbor",e},setImageRenderingBicubic:function(e){return e.style["image-rendering"]="auto",e.style.msInterpolationMode="bicubic",e}},U.RequestAnimationFrame=function(e,t){void 0===t&&(t=!1),this.game=e,this.isRunning=!1,this.forceSetTimeOut=t;for(var i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},U.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(e){this.isRunning&&(this.game.update(Math.floor(e)),this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateSetTimeout:function(){this.isRunning&&(this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall))},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return!1===this._isSetTimeOut}},U.RequestAnimationFrame.prototype.constructor=U.RequestAnimationFrame,U.Math={PI2:2*Math.PI,between:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},fuzzyEqual:function(e,t,i){return void 0===i&&(i=1e-4),Math.abs(e-t)<i},fuzzyLessThan:function(e,t,i){return void 0===i&&(i=1e-4),e<t+i},fuzzyGreaterThan:function(e,t,i){return void 0===i&&(i=1e-4),t-i<e},fuzzyCeil:function(e,t){return void 0===t&&(t=1e-4),Math.ceil(e-t)},fuzzyFloor:function(e,t){return void 0===t&&(t=1e-4),Math.floor(e+t)},average:function(){for(var e=0,t=arguments.length,i=0;i<t;i++)e+=+arguments[i];return e/t},shear:function(e){return e%1},snapTo:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.round(e/t)))},snapToFloor:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.floor(e/t)))},snapToCeil:function(e,t,i){return void 0===i&&(i=0),0===t?e:(e-=i,i+(e=t*Math.ceil(e/t)))},roundTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.round(e*n)/n},floorTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.floor(e*n)/n},ceilTo:function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=10);var n=Math.pow(i,-t);return Math.ceil(e*n)/n},rotateToAngle:function(e,t,i){return void 0===i&&(i=.05),e===t||(Math.abs(t-e)<=i||Math.abs(t-e)>=U.Math.PI2-i?e=t:(Math.abs(t-e)>Math.PI&&(t<e?t+=U.Math.PI2:t-=U.Math.PI2),e<t?e+=i:t<e&&(e-=i))),e},getShortestAngle:function(e,t){var i=t-e;return 0===i?0:i-360*Math.floor((i- -180)/360)},angleBetween:function(e,t,i,n){return Math.atan2(n-t,i-e)},angleBetweenY:function(e,t,i,n){return Math.atan2(i-e,n-t)},angleBetweenPoints:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},angleBetweenPointsY:function(e,t){return Math.atan2(t.x-e.x,t.y-e.y)},reverseAngle:function(e){return this.normalizeAngle(e+Math.PI,!0)},normalizeAngle:function(e){return 0<=(e%=2*Math.PI)?e:e+2*Math.PI},maxAdd:function(e,t,i){return Math.min(e+t,i)},minSub:function(e,t,i){return Math.max(e-t,i)},wrap:function(e,t,i){var n=i-t;if(n<=0)return 0;var r=(e-t)%n;return r<0&&(r+=n),r+t},wrapValue:function(e,t,i){return((e=Math.abs(e))+(t=Math.abs(t)))%(i=Math.abs(i))},isOdd:function(e){return!!(1&e)},isEven:function(e){return!(1&e)},min:function(){if(1===arguments.length&&"object"==typeof arguments[0])var e=arguments[0];else e=arguments;for(var t=1,i=0,n=e.length;t<n;t++)e[t]<e[i]&&(i=t);return e[i]},max:function(){if(1===arguments.length&&"object"==typeof arguments[0])var e=arguments[0];else e=arguments;for(var t=1,i=0,n=e.length;t<n;t++)e[t]>e[i]&&(i=t);return e[i]},minProperty:function(e){if(2===arguments.length&&"object"==typeof arguments[1])var t=arguments[1];else t=arguments.slice(1);for(var i=1,n=0,r=t.length;i<r;i++)t[i][e]<t[n][e]&&(n=i);return t[n][e]},maxProperty:function(e){if(2===arguments.length&&"object"==typeof arguments[1])var t=arguments[1];else t=arguments.slice(1);for(var i=1,n=0,r=t.length;i<r;i++)t[i][e]>t[n][e]&&(n=i);return t[n][e]},wrapAngle:function(e,t){return t?this.wrap(e,-Math.PI,Math.PI):this.wrap(e,-180,180)},linearInterpolation:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n);return t<0?this.linear(e[0],e[1],n):1<t?this.linear(e[i],e[i-1],i-n):this.linear(e[r],e[i<r+1?i:r+1],n-r)},bezierInterpolation:function(e,t){for(var i=0,n=e.length-1,r=0;r<=n;r++)i+=Math.pow(1-t,n-r)*Math.pow(t,r)*e[r]*this.bernstein(n,r);return i},catmullRomInterpolation:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n);return e[0]===e[i]?(t<0&&(r=Math.floor(n=i*(1+t))),this.catmullRom(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)):t<0?e[0]-(this.catmullRom(e[0],e[0],e[1],e[1],-n)-e[0]):1<t?e[i]-(this.catmullRom(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):this.catmullRom(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)},linear:function(e,t,i){return(t-e)*i+e},bernstein:function(e,t){return this.factorial(e)/this.factorial(t)/this.factorial(e-t)},factorial:function(e){if(0===e)return 1;for(var t=e;--e;)t*=e;return t},catmullRom:function(e,t,i,n,r){var o=.5*(i-e),a=.5*(n-t),s=r*r;return(2*t-2*i+o+a)*(r*s)+(-3*t+3*i-2*o-a)*s+o*r+t},difference:function(e,t){return Math.abs(e-t)},roundAwayFromZero:function(e){return 0<e?Math.ceil(e):Math.floor(e)},sinCosGenerator:function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1);for(var r=t,o=i,a=n*Math.PI/e,s=[],l=[],p=0;p<e;p++)r+=(o-=r*a)*a,s[p]=o,l[p]=r;return{sin:l,cos:s,length:e}},distance:function(e,t,i,n){var r=e-i,o=t-n;return Math.sqrt(r*r+o*o)},distanceSq:function(e,t,i,n){var r=e-i,o=t-n;return r*r+o*o},distancePow:function(e,t,i,n,r){return void 0===r&&(r=2),Math.sqrt(Math.pow(i-e,r)+Math.pow(n-t,r))},clamp:function(e,t,i){return e<t?t:i<e?i:e},clampBottom:function(e,t){return e<t?t:e},within:function(e,t,i){return Math.abs(e-t)<=i},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},smoothstep:function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*(3-2*e)},smootherstep:function(e,t,i){return(e=Math.max(0,Math.min(1,(e-t)/(i-t))))*e*e*(e*(6*e-15)+10)},sign:function(e){return e<0?-1:0<e?1:0},percent:function(e,t,i){return void 0===i&&(i=0),t<e||t<i?1:e<i||e<i?0:(e-i)/t}};var a=Math.PI/180,s=180/Math.PI;return U.Math.degToRad=function(e){return e*a},U.Math.radToDeg=function(e){return e*s},U.RandomDataGenerator=function(e){void 0===e&&(e=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,"string"==typeof e?this.state(e):this.sow(e)},U.RandomDataGenerator.prototype={rnd:function(){var e=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|e,this.s0=this.s1,this.s1=this.s2,this.s2=e-this.c,this.s2},sow:function(e){if(this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1,e)for(var t=0;t<e.length&&null!=e[t];t++){var i=e[t];this.s0-=this.hash(i),this.s0+=~~(this.s0<0),this.s1-=this.hash(i),this.s1+=~~(this.s1<0),this.s2-=this.hash(i),this.s2+=~~(this.s2<0)}},hash:function(e){var t,i,n;for(n=4022871197,e=e.toString(),i=0;i<e.length;i++)t=.02519603282416938*(n+=e.charCodeAt(i)),t-=n=t>>>0,n=(t*=n)>>>0,n+=4294967296*(t-=n);return 2.3283064365386963e-10*(n>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+11102230246251565e-32*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(e,t){return Math.floor(this.realInRange(0,t-e+1)+e)},between:function(e,t){return this.integerInRange(e,t)},realInRange:function(e,t){return this.frac()*(t-e)+e},normal:function(){return 1-2*this.frac()},uuid:function(){var e="",t="";for(t=e="";e++<36;t+=~e%5|3*e&4?(15^e?8^this.frac()*(20^e?16:4):4).toString(16):"-");return t},pick:function(e){return e[this.integerInRange(0,e.length-1)]},sign:function(){return this.pick([-1,1])},weightedPick:function(e){return e[~~(Math.pow(this.frac(),2)*(e.length-1)+.5)]},timestamp:function(e,t){return this.realInRange(e||9466848e5,t||1577862e6)},angle:function(){return this.integerInRange(-180,180)},state:function(e){return"string"==typeof e&&e.match(/^!rnd/)&&(e=e.split(","),this.c=parseFloat(e[1]),this.s0=parseFloat(e[2]),this.s1=parseFloat(e[3]),this.s2=parseFloat(e[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")}},U.RandomDataGenerator.prototype.constructor=U.RandomDataGenerator,U.QuadTree=function(e,t,i,n,r,o,a){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.reset(e,t,i,n,r,o,a)},U.QuadTree.prototype={reset:function(e,t,i,n,r,o,a){this.maxObjects=r||10,this.maxLevels=o||4,this.level=a||0,this.bounds={x:Math.round(e),y:Math.round(t),width:i,height:n,subWidth:Math.floor(i/2),subHeight:Math.floor(n/2),right:Math.round(e)+Math.floor(i/2),bottom:Math.round(t)+Math.floor(n/2)},this.objects.length=0,this.nodes.length=0},populate:function(e){e.forEach(this.populateHandler,this,!0)},populateHandler:function(e){e.body&&e.exists&&this.insert(e.body)},split:function(){this.nodes[0]=new U.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[1]=new U.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[2]=new U.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1),this.nodes[3]=new U.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level+1)},insert:function(e){var t,i=0;if(null==this.nodes[0]||-1===(t=this.getIndex(e))){if(this.objects.push(e),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();i<this.objects.length;)-1!==(t=this.getIndex(this.objects[i]))?this.nodes[t].insert(this.objects.splice(i,1)[0]):i++}else this.nodes[t].insert(e)},getIndex:function(e){var t=-1;return e.x<this.bounds.right&&e.right<this.bounds.right?e.y<this.bounds.bottom&&e.bottom<this.bounds.bottom?t=1:e.y>this.bounds.bottom&&(t=2):e.x>this.bounds.right&&(e.y<this.bounds.bottom&&e.bottom<this.bounds.bottom?t=0:e.y>this.bounds.bottom&&(t=3)),t},retrieve:function(e){if(e instanceof U.Rectangle)var t=this.objects,i=this.getIndex(e);else{if(!e.body)return this._empty;t=this.objects,i=this.getIndex(e.body)}return this.nodes[0]&&(-1!==i?t=t.concat(this.nodes[i].retrieve(e)):t=(t=(t=(t=t.concat(this.nodes[0].retrieve(e))).concat(this.nodes[1].retrieve(e))).concat(this.nodes[2].retrieve(e))).concat(this.nodes[3].retrieve(e))),t},clear:function(){this.objects.length=0;for(var e=this.nodes.length;e--;)this.nodes[e].clear(),this.nodes.splice(e,1);this.nodes.length=0}},U.QuadTree.prototype.constructor=U.QuadTree,U.Net=function(e){this.game=e},U.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(e){return-1!==window.location.hostname.indexOf(e)},updateQueryString:function(e,t,i,n){void 0===i&&(i=!1),void 0!==n&&""!==n||(n=window.location.href);var r="",o=new RegExp("([?|&])"+e+"=.*?(&|#|$)(.*)","gi");if(o.test(n))r=null!=t?n.replace(o,"$1"+e+"="+t+"$2$3"):n.replace(o,"$1$3").replace(/(&|\?)$/,"");else if(null!=t){var a=-1!==n.indexOf("?")?"&":"?",s=n.split("#");n=s[0]+a+e+"="+t,s[1]&&(n+="#"+s[1]),r=n}else r=n;if(!i)return r;window.location.href=r},getQueryString:function(e){void 0===e&&(e="");var t={},i=location.search.substring(1).split("&");for(var n in i){var r=i[n].split("=");if(1<r.length){if(e&&e===this.decodeURI(r[0]))return this.decodeURI(r[1]);t[this.decodeURI(r[0])]=this.decodeURI(r[1])}}return t},decodeURI:function(e){return decodeURIComponent(e.replace(/\+/g," "))}},U.Net.prototype.constructor=U.Net,U.TweenManager=function(e){this.game=e,this.frameBased=!1,this._tweens=[],this._add=[],this.easeMap={Power0:U.Easing.Power0,Power1:U.Easing.Power1,Power2:U.Easing.Power2,Power3:U.Easing.Power3,Power4:U.Easing.Power4,Linear:U.Easing.Linear.None,Quad:U.Easing.Quadratic.Out,Cubic:U.Easing.Cubic.Out,Quart:U.Easing.Quartic.Out,Quint:U.Easing.Quintic.Out,Sine:U.Easing.Sinusoidal.Out,Expo:U.Easing.Exponential.Out,Circ:U.Easing.Circular.Out,Elastic:U.Easing.Elastic.Out,Back:U.Easing.Back.Out,Bounce:U.Easing.Bounce.Out,"Quad.easeIn":U.Easing.Quadratic.In,"Cubic.easeIn":U.Easing.Cubic.In,"Quart.easeIn":U.Easing.Quartic.In,"Quint.easeIn":U.Easing.Quintic.In,"Sine.easeIn":U.Easing.Sinusoidal.In,"Expo.easeIn":U.Easing.Exponential.In,"Circ.easeIn":U.Easing.Circular.In,"Elastic.easeIn":U.Easing.Elastic.In,"Back.easeIn":U.Easing.Back.In,"Bounce.easeIn":U.Easing.Bounce.In,"Quad.easeOut":U.Easing.Quadratic.Out,"Cubic.easeOut":U.Easing.Cubic.Out,"Quart.easeOut":U.Easing.Quartic.Out,"Quint.easeOut":U.Easing.Quintic.Out,"Sine.easeOut":U.Easing.Sinusoidal.Out,"Expo.easeOut":U.Easing.Exponential.Out,"Circ.easeOut":U.Easing.Circular.Out,"Elastic.easeOut":U.Easing.Elastic.Out,"Back.easeOut":U.Easing.Back.Out,"Bounce.easeOut":U.Easing.Bounce.Out,"Quad.easeInOut":U.Easing.Quadratic.InOut,"Cubic.easeInOut":U.Easing.Cubic.InOut,"Quart.easeInOut":U.Easing.Quartic.InOut,"Quint.easeInOut":U.Easing.Quintic.InOut,"Sine.easeInOut":U.Easing.Sinusoidal.InOut,"Expo.easeInOut":U.Easing.Exponential.InOut,"Circ.easeInOut":U.Easing.Circular.InOut,"Elastic.easeInOut":U.Easing.Elastic.InOut,"Back.easeInOut":U.Easing.Back.InOut,"Bounce.easeInOut":U.Easing.Bounce.InOut},this.game.onPause.add(this._pauseAll,this),this.game.onResume.add(this._resumeAll,this)},U.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var e=0;e<this._tweens.length;e++)this._tweens[e].pendingDelete=!0;this._add=[]},removeFrom:function(e,t){if(void 0===t&&(t=!0),Array.isArray(e))for(i=0,n=e.length;i<n;i++)this.removeFrom(e[i]);else if(e.type===U.GROUP&&t)for(var i=0,n=e.children.length;i<n;i++)this.removeFrom(e.children[i]);else{for(i=0,n=this._tweens.length;i<n;i++)e===this._tweens[i].target&&this.remove(this._tweens[i]);for(i=0,n=this._add.length;i<n;i++)e===this._add[i].target&&this.remove(this._add[i])}},add:function(e){(e._manager=this)._add.push(e)},create:function(e){return new U.Tween(e,this.game,this)},remove:function(e){var t=this._tweens.indexOf(e);-1!==t?this._tweens[t].pendingDelete=!0:-1!==(t=this._add.indexOf(e))&&(this._add[t].pendingDelete=!0)},update:function(){var e=this._add.length,t=this._tweens.length;if(0===t&&0===e)return!1;for(var i=0;i<t;)this._tweens[i].update(this.game.time.time)?i++:(this._tweens.splice(i,1),t--);return 0<e&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(t){return this._tweens.some(function(e){return e.target===t})},_pauseAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e]._pause()},_resumeAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e]._resume()},pauseAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e].pause()},resumeAll:function(){for(var e=this._tweens.length-1;0<=e;e--)this._tweens[e].resume(!0)}},U.TweenManager.prototype.constructor=U.TweenManager,U.Tween=function(e,t,i){this.game=t,this.target=e,this.manager=i,this.timeline=[],this.reverse=!1,this.timeScale=1,this.repeatCounter=0,this.pendingDelete=!1,this.onStart=new U.Signal,this.onLoop=new U.Signal,this.onRepeat=new U.Signal,this.onChildComplete=new U.Signal,this.onComplete=new U.Signal,this.isRunning=!1,this.current=0,this.properties={},this.chainedTween=null,this.isPaused=!1,this.frameBased=i.frameBased,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._pausedTime=0,this._codePaused=!1,this._hasStarted=!1},U.Tween.prototype={to:function(e,t,i,n,r,o,a){return(void 0===t||t<=0)&&(t=1e3),null!=i||(i=U.Easing.Default),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new U.TweenData(this).to(e,t,i,r,o,a)),n&&this.start()),this},from:function(e,t,i,n,r,o,a){return void 0===t&&(t=1e3),null!=i||(i=U.Easing.Default),void 0===n&&(n=!1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=!1),"string"==typeof i&&this.manager.easeMap[i]&&(i=this.manager.easeMap[i]),this.isRunning||(this.timeline.push(new U.TweenData(this).from(e,t,i,r,o,a)),n&&this.start()),this},start:function(e){if(void 0===e&&(e=0),null===this.game||null===this.target||0===this.timeline.length||this.isRunning)return this;for(var t=0;t<this.timeline.length;t++)for(var i in this.timeline[t].vEnd)this.properties[i]=this.target[i]||0,Array.isArray(this.properties[i])||(this.properties[i]*=1);for(t=0;t<this.timeline.length;t++)this.timeline[t].loadValues();return this.manager.add(this),this.isRunning=!0,(e<0||e>this.timeline.length-1)&&(e=0),this.current=e,this.timeline[this.current].start(),this},stop:function(e){return void 0===e&&(e=!1),this.isRunning=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,e&&(this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start()),this.manager.remove(this),this},updateTweenData:function(e,t,i){if(0===this.timeline.length)return this;if(void 0===i&&(i=0),-1===i)for(var n=0;n<this.timeline.length;n++)this.timeline[n][e]=t;else this.timeline[i][e]=t;return this},delay:function(e,t){return this.updateTweenData("delay",e,t)},repeat:function(e,t,i){return void 0===t&&(t=0),this.updateTweenData("repeatCounter",e,i),this.updateTweenData("repeatDelay",t,i)},repeatDelay:function(e,t){return this.updateTweenData("repeatDelay",e,t)},yoyo:function(e,t,i){return void 0===t&&(t=0),this.updateTweenData("yoyo",e,i),this.updateTweenData("yoyoDelay",t,i)},yoyoDelay:function(e,t){return this.updateTweenData("yoyoDelay",e,t)},easing:function(e,t){return"string"==typeof e&&this.manager.easeMap[e]&&(e=this.manager.easeMap[e]),this.updateTweenData("easingFunction",e,t)},interpolation:function(e,t,i){return void 0===t&&(t=U.Math),this.updateTweenData("interpolationFunction",e,i),this.updateTweenData("interpolationContext",t,i)},repeatAll:function(e){return void 0===e&&(e=0),this.repeatCounter=e,this},chain:function(){for(var e=arguments.length;e--;)0<e?arguments[e-1].chainedTween=arguments[e]:this.chainedTween=arguments[e];return this},loop:function(e){return void 0===e&&(e=!0),this.repeatCounter=e?-1:0,this},onUpdateCallback:function(e,t){return this._onUpdateCallback=e,this._onUpdateCallbackContext=t,this},pause:function(){this.isPaused=!0,this._codePaused=!0,this._pausedTime=this.game.time.time},_pause:function(){this._codePaused||(this.isPaused=!0,this._pausedTime=this.game.time.time)},resume:function(){if(this.isPaused){this.isPaused=!1,this._codePaused=!1;for(var e=0;e<this.timeline.length;e++)this.timeline[e].isRunning||(this.timeline[e].startTime+=this.game.time.time-this._pausedTime)}},_resume:function(){this._codePaused||this.resume()},update:function(e){if(this.pendingDelete||!this.target)return!1;if(this.isPaused)return!0;var t=this.timeline[this.current].update(e);if(t===U.TweenData.PENDING)return!0;if(t===U.TweenData.RUNNING)return this._hasStarted||(this.onStart.dispatch(this.target,this),this._hasStarted=!0),null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,this.timeline[this.current].value,this.timeline[this.current]),this.isRunning;if(t===U.TweenData.LOOPED)return-1===this.timeline[this.current].repeatCounter?this.onLoop.dispatch(this.target,this):this.onRepeat.dispatch(this.target,this),!0;if(t===U.TweenData.COMPLETE){var i=!1;return this.reverse?--this.current<0&&(this.current=this.timeline.length-1,i=!0):++this.current===this.timeline.length&&(i=!(this.current=0)),i?-1===this.repeatCounter?(this.timeline[this.current].start(),this.onLoop.dispatch(this.target,this),!0):0<this.repeatCounter?(this.repeatCounter--,this.timeline[this.current].start(),this.onRepeat.dispatch(this.target,this),!0):(this.isRunning=!1,this.onComplete.dispatch(this.target,this),this._hasStarted=!1,this.chainedTween&&this.chainedTween.start(),!1):(this.onChildComplete.dispatch(this.target,this),this.timeline[this.current].start(),!0)}},generateData:function(e,t){if(null===this.game||null===this.target)return null;void 0===e&&(e=60),void 0===t&&(t=[]);for(var i=0;i<this.timeline.length;i++)for(var n in this.timeline[i].vEnd)this.properties[n]=this.target[n]||0,Array.isArray(this.properties[n])||(this.properties[n]*=1);for(i=0;i<this.timeline.length;i++)this.timeline[i].loadValues();for(i=0;i<this.timeline.length;i++)t=t.concat(this.timeline[i].generateData(e));return t}},Object.defineProperty(U.Tween.prototype,"totalDuration",{get:function(){for(var e=0,t=0;t<this.timeline.length;t++)e+=this.timeline[t].duration;return e}}),U.Tween.prototype.constructor=U.Tween,U.TweenData=function(e){this.parent=e,this.game=e.game,this.vStart={},this.vStartCache={},this.vEnd={},this.vEndCache={},this.duration=1e3,this.percent=0,this.value=0,this.repeatCounter=0,this.repeatDelay=0,this.repeatTotal=0,this.interpolate=!1,this.yoyo=!1,this.yoyoDelay=0,this.inReverse=!1,this.delay=0,this.dt=0,this.startTime=null,this.easingFunction=U.Easing.Default,this.interpolationFunction=U.Math.linearInterpolation,this.interpolationContext=U.Math,this.isRunning=!1,this.isFrom=!1},U.TweenData.PENDING=0,U.TweenData.RUNNING=1,U.TweenData.LOOPED=2,U.TweenData.COMPLETE=3,U.TweenData.prototype={to:function(e,t,i,n,r,o){return this.vEnd=e,this.duration=t,this.easingFunction=i,this.delay=n,this.repeatTotal=r,this.yoyo=o,this.isFrom=!1,this},from:function(e,t,i,n,r,o){return this.vEnd=e,this.duration=t,this.easingFunction=i,this.delay=n,this.repeatTotal=r,this.yoyo=o,this.isFrom=!0,this},start:function(){if(this.startTime=this.game.time.time+this.delay,this.parent.reverse?this.dt=this.duration:this.dt=0,0<this.delay?this.isRunning=!1:this.isRunning=!0,this.isFrom)for(var e in this.vStartCache)this.vStart[e]=this.vEndCache[e],this.vEnd[e]=this.vStartCache[e],this.parent.target[e]=this.vStart[e];return this.value=0,this.yoyoCounter=0,this.repeatCounter=this.repeatTotal,this},loadValues:function(){for(var e in this.parent.properties){if(this.vStart[e]=this.parent.properties[e],Array.isArray(this.vEnd[e])){if(0===this.vEnd[e].length)continue;0===this.percent&&(this.vEnd[e]=[this.vStart[e]].concat(this.vEnd[e]))}void 0!==this.vEnd[e]?("string"==typeof this.vEnd[e]&&(this.vEnd[e]=this.vStart[e]+parseFloat(this.vEnd[e],10)),this.parent.properties[e]=this.vEnd[e]):this.vEnd[e]=this.vStart[e],this.vStartCache[e]=this.vStart[e],this.vEndCache[e]=this.vEnd[e]}return this},update:function(e){if(this.isRunning){if(e<this.startTime)return U.TweenData.RUNNING}else{if(!(e>=this.startTime))return U.TweenData.PENDING;this.isRunning=!0}var t=this.parent.frameBased?this.game.time.physicsElapsedMS:this.game.time.elapsedMS;for(var i in this.parent.reverse?(this.dt-=t*this.parent.timeScale,this.dt=Math.max(this.dt,0)):(this.dt+=t*this.parent.timeScale,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent),this.vEnd){var n=this.vStart[i],r=this.vEnd[i];Array.isArray(r)?this.parent.target[i]=this.interpolationFunction.call(this.interpolationContext,r,this.value):this.parent.target[i]=n+(r-n)*this.value}return!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent?this.repeat():U.TweenData.RUNNING},generateData:function(e){this.parent.reverse?this.dt=this.duration:this.dt=0;var t=[],i=!1,n=1/e*1e3;do{this.parent.reverse?(this.dt-=n,this.dt=Math.max(this.dt,0)):(this.dt+=n,this.dt=Math.min(this.dt,this.duration)),this.percent=this.dt/this.duration,this.value=this.easingFunction(this.percent);var r={};for(var o in this.vEnd){var a=this.vStart[o],s=this.vEnd[o];Array.isArray(s)?r[o]=this.interpolationFunction(s,this.value):r[o]=a+(s-a)*this.value}t.push(r),(!this.parent.reverse&&1===this.percent||this.parent.reverse&&0===this.percent)&&(i=!0)}while(!i);if(this.yoyo){var l=t.slice();l.reverse(),t=t.concat(l)}return t},repeat:function(){if(this.yoyo){if(this.inReverse&&0===this.repeatCounter){for(var e in this.vStartCache)this.vStart[e]=this.vStartCache[e],this.vEnd[e]=this.vEndCache[e];return this.inReverse=!1,U.TweenData.COMPLETE}this.inReverse=!this.inReverse}else if(0===this.repeatCounter)return U.TweenData.COMPLETE;if(this.inReverse)for(var e in this.vStartCache)this.vStart[e]=this.vEndCache[e],this.vEnd[e]=this.vStartCache[e];else{for(var e in this.vStartCache)this.vStart[e]=this.vStartCache[e],this.vEnd[e]=this.vEndCache[e];0<this.repeatCounter&&this.repeatCounter--}return this.startTime=this.game.time.time,this.yoyo&&this.inReverse?this.startTime+=this.yoyoDelay:this.inReverse||(this.startTime+=this.repeatDelay),this.parent.reverse?this.dt=this.duration:this.dt=0,U.TweenData.LOOPED}},U.TweenData.prototype.constructor=U.TweenData,U.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 0===e?0:1===e?1:1-Math.cos(e*Math.PI/2)},Out:function(e){return 0===e?0:1===e?1:Math.sin(e*Math.PI/2)},InOut:function(e){return 0===e?0:1===e?1:.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(!i||i<1?(i=1,t=.1):t=.4*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-U.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*U.Easing.Bounce.In(2*e):.5*U.Easing.Bounce.Out(2*e-1)+.5}}},U.Easing.Default=U.Easing.Linear.None,U.Easing.Power0=U.Easing.Linear.None,U.Easing.Power1=U.Easing.Quadratic.Out,U.Easing.Power2=U.Easing.Cubic.Out,U.Easing.Power3=U.Easing.Quartic.Out,U.Easing.Power4=U.Easing.Quintic.Out,U.Time=function(e){this.game=e,this.time=0,this.prevTime=0,this.now=0,this.elapsed=0,this.elapsedMS=0,this.physicsElapsed=1/60,this.physicsElapsedMS=1/60*1e3,this.desiredFpsMult=1/60,this._desiredFps=60,this.suggestedFps=this.desiredFps,this.slowMotion=1,this.advancedTiming=!1,this.frames=0,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.pauseDuration=0,this.timeToCall=0,this.timeExpected=0,this.events=new U.Timer(this.game,!1),this._frameCount=0,this._elapsedAccumulator=0,this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[]},U.Time.prototype={boot:function(){this._started=Date.now(),this.time=Date.now(),this.events.start(),this.timeExpected=this.time},add:function(e){return this._timers.push(e),e},create:function(e){void 0===e&&(e=!0);var t=new U.Timer(this.game,e);return this._timers.push(t),t},removeAll:function(){for(var e=0;e<this._timers.length;e++)this._timers[e].destroy();this._timers=[],this.events.removeAll()},refresh:function(){var e=this.time;this.time=Date.now(),this.elapsedMS=this.time-e},update:function(e){var t=this.time;this.time=Date.now(),this.elapsedMS=this.time-t,this.prevTime=this.now,this.now=e,this.elapsed=this.now-this.prevTime,this.game.raf._isSetTimeOut&&(this.timeToCall=Math.floor(Math.max(0,1e3/this._desiredFps-(this.timeExpected-e))),this.timeExpected=e+this.timeToCall),this.advancedTiming&&this.updateAdvancedTiming(),this.game.paused||(this.events.update(this.time),this._timers.length&&this.updateTimers())},updateTimers:function(){for(var e=0,t=this._timers.length;e<t;)this._timers[e].update(this.time)?e++:(this._timers.splice(e,1),t--)},updateAdvancedTiming:function(){this._frameCount++,this._elapsedAccumulator+=this.elapsed,this._frameCount>=2*this._desiredFps&&(this.suggestedFps=5*Math.floor(200/(this._elapsedAccumulator/this._frameCount)),this._frameCount=0,this._elapsedAccumulator=0),this.msMin=Math.min(this.msMin,this.elapsed),this.msMax=Math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=Math.min(this.fpsMin,this.fps),this.fpsMax=Math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)},gamePaused:function(){this._pauseStarted=Date.now(),this.events.pause();for(var e=this._timers.length;e--;)this._timers[e]._pause()},gameResumed:function(){this.time=Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var e=this._timers.length;e--;)this._timers[e]._resume()},totalElapsedSeconds:function(){return.001*(this.time-this._started)},elapsedSince:function(e){return this.time-e},elapsedSecondsSince:function(e){return.001*(this.time-e)},reset:function(){this._started=this.time,this.removeAll()}},Object.defineProperty(U.Time.prototype,"desiredFps",{get:function(){return this._desiredFps},set:function(e){this._desiredFps=e,this.physicsElapsed=1/e,this.physicsElapsedMS=1e3*this.physicsElapsed,this.desiredFpsMult=1/e}}),U.Time.prototype.constructor=U.Time,U.Timer=function(e,t){void 0===t&&(t=!0),this.game=e,this.running=!1,this.autoDestroy=t,this.expired=!1,this.elapsed=0,this.events=[],this.onComplete=new U.Signal,this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0},U.Timer.MINUTE=6e4,U.Timer.SECOND=1e3,U.Timer.HALF=500,U.Timer.QUARTER=250,U.Timer.prototype={create:function(e,t,i,n,r,o){var a=e=Math.round(e);0===this._now?a+=this.game.time.time:a+=this._now;var s=new U.TimerEvent(this,e,a,i,t,n,r,o);return this.events.push(s),this.order(),this.expired=!1,s},add:function(e,t,i){return this.create(e,!1,0,t,i,Array.prototype.slice.call(arguments,3))},repeat:function(e,t,i,n){return this.create(e,!1,t,i,n,Array.prototype.slice.call(arguments,4))},loop:function(e,t,i){return this.create(e,!0,0,t,i,Array.prototype.slice.call(arguments,3))},start:function(e){if(!this.running){this._started=this.game.time.time+(e||0),this.running=!0;for(var t=0;t<this.events.length;t++)this.events[t].tick=this.events[t].delay+this._started}},stop:function(e){this.running=!1,void 0===e&&(e=!0),e&&(this.events.length=0)},remove:function(e){for(var t=0;t<this.events.length;t++)if(this.events[t]===e)return this.events[t].pendingDelete=!0;return!1},order:function(){0<this.events.length&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},sortHandler:function(e,t){return e.tick<t.tick?-1:e.tick>t.tick?1:0},clearPendingEvents:function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},update:function(e){if(this.paused)return!0;if(this.elapsed=e-this._now,this._now=e,this.elapsed>this.timeCap&&this.adjustEvents(e-this.elapsed),this._marked=0,this.clearPendingEvents(),this.running&&this._now>=this.nextTick&&0<this._len){for(;this._i<this._len&&this.running&&this._now>=this.events[this._i].tick&&!this.events[this._i].pendingDelete;)this._newTick=this._now+this.events[this._i].delay-(this._now-this.events[this._i].tick),this._newTick<0&&(this._newTick=this._now+this.events[this._i].delay),!0===this.events[this._i].loop?this.events[this._i].tick=this._newTick:0<this.events[this._i].repeatCount?(this.events[this._i].repeatCount--,this.events[this._i].tick=this._newTick):(this._marked++,this.events[this._i].pendingDelete=!0),this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.onComplete.dispatch(this))}return!this.expired||!this.autoDestroy},pause:function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.time.time,this.paused=!0))},_pause:function(){!this.paused&&this.running&&(this._pauseStarted=this.game.time.time,this.paused=!0)},adjustEvents:function(e){for(var t=0;t<this.events.length;t++)if(!this.events[t].pendingDelete){var i=this.events[t].tick-e;i<0&&(i=0),this.events[t].tick=this._now+i}var n=this.nextTick-e;this.nextTick=n<0?this._now:this._now+n},resume:function(){if(this.paused){var e=this.game.time.time;this._pauseTotal+=e-this._now,this._now=e,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},_resume:function(){this._codePaused||this.resume()},removeAll:function(){this.onComplete.removeAll(),this.events.length=0,this._len=0,this._i=0},destroy:function(){this.onComplete.removeAll(),this.running=!1,this.events=[],this._len=0,this._i=0}},Object.defineProperty(U.Timer.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(U.Timer.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(U.Timer.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(U.Timer.prototype,"ms",{get:function(){return this.running?this._now-this._started-this._pauseTotal:0}}),Object.defineProperty(U.Timer.prototype,"seconds",{get:function(){return this.running?.001*this.ms:0}}),U.Timer.prototype.constructor=U.Timer,U.TimerEvent=function(e,t,i,n,r,o,a,s){this.timer=e,this.delay=t,this.tick=i,this.repeatCount=n-1,this.loop=r,this.callback=o,this.callbackContext=a,this.args=s,this.pendingDelete=!1},U.TimerEvent.prototype.constructor=U.TimerEvent,U.AnimationManager=function(e){this.sprite=e,this.game=e.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},U.AnimationManager.prototype={loadFrameData:function(e,t){if(void 0===e)return!1;if(this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(e);return this._frameData=e,null==t?this.frame=0:"string"==typeof t?this.frameName=t:this.frame=t,this.isLoaded=!0},copyFrameData:function(e,t){if(this._frameData=e.clone(),this.isLoaded)for(var i in this._anims)this._anims[i].updateFrameData(this._frameData);return null==t?this.frame=0:"string"==typeof t?this.frameName=t:this.frame=t,this.isLoaded=!0},add:function(e,t,i,n,r){return t=t||[],i=i||60,void 0===n&&(n=!1),void 0===r&&(r=!(!t||"number"!=typeof t[0])),this._outputFrames=[],this._frameData.getFrameIndexes(t,r,this._outputFrames),this._anims[e]=new U.Animation(this.game,this.sprite,e,this._frameData,this._outputFrames,i,n),this.currentAnim=this._anims[e],this.sprite.tilingTexture&&(this.sprite.refreshTexture=!0),this._anims[e]},validateFrames:function(e,t){void 0===t&&(t=!0);for(var i=0;i<e.length;i++)if(!0===t){if(e[i]>this._frameData.total)return!1}else if(!1===this._frameData.checkFrameName(e[i]))return!1;return!0},play:function(e,t,i,n){if(this._anims[e])return this.currentAnim===this._anims[e]?!1===this.currentAnim.isPlaying?(this.currentAnim.paused=!1,this.currentAnim.play(t,i,n)):this.currentAnim:(this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[e],this.currentAnim.paused=!1,this.currentFrame=this.currentAnim.currentFrame,this.currentAnim.play(t,i,n))},stop:function(e,t){void 0===t&&(t=!1),!this.currentAnim||"string"==typeof e&&e!==this.currentAnim.name||this.currentAnim.stop(t)},update:function(){return!(this.updateIfVisible&&!this.sprite.visible||!this.currentAnim||!this.currentAnim.update()||(this.currentFrame=this.currentAnim.currentFrame,0))},next:function(e){this.currentAnim&&(this.currentAnim.next(e),this.currentFrame=this.currentAnim.currentFrame)},previous:function(e){this.currentAnim&&(this.currentAnim.previous(e),this.currentFrame=this.currentAnim.currentFrame)},getAnimation:function(e){return"string"==typeof e&&this._anims[e]?this._anims[e]:null},refreshFrame:function(){},destroy:function(){var e=null;for(var e in this._anims)this._anims.hasOwnProperty(e)&&this._anims[e].destroy();this._anims={},this._outputFrames=[],this._frameData=null,this.currentAnim=null,this.currentFrame=null,this.sprite=null,this.game=null}},U.AnimationManager.prototype.constructor=U.AnimationManager,Object.defineProperty(U.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(U.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData.total}}),Object.defineProperty(U.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(e){this.currentAnim.paused=e}}),Object.defineProperty(U.AnimationManager.prototype,"name",{get:function(){if(this.currentAnim)return this.currentAnim.name}}),Object.defineProperty(U.AnimationManager.prototype,"frame",{get:function(){if(this.currentFrame)return this.currentFrame.index},set:function(e){"number"==typeof e&&this._frameData&&null!==this._frameData.getFrame(e)&&(this.currentFrame=this._frameData.getFrame(e),this.currentFrame&&this.sprite.setFrame(this.currentFrame))}}),Object.defineProperty(U.AnimationManager.prototype,"frameName",{get:function(){if(this.currentFrame)return this.currentFrame.name},set:function(e){"string"==typeof e&&this._frameData&&null!==this._frameData.getFrameByName(e)&&(this.currentFrame=this._frameData.getFrameByName(e),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setFrame(this.currentFrame)))}}),U.Animation=function(e,t,i,n,r,o,a){void 0===a&&(a=!1),this.game=e,this._parent=t,this._frameData=n,this.name=i,this._frames=[],this._frames=this._frames.concat(r),this.delay=1e3/o,this.loop=a,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart=new U.Signal,this.onUpdate=null,this.onComplete=new U.Signal,this.onLoop=new U.Signal,this.isReversed=!1,this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},U.Animation.prototype={play:function(e,t,i){return"number"==typeof e&&(this.delay=1e3/e),"boolean"==typeof t&&(this.loop=t),void 0!==i&&(this.killOnComplete=i),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=this.isReversed?this._frames.length-1:0,this.updateCurrentFrame(!1,!0),this._parent.events.onAnimationStart$dispatch(this._parent,this),this.onStart.dispatch(this._parent,this),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.time,this._timeNextFrame=this.game.time.time+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setFrame(this.currentFrame),(this._parent.animations.currentAnim=this)._parent.animations.currentFrame=this.currentFrame,this.onStart.dispatch(this._parent,this)},reverse:function(){return this.reversed=!this.reversed,this},reverseOnce:function(){return this.onComplete.addOnce(this.reverse,this),this.reverse()},setFrame:function(e,t){var i;if(void 0===t&&(t=!1),"string"==typeof e)for(var n=0;n<this._frames.length;n++)this._frameData.getFrame(this._frames[n]).name===e&&(i=n);else if("number"==typeof e)if(t)i=e;else for(n=0;n<this._frames.length;n++)this._frames[n]===e&&(i=n);i&&(this._frameIndex=i-1,this._timeNextFrame=this.game.time.time,this.update())},stop:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,e&&(this.currentFrame=this._frameData.getFrame(this._frames[0]),this._parent.setFrame(this.currentFrame)),t&&(this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.time.time)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.time.time+this._frameDiff)},update:function(){return!this.isPaused&&!!(this.isPlaying&&this.game.time.time>=this._timeNextFrame)&&(this._frameSkip=1,this._frameDiff=this.game.time.time-this._timeNextFrame,this._timeLastFrame=this.game.time.time,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.time+(this.delay-this._frameDiff),this.isReversed?this._frameIndex-=this._frameSkip:this._frameIndex+=this._frameSkip,!this.isReversed&&this._frameIndex>=this._frames.length||this.isReversed&&this._frameIndex<=-1?this.loop?(this._frameIndex=Math.abs(this._frameIndex)%this._frames.length,this.isReversed&&(this._frameIndex=this._frames.length-1-this._frameIndex),this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&this._parent.setFrame(this.currentFrame),this.loopCount++,this._parent.events.onAnimationLoop$dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this),!this.onUpdate||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)):(this.complete(),!1):this.updateCurrentFrame(!0))},updateCurrentFrame:function(e,t){if(void 0===t&&(t=!1),!this._frameData)return!1;var i=this.currentFrame.index;return this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(t||!t&&i!==this.currentFrame.index)&&this._parent.setFrame(this.currentFrame),!this.onUpdate||!e||(this.onUpdate.dispatch(this,this.currentFrame),!!this._frameData)},next:function(e){void 0===e&&(e=1);var t=this._frameIndex+e;t>=this._frames.length&&(this.loop?t%=this._frames.length:t=this._frames.length-1),t!==this._frameIndex&&(this._frameIndex=t,this.updateCurrentFrame(!0))},previous:function(e){void 0===e&&(e=1);var t=this._frameIndex-e;t<0&&(this.loop?t=this._frames.length+t:t++),t!==this._frameIndex&&(this._frameIndex=t,this.updateCurrentFrame(!0))},updateFrameData:function(e){this._frameData=e,this.currentFrame=this._frameData?this._frameData.getFrame(this._frames[this._frameIndex%this._frames.length]):null},destroy:function(){this._frameData&&(this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.onStart.dispose(),this.onLoop.dispose(),this.onComplete.dispose(),this.onUpdate&&this.onUpdate.dispose())},complete:function(){this._frameIndex=this._frames.length-1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events.onAnimationComplete$dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},U.Animation.prototype.constructor=U.Animation,Object.defineProperty(U.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(e){(this.isPaused=e)?this._pauseStartTime=this.game.time.time:this.isPlaying&&(this._timeNextFrame=this.game.time.time+this.delay)}}),Object.defineProperty(U.Animation.prototype,"reversed",{get:function(){return this.isReversed},set:function(e){this.isReversed=e}}),Object.defineProperty(U.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(U.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(e){this.currentFrame=this._frameData.getFrame(this._frames[e]),null!==this.currentFrame&&(this._frameIndex=e,this._parent.setFrame(this.currentFrame),this.onUpdate&&this.onUpdate.dispatch(this,this.currentFrame))}}),Object.defineProperty(U.Animation.prototype,"speed",{get:function(){return 1e3/this.delay},set:function(e){0<e&&(this.delay=1e3/e)}}),Object.defineProperty(U.Animation.prototype,"enableUpdate",{get:function(){return null!==this.onUpdate},set:function(e){e&&null===this.onUpdate?this.onUpdate=new U.Signal:e||null===this.onUpdate||(this.onUpdate.dispose(),this.onUpdate=null)}}),U.Animation.generateFrameNames=function(e,t,i,n,r){void 0===n&&(n="");var o=[],a="";if(t<i)for(var s=t;s<=i;s++)a=e+(a="number"==typeof r?U.Utils.pad(s.toString(),r,"0",1):s.toString())+n,o.push(a);else for(s=t;i<=s;s--)a=e+(a="number"==typeof r?U.Utils.pad(s.toString(),r,"0",1):s.toString())+n,o.push(a);return o},U.Frame=function(e,t,i,n,r,o){this.index=e,this.x=t,this.y=i,this.width=n,this.height=r,this.name=o,this.centerX=Math.floor(n/2),this.centerY=Math.floor(r/2),this.distance=U.Math.distance(0,0,n,r),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=n,this.sourceSizeH=r,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0,this.right=this.x+this.width,this.bottom=this.y+this.height},U.Frame.prototype={resize:function(e,t){this.width=e,this.height=t,this.centerX=Math.floor(e/2),this.centerY=Math.floor(t/2),this.distance=U.Math.distance(0,0,e,t),this.sourceSizeW=e,this.sourceSizeH=t,this.right=this.x+e,this.bottom=this.y+t},setTrim:function(e,t,i,n,r,o,a){(this.trimmed=e)&&(this.sourceSizeW=t,this.sourceSizeH=i,this.centerX=Math.floor(t/2),this.centerY=Math.floor(i/2),this.spriteSourceSizeX=n,this.spriteSourceSizeY=r,this.spriteSourceSizeW=o,this.spriteSourceSizeH=a)},clone:function(){var e=new U.Frame(this.index,this.x,this.y,this.width,this.height,this.name);for(var t in this)this.hasOwnProperty(t)&&(e[t]=this[t]);return e},getRect:function(e){return void 0===e?e=new U.Rectangle(this.x,this.y,this.width,this.height):e.setTo(this.x,this.y,this.width,this.height),e}},U.Frame.prototype.constructor=U.Frame,U.FrameData=function(){this._frames=[],this._frameNames=[]},U.FrameData.prototype={addFrame:function(e){return e.index=this._frames.length,this._frames.push(e),""!==e.name&&(this._frameNames[e.name]=e.index),e},getFrame:function(e){return e>=this._frames.length&&(e=0),this._frames[e]},getFrameByName:function(e){return"number"==typeof this._frameNames[e]?this._frames[this._frameNames[e]]:null},checkFrameName:function(e){return null!=this._frameNames[e]},clone:function(){for(var e=new U.FrameData,t=0;t<this._frames.length;t++)e._frames.push(this._frames[t].clone());for(var i in this._frameNames)this._frameNames.hasOwnProperty(i)&&e._frameNames.push(this._frameNames[i]);return e},getFrameRange:function(e,t,i){void 0===i&&(i=[]);for(var n=e;n<=t;n++)i.push(this._frames[n]);return i},getFrames:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=[]),void 0===e||0===e.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n]);else for(n=0;n<e.length;n++)t?i.push(this.getFrame(e[n])):i.push(this.getFrameByName(e[n]));return i},getFrameIndexes:function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=[]),void 0===e||0===e.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n].index);else for(n=0;n<e.length;n++)t&&this._frames[e[n]]?i.push(this._frames[e[n]].index):this.getFrameByName(e[n])&&i.push(this.getFrameByName(e[n]).index);return i},destroy:function(){this._frames=null,this._frameNames=null}},U.FrameData.prototype.constructor=U.FrameData,Object.defineProperty(U.FrameData.prototype,"total",{get:function(){return this._frames.length}}),U.AnimationParser={spriteSheet:function(e,t,i,n,r,o,a){var s=t;if("string"==typeof t&&(s=e.cache.getImage(t)),null===s)return null;var l=s.width,p=s.height;i<=0&&(i=Math.floor(-l/Math.min(-1,i))),n<=0&&(n=Math.floor(-p/Math.min(-1,n)));var h=Math.floor((l-o)/(i+a))*Math.floor((p-o)/(n+a));if(-1!==r&&(h=r),0===l||0===p||l<i||p<n||0===h)return null;for(var u=new U.FrameData,c=o,d=o,_=0;_<h;_++)u.addFrame(new U.Frame(_,c,d,i,n,"")),(c+=i+a)+i>l&&(c=o,d+=n+a);return u},JSONData:function(e,t){if(t.frames){for(var i,n=new U.FrameData,r=t.frames,o=0;o<r.length;o++)i=n.addFrame(new U.Frame(o,r[o].frame.x,r[o].frame.y,r[o].frame.w,r[o].frame.h,r[o].filename)),r[o].trimmed&&i.setTrim(r[o].trimmed,r[o].sourceSize.w,r[o].sourceSize.h,r[o].spriteSourceSize.x,r[o].spriteSourceSize.y,r[o].spriteSourceSize.w,r[o].spriteSourceSize.h);return n}},JSONDataPyxel:function(e,t){if(["layers","tilewidth","tileheight","tileswide","tileshigh"].forEach(function(e){t[e]}),1===t.layers.length){for(var i=new U.FrameData,n=t.tileheight,r=t.tilewidth,o=t.layers[0].tiles,a=0;a<o.length;a++)i.addFrame(new U.Frame(a,o[a].x,o[a].y,r,n,"frame_"+a)).setTrim(!1);return i}},JSONDataHash:function(e,t){if(t.frames){var i,n=new U.FrameData,r=t.frames,o=0;for(var a in r)i=n.addFrame(new U.Frame(o,r[a].frame.x,r[a].frame.y,r[a].frame.w,r[a].frame.h,a)),r[a].trimmed&&i.setTrim(r[a].trimmed,r[a].sourceSize.w,r[a].sourceSize.h,r[a].spriteSourceSize.x,r[a].spriteSourceSize.y,r[a].spriteSourceSize.w,r[a].spriteSourceSize.h),o++;return n}},XMLData:function(e,t){if(t.getElementsByTagName("TextureAtlas")){for(var i,n,r,o,a,s,l,p,h,u,c,d=new U.FrameData,_=t.getElementsByTagName("SubTexture"),y=0;y<_.length;y++)n=(r=_[y].attributes).name.value,o=parseInt(r.x.value,10),a=parseInt(r.y.value,10),s=parseInt(r.width.value,10),l=parseInt(r.height.value,10),h=p=null,r.frameX&&(p=Math.abs(parseInt(r.frameX.value,10)),h=Math.abs(parseInt(r.frameY.value,10)),u=parseInt(r.frameWidth.value,10),c=parseInt(r.frameHeight.value,10)),i=d.addFrame(new U.Frame(y,o,a,s,l,n)),null===p&&null===h||i.setTrim(!0,s,l,p,h,u,c);return d}}},U.Cache=function(e){this.game=e,this.autoResolveURL=!1,this._cache={canvas:{},image:{},texture:{},sound:{},video:{},text:{},json:{},xml:{},physics:{},tilemap:{},binary:{},bitmapData:{},bitmapFont:{},shader:{},renderTexture:{}},this._urlMap={},this._urlResolver=new Image,this._urlTemp=null,this.onSoundUnlock=new U.Signal,this._cacheMap=[],this._cacheMap[U.Cache.CANVAS]=this._cache.canvas,this._cacheMap[U.Cache.IMAGE]=this._cache.image,this._cacheMap[U.Cache.TEXTURE]=this._cache.texture,this._cacheMap[U.Cache.SOUND]=this._cache.sound,this._cacheMap[U.Cache.TEXT]=this._cache.text,this._cacheMap[U.Cache.PHYSICS]=this._cache.physics,this._cacheMap[U.Cache.TILEMAP]=this._cache.tilemap,this._cacheMap[U.Cache.BINARY]=this._cache.binary,this._cacheMap[U.Cache.BITMAPDATA]=this._cache.bitmapData,this._cacheMap[U.Cache.BITMAPFONT]=this._cache.bitmapFont,this._cacheMap[U.Cache.JSON]=this._cache.json,this._cacheMap[U.Cache.XML]=this._cache.xml,this._cacheMap[U.Cache.VIDEO]=this._cache.video,this._cacheMap[U.Cache.SHADER]=this._cache.shader,this._cacheMap[U.Cache.RENDER_TEXTURE]=this._cache.renderTexture,this.addDefaultImage(),this.addMissingImage()},U.Cache.CANVAS=1,U.Cache.IMAGE=2,U.Cache.TEXTURE=3,U.Cache.SOUND=4,U.Cache.TEXT=5,U.Cache.PHYSICS=6,U.Cache.TILEMAP=7,U.Cache.BINARY=8,U.Cache.BITMAPDATA=9,U.Cache.BITMAPFONT=10,U.Cache.JSON=11,U.Cache.XML=12,U.Cache.VIDEO=13,U.Cache.SHADER=14,U.Cache.RENDER_TEXTURE=15,U.Cache.DEFAULT=null,U.Cache.MISSING=null,U.Cache.prototype={addCanvas:function(e,t,i){void 0===i&&(i=t.getContext("2d")),this._cache.canvas[e]={canvas:t,context:i}},addImage:function(e,t,i){this.checkImageKey(e)&&this.removeImage(e);var n={key:e,url:t,data:i,base:new PIXI.BaseTexture(i),frame:new U.Frame(0,0,0,i.width,i.height,e),frameData:new U.FrameData};return n.frameData.addFrame(new U.Frame(0,0,0,i.width,i.height,t)),this._cache.image[e]=n,this._resolveURL(t,n),"__default"===e?U.Cache.DEFAULT=new PIXI.Texture(n.base):"__missing"===e&&(U.Cache.MISSING=new PIXI.Texture(n.base)),n},addDefaultImage:function(){var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";var t=this.addImage("__default",null,e);t.base.skipRender=!0,U.Cache.DEFAULT=new PIXI.Texture(t.base)},addMissingImage:function(){var e=new Image;e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";var t=this.addImage("__missing",null,e);U.Cache.MISSING=new PIXI.Texture(t.base)},addSound:function(e,t,i,n,r){void 0===n&&(r=!(n=!0)),void 0===r&&(r=!(n=!1));var o=!1;r&&(o=!0),this._cache.sound[e]={url:t,data:i,isDecoding:!1,decoded:o,webAudio:n,audioTag:r,locked:this.game.sound.touchLocked},this._resolveURL(t,this._cache.sound[e])},addText:function(e,t,i){this._cache.text[e]={url:t,data:i},this._resolveURL(t,this._cache.text[e])},addPhysicsData:function(e,t,i,n){this._cache.physics[e]={url:t,data:i,format:n},this._resolveURL(t,this._cache.physics[e])},addTilemap:function(e,t,i,n){this._cache.tilemap[e]={url:t,data:i,format:n},this._resolveURL(t,this._cache.tilemap[e])},addBinary:function(e,t){this._cache.binary[e]=t},addBitmapData:function(e,t,i){return t.key=e,void 0===i&&(i=new U.FrameData).addFrame(t.textureFrame),this._cache.bitmapData[e]={data:t,frameData:i},t},addBitmapFont:function(e,t,i,n,r,o,a){var s={url:t,data:i,font:null,base:new PIXI.BaseTexture(i)};void 0===o&&(o=0),void 0===a&&(a=0),s.font="json"===r?U.LoaderParser.jsonBitmapFont(n,s.base,o,a):U.LoaderParser.xmlBitmapFont(n,s.base,o,a),this._cache.bitmapFont[e]=s,this._resolveURL(t,s)},addJSON:function(e,t,i){this._cache.json[e]={url:t,data:i},this._resolveURL(t,this._cache.json[e])},addXML:function(e,t,i){this._cache.xml[e]={url:t,data:i},this._resolveURL(t,this._cache.xml[e])},addVideo:function(e,t,i,n){this._cache.video[e]={url:t,data:i,isBlob:n,locked:!0},this._resolveURL(t,this._cache.video[e])},addShader:function(e,t,i){this._cache.shader[e]={url:t,data:i},this._resolveURL(t,this._cache.shader[e])},addRenderTexture:function(e,t){this._cache.renderTexture[e]={texture:t,frame:new U.Frame(0,0,0,t.width,t.height,"","")}},addSpriteSheet:function(e,t,i,n,r,o,a,s){void 0===o&&(o=-1),void 0===a&&(a=0),void 0===s&&(s=0);var l={key:e,url:t,data:i,frameWidth:n,frameHeight:r,margin:a,spacing:s,base:new PIXI.BaseTexture(i),frameData:U.AnimationParser.spriteSheet(this.game,i,n,r,o,a,s)};this._cache.image[e]=l,this._resolveURL(t,l)},addTextureAtlas:function(e,t,i,n,r){var o={key:e,url:t,data:i,base:new PIXI.BaseTexture(i)};r===U.Loader.TEXTURE_ATLAS_XML_STARLING?o.frameData=U.AnimationParser.XMLData(this.game,n,e):r===U.Loader.TEXTURE_ATLAS_JSON_PYXEL?o.frameData=U.AnimationParser.JSONDataPyxel(this.game,n,e):Array.isArray(n.frames)?o.frameData=U.AnimationParser.JSONData(this.game,n,e):o.frameData=U.AnimationParser.JSONDataHash(this.game,n,e),this._cache.image[e]=o,this._resolveURL(t,o)},reloadSound:function(e){var t=this,i=this.getSound(e);i&&(i.data.src=i.url,i.data.addEventListener("canplaythrough",function(){return t.reloadSoundComplete(e)},!1),i.data.load())},reloadSoundComplete:function(e){var t=this.getSound(e);t&&(t.locked=!1,this.onSoundUnlock.dispatch(e))},updateSound:function(e,t,i){var n=this.getSound(e);n&&(n[t]=i)},decodedSound:function(e,t){var i=this.getSound(e);i.data=t,i.decoded=!0,i.isDecoding=!1},isSoundDecoded:function(e){var t=this.getItem(e,U.Cache.SOUND,"isSoundDecoded");if(t)return t.decoded},isSoundReady:function(e){var t=this.getItem(e,U.Cache.SOUND,"isSoundDecoded");if(t)return t.decoded&&!this.game.sound.touchLocked},checkKey:function(e,t){return!!this._cacheMap[e][t]},checkURL:function(e){return!!this._urlMap[this._resolveURL(e)]},checkCanvasKey:function(e){return this.checkKey(U.Cache.CANVAS,e)},checkImageKey:function(e){return this.checkKey(U.Cache.IMAGE,e)},checkTextureKey:function(e){return this.checkKey(U.Cache.TEXTURE,e)},checkSoundKey:function(e){return this.checkKey(U.Cache.SOUND,e)},checkTextKey:function(e){return this.checkKey(U.Cache.TEXT,e)},checkPhysicsKey:function(e){return this.checkKey(U.Cache.PHYSICS,e)},checkTilemapKey:function(e){return this.checkKey(U.Cache.TILEMAP,e)},checkBinaryKey:function(e){return this.checkKey(U.Cache.BINARY,e)},checkBitmapDataKey:function(e){return this.checkKey(U.Cache.BITMAPDATA,e)},checkBitmapFontKey:function(e){return this.checkKey(U.Cache.BITMAPFONT,e)},checkJSONKey:function(e){return this.checkKey(U.Cache.JSON,e)},checkXMLKey:function(e){return this.checkKey(U.Cache.XML,e)},checkVideoKey:function(e){return this.checkKey(U.Cache.VIDEO,e)},checkShaderKey:function(e){return this.checkKey(U.Cache.SHADER,e)},checkRenderTextureKey:function(e){return this.checkKey(U.Cache.RENDER_TEXTURE,e)},getItem:function(e,t,i,n){return this.checkKey(t,e)?void 0===n?this._cacheMap[t][e]:this._cacheMap[t][e][n]:null},getCanvas:function(e){return this.getItem(e,U.Cache.CANVAS,"getCanvas","canvas")},getImage:function(e,t){null!=e||(e="__default"),void 0===t&&(t=!1);var i=this.getItem(e,U.Cache.IMAGE,"getImage");return null===i&&(i=this.getItem("__missing",U.Cache.IMAGE,"getImage")),t?i:i.data},getTextureFrame:function(e){return this.getItem(e,U.Cache.TEXTURE,"getTextureFrame","frame")},getSound:function(e){return this.getItem(e,U.Cache.SOUND,"getSound")},getSoundData:function(e){return this.getItem(e,U.Cache.SOUND,"getSoundData","data")},getText:function(e){return this.getItem(e,U.Cache.TEXT,"getText","data")},getPhysicsData:function(e,t,i){var n=this.getItem(e,U.Cache.PHYSICS,"getPhysicsData","data");if(null===n||null==t)return n;if(n[t]){var r=n[t];if(!r||!i)return r;for(var o in r)if((o=r[o]).fixtureKey===i)return o}return null},getTilemapData:function(e){return this.getItem(e,U.Cache.TILEMAP,"getTilemapData")},getBinary:function(e){return this.getItem(e,U.Cache.BINARY,"getBinary")},getBitmapData:function(e){return this.getItem(e,U.Cache.BITMAPDATA,"getBitmapData","data")},getBitmapFont:function(e){return this.getItem(e,U.Cache.BITMAPFONT,"getBitmapFont")},getJSON:function(e,t){var i=this.getItem(e,U.Cache.JSON,"getJSON","data");return i?t?U.Utils.extend(!0,Array.isArray(i)?[]:{},i):i:null},getXML:function(e){return this.getItem(e,U.Cache.XML,"getXML","data")},getVideo:function(e){return this.getItem(e,U.Cache.VIDEO,"getVideo")},getShader:function(e){return this.getItem(e,U.Cache.SHADER,"getShader","data")},getRenderTexture:function(e){return this.getItem(e,U.Cache.RENDER_TEXTURE,"getRenderTexture")},getBaseTexture:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getBaseTexture","base")},getFrame:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getFrame","frame")},getFrameCount:function(e,t){var i=this.getFrameData(e,t);return i?i.total:0},getFrameData:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),this.getItem(e,t,"getFrameData","frameData")},hasFrameData:function(e,t){return void 0===t&&(t=U.Cache.IMAGE),null!==this.getItem(e,t,"","frameData")},updateFrameData:function(e,t,i){void 0===i&&(i=U.Cache.IMAGE),this._cacheMap[i][e]&&(this._cacheMap[i][e].frameData=t)},getFrameByIndex:function(e,t,i){var n=this.getFrameData(e,i);return n?n.getFrame(t):null},getFrameByName:function(e,t,i){var n=this.getFrameData(e,i);return n?n.getFrameByName(t):null},getURL:function(e){return(e=this._resolveURL(e))?this._urlMap[e]:null},getKeys:function(e){void 0===e&&(e=U.Cache.IMAGE);var t=[];if(this._cacheMap[e])for(var i in this._cacheMap[e])"__default"!==i&&"__missing"!==i&&t.push(i);return t},removeCanvas:function(e){delete this._cache.canvas[e]},removeImage:function(e,t){void 0===t&&(t=!0);var i=this.getImage(e,!0);t&&i.base&&i.base.destroy(),delete this._cache.image[e]},removeSound:function(e){delete this._cache.sound[e]},removeText:function(e){delete this._cache.text[e]},removePhysics:function(e){delete this._cache.physics[e]},removeTilemap:function(e){delete this._cache.tilemap[e]},removeBinary:function(e){delete this._cache.binary[e]},removeBitmapData:function(e){delete this._cache.bitmapData[e]},removeBitmapFont:function(e){delete this._cache.bitmapFont[e]},removeJSON:function(e){delete this._cache.json[e]},removeXML:function(e){delete this._cache.xml[e]},removeVideo:function(e){delete this._cache.video[e]},removeShader:function(e){delete this._cache.shader[e]},removeRenderTexture:function(e){delete this._cache.renderTexture[e]},removeSpriteSheet:function(e){delete this._cache.spriteSheet[e]},removeTextureAtlas:function(e){delete this._cache.atlas[e]},clearGLTextures:function(){for(var e in this._cache.image)this._cache.image[e].base._glTextures=[]},_resolveURL:function(e,t){return this.autoResolveURL?(this._urlResolver.src=this.game.load.baseURL+e,this._urlTemp=this._urlResolver.src,this._urlResolver.src="",t&&(this._urlMap[this._urlTemp]=t),this._urlTemp):null},destroy:function(){for(var e=0;e<this._cacheMap.length;e++){var t=this._cacheMap[e];for(var i in t)"__default"!==i&&"__missing"!==i&&(t[i].destroy&&t[i].destroy(),delete t[i])}this._urlMap=null,this._urlResolver=null,this._urlTemp=null}},U.Cache.prototype.constructor=U.Cache,U.Loader=function(e){this.game=e,this.cache=e.cache,this.resetLocked=!1,this.isLoading=!1,this.hasLoaded=!1,this.preloadSprite=null,this.crossOrigin=!1,this.baseURL="",this.path="",this.headers={requestedWith:!1,json:"application/json",xml:"application/xml"},this.onLoadStart=new U.Signal,this.onLoadComplete=new U.Signal,this.onPackComplete=new U.Signal,this.onFileStart=new U.Signal,this.onFileComplete=new U.Signal,this.onFileError=new U.Signal,this.useXDomainRequest=!1,this._warnedAboutXDomainRequest=!1,this.enableParallel=!0,this.maxParallelDownloads=4,this._withSyncPointDepth=0,this._fileList=[],this._flightQueue=[],this._processingHead=0,this._fileLoadStarted=!1,this._totalPackCount=0,this._totalFileCount=0,this._loadedPackCount=0,this._loadedFileCount=0},U.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,U.Loader.TEXTURE_ATLAS_JSON_HASH=1,U.Loader.TEXTURE_ATLAS_XML_STARLING=2,U.Loader.PHYSICS_LIME_CORONA_JSON=3,U.Loader.PHYSICS_PHASER_JSON=4,U.Loader.TEXTURE_ATLAS_JSON_PYXEL=5,U.Loader.prototype={setPreloadSprite:function(e,t){t=t||0,this.preloadSprite={sprite:e,direction:t,width:e.width,height:e.height,rect:null},this.preloadSprite.rect=0===t?new U.Rectangle(0,0,1,e.height):new U.Rectangle(0,0,e.width,1),e.crop(this.preloadSprite.rect),e.visible=!0},resize:function(){this.preloadSprite&&this.preloadSprite.height!==this.preloadSprite.sprite.height&&(this.preloadSprite.rect.height=this.preloadSprite.sprite.height)},checkKeyExists:function(e,t){return-1<this.getAssetIndex(e,t)},getAssetIndex:function(e,t){for(var i=-1,n=0;n<this._fileList.length;n++){var r=this._fileList[n];if(r.type===e&&r.key===t&&(i=n,!r.loaded&&!r.loading))break}return i},getAsset:function(e,t){var i=this.getAssetIndex(e,t);return-1<i&&{index:i,file:this._fileList[i]}},reset:function(e,t){void 0===t&&(t=!1),this.resetLocked||(e&&(this.preloadSprite=null),this.isLoading=!1,this._processingHead=0,this._fileList.length=0,this._flightQueue.length=0,this._fileLoadStarted=!1,this._totalFileCount=0,this._totalPackCount=0,this._loadedPackCount=0,this._loadedFileCount=0,t&&(this.onLoadStart.removeAll(),this.onLoadComplete.removeAll(),this.onPackComplete.removeAll(),this.onFileStart.removeAll(),this.onFileComplete.removeAll(),this.onFileError.removeAll()))},addToFileList:function(e,t,i,n,r,o){if(void 0===r&&(r=!1),void 0===t||""===t)return this;if(null==i){if(!o)return this;i=t+o}var a={type:e,key:t,path:this.path,url:i,syncPoint:0<this._withSyncPointDepth,data:null,loading:!1,loaded:!1,error:!1};if(n)for(var s in n)a[s]=n[s];var l=this.getAssetIndex(e,t);if(r&&-1<l){var p=this._fileList[l];p.loading||p.loaded?(this._fileList.push(a),this._totalFileCount++):this._fileList[l]=a}else-1===l&&(this._fileList.push(a),this._totalFileCount++);return this},replaceInFileList:function(e,t,i,n){return this.addToFileList(e,t,i,n,!0)},pack:function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=null),!t&&!i)return this;var r={type:"packfile",key:e,url:t,path:this.path,syncPoint:!0,data:null,loading:!1,loaded:!1,error:!1,callbackContext:n};i&&("string"==typeof i&&(i=JSON.parse(i)),r.data=i||{},r.loaded=!0);for(var o=0;o<this._fileList.length+1;o++){var a=this._fileList[o];if(!a||!a.loaded&&!a.loading&&"packfile"!==a.type){this._fileList.splice(o,0,r),this._totalPackCount++;break}}return this},image:function(e,t,i){return this.addToFileList("image",e,t,void 0,i,".png")},images:function(e,t){if(Array.isArray(t))for(var i=0;i<e.length;i++)this.image(e[i],t[i]);else for(i=0;i<e.length;i++)this.image(e[i]);return this},text:function(e,t,i){return this.addToFileList("text",e,t,void 0,i,".txt")},json:function(e,t,i){return this.addToFileList("json",e,t,void 0,i,".json")},shader:function(e,t,i){return this.addToFileList("shader",e,t,void 0,i,".frag")},xml:function(e,t,i){return this.addToFileList("xml",e,t,void 0,i,".xml")},script:function(e,t,i,n){return void 0===i&&(i=!1),!1!==i&&void 0===n&&(n=this),this.addToFileList("script",e,t,{syncPoint:!0,callback:i,callbackContext:n},!1,".js")},binary:function(e,t,i,n){return void 0===i&&(i=!1),!1!==i&&void 0===n&&(n=i),this.addToFileList("binary",e,t,{callback:i,callbackContext:n},!1,".bin")},spritesheet:function(e,t,i,n,r,o,a){return void 0===r&&(r=-1),void 0===o&&(o=0),void 0===a&&(a=0),this.addToFileList("spritesheet",e,t,{frameWidth:i,frameHeight:n,frameMax:r,margin:o,spacing:a},!1,".png")},audio:function(e,t,i){return this.game.sound.noAudio?this:(void 0===i&&(i=!0),"string"==typeof t&&(t=[t]),this.addToFileList("audio",e,t,{buffer:null,autoDecode:i}))},audioSprite:function(e,t,i,n,r){return this.game.sound.noAudio||(void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=!0),this.audio(e,t,r),i?this.json(e+"-audioatlas",i):n&&("string"==typeof n&&(n=JSON.parse(n)),this.cache.addJSON(e+"-audioatlas","",n))),this},audiosprite:function(e,t,i,n,r){return this.audioSprite(e,t,i,n,r)},video:function(e,t,i,n){return void 0===i&&(i=this.game.device.firefox?"loadeddata":"canplaythrough"),void 0===n&&(n=!1),"string"==typeof t&&(t=[t]),this.addToFileList("video",e,t,{buffer:null,asBlob:n,loadEvent:i})},tilemap:function(e,t,i,n){if(void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=U.Tilemap.CSV),t||i||(t=n===U.Tilemap.CSV?e+".csv":e+".json"),i){switch(n){case U.Tilemap.CSV:break;case U.Tilemap.TILED_JSON:"string"==typeof i&&(i=JSON.parse(i))}this.cache.addTilemap(e,null,i,n)}else this.addToFileList("tilemap",e,t,{format:n});return this},physics:function(e,t,i,n){return void 0===t&&(t=null),void 0===i&&(i=null),void 0===n&&(n=U.Physics.LIME_CORONA_JSON),t||i||(t=e+".json"),i?("string"==typeof i&&(i=JSON.parse(i)),this.cache.addPhysicsData(e,null,i,n)):this.addToFileList("physics",e,t,{format:n}),this},bitmapFont:function(e,t,i,n,r,o){if(null!=t||(t=e+".png"),void 0===i&&(i=null),void 0===n&&(n=null),null===i&&null===n&&(i=e+".xml"),void 0===r&&(r=0),void 0===o&&(o=0),i)this.addToFileList("bitmapfont",e,t,{atlasURL:i,xSpacing:r,ySpacing:o});else if("string"==typeof n){var a,s;try{a=JSON.parse(n)}catch(e){s=this.parseXml(n)}if(!s&&!a)throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");this.addToFileList("bitmapfont",e,t,{atlasURL:null,atlasData:a||s,atlasType:a?"json":"xml",xSpacing:r,ySpacing:o})}return this},atlasJSONArray:function(e,t,i,n){return this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(e,t,i,n){return this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(e,t,i,n){return void 0===i&&(i=null),void 0===n&&(n=null),i||n||(i=e+".xml"),this.atlas(e,t,i,n,U.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(e,t,i,n,r){if(null!=t||(t=e+".png"),void 0===i&&(i=null),void 0===n&&(n=null),void 0===r&&(r=U.Loader.TEXTURE_ATLAS_JSON_ARRAY),i||n||(i=r===U.Loader.TEXTURE_ATLAS_XML_STARLING?e+".xml":e+".json"),i)this.addToFileList("textureatlas",e,t,{atlasURL:i,format:r});else{switch(r){case U.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof n&&(n=JSON.parse(n));break;case U.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof n){var o=this.parseXml(n);if(!o)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");n=o}}this.addToFileList("textureatlas",e,t,{atlasURL:null,atlasData:n,format:r})}return this},withSyncPoint:function(e,t){this._withSyncPointDepth++;try{e.call(t||this,this)}finally{this._withSyncPointDepth--}return this},addSyncPoint:function(e,t){var i=this.getAsset(e,t);return i&&(i.file.syncPoint=!0),this},removeFile:function(e,t){var i=this.getAsset(e,t);i&&(i.loaded||i.loading||this._fileList.splice(i.index,1))},removeAll:function(){this._fileList.length=0,this._flightQueue.length=0},start:function(){this.isLoading||(this.hasLoaded=!1,this.isLoading=!0,this.updateProgress(),this.processLoadQueue())},processLoadQueue:function(){if(this.isLoading){for(var e=0;e<this._flightQueue.length;e++){((n=this._flightQueue[e]).loaded||n.error)&&(this._flightQueue.splice(e,1),e--,n.loading=!1,n.requestUrl=null,n.requestObject=null,n.error&&this.onFileError.dispatch(n.key,n),"packfile"!==n.type?(this._loadedFileCount++,this.onFileComplete.dispatch(this.progress,n.key,!n.error,this._loadedFileCount,this._totalFileCount)):"packfile"===n.type&&n.error&&(this._loadedPackCount++,this.onPackComplete.dispatch(n.key,!n.error,this._loadedPackCount,this._totalPackCount)))}var t=!1,i=this.enableParallel?U.Math.clamp(this.maxParallelDownloads,1,12):1;for(e=this._processingHead;e<this._fileList.length;e++){var n;if("packfile"===(n=this._fileList[e]).type&&!n.error&&n.loaded&&e===this._processingHead&&(this.processPack(n),this._loadedPackCount++,this.onPackComplete.dispatch(n.key,!n.error,this._loadedPackCount,this._totalPackCount)),n.loaded||n.error?e===this._processingHead&&(this._processingHead=e+1):!n.loading&&this._flightQueue.length<i&&("packfile"!==n.type||n.data?t||(this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this._flightQueue.push(n),n.loading=!0,this.onFileStart.dispatch(this.progress,n.key,n.url),this.loadFile(n)):(this._flightQueue.push(n),n.loading=!0,this.loadFile(n))),!n.loaded&&n.syncPoint&&(t=!0),this._flightQueue.length>=i||t&&this._loadedPackCount===this._totalPackCount)break}if(this.updateProgress(),this._processingHead>=this._fileList.length)this.finishedLoading();else if(!this._flightQueue.length){var r=this;setTimeout(function(){r.finishedLoading(!0)},2e3)}}else this.finishedLoading(!0)},finishedLoading:function(e){this.hasLoaded||(this.hasLoaded=!0,this.isLoading=!1,e||this._fileLoadStarted||(this._fileLoadStarted=!0,this.onLoadStart.dispatch()),this.onLoadComplete.dispatch(),this.game.state.loadComplete(),this.reset())},asyncComplete:function(e,t){void 0===t&&(t=""),e.loaded=!0,e.error=!!t,t&&(e.errorMessage=t),this.processLoadQueue()},processPack:function(e){var t=e.data[e.key];if(t)for(var i=0;i<t.length;i++){var n=t[i];switch(n.type){case"image":this.image(n.key,n.url,n.overwrite);break;case"text":this.text(n.key,n.url,n.overwrite);break;case"json":this.json(n.key,n.url,n.overwrite);break;case"xml":this.xml(n.key,n.url,n.overwrite);break;case"script":this.script(n.key,n.url,n.callback,e.callbackContext||this);break;case"binary":this.binary(n.key,n.url,n.callback,e.callbackContext||this);break;case"spritesheet":this.spritesheet(n.key,n.url,n.frameWidth,n.frameHeight,n.frameMax,n.margin,n.spacing);break;case"video":this.video(n.key,n.urls);break;case"audio":this.audio(n.key,n.urls,n.autoDecode);break;case"audiosprite":this.audiosprite(n.key,n.urls,n.jsonURL,n.jsonData,n.autoDecode);break;case"tilemap":this.tilemap(n.key,n.url,n.data,U.Tilemap[n.format]);break;case"physics":this.physics(n.key,n.url,n.data,U.Loader[n.format]);break;case"bitmapFont":this.bitmapFont(n.key,n.textureURL,n.atlasURL,n.atlasData,n.xSpacing,n.ySpacing);break;case"atlasJSONArray":this.atlasJSONArray(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlasJSONHash":this.atlasJSONHash(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlasXML":this.atlasXML(n.key,n.textureURL,n.atlasURL,n.atlasData);break;case"atlas":this.atlas(n.key,n.textureURL,n.atlasURL,n.atlasData,U.Loader[n.format]);break;case"shader":this.shader(n.key,n.url,n.overwrite)}}},transformUrl:function(e,t){return!!e&&(e.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e:this.baseURL+t.path+e)},loadFile:function(e){switch(e.type){case"packfile":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.fileComplete);break;case"image":case"spritesheet":case"textureatlas":case"bitmapfont":this.loadImageTag(e);break;case"audio":e.url=this.getAudioURL(e.url),e.url?this.game.sound.usingWebAudio?this.xhrLoad(e,this.transformUrl(e.url,e),"arraybuffer",this.fileComplete):this.game.sound.usingAudioTag&&this.loadAudioTag(e):this.fileError(e,null,"No supported audio URL specified or device does not have audio playback support");break;case"video":e.url=this.getVideoURL(e.url),e.url?e.asBlob?this.xhrLoad(e,this.transformUrl(e.url,e),"blob",this.fileComplete):this.loadVideoTag(e):this.fileError(e,null,"No supported video URL specified or device does not have video playback support");break;case"json":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.jsonLoadComplete);break;case"xml":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.xmlLoadComplete);break;case"tilemap":e.format===U.Tilemap.TILED_JSON?this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.jsonLoadComplete):e.format===U.Tilemap.CSV?this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.csvLoadComplete):this.asyncComplete(e,"invalid Tilemap format: "+e.format);break;case"text":case"script":case"shader":case"physics":this.xhrLoad(e,this.transformUrl(e.url,e),"text",this.fileComplete);break;case"binary":this.xhrLoad(e,this.transformUrl(e.url,e),"arraybuffer",this.fileComplete)}},loadImageTag:function(e){var t=this;e.data=new Image,e.data.name=e.key,this.crossOrigin&&(e.data.crossOrigin=this.crossOrigin),e.data.onload=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,t.fileComplete(e))},e.data.onerror=function(){e.data.onload&&(e.data.onload=null,e.data.onerror=null,t.fileError(e))},e.data.src=this.transformUrl(e.url,e),e.data.complete&&e.data.width&&e.data.height&&(e.data.onload=null,e.data.onerror=null,this.fileComplete(e))},loadVideoTag:function(e){var t=this;e.data=document.createElement("video"),e.data.name=e.key,e.data.controls=!1,e.data.autoplay=!1;var i=function(){e.data.removeEventListener(e.loadEvent,i,!1),e.data.onerror=null,e.data.canplay=!0,U.GAMES[t.game.id].load.fileComplete(e)};e.data.onerror=function(){e.data.removeEventListener(e.loadEvent,i,!1),e.data.onerror=null,e.data.canplay=!1,t.fileError(e)},e.data.addEventListener(e.loadEvent,i,!1),e.data.src=this.transformUrl(e.url,e),e.data.load()},loadAudioTag:function(e){var t=this;if(this.game.sound.touchLocked)e.data=new Audio,e.data.name=e.key,e.data.preload="auto",e.data.src=this.transformUrl(e.url,e),this.fileComplete(e);else{e.data=new Audio,e.data.name=e.key;var i=function(){e.data.removeEventListener("canplaythrough",i,!1),e.data.onerror=null,t.fileComplete(e)};e.data.onerror=function(){e.data.removeEventListener("canplaythrough",i,!1),e.data.onerror=null,t.fileError(e)},e.data.preload="auto",e.data.src=this.transformUrl(e.url,e),e.data.addEventListener("canplaythrough",i,!1),e.data.load()}},xhrLoad:function(t,e,i,n,r){if(this.useXDomainRequest&&window.XDomainRequest)this.xhrLoadWithXDR(t,e,i,n,r);else{var o=new XMLHttpRequest;o.open("GET",e,!0),o.responseType=i,!1!==this.headers.requestedWith&&o.setRequestHeader("X-Requested-With",this.headers.requestedWith),this.headers[t.type]&&o.setRequestHeader("Accept",this.headers[t.type]),r=r||this.fileError;var a=this;o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?r.call(a,t,o):n.call(a,t,o)}catch(e){a.hasLoaded?window.console:a.asyncComplete(t,e.message||"Exception")}},o.onerror=function(){try{return r.call(a,t,o)}catch(e){a.hasLoaded?window.console:a.asyncComplete(t,e.message||"Exception")}},t.requestObject=o,t.requestUrl=e,o.send()}},xhrLoadWithXDR:function(t,e,i,n,r){this._warnedAboutXDomainRequest||this.game.device.ie&&!(10<=this.game.device.ieVersion)||(this._warnedAboutXDomainRequest=!0);var o=new window.XDomainRequest;o.open("GET",e,!0),o.responseType=i,o.timeout=3e3,r=r||this.fileError;var a=this;o.onerror=function(){try{return r.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},o.ontimeout=function(){try{return r.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},o.onprogress=function(){},o.onload=function(){try{return 4===o.readyState&&400<=o.status&&o.status<=599?r.call(a,t,o):n.call(a,t,o)}catch(e){a.asyncComplete(t,e.message||"Exception")}},t.requestObject=o,t.requestUrl=e,setTimeout(function(){o.send()},0)},getVideoURL:function(e){for(var t=0;t<e.length;t++){var i,n=e[t];if(n.uri){if(i=n.type,n=n.uri,this.game.device.canPlayVideo(i))return n}else{if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return n;if(0<=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),i=n.substr((Math.max(0,n.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayVideo(i))return e[t]}}return null},getAudioURL:function(e){if(this.game.sound.noAudio)return null;for(var t=0;t<e.length;t++){var i,n=e[t];if(n.uri){if(i=n.type,n=n.uri,this.game.device.canPlayAudio(i))return n}else{if(0===n.indexOf("blob:")||0===n.indexOf("data:"))return n;if(0<=n.indexOf("?")&&(n=n.substr(0,n.indexOf("?"))),i=n.substr((Math.max(0,n.lastIndexOf("."))||1/0)+1).toLowerCase(),this.game.device.canPlayAudio(i))return e[t]}}return null},fileError:function(e,t,i){var n="error loading asset from URL "+(e.requestUrl||this.transformUrl(e.url,e));!i&&t&&(i=t.status),i&&(n=n+" ("+i+")"),this.asyncComplete(e,n)},fileComplete:function(e,t){var i=!0;switch(e.type){case"packfile":var n=JSON.parse(t.responseText);e.data=n||{};break;case"image":this.cache.addImage(e.key,e.url,e.data);break;case"spritesheet":this.cache.addSpriteSheet(e.key,e.url,e.data,e.frameWidth,e.frameHeight,e.frameMax,e.margin,e.spacing);break;case"textureatlas":if(null==e.atlasURL)this.cache.addTextureAtlas(e.key,e.url,e.data,e.atlasData,e.format);else if(i=!1,e.format===U.Loader.TEXTURE_ATLAS_JSON_ARRAY||e.format===U.Loader.TEXTURE_ATLAS_JSON_HASH||e.format===U.Loader.TEXTURE_ATLAS_JSON_PYXEL)this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",this.jsonLoadComplete);else{if(e.format!==U.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+e.format);this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",this.xmlLoadComplete)}break;case"bitmapfont":e.atlasURL?(i=!1,this.xhrLoad(e,this.transformUrl(e.atlasURL,e),"text",function(e,t){var i;try{i=JSON.parse(t.responseText)}catch(e){}i?(e.atlasType="json",this.jsonLoadComplete(e,t)):(e.atlasType="xml",this.xmlLoadComplete(e,t))})):this.cache.addBitmapFont(e.key,e.url,e.data,e.atlasData,e.atlasType,e.xSpacing,e.ySpacing);break;case"video":if(e.asBlob)try{e.data=t.response}catch(t){throw new Error("Phaser.Loader. Unable to parse video file as Blob: "+e.key)}this.cache.addVideo(e.key,e.url,e.data,e.asBlob);break;case"audio":this.game.sound.usingWebAudio?(e.data=t.response,this.cache.addSound(e.key,e.url,e.data,!0,!1),e.autoDecode&&this.game.sound.decode(e.key)):this.cache.addSound(e.key,e.url,e.data,!1,!0);break;case"text":e.data=t.responseText,this.cache.addText(e.key,e.url,e.data);break;case"shader":e.data=t.responseText,this.cache.addShader(e.key,e.url,e.data);break;case"physics":n=JSON.parse(t.responseText);this.cache.addPhysicsData(e.key,e.url,n,e.format);break;case"script":e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=t.responseText,document.head.appendChild(e.data),e.callback&&(e.data=e.callback.call(e.callbackContext,e.key,t.responseText));break;case"binary":e.callback?e.data=e.callback.call(e.callbackContext,e.key,t.response):e.data=t.response,this.cache.addBinary(e.key,e.data)}i&&this.asyncComplete(e)},jsonLoadComplete:function(e,t){var i=JSON.parse(t.responseText);"tilemap"===e.type?this.cache.addTilemap(e.key,e.url,i,e.format):"bitmapfont"===e.type?this.cache.addBitmapFont(e.key,e.url,e.data,i,e.atlasType,e.xSpacing,e.ySpacing):"json"===e.type?this.cache.addJSON(e.key,e.url,i):this.cache.addTextureAtlas(e.key,e.url,e.data,i,e.format),this.asyncComplete(e)},csvLoadComplete:function(e,t){var i=t.responseText;this.cache.addTilemap(e.key,e.url,i,e.format),this.asyncComplete(e)},xmlLoadComplete:function(e,t){var i=t.responseText,n=this.parseXml(i);if(n)"bitmapfont"===e.type?this.cache.addBitmapFont(e.key,e.url,e.data,n,e.atlasType,e.xSpacing,e.ySpacing):"textureatlas"===e.type?this.cache.addTextureAtlas(e.key,e.url,e.data,n,e.format):"xml"===e.type&&this.cache.addXML(e.key,e.url,n),this.asyncComplete(e);else{t.responseType||t.contentType;this.asyncComplete(e,"invalid XML")}},parseXml:function(e){var t;try{if(window.DOMParser)t=(new DOMParser).parseFromString(e,"text/xml");else(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)}catch(e){t=null}return t&&t.documentElement&&!t.getElementsByTagName("parsererror").length?t:null},updateProgress:function(){this.preloadSprite&&(0===this.preloadSprite.direction?this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress):this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite?this.preloadSprite.sprite.updateCrop():this.preloadSprite=null)},totalLoadedFiles:function(){return this._loadedFileCount},totalQueuedFiles:function(){return this._totalFileCount-this._loadedFileCount},totalLoadedPacks:function(){return this._totalPackCount},totalQueuedPacks:function(){return this._totalPackCount-this._loadedPackCount}},Object.defineProperty(U.Loader.prototype,"progressFloat",{get:function(){var e=this._loadedFileCount/this._totalFileCount*100;return U.Math.clamp(e||0,0,100)}}),Object.defineProperty(U.Loader.prototype,"progress",{get:function(){return Math.round(this.progressFloat)}}),U.Loader.prototype.constructor=U.Loader,U.LoaderParser={bitmapFont:function(e,t,i,n){return this.xmlBitmapFont(e,t,i,n)},xmlBitmapFont:function(e,t,i,n){var r={},o=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0];r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(a.getAttribute("lineHeight"),10)+n,r.chars={};for(var s=e.getElementsByTagName("char"),l=0;l<s.length;l++){var p=parseInt(s[l].getAttribute("id"),10);r.chars[p]={x:parseInt(s[l].getAttribute("x"),10),y:parseInt(s[l].getAttribute("y"),10),width:parseInt(s[l].getAttribute("width"),10),height:parseInt(s[l].getAttribute("height"),10),xOffset:parseInt(s[l].getAttribute("xoffset"),10),yOffset:parseInt(s[l].getAttribute("yoffset"),10),xAdvance:parseInt(s[l].getAttribute("xadvance"),10)+i,kerning:{}}}var h=e.getElementsByTagName("kerning");for(l=0;l<h.length;l++){var u=parseInt(h[l].getAttribute("first"),10),c=parseInt(h[l].getAttribute("second"),10),d=parseInt(h[l].getAttribute("amount"),10);r.chars[c].kerning[u]=d}return this.finalizeBitmapFont(t,r)},jsonBitmapFont:function(e,t,i,n){var r={font:e.font.info._face,size:parseInt(e.font.info._size,10),lineHeight:parseInt(e.font.common._lineHeight,10)+n,chars:{}};return e.font.chars.char.forEach(function(e){var t=parseInt(e._id,10);r.chars[t]={x:parseInt(e._x,10),y:parseInt(e._y,10),width:parseInt(e._width,10),height:parseInt(e._height,10),xOffset:parseInt(e._xoffset,10),yOffset:parseInt(e._yoffset,10),xAdvance:parseInt(e._xadvance,10)+i,kerning:{}}}),e.font.kernings&&e.font.kernings.kerning&&e.font.kernings.kerning.forEach(function(e){r.chars[e._second].kerning[e._first]=parseInt(e._amount,10)}),this.finalizeBitmapFont(t,r)},finalizeBitmapFont:function(i,n){return Object.keys(n.chars).forEach(function(e){var t=n.chars[e];t.texture=new PIXI.Texture(i,new U.Rectangle(t.x,t.y,t.width,t.height))}),n}},U.AudioSprite=function(e,t){for(var i in this.game=e,this.key=t,this.config=this.game.cache.getJSON(t+"-audioatlas"),this.autoplayKey=null,this.autoplay=!1,this.sounds={},this.config.spritemap){var n=this.config.spritemap[i],r=this.game.add.sound(this.key);r.addMarker(i,n.start,n.end-n.start,null,n.loop),this.sounds[i]=r}this.config.autoplay&&(this.autoplayKey=this.config.autoplay,this.play(this.autoplayKey),this.autoplay=this.sounds[this.autoplayKey])},U.AudioSprite.prototype={play:function(e,t){return void 0===t&&(t=1),this.sounds[e].play(e,null,t)},stop:function(e){if(e)this.sounds[e].stop();else for(var t in this.sounds)this.sounds[t].stop()},get:function(e){return this.sounds[e]}},U.AudioSprite.prototype.constructor=U.AudioSprite,U.Sound=function(e,t,i,n,r){void 0===i&&(i=1),void 0===n&&(n=!1),void 0===r&&(r=e.sound.connectToMaster),this.game=e,this.name=t,this.key=t,this.loop=n,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.fadeTween=null,this.pendingPlayback=!1,this.override=!1,this.allowMultiple=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this._sound=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,void 0===this.context.createGain?this.gainNode=this.context.createGainNode():this.gainNode=this.context.createGain(),this.gainNode.gain.value=i*this.game.sound.volume,r&&this.gainNode.connect(this.masterGainNode)):this.usingAudioTag&&(this.game.cache.getSound(t)&&this.game.cache.isSoundReady(t)?(this._sound=this.game.cache.getSoundData(t),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this)),this.onDecoded=new U.Signal,this.onPlay=new U.Signal,this.onPause=new U.Signal,this.onResume=new U.Signal,this.onLoop=new U.Signal,this.onStop=new U.Signal,this.onMute=new U.Signal,this.onMarkerComplete=new U.Signal,this.onFadeComplete=new U.Signal,this._volume=i,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._tempPause=0,this._muteVolume=0,this._tempLoop=0,this._paused=!1,this._onDecodedEventDispatched=!1},U.Sound.prototype={soundHasUnlocked:function(e){e===this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(e,t,i,n,r){null!=i||(i=1),null!=n||(n=1),void 0===r&&(r=!1),this.markers[e]={name:e,start:t,stop:t+i,volume:n,duration:i,durationMS:1e3*i,loop:r}},removeMarker:function(e){delete this.markers[e]},onEndedHandler:function(){this._sound.onended=null,this.isPlaying=!1,this.currentTime=this.durationMS,this.stop()},update:function(){this.game.cache.checkSoundKey(this.key)?(this.isDecoded&&!this._onDecodedEventDispatched&&(this.onDecoded.dispatch(this),this._onDecodedEventDispatched=!0),this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.time-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),this.isPlaying=!1,""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.time,this.isPlaying=!0):(this.onMarkerComplete.dispatch(this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):""!==this.currentMarker&&this.stop():this.loop?(this.onLoop.dispatch(this),""===this.currentMarker&&(this.currentTime=0,this.startTime=this.game.time.time),this.isPlaying=!1,this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))):this.destroy()},loopFull:function(e){return this.play(null,0,e,!0)},play:function(e,t,i,n,r){if(void 0!==e&&!1!==e&&null!==e||(e=""),void 0===r&&(r=!0),this.isPlaying&&!this.allowMultiple&&!r&&!this.override)return this;if(this._sound&&this.isPlaying&&!this.allowMultiple&&(this.override||r)){if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(e){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.isPlaying=!1}var o=Object.keys(this.markers);if(""===e&&1===o.length&&(e=o[0]),""===e&&0<o.length)return this;if(""!==e){if(!this.markers[e])return this;this.currentMarker=e,this.position=this.markers[e].start,this.volume=this.markers[e].volume,this.loop=this.markers[e].loop,this.duration=this.markers[e].duration,this.durationMS=this.markers[e].durationMS,void 0!==i&&(this.volume=i),void 0!==n&&(this.loop=n),this._tempMarker=e,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else t=t||0,void 0===i&&(i=this._volume),void 0===n&&(n=this.loop),this.position=Math.max(0,t),this.volume=i,this.loop=n,this.duration=0,this.durationMS=0,this._tempMarker=e,this._tempPosition=t,this._tempVolume=i,this._tempLoop=n;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(this._sound=this.context.createBufferSource(),this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this._buffer=this.game.cache.getSoundData(this.key),this._sound.buffer=this._buffer,this.loop&&""===e&&(this._sound.loop=!0),this.loop||""!==e||(this._sound.onended=this.onEndedHandler.bind(this)),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=Math.ceil(1e3*this.totalDuration)),void 0===this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this.loop&&""===e?this._sound.start(0,0):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&!1===this.game.cache.getSound(this.key).isDecoding&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(this.game.device.wechatMinigame||this.game.device.cocoonJS||4===this._sound.readyState)?(this.loop&&(this._sound.loop=!0),!this.loop&&""===e&&this.game.device.wechatMinigame&&this._sound.addEventListener("ended",this.onEndedHandler.bind(this)),this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._muted||this.game.sound.mute?this._sound.volume=0:this._sound.volume=this._volume,this.isPlaying=!0,this.startTime=this.game.time.time,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0,this},restart:function(e,t,i,n){e=e||"",t=t||0,i=i||1,void 0===n&&(n=!1),this.play(e,t,i,n,!0)},pause:function(){this.isPlaying&&this._sound&&(this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.time,this._tempPause=this._sound.currentTime,this.onPause.dispatch(this),this.stop())},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var e=Math.max(0,this.position+this.pausedPosition/1e3);this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this.externalNode?this._sound.connect(this.externalNode):this._sound.connect(this.gainNode),this.loop&&(this._sound.loop=!0),this.loop||""!==this.currentMarker||(this._sound.onended=this.onEndedHandler.bind(this));var t=this.duration-this.pausedPosition/1e3;void 0===this._sound.start?this._sound.noteGrainOn(0,e,t):this.loop&&this.game.device.chrome?42===this.game.device.chromeVersion?this._sound.start(0):this._sound.start(0,e):this._sound.start(0,e,t)}else this._sound.currentTime=this._tempPause,this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.time-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio){if(void 0===this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(e){}this.externalNode?this._sound.disconnect(this.externalNode):this.gainNode&&this._sound.disconnect(this.gainNode)}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);if(this.pendingPlayback=!1,this.isPlaying=!1,!this.paused){var e=this.currentMarker;""!==this.currentMarker&&this.onMarkerComplete.dispatch(this.currentMarker,this),this.currentMarker="",null!==this.fadeTween&&this.fadeTween.stop(),this.onStop.dispatch(this,e)}},fadeIn:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=this.currentMarker),this.paused||(this.play(i,0,0,t),this.fadeTo(e,1))},fadeOut:function(e){this.fadeTo(e,0)},fadeTo:function(e,t){if(this.isPlaying&&!this.paused&&t!==this.volume){if(void 0===e&&(e=1e3),void 0===t)return;this.fadeTween=this.game.add.tween(this).to({volume:t},e,U.Easing.Linear.None,!0),this.fadeTween.onComplete.add(this.fadeComplete,this)}},fadeComplete:function(){this.onFadeComplete.dispatch(this,this.volume),0===this.volume&&this.stop()},updateGlobalVolume:function(e){this.usingAudioTag&&this._sound&&(this._sound.volume=e*this._volume)},destroy:function(e){void 0===e&&(e=!0),this.stop(),e?this.game.sound.remove(this):(this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose())}},U.Sound.prototype.constructor=U.Sound,Object.defineProperty(U.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(U.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(U.Sound.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(e){(e=e||!1)!==this._muted&&(e?(this._muted=!0,this._muteVolume=this._tempVolume,this.game.device.wechatMinigame?this._sound.pause():this.usingWebAudio?this.gainNode.gain.value=0:this.usingAudioTag&&this._sound&&(this._sound.volume=0)):(this._muted=!1,this.game.device.wechatMinigame&&this.isPlaying?this._sound.play():this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this))}}),Object.defineProperty(U.Sound.prototype,"volume",{get:function(){return this._volume},set:function(e){this.game.device.firefox&&this.usingAudioTag&&(e=this.game.math.clamp(e,0,1)),this._muted?this._muteVolume=e:(this._tempVolume=e,this._volume=e,this.usingWebAudio?this.gainNode.gain.value=e:this.usingAudioTag&&this._sound&&(this._sound.volume=e))}}),U.SoundManager=function(e){this.game=e,this.onSoundDecode=new U.Signal,this.onVolumeChange=new U.Signal,this.onMute=new U.Signal,this.onUnMute=new U.Signal,this.context=null,this.usingWebAudio=!1,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32,this.muteOnPause=!0,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this._watchList=new U.ArraySet,this._watching=!1,this._watchCallback=null,this._watchContext=null},U.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&!1===this.game.device.webAudio&&(this.channels=1),window.PhaserGlobal){if(!0===window.PhaserGlobal.disableAudio)return this.noAudio=!0,void(this.touchLocked=!1);if(!0===window.PhaserGlobal.disableWebAudio)return this.usingAudioTag=!0,void(this.touchLocked=!1)}if(window.PhaserGlobal&&window.PhaserGlobal.audioContext)this.context=window.PhaserGlobal.audioContext;else if(window.AudioContext)try{this.context=new window.AudioContext}catch(e){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(e){this.context=null,this.usingWebAudio=!1,this.touchLocked=!1}if(null===this.context){if(void 0===window.Audio)return void(this.noAudio=!0);this.usingAudioTag=!0}else this.usingWebAudio=!0,void 0===this.context.createGain?this.masterGain=this.context.createGainNode():this.masterGain=this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination);this.noAudio||!this.game.device.cocoonJS&&(this.game.device.chrome||this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock)&&this.setTouchLock()},setTouchLock:function(){this.noAudio||window.PhaserGlobal&&!0===window.PhaserGlobal.disableAudio||(8<this.game.device.iOSVersion||55<=this.game.device.chromeVersion?this.game.input.touch.addTouchLockCallback(this.unlock,this,!0):this.game.input.touch.addTouchLockCallback(this.unlock,this),this.touchLocked=!0)},unlock:function(){if(this.noAudio||!this.touchLocked||null!==this._unlockSource)return!0;if(this.usingAudioTag)this.touchLocked=!1,this._unlockSource=null;else if(this.usingWebAudio){var e=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=e,this._unlockSource.connect(this.context.destination),void 0===this._unlockSource.start?this._unlockSource.noteOn(0):this._unlockSource.start(0),"suspended"===this._unlockSource.context.state&&this._unlockSource.context.resume()}return!0},stopAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].stop()},pauseAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].pause()},resumeAll:function(){if(!this.noAudio)for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].resume()},decode:function(t,i){i=i||null;var e=this.game.cache.getSoundData(t);if(e&&!1===this.game.cache.isSoundDecoded(t)){this.game.cache.updateSound(t,"isDecoding",!0);var n=this;try{this.context.decodeAudioData(e,function(e){e&&(n.game.cache.decodedSound(t,e),n.onSoundDecode.dispatch(t,i))})}catch(t){}}},setDecodedCallback:function(e,t,i){"string"==typeof e&&(e=[e]),this._watchList.reset();for(var n=0;n<e.length;n++)e[n]instanceof U.Sound?this.game.cache.isSoundDecoded(e[n].key)||this._watchList.add(e[n].key):this.game.cache.isSoundDecoded(e[n])||this._watchList.add(e[n]);0===this._watchList.total?(this._watching=!1,t.call(i)):(this._watching=!0,this._watchCallback=t,this._watchContext=i)},update:function(){if(!this.noAudio){!this.touchLocked||null===this._unlockSource||this._unlockSource.playbackState!==this._unlockSource.PLAYING_STATE&&this._unlockSource.playbackState!==this._unlockSource.FINISHED_STATE||(this.touchLocked=!1,this._unlockSource=null);for(var e=0;e<this._sounds.length;e++)this._sounds[e].update();if(this._watching){for(var t=this._watchList.first;t;)this.game.cache.isSoundDecoded(t)&&this._watchList.remove(t),t=this._watchList.next;0===this._watchList.total&&(this._watching=!1,this._watchCallback.call(this._watchContext))}}},add:function(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=!1),void 0===n&&(n=this.connectToMaster);var r=new U.Sound(this.game,e,t,i,n);return this._sounds.push(r),r},addSprite:function(e){return new U.AudioSprite(this.game,e)},remove:function(e){for(var t=this._sounds.length;t--;)if(this._sounds[t]===e)return this._sounds[t].destroy(!1),this._sounds.splice(t,1),!0;return!1},removeByKey:function(e){for(var t=this._sounds.length,i=0;t--;)this._sounds[t].key===e&&(this._sounds[t].destroy(!1),this._sounds.splice(t,1),i++);return i},play:function(e,t,i){if(!this.noAudio){var n=this.add(e,t,i);return n.play(),n}},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!0);this.onMute.dispatch()}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].mute=!1);this.onUnMute.dispatch()}},destroy:function(){this.stopAll();for(var e=0;e<this._sounds.length;e++)this._sounds[e]&&this._sounds[e].destroy();this._sounds=[],this.onSoundDecode.dispose(),this.context&&(window.PhaserGlobal?window.PhaserGlobal.audioContext=this.context:this.context.close&&this.context.close())}},U.SoundManager.prototype.constructor=U.SoundManager,Object.defineProperty(U.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(e){if(e=e||!1){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(U.SoundManager.prototype,"volume",{get:function(){return this._volume},set:function(e){if(e<0?e=0:1<e&&(e=1),this._volume!==e){if(this._volume=e,this.usingWebAudio)this.masterGain.gain.value=e;else for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&this._sounds[t].updateGlobalVolume(e);this.onVolumeChange.dispatch(e)}}}),U.ScaleManager=function(e,t,i){this.game=e,this.dom=U.DOM,this.grid=null,this.width=0,this.height=0,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.offset=new U.Point,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this._pageAlignHorizontally=!1,this._pageAlignVertically=!1,this.onOrientationChange=new U.Signal,this.enterIncorrectOrientation=new U.Signal,this.leaveIncorrectOrientation=new U.Signal,this.hasPhaserSetFullScreen=!1,this.fullScreenTarget=null,this._createdFullScreenTarget=null,this.onFullScreenInit=new U.Signal,this.onFullScreenChange=new U.Signal,this.onFullScreenError=new U.Signal,this.screenOrientation=this.dom.getScreenOrientation(),this.scaleFactor=new U.Point(1,1),this.scaleFactorInversed=new U.Point(1,1),this.margin={left:0,top:0,right:0,bottom:0,x:0,y:0},this.bounds=new U.Rectangle,this.aspectRatio=0,this.sourceAspectRatio=0,this.event=null,this.windowConstraints={right:"layout",bottom:""},this.compatibility={supportsFullScreen:!1,orientationFallback:null,noMargins:!1,scrollTo:null,forceMinimumDocumentHeight:!1,canExpandParent:!0,clickTrampoline:""},this._scaleMode=U.ScaleManager.NO_SCALE,this._fullScreenScaleMode=U.ScaleManager.NO_SCALE,this.parentIsWindow=!1,this.parentNode=null,this.parentScaleFactor=new U.Point(1,1),this.trackParentInterval=2e3,this.onSizeChange=new U.Signal,this.onResize=null,this.onResizeContext=null,this._pendingScaleMode=null,this._fullScreenRestore=null,this._gameSize=new U.Rectangle,this._userScaleFactor=new U.Point(1,1),this._userScaleTrim=new U.Point(0,0),this._lastUpdate=0,this._updateThrottle=0,this._updateThrottleReset=100,this._parentBounds=new U.Rectangle,this._tempBounds=new U.Rectangle,this._lastReportedCanvasSize=new U.Rectangle,this._lastReportedGameSize=new U.Rectangle,this._booted=!1,e.config&&this.parseConfig(e.config),this.setupScale(t,i)},U.ScaleManager.EXACT_FIT=0,U.ScaleManager.NO_SCALE=1,U.ScaleManager.SHOW_ALL=2,U.ScaleManager.RESIZE=3,U.ScaleManager.USER_SCALE=4,U.ScaleManager.prototype={boot:function(){var e=this.compatibility;e.supportsFullScreen=this.game.device.fullscreen&&!this.game.device.cocoonJS,this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?e.scrollTo=new U.Point(0,1):e.scrollTo=new U.Point(0,0)),this.game.device.desktop?(e.orientationFallback="screen",e.clickTrampoline="when-not-mouse"):(e.orientationFallback="",e.clickTrampoline="");var t=this;this._orientationChange=function(e){return t.orientationChange(e)},this._windowResize=function(e){return t.windowResize(e)},window.addEventListener("orientationchange",this._orientationChange,!1),window.addEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(this._fullScreenChange=function(e){return t.fullScreenChange(e)},this._fullScreenError=function(e){return t.fullScreenError(e)},document.addEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.addEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.addEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.addEventListener("fullscreenchange",this._fullScreenChange,!1),document.addEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.addEventListener("mozfullscreenerror",this._fullScreenError,!1),document.addEventListener("MSFullscreenError",this._fullScreenError,!1),document.addEventListener("fullscreenerror",this._fullScreenError,!1)),this.game.onResume.add(this._gameResumed,this),this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.setGameSize(this.game.width,this.game.height),this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),U.FlexGrid&&(this.grid=new U.FlexGrid(this,this.width,this.height)),this._booted=!0,null!==this._pendingScaleMode&&(this.scaleMode=this._pendingScaleMode,this._pendingScaleMode=null)},parseConfig:function(e){void 0!==e.scaleMode&&(this._booted?this.scaleMode=e.scaleMode:this._pendingScaleMode=e.scaleMode),void 0!==e.fullScreenScaleMode&&(this.fullScreenScaleMode=e.fullScreenScaleMode),e.fullScreenTarget&&(this.fullScreenTarget=e.fullScreenTarget)},setupScale:function(e,t){var i,n=new U.Rectangle;""!==this.game.parent&&("string"==typeof this.game.parent?i=document.getElementById(this.game.parent):this.game.parent&&1===this.game.parent.nodeType&&(i=this.game.parent)),i?(this.parentNode=i,this.parentIsWindow=!1,this.getParentBounds(this._parentBounds),n.width=this._parentBounds.width,n.height=this._parentBounds.height,this.offset.set(this._parentBounds.x,this._parentBounds.y)):(this.parentNode=null,this.parentIsWindow=!0,n.width=this.dom.visualBounds.width,n.height=this.dom.visualBounds.height,this.offset.set(0,0));var r=0,o=0;"number"==typeof e?r=e:(this.parentScaleFactor.x=parseInt(e,10)/100,r=n.width*this.parentScaleFactor.x),"number"==typeof t?o=t:(this.parentScaleFactor.y=parseInt(t,10)/100,o=n.height*this.parentScaleFactor.y),r=Math.floor(r),o=Math.floor(o),this._gameSize.setTo(0,0,r,o),this.updateDimensions(r,o,!1)},_gameResumed:function(){this.queueUpdate(!0)},setGameSize:function(e,t){this._gameSize.setTo(0,0,e,t),this.currentScaleMode!==U.ScaleManager.RESIZE&&this.updateDimensions(e,t,!0),this.queueUpdate(!0)},setUserScale:function(e,t,i,n){this._userScaleFactor.setTo(e,t),this._userScaleTrim.setTo(0|i,0|n),this.queueUpdate(!0)},setResizeCallback:function(e,t){this.onResize=e,this.onResizeContext=t},signalSizeChange:function(){if(!U.Rectangle.sameDimensions(this,this._lastReportedCanvasSize)||!U.Rectangle.sameDimensions(this.game,this._lastReportedGameSize)){var e=this.width,t=this.height;this._lastReportedCanvasSize.setTo(0,0,e,t),this._lastReportedGameSize.setTo(0,0,this.game.width,this.game.height),this.grid&&this.grid.onResize(e,t),this.onSizeChange.dispatch(this,e,t),this.currentScaleMode===U.ScaleManager.RESIZE&&(this.game.state.resize(e,t),this.game.load.resize(e,t))}},setMinMax:function(e,t,i,n){this.minWidth=e,this.minHeight=t,void 0!==i&&(this.maxWidth=i),void 0!==n&&(this.maxHeight=n)},preUpdate:function(){if(!(this.game.time.time<this._lastUpdate+this._updateThrottle)){var e=this._updateThrottle;this._updateThrottleReset=400<=e?0:100,this.dom.getOffset(this.game.canvas,this.offset);var t=this._parentBounds.width,i=this._parentBounds.height,n=this.getParentBounds(this._parentBounds),r=n.width!==t||n.height!==i,o=this.updateOrientationState();(r||o)&&(this.onResize&&this.onResize.call(this.onResizeContext,this,n),this.updateLayout(),this.signalSizeChange());var a=2*this._updateThrottle;this._updateThrottle<e&&(a=Math.min(e,this._updateThrottleReset)),this._updateThrottle=U.Math.clamp(a,25,this.trackParentInterval),this._lastUpdate=this.game.time.time}},pauseUpdate:function(){this.preUpdate(),this._updateThrottle=this.trackParentInterval},updateDimensions:function(e,t,i){this.width=e*this.parentScaleFactor.x,this.height=t*this.parentScaleFactor.y,this.game.width=this.width,this.game.height=this.height,this.sourceAspectRatio=this.width/this.height,this.updateScalingAndBounds(),i&&(this.game.renderer.resize(this.width,this.height),this.game.camera.setSize(this.width,this.height),this.game.world.resize(this.width,this.height))},updateScalingAndBounds:function(){this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.aspectRatio=this.width/this.height,this.game.canvas&&this.dom.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.width,this.height),this.game.input&&this.game.input.scale&&this.game.input.scale.setTo(this.scaleFactor.x,this.scaleFactor.y)},forceOrientation:function(e,t){void 0===t&&(t=!1),this.forceLandscape=e,this.forcePortrait=t,this.queueUpdate(!0)},classifyOrientation:function(e){return"portrait-primary"===e||"portrait-secondary"===e?"portrait":"landscape-primary"===e||"landscape-secondary"===e?"landscape":null},updateOrientationState:function(){var e=this.screenOrientation,t=this.incorrectOrientation;this.screenOrientation=this.dom.getScreenOrientation(this.compatibility.orientationFallback),this.incorrectOrientation=this.forceLandscape&&!this.isLandscape||this.forcePortrait&&!this.isPortrait;var i=e!==this.screenOrientation,n=t!==this.incorrectOrientation;return n&&(this.incorrectOrientation?this.enterIncorrectOrientation.dispatch():this.leaveIncorrectOrientation.dispatch()),(i||n)&&this.onOrientationChange.dispatch(this,e,t),i||n},orientationChange:function(e){this.event=e,this.queueUpdate(!0)},windowResize:function(e){this.event=e,this.queueUpdate(!0)},scrollTop:function(){var e=this.compatibility.scrollTo;e&&window.scrollTo(e.x,e.y)},refresh:function(){this.scrollTop(),this.queueUpdate(!0)},updateLayout:function(){var e=this.currentScaleMode;if(e!==U.ScaleManager.RESIZE){if(this.scrollTop(),this.compatibility.forceMinimumDocumentHeight&&(document.documentElement.style.minHeight=window.innerHeight+"px"),this.incorrectOrientation?this.setMaximum():e===U.ScaleManager.EXACT_FIT?this.setExactFit():e===U.ScaleManager.SHOW_ALL?(this.setShowAll(!0),this.resetCanvas(),this.setShowAll()):e===U.ScaleManager.NO_SCALE?(this.width=this.game.width,this.height=this.game.height):e===U.ScaleManager.USER_SCALE&&(this.width=this.game.width*this._userScaleFactor.x-this._userScaleTrim.x,this.height=this.game.height*this._userScaleFactor.y-this._userScaleTrim.y),!this.compatibility.canExpandParent&&(e===U.ScaleManager.SHOW_ALL||e===U.ScaleManager.USER_SCALE)){var t=this.getParentBounds(this._tempBounds);this.width=Math.min(this.width,t.width),this.height=Math.min(this.height,t.height)}this.width=0|this.width,this.height=0|this.height,this.reflowCanvas()}else this.reflowGame()},getParentBounds:function(e){var t=e||new U.Rectangle,i=this.boundingParent,n=this.dom.visualBounds,r=this.dom.layoutBounds;if(i){var o=i.getBoundingClientRect(),a=i.offsetParent?i.offsetParent.getBoundingClientRect():i.getBoundingClientRect();t.setTo(o.left-a.left,o.top-a.top,o.width,o.height);var s=this.windowConstraints;if(s.right){var l="layout"===s.right?r:n;t.right=Math.min(t.right,l.width)}if(s.bottom){l="layout"===s.bottom?r:n;t.bottom=Math.min(t.bottom,l.height)}}else t.setTo(0,0,n.width,n.height);return t.setTo(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height)),t},alignCanvas:function(e,t){var i=this.getParentBounds(this._tempBounds),n=this.game.canvas,r=this.margin;if(e){r.left=r.right=0;var o=n.getBoundingClientRect();if(this.width<i.width&&!this.incorrectOrientation){var a=o.left-i.x,s=i.width/2-this.width/2,l=(s=Math.max(s,0))-a;r.left=Math.round(l)}n.style.marginLeft=r.left+"px",0!==r.left&&(r.right=-(i.width-o.width-r.left),n.style.marginRight=r.right+"px")}if(t){r.top=r.bottom=0;o=n.getBoundingClientRect();if(this.height<i.height&&!this.incorrectOrientation){a=o.top-i.y,s=i.height/2-this.height/2,l=(s=Math.max(s,0))-a;r.top=Math.round(l)}n.style.marginTop=r.top+"px",0!==r.top&&(r.bottom=-(i.height-o.height-r.top),n.style.marginBottom=r.bottom+"px")}r.x=r.left,r.y=r.top},reflowGame:function(){this.resetCanvas("","");var e=this.getParentBounds(this._tempBounds);this.updateDimensions(e.width,e.height,!0)},reflowCanvas:function(){this.incorrectOrientation||(this.width=U.Math.clamp(this.width,this.minWidth||0,this.maxWidth||this.width),this.height=U.Math.clamp(this.height,this.minHeight||0,this.maxHeight||this.height)),this.resetCanvas(),this.compatibility.noMargins||(this.isFullScreen&&this._createdFullScreenTarget?this.alignCanvas(!0,!0):this.alignCanvas(this.pageAlignHorizontally,this.pageAlignVertically)),this.updateScalingAndBounds()},resetCanvas:function(e,t){void 0===e&&(e=this.width+"px"),void 0===t&&(t=this.height+"px");var i=this.game.canvas;this.compatibility.noMargins||(i.style.marginLeft="",i.style.marginTop="",i.style.marginRight="",i.style.marginBottom=""),i.style.width=e,i.style.height=t},queueUpdate:function(e){e&&(this._parentBounds.width=0,this._parentBounds.height=0),this._updateThrottle=this._updateThrottleReset},reset:function(e){e&&this.grid&&this.grid.reset()},setMaximum:function(){this.width=this.dom.visualBounds.width,this.height=this.dom.visualBounds.height},setShowAll:function(e){var t,i=this.getParentBounds(this._tempBounds),n=i.width,r=i.height;t=e?Math.max(r/this.game.height,n/this.game.width):Math.min(r/this.game.height,n/this.game.width),this.width=Math.round(this.game.width*t),this.height=Math.round(this.game.height*t)},setExactFit:function(){var e=this.getParentBounds(this._tempBounds);this.width=e.width,this.height=e.height,this.isFullScreen||(this.maxWidth&&(this.width=Math.min(this.width,this.maxWidth)),this.maxHeight&&(this.height=Math.min(this.height,this.maxHeight)))},createFullScreenTarget:function(){var e=document.createElement("div");return e.style.margin="0",e.style.padding="0",e.style.background="#000",e},startFullScreen:function(e,t){if(this.isFullScreen)return!1;if(this.compatibility.supportsFullScreen){if("when-not-mouse"===this.compatibility.clickTrampoline){var i=this.game.input;if(i.activePointer&&i.activePointer!==i.mousePointer&&(t||!1!==t))return void i.activePointer.addClickTrampoline("startFullScreen",this.startFullScreen,this,[e,!1])}void 0!==e&&this.game.renderType===U.CANVAS&&(this.game.stage.smoothed=e);var n=this.fullScreenTarget;n||(this.cleanupCreatedTarget(),this._createdFullScreenTarget=this.createFullScreenTarget(),n=this._createdFullScreenTarget);var r={targetElement:n};if(this.hasPhaserSetFullScreen=!0,this.onFullScreenInit.dispatch(this,r),this._createdFullScreenTarget){var o=this.game.canvas;o.parentNode.insertBefore(n,o),n.appendChild(o)}return this.game.device.fullscreenKeyboard?n[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):n[this.game.device.requestFullscreen](),!0}var a=this;setTimeout(function(){a.fullScreenError()},10)},stopFullScreen:function(){return!(!this.isFullScreen||!this.compatibility.supportsFullScreen||(this.hasPhaserSetFullScreen=!1,document[this.game.device.cancelFullscreen](),0))},cleanupCreatedTarget:function(){var e=this._createdFullScreenTarget;if(e&&e.parentNode){var t=e.parentNode;t.insertBefore(this.game.canvas,e),t.removeChild(e)}this._createdFullScreenTarget=null},prepScreenMode:function(e){var t=!!this._createdFullScreenTarget,i=this._createdFullScreenTarget||this.fullScreenTarget;e?(t||this.fullScreenScaleMode===U.ScaleManager.EXACT_FIT)&&i!==this.game.canvas&&(this._fullScreenRestore={targetWidth:i.style.width,targetHeight:i.style.height},i.style.width="100%",i.style.height="100%"):(this._fullScreenRestore&&(i.style.width=this._fullScreenRestore.targetWidth,i.style.height=this._fullScreenRestore.targetHeight,this._fullScreenRestore=null),this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.resetCanvas())},fullScreenChange:function(e){this.event=e,this.isFullScreen?this.prepScreenMode(!0):(this.prepScreenMode(!1),this.cleanupCreatedTarget()),this.updateLayout(),this.queueUpdate(!0),this.onFullScreenChange.dispatch(this,this.width,this.height)},fullScreenError:function(e){this.event=e,this.cleanupCreatedTarget(),this.onFullScreenError.dispatch(this)},scaleSprite:function(e,t,i,n){if(void 0===t&&(t=this.width),void 0===i&&(i=this.height),void 0===n&&(n=!1),!e||!e.scale)return e;if(e.scale.x=1,e.scale.y=1,e.width<=0||e.height<=0||t<=0||i<=0)return e;var r=t,o=e.height*t/e.width,a=e.width*i/e.height,s=i,l=t<a;return(l=l?n:!n)?(e.width=Math.floor(r),e.height=Math.floor(o)):(e.width=Math.floor(a),e.height=Math.floor(s)),e},destroy:function(){this.game.onResume.remove(this._gameResumed,this),window.removeEventListener("orientationchange",this._orientationChange,!1),window.removeEventListener("resize",this._windowResize,!1),this.compatibility.supportsFullScreen&&(document.removeEventListener("webkitfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("mozfullscreenchange",this._fullScreenChange,!1),document.removeEventListener("MSFullscreenChange",this._fullScreenChange,!1),document.removeEventListener("fullscreenchange",this._fullScreenChange,!1),document.removeEventListener("webkitfullscreenerror",this._fullScreenError,!1),document.removeEventListener("mozfullscreenerror",this._fullScreenError,!1),document.removeEventListener("MSFullscreenError",this._fullScreenError,!1),document.removeEventListener("fullscreenerror",this._fullScreenError,!1))}},U.ScaleManager.prototype.constructor=U.ScaleManager,Object.defineProperty(U.ScaleManager.prototype,"boundingParent",{get:function(){return this.parentIsWindow||this.isFullScreen&&this.hasPhaserSetFullScreen&&!this._createdFullScreenTarget?null:this.game.canvas&&this.game.canvas.parentNode||null}}),Object.defineProperty(U.ScaleManager.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(e){return e!==this._scaleMode&&(this.isFullScreen||(this.updateDimensions(this._gameSize.width,this._gameSize.height,!0),this.queueUpdate(!0)),this._scaleMode=e),this._scaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"fullScreenScaleMode",{get:function(){return this._fullScreenScaleMode},set:function(e){return e!==this._fullScreenScaleMode&&(this.isFullScreen?(this.prepScreenMode(!1),this._fullScreenScaleMode=e,this.prepScreenMode(!0),this.queueUpdate(!0)):this._fullScreenScaleMode=e),this._fullScreenScaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"currentScaleMode",{get:function(){return this.isFullScreen?this._fullScreenScaleMode:this._scaleMode}}),Object.defineProperty(U.ScaleManager.prototype,"pageAlignHorizontally",{get:function(){return this._pageAlignHorizontally},set:function(e){e!==this._pageAlignHorizontally&&(this._pageAlignHorizontally=e,this.queueUpdate(!0))}}),Object.defineProperty(U.ScaleManager.prototype,"pageAlignVertically",{get:function(){return this._pageAlignVertically},set:function(e){e!==this._pageAlignVertically&&(this._pageAlignVertically=e,this.queueUpdate(!0))}}),Object.defineProperty(U.ScaleManager.prototype,"isFullScreen",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),Object.defineProperty(U.ScaleManager.prototype,"isPortrait",{get:function(){return"portrait"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(U.ScaleManager.prototype,"isLandscape",{get:function(){return"landscape"===this.classifyOrientation(this.screenOrientation)}}),Object.defineProperty(U.ScaleManager.prototype,"isGamePortrait",{get:function(){return this.height>this.width}}),Object.defineProperty(U.ScaleManager.prototype,"isGameLandscape",{get:function(){return this.width>this.height}}),U.Utils.Debug=function(e){this.game=e,this.sprite=null,this.bmd=null,this.canvas=null,this.context=null,this.font="14px Courier",this.columnWidth=100,this.lineHeight=16,this.renderShadow=!0,this.currentX=0,this.currentY=0,this.currentAlpha=1,this.dirty=!1},U.Utils.Debug.prototype={boot:function(){this.game.renderType===U.CANVAS?this.context=this.game.context:(this.bmd=new U.BitmapData(this.game,"__DEBUG",this.game.width,this.game.height,!0),this.sprite=this.game.make.image(0,0,this.bmd),this.game.stage.addChild(this.sprite),this.game.scale.onSizeChange.add(this.resize,this),this.canvas=PIXI.CanvasPool.create(this,this.game.width,this.game.height),this.context=this.canvas.getContext("2d"))},resize:function(e,t,i){this.bmd.resize(t,i),this.canvas.width=t,this.canvas.height=i},preUpdate:function(){this.dirty&&this.sprite&&(this.bmd.clear(),this.bmd.draw(this.canvas,0,0),this.context.clearRect(0,0,this.game.width,this.game.height),this.dirty=!1)},reset:function(){this.context&&this.context.clearRect(0,0,this.game.width,this.game.height),this.sprite&&this.bmd.clear()},start:function(e,t,i,n){"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),i=i||"rgb(255,255,255)",void 0===n&&(n=0),this.currentX=e,this.currentY=t,this.currentColor=i,this.columnWidth=n,this.dirty=!0,this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.strokeStyle=i,this.context.fillStyle=i,this.context.font=this.font,this.context.globalAlpha=this.currentAlpha},stop:function(){this.context.restore()},line:function(){for(var e=this.currentX,t=0;t<arguments.length;t++)this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(arguments[t],e+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(arguments[t],e,this.currentY),e+=this.columnWidth;this.currentY+=this.lineHeight},soundInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sound: "+e.key+" Locked: "+e.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(e.key)+" Pending Playback: "+e.pendingPlayback),this.line("Decoded: "+e.isDecoded+" Decoding: "+e.isDecoding),this.line("Total Duration: "+e.totalDuration+" Playing: "+e.isPlaying),this.line("Time: "+e.currentTime),this.line("Volume: "+e.volume+" Muted: "+e.mute),this.line("WebAudio: "+e.usingWebAudio+" Audio: "+e.usingAudioTag),""!==e.currentMarker&&(this.line("Marker: "+e.currentMarker+" Duration: "+e.duration+" (ms: "+e.durationMS+")"),this.line("Start: "+e.markers[e.currentMarker].start+" Stop: "+e.markers[e.currentMarker].stop),this.line("Position: "+e.position)),this.stop()},cameraInfo:function(e,t,i,n){this.start(t,i,n),this.line("Camera ("+e.width+" x "+e.height+")"),this.line("X: "+e.x+" Y: "+e.y),e.bounds&&this.line("Bounds x: "+e.bounds.x+" Y: "+e.bounds.y+" w: "+e.bounds.width+" h: "+e.bounds.height),this.line("View x: "+e.view.x+" Y: "+e.view.y+" w: "+e.view.width+" h: "+e.view.height),this.line("Total in view: "+e.totalInView),this.stop()},timer:function(e,t,i,n){this.start(t,i,n),this.line("Timer (running: "+e.running+" expired: "+e.expired+")"),this.line("Next Tick: "+e.next+" Duration: "+e.duration),this.line("Paused: "+e.paused+" Length: "+e.length),this.stop()},pointer:function(e,t,i,n,r){null!=e&&(void 0===t&&(t=!1),i=i||"rgba(0,255,0,0.5)",n=n||"rgba(255,0,0,0.5)",!0===t&&!0===e.isUp||(this.start(e.x,e.y-100,r),this.context.beginPath(),this.context.arc(e.x,e.y,e.circle.radius,0,2*Math.PI),e.active?this.context.fillStyle=i:this.context.fillStyle=n,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(e.positionDown.x,e.positionDown.y),this.context.lineTo(e.position.x,e.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+e.id+" Active: "+e.active),this.line("World X: "+e.worldX+" World Y: "+e.worldY),this.line("Screen X: "+e.x+" Screen Y: "+e.y+" In: "+e.withinGame),this.line("Duration: "+e.duration+" ms"),this.line("is Down: "+e.isDown+" is Up: "+e.isUp),this.stop()))},spriteInputInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sprite Input: ("+e.width+" x "+e.height+")"),this.line("x: "+e.input.pointerX().toFixed(1)+" y: "+e.input.pointerY().toFixed(1)),this.line("over: "+e.input.pointerOver()+" duration: "+e.input.overDuration().toFixed(0)),this.line("down: "+e.input.pointerDown()+" duration: "+e.input.downDuration().toFixed(0)),this.line("just over: "+e.input.justOver()+" just out: "+e.input.justOut()),this.stop()},key:function(e,t,i,n){this.start(t,i,n,150),this.line("Key:",e.keyCode,"isDown:",e.isDown),this.line("justDown:",e.justDown,"justUp:",e.justUp),this.line("Time Down:",e.timeDown.toFixed(0),"duration:",e.duration.toFixed(0)),this.stop()},inputInfo:function(e,t,i){this.start(e,t,i),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop()},spriteBounds:function(e,t,i){var n=e.getBounds();n.x+=this.game.camera.x,n.y+=this.game.camera.y,this.rectangle(n,t,i)},ropeSegments:function(e,t,i){var n=this;e.segments.forEach(function(e){n.rectangle(e,t,i)},this)},spriteInfo:function(e,t,i,n){this.start(t,i,n),this.line("Sprite:  ("+e.width+" x "+e.height+") anchor: "+e.anchor.x+" x "+e.anchor.y),this.line("x: "+e.x.toFixed(1)+" y: "+e.y.toFixed(1)),this.line("angle: "+e.angle.toFixed(1)+" rotation: "+e.rotation.toFixed(1)),this.line("visible: "+e.visible+" in camera: "+e.inCamera),this.line("bounds x: "+e._bounds.x.toFixed(1)+" y: "+e._bounds.y.toFixed(1)+" w: "+e._bounds.width.toFixed(1)+" h: "+e._bounds.height.toFixed(1)),this.stop()},spriteCoords:function(e,t,i,n){this.start(t,i,n,100),e.name&&this.line(e.name),this.line("x:",e.x.toFixed(2),"y:",e.y.toFixed(2)),this.line("pos x:",e.position.x.toFixed(2),"pos y:",e.position.y.toFixed(2)),this.line("world x:",e.world.x.toFixed(2),"world y:",e.world.y.toFixed(2)),this.stop()},lineInfo:function(e,t,i,n){this.start(t,i,n,80),this.line("start.x:",e.start.x.toFixed(2),"start.y:",e.start.y.toFixed(2)),this.line("end.x:",e.end.x.toFixed(2),"end.y:",e.end.y.toFixed(2)),this.line("length:",e.length.toFixed(2),"angle:",e.angle),this.stop()},pixel:function(e,t,i,n){n=n||2,this.start(),this.context.fillStyle=i,this.context.fillRect(e,t,n,n),this.stop()},geom:function(e,t,i,n){void 0===i&&(i=!0),void 0===n&&(n=0),t=t||"rgba(0,255,0,0.4)",this.start(),this.context.fillStyle=t,this.context.strokeStyle=t,e instanceof U.Rectangle||1===n?i?this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height):this.context.strokeRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height):e instanceof U.Circle||2===n?(this.context.beginPath(),this.context.arc(e.x-this.game.camera.x,e.y-this.game.camera.y,e.radius,0,2*Math.PI,!1),this.context.closePath(),i?this.context.fill():this.context.stroke()):e instanceof U.Point||3===n?this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,4,4):(e instanceof U.Line||4===n)&&(this.context.lineWidth=1,this.context.beginPath(),this.context.moveTo(e.start.x+.5-this.game.camera.x,e.start.y+.5-this.game.camera.y),this.context.lineTo(e.end.x+.5-this.game.camera.x,e.end.y+.5-this.game.camera.y),this.context.closePath(),this.context.stroke()),this.stop()},rectangle:function(e,t,i){void 0===i&&(i=!0),t=t||"rgba(0, 255, 0, 0.4)",this.start(),i?(this.context.fillStyle=t,this.context.fillRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height)):(this.context.strokeStyle=t,this.context.strokeRect(e.x-this.game.camera.x,e.y-this.game.camera.y,e.width,e.height)),this.stop()},text:function(e,t,i,n,r){n=n||"rgb(255,255,255)",r=r||"16px Courier",this.start(),this.context.font=r,this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(e,t+1,i+1)),this.context.fillStyle=n,this.context.fillText(e,t,i),this.stop()},quadTree:function(e,t){t=t||"rgba(255,0,0,0.3)",this.start();var i=e.bounds;if(0===e.nodes.length){this.context.strokeStyle=t,this.context.strokeRect(i.x,i.y,i.width,i.height),this.text("size: "+e.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var n=0;n<e.objects.length;n++)this.context.strokeRect(e.objects[n].x,e.objects[n].y,e.objects[n].width,e.objects[n].height)}else for(n=0;n<e.nodes.length;n++)this.quadTree(e.nodes[n]);this.stop()},body:function(e,t,i){e.body&&(this.start(),e.body.type===U.Physics.ARCADE?U.Physics.Arcade.Body.render(this.context,e.body,t,i):e.body.type===U.Physics.NINJA?U.Physics.Ninja.Body.render(this.context,e.body,t,i):e.body.type===U.Physics.BOX2D&&U.Physics.Box2D.renderBody(this.context,e.body,t),this.stop())},bodyInfo:function(e,t,i,n){e.body&&(this.start(t,i,n,210),e.body.type===U.Physics.ARCADE?U.Physics.Arcade.Body.renderBodyInfo(this,e.body):e.body.type===U.Physics.BOX2D&&this.game.physics.box2d.renderBodyInfo(this,e.body),this.stop())},box2dWorld:function(){this.start(),this.context.translate(-this.game.camera.view.x,-this.game.camera.view.y,0),this.game.physics.box2d.renderDebugDraw(this.context),this.stop()},box2dBody:function(e,t){this.start(),U.Physics.Box2D.renderBody(this.context,e,t),this.stop()},displayList:function(e){if(void 0===e&&(e=this.game.world),e.hasOwnProperty("renderOrderID"),e.children&&0<e.children.length)for(var t=0;t<e.children.length;t++)this.game.debug.displayList(e.children[t])},destroy:function(){PIXI.CanvasPool.remove(this)}},U.Utils.Debug.prototype.constructor=U.Utils.Debug,U.DOM={getOffset:function(e,t){t=t||new U.Point;var i=e.getBoundingClientRect(),n=U.DOM.scrollY,r=U.DOM.scrollX,o=document.documentElement.clientTop,a=document.documentElement.clientLeft;return t.x=i.left+r-a,t.y=i.top+n-o,t},getBounds:function(e,t){return void 0===t&&(t=0),!(!(e=e&&!e.nodeType?e[0]:e)||1!==e.nodeType)&&this.calibrate(e.getBoundingClientRect(),t)},calibrate:function(e,t){t=+t||0;var i={width:0,height:0,left:0,right:0,top:0,bottom:0};return i.width=(i.right=e.right+t)-(i.left=e.left-t),i.height=(i.bottom=e.bottom+t)-(i.top=e.top-t),i},getAspectRatio:function(e){var t=(e=null==e?this.visualBounds:1===e.nodeType?this.getBounds(e):e).width,i=e.height;return"function"==typeof t&&(t=t.call(e)),"function"==typeof i&&(i=i.call(e)),t/i},inLayoutViewport:function(e,t){var i=this.getBounds(e,t);return!!i&&0<=i.bottom&&0<=i.right&&i.top<=this.layoutBounds.width&&i.left<=this.layoutBounds.height},getScreenOrientation:function(e){var t=window.screen,i=t.orientation||t.mozOrientation||t.msOrientation;if(i&&"string"==typeof i.type)return i.type;if("string"==typeof i)return i;var n="portrait-primary",r="landscape-primary";if("screen"===e)return t.height>t.width?n:r;if("viewport"===e)return this.visualBounds.height>this.visualBounds.width?n:r;if("window.orientation"===e&&"number"==typeof window.orientation)return 0===window.orientation||180===window.orientation?n:r;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return n;if(window.matchMedia("(orientation: landscape)").matches)return r}return this.visualBounds.height>this.visualBounds.width?n:r},visualBounds:new U.Rectangle,layoutBounds:new U.Rectangle,documentBounds:new U.Rectangle},U.Device.whenReady(function(e){var t=window&&"pageXOffset"in window?function(){return window.pageXOffset}:function(){return document.documentElement.scrollLeft},i=window&&"pageYOffset"in window?function(){return window.pageYOffset}:function(){return document.documentElement.scrollTop};if(Object.defineProperty(U.DOM,"scrollX",{get:t}),Object.defineProperty(U.DOM,"scrollY",{get:i}),Object.defineProperty(U.DOM.visualBounds,"x",{get:t}),Object.defineProperty(U.DOM.visualBounds,"y",{get:i}),Object.defineProperty(U.DOM.layoutBounds,"x",{value:0}),Object.defineProperty(U.DOM.layoutBounds,"y",{value:0}),e.desktop&&document.documentElement.clientWidth<=window.innerWidth&&document.documentElement.clientHeight<=window.innerHeight){var n=function(){return Math.max(window.innerWidth,document.documentElement.clientWidth)},r=function(){return Math.max(window.innerHeight,document.documentElement.clientHeight)};Object.defineProperty(U.DOM.visualBounds,"width",{get:n}),Object.defineProperty(U.DOM.visualBounds,"height",{get:r}),Object.defineProperty(U.DOM.layoutBounds,"width",{get:n}),Object.defineProperty(U.DOM.layoutBounds,"height",{get:r})}else Object.defineProperty(U.DOM.visualBounds,"width",{get:function(){return window.innerWidth}}),Object.defineProperty(U.DOM.visualBounds,"height",{get:function(){return window.innerHeight}}),Object.defineProperty(U.DOM.layoutBounds,"width",{get:function(){var e=document.documentElement.clientWidth,t=window.innerWidth;return e<t?t:e}}),Object.defineProperty(U.DOM.layoutBounds,"height",{get:function(){var e=document.documentElement.clientHeight,t=window.innerHeight;return e<t?t:e}});Object.defineProperty(U.DOM.documentBounds,"x",{value:0}),Object.defineProperty(U.DOM.documentBounds,"y",{value:0}),Object.defineProperty(U.DOM.documentBounds,"width",{get:function(){var e=document.documentElement;return Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth)}}),Object.defineProperty(U.DOM.documentBounds,"height",{get:function(){var e=document.documentElement;return Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight)}})},null,!0),U.ArraySet=function(e){this.position=0,this.list=e||[]},U.ArraySet.prototype={add:function(e){return this.exists(e)||this.list.push(e),e},getIndex:function(e){return this.list.indexOf(e)},getByKey:function(e,t){for(var i=this.list.length;i--;)if(this.list[i][e]===t)return this.list[i];return null},exists:function(e){return-1<this.list.indexOf(e)},reset:function(){this.list.length=0},remove:function(e){var t=this.list.indexOf(e);if(-1<t)return this.list.splice(t,1),e},setAll:function(e,t){for(var i=this.list.length;i--;)this.list[i]&&(this.list[i][e]=t)},callAll:function(e){for(var t=Array.prototype.slice.call(arguments,1),i=this.list.length;i--;)this.list[i]&&this.list[i][e]&&this.list[i][e].apply(this.list[i],t)},removeAll:function(e){void 0===e&&(e=!1);for(var t=this.list.length;t--;)if(this.list[t]){var i=this.remove(this.list[t]);e&&i.destroy()}this.position=0,this.list=[]}},Object.defineProperty(U.ArraySet.prototype,"total",{get:function(){return this.list.length}}),Object.defineProperty(U.ArraySet.prototype,"first",{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}}),Object.defineProperty(U.ArraySet.prototype,"next",{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}}),U.ArraySet.prototype.constructor=U.ArraySet,U.ArrayUtils={getRandomItem:function(e,t,i){if(null===e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var n=t+Math.floor(Math.random()*i);return void 0===e[n]?null:e[n]},removeRandomItem:function(e,t,i){if(null==e)return null;void 0===t&&(t=0),void 0===i&&(i=e.length);var n=t+Math.floor(Math.random()*i);if(n<e.length){var r=e.splice(n,1);return void 0===r[0]?null:r[0]}return null},shuffle:function(e){for(var t=e.length-1;0<t;t--){var i=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},transposeMatrix:function(e){for(var t=e.length,i=e[0].length,n=new Array(i),r=0;r<i;r++){n[r]=new Array(t);for(var o=t-1;-1<o;o--)n[r][o]=e[o][r]}return n},rotateMatrix:function(e,t){if("string"!=typeof t&&(t=(t%360+360)%360),90===t||-270===t||"rotateLeft"===t)e=(e=U.ArrayUtils.transposeMatrix(e)).reverse();else if(-90===t||270===t||"rotateRight"===t)e=e.reverse(),e=U.ArrayUtils.transposeMatrix(e);else if(180===Math.abs(t)||"rotate180"===t){for(var i=0;i<e.length;i++)e[i].reverse();e=e.reverse()}return e},findClosest:function(e,t){if(!t.length)return NaN;if(1===t.length||e<t[0])return t[0];for(var i=1;t[i]<e;)i++;var n=t[i-1],r=i<t.length?t[i]:Number.POSITIVE_INFINITY;return r-e<=e-n?r:n},rotateRight:function(e){var t=e.pop();return e.unshift(t),t},rotateLeft:function(e){var t=e.shift();return e.push(t),t},rotate:function(e){var t=e.shift();return e.push(t),t},numberArray:function(e,t){for(var i=[],n=e;n<=t;n++)i.push(n);return i},numberArrayStep:function(e,t,i){null!=e||(e=0),null!=t||(t=e,e=0),void 0===i&&(i=1);for(var n=[],r=Math.max(U.Math.roundAwayFromZero((t-e)/(i||1)),0),o=0;o<r;o++)n.push(e),e+=i;return n}},U.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},U.LinkedList.prototype={add:function(e){return 0===this.total&&null===this.first&&null===this.last?(this.first=e,this.last=e,(this.next=e).prev=this):((this.last.next=e).prev=this.last,this.last=e),this.total++,e},reset:function(){this.first=null,this.last=null,this.next=null,this.prev=null,this.total=0},remove:function(e){if(1===this.total)return this.reset(),void(e.next=e.prev=null);e===this.first?this.first=this.first.next:e===this.last&&(this.last=this.last.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.next=e.prev=null,null===this.first&&(this.last=null),this.total--},callAll:function(e){if(this.first&&this.last)for(var t=this.first;t&&t[e]&&t[e].call(t),(t=t.next)!==this.last.next;);}},U.LinkedList.prototype.constructor=U.LinkedList,U.Create=function(e){this.game=e,this.bmd=null,this.canvas=null,this.ctx=null,this.palettes=[{0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"},{0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"},{0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"},{0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}]},U.Create.PALETTE_ARNE=0,U.Create.PALETTE_JMP=1,U.Create.PALETTE_CGA=2,U.Create.PALETTE_C64=3,U.Create.PALETTE_JAPANESE_MACHINE=4,U.Create.prototype={texture:function(e,t,i,n,r){void 0===i&&(i=8),void 0===n&&(n=i),void 0===r&&(r=0);var o=t[0].length*i,a=t.length*n;null===this.bmd&&(this.bmd=this.game.make.bitmapData(),this.canvas=this.bmd.canvas,this.ctx=this.bmd.context),this.bmd.resize(o,a),this.bmd.clear();for(var s=0;s<t.length;s++)for(var l=t[s],p=0;p<l.length;p++){var h=l[p];"."!==h&&" "!==h&&(this.ctx.fillStyle=this.palettes[r][h],this.ctx.fillRect(p*i,s*n,i,n))}return this.bmd.generateTexture(e)},grid:function(e,t,i,n,r,o){null===this.bmd&&(this.bmd=this.game.make.bitmapData(),this.canvas=this.bmd.canvas,this.ctx=this.bmd.context),this.bmd.resize(t,i),this.ctx.fillStyle=o;for(var a=0;a<i;a+=r)this.ctx.fillRect(0,a,t,1);for(var s=0;s<t;s+=n)this.ctx.fillRect(s,0,1,i);return this.bmd.generateTexture(e)}},U.Create.prototype.constructor=U.Create,U.FlexGrid=function(e,t,i){this.game=e.game,this.manager=e,this.width=t,this.height=i,this.boundsCustom=new U.Rectangle(0,0,t,i),this.boundsFluid=new U.Rectangle(0,0,t,i),this.boundsFull=new U.Rectangle(0,0,t,i),this.boundsNone=new U.Rectangle(0,0,t,i),this.positionCustom=new U.Point(0,0),this.positionFluid=new U.Point(0,0),this.positionFull=new U.Point(0,0),this.positionNone=new U.Point(0,0),this.scaleCustom=new U.Point(1,1),this.scaleFluid=new U.Point(1,1),this.scaleFluidInversed=new U.Point(1,1),this.scaleFull=new U.Point(1,1),this.scaleNone=new U.Point(1,1),this.customWidth=0,this.customHeight=0,this.customOffsetX=0,this.customOffsetY=0,this.ratioH=t/i,this.ratioV=i/t,this.multiplier=0,this.layers=[]},U.FlexGrid.prototype={setSize:function(e,t){this.width=e,this.height=t,this.ratioH=e/t,this.ratioV=t/e,this.scaleNone=new U.Point(1,1),this.boundsNone.width=this.width,this.boundsNone.height=this.height,this.refresh()},createCustomLayer:function(e,t,i,n){void 0===n&&(n=!0),this.customWidth=e,this.customHeight=t,this.boundsCustom.width=e,this.boundsCustom.height=t;var r=new U.FlexLayer(this,this.positionCustom,this.boundsCustom,this.scaleCustom);return n&&this.game.world.add(r),this.layers.push(r),void 0!==i&&null!==typeof i&&r.addMultiple(i),r},createFluidLayer:function(e,t){void 0===t&&(t=!0);var i=new U.FlexLayer(this,this.positionFluid,this.boundsFluid,this.scaleFluid);return t&&this.game.world.add(i),this.layers.push(i),void 0!==e&&null!==typeof e&&i.addMultiple(e),i},createFullLayer:function(e){var t=new U.FlexLayer(this,this.positionFull,this.boundsFull,this.scaleFluid);return this.game.world.add(t),this.layers.push(t),void 0!==e&&t.addMultiple(e),t},createFixedLayer:function(e){var t=new U.FlexLayer(this,this.positionNone,this.boundsNone,this.scaleNone);return this.game.world.add(t),this.layers.push(t),void 0!==e&&t.addMultiple(e),t},reset:function(){for(var e=this.layers.length;e--;)this.layers[e].persist||(this.layers[e].position=null,this.layers[e].scale=null,this.layers.slice(e,1))},onResize:function(e,t){this.ratioH=e/t,this.ratioV=t/e,this.refresh(e,t)},refresh:function(){this.multiplier=Math.min(this.manager.height/this.height,this.manager.width/this.width),this.boundsFluid.width=Math.round(this.width*this.multiplier),this.boundsFluid.height=Math.round(this.height*this.multiplier),this.scaleFluid.set(this.boundsFluid.width/this.width,this.boundsFluid.height/this.height),this.scaleFluidInversed.set(this.width/this.boundsFluid.width,this.height/this.boundsFluid.height),this.scaleFull.set(this.boundsFull.width/this.width,this.boundsFull.height/this.height),this.boundsFull.width=Math.round(this.manager.width*this.scaleFluidInversed.x),this.boundsFull.height=Math.round(this.manager.height*this.scaleFluidInversed.y),this.boundsFluid.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY),this.boundsNone.centerOn(this.manager.bounds.centerX,this.manager.bounds.centerY),this.positionFluid.set(this.boundsFluid.x,this.boundsFluid.y),this.positionNone.set(this.boundsNone.x,this.boundsNone.y)},fitSprite:function(e){this.manager.scaleSprite(e),e.x=this.manager.bounds.centerX,e.y=this.manager.bounds.centerY},debug:function(){this.game.debug.text(this.boundsFluid.width+" x "+this.boundsFluid.height,this.boundsFluid.x+4,this.boundsFluid.y+16),this.game.debug.geom(this.boundsFluid,"rgba(255,0,0,0.9",!1)}},U.FlexGrid.prototype.constructor=U.FlexGrid,U.FlexLayer=function(e,t,i,n){U.Group.call(this,e.game,null,"__flexLayer"+e.game.rnd.uuid(),!1),this.manager=e.manager,this.grid=e,this.persist=!1,this.position=t,this.bounds=i,this.scale=n,this.topLeft=i.topLeft,this.topMiddle=new U.Point(i.halfWidth,0),this.topRight=i.topRight,this.bottomLeft=i.bottomLeft,this.bottomMiddle=new U.Point(i.halfWidth,i.bottom),this.bottomRight=i.bottomRight},U.FlexLayer.prototype=Object.create(U.Group.prototype),U.FlexLayer.prototype.constructor=U.FlexLayer,U.FlexLayer.prototype.resize=function(){},U.FlexLayer.prototype.debug=function(){this.game.debug.text(this.bounds.width+" x "+this.bounds.height,this.bounds.x+4,this.bounds.y+16),this.game.debug.geom(this.bounds,"rgba(0,0,255,0.9",!1),this.game.debug.geom(this.topLeft,"rgba(255,255,255,0.9"),this.game.debug.geom(this.topMiddle,"rgba(255,255,255,0.9"),this.game.debug.geom(this.topRight,"rgba(255,255,255,0.9")},U.Color={packPixel:function(e,t,i,n){return U.Device.LITTLE_ENDIAN?(n<<24|i<<16|t<<8|e)>>>0:(e<<24|t<<16|i<<8|n)>>>0},unpackPixel:function(e,t,i,n){return null!=t||(t=U.Color.createColor()),null!=i||(i=!1),null!=n||(n=!1),U.Device.LITTLE_ENDIAN?(t.a=(4278190080&e)>>>24,t.b=(16711680&e)>>>16,t.g=(65280&e)>>>8,t.r=255&e):(t.r=(4278190080&e)>>>24,t.g=(16711680&e)>>>16,t.b=(65280&e)>>>8,t.a=255&e),t.color=e,t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a/255+")",i&&U.Color.RGBtoHSL(t.r,t.g,t.b,t),n&&U.Color.RGBtoHSV(t.r,t.g,t.b,t),t},fromRGBA:function(e,t){return t||(t=U.Color.createColor()),t.r=(4278190080&e)>>>24,t.g=(16711680&e)>>>16,t.b=(65280&e)>>>8,t.a=255&e,t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a+")",t},toRGBA:function(e,t,i,n){return e<<24|t<<16|i<<8|n},toABGR:function(e,t,i,n){return(n<<24|i<<16|t<<8|e)>>>0},RGBtoHSL:function(e,t,i,n){n||(n=U.Color.createColor(e,t,i,1)),e/=255,t/=255,i/=255;var r=Math.min(e,t,i),o=Math.max(e,t,i);if(n.h=0,n.s=0,n.l=(o+r)/2,o!==r){var a=o-r;n.s=.5<n.l?a/(2-o-r):a/(o+r),o===e?n.h=(t-i)/a+(t<i?6:0):o===t?n.h=(i-e)/a+2:o===i&&(n.h=(e-t)/a+4),n.h/=6}return n},HSLtoRGB:function(e,t,i,n){if(n?(n.r=i,n.g=i,n.b=i):n=U.Color.createColor(i,i,i),0!==t){var r=i<.5?i*(1+t):i+t-i*t,o=2*i-r;n.r=U.Color.hueToColor(o,r,e+1/3),n.g=U.Color.hueToColor(o,r,e),n.b=U.Color.hueToColor(o,r,e-1/3)}return n.r=Math.floor(255*n.r|0),n.g=Math.floor(255*n.g|0),n.b=Math.floor(255*n.b|0),U.Color.updateColor(n),n},RGBtoHSV:function(e,t,i,n){n||(n=U.Color.createColor(e,t,i,255)),e/=255,t/=255,i/=255;var r=Math.min(e,t,i),o=Math.max(e,t,i),a=o-r;return n.h=0,n.s=0===o?0:a/o,(n.v=o)!==r&&(o===e?n.h=(t-i)/a+(t<i?6:0):o===t?n.h=(i-e)/a+2:o===i&&(n.h=(e-t)/a+4),n.h/=6),n},HSVtoRGB:function(e,t,i,n){void 0===n&&(n=U.Color.createColor(0,0,0,1,e,t,0,i));var r,o,a,s=Math.floor(6*e),l=6*e-s,p=i*(1-t),h=i*(1-l*t),u=i*(1-(1-l)*t);switch(s%6){case 0:r=i,o=u,a=p;break;case 1:r=h,o=i,a=p;break;case 2:r=p,o=i,a=u;break;case 3:r=p,o=h,a=i;break;case 4:r=u,o=p,a=i;break;case 5:r=i,o=p,a=h}return n.r=Math.floor(255*r),n.g=Math.floor(255*o),n.b=Math.floor(255*a),U.Color.updateColor(n),n},hueToColor:function(e,t,i){return i<0&&(i+=1),1<i&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e},createColor:function(e,t,i,n,r,o,a,s){var l={r:e||0,g:t||0,b:i||0,a:n||1,h:r||0,s:o||0,l:a||0,v:s||0,color:0,color32:0,rgba:""};return U.Color.updateColor(l)},updateColor:function(e){return e.rgba="rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+e.a.toString()+")",e.color=U.Color.getColor(e.r,e.g,e.b),e.color32=U.Color.getColor32(255*e.a,e.r,e.g,e.b),e},getColor32:function(e,t,i,n){return e<<24|t<<16|i<<8|n},getColor:function(e,t,i){return e<<16|t<<8|i},RGBtoString:function(e,t,i,n,r){return void 0===n&&(n=255),void 0===r&&(r="#"),"#"===r?"#"+((1<<24)+(e<<16)+(t<<8)+i).toString(16).slice(1):"0x"+U.Color.componentToHex(n)+U.Color.componentToHex(e)+U.Color.componentToHex(t)+U.Color.componentToHex(i)},hexToRGB:function(e){var t=U.Color.hexToColor(e);if(t)return U.Color.getColor32(t.a,t.r,t.g,t.b)},hexToColor:function(e,t){e=e.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,n){return t+t+i+i+n+n});var i=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(i){var n=parseInt(i[1],16),r=parseInt(i[2],16),o=parseInt(i[3],16);t?(t.r=n,t.g=r,t.b=o):t=U.Color.createColor(n,r,o)}return t},webToColor:function(e,t){t||(t=U.Color.createColor());var i=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(e);return i&&(t.r=parseInt(i[1],10),t.g=parseInt(i[2],10),t.b=parseInt(i[3],10),t.a=void 0!==i[4]?parseFloat(i[4]):1,U.Color.updateColor(t)),t},valueToColor:function(e,t){if(t||(t=U.Color.createColor()),"string"==typeof e)return 0===e.indexOf("rgb")?U.Color.webToColor(e,t):(t.a=1,U.Color.hexToColor(e,t));if("number"==typeof e){var i=U.Color.getRGB(e);return t.r=i.r,t.g=i.g,t.b=i.b,t.a=i.a/255,t}return t},componentToHex:function(e){var t=e.toString(16);return 1===t.length?"0"+t:t},HSVColorWheel:function(e,t){void 0===e&&(e=1),void 0===t&&(t=1);for(var i=[],n=0;n<=359;n++)i.push(U.Color.HSVtoRGB(n/359,e,t));return i},HSLColorWheel:function(e,t){void 0===e&&(e=.5),void 0===t&&(t=.5);for(var i=[],n=0;n<=359;n++)i.push(U.Color.HSLtoRGB(n/359,e,t));return i},interpolateColor:function(e,t,i,n,r){void 0===r&&(r=255);var o=U.Color.getRGB(e),a=U.Color.getRGB(t),s=(a.red-o.red)*n/i+o.red,l=(a.green-o.green)*n/i+o.green,p=(a.blue-o.blue)*n/i+o.blue;return U.Color.getColor32(r,s,l,p)},interpolateColorWithRGB:function(e,t,i,n,r,o){var a=U.Color.getRGB(e),s=(t-a.red)*o/r+a.red,l=(i-a.green)*o/r+a.green,p=(n-a.blue)*o/r+a.blue;return U.Color.getColor(s,l,p)},interpolateRGB:function(e,t,i,n,r,o,a,s){var l=(n-e)*s/a+e,p=(r-t)*s/a+t,h=(o-i)*s/a+i;return U.Color.getColor(l,p,h)},getRandomColor:function(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=255),void 0===i&&(i=255),255<t||t<e)return U.Color.getColor(255,255,255);var n=e+Math.round(Math.random()*(t-e)),r=e+Math.round(Math.random()*(t-e)),o=e+Math.round(Math.random()*(t-e));return U.Color.getColor32(i,n,r,o)},getRGB:function(e){return 16777215<e?{alpha:e>>>24,red:e>>16&255,green:e>>8&255,blue:255&e,a:e>>>24,r:e>>16&255,g:e>>8&255,b:255&e}:{alpha:255,red:e>>16&255,green:e>>8&255,blue:255&e,a:255,r:e>>16&255,g:e>>8&255,b:255&e}},getWebRGB:function(e){if("object"==typeof e)return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+(e.a/255).toString()+")";var t=U.Color.getRGB(e);return"rgba("+t.r.toString()+","+t.g.toString()+","+t.b.toString()+","+(t.a/255).toString()+")"},getAlpha:function(e){return e>>>24},getAlphaFloat:function(e){return(e>>>24)/255},getRed:function(e){return e>>16&255},getGreen:function(e){return e>>8&255},getBlue:function(e){return 255&e},blendNormal:function(e){return e},blendLighten:function(e,t){return e<t?t:e},blendDarken:function(e,t){return e<t?e:t},blendMultiply:function(e,t){return e*t/255},blendAverage:function(e,t){return(e+t)/2},blendAdd:function(e,t){return Math.min(255,e+t)},blendSubtract:function(e,t){return Math.max(0,e+t-255)},blendDifference:function(e,t){return Math.abs(e-t)},blendNegation:function(e,t){return 255-Math.abs(255-e-t)},blendScreen:function(e,t){return 255-((255-e)*(255-t)>>8)},blendExclusion:function(e,t){return e+t-2*e*t/255},blendOverlay:function(e,t){return t<128?2*e*t/255:255-2*(255-e)*(255-t)/255},blendSoftLight:function(e,t){return t<128?2*(64+(e>>1))*(t/255):255-2*(255-(64+(e>>1)))*(255-t)/255},blendHardLight:function(e,t){return U.Color.blendOverlay(t,e)},blendColorDodge:function(e,t){return 255===t?t:Math.min(255,(e<<8)/(255-t))},blendColorBurn:function(e,t){return 0===t?t:Math.max(0,255-(255-e<<8)/t)},blendLinearDodge:function(e,t){return U.Color.blendAdd(e,t)},blendLinearBurn:function(e,t){return U.Color.blendSubtract(e,t)},blendLinearLight:function(e,t){return t<128?U.Color.blendLinearBurn(e,2*t):U.Color.blendLinearDodge(e,2*(t-128))},blendVividLight:function(e,t){return t<128?U.Color.blendColorBurn(e,2*t):U.Color.blendColorDodge(e,2*(t-128))},blendPinLight:function(e,t){return t<128?U.Color.blendDarken(e,2*t):U.Color.blendLighten(e,2*(t-128))},blendHardMix:function(e,t){return U.Color.blendVividLight(e,t)<128?0:255},blendReflect:function(e,t){return 255===t?t:Math.min(255,e*e/(255-t))},blendGlow:function(e,t){return U.Color.blendReflect(t,e)},blendPhoenix:function(e,t){return Math.min(e,t)-Math.max(e,t)+255}},U.Physics=function(e,t){t=t||{},this.game=e,this.config=t,this.arcade=null,this.p2=null,this.ninja=null,this.box2d=null,this.chipmunk=null,this.matter=null,this.parseConfig()},U.Physics.ARCADE=0,U.Physics.P2JS=1,U.Physics.NINJA=2,U.Physics.BOX2D=3,U.Physics.CHIPMUNK=4,U.Physics.MATTERJS=5,U.Physics.prototype={parseConfig:function(){this.config.hasOwnProperty("arcade")&&!0!==this.config.arcade||!U.Physics.hasOwnProperty("Arcade")||(this.arcade=new U.Physics.Arcade(this.game)),this.config.hasOwnProperty("ninja")&&!0===this.config.ninja&&U.Physics.hasOwnProperty("Ninja")&&(this.ninja=new U.Physics.Ninja(this.game)),this.config.hasOwnProperty("p2")&&!0===this.config.p2&&U.Physics.hasOwnProperty("P2")&&(this.p2=new U.Physics.P2(this.game,this.config)),this.config.hasOwnProperty("box2d")&&!0===this.config.box2d&&U.Physics.hasOwnProperty("BOX2D")&&(this.box2d=new U.Physics.BOX2D(this.game,this.config)),this.config.hasOwnProperty("matter")&&!0===this.config.matter&&U.Physics.hasOwnProperty("Matter")&&(this.matter=new U.Physics.Matter(this.game,this.config))},startSystem:function(e){e===U.Physics.ARCADE?this.arcade=new U.Physics.Arcade(this.game):e===U.Physics.P2JS?null===this.p2?this.p2=new U.Physics.P2(this.game,this.config):this.p2.reset():e===U.Physics.NINJA?this.ninja=new U.Physics.Ninja(this.game):e===U.Physics.BOX2D?null===this.box2d?this.box2d=new U.Physics.Box2D(this.game,this.config):this.box2d.reset():e===U.Physics.MATTERJS&&(null===this.matter?this.matter=new U.Physics.Matter(this.game,this.config):this.matter.reset())},enable:function(e,t,i){void 0===t&&(t=U.Physics.ARCADE),void 0===i&&(i=!1),t===U.Physics.ARCADE?this.arcade.enable(e):t===U.Physics.P2JS&&this.p2?this.p2.enable(e,i):t===U.Physics.NINJA&&this.ninja?this.ninja.enableAABB(e):t===U.Physics.BOX2D&&this.box2d?this.box2d.enable(e):t===U.Physics.MATTERJS&&this.matter&&this.matter.enable(e)},preUpdate:function(){this.p2&&this.p2.preUpdate(),this.box2d&&this.box2d.preUpdate(),this.matter&&this.matter.preUpdate()},update:function(){this.p2&&this.p2.update(),this.box2d&&this.box2d.update(),this.matter&&this.matter.update()},setBoundsToWorld:function(){this.arcade&&this.arcade.setBoundsToWorld(),this.ninja&&this.ninja.setBoundsToWorld(),this.p2&&this.p2.setBoundsToWorld(),this.box2d&&this.box2d.setBoundsToWorld(),this.matter&&this.matter.setBoundsToWorld()},clear:function(){this.p2&&this.p2.clear(),this.box2d&&this.box2d.clear(),this.matter&&this.matter.clear()},reset:function(){this.p2&&this.p2.reset(),this.box2d&&this.box2d.reset(),this.matter&&this.matter.reset()},destroy:function(){this.p2&&this.p2.destroy(),this.box2d&&this.box2d.destroy(),this.matter&&this.matter.destroy(),this.arcade=null,this.ninja=null,this.p2=null,this.box2d=null,this.matter=null}},U.Physics.prototype.constructor=U.Physics,U.Physics.Arcade=function(e){this.game=e,this.gravity=new U.Point,this.bounds=new U.Rectangle(0,0,e.world.width,e.world.height),this.checkCollision={up:!0,down:!0,left:!0,right:!0},this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.forceX=!1,this.sortDirection=U.Physics.Arcade.LEFT_RIGHT,this.skipQuadTree=!0,this.isPaused=!1,this.quadTree=new U.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this._total=0,this.setBoundsToWorld()},U.Physics.Arcade.prototype.constructor=U.Physics.Arcade,U.Physics.Arcade.SORT_NONE=0,U.Physics.Arcade.LEFT_RIGHT=1,U.Physics.Arcade.RIGHT_LEFT=2,U.Physics.Arcade.TOP_BOTTOM=3,U.Physics.Arcade.BOTTOM_TOP=4,U.Physics.Arcade.prototype={setBounds:function(e,t,i,n){this.bounds.setTo(e,t,i,n)},setBoundsToWorld:function(){this.bounds.copyFrom(this.game.world.bounds)},enable:function(e,t){void 0===t&&(t=!0);var i=1;if(Array.isArray(e))for(i=e.length;i--;)e[i]instanceof U.Group?this.enable(e[i].children,t):(this.enableBody(e[i]),t&&e[i].hasOwnProperty("children")&&0<e[i].children.length&&this.enable(e[i],!0));else e instanceof U.Group?this.enable(e.children,t):(this.enableBody(e),t&&e.hasOwnProperty("children")&&0<e.children.length&&this.enable(e.children,!0))},enableBody:function(e){e.hasOwnProperty("body")&&null===e.body&&(e.body=new U.Physics.Arcade.Body(e),e.parent&&e.parent instanceof U.Group&&e.parent.addToHash(e))},updateMotion:function(e){var t=this.computeVelocity(0,e,e.angularVelocity,e.angularAcceleration,e.angularDrag,e.maxAngular)-e.angularVelocity;e.angularVelocity+=t,e.rotation+=e.angularVelocity*this.game.time.physicsElapsed,e.velocity.x=this.computeVelocity(1,e,e.velocity.x,e.acceleration.x,e.drag.x,e.maxVelocity.x),e.velocity.y=this.computeVelocity(2,e,e.velocity.y,e.acceleration.y,e.drag.y,e.maxVelocity.y)},computeVelocity:function(e,t,i,n,r,o){return void 0===o&&(o=1e4),1===e&&t.allowGravity?i+=(this.gravity.x+t.gravity.x)*this.game.time.physicsElapsed:2===e&&t.allowGravity&&(i+=(this.gravity.y+t.gravity.y)*this.game.time.physicsElapsed),n?i+=n*this.game.time.physicsElapsed:r&&(0<i-(r*=this.game.time.physicsElapsed)?i-=r:i+r<0?i+=r:i=0),o<i?i=o:i<-o&&(i=-o),i},overlap:function(e,t,i,n,r){if(i=i||null,n=n||null,r=r||i,this._total=0,!Array.isArray(e)&&Array.isArray(t))for(var o=0;o<t.length;o++)this.collideHandler(e,t[o],i,n,r,!0);else if(Array.isArray(e)&&!Array.isArray(t))for(o=0;o<e.length;o++)this.collideHandler(e[o],t,i,n,r,!0);else if(Array.isArray(e)&&Array.isArray(t))for(o=0;o<e.length;o++)for(var a=0;a<t.length;a++)this.collideHandler(e[o],t[a],i,n,r,!0);else this.collideHandler(e,t,i,n,r,!0);return 0<this._total},collide:function(e,t,i,n,r){if(i=i||null,n=n||null,r=r||i,this._total=0,!Array.isArray(e)&&Array.isArray(t))for(var o=0;o<t.length;o++)this.collideHandler(e,t[o],i,n,r,!1);else if(Array.isArray(e)&&!Array.isArray(t))for(o=0;o<e.length;o++)this.collideHandler(e[o],t,i,n,r,!1);else if(Array.isArray(e)&&Array.isArray(t))for(o=0;o<e.length;o++)for(var a=0;a<t.length;a++)this.collideHandler(e[o],t[a],i,n,r,!1);else this.collideHandler(e,t,i,n,r,!1);return 0<this._total},sortLeftRight:function(e,t){return e.body&&t.body?e.body.x-t.body.x:0},sortRightLeft:function(e,t){return e.body&&t.body?t.body.x-e.body.x:0},sortTopBottom:function(e,t){return e.body&&t.body?e.body.y-t.body.y:0},sortBottomTop:function(e,t){return e.body&&t.body?t.body.y-e.body.y:0},sort:function(e,t){null!==e.physicsSortDirection?t=e.physicsSortDirection:void 0===t&&(t=this.sortDirection),t===U.Physics.Arcade.LEFT_RIGHT?e.hash.sort(this.sortLeftRight):t===U.Physics.Arcade.RIGHT_LEFT?e.hash.sort(this.sortRightLeft):t===U.Physics.Arcade.TOP_BOTTOM?e.hash.sort(this.sortTopBottom):t===U.Physics.Arcade.BOTTOM_TOP&&e.hash.sort(this.sortBottomTop)},collideHandler:function(e,t,i,n,r,o){if(void 0===t&&e.physicsType===U.GROUP)return this.sort(e),void this.collideGroupVsSelf(e,i,n,r,o);e&&t&&e.exists&&t.exists&&(this.sortDirection!==U.Physics.Arcade.SORT_NONE&&(e.physicsType===U.GROUP&&this.sort(e),t.physicsType===U.GROUP&&this.sort(t)),e.physicsType===U.SPRITE?t.physicsType===U.SPRITE?this.collideSpriteVsSprite(e,t,i,n,r,o):t.physicsType===U.GROUP?this.collideSpriteVsGroup(e,t,i,n,r,o):t.physicsType===U.TILEMAPLAYER&&this.collideSpriteVsTilemapLayer(e,t,i,n,r,o):e.physicsType===U.GROUP?t.physicsType===U.SPRITE?this.collideSpriteVsGroup(t,e,i,n,r,o):t.physicsType===U.GROUP?this.collideGroupVsGroup(e,t,i,n,r,o):t.physicsType===U.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(e,t,i,n,r,o):e.physicsType===U.TILEMAPLAYER&&(t.physicsType===U.SPRITE?this.collideSpriteVsTilemapLayer(t,e,i,n,r,o):t.physicsType===U.GROUP&&this.collideGroupVsTilemapLayer(t,e,i,n,r,o)))},collideSpriteVsSprite:function(e,t,i,n,r,o){return!(!e.body||!t.body||(this.separate(e.body,t.body,n,r,o)&&(i&&i.call(r,e,t),this._total++),0))},collideSpriteVsGroup:function(e,t,i,n,r,o){if(0!==t.length&&e.body)if(this.skipQuadTree||e.body.skipQuadTree)for(var a={},s=0;s<t.hash.length;s++){var l=t.hash[s];if(l&&l.exists&&l.body){if(a=l.body.getBounds(a),this.sortDirection===U.Physics.Arcade.LEFT_RIGHT){if(e.body.right<a.x)break;if(a.right<e.body.x)continue}else if(this.sortDirection===U.Physics.Arcade.RIGHT_LEFT){if(e.body.x>a.right)break;if(a.x>e.body.right)continue}else if(this.sortDirection===U.Physics.Arcade.TOP_BOTTOM){if(e.body.bottom<a.y)break;if(a.bottom<e.body.y)continue}else if(this.sortDirection===U.Physics.Arcade.BOTTOM_TOP){if(e.body.y>a.bottom)break;if(a.y>e.body.bottom)continue}this.collideSpriteVsSprite(e,l,i,n,r,o)}}else{this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(t);var p=this.quadTree.retrieve(e);for(s=0;s<p.length;s++)this.separate(e.body,p[s],n,r,o)&&(i&&i.call(r,e,p[s].sprite),this._total++)}},collideGroupVsSelf:function(e,t,i,n,r){if(0!==e.length)for(var o=0;o<e.hash.length;o++){var a={},s=e.hash[o];if(s&&s.exists&&s.body){a=s.body.getBounds(a);for(var l=o+1;l<e.hash.length;l++){var p={},h=e.hash[l];if(h&&h.exists&&h.body){if(p=h.body.getBounds(p),this.sortDirection===U.Physics.Arcade.LEFT_RIGHT){if(a.right<p.x)break;if(p.right<a.x)continue}else if(this.sortDirection===U.Physics.Arcade.RIGHT_LEFT){if(a.x>p.right)continue;if(p.x>a.right)break}else if(this.sortDirection===U.Physics.Arcade.TOP_BOTTOM){if(a.bottom<p.y)continue;if(p.bottom<a.y)break}else if(this.sortDirection===U.Physics.Arcade.BOTTOM_TOP){if(a.y>p.bottom)continue;if(p.y>s.body.bottom)break}this.collideSpriteVsSprite(s,h,t,i,n,r)}}}}},collideGroupVsGroup:function(e,t,i,n,r,o){if(0!==e.length&&0!==t.length)for(var a=0;a<e.children.length;a++)e.children[a].exists&&(e.children[a].physicsType===U.GROUP?this.collideGroupVsGroup(e.children[a],t,i,n,r,o):this.collideSpriteVsGroup(e.children[a],t,i,n,r,o))},separate:function(e,t,i,n,r){if(!e.enable||!t.enable||e.checkCollision.none||t.checkCollision.none||!this.intersects(e,t))return!1;if(i&&!1===i.call(n,e.sprite,t.sprite))return!1;if(e.isCircle&&t.isCircle)return this.separateCircle(e,t,r);if(e.isCircle!==t.isCircle){var o=e.isCircle?t:e,a=e.isCircle?e:t,s=o.x,l=o.y,p=o.right,h=o.bottom,u=a.x+a.radius,c=a.y+a.radius;if((c<l||h<c)&&(u<s||p<u))return this.separateCircle(e,t,r)}var d=!1,_=!1;this.forceX||Math.abs(this.gravity.y+e.gravity.y)<Math.abs(this.gravity.x+e.gravity.x)?(d=this.separateX(e,t,r),this.intersects(e,t)&&(_=this.separateY(e,t,r))):(_=this.separateY(e,t,r),this.intersects(e,t)&&(d=this.separateX(e,t,r)));var y=d||_;return y&&(r?(e.onOverlap&&e.onOverlap.dispatch(e.sprite,t.sprite),t.onOverlap&&t.onOverlap.dispatch(t.sprite,e.sprite)):(e.onCollide&&e.onCollide.dispatch(e.sprite,t.sprite),t.onCollide&&t.onCollide.dispatch(t.sprite,e.sprite))),y},intersects:function(e,t){return e!==t&&(e.isCircle?t.isCircle?U.Math.distance(e.center.x,e.center.y,t.center.x,t.center.y)<=e.radius+t.radius:this.circleBodyIntersects(e,t):t.isCircle?this.circleBodyIntersects(t,e):!(e.right<=t.position.x||e.bottom<=t.position.y||e.position.x>=t.right||e.position.y>=t.bottom))},circleBodyIntersects:function(e,t){var i=U.Math.clamp(e.center.x,t.left,t.right),n=U.Math.clamp(e.center.y,t.top,t.bottom);return(e.center.x-i)*(e.center.x-i)+(e.center.y-n)*(e.center.y-n)<=e.radius*e.radius},separateCircle:function(e,t,i){this.getOverlapX(e,t),this.getOverlapY(e,t);var n=t.center.x-e.center.x,r=t.center.y-e.center.y,o=Math.atan2(r,n),a=0;if(e.isCircle!==t.isCircle){var s={x:t.isCircle?e.position.x:t.position.x,y:t.isCircle?e.position.y:t.position.y,right:t.isCircle?e.right:t.right,bottom:t.isCircle?e.bottom:t.bottom},l={x:e.isCircle?e.position.x+e.radius:t.position.x+t.radius,y:e.isCircle?e.position.y+e.radius:t.position.y+t.radius,radius:e.isCircle?e.radius:t.radius};l.y<s.y?l.x<s.x?a=U.Math.distance(l.x,l.y,s.x,s.y)-l.radius:s.right<l.x&&(a=U.Math.distance(l.x,l.y,s.right,s.y)-l.radius):s.bottom<l.y&&(l.x<s.x?a=U.Math.distance(l.x,l.y,s.x,s.bottom)-l.radius:s.right<l.x&&(a=U.Math.distance(l.x,l.y,s.right,s.bottom)-l.radius)),a*=-1}else a=e.radius+t.radius-U.Math.distance(e.center.x,e.center.y,t.center.x,t.center.y);if(i||0===a||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==a&&(e.onOverlap&&e.onOverlap.dispatch(e.sprite,t.sprite),t.onOverlap&&t.onOverlap.dispatch(t.sprite,e.sprite)),0!==a;var p=e.velocity.x*Math.cos(o)+e.velocity.y*Math.sin(o),h=e.velocity.x*Math.sin(o)-e.velocity.y*Math.cos(o),u=t.velocity.x*Math.cos(o)+t.velocity.y*Math.sin(o),c=t.velocity.x*Math.sin(o)-t.velocity.y*Math.cos(o),d=((e.mass-t.mass)*p+2*t.mass*u)/(e.mass+t.mass),_=(2*e.mass*p+(t.mass-e.mass)*u)/(e.mass+t.mass);return e.immovable||(e.velocity.x=(d*Math.cos(o)-h*Math.sin(o))*e.bounce.x,e.velocity.y=(h*Math.cos(o)+d*Math.sin(o))*e.bounce.y),t.immovable||(t.velocity.x=(_*Math.cos(o)-c*Math.sin(o))*t.bounce.x,t.velocity.y=(c*Math.cos(o)+_*Math.sin(o))*t.bounce.y),Math.abs(o)<Math.PI/2?0<e.velocity.x&&!e.immovable&&t.velocity.x>e.velocity.x?e.velocity.x*=-1:t.velocity.x<0&&!t.immovable&&e.velocity.x<t.velocity.x?t.velocity.x*=-1:0<e.velocity.y&&!e.immovable&&t.velocity.y>e.velocity.y?e.velocity.y*=-1:t.velocity.y<0&&!t.immovable&&e.velocity.y<t.velocity.y&&(t.velocity.y*=-1):Math.abs(o)>Math.PI/2&&(e.velocity.x<0&&!e.immovable&&t.velocity.x<e.velocity.x?e.velocity.x*=-1:0<t.velocity.x&&!t.immovable&&e.velocity.x>t.velocity.x?t.velocity.x*=-1:e.velocity.y<0&&!e.immovable&&t.velocity.y<e.velocity.y?e.velocity.y*=-1:0<t.velocity.y&&!t.immovable&&e.velocity.x>t.velocity.y&&(t.velocity.y*=-1)),e.immovable||(e.x+=e.velocity.x*this.game.time.physicsElapsed-a*Math.cos(o),e.y+=e.velocity.y*this.game.time.physicsElapsed-a*Math.sin(o)),t.immovable||(t.x+=t.velocity.x*this.game.time.physicsElapsed+a*Math.cos(o),t.y+=t.velocity.y*this.game.time.physicsElapsed+a*Math.sin(o)),e.onCollide&&e.onCollide.dispatch(e.sprite,t.sprite),t.onCollide&&t.onCollide.dispatch(t.sprite,e.sprite),!0},getOverlapX:function(e,t,i){var n=0,r=e.deltaAbsX()+t.deltaAbsX()+this.OVERLAP_BIAS;return 0===e.deltaX()&&0===t.deltaX()?(e.embedded=!0,t.embedded=!0):e.deltaX()>t.deltaX()?r<(n=e.right-t.x)&&!i||!1===e.checkCollision.right||!1===t.checkCollision.left?n=0:(e.touching.none=!1,e.touching.right=!0,t.touching.none=!1,t.touching.left=!0):e.deltaX()<t.deltaX()&&(r<-(n=e.x-t.width-t.x)&&!i||!1===e.checkCollision.left||!1===t.checkCollision.right?n=0:(e.touching.none=!1,e.touching.left=!0,t.touching.none=!1,t.touching.right=!0)),e.overlapX=n,t.overlapX=n},getOverlapY:function(e,t,i){var n=0,r=e.deltaAbsY()+t.deltaAbsY()+this.OVERLAP_BIAS;return 0===e.deltaY()&&0===t.deltaY()?(e.embedded=!0,t.embedded=!0):e.deltaY()>t.deltaY()?r<(n=e.bottom-t.y)&&!i||!1===e.checkCollision.down||!1===t.checkCollision.up?n=0:(e.touching.none=!1,e.touching.down=!0,t.touching.none=!1,t.touching.up=!0):e.deltaY()<t.deltaY()&&(r<-(n=e.y-t.bottom)&&!i||!1===e.checkCollision.up||!1===t.checkCollision.down?n=0:(e.touching.none=!1,e.touching.up=!0,t.touching.none=!1,t.touching.down=!0)),e.overlapY=n,t.overlapY=n},separateX:function(e,t,i){var n=this.getOverlapX(e,t,i);if(i||0===n||e.immovable&&t.immovable||e.customSeparateX||t.customSeparateX)return 0!==n||e.embedded&&t.embedded;var r=e.velocity.x,o=t.velocity.x;if(e.immovable||t.immovable)e.immovable?(t.x+=n,t.velocity.x=r-o*t.bounce.x,e.moves&&(t.y+=(e.y-e.prev.y)*e.friction.y)):(e.x-=n,e.velocity.x=o-r*e.bounce.x,t.moves&&(e.y+=(t.y-t.prev.y)*t.friction.y));else{n*=.5,e.x-=n,t.x+=n;var a=Math.sqrt(o*o*t.mass/e.mass)*(0<o?1:-1),s=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),l=.5*(a+s);a-=l,s-=l,e.velocity.x=l+a*e.bounce.x,t.velocity.x=l+s*t.bounce.x}return!0},separateY:function(e,t,i){var n=this.getOverlapY(e,t,i);if(i||0===n||e.immovable&&t.immovable||e.customSeparateY||t.customSeparateY)return 0!==n||e.embedded&&t.embedded;var r=e.velocity.y,o=t.velocity.y;if(e.immovable||t.immovable)e.immovable?(t.y+=n,t.velocity.y=r-o*t.bounce.y,e.moves&&(t.x+=(e.x-e.prev.x)*e.friction.x)):(e.y-=n,e.velocity.y=o-r*e.bounce.y,t.moves&&(e.x+=(t.x-t.prev.x)*t.friction.x));else{n*=.5,e.y-=n,t.y+=n;var a=Math.sqrt(o*o*t.mass/e.mass)*(0<o?1:-1),s=Math.sqrt(r*r*e.mass/t.mass)*(0<r?1:-1),l=.5*(a+s);a-=l,s-=l,e.velocity.y=l+a*e.bounce.y,t.velocity.y=l+s*t.bounce.y}return!0},getObjectsUnderPointer:function(e,t,i,n){if(0!==t.length&&e.exists)return this.getObjectsAtLocation(e.x,e.y,t,i,n,e)},getObjectsAtLocation:function(e,t,i,n,r,o){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(i);for(var a=new U.Rectangle(e,t,1,1),s=[],l=this.quadTree.retrieve(a),p=0;p<l.length;p++)l[p].hitTest(e,t)&&(n&&n.call(r,o,l[p].sprite),s.push(l[p].sprite));return s},moveToObject:function(e,t,i,n){void 0===i&&(i=60),void 0===n&&(n=0);var r=Math.atan2(t.y-e.y,t.x-e.x);return 0<n&&(i=this.distanceBetween(e,t)/(n/1e3)),e.body.velocity.x=Math.cos(r)*i,e.body.velocity.y=Math.sin(r)*i,r},moveToPointer:function(e,t,i,n){void 0===t&&(t=60),i=i||this.game.input.activePointer,void 0===n&&(n=0);var r=this.angleToPointer(e,i);return 0<n&&(t=this.distanceToPointer(e,i)/(n/1e3)),e.body.velocity.x=Math.cos(r)*t,e.body.velocity.y=Math.sin(r)*t,r},moveToXY:function(e,t,i,n,r){void 0===n&&(n=60),void 0===r&&(r=0);var o=Math.atan2(i-e.y,t-e.x);return 0<r&&(n=this.distanceToXY(e,t,i)/(r/1e3)),e.body.velocity.x=Math.cos(o)*n,e.body.velocity.y=Math.sin(o)*n,o},velocityFromAngle:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(this.game.math.degToRad(e))*t,Math.sin(this.game.math.degToRad(e))*t)},velocityFromRotation:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(e)*t,Math.sin(e)*t)},accelerationFromRotation:function(e,t,i){return void 0===t&&(t=60),(i=i||new U.Point).setTo(Math.cos(e)*t,Math.sin(e)*t)},accelerateToObject:function(e,t,i,n,r){void 0===i&&(i=60),void 0===n&&(n=1e3),void 0===r&&(r=1e3);var o=this.angleBetween(e,t);return e.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i),e.body.maxVelocity.setTo(n,r),o},accelerateToPointer:function(e,t,i,n,r){void 0===i&&(i=60),void 0===t&&(t=this.game.input.activePointer),void 0===n&&(n=1e3),void 0===r&&(r=1e3);var o=this.angleToPointer(e,t);return e.body.acceleration.setTo(Math.cos(o)*i,Math.sin(o)*i),e.body.maxVelocity.setTo(n,r),o},accelerateToXY:function(e,t,i,n,r,o){void 0===n&&(n=60),void 0===r&&(r=1e3),void 0===o&&(o=1e3);var a=this.angleToXY(e,t,i);return e.body.acceleration.setTo(Math.cos(a)*n,Math.sin(a)*n),e.body.maxVelocity.setTo(r,o),a},distanceBetween:function(e,t,i){void 0===i&&(i=!1);var n=i?e.world.x-t.world.x:e.x-t.x,r=i?e.world.y-t.world.y:e.y-t.y;return Math.sqrt(n*n+r*r)},distanceToXY:function(e,t,i,n){void 0===n&&(n=!1);var r=n?e.world.x-t:e.x-t,o=n?e.world.y-i:e.y-i;return Math.sqrt(r*r+o*o)},distanceToPointer:function(e,t,i){void 0===t&&(t=this.game.input.activePointer),void 0===i&&(i=!1);var n=i?e.world.x-t.worldX:e.x-t.worldX,r=i?e.world.y-t.worldY:e.y-t.worldY;return Math.sqrt(n*n+r*r)},angleBetween:function(e,t,i){return void 0===i&&(i=!1),i?Math.atan2(t.world.y-e.world.y,t.world.x-e.world.x):Math.atan2(t.y-e.y,t.x-e.x)},angleBetweenCenters:function(e,t){var i=t.centerX-e.centerX,n=t.centerY-e.centerY;return Math.atan2(n,i)},angleToXY:function(e,t,i,n){return void 0===n&&(n=!1),n?Math.atan2(i-e.world.y,t-e.world.x):Math.atan2(i-e.y,t-e.x)},angleToPointer:function(e,t,i){return void 0===t&&(t=this.game.input.activePointer),void 0===i&&(i=!1),i?Math.atan2(t.worldY-e.world.y,t.worldX-e.world.x):Math.atan2(t.worldY-e.y,t.worldX-e.x)},worldAngleToPointer:function(e,t){return this.angleToPointer(e,t,!0)}},U.Physics.Arcade.Body=function(e){this.sprite=e,this.game=e.game,this.type=U.Physics.ARCADE,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new U.Point,this.position=new U.Point(e.x,e.y),this.prev=new U.Point(this.position.x,this.position.y),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=e.width,this.height=e.height,this.sourceWidth=e.width,this.sourceHeight=e.height,e.texture&&(this.sourceWidth=e.texture.frame.width,this.sourceHeight=e.texture.frame.height),this.halfWidth=Math.abs(e.width/2),this.halfHeight=Math.abs(e.height/2),this.center=new U.Point(e.x+this.halfWidth,e.y+this.halfHeight),this.velocity=new U.Point,this.newVelocity=new U.Point,this.deltaMax=new U.Point,this.acceleration=new U.Point,this.drag=new U.Point,this.allowGravity=!0,this.gravity=new U.Point,this.bounce=new U.Point,this.worldBounce=null,this.onWorldBounds=null,this.onCollide=null,this.onOverlap=null,this.maxVelocity=new U.Point(1e4,1e4),this.friction=new U.Point(1,0),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=U.NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={up:!1,down:!1,left:!1,right:!1},this.tilePadding=new U.Point,this.dirty=!1,this.skipQuadTree=!1,this.syncBounds=!1,this.isMoving=!1,this.stopVelocityOnCollide=!0,this.moveTimer=0,this.moveDistance=0,this.moveDuration=0,this.moveTarget=null,this.moveEnd=null,this.onMoveComplete=new U.Signal,this.movementCallback=null,this.movementCallbackContext=null,this._reset=!0,this._sx=e.scale.x,this._sy=e.scale.y,this._dx=0,this._dy=0},U.Physics.Arcade.Body.prototype={updateBounds:function(){if(this.syncBounds){var e=this.sprite.getBounds();e.ceilAll(),e.width===this.width&&e.height===this.height||(this.width=e.width,this.height=e.height,this._reset=!0)}else{var t=Math.abs(this.sprite.scale.x),i=Math.abs(this.sprite.scale.y);t===this._sx&&i===this._sy||(this.width=this.sourceWidth*t,this.height=this.sourceHeight*i,this._sx=t,this._sy=i,this._reset=!0)}this._reset&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight))},preUpdate:function(){this.enable&&!this.game.physics.arcade.isPaused&&(this.dirty=!0,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.embedded=!1,this.updateBounds(),this.position.x=this.sprite.world.x-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x,this.position.x-=this.sprite.scale.x<0?this.width:0,this.position.y=this.sprite.world.y-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y,this.position.y-=this.sprite.scale.y<0?this.height:0,this.rotation=this.sprite.angle,this.preRotation=this.rotation,(this._reset||this.sprite.fresh)&&(this.prev.x=this.position.x,this.prev.y=this.position.y),this.moves&&(this.game.physics.arcade.updateMotion(this),this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed),this.position.x+=this.newVelocity.x,this.position.y+=this.newVelocity.y,this.position.x===this.prev.x&&this.position.y===this.prev.y||(this.angle=Math.atan2(this.velocity.y,this.velocity.x)),this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.onWorldBounds.dispatch(this.sprite,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.deltaX(),this._dy=this.deltaY(),this._reset=!1)},updateMovement:function(){var e=0,t=0!==this.overlapX||0!==this.overlapY;if(0<this.moveDuration?(this.moveTimer+=this.game.time.elapsedMS,e=this.moveTimer/this.moveDuration):(this.moveTarget.end.set(this.position.x,this.position.y),e=this.moveTarget.length/this.moveDistance),this.movementCallback)var i=this.movementCallback.call(this.movementCallbackContext,this,this.velocity,e);return!(t||1<=e||void 0!==i&&!0!==i)||(this.stopMovement(1<=e||this.stopVelocityOnCollide&&t),!1)},stopMovement:function(e){this.isMoving&&(this.isMoving=!1,e&&this.velocity.set(0),this.onMoveComplete.dispatch(this.sprite,0!==this.overlapX||0!==this.overlapY))},postUpdate:function(){this.enable&&this.dirty&&(this.isMoving&&this.updateMovement(),this.dirty=!1,this.deltaX()<0?this.facing=U.LEFT:0<this.deltaX()&&(this.facing=U.RIGHT),this.deltaY()<0?this.facing=U.UP:0<this.deltaY()&&(this.facing=U.DOWN),this.moves&&(this._dx=this.deltaX(),this._dy=this.deltaY(),0!==this.deltaMax.x&&0!==this._dx&&(this._dx<0&&this._dx<-this.deltaMax.x?this._dx=-this.deltaMax.x:0<this._dx&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x)),0!==this.deltaMax.y&&0!==this._dy&&(this._dy<0&&this._dy<-this.deltaMax.y?this._dy=-this.deltaMax.y:0<this._dy&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y)),this.sprite.position.x+=this._dx,this.sprite.position.y+=this._dy,this._reset=!0),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.allowRotation&&(this.sprite.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y)},checkWorldBounds:function(){var e=this.position,t=this.game.physics.arcade.bounds,i=this.game.physics.arcade.checkCollision,n=this.worldBounce?-this.worldBounce.x:-this.bounce.x,r=this.worldBounce?-this.worldBounce.y:-this.bounce.y;if(this.isCircle){var o=this.center.x-this.radius,a=this.center.y-this.radius,s=this.center.x+this.radius,l=this.center.y+this.radius;o<t.x&&i.left?(e.x=t.x-this.halfWidth+this.radius,this.velocity.x*=n,this.blocked.left=!0):s>t.right&&i.right&&(e.x=t.right-this.halfWidth-this.radius,this.velocity.x*=n,this.blocked.right=!0),a<t.y&&i.up?(e.y=t.y-this.halfHeight+this.radius,this.velocity.y*=r,this.blocked.up=!0):l>t.bottom&&i.down&&(e.y=t.bottom-this.halfHeight-this.radius,this.velocity.y*=r,this.blocked.down=!0)}else e.x<t.x&&i.left?(e.x=t.x,this.velocity.x*=n,this.blocked.left=!0):this.right>t.right&&i.right&&(e.x=t.right-this.width,this.velocity.x*=n,this.blocked.right=!0),e.y<t.y&&i.up?(e.y=t.y,this.velocity.y*=r,this.blocked.up=!0):this.bottom>t.bottom&&i.down&&(e.y=t.bottom-this.height,this.velocity.y*=r,this.blocked.down=!0);return this.blocked.up||this.blocked.down||this.blocked.left||this.blocked.right},moveFrom:function(e,t,i){return void 0===t&&(t=this.speed),0!==t&&(void 0===i?(n=this.angle,i=this.game.math.radToDeg(n)):n=this.game.math.degToRad(i),this.moveTimer=0,this.moveDuration=e,0===i||180===i?this.velocity.set(Math.cos(n)*t,0):90===i||270===i?this.velocity.set(0,Math.sin(n)*t):this.velocity.set(Math.cos(n)*t,Math.sin(n)*t),this.isMoving=!0);var n},moveTo:function(e,t,i){var n,r=t/(e/1e3);return 0!==r&&(void 0===i?(n=this.angle,i=this.game.math.radToDeg(n)):n=this.game.math.degToRad(i),t=Math.abs(t),this.moveDuration=0,this.moveDistance=t,null===this.moveTarget&&(this.moveTarget=new U.Line,this.moveEnd=new U.Point),this.moveTarget.fromAngle(this.x,this.y,n,t),this.moveEnd.set(this.moveTarget.end.x,this.moveTarget.end.y),this.moveTarget.setTo(this.x,this.y,this.x,this.y),0===i||180===i?this.velocity.set(Math.cos(n)*r,0):90===i||270===i?this.velocity.set(0,Math.sin(n)*r):this.velocity.set(Math.cos(n)*r,Math.sin(n)*r),this.isMoving=!0)},setSize:function(e,t,i,n){void 0===i&&(i=this.offset.x),void 0===n&&(n=this.offset.y),this.sourceWidth=e,this.sourceHeight=t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(i,n),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.isCircle=!1,this.radius=0},setCircle:function(e,t,i){void 0===t&&(t=this.offset.x),void 0===i&&(i=this.offset.y),0<e?(this.isCircle=!0,this.radius=e,this.sourceWidth=2*e,this.sourceHeight=2*e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(t,i),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)):this.isCircle=!1},reset:function(e,t){this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this.position.x=e-this.sprite.anchor.x*this.sprite.width+this.sprite.scale.x*this.offset.x,this.position.x-=this.sprite.scale.x<0?this.width:0,this.position.y=t-this.sprite.anchor.y*this.sprite.height+this.sprite.scale.y*this.offset.y,this.position.y-=this.sprite.scale.y<0?this.height:0,this.prev.x=this.position.x,this.prev.y=this.position.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,this._sx=this.sprite.scale.x,this._sy=this.sprite.scale.y,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},getBounds:function(e){return this.isCircle?(e.x=this.center.x-this.radius,e.y=this.center.y-this.radius,e.right=this.center.x+this.radius,e.bottom=this.center.y+this.radius):(e.x=this.x,e.y=this.y,e.right=this.right,e.bottom=this.bottom),e},hitTest:function(e,t){return this.isCircle?U.Circle.contains(this,e,t):U.Rectangle.contains(this,e,t)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this.deltaX()?this.deltaX():-this.deltaX()},deltaAbsY:function(){return 0<this.deltaY()?this.deltaY():-this.deltaY()},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.sprite.parent&&this.sprite.parent instanceof U.Group&&this.sprite.parent.removeFromHash(this.sprite),this.sprite.body=null,this.sprite=null}},Object.defineProperty(U.Physics.Arcade.Body.prototype,"left",{get:function(){return this.position.x}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"right",{get:function(){return this.position.x+this.width}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"top",{get:function(){return this.position.y}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.position.y+this.height}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"x",{get:function(){return this.position.x},set:function(e){this.position.x=e}}),Object.defineProperty(U.Physics.Arcade.Body.prototype,"y",{get:function(){return this.position.y},set:function(e){this.position.y=e}}),U.Physics.Arcade.Body.render=function(e,t,i,n){void 0===n&&(n=!0),i=i||"rgba(0,255,0,0.4)",e.fillStyle=i,e.strokeStyle=i,t.isCircle?(e.beginPath(),e.arc(t.center.x-t.game.camera.x,t.center.y-t.game.camera.y,t.radius,0,2*Math.PI),n?e.fill():e.stroke()):n?e.fillRect(t.position.x-t.game.camera.x,t.position.y-t.game.camera.y,t.width,t.height):e.strokeRect(t.position.x-t.game.camera.x,t.position.y-t.game.camera.y,t.width,t.height)},U.Physics.Arcade.Body.renderBodyInfo=function(e,t){e.line("x: "+t.x.toFixed(2),"y: "+t.y.toFixed(2),"width: "+t.width,"height: "+t.height),e.line("velocity x: "+t.velocity.x.toFixed(2),"y: "+t.velocity.y.toFixed(2),"deltaX: "+t._dx.toFixed(2),"deltaY: "+t._dy.toFixed(2)),e.line("acceleration x: "+t.acceleration.x.toFixed(2),"y: "+t.acceleration.y.toFixed(2),"speed: "+t.speed.toFixed(2),"angle: "+t.angle.toFixed(2)),e.line("gravity x: "+t.gravity.x,"y: "+t.gravity.y,"bounce x: "+t.bounce.x.toFixed(2),"y: "+t.bounce.y.toFixed(2)),e.line("touching left: "+t.touching.left,"right: "+t.touching.right,"up: "+t.touching.up,"down: "+t.touching.down),e.line("blocked left: "+t.blocked.left,"right: "+t.blocked.right,"up: "+t.blocked.up,"down: "+t.blocked.down)},U.Physics.Arcade.Body.prototype.constructor=U.Physics.Arcade.Body,U.Physics.Arcade.TilemapCollision=function(){},U.Physics.Arcade.TilemapCollision.prototype={TILE_BIAS:16,collideSpriteVsTilemapLayer:function(e,t,i,n,r,o){if(e.body){var a=t.getTiles(e.body.position.x-e.body.tilePadding.x,e.body.position.y-e.body.tilePadding.y,e.body.width+e.body.tilePadding.x,e.body.height+e.body.tilePadding.y,!1,!1);if(0!==a.length)for(var s=0;s<a.length;s++)n?n.call(r,e,a[s])&&this.separateTile(s,e.body,a[s],t,o)&&(this._total++,i&&i.call(r,e,a[s])):this.separateTile(s,e.body,a[s],t,o)&&(this._total++,i&&i.call(r,e,a[s]))}},collideGroupVsTilemapLayer:function(e,t,i,n,r,o){if(0!==e.length)for(var a=0;a<e.children.length;a++)e.children[a].exists&&this.collideSpriteVsTilemapLayer(e.children[a],t,i,n,r,o)},separateTile:function(e,t,i,n,r){if(!t.enable)return!1;var o=n.fixedToCamera?0:n.position.x,a=n.fixedToCamera?0:n.position.y;if(!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!1;if(r)return!0;if(i.collisionCallback&&!i.collisionCallback.call(i.collisionCallbackContext,t.sprite,i))return!1;if(void 0!==i.layer.callbacks&&i.layer.callbacks[i.index]&&!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,t.sprite,i))return!1;if(!(i.faceLeft||i.faceRight||i.faceTop||i.faceBottom))return!1;var s=0,l=0,p=0,h=1;if(t.deltaAbsX()>t.deltaAbsY()?p=-1:t.deltaAbsX()<t.deltaAbsY()&&(h=-1),0!==t.deltaX()&&0!==t.deltaY()&&(i.faceLeft||i.faceRight)&&(i.faceTop||i.faceBottom)&&(p=Math.min(Math.abs(t.position.x-o-i.right),Math.abs(t.right-o-i.left)),h=Math.min(Math.abs(t.position.y-a-i.bottom),Math.abs(t.bottom-a-i.top))),p<h){if((i.faceLeft||i.faceRight)&&0!==(s=this.tileCheckX(t,i,n))&&!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!0;(i.faceTop||i.faceBottom)&&(l=this.tileCheckY(t,i,n))}else{if((i.faceTop||i.faceBottom)&&0!==(l=this.tileCheckY(t,i,n))&&!i.intersects(t.position.x-o,t.position.y-a,t.right-o,t.bottom-a))return!0;(i.faceLeft||i.faceRight)&&(s=this.tileCheckX(t,i,n))}return 0!==s||0!==l},tileCheckX:function(e,t,i){var n=0,r=i.fixedToCamera?0:i.position.x;return e.deltaX()<0&&!e.blocked.left&&t.collideRight&&e.checkCollision.left?t.faceRight&&e.x-r<t.right&&(n=e.x-r-t.right)<-this.TILE_BIAS&&(n=0):0<e.deltaX()&&!e.blocked.right&&t.collideLeft&&e.checkCollision.right&&t.faceLeft&&e.right-r>t.left&&(n=e.right-r-t.left)>this.TILE_BIAS&&(n=0),0!==n&&(e.customSeparateX?e.overlapX=n:this.processTileSeparationX(e,n)),n},tileCheckY:function(e,t,i){var n=0,r=i.fixedToCamera?0:i.position.y;return e.deltaY()<0&&!e.blocked.up&&t.collideDown&&e.checkCollision.up?t.faceBottom&&e.y-r<t.bottom&&(n=e.y-r-t.bottom)<-this.TILE_BIAS&&(n=0):0<e.deltaY()&&!e.blocked.down&&t.collideUp&&e.checkCollision.down&&t.faceTop&&e.bottom-r>t.top&&(n=e.bottom-r-t.top)>this.TILE_BIAS&&(n=0),0!==n&&(e.customSeparateY?e.overlapY=n:this.processTileSeparationY(e,n)),n},processTileSeparationX:function(e,t){t<0?e.blocked.left=!0:0<t&&(e.blocked.right=!0),e.position.x-=t,0===e.bounce.x?e.velocity.x=0:e.velocity.x=-e.velocity.x*e.bounce.x},processTileSeparationY:function(e,t){t<0?e.blocked.up=!0:0<t&&(e.blocked.down=!0),e.position.y-=t,0===e.bounce.y?e.velocity.y=0:e.velocity.y=-e.velocity.y*e.bounce.y}},U.Utils.mixinPrototype(U.Physics.Arcade.prototype,U.Physics.Arcade.TilemapCollision.prototype),p2.Body.prototype.parent=null,p2.Spring.prototype.parent=null,U.Physics.P2=function(e,t){this.game=e,void 0===t?t={gravity:[0,0],broadphase:new p2.SAPBroadphase}:(t.hasOwnProperty("gravity")||(t.gravity=[0,0]),t.hasOwnProperty("broadphase")||(t.broadphase=new p2.SAPBroadphase)),this.config=t,this.world=new p2.World(this.config),this.frameRate=1/60,this.useElapsedTime=!1,this.paused=!1,this.materials=[],this.gravity=new U.Physics.P2.InversePointProxy(this,this.world.gravity),this.walls={left:null,right:null,top:null,bottom:null},this.onBodyAdded=new U.Signal,this.onBodyRemoved=new U.Signal,this.onSpringAdded=new U.Signal,this.onSpringRemoved=new U.Signal,this.onConstraintAdded=new U.Signal,this.onConstraintRemoved=new U.Signal,this.onContactMaterialAdded=new U.Signal,this.onContactMaterialRemoved=new U.Signal,this.postBroadphaseCallback=null,this.callbackContext=null,this.onBeginContact=new U.Signal,this.onEndContact=new U.Signal,t.hasOwnProperty("mpx")&&t.hasOwnProperty("pxm")&&t.hasOwnProperty("mpxi")&&t.hasOwnProperty("pxmi")&&(this.mpx=t.mpx,this.mpxi=t.mpxi,this.pxm=t.pxm,this.pxmi=t.pxmi),this.world.on("beginContact",this.beginContactHandler,this),this.world.on("endContact",this.endContactHandler,this),this.collisionGroups=[],this.nothingCollisionGroup=new U.Physics.P2.CollisionGroup(1),this.boundsCollisionGroup=new U.Physics.P2.CollisionGroup(2),this.everythingCollisionGroup=new U.Physics.P2.CollisionGroup(2147483648),this.boundsCollidesWith=[],this._toRemove=[],this._collisionGroupID=2,this._boundsLeft=!0,this._boundsRight=!0,this._boundsTop=!0,this._boundsBottom=!0,this._boundsOwnGroup=!1,this.setBoundsToWorld(!0,!0,!0,!0,!1)},U.Physics.P2.prototype={removeBodyNextStep:function(e){this._toRemove.push(e)},preUpdate:function(){for(var e=this._toRemove.length;e--;)this.removeBody(this._toRemove[e]);this._toRemove.length=0},enable:function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=!0);var n=1;if(Array.isArray(e))for(n=e.length;n--;)e[n]instanceof U.Group?this.enable(e[n].children,t,i):(this.enableBody(e[n],t),i&&e[n].hasOwnProperty("children")&&0<e[n].children.length&&this.enable(e[n],t,!0));else e instanceof U.Group?this.enable(e.children,t,i):(this.enableBody(e,t),i&&e.hasOwnProperty("children")&&0<e.children.length&&this.enable(e.children,t,!0))},enableBody:function(e,t){e.hasOwnProperty("body")&&null===e.body&&(e.body=new U.Physics.P2.Body(this.game,e,e.x,e.y,1),e.body.debug=t,void 0!==e.anchor&&e.anchor.set(.5))},setImpactEvents:function(e){e?this.world.on("impact",this.impactHandler,this):this.world.off("impact",this.impactHandler,this)},setPostBroadphaseCallback:function(e,t){this.postBroadphaseCallback=e,this.callbackContext=t,null!==e?this.world.on("postBroadphase",this.postBroadphaseHandler,this):this.world.off("postBroadphase",this.postBroadphaseHandler,this)},postBroadphaseHandler:function(e){if(this.postBroadphaseCallback&&0!==e.pairs.length)for(var t=e.pairs.length-2;0<=t;t-=2)e.pairs[t].parent&&e.pairs[t+1].parent&&!this.postBroadphaseCallback.call(this.callbackContext,e.pairs[t].parent,e.pairs[t+1].parent)&&e.pairs.splice(t,2)},impactHandler:function(e){if(e.bodyA.parent&&e.bodyB.parent){var t=e.bodyA.parent,i=e.bodyB.parent;t._bodyCallbacks[e.bodyB.id]&&t._bodyCallbacks[e.bodyB.id].call(t._bodyCallbackContext[e.bodyB.id],t,i,e.shapeA,e.shapeB),i._bodyCallbacks[e.bodyA.id]&&i._bodyCallbacks[e.bodyA.id].call(i._bodyCallbackContext[e.bodyA.id],i,t,e.shapeB,e.shapeA),t._groupCallbacks[e.shapeB.collisionGroup]&&t._groupCallbacks[e.shapeB.collisionGroup].call(t._groupCallbackContext[e.shapeB.collisionGroup],t,i,e.shapeA,e.shapeB),i._groupCallbacks[e.shapeA.collisionGroup]&&i._groupCallbacks[e.shapeA.collisionGroup].call(i._groupCallbackContext[e.shapeA.collisionGroup],i,t,e.shapeB,e.shapeA)}},beginContactHandler:function(e){e.bodyA&&e.bodyB&&(this.onBeginContact.dispatch(e.bodyA,e.bodyB,e.shapeA,e.shapeB,e.contactEquations),e.bodyA.parent&&e.bodyA.parent.onBeginContact.dispatch(e.bodyB.parent,e.bodyB,e.shapeA,e.shapeB,e.contactEquations),e.bodyB.parent&&e.bodyB.parent.onBeginContact.dispatch(e.bodyA.parent,e.bodyA,e.shapeB,e.shapeA,e.contactEquations))},endContactHandler:function(e){e.bodyA&&e.bodyB&&(this.onEndContact.dispatch(e.bodyA,e.bodyB,e.shapeA,e.shapeB),e.bodyA.parent&&e.bodyA.parent.onEndContact.dispatch(e.bodyB.parent,e.bodyB,e.shapeA,e.shapeB),e.bodyB.parent&&e.bodyB.parent.onEndContact.dispatch(e.bodyA.parent,e.bodyA,e.shapeB,e.shapeA))},setBoundsToWorld:function(e,t,i,n,r){this.setBounds(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,e,t,i,n,r)},setWorldMaterial:function(e,t,i,n,r){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),t&&this.walls.left&&(this.walls.left.shapes[0].material=e),i&&this.walls.right&&(this.walls.right.shapes[0].material=e),n&&this.walls.top&&(this.walls.top.shapes[0].material=e),r&&this.walls.bottom&&(this.walls.bottom.shapes[0].material=e)},updateBoundsCollisionGroup:function(e){void 0===e&&(e=!0);var t=e?this.boundsCollisionGroup.mask:this.everythingCollisionGroup.mask;this.walls.left&&(this.walls.left.shapes[0].collisionGroup=t),this.walls.right&&(this.walls.right.shapes[0].collisionGroup=t),this.walls.top&&(this.walls.top.shapes[0].collisionGroup=t),this.walls.bottom&&(this.walls.bottom.shapes[0].collisionGroup=t),this._boundsOwnGroup=e},setBounds:function(e,t,i,n,r,o,a,s,l){void 0===r&&(r=this._boundsLeft),void 0===o&&(o=this._boundsRight),void 0===a&&(a=this._boundsTop),void 0===s&&(s=this._boundsBottom),void 0===l&&(l=this._boundsOwnGroup),this.setupWall(r,"left",e,t,1.5707963267948966,l),this.setupWall(o,"right",e+i,t,-1.5707963267948966,l),this.setupWall(a,"top",e,t,-3.141592653589793,l),this.setupWall(s,"bottom",e,t+n,0,l),this._boundsLeft=r,this._boundsRight=o,this._boundsTop=a,this._boundsBottom=s,this._boundsOwnGroup=l},setupWall:function(e,t,i,n,r,o){e?(this.walls[t]?this.walls[t].position=[this.pxmi(i),this.pxmi(n)]:(this.walls[t]=new p2.Body({mass:0,position:[this.pxmi(i),this.pxmi(n)],angle:r}),this.walls[t].addShape(new p2.Plane),this.world.addBody(this.walls[t])),o&&(this.walls[t].shapes[0].collisionGroup=this.boundsCollisionGroup.mask)):this.walls[t]&&(this.world.removeBody(this.walls[t]),this.walls[t]=null)},pause:function(){this.paused=!0},resume:function(){this.paused=!1},update:function(){this.paused||(this.useElapsedTime?this.world.step(this.game.time.physicsElapsed):this.world.step(this.frameRate))},reset:function(){this.world.on("beginContact",this.beginContactHandler,this),this.world.on("endContact",this.endContactHandler,this),this.nothingCollisionGroup=new U.Physics.P2.CollisionGroup(1),this.boundsCollisionGroup=new U.Physics.P2.CollisionGroup(2),this.everythingCollisionGroup=new U.Physics.P2.CollisionGroup(2147483648),this._collisionGroupID=2,this.setBoundsToWorld(!0,!0,!0,!0,!1)},clear:function(){this.world.time=0,this.world.fixedStepTime=0,this.world.solver&&this.world.solver.equations.length&&this.world.solver.removeAllEquations();for(var e=this.world.constraints,t=e.length-1;0<=t;t--)this.world.removeConstraint(e[t]);var i=this.world.bodies;for(t=i.length-1;0<=t;t--)this.world.removeBody(i[t]);var n=this.world.springs;for(t=n.length-1;0<=t;t--)this.world.removeSpring(n[t]);var r=this.world.contactMaterials;for(t=r.length-1;0<=t;t--)this.world.removeContactMaterial(r[t]);this.world.off("beginContact",this.beginContactHandler,this),this.world.off("endContact",this.endContactHandler,this),this.postBroadphaseCallback=null,this.callbackContext=null,this.impactCallback=null,this.collisionGroups=[],this._toRemove=[],this.boundsCollidesWith=[],this.walls={left:null,right:null,top:null,bottom:null}},destroy:function(){this.clear(),this.game=null},addBody:function(e){return!e.data.world&&(this.world.addBody(e.data),this.onBodyAdded.dispatch(e),!0)},removeBody:function(e){return e.data.world===this.world&&(this.world.removeBody(e.data),this.onBodyRemoved.dispatch(e)),e},addSpring:function(e){return e instanceof U.Physics.P2.Spring||e instanceof U.Physics.P2.RotationalSpring?this.world.addSpring(e.data):this.world.addSpring(e),this.onSpringAdded.dispatch(e),e},removeSpring:function(e){return e instanceof U.Physics.P2.Spring||e instanceof U.Physics.P2.RotationalSpring?this.world.removeSpring(e.data):this.world.removeSpring(e),this.onSpringRemoved.dispatch(e),e},createDistanceConstraint:function(e,t,i,n,r,o){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.DistanceConstraint(this,e,t,i,n,r,o))},createGearConstraint:function(e,t,i,n){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.GearConstraint(this,e,t,i,n))},createRevoluteConstraint:function(e,t,i,n,r,o){if(e=this.getBody(e),i=this.getBody(i),e&&i)return this.addConstraint(new U.Physics.P2.RevoluteConstraint(this,e,t,i,n,r,o))},createLockConstraint:function(e,t,i,n,r){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.LockConstraint(this,e,t,i,n,r))},createPrismaticConstraint:function(e,t,i,n,r,o,a){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addConstraint(new U.Physics.P2.PrismaticConstraint(this,e,t,i,n,r,o,a))},addConstraint:function(e){return this.world.addConstraint(e),this.onConstraintAdded.dispatch(e),e},removeConstraint:function(e){return this.world.removeConstraint(e),this.onConstraintRemoved.dispatch(e),e},addContactMaterial:function(e){return this.world.addContactMaterial(e),this.onContactMaterialAdded.dispatch(e),e},removeContactMaterial:function(e){return this.world.removeContactMaterial(e),this.onContactMaterialRemoved.dispatch(e),e},getContactMaterial:function(e,t){return this.world.getContactMaterial(e,t)},setMaterial:function(e,t){for(var i=t.length;i--;)t[i].setMaterial(e)},createMaterial:function(e,t){e=e||"";var i=new U.Physics.P2.Material(e);return this.materials.push(i),void 0!==t&&t.setMaterial(i),i},createContactMaterial:function(e,t,i){void 0===e&&(e=this.createMaterial()),void 0===t&&(t=this.createMaterial());var n=new U.Physics.P2.ContactMaterial(e,t,i);return this.addContactMaterial(n)},getBodies:function(){for(var e=[],t=this.world.bodies.length;t--;)e.push(this.world.bodies[t].parent);return e},getBody:function(e){return e instanceof p2.Body?e:e instanceof U.Physics.P2.Body?e.data:e.body&&e.body.type===U.Physics.P2JS?e.body.data:null},getSprings:function(){for(var e=[],t=this.world.springs.length;t--;)e.push(this.world.springs[t].parent);return e},getConstraints:function(){for(var e=[],t=this.world.constraints.length;t--;)e.push(this.world.constraints[t]);return e},hitTest:function(e,t,i,n){void 0===t&&(t=this.world.bodies),void 0===i&&(i=5),void 0===n&&(n=!1);for(var r=[this.pxmi(e.x),this.pxmi(e.y)],o=[],a=t.length;a--;)t[a]instanceof U.Physics.P2.Body&&(!n||t[a].data.type!==p2.Body.STATIC)?o.push(t[a].data):t[a]instanceof p2.Body&&t[a].parent&&(!n||t[a].type!==p2.Body.STATIC)?o.push(t[a]):t[a]instanceof U.Sprite&&t[a].hasOwnProperty("body")&&(!n||t[a].body.data.type!==p2.Body.STATIC)&&o.push(t[a].body.data);return this.world.hitTest(r,o,i)},toJSON:function(){return this.world.toJSON()},createCollisionGroup:function(e){var t=Math.pow(2,this._collisionGroupID);this.walls.left&&(this.walls.left.shapes[0].collisionMask=this.walls.left.shapes[0].collisionMask|t),this.walls.right&&(this.walls.right.shapes[0].collisionMask=this.walls.right.shapes[0].collisionMask|t),this.walls.top&&(this.walls.top.shapes[0].collisionMask=this.walls.top.shapes[0].collisionMask|t),this.walls.bottom&&(this.walls.bottom.shapes[0].collisionMask=this.walls.bottom.shapes[0].collisionMask|t),this._collisionGroupID++;var i=new U.Physics.P2.CollisionGroup(t);return this.collisionGroups.push(i),e&&this.setCollisionGroup(e,i),i},setCollisionGroup:function(e,t){if(e instanceof U.Group)for(var i=0;i<e.total;i++)e.children[i].body&&e.children[i].body.type===U.Physics.P2JS&&e.children[i].body.setCollisionGroup(t);else e.body.setCollisionGroup(t)},createSpring:function(e,t,i,n,r,o,a,s,l){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addSpring(new U.Physics.P2.Spring(this,e,t,i,n,r,o,a,s,l))},createRotationalSpring:function(e,t,i,n,r){if(e=this.getBody(e),t=this.getBody(t),e&&t)return this.addSpring(new U.Physics.P2.RotationalSpring(this,e,t,i,n,r))},createBody:function(e,t,i,n,r,o){void 0===n&&(n=!1);var a=new U.Physics.P2.Body(this.game,null,e,t,i);return!(o&&!a.addPolygon(r,o))&&(n&&this.world.addBody(a.data),a)},createParticle:function(e,t,i,n,r,o){void 0===n&&(n=!1);var a=new U.Physics.P2.Body(this.game,null,e,t,i);return!(o&&!a.addPolygon(r,o))&&(n&&this.world.addBody(a.data),a)},convertCollisionObjects:function(e,t,i){void 0===i&&(i=!0);for(var n=[],r=0,o=e.collision[t].length;r<o;r++){var a=e.collision[t][r],s=this.createBody(a.x,a.y,0,i,{},a.polyline);s&&n.push(s)}return n},clearTilemapLayerBodies:function(e,t){t=e.getLayer(t);for(var i=e.layers[t].bodies.length;i--;)e.layers[t].bodies[i].destroy();e.layers[t].bodies.length=0},convertTilemap:function(e,t,i,n){t=e.getLayer(t),void 0===i&&(i=!0),void 0===n&&(n=!0),this.clearTilemapLayerBodies(e,t);for(var r=0,o=0,a=0,s=0,l=e.layers[t].height;s<l;s++)for(var p=r=0,h=e.layers[t].width;p<h;p++){var u=e.layers[t].data[s][p];if(u&&-1<u.index&&u.collides)if(n){var c=e.getTileRight(t,p,s);if(0===r&&(o=u.x*u.width,a=u.y*u.height,r=u.width),c&&c.collides)r+=u.width;else(d=this.createBody(o,a,0,!1)).addRectangle(r,u.height,r/2,u.height/2,0),i&&this.addBody(d),e.layers[t].bodies.push(d),r=0}else{var d;(d=this.createBody(u.x*u.width,u.y*u.height,0,!1)).addRectangle(u.width,u.height,u.width/2,u.height/2,0),i&&this.addBody(d),e.layers[t].bodies.push(d)}}return e.layers[t].bodies},mpx:function(e){return 20*e},pxm:function(e){return.05*e},mpxi:function(e){return-20*e},pxmi:function(e){return-.05*e}},Object.defineProperty(U.Physics.P2.prototype,"friction",{get:function(){return this.world.defaultContactMaterial.friction},set:function(e){this.world.defaultContactMaterial.friction=e}}),Object.defineProperty(U.Physics.P2.prototype,"restitution",{get:function(){return this.world.defaultContactMaterial.restitution},set:function(e){this.world.defaultContactMaterial.restitution=e}}),Object.defineProperty(U.Physics.P2.prototype,"contactMaterial",{get:function(){return this.world.defaultContactMaterial},set:function(e){this.world.defaultContactMaterial=e}}),Object.defineProperty(U.Physics.P2.prototype,"applySpringForces",{get:function(){return this.world.applySpringForces},set:function(e){this.world.applySpringForces=e}}),Object.defineProperty(U.Physics.P2.prototype,"applyDamping",{get:function(){return this.world.applyDamping},set:function(e){this.world.applyDamping=e}}),Object.defineProperty(U.Physics.P2.prototype,"applyGravity",{get:function(){return this.world.applyGravity},set:function(e){this.world.applyGravity=e}}),Object.defineProperty(U.Physics.P2.prototype,"solveConstraints",{get:function(){return this.world.solveConstraints},set:function(e){this.world.solveConstraints=e}}),Object.defineProperty(U.Physics.P2.prototype,"time",{get:function(){return this.world.time}}),Object.defineProperty(U.Physics.P2.prototype,"emitImpactEvent",{get:function(){return this.world.emitImpactEvent},set:function(e){this.world.emitImpactEvent=e}}),Object.defineProperty(U.Physics.P2.prototype,"sleepMode",{get:function(){return this.world.sleepMode},set:function(e){this.world.sleepMode=e}}),Object.defineProperty(U.Physics.P2.prototype,"total",{get:function(){return this.world.bodies.length}}),U.Physics.P2.FixtureList=function(e){Array.isArray(e)||(e=[e]),this.rawList=e,this.init(),this.parse(this.rawList)},U.Physics.P2.FixtureList.prototype={init:function(){this.namedFixtures={},this.groupedFixtures=[],this.allFixtures=[]},setCategory:function(t,e){this.getFixtures(e).forEach(function(e){e.collisionGroup=t})},setMask:function(t,e){this.getFixtures(e).forEach(function(e){e.collisionMask=t})},setSensor:function(t,e){this.getFixtures(e).forEach(function(e){e.sensor=t})},setMaterial:function(t,e){this.getFixtures(e).forEach(function(e){e.material=t})},getFixtures:function(e){var t=[];if(e){e instanceof Array||(e=[e]);var i=this;return e.forEach(function(e){i.namedFixtures[e]&&t.push(i.namedFixtures[e])}),this.flatten(t)}return this.allFixtures},getFixtureByKey:function(e){return this.namedFixtures[e]},getGroup:function(e){return this.groupedFixtures[e]},parse:function(){var e,t,i,n;for(e in n=[],i=this.rawList)t=i[e],isNaN(e-0)?this.namedFixtures[e]=this.flatten(t):(this.groupedFixtures[e]=this.groupedFixtures[e]||[],this.groupedFixtures[e]=this.groupedFixtures[e].concat(t)),n.push(this.allFixtures=this.flatten(this.groupedFixtures))},flatten:function(e){var t,i;return t=[],i=arguments.callee,e.forEach(function(e){return Array.prototype.push.apply(t,Array.isArray(e)?i(e):[e])}),t}},U.Physics.P2.PointProxy=function(e,t){this.world=e,this.destination=t},U.Physics.P2.PointProxy.prototype.constructor=U.Physics.P2.PointProxy,Object.defineProperty(U.Physics.P2.PointProxy.prototype,"x",{get:function(){return this.world.mpx(this.destination[0])},set:function(e){this.destination[0]=this.world.pxm(e)}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"y",{get:function(){return this.world.mpx(this.destination[1])},set:function(e){this.destination[1]=this.world.pxm(e)}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"mx",{get:function(){return this.destination[0]},set:function(e){this.destination[0]=e}}),Object.defineProperty(U.Physics.P2.PointProxy.prototype,"my",{get:function(){return this.destination[1]},set:function(e){this.destination[1]=e}}),U.Physics.P2.InversePointProxy=function(e,t){this.world=e,this.destination=t},U.Physics.P2.InversePointProxy.prototype.constructor=U.Physics.P2.InversePointProxy,Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"x",{get:function(){return this.world.mpxi(this.destination[0])},set:function(e){this.destination[0]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"y",{get:function(){return this.world.mpxi(this.destination[1])},set:function(e){this.destination[1]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"mx",{get:function(){return this.destination[0]},set:function(e){this.destination[0]=-e}}),Object.defineProperty(U.Physics.P2.InversePointProxy.prototype,"my",{get:function(){return this.destination[1]},set:function(e){this.destination[1]=-e}}),U.Physics.P2.Body=function(e,t,i,n,r){t=t||null,i=i||0,n=n||0,void 0===r&&(r=1),this.game=e,this.world=e.physics.p2,this.sprite=t,this.type=U.Physics.P2JS,this.offset=new U.Point,this.data=new p2.Body({position:[this.world.pxmi(i),this.world.pxmi(n)],mass:r}),(this.data.parent=this).velocity=new U.Physics.P2.InversePointProxy(this.world,this.data.velocity),this.force=new U.Physics.P2.InversePointProxy(this.world,this.data.force),this.gravity=new U.Point,this.onBeginContact=new U.Signal,this.onEndContact=new U.Signal,this.collidesWith=[],this.removeNextStep=!1,this.debugBody=null,this.dirty=!1,this._collideWorldBounds=!0,this._bodyCallbacks={},this._bodyCallbackContext={},this._groupCallbacks={},this._groupCallbackContext={},this._reset=!1,t&&(this.setRectangleFromSprite(t),t.exists&&this.game.physics.p2.addBody(this))},U.Physics.P2.Body.prototype={createBodyCallback:function(e,t,i){var n=-1;e.id?n=e.id:e.body&&(n=e.body.id),-1<n&&(null===t?(delete this._bodyCallbacks[n],delete this._bodyCallbackContext[n]):(this._bodyCallbacks[n]=t,this._bodyCallbackContext[n]=i))},createGroupCallback:function(e,t,i){null===t?(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]):(this._groupCallbacks[e.mask]=t,this._groupCallbackContext[e.mask]=i)},getCollisionMask:function(){var e=0;this._collideWorldBounds&&(e=this.game.physics.p2.boundsCollisionGroup.mask);for(var t=0;t<this.collidesWith.length;t++)e|=this.collidesWith[t].mask;return e},updateCollisionMask:function(e){var t=this.getCollisionMask();if(void 0===e)for(var i=this.data.shapes.length-1;0<=i;i--)this.data.shapes[i].collisionMask=t;else e.collisionMask=t},setCollisionGroup:function(e,t){var i=this.getCollisionMask();if(void 0===t)for(var n=this.data.shapes.length-1;0<=n;n--)this.data.shapes[n].collisionGroup=e.mask,this.data.shapes[n].collisionMask=i;else t.collisionGroup=e.mask,t.collisionMask=i},clearCollision:function(e,t,i){if(void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i)for(var n=this.data.shapes.length-1;0<=n;n--)e&&(this.data.shapes[n].collisionGroup=null),t&&(this.data.shapes[n].collisionMask=null);else e&&(i.collisionGroup=null),t&&(i.collisionMask=null);e&&(this.collidesWith.length=0)},removeCollisionGroup:function(e,t,i){var n;if(void 0===t&&(t=!0),Array.isArray(e))for(var r=0;r<e.length;r++)-1<(n=this.collidesWith.indexOf(e[r]))&&(this.collidesWith.splice(n,1),t&&(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]));else-1<(n=this.collidesWith.indexOf(e))&&(this.collidesWith.splice(n,1),t&&(delete this._groupCallbacks[e.mask],delete this._groupCallbackContext[e.mask]));var o=this.getCollisionMask();if(void 0===i)for(r=this.data.shapes.length-1;0<=r;r--)this.data.shapes[r].collisionMask=o;else i.collisionMask=o},collides:function(e,t,i,n){if(Array.isArray(e))for(var r=0;r<e.length;r++)-1===this.collidesWith.indexOf(e[r])&&(this.collidesWith.push(e[r]),t&&this.createGroupCallback(e[r],t,i));else-1===this.collidesWith.indexOf(e)&&(this.collidesWith.push(e),t&&this.createGroupCallback(e,t,i));var o=this.getCollisionMask();if(void 0===n)for(r=this.data.shapes.length-1;0<=r;r--)this.data.shapes[r].collisionMask=o;else n.collisionMask=o},adjustCenterOfMass:function(){this.data.adjustCenterOfMass(),this.shapeChanged()},getVelocityAtPoint:function(e,t){return this.data.getVelocityAtPoint(e,t)},applyDamping:function(e){this.data.applyDamping(e)},applyImpulse:function(e,t,i){this.data.applyImpulse(e,[this.world.pxmi(t),this.world.pxmi(i)])},applyImpulseLocal:function(e,t,i){this.data.applyImpulseLocal(e,[this.world.pxmi(t),this.world.pxmi(i)])},applyForce:function(e,t,i){this.data.applyForce(e,[this.world.pxmi(t),this.world.pxmi(i)])},setZeroForce:function(){this.data.setZeroForce()},setZeroRotation:function(){this.data.angularVelocity=0},setZeroVelocity:function(){this.data.velocity[0]=0,this.data.velocity[1]=0},setZeroDamping:function(){this.data.damping=0,this.data.angularDamping=0},toLocalFrame:function(e,t){return this.data.toLocalFrame(e,t)},toWorldFrame:function(e,t){return this.data.toWorldFrame(e,t)},rotateLeft:function(e){this.data.angularVelocity=this.world.pxm(-e)},rotateRight:function(e){this.data.angularVelocity=this.world.pxm(e)},moveForward:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.velocity[0]=t*Math.cos(i),this.data.velocity[1]=t*Math.sin(i)},moveBackward:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.velocity[0]=-t*Math.cos(i),this.data.velocity[1]=-t*Math.sin(i)},thrust:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.force[0]+=t*Math.cos(i),this.data.force[1]+=t*Math.sin(i)},thrustLeft:function(e){var t=this.world.pxmi(-e),i=this.data.angle;this.data.force[0]+=t*Math.cos(i),this.data.force[1]+=t*Math.sin(i)},thrustRight:function(e){var t=this.world.pxmi(-e),i=this.data.angle;this.data.force[0]-=t*Math.cos(i),this.data.force[1]-=t*Math.sin(i)},reverse:function(e){var t=this.world.pxmi(-e),i=this.data.angle+Math.PI/2;this.data.force[0]-=t*Math.cos(i),this.data.force[1]-=t*Math.sin(i)},moveLeft:function(e){this.data.velocity[0]=this.world.pxmi(-e)},moveRight:function(e){this.data.velocity[0]=this.world.pxmi(e)},moveUp:function(e){this.data.velocity[1]=this.world.pxmi(-e)},moveDown:function(e){this.data.velocity[1]=this.world.pxmi(e)},preUpdate:function(){this.dirty=!0,this.removeNextStep&&(this.removeFromWorld(),this.removeNextStep=!1)},postUpdate:function(){this.sprite.x=this.world.mpxi(this.data.position[0])+this.offset.x,this.sprite.y=this.world.mpxi(this.data.position[1])+this.offset.y,this.fixedRotation||(this.sprite.rotation=this.data.angle),this.debugBody&&this.debugBody.updateSpriteTransform(),this.dirty=!1},reset:function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),this.setZeroForce(),this.setZeroVelocity(),this.setZeroRotation(),i&&this.setZeroDamping(),n&&(this.mass=1),this.x=e,this.y=t},addToWorld:function(){if(this.game.physics.p2._toRemove)for(var e=0;e<this.game.physics.p2._toRemove.length;e++)this.game.physics.p2._toRemove[e]===this&&this.game.physics.p2._toRemove.splice(e,1);this.data.world!==this.game.physics.p2.world&&this.game.physics.p2.addBody(this)},removeFromWorld:function(){this.data.world===this.game.physics.p2.world&&this.game.physics.p2.removeBodyNextStep(this)},destroy:function(){this.removeFromWorld(),this.clearShapes(),this._bodyCallbacks={},this._bodyCallbackContext={},this._groupCallbacks={},this._groupCallbackContext={},this.debugBody&&this.debugBody.destroy(!0,!0),this.debugBody=null,this.sprite&&(this.sprite.body=null,this.sprite=null)},clearShapes:function(){for(var e=this.data.shapes.length;e--;)this.data.removeShape(this.data.shapes[e]);this.shapeChanged()},addShape:function(e,t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),this.data.addShape(e,[this.world.pxmi(t),this.world.pxmi(i)],n),this.shapeChanged(),e},addCircle:function(e,t,i,n){var r=new p2.Circle({radius:this.world.pxm(e)});return this.addShape(r,t,i,n)},addRectangle:function(e,t,i,n,r){var o=new p2.Box({width:this.world.pxm(e),height:this.world.pxm(t)});return this.addShape(o,i,n,r)},addPlane:function(e,t,i){var n=new p2.Plane;return this.addShape(n,e,t,i)},addParticle:function(e,t,i){var n=new p2.Particle;return this.addShape(n,e,t,i)},addLine:function(e,t,i,n){var r=new p2.Line({length:this.world.pxm(e)});return this.addShape(r,t,i,n)},addCapsule:function(e,t,i,n,r){var o=new p2.Capsule({length:this.world.pxm(e),radius:this.world.pxm(t)});return this.addShape(o,i,n,r)},addPolygon:function(e,t){e=e||{},Array.isArray(t)||(t=Array.prototype.slice.call(arguments,1));var i=[];if(1===t.length&&Array.isArray(t[0]))i=t[0].slice(0);else if(Array.isArray(t[0]))i=t.slice();else if("number"==typeof t[0])for(var n=0,r=t.length;n<r;n+=2)i.push([t[n],t[n+1]]);var o=i.length-1;i[o][0]===i[0][0]&&i[o][1]===i[0][1]&&i.pop();for(var a=0;a<i.length;a++)i[a][0]=this.world.pxmi(i[a][0]),i[a][1]=this.world.pxmi(i[a][1]);var s=this.data.fromPolygon(i,e);return this.shapeChanged(),s},removeShape:function(e){var t=this.data.removeShape(e);return this.shapeChanged(),t},setCircle:function(e,t,i,n){return this.clearShapes(),this.addCircle(e,t,i,n)},setRectangle:function(e,t,i,n,r){return void 0===e&&(e=16),void 0===t&&(t=16),this.clearShapes(),this.addRectangle(e,t,i,n,r)},setRectangleFromSprite:function(e){return void 0===e&&(e=this.sprite),this.clearShapes(),this.addRectangle(e.width,e.height,0,0,e.rotation)},setMaterial:function(e,t){if(void 0===t)for(var i=this.data.shapes.length-1;0<=i;i--)this.data.shapes[i].material=e;else t.material=e},shapeChanged:function(){this.debugBody&&this.debugBody.draw()},addPhaserPolygon:function(e,t){for(var i=this.game.cache.getPhysicsData(e,t),n=[],r=0;r<i.length;r++){var o=i[r],a=this.addFixture(o);n[o.filter.group]=n[o.filter.group]||[],n[o.filter.group]=n[o.filter.group].concat(a),o.fixtureKey&&(n[o.fixtureKey]=a)}return this.data.aabbNeedsUpdate=!0,this.shapeChanged(),n},addFixture:function(e){var t=[];if(e.circle){(p=new p2.Circle({radius:this.world.pxm(e.circle.radius)})).collisionGroup=e.filter.categoryBits,p.collisionMask=e.filter.maskBits,p.sensor=e.isSensor;var i=p2.vec2.create();i[0]=this.world.pxmi(e.circle.position[0]-this.sprite.width/2),i[1]=this.world.pxmi(e.circle.position[1]-this.sprite.height/2),this.data.addShape(p,i),t.push(p)}else for(var n=e.polygons,r=p2.vec2.create(),o=0;o<n.length;o++){for(var a=n[o],s=[],l=0;l<a.length;l+=2)s.push([this.world.pxmi(a[l]),this.world.pxmi(a[l+1])]);for(var p=new p2.Convex({vertices:s}),h=0;h!==p.vertices.length;h++){var u=p.vertices[h];p2.vec2.sub(u,u,p.centerOfMass)}p2.vec2.scale(r,p.centerOfMass,1),r[0]-=this.world.pxmi(this.sprite.width/2),r[1]-=this.world.pxmi(this.sprite.height/2),p.updateTriangles(),p.updateCenterOfMass(),p.updateBoundingRadius(),p.collisionGroup=e.filter.categoryBits,p.collisionMask=e.filter.maskBits,p.sensor=e.isSensor,this.data.addShape(p,r),t.push(p)}return t},loadPolygon:function(e,t){if(null===e)var i=t;else i=this.game.cache.getPhysicsData(e,t);for(var n=p2.vec2.create(),r=0;r<i.length;r++){for(var o=[],a=0;a<i[r].shape.length;a+=2)o.push([this.world.pxmi(i[r].shape[a]),this.world.pxmi(i[r].shape[a+1])]);for(var s=new p2.Convex({vertices:o}),l=0;l!==s.vertices.length;l++){var p=s.vertices[l];p2.vec2.sub(p,p,s.centerOfMass)}p2.vec2.scale(n,s.centerOfMass,1),n[0]-=this.world.pxmi(this.sprite.width/2),n[1]-=this.world.pxmi(this.sprite.height/2),s.updateTriangles(),s.updateCenterOfMass(),s.updateBoundingRadius(),this.data.addShape(s,n)}return this.data.aabbNeedsUpdate=!0,this.shapeChanged(),!0}},U.Physics.P2.Body.prototype.constructor=U.Physics.P2.Body,U.Physics.P2.Body.DYNAMIC=1,U.Physics.P2.Body.STATIC=2,U.Physics.P2.Body.KINEMATIC=4,Object.defineProperty(U.Physics.P2.Body.prototype,"static",{get:function(){return this.data.type===U.Physics.P2.Body.STATIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.STATIC?(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0):e||this.data.type!==U.Physics.P2.Body.STATIC||(this.data.type=U.Physics.P2.Body.DYNAMIC,this.mass=1)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"dynamic",{get:function(){return this.data.type===U.Physics.P2.Body.DYNAMIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.DYNAMIC?(this.data.type=U.Physics.P2.Body.DYNAMIC,this.mass=1):e||this.data.type!==U.Physics.P2.Body.DYNAMIC||(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"kinematic",{get:function(){return this.data.type===U.Physics.P2.Body.KINEMATIC},set:function(e){e&&this.data.type!==U.Physics.P2.Body.KINEMATIC?(this.data.type=U.Physics.P2.Body.KINEMATIC,this.mass=4):e||this.data.type!==U.Physics.P2.Body.KINEMATIC||(this.data.type=U.Physics.P2.Body.STATIC,this.mass=0)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"allowSleep",{get:function(){return this.data.allowSleep},set:function(e){e!==this.data.allowSleep&&(this.data.allowSleep=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angle",{get:function(){return U.Math.wrapAngle(U.Math.radToDeg(this.data.angle))},set:function(e){this.data.angle=U.Math.degToRad(U.Math.wrapAngle(e))}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularDamping",{get:function(){return this.data.angularDamping},set:function(e){this.data.angularDamping=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularForce",{get:function(){return this.data.angularForce},set:function(e){this.data.angularForce=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"angularVelocity",{get:function(){return this.data.angularVelocity},set:function(e){this.data.angularVelocity=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"damping",{get:function(){return this.data.damping},set:function(e){this.data.damping=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"fixedRotation",{get:function(){return this.data.fixedRotation},set:function(e){e!==this.data.fixedRotation&&(this.data.fixedRotation=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"inertia",{get:function(){return this.data.inertia},set:function(e){this.data.inertia=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"mass",{get:function(){return this.data.mass},set:function(e){e!==this.data.mass&&(this.data.mass=e,this.data.updateMassProperties())}}),Object.defineProperty(U.Physics.P2.Body.prototype,"motionState",{get:function(){return this.data.type},set:function(e){e!==this.data.type&&(this.data.type=e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"rotation",{get:function(){return this.data.angle},set:function(e){this.data.angle=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"sleepSpeedLimit",{get:function(){return this.data.sleepSpeedLimit},set:function(e){this.data.sleepSpeedLimit=e}}),Object.defineProperty(U.Physics.P2.Body.prototype,"x",{get:function(){return this.world.mpxi(this.data.position[0])},set:function(e){this.data.position[0]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"y",{get:function(){return this.world.mpxi(this.data.position[1])},set:function(e){this.data.position[1]=this.world.pxmi(e)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"id",{get:function(){return this.data.id}}),Object.defineProperty(U.Physics.P2.Body.prototype,"debug",{get:function(){return null!==this.debugBody},set:function(e){e&&!this.debugBody?this.debugBody=new U.Physics.P2.BodyDebug(this.game,this.data):!e&&this.debugBody&&(this.debugBody.destroy(),this.debugBody=null)}}),Object.defineProperty(U.Physics.P2.Body.prototype,"collideWorldBounds",{get:function(){return this._collideWorldBounds},set:function(e){e&&!this._collideWorldBounds?(this._collideWorldBounds=!0,this.updateCollisionMask()):!e&&this._collideWorldBounds&&(this._collideWorldBounds=!1,this.updateCollisionMask())}}),U.Physics.P2.BodyDebug=function(e,t,i){U.Group.call(this,e);var n={pixelsPerLengthUnit:e.physics.p2.mpx(1),debugPolygons:!1,lineWidth:1,alpha:.5};this.settings=U.Utils.extend(n,i),this.ppu=this.settings.pixelsPerLengthUnit,this.ppu=-1*this.ppu,this.body=t,this.canvas=new U.Graphics(e),this.canvas.alpha=this.settings.alpha,this.add(this.canvas),this.draw(),this.updateSpriteTransform()},U.Physics.P2.BodyDebug.prototype=Object.create(U.Group.prototype),U.Physics.P2.BodyDebug.prototype.constructor=U.Physics.P2.BodyDebug,U.Utils.extend(U.Physics.P2.BodyDebug.prototype,{updateSpriteTransform:function(){this.position.x=this.body.position[0]*this.ppu,this.position.y=this.body.position[1]*this.ppu,this.rotation=this.body.angle},draw:function(){var e,t,i,n,r,o,a,s,l,p,h,u,c,d,_;if(s=this.body,(p=this.canvas).clear(),i=parseInt(this.randomPastelHex(),16),o=16711680,a=this.lineWidth,s instanceof p2.Body&&s.shapes.length){var y=s.shapes.length;for(n=0;n!==y;){if(l=(t=s.shapes[n]).position||0,e=t.angle||0,t instanceof p2.Circle)this.drawCircle(p,l[0]*this.ppu,l[1]*this.ppu,e,t.radius*this.ppu,i,a);else if(t instanceof p2.Capsule)this.drawCapsule(p,l[0]*this.ppu,l[1]*this.ppu,e,t.length*this.ppu,t.radius*this.ppu,o,i,a);else if(t instanceof p2.Plane)this.drawPlane(p,l[0]*this.ppu,-l[1]*this.ppu,i,o,5*a,10*a,10*a,100*this.ppu,e);else if(t instanceof p2.Line)this.drawLine(p,t.length*this.ppu,o,a);else if(t instanceof p2.Box)this.drawRectangle(p,l[0]*this.ppu,l[1]*this.ppu,e,t.width*this.ppu,t.height*this.ppu,o,i,a);else if(t instanceof p2.Convex){for(u=[],c=p2.vec2.create(),r=d=0,_=t.vertices.length;0<=_?d<_:_<d;r=0<=_?++d:--d)h=t.vertices[r],p2.vec2.rotate(c,h,e),u.push([(c[0]+l[0])*this.ppu,-(c[1]+l[1])*this.ppu]);this.drawConvex(p,u,t.triangles,o,i,a,this.settings.debugPolygons,[l[0]*this.ppu,-l[1]*this.ppu])}n++}}},drawRectangle:function(e,t,i,n,r,o,a,s,l){void 0===l&&(l=1),void 0===a&&(a=0),e.lineStyle(l,a,1),e.beginFill(s),e.drawRect(t-r/2,i-o/2,r,o)},drawCircle:function(e,t,i,n,r,o,a){void 0===a&&(a=1),void 0===o&&(o=16777215),e.lineStyle(a,0,1),e.beginFill(o,1),e.drawCircle(t,i,2*-r),e.endFill(),e.moveTo(t,i),e.lineTo(t+r*Math.cos(-n),i+r*Math.sin(-n))},drawLine:function(e,t,i,n){void 0===n&&(n=1),void 0===i&&(i=0),e.lineStyle(5*n,i,1),e.moveTo(-t/2,0),e.lineTo(t/2,0)},drawConvex:function(e,t,i,n,r,o,a,s){var l,p,h,u,c,d,_,y,m,f,x;if(void 0===o&&(o=1),void 0===n&&(n=0),a){for(l=[16711680,65280,255],p=0;p!==t.length+1;)u=t[p%t.length],c=t[(p+1)%t.length],_=u[0],f=u[1],y=c[0],x=c[1],e.lineStyle(o,l[p%l.length],1),e.moveTo(_,-f),e.lineTo(y,-x),e.drawCircle(_,-f,2*o),p++;return e.lineStyle(o,0,1),e.drawCircle(s[0],s[1],2*o)}for(e.lineStyle(o,n,1),e.beginFill(r),p=0;p!==t.length;)d=(h=t[p])[0],m=h[1],0===p?e.moveTo(d,-m):e.lineTo(d,-m),p++;if(e.endFill(),2<t.length)return e.moveTo(t[t.length-1][0],-t[t.length-1][1]),e.lineTo(t[0][0],-t[0][1])},drawPath:function(e,t,i,n,r){var o,a,s,l,p,h,u,c,d,_,y;for(void 0===r&&(r=1),void 0===i&&(i=0),e.lineStyle(r,i,1),"number"==typeof n&&e.beginFill(n),s=a=null,o=0;o<t.length;)_=(d=t[o])[0],y=d[1],_===a&&y===s||(0===o?e.moveTo(_,y):(l=a,p=s,h=_,u=y,c=t[(o+1)%t.length][0],0!=(h-l)*(t[(o+1)%t.length][1]-p)-(c-l)*(u-p)&&e.lineTo(_,y)),a=_,s=y),o++;"number"==typeof n&&e.endFill(),2<t.length&&"number"==typeof n&&(e.moveTo(t[t.length-1][0],t[t.length-1][1]),e.lineTo(t[0][0],t[0][1]))},drawPlane:function(e,t,i,n,r,o,a,s,l,p){var h,u;void 0===o&&(o=1),void 0===n&&(n=16777215),e.lineStyle(o,r,11),e.beginFill(n),e.moveTo(t,-i),h=t+Math.cos(p)*this.game.width,u=i+Math.sin(p)*this.game.height,e.lineTo(h,-u),e.moveTo(t,-i),h=t+Math.cos(p)*-this.game.width,u=i+Math.sin(p)*-this.game.height,e.lineTo(h,-u)},drawCapsule:function(e,t,i,n,r,o,a,s,l){void 0===l&&(l=1),void 0===a&&(a=0),e.lineStyle(l,a,1);var p=Math.cos(n),h=Math.sin(n);e.beginFill(s,1),e.drawCircle(-r/2*p+t,-r/2*h+i,2*-o),e.drawCircle(r/2*p+t,r/2*h+i,2*-o),e.endFill(),e.lineStyle(l,a,0),e.beginFill(s,1),e.moveTo(-r/2*p+o*h+t,-r/2*h+o*p+i),e.lineTo(r/2*p+o*h+t,r/2*h+o*p+i),e.lineTo(r/2*p-o*h+t,r/2*h-o*p+i),e.lineTo(-r/2*p-o*h+t,-r/2*h-o*p+i),e.endFill(),e.lineStyle(l,a,1),e.moveTo(-r/2*p+o*h+t,-r/2*h+o*p+i),e.lineTo(r/2*p+o*h+t,r/2*h+o*p+i),e.moveTo(-r/2*p-o*h+t,-r/2*h-o*p+i),e.lineTo(r/2*p-o*h+t,r/2*h-o*p+i)},randomPastelHex:function(){var e,t,i,n;return i=[255,255,255],n=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor((n+3*i[0])/4),t=Math.floor((t+3*i[1])/4),e=Math.floor((e+3*i[2])/4),this.rgbToHex(n,t,e)},rgbToHex:function(e,t,i){return this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(i)},componentToHex:function(e){var t;return 2===(t=e.toString(16)).length?t:t+"0"}}),U.Physics.P2.Spring=function(e,t,i,n,r,o,a,s,l,p){this.game=e.game,void 0===n&&(n=1),void 0===r&&(r=100),void 0===o&&(o=1);var h={restLength:n=(this.world=e).pxm(n),stiffness:r,damping:o};null!=a&&(h.worldAnchorA=[e.pxm(a[0]),e.pxm(a[1])]),null!=s&&(h.worldAnchorB=[e.pxm(s[0]),e.pxm(s[1])]),null!=l&&(h.localAnchorA=[e.pxm(l[0]),e.pxm(l[1])]),null!=p&&(h.localAnchorB=[e.pxm(p[0]),e.pxm(p[1])]),this.data=new p2.LinearSpring(t,i,h),this.data.parent=this},U.Physics.P2.Spring.prototype.constructor=U.Physics.P2.Spring,U.Physics.P2.RotationalSpring=function(e,t,i,n,r,o){this.game=e.game,this.world=e,void 0===n&&(n=null),void 0===r&&(r=100),void 0===o&&(o=1),n&&(n=e.pxm(n));var a={restAngle:n,stiffness:r,damping:o};this.data=new p2.RotationalSpring(t,i,a),this.data.parent=this},U.Physics.P2.Spring.prototype.constructor=U.Physics.P2.Spring,U.Physics.P2.Material=function(e){this.name=e,p2.Material.call(this)},U.Physics.P2.Material.prototype=Object.create(p2.Material.prototype),U.Physics.P2.Material.prototype.constructor=U.Physics.P2.Material,U.Physics.P2.ContactMaterial=function(e,t,i){p2.ContactMaterial.call(this,e,t,i)},U.Physics.P2.ContactMaterial.prototype=Object.create(p2.ContactMaterial.prototype),U.Physics.P2.ContactMaterial.prototype.constructor=U.Physics.P2.ContactMaterial,U.Physics.P2.CollisionGroup=function(e){this.mask=e},U.Physics.P2.DistanceConstraint=function(e,t,i,n,r,o,a){void 0===n&&(n=100),void 0===r&&(r=[0,0]),void 0===o&&(o=[0,0]),void 0===a&&(a=Number.MAX_VALUE),this.game=e.game;var s={distance:n=(this.world=e).pxm(n),localAnchorA:r=[e.pxmi(r[0]),e.pxmi(r[1])],localAnchorB:o=[e.pxmi(o[0]),e.pxmi(o[1])],maxForce:a};p2.DistanceConstraint.call(this,t,i,s)},U.Physics.P2.DistanceConstraint.prototype=Object.create(p2.DistanceConstraint.prototype),U.Physics.P2.DistanceConstraint.prototype.constructor=U.Physics.P2.DistanceConstraint,U.Physics.P2.GearConstraint=function(e,t,i,n,r){void 0===n&&(n=0),void 0===r&&(r=1),this.game=e.game,this.world=e;var o={angle:n,ratio:r};p2.GearConstraint.call(this,t,i,o)},U.Physics.P2.GearConstraint.prototype=Object.create(p2.GearConstraint.prototype),U.Physics.P2.GearConstraint.prototype.constructor=U.Physics.P2.GearConstraint,U.Physics.P2.LockConstraint=function(e,t,i,n,r,o){void 0===n&&(n=[0,0]),void 0===r&&(r=0),void 0===o&&(o=Number.MAX_VALUE),this.game=e.game;var a={localOffsetB:n=[(this.world=e).pxm(n[0]),e.pxm(n[1])],localAngleB:r,maxForce:o};p2.LockConstraint.call(this,t,i,a)},U.Physics.P2.LockConstraint.prototype=Object.create(p2.LockConstraint.prototype),U.Physics.P2.LockConstraint.prototype.constructor=U.Physics.P2.LockConstraint,U.Physics.P2.PrismaticConstraint=function(e,t,i,n,r,o,a,s){void 0===n&&(n=!0),void 0===r&&(r=[0,0]),void 0===o&&(o=[0,0]),void 0===a&&(a=[0,0]),void 0===s&&(s=Number.MAX_VALUE),this.game=e.game;var l={localAnchorA:r=[(this.world=e).pxmi(r[0]),e.pxmi(r[1])],localAnchorB:o=[e.pxmi(o[0]),e.pxmi(o[1])],localAxisA:a,maxForce:s,disableRotationalLock:!n};p2.PrismaticConstraint.call(this,t,i,l)},U.Physics.P2.PrismaticConstraint.prototype=Object.create(p2.PrismaticConstraint.prototype),U.Physics.P2.PrismaticConstraint.prototype.constructor=U.Physics.P2.PrismaticConstraint,U.Physics.P2.RevoluteConstraint=function(e,t,i,n,r,o,a){void 0===o&&(o=Number.MAX_VALUE),void 0===a&&(a=null),this.game=e.game,i=[(this.world=e).pxmi(i[0]),e.pxmi(i[1])],r=[e.pxmi(r[0]),e.pxmi(r[1])],a&&(a=[e.pxmi(a[0]),e.pxmi(a[1])]);var s={worldPivot:a,localPivotA:i,localPivotB:r,maxForce:o};p2.RevoluteConstraint.call(this,t,n,s)},U.Physics.P2.RevoluteConstraint.prototype=Object.create(p2.RevoluteConstraint.prototype),U.Physics.P2.RevoluteConstraint.prototype.constructor=U.Physics.P2.RevoluteConstraint,U.ImageCollection=function(e,t,i,n,r,o,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=e,this.firstgid=0|t,this.imageWidth=0|i,this.imageHeight=0|n,this.imageMargin=0|r,this.imageSpacing=0|o,this.properties=a||{},this.images=[],this.total=0},U.ImageCollection.prototype={containsImageIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},addImage:function(e,t){this.images.push({gid:e,image:t}),this.total++}},U.ImageCollection.prototype.constructor=U.ImageCollection,U.Tile=function(e,t,i,n,r,o){this.layer=e,this.index=t,this.x=i,this.y=n,this.rotation=0,this.flipped=!1,this.worldX=i*r,this.worldY=n*o,this.width=r,this.height=o,this.centerX=Math.abs(r/2),this.centerY=Math.abs(o/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this},U.Tile.prototype={containsPoint:function(e,t){return!(e<this.worldX||t<this.worldY||e>this.right||t>this.bottom)},intersects:function(e,t,i,n){return!(i<=this.worldX||n<=this.worldY||e>=this.worldX+this.width||t>=this.worldY+this.height)},setCollisionCallback:function(e,t){this.collisionCallback=e,this.collisionCallbackContext=t},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(e,t,i,n){this.collideLeft=e,this.collideRight=t,this.collideUp=i,this.collideDown=n,this.faceLeft=e,this.faceRight=t,this.faceTop=i,this.faceBottom=n},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(e,t){return e&&t?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:e?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:!!t&&(this.faceTop||this.faceBottom||this.faceLeft||this.faceRight)},copy:function(e){this.index=e.index,this.alpha=e.alpha,this.properties=e.properties,this.collideUp=e.collideUp,this.collideDown=e.collideDown,this.collideLeft=e.collideLeft,this.collideRight=e.collideRight,this.collisionCallback=e.collisionCallback,this.collisionCallbackContext=e.collisionCallbackContext}},U.Tile.prototype.constructor=U.Tile,Object.defineProperty(U.Tile.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(U.Tile.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(U.Tile.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(U.Tile.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(U.Tile.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(U.Tile.prototype,"bottom",{get:function(){return this.worldY+this.height}}),U.Tilemap=function(e,t,i,n,r,o){this.game=e,this.key=t;var a=U.TilemapParser.parse(this.game,t,i,n,r,o);null!==a&&(this.width=a.width,this.height=a.height,this.tileWidth=a.tileWidth,this.tileHeight=a.tileHeight,this.orientation=a.orientation,this.format=a.format,this.version=a.version,this.properties=a.properties,this.widthInPixels=a.widthInPixels,this.heightInPixels=a.heightInPixels,this.layers=a.layers,this.tilesets=a.tilesets,this.imagecollections=a.imagecollections,this.tiles=a.tiles,this.objects=a.objects,this.collideIndexes=[],this.collision=a.collision,this.images=a.images,this.enableDebug=!1,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0)},U.Tilemap.CSV=0,U.Tilemap.TILED_JSON=1,U.Tilemap.NORTH=0,U.Tilemap.EAST=1,U.Tilemap.SOUTH=2,U.Tilemap.WEST=3,U.Tilemap.prototype={create:function(e,t,i,n,r,o){return void 0===o&&(o=this.game.world),this.width=t,this.height=i,this.setTileSize(n,r),this.layers.length=0,this.createBlankLayer(e,t,i,n,r,o)},setTileSize:function(e,t){this.tileWidth=e,this.tileHeight=t,this.widthInPixels=this.width*e,this.heightInPixels=this.height*t},addTilesetImage:function(e,t,i,n,r,o,a){if(void 0===e)return null;void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=0),0===i&&(i=32),0===n&&(n=32);var s=null;if(null!=t||(t=e),t instanceof U.BitmapData)s=t.canvas;else{if(!this.game.cache.checkImageKey(t))return null;s=this.game.cache.getImage(t)}var l=this.getTilesetIndex(e);if(null===l&&this.format===U.Tilemap.TILED_JSON)return null;if(this.tilesets[l])return this.tilesets[l].setImage(s),this.tilesets[l];var p=new U.Tileset(e,a,i,n,r,o,{});p.setImage(s),this.tilesets.push(p);for(var h=this.tilesets.length-1,u=r,c=r,d=0,_=0,y=0,m=a;m<a+p.total&&(this.tiles[m]=[u,c,h],u+=i+o,++d!==p.total)&&(++_!==p.columns||(u=r,c+=n+o,_=0,++y!==p.rows));m++);return p},createFromObjects:function(e,t,i,n,r,o,a,s,l){if(void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===a&&(a=this.game.world),void 0===s&&(s=U.Sprite),void 0===l&&(l=!0),this.objects[e])for(var p=0;p<this.objects[e].length;p++){var h=!1,u=this.objects[e][p];if(void 0!==u.gid&&"number"==typeof t&&u.gid===t?h=!0:void 0!==u.id&&"number"==typeof t&&u.id===t?h=!0:void 0!==u.name&&"string"==typeof t&&u.name===t&&(h=!0),h){var c=new s(this.game,parseFloat(u.x,10),parseFloat(u.y,10),i,n);for(var d in c.name=u.name,c.visible=u.visible,c.autoCull=o,c.exists=r,u.width&&(c.width=u.width),u.height&&(c.height=u.height),u.rotation&&(c.angle=u.rotation),l&&(c.y-=c.height),a.add(c),u.properties)a.set(c,d,u.properties[d],!1,!1,0,!0)}}},createFromTiles:function(e,t,i,n,r,o){"number"==typeof e&&(e=[e]),null==t?t=[]:"number"==typeof t&&(t=[t]),n=this.getLayer(n),void 0===r&&(r=this.game.world),void 0===o&&(o={}),void 0===o.customClass&&(o.customClass=U.Sprite),void 0===o.adjustY&&(o.adjustY=!0);var a=this.layers[n].width,s=this.layers[n].height;if(this.copy(0,0,a,s,n),this._results.length<2)return 0;for(var l,p=0,h=1,u=this._results.length;h<u;h++)if(-1!==e.indexOf(this._results[h].index)){for(var c in l=new o.customClass(this.game,this._results[h].worldX,this._results[h].worldY,i),o)l[c]=o[c];r.add(l),p++}if(1===t.length)for(h=0;h<e.length;h++)this.replace(e[h],t[0],0,0,a,s,n);else if(1<t.length)for(h=0;h<e.length;h++)this.replace(e[h],t[h],0,0,a,s,n);return p},createLayer:function(e,t,i,n){void 0===t&&(t=this.game.width),void 0===i&&(i=this.game.height),void 0===n&&(n=this.game.world);var r=e;if("string"==typeof e&&(r=this.getLayerIndex(e)),!(null===r||r>this.layers.length)){void 0===t||t<=0?t=Math.min(this.game.width,this.layers[r].widthInPixels):t>this.game.width&&(t=this.game.width),void 0===i||i<=0?i=Math.min(this.game.height,this.layers[r].heightInPixels):i>this.game.height&&(i=this.game.height),this.enableDebug;var o=n.add(new U.TilemapLayer(this.game,this,r,t,i));return this.enableDebug,o}},createBlankLayer:function(e,t,i,n,r,o){if(void 0===o&&(o=this.game.world),null===this.getLayerIndex(e)){for(var a,s={name:e,x:0,y:0,width:t,height:i,widthInPixels:t*n,heightInPixels:i*r,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},l=[],p=0;p<i;p++){a=[];for(var h=0;h<t;h++)a.push(new U.Tile(s,-1,h,p,n,r));l.push(a)}s.data=l,this.layers.push(s),this.currentLayer=this.layers.length-1;var u=s.widthInPixels,c=s.heightInPixels;return u>this.game.width&&(u=this.game.width),c>this.game.height&&(c=this.game.height),(l=new U.TilemapLayer(this.game,this,this.layers.length-1,u,c)).name=e,o.add(l)}},getIndex:function(e,t){for(var i=0;i<e.length;i++)if(e[i].name===t)return i;return null},getLayerIndex:function(e){return this.getIndex(this.layers,e)},getTilesetIndex:function(e){return this.getIndex(this.tilesets,e)},getImageIndex:function(e){return this.getIndex(this.images,e)},setTileIndexCallback:function(e,t,i,n){if(n=this.getLayer(n),"number"==typeof e)this.layers[n].callbacks[e]={callback:t,callbackContext:i};else for(var r=0,o=e.length;r<o;r++)this.layers[n].callbacks[e[r]]={callback:t,callbackContext:i}},setTileLocationCallback:function(e,t,i,n,r,o,a){if(a=this.getLayer(a),this.copy(e,t,i,n,a),!(this._results.length<2))for(var s=1;s<this._results.length;s++)this._results[s].setCollisionCallback(r,o)},setCollision:function(e,t,i,n){if(void 0===t&&(t=!0),void 0===n&&(n=!0),i=this.getLayer(i),"number"==typeof e)return this.setCollisionByIndex(e,t,i,!0);if(Array.isArray(e)){for(var r=0;r<e.length;r++)this.setCollisionByIndex(e[r],t,i,!1);n&&this.calculateFaces(i)}},setCollisionBetween:function(e,t,i,n,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n=this.getLayer(n),!(t<e)){for(var o=e;o<=t;o++)this.setCollisionByIndex(o,i,n,!1);r&&this.calculateFaces(n)}},setCollisionByExclusion:function(e,t,i,n){void 0===t&&(t=!0),void 0===n&&(n=!0),i=this.getLayer(i);for(var r=0,o=this.tiles.length;r<o;r++)-1===e.indexOf(r)&&this.setCollisionByIndex(r,t,i,!1);n&&this.calculateFaces(i)},setCollisionByIndex:function(e,t,i,n){if(void 0===t&&(t=!0),void 0===i&&(i=this.currentLayer),void 0===n&&(n=!0),t)this.collideIndexes.push(e);else{var r=this.collideIndexes.indexOf(e);-1<r&&this.collideIndexes.splice(r,1)}for(var o=0;o<this.layers[i].height;o++)for(var a=0;a<this.layers[i].width;a++){var s=this.layers[i].data[o][a];s&&s.index===e&&(t?s.setCollision(!0,!0,!0,!0):s.resetCollision(),s.faceTop=t,s.faceBottom=t,s.faceLeft=t,s.faceRight=t)}return n&&this.calculateFaces(i),i},getLayer:function(e){return void 0===e?e=this.currentLayer:"string"==typeof e?e=this.getLayerIndex(e):e instanceof U.TilemapLayer&&(e=e.index),e},setPreventRecalculate:function(e){if(!0===e&&!0!==this.preventingRecalculate&&(this.preventingRecalculate=!0,this.needToRecalculate={}),!1===e&&!0===this.preventingRecalculate){for(var t in this.preventingRecalculate=!1,this.needToRecalculate)this.calculateFaces(t);this.needToRecalculate=!1}},calculateFaces:function(e){if(this.preventingRecalculate)this.needToRecalculate[e]=!0;else for(var t=null,i=null,n=null,r=null,o=0,a=this.layers[e].height;o<a;o++)for(var s=0,l=this.layers[e].width;s<l;s++){var p=this.layers[e].data[o][s];p&&(t=this.getTileAbove(e,s,o),i=this.getTileBelow(e,s,o),n=this.getTileLeft(e,s,o),r=this.getTileRight(e,s,o),p.collides&&(p.faceTop=!0,p.faceBottom=!0,p.faceLeft=!0,p.faceRight=!0),t&&t.collides&&(p.faceTop=!1),i&&i.collides&&(p.faceBottom=!1),n&&n.collides&&(p.faceLeft=!1),r&&r.collides&&(p.faceRight=!1))}},getTileAbove:function(e,t,i){return 0<i?this.layers[e].data[i-1][t]:null},getTileBelow:function(e,t,i){return i<this.layers[e].height-1?this.layers[e].data[i+1][t]:null},getTileLeft:function(e,t,i){return 0<t?this.layers[e].data[i][t-1]:null},getTileRight:function(e,t,i){return t<this.layers[e].width-1?this.layers[e].data[i][t+1]:null},setLayer:function(e){e=this.getLayer(e),this.layers[e]&&(this.currentLayer=e)},hasTile:function(e,t,i){return i=this.getLayer(i),void 0!==this.layers[i].data[t]&&void 0!==this.layers[i].data[t][e]&&-1<this.layers[i].data[t][e].index},removeTile:function(e,t,i){if(i=this.getLayer(i),0<=e&&e<this.layers[i].width&&0<=t&&t<this.layers[i].height&&this.hasTile(e,t,i)){var n=this.layers[i].data[t][e];return this.layers[i].data[t][e]=new U.Tile(this.layers[i],-1,e,t,this.tileWidth,this.tileHeight),this.layers[i].dirty=!0,this.calculateFaces(i),n}},removeTileWorldXY:function(e,t,i,n,r){return r=this.getLayer(r),e=this.game.math.snapToFloor(e,i)/i,t=this.game.math.snapToFloor(t,n)/n,this.removeTile(e,t,r)},putTile:function(e,t,i,n){return null===e?this.removeTile(t,i,n):(n=this.getLayer(n),0<=t&&t<this.layers[n].width&&0<=i&&i<this.layers[n].height?(e instanceof U.Tile?(r=e.index,this.hasTile(t,i,n)?this.layers[n].data[i][t].copy(e):this.layers[n].data[i][t]=new U.Tile(n,r,t,i,e.width,e.height)):(r=e,this.hasTile(t,i,n)?this.layers[n].data[i][t].index=r:this.layers[n].data[i][t]=new U.Tile(this.layers[n],r,t,i,this.tileWidth,this.tileHeight)),-1<this.collideIndexes.indexOf(r)?this.layers[n].data[i][t].setCollision(!0,!0,!0,!0):this.layers[n].data[i][t].resetCollision(),this.layers[n].dirty=!0,this.calculateFaces(n),this.layers[n].data[i][t]):null);var r},putTileWorldXY:function(e,t,i,n,r,o){return o=this.getLayer(o),t=this.game.math.snapToFloor(t,n)/n,i=this.game.math.snapToFloor(i,r)/r,this.putTile(e,t,i,o)},searchTileIndex:function(e,t,i,n){void 0===t&&(t=0),void 0===i&&(i=!1),n=this.getLayer(n);var r=0;if(i){for(var o=this.layers[n].height-1;0<=o;o--)for(var a=this.layers[n].width-1;0<=a;a--)if(this.layers[n].data[o][a].index===e){if(r===t)return this.layers[n].data[o][a];r++}}else for(o=0;o<this.layers[n].height;o++)for(a=0;a<this.layers[n].width;a++)if(this.layers[n].data[o][a].index===e){if(r===t)return this.layers[n].data[o][a];r++}return null},getTile:function(e,t,i,n){return void 0===n&&(n=!1),i=this.getLayer(i),0<=e&&e<this.layers[i].width&&0<=t&&t<this.layers[i].height?-1===this.layers[i].data[t][e].index?n?this.layers[i].data[t][e]:null:this.layers[i].data[t][e]:null},getTileWorldXY:function(e,t,i,n,r,o){return void 0===i&&(i=this.tileWidth),void 0===n&&(n=this.tileHeight),r=this.getLayer(r),e=this.game.math.snapToFloor(e,i)/i,t=this.game.math.snapToFloor(t,n)/n,this.getTile(e,t,r,o)},copy:function(e,t,i,n,r){if(r=this.getLayer(r),this.layers[r]){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=this.layers[r].width),void 0===n&&(n=this.layers[r].height),e<0&&(e=0),t<0&&(t=0),i>this.layers[r].width&&(i=this.layers[r].width),n>this.layers[r].height&&(n=this.layers[r].height),this._results.length=0,this._results.push({x:e,y:t,width:i,height:n,layer:r});for(var o=t;o<t+n;o++)for(var a=e;a<e+i;a++)this._results.push(this.layers[r].data[o][a]);return this._results}this._results.length=0},paste:function(e,t,i,n){if(void 0===e&&(e=0),void 0===t&&(t=0),n=this.getLayer(n),i&&!(i.length<2)){for(var r=e-i[1].x,o=t-i[1].y,a=1;a<i.length;a++)this.layers[n].data[o+i[a].y][r+i[a].x].copy(i[a]);this.layers[n].dirty=!0,this.calculateFaces(n)}},swap:function(e,t,i,n,r,o,a){a=this.getLayer(a),this.copy(i,n,r,o,a),this._results.length<2||(this._tempA=e,this._tempB=t,this._results.forEach(this.swapHandler,this),this.paste(i,n,this._results,a))},swapHandler:function(e){e.index===this._tempA?e.index=this._tempB:e.index===this._tempB&&(e.index=this._tempA)},forEach:function(e,t,i,n,r,o,a){a=this.getLayer(a),this.copy(i,n,r,o,a),this._results.length<2||(this._results.forEach(e,t),this.paste(i,n,this._results,a))},replace:function(e,t,i,n,r,o,a){if(a=this.getLayer(a),this.copy(i,n,r,o,a),!(this._results.length<2)){for(var s=1;s<this._results.length;s++)this._results[s].index===e&&(this._results[s].index=t);this.paste(i,n,this._results,a)}},random:function(e,t,i,n,r){if(r=this.getLayer(r),this.copy(e,t,i,n,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)if(this._results[a].index){var s=this._results[a].index;-1===o.indexOf(s)&&o.push(s)}for(var l=1;l<this._results.length;l++)this._results[l].index=this.game.rnd.pick(o);this.paste(e,t,this._results,r)}},shuffle:function(e,t,i,n,r){if(r=this.getLayer(r),this.copy(e,t,i,n,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)this._results[a].index&&o.push(this._results[a].index);U.ArrayUtils.shuffle(o);for(var s=1;s<this._results.length;s++)this._results[s].index=o[s-1];this.paste(e,t,this._results,r)}},fill:function(e,t,i,n,r,o){if(o=this.getLayer(o),this.copy(t,i,n,r,o),!(this._results.length<2)){for(var a=1;a<this._results.length;a++)this._results[a].index=e;this.paste(t,i,this._results,o)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){for(var e="",t=[""],i=0;i<this.layers[this.currentLayer].height;i++){for(var n=0;n<this.layers[this.currentLayer].width;n++)e+="%c  ",1<this.layers[this.currentLayer].data[i][n]?this.debugMap[this.layers[this.currentLayer].data[i][n]]?t.push("background: "+this.debugMap[this.layers[this.currentLayer].data[i][n]]):t.push("background: #ffffff"):t.push("background: rgb(0, 0, 0)");e+="\n"}t[0]=e},destroy:function(){this.removeAllLayers(),this.data=[],this.game=null}},U.Tilemap.prototype.constructor=U.Tilemap,Object.defineProperty(U.Tilemap.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(e){e!==this.currentLayer&&this.setLayer(e)}}),U.TilemapLayer=function(e,t,i,n,r){n|=0,r|=0,U.Sprite.call(this,e,0,0),this.map=t,this.index=i,this.layer=t.layers[i],this.canvas=PIXI.CanvasPool.create(this,n,r),this.context=this.canvas.getContext("2d"),this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas))),this.type=U.TILEMAPLAYER,this.physicsType=U.TILEMAPLAYER,this.renderSettings={enableScrollDelta:!1,overdrawRatio:.2,copyCanvas:null},this.debug=!1,this.exists=!0,this.debugSettings={missingImageFill:"rgb(255,255,255)",debuggedTileOverfill:"rgba(0,255,0,0.4)",forceFullRedraw:!0,debugAlpha:.5,facingEdgeStroke:"rgba(0,255,0,1)",collidingTileOverfill:"rgba(0,255,0,0.2)"},this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._wrap=!1,this._mc={scrollX:0,scrollY:0,renderWidth:0,renderHeight:0,tileWidth:t.tileWidth,tileHeight:t.tileHeight,cw:t.tileWidth,ch:t.tileHeight,tilesets:[]},this._scrollX=0,this._scrollY=0,this._results=[],e.device.canvasBitBltShift||(this.renderSettings.copyCanvas=U.TilemapLayer.ensureSharedCopyCanvas()),this.fixedToCamera=!0},U.TilemapLayer.prototype=Object.create(U.Sprite.prototype),U.TilemapLayer.prototype.constructor=U.TilemapLayer,U.TilemapLayer.prototype.preUpdateCore=U.Component.Core.preUpdate,U.TilemapLayer.sharedCopyCanvas=null,U.TilemapLayer.ensureSharedCopyCanvas=function(){return this.sharedCopyCanvas||(this.sharedCopyCanvas=PIXI.CanvasPool.create(this,2,2)),this.sharedCopyCanvas},U.TilemapLayer.prototype.preUpdate=function(){return this.preUpdateCore()},U.TilemapLayer.prototype.postUpdate=function(){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y},U.TilemapLayer.prototype._renderCanvas=function(e){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y,this.render(),PIXI.Sprite.prototype._renderCanvas.call(this,e)},U.TilemapLayer.prototype._renderWebGL=function(e){this.fixedToCamera&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y),this._scrollX=this.game.camera.view.x*this.scrollFactorX/this.scale.x,this._scrollY=this.game.camera.view.y*this.scrollFactorY/this.scale.y,this.render(),PIXI.Sprite.prototype._renderWebGL.call(this,e)},U.TilemapLayer.prototype.destroy=function(){PIXI.CanvasPool.remove(this),U.Component.Destroy.prototype.destroy.call(this)},U.TilemapLayer.prototype.resize=function(e,t){this.canvas.width=e,this.canvas.height=t,this.texture.frame.resize(e,t),this.texture.width=e,this.texture.height=t,this.texture.crop.width=e,this.texture.crop.height=t,this.texture.baseTexture.width=e,this.texture.baseTexture.height=t,this.texture.baseTexture.dirty(),this.texture.requiresUpdate=!0,this.texture._updateUvs(),this.dirty=!0},U.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels*this.scale.x,this.layer.heightInPixels*this.scale.y)},U.TilemapLayer.prototype._fixX=function(e){return 1===this.scrollFactorX||0===this.scrollFactorX&&0===this.position.x?e:0===this.scrollFactorX&&0!==this.position.x?e-this.position.x:this._scrollX+(e-this._scrollX/this.scrollFactorX)},U.TilemapLayer.prototype._unfixX=function(e){return 1===this.scrollFactorX?e:this._scrollX/this.scrollFactorX+(e-this._scrollX)},U.TilemapLayer.prototype._fixY=function(e){return 1===this.scrollFactorY||0===this.scrollFactorY&&0===this.position.y?e:0===this.scrollFactorY&&0!==this.position.y?e-this.position.y:this._scrollY+(e-this._scrollY/this.scrollFactorY)},U.TilemapLayer.prototype._unfixY=function(e){return 1===this.scrollFactorY?e:this._scrollY/this.scrollFactorY+(e-this._scrollY)},U.TilemapLayer.prototype.getTileX=function(e){return Math.floor(this._fixX(e)/this._mc.tileWidth)},U.TilemapLayer.prototype.getTileY=function(e){return Math.floor(this._fixY(e)/this._mc.tileHeight)},U.TilemapLayer.prototype.getTileXY=function(e,t,i){return i.x=this.getTileX(e),i.y=this.getTileY(t),i},U.TilemapLayer.prototype.getRayCastTiles=function(e,t,i,n){t||(t=this.rayStepRate),void 0===i&&(i=!1),void 0===n&&(n=!1);var r=this.getTiles(e.x,e.y,e.width,e.height,i,n);if(0===r.length)return[];for(var o=e.coordinatesOnLine(t),a=[],s=0;s<r.length;s++)for(var l=0;l<o.length;l++){var p=r[s],h=o[l];if(p.containsPoint(h[0],h[1])){a.push(p);break}}return a},U.TilemapLayer.prototype.getTiles=function(e,t,i,n,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var a=!(r||o);e=this._fixX(e),t=this._fixY(t);for(var s=Math.floor(e/(this._mc.cw*this.scale.x)),l=Math.floor(t/(this._mc.ch*this.scale.y)),p=Math.ceil((e+i)/(this._mc.cw*this.scale.x))-s,h=Math.ceil((t+n)/(this._mc.ch*this.scale.y))-l;this._results.length;)this._results.pop();for(var u=l;u<l+h;u++)for(var c=s;c<s+p;c++){var d=this.layer.data[u];d&&d[c]&&(a||d[c].isInteresting(r,o))&&this._results.push(d[c])}return this._results.slice()},U.TilemapLayer.prototype.resolveTileset=function(e){var t=this._mc.tilesets;if(e<2e3)for(;t.length<e;)t.push(void 0);var i=this.map.tiles[e]&&this.map.tiles[e][2];if(null!==i){var n=this.map.tilesets[i];if(n&&n.containsTileIndex(e))return t[e]=n}return t[e]=null},U.TilemapLayer.prototype.resetTilesetCache=function(){for(var e=this._mc.tilesets;e.length;)e.pop()},U.TilemapLayer.prototype.setScale=function(e,t){e=e||1,t=t||e;for(var i=0;i<this.layer.data.length;i++)for(var n=this.layer.data[i],r=0;r<n.length;r++){var o=n[r];o.width=this.map.tileWidth*e,o.height=this.map.tileHeight*t,o.worldX=o.x*o.width,o.worldY=o.y*o.height}this.scale.setTo(e,t)},U.TilemapLayer.prototype.shiftCanvas=function(e,t,i){var n=e.canvas,r=n.width-Math.abs(t),o=n.height-Math.abs(i),a=0,s=0,l=t,p=i;t<0&&(a=-t,l=0),i<0&&(s=-i,p=0);var h=this.renderSettings.copyCanvas;if(h){(h.width<r||h.height<o)&&(h.width=r,h.height=o);var u=h.getContext("2d");u.clearRect(0,0,r,o),u.drawImage(n,a,s,r,o,0,0,r,o),e.clearRect(l,p,r,o),e.drawImage(h,0,0,r,o,l,p,r,o)}else e.save(),e.globalCompositeOperation="copy",e.drawImage(n,a,s,r,o,l,p,r,o),e.restore()},U.TilemapLayer.prototype.renderRegion=function(e,t,i,n,r,o){var a=this.context,s=this.layer.width,l=this.layer.height,p=this._mc.tileWidth,h=this._mc.tileHeight,u=this._mc.tilesets,c=NaN;this._wrap||(i<=r&&(i=Math.max(0,i),r=Math.min(s-1,r)),n<=o&&(n=Math.max(0,n),o=Math.min(l-1,o)));var d,_,y,m,f,x,v=i*p-e,z=(i+(1<<20)*s)%s;for(m=(n+(1<<20)*l)%l,x=o-n,_=n*h-t;0<=x;m++,x--,_+=h){l<=m&&(m-=l);var g=this.layer.data[m];for(y=z,f=r-i,d=v;0<=f;y++,f--,d+=p){s<=y&&(y-=s);var b=g[y];if(b&&!(b.index<0)){var w=b.index,S=u[w];void 0===S&&(S=this.resolveTileset(w)),b.alpha===c||this.debug||(a.globalAlpha=b.alpha,c=b.alpha),S?b.rotation||b.flipped?(a.save(),a.translate(d+b.centerX,_+b.centerY),a.rotate(b.rotation),b.flipped&&a.scale(-1,1),S.draw(a,-b.centerX,-b.centerY,w),a.restore()):S.draw(a,d,_,w):this.debugSettings.missingImageFill&&(a.fillStyle=this.debugSettings.missingImageFill,a.fillRect(d,_,p,h)),b.debug&&this.debugSettings.debuggedTileOverfill&&(a.fillStyle=this.debugSettings.debuggedTileOverfill,a.fillRect(d,_,p,h))}}}},U.TilemapLayer.prototype.renderDeltaScroll=function(e,t){var i=this._mc.scrollX,n=this._mc.scrollY,r=this.canvas.width,o=this.canvas.height,a=this._mc.tileWidth,s=this._mc.tileHeight,l=0,p=-a,h=0,u=-s;if(e<0?(l=r+e,p=r-1):0<e&&(p=e),t<0?(h=o+t,u=o-1):0<t&&(u=t),this.shiftCanvas(this.context,e,t),l=Math.floor((l+i)/a),p=Math.floor((p+i)/a),h=Math.floor((h+n)/s),u=Math.floor((u+n)/s),l<=p){this.context.clearRect(l*a-i,0,(p-l+1)*a,o);var c=Math.floor((0+n)/s),d=Math.floor((o-1+n)/s);this.renderRegion(i,n,l,c,p,d)}if(h<=u){this.context.clearRect(0,h*s-n,r,(u-h+1)*s);var _=Math.floor((0+i)/a),y=Math.floor((r-1+i)/a);this.renderRegion(i,n,_,h,y,u)}},U.TilemapLayer.prototype.renderFull=function(){var e=this._mc.scrollX,t=this._mc.scrollY,i=this.canvas.width,n=this.canvas.height,r=this._mc.tileWidth,o=this._mc.tileHeight,a=Math.floor(e/r),s=Math.floor((i-1+e)/r),l=Math.floor(t/o),p=Math.floor((n-1+t)/o);this.context.clearRect(0,0,i,n),this.renderRegion(e,t,a,l,s,p)},U.TilemapLayer.prototype.render=function(){var e=!1;if(this.visible){(this.dirty||this.layer.dirty)&&(e=!(this.layer.dirty=!1));var t=this.canvas.width,i=this.canvas.height,n=0|this._scrollX,r=0|this._scrollY,o=this._mc,a=o.scrollX-n,s=o.scrollY-r;if(e||0!==a||0!==s||o.renderWidth!==t||o.renderHeight!==i)return this.context.save(),o.scrollX=n,o.scrollY=r,o.renderWidth===t&&o.renderHeight===i||(o.renderWidth=t,o.renderHeight=i),this.debug&&(this.context.globalAlpha=this.debugSettings.debugAlpha,this.debugSettings.forceFullRedraw&&(e=!0)),!e&&this.renderSettings.enableScrollDelta&&Math.abs(a)+Math.abs(s)<Math.min(t,i)?this.renderDeltaScroll(a,s):this.renderFull(),this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.texture.baseTexture.dirty(),this.dirty=!1,this.context.restore(),!0}},U.TilemapLayer.prototype.renderDebug=function(){var e,t,i,n,r,o,a=this._mc.scrollX,s=this._mc.scrollY,l=this.context,p=this.canvas.width,h=this.canvas.height,u=this.layer.width,c=this.layer.height,d=this._mc.tileWidth,_=this._mc.tileHeight,y=Math.floor(a/d),m=Math.floor((p-1+a)/d),f=Math.floor(s/_),x=Math.floor((h-1+s)/_),v=y*d-a,z=f*_-s,g=(y+(1<<20)*u)%u,b=(f+(1<<20)*c)%c;for(l.strokeStyle=this.debugSettings.facingEdgeStroke,n=b,o=x-f,t=z;0<=o;n++,o--,t+=_){c<=n&&(n-=c);var w=this.layer.data[n];for(i=g,r=m-y,e=v;0<=r;i++,r--,e+=d){u<=i&&(i-=u);var S=w[i];!S||S.index<0||!S.collides||(this.debugSettings.collidingTileOverfill&&(l.fillStyle=this.debugSettings.collidingTileOverfill,l.fillRect(e,t,this._mc.cw,this._mc.ch)),this.debugSettings.facingEdgeStroke&&(l.beginPath(),S.faceTop&&(l.moveTo(e,t),l.lineTo(e+this._mc.cw,t)),S.faceBottom&&(l.moveTo(e,t+this._mc.ch),l.lineTo(e+this._mc.cw,t+this._mc.ch)),S.faceLeft&&(l.moveTo(e,t),l.lineTo(e,t+this._mc.ch)),S.faceRight&&(l.moveTo(e+this._mc.cw,t),l.lineTo(e+this._mc.cw,t+this._mc.ch)),l.closePath(),l.stroke()))}}},Object.defineProperty(U.TilemapLayer.prototype,"wrap",{get:function(){return this._wrap},set:function(e){this._wrap=e,this.dirty=!0}}),Object.defineProperty(U.TilemapLayer.prototype,"scrollX",{get:function(){return this._scrollX},set:function(e){this._scrollX=e}}),Object.defineProperty(U.TilemapLayer.prototype,"scrollY",{get:function(){return this._scrollY},set:function(e){this._scrollY=e}}),Object.defineProperty(U.TilemapLayer.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(e){this._mc.cw=0|e,this.dirty=!0}}),Object.defineProperty(U.TilemapLayer.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(e){this._mc.ch=0|e,this.dirty=!0}}),U.TilemapParser={INSERT_NULL:!1,parse:function(e,t,i,n,r,o){if(void 0===i&&(i=32),void 0===n&&(n=32),void 0===r&&(r=10),void 0===o&&(o=10),void 0===t)return this.getEmptyData();if(null===t)return this.getEmptyData(i,n,r,o);var a=e.cache.getTilemapData(t);if(a){if(a.format===U.Tilemap.CSV)return this.parseCSV(t,a.data,i,n);if(!a.format||a.format===U.Tilemap.TILED_JSON)return this.parseTiledJSON(a.data)}},parseCSV:function(e,t,i,n){for(var r=this.getEmptyData(),o=[],a=(t=t.trim()).split("\n"),s=a.length,l=0,p=0;p<a.length;p++){o[p]=[];for(var h=a[p].split(","),u=0;u<h.length;u++)o[p][u]=new U.Tile(r.layers[0],parseInt(h[u],10),u,p,i,n);0===l&&(l=h.length)}return r.format=U.Tilemap.CSV,r.name=e,r.width=l,r.height=s,r.tileWidth=i,r.tileHeight=n,r.widthInPixels=l*i,r.heightInPixels=s*n,r.layers[0].width=l,r.layers[0].height=s,r.layers[0].widthInPixels=r.widthInPixels,r.layers[0].heightInPixels=r.heightInPixels,r.layers[0].data=o,r},getEmptyData:function(e,t,i,n){return{width:null!=i?i:0,height:null!=n?n:0,tileWidth:null!=e?e:0,tileHeight:null!=t?t:0,orientation:"orthogonal",version:"1",properties:{},widthInPixels:0,heightInPixels:0,layers:[{name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:[]}],images:[],objects:{},collision:{},tilesets:[],tiles:[]}},parseTiledJSON:function(e){function t(e,t){var i={};for(var n in t){var r=t[n];void 0!==e[r]&&(i[r]=e[r])}return i}if("orthogonal"!==e.orientation)return null;for(var i={width:e.width,height:e.height,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:e.orientation,format:U.Tilemap.TILED_JSON,version:e.version,properties:e.properties,widthInPixels:e.width*e.tilewidth,heightInPixels:e.height*e.tileheight},n=[],r=0;r<e.layers.length;r++)if("tilelayer"===e.layers[r].type){var o=e.layers[r];if(!o.compression&&o.encoding&&"base64"===o.encoding){for(var a=window.atob(o.data),s=a.length,l=new Array(s),p=0;p<s;p+=4)l[p/4]=(a.charCodeAt(p)|a.charCodeAt(p+1)<<8|a.charCodeAt(p+2)<<16|a.charCodeAt(p+3)<<24)>>>0;o.data=l,delete o.encoding}else if(o.compression)continue;var h={name:o.name,x:o.x,y:o.y,width:o.width,height:o.height,widthInPixels:o.width*e.tilewidth,heightInPixels:o.height*e.tileheight,alpha:o.opacity,visible:o.visible,properties:{},indexes:[],callbacks:[],bodies:[]};o.properties&&(h.properties=o.properties);var u,c,d,_=0,y=[],m=[],f=0;for(s=o.data.length;f<s;f++){if(c=!1,d=u=0,536870912<(P=o.data[f]))switch(2147483648<P&&(P-=2147483648,d+=4),1073741824<P&&(P-=1073741824,d+=2),536870912<P&&(P-=536870912,d+=1),d){case 5:u=Math.PI/2;break;case 6:u=Math.PI;break;case 3:u=3*Math.PI/2;break;case 4:c=!(u=0);break;case 7:u=Math.PI/2,c=!0;break;case 2:u=Math.PI,c=!0;break;case 1:u=3*Math.PI/2,c=!0}if(0<P)(R=new U.Tile(h,P,_,m.length,e.tilewidth,e.tileheight)).rotation=u,R.flipped=c,0!==d&&(R.flippedVal=d),y.push(R);else U.TilemapParser.INSERT_NULL?y.push(null):y.push(new U.Tile(h,-1,_,m.length,e.tilewidth,e.tileheight));++_===o.width&&(m.push(y),_=0,y=[])}h.data=m,n.push(h)}i.layers=n;var x=[];for(r=0;r<e.layers.length;r++)if("imagelayer"===e.layers[r].type){var v=e.layers[r],z={name:v.name,image:v.image,x:v.x,y:v.y,alpha:v.opacity,visible:v.visible,properties:{}};v.properties&&(z.properties=v.properties),x.push(z)}i.images=x;var g=[],b=[],w=null;for(r=0;r<e.tilesets.length;r++){if((j=e.tilesets[r]).image){var S=new U.Tileset(j.name,j.firstgid,j.tilewidth,j.tileheight,j.margin,j.spacing,j.properties);j.tileproperties&&(S.tileProperties=j.tileproperties),S.updateTileData(j.imagewidth,j.imageheight),g.push(S)}else{var C=new U.ImageCollection(j.name,j.firstgid,j.tilewidth,j.tileheight,j.margin,j.spacing,j.properties);for(var M in j.tiles){z=j.tiles[M].image;var P=j.firstgid+parseInt(M,10);C.addImage(P,z)}b.push(C)}w&&(w.lastgid=j.firstgid-1),w=j}i.tilesets=g,i.imagecollections=b;var k={},T={};for(r=0;r<e.layers.length;r++)if("objectgroup"===e.layers[r].type){var O=e.layers[r];k[O.name]=[],T[O.name]=[];var A=0;for(s=O.objects.length;A<s;A++)if(O.objects[A].gid){var E={gid:O.objects[A].gid,name:O.objects[A].name,type:O.objects[A].hasOwnProperty("type")?O.objects[A].type:"",x:O.objects[A].x,y:O.objects[A].y,visible:O.objects[A].visible,properties:O.objects[A].properties};O.objects[A].rotation&&(E.rotation=O.objects[A].rotation),k[O.name].push(E)}else if(O.objects[A].polyline){E={name:O.objects[A].name,type:O.objects[A].type,x:O.objects[A].x,y:O.objects[A].y,width:O.objects[A].width,height:O.objects[A].height,visible:O.objects[A].visible,properties:O.objects[A].properties};O.objects[A].rotation&&(E.rotation=O.objects[A].rotation),E.polyline=[];for(var G=0;G<O.objects[A].polyline.length;G++)E.polyline.push([O.objects[A].polyline[G].x,O.objects[A].polyline[G].y]);T[O.name].push(E),k[O.name].push(E)}else if(O.objects[A].polygon){(E=t(O.objects[A],["name","type","x","y","visible","rotation","properties"])).polygon=[];for(G=0;G<O.objects[A].polygon.length;G++)E.polygon.push([O.objects[A].polygon[G].x,O.objects[A].polygon[G].y]);k[O.name].push(E)}else if(O.objects[A].ellipse){E=t(O.objects[A],["name","type","ellipse","x","y","width","height","visible","rotation","properties"]);k[O.name].push(E)}else{(E=t(O.objects[A],["name","type","x","y","width","height","visible","rotation","properties"])).rectangle=!0,k[O.name].push(E)}}i.objects=k,i.collision=T,i.tiles=[];for(r=0;r<i.tilesets.length;r++){_=(j=i.tilesets[r]).tileMargin;var I=j.tileMargin,B=0,L=0,D=0;for(f=j.firstgid;f<j.firstgid+j.total&&(i.tiles[f]=[_,I,r],_+=j.tileWidth+j.tileSpacing,++B!==j.total)&&(++L!==j.columns||(_=j.tileMargin,I+=j.tileHeight+j.tileSpacing,L=0,++D!==j.rows));f++);}var R,F,j;for(r=0;r<i.layers.length;r++){h=i.layers[r],j=null;for(p=0;p<h.data.length;p++){y=h.data[p];for(var N=0;N<y.length;N++)null===(R=y[N])||R.index<0||(F=i.tiles[R.index][2],(j=i.tilesets[F]).tileProperties&&j.tileProperties[R.index-j.firstgid]&&(R.properties=U.Utils.mixin(j.tileProperties[R.index-j.firstgid],R.properties)))}}return i}},U.Tileset=function(e,t,i,n,r,o,a){(void 0===i||i<=0)&&(i=32),(void 0===n||n<=0)&&(n=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=e,this.firstgid=0|t,this.tileWidth=0|i,this.tileHeight=0|n,this.tileMargin=0|r,this.tileSpacing=0|o,this.properties=a||{},this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]},U.Tileset.prototype={draw:function(e,t,i,n){var r=n-this.firstgid<<1;0<=r&&r+1<this.drawCoords.length&&e.drawImage(this.image,this.drawCoords[r],this.drawCoords[r+1],this.tileWidth,this.tileHeight,t,i,this.tileWidth,this.tileHeight)},containsTileIndex:function(e){return e>=this.firstgid&&e<this.firstgid+this.total},setImage:function(e){this.image=e,this.updateTileData(e.width,e.height)},setSpacing:function(e,t){this.tileMargin=0|e,this.tileSpacing=0|t,this.image&&this.updateTileData(this.image.width,this.image.height)},updateTileData:function(e,t){var i=(t-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),n=(e-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);i=Math.floor(i),n=Math.floor(n),this.rows&&this.rows!==i||this.columns&&this.columns,this.rows=i,this.columns=n,this.total=i*n,this.drawCoords.length=0;for(var r=this.tileMargin,o=this.tileMargin,a=0;a<this.rows;a++){for(var s=0;s<this.columns;s++)this.drawCoords.push(r),this.drawCoords.push(o),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,o+=this.tileHeight+this.tileSpacing}}},U.Tileset.prototype.constructor=U.Tileset,U.Particle=function(e,t,i,n,r){U.Sprite.call(this,e,t,i,n,r),this.autoScale=!1,this.scaleData=null,this._s=0,this.autoAlpha=!1,this.alphaData=null,this._a=0},U.Particle.prototype=Object.create(U.Sprite.prototype),U.Particle.prototype.constructor=U.Particle,U.Particle.prototype.update=function(){this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1)},U.Particle.prototype.onEmit=function(){},U.Particle.prototype.setAlphaData=function(e){this.alphaData=e,this._a=e.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},U.Particle.prototype.setScaleData=function(e){this.scaleData=e,this._s=e.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},U.Particle.prototype.reset=function(e,t,i){return U.Component.Reset.prototype.reset.call(this,e,t,i),this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},U.Particles=function(e){this.game=e,this.emitters={},this.ID=0},U.Particles.prototype={add:function(e){return this.emitters[e.name]=e},remove:function(e){delete this.emitters[e.name]},update:function(){for(var e in this.emitters)this.emitters[e].exists&&this.emitters[e].update()}},U.Particles.prototype.constructor=U.Particles,U.Particles.Arcade={},U.Particles.Arcade.Emitter=function(e,t,i,n){this.maxParticles=n||50,U.Group.call(this,e),this.name="emitter"+this.game.particles.ID++,this.type=U.EMITTER,this.physicsType=U.GROUP,this.area=new U.Rectangle(t,i,1,1),this.minParticleSpeed=new U.Point(-100,-100),this.maxParticleSpeed=new U.Point(100,100),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.minRotation=-360,this.maxRotation=360,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.gravity=100,this.particleClass=U.Particle,this.particleDrag=new U.Point,this.angularDrag=0,this.frequency=100,this.lifespan=2e3,this.bounce=new U.Point,this.on=!1,this.particleAnchor=new U.Point(.5,.5),this.blendMode=U.blendModes.NORMAL,this.emitX=t,this.emitY=i,this.autoScale=!1,this.autoAlpha=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new U.Point(1,1),this._maxParticleScale=new U.Point(1,1),this._quantity=0,this._timer=0,this._counter=0,this._flowQuantity=0,this._flowTotal=0,this._explode=!0,this._frames=null},U.Particles.Arcade.Emitter.prototype=Object.create(U.Group.prototype),U.Particles.Arcade.Emitter.prototype.constructor=U.Particles.Arcade.Emitter,U.Particles.Arcade.Emitter.prototype.update=function(){if(this.on&&this.game.time.time>=this._timer)if(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,0!==this._flowTotal)if(0<this._flowQuantity){for(var e=0;e<this._flowQuantity;e++)if(this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal)){this.on=!1;break}}else this.emitParticle()&&(this._counter++,-1!==this._flowTotal&&this._counter>=this._flowTotal&&(this.on=!1));else this.emitParticle()&&(this._counter++,0<this._quantity&&this._counter>=this._quantity&&(this.on=!1));for(e=this.children.length;e--;)this.children[e].exists&&this.children[e].update()},U.Particles.Arcade.Emitter.prototype.makeParticles=function(e,t,i,n,r){void 0===t&&(t=0),void 0===i&&(i=this.maxParticles),void 0===n&&(n=!1),void 0===r&&(r=!1);var o,a=0,s=e,l=t;for(this._frames=t,i>this.maxParticles&&(this.maxParticles=i);a<i;)Array.isArray(e)&&(s=this.game.rnd.pick(e)),Array.isArray(t)&&(l=this.game.rnd.pick(t)),o=new this.particleClass(this.game,0,0,s,l),this.game.physics.arcade.enable(o,!1),n?(o.body.checkCollision.any=!0,o.body.checkCollision.none=!1):o.body.checkCollision.none=!0,o.body.collideWorldBounds=r,o.body.skipQuadTree=!0,o.exists=!1,o.visible=!1,o.anchor.copyFrom(this.particleAnchor),this.add(o),a++;return this},U.Particles.Arcade.Emitter.prototype.kill=function(){return this.on=!1,this.alive=!1,this.exists=!1,this},U.Particles.Arcade.Emitter.prototype.revive=function(){return this.alive=!0,this.exists=!0,this},U.Particles.Arcade.Emitter.prototype.explode=function(e,t){return this._flowTotal=0,this.start(!0,e,0,t,!1),this},U.Particles.Arcade.Emitter.prototype.flow=function(e,t,i,n,r){return void 0!==i&&0!==i||(i=1),void 0===n&&(n=-1),void 0===r&&(r=!0),i>this.maxParticles&&(i=this.maxParticles),this._counter=0,this._flowQuantity=i,this._flowTotal=n,r?(this.start(!0,e,t,i),this._counter+=i,this.on=!0,this._timer=this.game.time.time+t*this.game.time.slowMotion):this.start(!1,e,t,i),this},U.Particles.Arcade.Emitter.prototype.start=function(e,t,i,n,r){if(void 0===e&&(e=!0),void 0===t&&(t=0),null!=i||(i=250),void 0===n&&(n=0),void 0===r&&(r=!1),n>this.maxParticles&&(n=this.maxParticles),this.revive(),this.visible=!0,this.lifespan=t,this.frequency=i,e||r)for(var o=0;o<n;o++)this.emitParticle();else this.on=!0,this._quantity=n,this._counter=0,this._timer=this.game.time.time+i*this.game.time.slowMotion;return this},U.Particles.Arcade.Emitter.prototype.emitParticle=function(e,t,i,n){void 0===e&&(e=null),void 0===t&&(t=null);var r=this.getFirstExists(!1);if(null===r)return!1;var o=this.game.rnd;void 0!==i&&void 0!==n?r.loadTexture(i,n):void 0!==i&&r.loadTexture(i);var a=this.emitX,s=this.emitY;null!==e?a=e:1<this.width&&(a=o.between(this.left,this.right)),null!==t?s=t:1<this.height&&(s=o.between(this.top,this.bottom)),r.reset(a,s),r.angle=0,r.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(r):this.particleSendToBack&&this.sendToBack(r),this.autoScale?r.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?r.scale.set(o.realInRange(this.minParticleScale,this.maxParticleScale)):this._minParticleScale.x===this._maxParticleScale.x&&this._minParticleScale.y===this._maxParticleScale.y||r.scale.set(o.realInRange(this._minParticleScale.x,this._maxParticleScale.x),o.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),void 0===n&&(Array.isArray(this._frames)?r.frame=this.game.rnd.pick(this._frames):r.frame=this._frames),this.autoAlpha?r.setAlphaData(this.alphaData):r.alpha=o.realInRange(this.minParticleAlpha,this.maxParticleAlpha),r.blendMode=this.blendMode;var l=r.body;return l.updateBounds(),l.bounce.copyFrom(this.bounce),l.drag.copyFrom(this.particleDrag),l.velocity.x=o.between(this.minParticleSpeed.x,this.maxParticleSpeed.x),l.velocity.y=o.between(this.minParticleSpeed.y,this.maxParticleSpeed.y),l.angularVelocity=o.between(this.minRotation,this.maxRotation),l.gravity.y=this.gravity,l.angularDrag=this.angularDrag,r.onEmit(),!0},U.Particles.Arcade.Emitter.prototype.destroy=function(){this.game.particles.remove(this),U.Group.prototype.destroy.call(this,!0,!1)},U.Particles.Arcade.Emitter.prototype.setSize=function(e,t){return this.area.width=e,this.area.height=t,this},U.Particles.Arcade.Emitter.prototype.setXSpeed=function(e,t){return e=e||0,t=t||0,this.minParticleSpeed.x=e,this.maxParticleSpeed.x=t,this},U.Particles.Arcade.Emitter.prototype.setYSpeed=function(e,t){return e=e||0,t=t||0,this.minParticleSpeed.y=e,this.maxParticleSpeed.y=t,this},U.Particles.Arcade.Emitter.prototype.setRotation=function(e,t){return e=e||0,t=t||0,this.minRotation=e,this.maxRotation=t,this},U.Particles.Arcade.Emitter.prototype.setAlpha=function(e,t,i,n,r){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=0),void 0===n&&(n=U.Easing.Linear.None),void 0===r&&(r=!1),this.minParticleAlpha=e,this.maxParticleAlpha=t,this.autoAlpha=!1,0<i&&e!==t){var o={v:e},a=this.game.make.tween(o).to({v:t},i,n);a.yoyo(r),this.alphaData=a.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}return this},U.Particles.Arcade.Emitter.prototype.setScale=function(e,t,i,n,r,o,a){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=0),void 0===o&&(o=U.Easing.Linear.None),void 0===a&&(a=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(e,i),this._maxParticleScale.set(t,n),this.autoScale=!1,0<r&&(e!==t||i!==n)){var s={x:e,y:i},l=this.game.make.tween(s).to({x:t,y:n},r,o);l.yoyo(a),this.scaleData=l.generateData(60),this.scaleData.reverse(),this.autoScale=!0}return this},U.Particles.Arcade.Emitter.prototype.at=function(e){return e.center?(this.emitX=e.center.x,this.emitY=e.center.y):(this.emitX=e.world.x+e.anchor.x*e.width,this.emitY=e.world.y+e.anchor.y*e.height),this},Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"width",{get:function(){return this.area.width},set:function(e){this.area.width=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"height",{get:function(){return this.area.height},set:function(e){this.area.height=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(e){this.emitX=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(e){this.emitY=e}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-this.area.width/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+this.area.width/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-this.area.height/2)}}),Object.defineProperty(U.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+this.area.height/2)}}),U.Weapon=function(e,t){U.Plugin.call(this,e,t),this.bullets=null,this.autoExpandBulletsGroup=!1,this.autofire=!1,this.shots=0,this.fireLimit=0,this.fireRate=100,this.fireRateVariance=0,this.fireFrom=new U.Rectangle(0,0,1,1),this.fireAngle=U.ANGLE_UP,this.bulletInheritSpriteSpeed=!1,this.bulletAnimation="",this.bulletFrameRandom=!1,this.bulletFrameCycle=!1,this.bulletWorldWrap=!1,this.bulletWorldWrapPadding=0,this.bulletAngleOffset=0,this.bulletAngleVariance=0,this.bulletSpeed=200,this.bulletSpeedVariance=0,this.bulletLifespan=0,this.bulletKillDistance=0,this.bulletGravity=new U.Point(0,0),this.bulletRotateToVelocity=!1,this.bulletKey="",this.bulletFrame="",this._bulletClass=U.Bullet,this._bulletCollideWorldBounds=!1,this._bulletKillType=U.Weapon.KILL_WORLD_BOUNDS,this._data={customBody:!1,width:0,height:0,offsetX:0,offsetY:0},this.bounds=new U.Rectangle,this.bulletBounds=e.world.bounds,this.bulletFrames=[],this.bulletFrameIndex=0,this.anims={},this.onFire=new U.Signal,this.onKill=new U.Signal,this.onFireLimit=new U.Signal,this.trackedSprite=null,this.trackedPointer=null,this.trackRotation=!1,this.trackOffset=new U.Point,this._nextFire=0,this._rotatedPoint=new U.Point},U.Weapon.prototype=Object.create(U.Plugin.prototype),U.Weapon.prototype.constructor=U.Weapon,U.Weapon.KILL_NEVER=0,U.Weapon.KILL_LIFESPAN=1,U.Weapon.KILL_DISTANCE=2,U.Weapon.KILL_WEAPON_BOUNDS=3,U.Weapon.KILL_CAMERA_BOUNDS=4,U.Weapon.KILL_WORLD_BOUNDS=5,U.Weapon.KILL_STATIC_BOUNDS=6,U.Weapon.prototype.createBullets=function(e,t,i,n){return void 0===e&&(e=1),void 0===n&&(n=this.game.world),this.bullets||(this.bullets=this.game.add.physicsGroup(U.Physics.ARCADE,n),this.bullets.classType=this._bulletClass),0!==e&&(-1===e&&(this.autoExpandBulletsGroup=!0,e=1),this.bullets.createMultiple(e,t,i),this.bullets.setAll("data.bulletManager",this),this.bulletKey=t,this.bulletFrame=i),this},U.Weapon.prototype.forEach=function(e,t){return this.bullets.forEachExists(e,t,arguments),this},U.Weapon.prototype.pauseAll=function(){return this.bullets.setAll("body.enable",!1),this},U.Weapon.prototype.resumeAll=function(){return this.bullets.setAll("body.enable",!0),this},U.Weapon.prototype.killAll=function(){return this.bullets.callAllExists("kill",!0),this.bullets.setAll("body.enable",!0),this},U.Weapon.prototype.resetShots=function(e){return void(this.shots=0)!==e&&(this.fireLimit=e),this},U.Weapon.prototype.destroy=function(){this.parent.remove(this,!1),this.bullets.destroy(),this.game=null,this.parent=null,this.active=!1,this.visible=!1},U.Weapon.prototype.update=function(){this._bulletKillType===U.Weapon.KILL_WEAPON_BOUNDS&&(this.trackedSprite?(this.trackedSprite.updateTransform(),this.bounds.centerOn(this.trackedSprite.worldPosition.x,this.trackedSprite.worldPosition.y)):this.trackedPointer&&this.bounds.centerOn(this.trackedPointer.worldX,this.trackedPointer.worldY)),this.autofire&&this.fire()},U.Weapon.prototype.trackSprite=function(e,t,i,n){return void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=!1),this.trackedPointer=null,this.trackedSprite=e,this.trackRotation=n,this.trackOffset.set(t,i),this},U.Weapon.prototype.trackPointer=function(e,t,i){return void 0===e&&(e=this.game.input.activePointer),void 0===t&&(t=0),void 0===i&&(i=0),this.trackedPointer=e,this.trackedSprite=null,this.trackRotation=!1,this.trackOffset.set(t,i),this},U.Weapon.prototype.fire=function(e,t,i){if(this.game.time.now<this._nextFire||0<this.fireLimit&&this.shots===this.fireLimit)return!1;var n=this.bulletSpeed;0!==this.bulletSpeedVariance&&(n+=U.Math.between(-this.bulletSpeedVariance,this.bulletSpeedVariance)),e?1<this.fireFrom.width?this.fireFrom.centerOn(e.x,e.y):(this.fireFrom.x=e.x,this.fireFrom.y=e.y):this.trackedSprite?(this.trackRotation?(this._rotatedPoint.set(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y),this._rotatedPoint.rotate(this.trackedSprite.world.x,this.trackedSprite.world.y,this.trackedSprite.rotation),1<this.fireFrom.width?this.fireFrom.centerOn(this._rotatedPoint.x,this._rotatedPoint.y):(this.fireFrom.x=this._rotatedPoint.x,this.fireFrom.y=this._rotatedPoint.y)):1<this.fireFrom.width?this.fireFrom.centerOn(this.trackedSprite.world.x+this.trackOffset.x,this.trackedSprite.world.y+this.trackOffset.y):(this.fireFrom.x=this.trackedSprite.world.x+this.trackOffset.x,this.fireFrom.y=this.trackedSprite.world.y+this.trackOffset.y),this.bulletInheritSpriteSpeed&&(n+=this.trackedSprite.body.speed)):this.trackedPointer&&(1<this.fireFrom.width?this.fireFrom.centerOn(this.trackedPointer.world.x+this.trackOffset.x,this.trackedPointer.world.y+this.trackOffset.y):(this.fireFrom.x=this.trackedPointer.world.x+this.trackOffset.x,this.fireFrom.y=this.trackedPointer.world.y+this.trackOffset.y));var r=1<this.fireFrom.width?this.fireFrom.randomX:this.fireFrom.x,o=1<this.fireFrom.height?this.fireFrom.randomY:this.fireFrom.y,a=this.trackRotation?this.trackedSprite.angle:this.fireAngle;void 0!==t&&void 0!==i&&(a=this.game.math.radToDeg(Math.atan2(i-o,t-r))),0!==this.bulletAngleVariance&&(a+=U.Math.between(-this.bulletAngleVariance,this.bulletAngleVariance));var s=0,l=0;0===a||180===a?s=Math.cos(this.game.math.degToRad(a))*n:(90===a||270===a||(s=Math.cos(this.game.math.degToRad(a))*n),l=Math.sin(this.game.math.degToRad(a))*n);var p=null;if(this.autoExpandBulletsGroup?(p=this.bullets.getFirstExists(!1,!0,r,o,this.bulletKey,this.bulletFrame)).data.bulletManager=this:p=this.bullets.getFirstExists(!1),p){if(p.reset(r,o),p.data.fromX=r,p.data.fromY=o,p.data.killType=this.bulletKillType,p.data.killDistance=this.bulletKillDistance,p.data.rotateToVelocity=this.bulletRotateToVelocity,this.bulletKillType===U.Weapon.KILL_LIFESPAN&&(p.lifespan=this.bulletLifespan),p.angle=a+this.bulletAngleOffset,""!==this.bulletAnimation){if(null===p.animations.getAnimation(this.bulletAnimation)){var h=this.anims[this.bulletAnimation];p.animations.add(h.name,h.frames,h.frameRate,h.loop,h.useNumericIndex)}p.animations.play(this.bulletAnimation)}else this.bulletFrameCycle?(p.frame=this.bulletFrames[this.bulletFrameIndex],++this.bulletFrameIndex>=this.bulletFrames.length&&(this.bulletFrameIndex=0)):this.bulletFrameRandom&&(p.frame=this.bulletFrames[Math.floor(Math.random()*this.bulletFrames.length)]);if(p.data.bodyDirty&&(this._data.customBody&&p.body.setSize(this._data.width,this._data.height,this._data.offsetX,this._data.offsetY),p.body.collideWorldBounds=this.bulletCollideWorldBounds,p.data.bodyDirty=!1),p.body.velocity.set(s,l),p.body.gravity.set(this.bulletGravity.x,this.bulletGravity.y),0!==this.bulletSpeedVariance){var u=this.fireRate;(u+=U.Math.between(-this.fireRateVariance,this.fireRateVariance))<0&&(u=0),this._nextFire=this.game.time.now+u}else this._nextFire=this.game.time.now+this.fireRate;this.shots++,this.onFire.dispatch(p,this,n),0<this.fireLimit&&this.shots===this.fireLimit&&this.onFireLimit.dispatch(this,this.fireLimit)}return p},U.Weapon.prototype.fireAtPointer=function(e){return void 0===e&&(e=this.game.input.activePointer),this.fire(null,e.worldX,e.worldY)},U.Weapon.prototype.fireAtSprite=function(e){return this.fire(null,e.world.x,e.world.y)},U.Weapon.prototype.fireAtXY=function(e,t){return this.fire(null,e,t)},U.Weapon.prototype.setBulletBodyOffset=function(e,t,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),this._data.customBody=!0,this._data.width=e,this._data.height=t,this._data.offsetX=i,this._data.offsetY=n,this.bullets.callAll("body.setSize","body",e,t,i,n),this.bullets.setAll("data.bodyDirty",!1),this},U.Weapon.prototype.setBulletFrames=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=!1),this.bulletFrames=U.ArrayUtils.numberArray(e,t),this.bulletFrameIndex=0,this.bulletFrameCycle=i,this.bulletFrameRandom=n,this},U.Weapon.prototype.addBulletAnimation=function(e,t,i,n,r){return this.anims[e]={name:e,frames:t,frameRate:i,loop:n,useNumericIndex:r},this.bullets.callAll("animations.add","animations",e,t,i,n,r),this.bulletAnimation=e,this},U.Weapon.prototype.debug=function(e,t,i){void 0===e&&(e=16),void 0===t&&(t=32),void 0===i&&(i=!1),this.game.debug.text("Weapon Plugin",e,t),this.game.debug.text("Bullets Alive: "+this.bullets.total+" - Total: "+this.bullets.length,e,t+24),i&&this.bullets.forEachExists(this.game.debug.body,this.game.debug,"rgba(255, 0, 255, 0.8)")},Object.defineProperty(U.Weapon.prototype,"bulletClass",{get:function(){return this._bulletClass},set:function(e){this._bulletClass=e,this.bullets.classType=this._bulletClass}}),Object.defineProperty(U.Weapon.prototype,"bulletKillType",{get:function(){return this._bulletKillType},set:function(e){switch(e){case U.Weapon.KILL_STATIC_BOUNDS:case U.Weapon.KILL_WEAPON_BOUNDS:this.bulletBounds=this.bounds;break;case U.Weapon.KILL_CAMERA_BOUNDS:this.bulletBounds=this.game.camera.view;break;case U.Weapon.KILL_WORLD_BOUNDS:this.bulletBounds=this.game.world.bounds}this._bulletKillType=e}}),Object.defineProperty(U.Weapon.prototype,"bulletCollideWorldBounds",{get:function(){return this._bulletCollideWorldBounds},set:function(e){this._bulletCollideWorldBounds=e,this.bullets.setAll("body.collideWorldBounds",e),this.bullets.setAll("data.bodyDirty",!1)}}),Object.defineProperty(U.Weapon.prototype,"x",{get:function(){return this.fireFrom.x},set:function(e){this.fireFrom.x=e}}),Object.defineProperty(U.Weapon.prototype,"y",{get:function(){return this.fireFrom.y},set:function(e){this.fireFrom.y=e}}),U.Bullet=function(e,t,i,n,r){U.Sprite.call(this,e,t,i,n,r),this.anchor.set(.5),this.data={bulletManager:null,fromX:0,fromY:0,bodyDirty:!0,rotateToVelocity:!1,killType:0,killDistance:0}},U.Bullet.prototype=Object.create(U.Sprite.prototype),U.Bullet.prototype.constructor=U.Bullet,U.Bullet.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.data.bulletManager.onKill.dispatch(this),this},U.Bullet.prototype.update=function(){this.exists&&(this.data.killType>U.Weapon.KILL_LIFESPAN&&(this.data.killType===U.Weapon.KILL_DISTANCE?this.game.physics.arcade.distanceToXY(this,this.data.fromX,this.data.fromY,!0)>this.data.killDistance&&this.kill():this.data.bulletManager.bulletBounds.intersects(this)||this.kill()),this.data.rotateToVelocity&&(this.rotation=Math.atan2(this.body.velocity.y,this.body.velocity.x)),this.data.bulletManager.bulletWorldWrap&&this.game.world.wrap(this,this.data.bulletManager.bulletWorldWrapPadding))},U.Video=function(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=null),this.game=e,this.key=t,this.width=0,this.height=0,this.type=U.VIDEO,this.disableTextureUpload=!1,this.touchLocked=!1,this.onPlay=new U.Signal,this.onChangeSource=new U.Signal,this.onComplete=new U.Signal,this.onAccess=new U.Signal,this.onError=new U.Signal,this.onTimeout=new U.Signal,this.timeout=15e3,this._timeOutID=null,this.video=null,this.videoStream=null,this.isStreaming=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._codeMuted=!1,this._muted=!1,this._codePaused=!1,this._paused=!1,this._pending=!1,this._autoplay=!1,this._endCallback=null,this._playCallback=null,t&&this.game.cache.checkVideoKey(t)){var n=this.game.cache.getVideo(t);n.isBlob?this.createVideoFromBlob(n.data):this.video=n.data,this.width=this.video.videoWidth,this.height=this.video.videoHeight}else i&&this.createVideoFromURL(i,!1);this.video&&!i?this.baseTexture=new PIXI.BaseTexture(this.video):this.baseTexture=new PIXI.BaseTexture(U.Cache.DEFAULT.baseTexture.source),this.baseTexture.forceLoaded(this.width,this.height),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new U.Frame(0,0,0,this.width,this.height,"video"),this.texture.setFrame(this.textureFrame),this.texture.valid=!1,null!==t&&this.video&&(this.texture.valid=this.video.canplay),this.snapshot=null,U.BitmapData&&(this.snapshot=new U.BitmapData(this.game,"",this.width,this.height)),!this.game.device.cocoonJS&&(this.game.device.iOS||this.game.device.chrome)||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock?this.setTouchLock():n&&(n.locked=!1)},U.Video.prototype={connectToMediaStream:function(e,t){return e&&t&&(this.video=e,this.videoStream=t,this.isStreaming=!0,this.baseTexture.source=this.video,this.updateTexture(null,this.video.videoWidth,this.video.videoHeight),this.onAccess.dispatch(this)),this},startMediaStream:function(e,t,i){if(void 0===e&&(e=!1),void 0===t&&(t=null),void 0===i&&(i=null),!this.game.device.getUserMedia)return this.onError.dispatch(this,"No getUserMedia"),!1;null!==this.videoStream&&(this.videoStream.active?this.videoStream.active=!1:this.videoStream.stop()),this.removeVideoElement(),this.video=document.createElement("video"),this.video.setAttribute("autoplay","autoplay"),null!==t&&(this.video.width=t),null!==i&&(this.video.height=i),this._timeOutID=window.setTimeout(this.getUserMediaTimeout.bind(this),this.timeout);try{navigator.getUserMedia({audio:e,video:!0},this.getUserMediaSuccess.bind(this),this.getUserMediaError.bind(this))}catch(e){this.getUserMediaError(e)}return this},getUserMediaTimeout:function(){clearTimeout(this._timeOutID),this.onTimeout.dispatch(this)},getUserMediaError:function(e){clearTimeout(this._timeOutID),this.onError.dispatch(this,e)},getUserMediaSuccess:function(e){clearTimeout(this._timeOutID),this.videoStream=e,void 0!==this.video.mozSrcObject?this.video.mozSrcObject=e:this.video.src=window.URL&&window.URL.createObjectURL(e)||e;var r=this;this.video.onloadeddata=function(){var n=10;!function e(){if(0<n)if(0<r.video.videoWidth){var t=r.video.videoWidth,i=r.video.videoHeight;isNaN(r.video.videoHeight)&&(i=t/(4/3)),r.video.play(),r.isStreaming=!0,r.baseTexture.source=r.video,r.updateTexture(null,t,i),r.onAccess.dispatch(r)}else window.setTimeout(e,500);n--}()}},createVideoFromBlob:function(e){var t=this;return this.video=document.createElement("video"),this.video.controls=!1,this.video.setAttribute("autoplay","autoplay"),this.video.addEventListener("loadeddata",function(e){t.updateTexture(e)},!0),this.video.src=window.URL.createObjectURL(e),this.video.canplay=!0,this},createVideoFromURL:function(e,t){return void 0===t&&(t=!1),this.texture&&(this.texture.valid=!1),this.video=document.createElement("video"),this.video.controls=!1,t&&this.video.setAttribute("autoplay","autoplay"),this.video.src=e,this.video.canplay=!0,this.video.load(),this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval),this.key=e,this},updateTexture:function(e,t,i){var n=!1;null!=t||(t=this.video.videoWidth,n=!0),null!=i||(i=this.video.videoHeight),this.width=t,this.height=i,this.baseTexture.source!==this.video&&(this.baseTexture.source=this.video),this.baseTexture.forceLoaded(t,i),this.texture.frame.resize(t,i),this.texture.width=t,this.texture.height=i,this.texture.valid=!0,this.snapshot&&this.snapshot.resize(t,i),n&&null!==this.key&&(this.onChangeSource.dispatch(this,t,i),this._autoplay&&(this.video.play(),this.onPlay.dispatch(this,this.loop,this.playbackRate)))},complete:function(){this.onComplete.dispatch(this)},play:function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=1),this.game.sound.onMute&&(this.game.sound.onMute.add(this.setMute,this),this.game.sound.onUnMute.add(this.unsetMute,this),this.game.sound.mute&&this.setMute()),this.game.onPause.add(this.setPause,this),this.game.onResume.add(this.setResume,this),this._endCallback=this.complete.bind(this),this.video.addEventListener("ended",this._endCallback,!0),this.video.addEventListener("webkitendfullscreen",this._endCallback,!0),this.video.loop=e?"loop":"",this.video.playbackRate=t,this.touchLocked?this._pending=!0:(this._pending=!1,null!==this.key&&(4!==this.video.readyState?(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)):(this._playCallback=this.playHandler.bind(this),this.video.addEventListener("playing",this._playCallback,!0))),this.video.play(),this.onPlay.dispatch(this,e,t)),this},playHandler:function(){this.video.removeEventListener("playing",this._playCallback,!0),this.updateTexture()},stop:function(){return this.game.sound.onMute&&(this.game.sound.onMute.remove(this.setMute,this),this.game.sound.onUnMute.remove(this.unsetMute,this)),this.game.onPause.remove(this.setPause,this),this.game.onResume.remove(this.setResume,this),this.isStreaming?(this.video.mozSrcObject?(this.video.mozSrcObject.stop(),this.video.src=null):(this.video.src="",this.videoStream.active?this.videoStream.active=!1:this.videoStream.getTracks?this.videoStream.getTracks().forEach(function(e){e.stop()}):this.videoStream.stop()),this.videoStream=null,this.isStreaming=!1):(this.video.removeEventListener("ended",this._endCallback,!0),this.video.removeEventListener("webkitendfullscreen",this._endCallback,!0),this.video.removeEventListener("playing",this._playCallback,!0),this.touchLocked?this._pending=!1:this.video.pause()),this},add:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)e[t].loadTexture&&e[t].loadTexture(this);else e.loadTexture(this);return this},addToWorld:function(e,t,i,n,r,o){r=r||1,o=o||1;var a=this.game.add.image(e,t,this);return a.anchor.set(i,n),a.scale.set(r,o),a},render:function(){!this.disableTextureUpload&&this.playing&&this.baseTexture.dirty()},setMute:function(){this._muted||(this._muted=!0,this.video.muted=!0)},unsetMute:function(){this._muted&&!this._codeMuted&&(this._muted=!1,this.video.muted=!1)},setPause:function(){this._paused||this.touchLocked||(this._paused=!0,this.video.pause())},setResume:function(){!this._paused||this._codePaused||this.touchLocked||(this._paused=!1,this.video.ended||this.video.play())},changeSource:function(e,t){return void 0===t&&(t=!0),this.texture.valid=!1,this.video.pause(),this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval),this.video.src=e,this.video.load(),(this._autoplay=t)||(this.paused=!0),this},checkVideoProgress:function(){4===this.video.readyState?this.updateTexture():(this.retry--,0<this.retry&&(this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval)))},setTouchLock:function(){this.game.input.touch.addTouchLockCallback(this.unlock,this),this.touchLocked=!0},unlock:function(){if(this.touchLocked=!1,this.video.play(),this.onPlay.dispatch(this,this.loop,this.playbackRate),this.key){var e=this.game.cache.getVideo(this.key);e&&!e.isBlob&&(e.locked=!1)}return!0},grab:function(e,t,i){return void 0===e&&(e=!1),void 0===t&&(t=1),void 0===i&&(i=null),null===this.snapshot?void 0:(e&&this.snapshot.cls(),this.snapshot.copy(this.video,0,0,this.width,this.height,0,0,this.width,this.height,0,0,0,1,1,t,i),this.snapshot)},removeVideoElement:function(){if(this.video){for(this.video.parentNode&&this.video.parentNode.removeChild(this.video);this.video.hasChildNodes();)this.video.removeChild(this.video.firstChild);this.video.removeAttribute("autoplay"),this.video.removeAttribute("src"),this.video=null}},destroy:function(){this.stop(),this.removeVideoElement(),this.touchLocked&&this.game.input.touch.removeTouchLockCallback(this.unlock,this),this._retryID&&window.clearTimeout(this._retryID)}},Object.defineProperty(U.Video.prototype,"currentTime",{get:function(){return this.video?this.video.currentTime:0},set:function(e){this.video.currentTime=e}}),Object.defineProperty(U.Video.prototype,"duration",{get:function(){return this.video?this.video.duration:0}}),Object.defineProperty(U.Video.prototype,"progress",{get:function(){return this.video?this.video.currentTime/this.video.duration:0}}),Object.defineProperty(U.Video.prototype,"mute",{get:function(){return this._muted},set:function(e){if(e=e||null){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(U.Video.prototype,"paused",{get:function(){return this._paused},set:function(e){if(e=e||null,!this.touchLocked)if(e){if(this._paused)return;this._codePaused=!0,this.setPause()}else{if(!this._paused)return;this._codePaused=!1,this.setResume()}}}),Object.defineProperty(U.Video.prototype,"volume",{get:function(){return this.video?this.video.volume:1},set:function(e){e<0?e=0:1<e&&(e=1),this.video&&(this.video.volume=e)}}),Object.defineProperty(U.Video.prototype,"playbackRate",{get:function(){return this.video?this.video.playbackRate:1},set:function(e){this.video&&(this.video.playbackRate=e)}}),Object.defineProperty(U.Video.prototype,"loop",{get:function(){return!!this.video&&this.video.loop},set:function(e){e&&this.video?this.video.loop="loop":this.video&&(this.video.loop="")}}),Object.defineProperty(U.Video.prototype,"playing",{get:function(){return!(this.video.paused&&this.video.ended)}}),U.Video.prototype.constructor=U.Video,void 0===PIXI.blendModes&&(PIXI.blendModes=U.blendModes),void 0===PIXI.scaleModes&&(PIXI.scaleModes=U.scaleModes),void 0===PIXI.Texture.emptyTexture&&(PIXI.Texture.emptyTexture=new PIXI.Texture(new PIXI.BaseTexture)),void 0===PIXI.DisplayObject._tempMatrix&&(PIXI.DisplayObject._tempMatrix=new PIXI.Matrix),void 0===PIXI.RenderTexture.tempMatrix&&(PIXI.RenderTexture.tempMatrix=new PIXI.Matrix),PIXI.Graphics&&void 0===PIXI.Graphics.POLY&&(PIXI.Graphics.POLY=U.POLYGON,PIXI.Graphics.RECT=U.RECTANGLE,PIXI.Graphics.CIRC=U.CIRCLE,PIXI.Graphics.ELIP=U.ELLIPSE,PIXI.Graphics.RREC=U.ROUNDEDRECTANGLE),PIXI.TextureSilentFail=!0,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=U),exports.Phaser=U):"undefined"!=typeof define&&define.amd?define("Phaser",e.Phaser=U):e.Phaser=U,U}.call(this);var PhaserCachebuster,__extends=this&&this.__extends||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)};!function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.patchLoader(),i}return __extends(e,n),e.prototype.patchLoader=function(){Object.defineProperty(Phaser.Loader,"cacheBuster",{value:null}),Phaser.Loader.prototype.transformUrl=function(e,t){return e?(null!==this.cacheBuster&&null===e.match(/^(data:)/)&&(e+="?v="+this.cacheBuster),e.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?e:this.baseURL+t.path+e):""}},e}(Phaser.Plugin);e.CacheBuster=t}(PhaserCachebuster||(PhaserCachebuster={})),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.h5branding=e.h5branding||{})}(this,function(l){"use strict";var R="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t,r;e(function(e,t){e.exports=function(){function l(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,t=void 0,r=void 0,s=function(e,t){c[n]=e,c[n+1]=t,2===(n+=2)&&(r?r(d):x())},e="undefined"!=typeof window?window:void 0,o=e||{},a=o.MutationObserver||o.WebKitMutationObserver,p="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function u(){var e=setTimeout;return function(){return e(d,1)}}var c=new Array(1e3);function d(){for(var e=0;e<n;e+=2){var t=c[e],i=c[e+1];t(i),c[e]=void 0,c[e+1]=void 0}n=0}var _,y,m,f,x=void 0;function v(e,t){var i=this,n=new this.constructor(b);void 0===n[g]&&B(n);var r=i._state;if(r){var o=arguments[r-1];s(function(){return G(r,n,o,i._result)})}else A(i,n,e,t);return n}function z(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(b);return P(t,e),t}p?x=function(){return process.nextTick(d)}:a?(y=0,m=new a(d),f=document.createTextNode(""),m.observe(f,{characterData:!0}),x=function(){f.data=y=++y%2}):h?((_=new MessageChannel).port1.onmessage=d,x=function(){return _.port2.postMessage(0)}):x=void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0!==(t=e.runOnLoop||e.runOnContext)?function(){t(d)}:u()}catch(e){return u()}}():u();var g=Math.random().toString(36).substring(2);function b(){}var w=void 0,S=1,C=2;function M(e,t,i){var n,r,o,a;t.constructor===e.constructor&&i===v&&t.constructor.resolve===z?(o=e,(a=t)._state===S?T(o,a._result):a._state===C?O(o,a._result):A(a,void 0,function(e){return P(o,e)},function(e){return O(o,e)})):void 0===i?T(e,t):l(i)?(n=t,r=i,s(function(t){var i=!1,e=function(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}(r,n,function(e){i||(i=!0,n!==e?P(t,e):T(t,e))},function(e){i||(i=!0,O(t,e))},t._label);!i&&e&&(i=!0,O(t,e))},e)):T(e,t)}function P(t,e){if(t===e)O(t,new TypeError("You cannot resolve a promise with itself"));else if(r=typeof(n=e),null===n||"object"!==r&&"function"!==r)T(t,e);else{var i=void 0;try{i=e.then}catch(e){return void O(t,e)}M(t,e,i)}var n,r}function k(e){e._onerror&&e._onerror(e._result),E(e)}function T(e,t){e._state===w&&(e._result=t,e._state=S,0!==e._subscribers.length&&s(E,e))}function O(e,t){e._state===w&&(e._state=C,e._result=t,s(k,e))}function A(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+S]=i,r[o+C]=n,0===o&&e._state&&s(E,e)}function E(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?G(i,n,r,o):r(o);e._subscribers.length=0}}function G(e,t,i,n){var r=l(i),o=void 0,a=void 0,s=!0;if(r){try{o=i(n)}catch(e){s=!1,a=e}if(t===o)return void O(t,new TypeError("A promises callback cannot return that same promise."))}else o=n;t._state!==w||(r&&s?P(t,o):!1===s?O(t,a):e===S?T(t,o):e===C&&O(t,o))}var I=0;function B(e){e[g]=I++,e._state=void 0,e._result=void 0,e._subscribers=[]}var L=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[g]||B(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?T(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&T(this.promise,this._result))):O(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===w&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===z){var r=void 0,o=void 0,a=!1;try{r=t.then}catch(e){a=!0,o=e}if(r===v&&t._state!==w)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===D){var s=new i(b);a?O(s,o):M(s,t,r),this._willSettleAt(s,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},e.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===w&&(this._remaining--,e===C?O(n,i):this._result[t]=i),0===this._remaining&&T(n,this._result)},e.prototype._willSettleAt=function(e,t){var i=this;A(e,void 0,function(e){return i._settledAt(S,t,e)},function(e){return i._settledAt(C,t,e)})},e}(),D=function(){function t(e){this[g]=I++,this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){P(t,e)},function(e){O(t,e)})}catch(e){O(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var i=this.constructor;return l(t)?this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return D.prototype.then=v,D.all=function(e){return new L(this,e).promise},D.race=function(r){var o=this;return i(r)?new o(function(e,t){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(e,t)}):new o(function(e,t){return t(new TypeError("You must pass an array to race."))})},D.resolve=z,D.reject=function(e){var t=new this(b);return O(t,e),t},D._setScheduler=function(e){r=e},D._setAsap=function(e){s=e},D._asap=s,D.polyfill=function(){var e=void 0;if(void 0!==R)e=R;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=D},D.Promise=D}()}).polyfill();(t=l.BrandingDomain||(l.BrandingDomain={}))[t.Neutral=0]="Neutral",t[t.Yepi=1]="Yepi",t[t.Spele=2]="Spele",t[t.Funnygames=3]="Funnygames",t[t.Kizi=4]="Kizi",t[t.PlayCell=5]="PlayCell",t[t.GameCell=6]="GameCell",t[t.Bild=7]="Bild",t[t.AGame=8]="AGame",t[t.Admeen=9]="Admeen",t[t.PlayTime=10]="PlayTime",t[t.Zigiz=11]="Zigiz";var i,n=function(){function e(){}return e.has=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;var i=e.lastIndexOf(".",t-1);if(i<=0||t-1<=i)return!1;var n=r[e.slice(t+1)];return!!n&&0<=n.indexOf(" "+e.slice(i+1,t)+" ")},e.is=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return!1;if(0<=e.lastIndexOf(".",t-1))return!1;var i=r[e.slice(t+1)];return!!i&&0<=i.indexOf(" "+e.slice(0,t)+" ")},e.get=function(e){var t=e.lastIndexOf(".");if(t<=0||t>=e.length-1)return null;var i=e.lastIndexOf(".",t-1);if(i<=0||t-1<=i)return null;var n=r[e.slice(t+1)];return n?n.indexOf(" "+e.slice(i+1,t)+" ")<0?null:e.slice(i+1):null},e}(),o=function(){function e(){}return e.setList=function(e){r=e||{}},e.getDomain=function(e){if(!r)return null;var t=e.match(/\./g);if(t&&t.length<2)return e;var i=this.getTld(e);if(!i)return null;var n=e.length-i.length-1;return n=e.lastIndexOf(".",n-1)+1,e.substring(n)||""},e.getTld=function(e){if(!r)return"";var t=e.lastIndexOf("."),i=e.substring(t+1);return r[i.toLowerCase()]&&n.get(e)||i},e.KEY="Domains",e}(),a=function(){function e(){this.cache={}}return Object.defineProperty(e,"instance",{get:function(){return void 0===e.classInstance&&(e.classInstance=new e),e.classInstance},enumerable:!1,configurable:!0}),e.prototype.load=function(t,e,i){var n=this;return this.contains(t)?Promise.reject("Already in cache."):(this.cache[t]={url:e,data:null},this.requestXhr(e,i).then(function(e){return n.loadComplete(t,e)}).catch(function(e){return n.remove(t),Promise.reject(e)}))},e.prototype.loadComplete=function(e,t){if(!this.contains(e))return Promise.reject("Item was removed from cache before loading was complete.");try{var i=JSON.parse(t);return this.cache[e].data=i,Promise.resolve(i)}catch(e){return Promise.reject("There was an error parsing JSON file.")}},e.prototype.remove=function(e){this.contains(e)&&delete this.cache[e]},e.prototype.get=function(e){return this.contains(e)?this.cache[e].data:null},e.prototype.contains=function(e){return this.cache.hasOwnProperty(e)},e.prototype.isLoading=function(e){return this.contains(e)&&null===this.cache[e].data},e.prototype.isLoaded=function(e){return this.contains(e)&&null!==this.cache[e].data},e.prototype.loadScript=function(n,e,r){return void 0===e&&(e=!0),new Promise(function(e,t){var i=document.createElement("script");i.src=n,i.async=!1,i.onload=function(){"function"==typeof r&&r(),e()},document.head.appendChild(i)})},e.prototype.requestXhr=function(i,n){var r;return void 0===n&&(n="application/json"),window.XMLHttpRequest?(r=new XMLHttpRequest,new Promise(function(e,t){r.onreadystatechange=function(){4===r.readyState&&(200===r.status?(e(r.responseText),r.onreadystatechange=null):0<r.status&&(t("There was a problem with the request: status "+r.status),r.onreadystatechange=null))};try{r.open("GET",i,!0),r.setRequestHeader("Content-Type",n),r.send()}catch(e){t("Error: Unable to send request, CORS not allowed.")}})):Promise.reject("Unable to send request, XMLHttpRequest not supported.")},e}();function s(e,t,i){var n=document.createElement("script");n.setAttribute("src",e+"?v="+t),"function"==typeof i&&(n.onload=i),document.body.appendChild(n)}(i=l.UtmTargets||(l.UtmTargets={}))[i.splashscreen=0]="splashscreen",i[i.logo=1]="logo",i[i.facebook=2]="facebook",i[i.twitter=3]="twitter",i[i.playstore=4]="playstore",i[i.appstore=5]="appstore",i[i.more_games=6]="more_games",i[i.download_game=7]="download_game",i[i.walkthrough=8]="walkthrough",i[i.disclaimer=9]="disclaimer",i[i.highscores=10]="highscores";var p,h,c,d,_,y,m,f,x,v,z,g,b=function(){function e(){}return e.loadPortalScript=function(e){e&&e.hasOwnProperty("minijuegos")&&-1!==e.minijuegos.indexOf(S.getSourceSite())&&(void 0!==window.mpConfig?window.mpConfig.partner="orange-games":window.mpConfig={partner:"orange-games"},s("https://ext.minijuegosgratis.com/external-host/main.js",Date.now()/1e3)),e&&e.hasOwnProperty("kongregate")&&-1!==e.kongregate.indexOf(S.getSourceSite())&&s("https://cdn1.kongregate.com/javascripts/kongregate_api.js",Date.now()/1e3,function(){"undefined"!=typeof kongregateAPI&&kongregateAPI.loadAPI(function(){window.kongregate=kongregateAPI.getAPI()})}),e&&e.hasOwnProperty("newgrounds")&&-1!==e.newgrounds.indexOf(S.getSourceSite())&&s("https://cdn.fbrq.io/@azerion/splash/assets/scripts/newgroundsio.min.js",Date.now()/1e3)},e}(),w=function(){function s(){}return s.preload=function(e){var t=Promise.all([a.instance.load(o.KEY,S.ASSET_LOCATION+"json/domains.json?v="+e,"text/plain"),a.instance.load(s.SITELOCK_PORTALS,S.ASSET_LOCATION+"json/sitelock.json?v="+e,"text/plain")]);return Promise.all([a.instance.load(s.INTERNAL_PORTALS_KEY,S.ASSET_LOCATION+"json/internal.json?v="+e,"text/plain"),a.instance.load(s.CONTRACTED_PORTALS_KEY,S.ASSET_LOCATION+"json/contracted.json?v="+e,"text/plain"),a.instance.load(s.SPECIAL_PORTALS_KEY,S.ASSET_LOCATION+"json/special.json?v="+e,"text/plain")]),t.then(function(e){var t=e[0],i=e[1];o.setList(t),b.loadPortalScript(i),s.setSiteLock(i)}).catch(function(){})},s.setSiteLock=function(e){s.siteLocks=e},Object.defineProperty(s,"brandingLogoUrl",{get:function(){var e;switch(S.isOnDevice()||s.isAirfi()?S.ASSET_LOCATION="assets/":"fbrq.io"===S.getSourceSite(!0)&&(S.ASSET_LOCATION="https://"+window.location.host+"/@azerion/splash/assets/"),S.getBrandingDomain()){case l.BrandingDomain.Spele:e="spele";break;case l.BrandingDomain.PlayCell:e="playcell";break;case l.BrandingDomain.GameCell:e="gamecell";break;case l.BrandingDomain.Yepi:e="yepi";break;case l.BrandingDomain.Admeen:e="admeen";break;case l.BrandingDomain.Bild:e="bild";break;case l.BrandingDomain.Kizi:e="kizi";break;case l.BrandingDomain.Funnygames:e="funnygames";break;case l.BrandingDomain.PlayTime:e="playtime";break;default:case l.BrandingDomain.AGame:e="agame";break;case l.BrandingDomain.Zigiz:e="zigiz"}return S.ASSET_LOCATION+"images/branding_logo_"+e+"_small.png"},enumerable:!1,configurable:!0}),Object.defineProperty(s,"brandingBackgroundColor",{get:function(){var e;switch(S.getBrandingDomain()){case l.BrandingDomain.Spele:e="#4a72ad";break;case l.BrandingDomain.PlayCell:e="#52a1e1";break;case l.BrandingDomain.GameCell:e="#c600b2";break;case l.BrandingDomain.Yepi:e="#0573a7";break;case l.BrandingDomain.AGame:e="#0C486C";break;case l.BrandingDomain.Admeen:e="#4267B2";break;case l.BrandingDomain.Bild:e="#de0000";break;default:case l.BrandingDomain.Kizi:e="#012f50";break;case l.BrandingDomain.Funnygames:e="#33b0ff";break;case l.BrandingDomain.PlayTime:case l.BrandingDomain.Zigiz:e="#023a63"}return e},enumerable:!1,configurable:!0}),s.openCampaignLink=function(e,t){if(!S.isOnDevice()&&!s.isSpecial()&&s.outGoingLinksAllowed()){var i,n,r=S.getSourceSite(),o=S.isOnDevice()?"https://":"//";switch(S.getBrandingDomain()){case l.BrandingDomain.Spele:i=o+"www.spele.nl";break;case l.BrandingDomain.Yepi:i=o+"www.yepi.com";break;case l.BrandingDomain.Admeen:return i="https://media.admeen.com/branding/link.php",void((n=window.open(i,"_blank"))&&n.focus&&n.focus());case l.BrandingDomain.PlayCell:i=o+"www.playcell.com";break;case l.BrandingDomain.GameCell:i=o+"www.gamecell.com";break;case l.BrandingDomain.Kizi:i=o+"www.kizi.com";break;case l.BrandingDomain.Bild:return void((n=window.open(o+"www.bildspielt.de","_blank"))&&n.focus&&n.focus());case l.BrandingDomain.Funnygames:i=o+"www.funnygames.nu";break;case l.BrandingDomain.PlayTime:i=o+"playtime.nl";break;default:case l.BrandingDomain.AGame:i=o+"www.agame.com";break;case l.BrandingDomain.Zigiz:i=o+"m.zigiz.com"}var a="string"==typeof t?t:l.UtmTargets[t];(n=window.open(i+"/?utm_source="+r+"&utm_medium=html5&utm_term="+e+"&utm_content="+a+"&utm_campaign=Gamedistribution","_blank"))&&n.focus&&n.focus()}},s.isInternal=function(){return s.hostMatchesList(a.instance.get(s.INTERNAL_PORTALS_KEY))},s.isContracted=function(){return s.hostMatchesList(a.instance.get(s.CONTRACTED_PORTALS_KEY))},s.isSpecial=function(){return s.hostMatchesList(a.instance.get(s.SPECIAL_PORTALS_KEY))},s.isAdmeen=function(){if(!s.siteLocks||!s.siteLocks.hasOwnProperty("admeen"))return!1;var e=s.siteLocks.admeen;return s.hostMatchesList(e)},s.isKongregate=function(){if(!s.siteLocks||!s.siteLocks.hasOwnProperty("kongregate"))return!1;var e=s.siteLocks.kongregate;return s.hostMatchesList(e)},s.isNewgrounds=function(){if(!s.siteLocks||!s.siteLocks.hasOwnProperty("newgrounds"))return!1;var e=s.siteLocks.newgrounds;return s.hostMatchesList(e)},s.isBild=function(){return"bild.fbrq.io"===window.location.host||-1!==window.location.host.indexOf("contentfleet.com")},s.isPlaytime=function(){return-1!==window.location.host.indexOf("playtime.nl")},s.isBip=function(){return-1!==window.location.search.indexOf("bipgaming")||"bip.fbrq.io"===window.location.host},s.isPlaycellApp=function(){return-1!==window.location.search.indexOf("playcellApp")},s.isAGame=function(){return-1!==window.location.search.indexOf("agame")},s.isAirfi=function(){return!!window.hasOwnProperty("airfi")&&window.airfi},s.outGoingLinksAllowed=function(){return!(s.isAirfi()||s.isSpecial()||s.isContracted())&&(!window.hasOwnProperty("fbrqLA")||window.fbrqLA)},s.hostMatchesList=function(e){e=e||[];for(var t=S.getSourceSite(),i=0;i<e.length;i++)if(t===e[i])return!0;return!1},s.LOGO_KEY="branding_logo",s.INTERNAL_PORTALS_KEY="branding_portals",s.CONTRACTED_PORTALS_KEY="branding_contracted",s.SPECIAL_PORTALS_KEY="branding_special",s.SITELOCK_PORTALS="sitelock_portals",s.DOMAIN_OVERWRITE=null,s.analyticsEnabled=!0,s}(),S=function(){function n(){}return n.getSourceSite=function(e){void 0===e&&(e=!1);var t=document.referrer||window.location.host;if(e&&(t=window.location.host),-1!==t.indexOf("embed.gamedistribution.com")&&-1!==window.location.search.indexOf("gd_sdk_referrer_url")&&(t=n.getUrlParameter("gd_sdk_referrer_url")||t),t=decodeURIComponent(t),w.isBild())return"bildspielt.de";if(w.isBip())return"bipgaming.com";t=(t=-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0]).split(":")[0];var i=o.getDomain(t);return null!==i?i:(3===t.split(".").length&&(t=t.substr(t.indexOf(".")+1)),t)},n.getBrandingDomain=function(){if(window.hasOwnProperty("fbrqBD")&&window.fbrqBD in l.BrandingDomain)return window.fbrqBD;if(w.DOMAIN_OVERWRITE)return w.DOMAIN_OVERWRITE;var e=n.getSourceSite();if(w.isAdmeen())return l.BrandingDomain.Admeen;if(w.isPlaycellApp()||w.isBip())return l.BrandingDomain.PlayCell;switch(e){case"spele.nl":return l.BrandingDomain.Spele;case"yepi.com":return l.BrandingDomain.Yepi;case"oyunskor.com":case"barbioyunu.com.tr":case"bebekoyunu.com.tr":case"oyunkolu.com":case"oyungemisi.com":case"oyunlar1.com":case"oyunkuzusu.com":case"kraloyun.com":case"rekoroyun.com":case"oyundedem.com":case"oyunoyna.com":case"pastaoyunu.com.tr":case"playcell.com":return l.BrandingDomain.PlayCell;case"gamecell.com":return l.BrandingDomain.GameCell;case"playxl.com":return l.BrandingDomain.Admeen;case"kizi.com":return l.BrandingDomain.Kizi;case"bildspielt.de":return l.BrandingDomain.Bild;case"funnygames.nl":return l.BrandingDomain.Funnygames;case"playtime.nl":return l.BrandingDomain.PlayTime;default:case"agame.com":return l.BrandingDomain.AGame;case"gmbl.nl":case"zigiz.com":return l.BrandingDomain.Zigiz;case"coolmathgames.com":return l.BrandingDomain.Neutral}},n.getReferrer=function(e){return-1!==e.indexOf("?ref=")?e.substr(e.indexOf("?ref=")+5):e},n.inIframe=function(){try{return window.self!==window.top}catch(e){return!0}},n.inGDGameZone=function(){return-1!==document.referrer.indexOf("html5.gamedistribution.com")},n.getDomain=function(e){var t=document.createElement("a");return t.href=e,t.origin},n.isOnDevice=function(){return void 0!==window.cordova&&!/(gamedistribution\.com)/.test(window.location.hostname)},n.isTc=function(){return/(teamcity\.azerdev\.com)/.test(window.location.host)},n.getRandomRange=function(e,t){return Math.random()*(t-e)+e|0},n.getUrlParameter=function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},n.intTimeToString=function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=e%60;return(t<10?"0"+t:t.toString())+":"+(i<10?"0"+i:i.toString())+":"+(n<10?"0"+n:n.toString())},n.LANGUAGE="en",n.ASSET_LOCATION=window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/":"https://cdn.fbrq.io/@azerion/splash/assets/",n}(),C=function(){function r(){this.fbrqId="UA-60359297-50"}return r.addScript=function(){return w.analyticsEnabled?new Promise(function(e,t){var i=document.createElement("script"),n="patch/js/null.js?https://www.googletagmanager.com/gtag/js?id="+r.GAMeasurementId;i.setAttribute("src",n),i.async=!0,i.onload=function(){e({loaded:!0})},document.head.appendChild(i)}):Promise.resolve()},r.preload=function(){return w.analyticsEnabled&&r.addScript().then(function(i,e){return new Promise(function(e,t){i.loaded&&(window.hasOwnProperty("dataLayer")&&(window.dataLayer=window.dataLayer||[]),gtag=function(){window.hasOwnProperty("dataLayer")&&window.dataLayer.push(arguments)}),e()})}),Promise.resolve()},r.prototype.setup=function(e,t,i,n,r){if(void 0===t&&(t="none"),void 0===i&&(i="none"),void 0===n&&(n="auto"),void 0===r&&(r=100),"function"!=typeof gtag)return null;if(!w.analyticsEnabled){var o="ga-disable-"+e;return window.hasOwnProperty(o)&&(window.disableID=!w.analyticsEnabled),null}var a="none";w.isAGame()&&(a=S.getReferrer(decodeURIComponent(document.referrer))),gtag("js",new Date),gtag("set","user_properties",{app_name:t,app_version:i,referrer:a}),gtag("config",e,{sample_rate:r});var s={name:"fbrq",sample_rate:1,referrer:a,app_name:"All"};if("auto"!==n)for(var l in n)n.hasOwnProperty(l)&&(s[l]=n[l]);return gtag("config",this.fbrqId,s),gtag},r.prototype.sendScreenView=function(e){w.analyticsEnabled&&("undefined"==typeof gtag&&"function"!=typeof gtag||(gtag("event","screen_view",{screen_name:e}),gtag("event","screen_view",{send_to:this.fbrqId,screen_name:e})))},r.prototype.sendGenericEvent=function(e,t,i){w.analyticsEnabled&&("undefined"==typeof gtag&&"function"!=typeof gtag||(gtag("event",t,{event_category:e,event_label:i}),gtag("event",t,{send_to:this.fbrqId,event_category:e,event_label:i})))},r.GAMeasurementId="none",r}(),M=M||function(s,e){var t={},i=t.lib={},n=function(){},r=i.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),(t.init.prototype=t).$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=i.WordArray=r.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,i=e.words,n=this.sigBytes;if(e=e.sigBytes,this.clamp(),n%4)for(var r=0;r<e;r++)t[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<e;r+=4)t[n+r>>>2]=i[r>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var e=this.words,t=this.sigBytes;e[t>>>2]&=4294967295<<32-t%4*8,e.length=s.ceil(t/4)},clone:function(){var e=r.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],i=0;i<e;i+=4)t.push(4294967296*s.random()|0);return new l.init(t,e)}}),o=t.enc={},a=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++){var r=t[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n+=2)i[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new l.init(i,t/2)}},p=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],n=0;n<e;n++)i.push(String.fromCharCode(t[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new l.init(i,t)}},h=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(p.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return p.parse(unescape(encodeURIComponent(e)))}},u=i.BufferedBlockAlgorithm=r.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(e){var t=this._data,i=t.words,n=t.sigBytes,r=this.blockSize,o=n/(4*r);if(e=(o=e?s.ceil(o):s.max((0|o)-this._minBufferSize,0))*r,n=s.min(4*e,n),e){for(var a=0;a<e;a+=r)this._doProcessBlock(i,a);a=i.splice(0,e),t.sigBytes-=n}return new l.init(a,n)},clone:function(){var e=r.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=u.extend({cfg:r.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){u.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(i){return function(e,t){return new i.init(t).finalize(e)}},_createHmacHelper:function(i){return function(e,t){return new c.HMAC.init(i,t).finalize(e)}}});var c=t.algo={};return t}(Math);!function(r){for(var e=M,t=(n=e.lib).WordArray,i=n.Hasher,n=e.algo,o=[],_=[],a=function(e){return 4294967296*(e-(0|e))|0},s=2,l=0;l<64;){var p;e:{p=s;for(var h=r.sqrt(p),u=2;u<=h;u++)if(!(p%u)){p=!1;break e}p=!0}p&&(l<8&&(o[l]=a(r.pow(s,.5))),_[l]=a(r.pow(s,1/3)),l++),s++}var y=[];n=n.SHA256=i.extend({_doReset:function(){this._hash=new t.init(o.slice(0))},_doProcessBlock:function(e,t){for(var i=this._hash.words,n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],p=i[6],h=i[7],u=0;u<64;u++){if(u<16)y[u]=0|e[t+u];else{var c=y[u-15],d=y[u-2];y[u]=((c<<25|c>>>7)^(c<<14|c>>>18)^c>>>3)+y[u-7]+((d<<15|d>>>17)^(d<<13|d>>>19)^d>>>10)+y[u-16]}c=h+((s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25))+(s&l^~s&p)+_[u]+y[u],d=((n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22))+(n&r^n&o^r&o),h=p,p=l,l=s,s=a+c|0,a=o,o=r,r=n,n=c+d|0}i[0]=i[0]+n|0,i[1]=i[1]+r|0,i[2]=i[2]+o|0,i[3]=i[3]+a|0,i[4]=i[4]+s|0,i[5]=i[5]+l|0,i[6]=i[6]+p|0,i[7]=i[7]+h|0},_doFinalize:function(){var e=this._data,t=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=r.floor(i/4294967296),t[15+(n+64>>>9<<4)]=i,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});e.SHA256=i._createHelper(n),e.HmacSHA256=i._createHmacHelper(n)}(Math),h=(p=M).enc.Utf8,p.algo.HMAC=p.lib.Base.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=h.parse(t));var i=e.blockSize,n=4*i;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var r=this._oKey=t.clone(),o=this._iKey=t.clone(),a=r.words,s=o.words,l=0;l<i;l++)a[l]^=1549556828,s[l]^=909522486;r.sigBytes=o.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}}),d=(c=M).lib.WordArray,c.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,n=this._map;e.clamp(),e=[];for(var r=0;r<i;r+=3)for(var o=(t[r>>>2]>>>24-r%4*8&255)<<16|(t[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|t[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;a<4&&r+.75*a<i;a++)e.push(n.charAt(o>>>6*(3-a)&63));if(t=n.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map;(n=i.charAt(64))&&-1!=(n=e.indexOf(n))&&(t=n);for(var n=[],r=0,o=0;o<t;o++)if(o%4){var a=i.indexOf(e.charAt(o-1))<<o%4*2,s=i.indexOf(e.charAt(o))>>>6-o%4*2;n[r>>>2]|=(a|s)<<24-r%4*8,r++}return d.create(n,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},_=Be||(Be={}),(y=_.EGAErrorSeverity||(_.EGAErrorSeverity={}))[y.Undefined=0]="Undefined",y[y.Debug=1]="Debug",y[y.Info=2]="Info",y[y.Warning=3]="Warning",y[y.Error=4]="Error",y[y.Critical=5]="Critical",(m=_.EGAGender||(_.EGAGender={}))[m.Undefined=0]="Undefined",m[m.Male=1]="Male",m[m.Female=2]="Female",(f=_.EGAProgressionStatus||(_.EGAProgressionStatus={}))[f.Undefined=0]="Undefined",f[f.Start=1]="Start",f[f.Complete=2]="Complete",f[f.Fail=3]="Fail",(x=_.EGAResourceFlowType||(_.EGAResourceFlowType={}))[x.Undefined=0]="Undefined",x[x.Source=1]="Source",x[x.Sink=2]="Sink",v=_.http||(_.http={}),(z=v.EGASdkErrorType||(v.EGASdkErrorType={}))[z.Undefined=0]="Undefined",z[z.Rejected=1]="Rejected",(g=v.EGAHTTPApiResponse||(v.EGAHTTPApiResponse={}))[g.NoResponse=0]="NoResponse",g[g.BadResponse=1]="BadResponse",g[g.RequestTimeout=2]="RequestTimeout",g[g.JsonEncodeFailed=3]="JsonEncodeFailed",g[g.JsonDecodeFailed=4]="JsonDecodeFailed",g[g.InternalServerError=5]="InternalServerError",g[g.BadRequest=6]="BadRequest",g[g.Unauthorized=7]="Unauthorized",g[g.UnknownResponseCode=8]="UnknownResponseCode",g[g.Ok=9]="Ok";var P,k,T,O,A,E,G,I,B,L,D,F,j,N,U,V,H,W,X,q,Y,K,Z,J,Q,$,ee,te,ie,ne,re,oe,ae,se,le,pe,he,ue,ce,de,_e,ye,me,fe,xe,ve,ze,ge,be,we,Se,Ce,Me,Pe,ke,Te,Oe,Ae,Ee,Ge,Ie,Be,Le,De,Re,Fe,je,Ne,Ue,Ve,He,We,Xe,qe;Be.EGAErrorSeverity,Be.EGAGender,Be.EGAProgressionStatus,Be.EGAResourceFlowType;(function(e){var n,t;(t=n||(n={}))[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Debug=3]="Debug";var i=function(){function i(){i.debugEnabled=!1}return i.setInfoLog=function(e){i.instance.infoLogEnabled=e},i.setVerboseLog=function(e){i.instance.infoLogVerboseEnabled=e},i.i=function(e){if(i.instance.infoLogEnabled){var t="Info/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Info)}},i.w=function(e){var t="Warning/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Warning)},i.e=function(e){var t="Error/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Error)},i.ii=function(e){if(i.instance.infoLogVerboseEnabled){var t="Verbose/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Info)}},i.d=function(e){if(i.debugEnabled){var t="Debug/"+i.Tag+": "+e;i.instance.sendNotificationMessage(t,n.Debug)}},i.prototype.sendNotificationMessage=function(e,t){switch(t){case n.Error:case n.Warning:break;case n.Debug:console.debug;break;case n.Info:}},i.instance=new i,i.Tag="GameAnalytics",i}();e.GALogger=i})((P=Be||(Be={})).logging||(P.logging={})),k=Be||(Be={}),T=k.utilities||(k.utilities={}),O=k.logging.GALogger,A=function(){function h(){}return h.getHmac=function(e,t){var i=M.HmacSHA256(t,e);return M.enc.Base64.stringify(i)},h.stringMatch=function(e,t){return!(!e||!t)&&t.test(e)},h.joinStringArray=function(e,t){for(var i="",n=0,r=e.length;n<r;n++)0<n&&(i+=t),i+=e[n];return i},h.stringArrayContainsString=function(e,t){if(0===e.length)return!1;for(var i in e)if(e[i]===t)return!0;return!1},h.encode64=function(e){e=encodeURI(e);for(var t,i,n,r,o,a="",s=0,l=0,p=0;n=(t=e.charCodeAt(p++))>>2,r=(3&t)<<4|(i=e.charCodeAt(p++))>>4,o=(15&i)<<2|(s=e.charCodeAt(p++))>>6,l=63&s,isNaN(i)?o=l=64:isNaN(s)&&(l=64),a=a+h.keyStr.charAt(n)+h.keyStr.charAt(r)+h.keyStr.charAt(o)+h.keyStr.charAt(l),t=i=s=0,n=r=o=l=0,p<e.length;);return a},h.decode64=function(e){var t,i,n,r,o="",a=0,s=0,l=0;for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&O.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=h.keyStr.indexOf(e.charAt(l++))<<2|(n=h.keyStr.indexOf(e.charAt(l++)))>>4,i=(15&n)<<4|(r=h.keyStr.indexOf(e.charAt(l++)))>>2,a=(3&r)<<6|(s=h.keyStr.indexOf(e.charAt(l++))),o+=String.fromCharCode(t),64!=r&&(o+=String.fromCharCode(i)),64!=s&&(o+=String.fromCharCode(a)),t=i=a=0,n=r=s=0,l<e.length;);return decodeURI(o)},h.timeIntervalSince1970=function(){var e=new Date;return Math.round(e.getTime()/1e3)},h.createGuid=function(){return(h.s4()+h.s4()+"-"+h.s4()+"-4"+h.s4().substr(0,3)+"-"+h.s4()+"-"+h.s4()+h.s4()+h.s4()).toLowerCase()},h.s4=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},h.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h}(),T.GAUtilities=A,E=Be||(Be={}),G=E.validators||(E.validators={}),I=E.logging.GALogger,B=E.http.EGASdkErrorType,L=E.utilities.GAUtilities,D=function(){function s(){}return s.validateBusinessEvent=function(e,t,i,n,r){return s.validateCurrency(e)?t<0?(I.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: "+t),!1):s.validateShortString(i,!0)?s.validateEventPartLength(n,!1)?s.validateEventPartCharacters(n)?s.validateEventPartLength(r,!1)?!!s.validateEventPartCharacters(r)||(I.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1):(I.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: "+r),!1):(I.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+n),!1):(I.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: "+n),!1):(I.w("Validation fail - business event - cartType. Cannot be above 32 length. String: "+i),!1):(I.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: "+e),!1)},s.validateResourceEvent=function(e,t,i,n,r,o,a){return e==E.EGAResourceFlowType.Undefined?(I.w("Validation fail - resource event - flowType: Invalid flow type."),!1):t?L.stringArrayContainsString(o,t)?0<i?n?s.validateEventPartLength(n,!1)?s.validateEventPartCharacters(n)?L.stringArrayContainsString(a,n)?s.validateEventPartLength(r,!1)?!!s.validateEventPartCharacters(r)||(I.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+r),!1):(I.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: "+r),!1):(I.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: "+n),!1):(I.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+n),!1):(I.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: "+n),!1):(I.w("Validation fail - resource event - itemType: Cannot be (null)"),!1):(I.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: "+i),!1):(I.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: "+t),!1):(I.w("Validation fail - resource event - currency: Cannot be (null)"),!1)},s.validateProgressionEvent=function(e,t,i,n){if(e==E.EGAProgressionStatus.Undefined)return I.w("Validation fail - progression event: Invalid progression status."),!1;if(n&&!i&&t)return I.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."),!1;if(i&&!t)return I.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"),!1;if(!t)return I.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"),!1;if(!s.validateEventPartLength(t,!1))return I.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: "+t),!1;if(!s.validateEventPartCharacters(t))return I.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+t),!1;if(i){if(!s.validateEventPartLength(i,!0))return I.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: "+i),!1;if(!s.validateEventPartCharacters(i))return I.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+i),!1}if(n){if(!s.validateEventPartLength(n,!0))return I.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: "+n),!1;if(!s.validateEventPartCharacters(n))return I.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: "+n),!1}return!0},s.validateDesignEvent=function(e,t){return s.validateEventIdLength(e)?!!s.validateEventIdCharacters(e)||(I.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: "+e),!1):(I.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: "+e),!1)},s.validateErrorEvent=function(e,t){return e==E.EGAErrorSeverity.Undefined?(I.w("Validation fail - error event - severity: Severity was unsupported value."),!1):!!s.validateLongString(t,!0)||(I.w("Validation fail - error event - message: Message cannot be above 8192 characters."),!1)},s.validateSdkErrorEvent=function(e,t,i){return!(!s.validateKeys(e,t)||i===B.Undefined&&(I.w("Validation fail - sdk error event - type: Type was unsupported value."),1))},s.validateKeys=function(e,t){return!(!L.stringMatch(e,/^[A-z0-9]{32}$/)||!L.stringMatch(t,/^[A-z0-9]{40}$/))},s.validateCurrency=function(e){return!!e&&!!L.stringMatch(e,/^[A-Z]{3}$/)},s.validateEventPartLength=function(e,t){return!(!t||e)||!!e&&!(64<e.length)},s.validateEventPartCharacters=function(e){return!!L.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/)},s.validateEventIdLength=function(e){return!!e&&!!L.stringMatch(e,/^[^:]{1,64}(?::[^:]{1,64}){0,4}$/)},s.validateEventIdCharacters=function(e){return!!e&&!!L.stringMatch(e,/^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/)},s.validateAndCleanInitRequestResponse=function(t){if(null==t)return I.w("validateInitRequestResponse failed - no response dictionary."),null;var e={};try{e.enabled=t.enabled}catch(e){return I.w("validateInitRequestResponse failed - invalid type in 'enabled' field."),null}try{var i=t.server_ts;if(!(0<i))return I.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."),null;e.server_ts=i}catch(e){return I.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type="+typeof t.server_ts+", value="+t.server_ts+", "+e),null}try{var n=t.configurations;e.configurations=n}catch(e){return I.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type="+typeof t.configurations+", value="+t.configurations+", "+e),null}return e},s.validateBuild=function(e){return!!s.validateShortString(e,!1)},s.validateSdkWrapperVersion=function(e){return!!L.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/)},s.validateEngineVersion=function(e){return!(!e||!L.stringMatch(e,/^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/))},s.validateUserId=function(e){return!!s.validateString(e,!1)||(I.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."),!1)},s.validateShortString=function(e,t){return!(!t||e)||!(!e||32<e.length)},s.validateString=function(e,t){return!(!t||e)||!(!e||64<e.length)},s.validateLongString=function(e,t){return!(!t||e)||!(!e||8192<e.length)},s.validateConnectionType=function(e){return L.stringMatch(e,/^(wwan|wifi|lan|offline)$/)},s.validateCustomDimensions=function(e){return s.validateArrayOfStrings(20,32,!1,"custom dimensions",e)},s.validateResourceCurrencies=function(e){if(!s.validateArrayOfStrings(20,64,!1,"resource currencies",e))return!1;for(var t=0;t<e.length;++t)if(!L.stringMatch(e[t],/^[A-Za-z]+$/))return I.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: "+e[t]),!1;return!0},s.validateResourceItemTypes=function(e){if(!s.validateArrayOfStrings(20,32,!1,"resource item types",e))return!1;for(var t=0;t<e.length;++t)if(!s.validateEventPartCharacters(e[t]))return I.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: "+e[t]),!1;return!0},s.validateDimension01=function(e,t){return!e||!!L.stringArrayContainsString(t,e)},s.validateDimension02=function(e,t){return!e||!!L.stringArrayContainsString(t,e)},s.validateDimension03=function(e,t){return!e||!!L.stringArrayContainsString(t,e)},s.validateArrayOfStrings=function(e,t,i,n,r){var o=n;if(o||(o="Array"),!r)return I.w(o+" validation failed: array cannot be null. "),!1;if(0==i&&0==r.length)return I.w(o+" validation failed: array cannot be empty. "),!1;if(0<e&&r.length>e)return I.w(o+" validation failed: array cannot exceed "+e+" values. It has "+r.length+" values."),!1;for(var a=0;a<r.length;++a){var s=r[a]?r[a].length:0;if(0===s)return I.w(o+" validation failed: contained an empty string. Array="+JSON.stringify(r)),!1;if(0<t&&t<s)return I.w(o+" validation failed: a string exceeded max allowed length (which is: "+t+"). String was: "+r[a]),!1}return!0},s.validateFacebookId=function(e){return!!s.validateString(e,!1)||(I.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."),!1)},s.validateGender=function(e){if(isNaN(Number(E.EGAGender[e]))){if(e==E.EGAGender.Undefined||e!=E.EGAGender.Male&&e!=E.EGAGender.Female)return I.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+e),!1}else if(e==E.EGAGender[E.EGAGender.Undefined]||e!=E.EGAGender[E.EGAGender.Male]&&e!=E.EGAGender[E.EGAGender.Female])return I.w("Validation fail - gender: Has to be 'male' or 'female'. Was: "+e),!1;return!0},s.validateBirthyear=function(e){return!(e<0||9999<e)||(I.w("Validation fail - birthYear: Cannot be (null) or invalid range."),!1)},s.validateClientTs=function(e){return!(e<-4294967294||4294967294<e)},s}(),G.GAValidator=D,function(e){var t=function(e,t,i){this.name=e,this.value=t,this.version=i};e.NameValueVersion=t;var h=function(e,t){this.name=e,this.version=t};e.NameVersion=h;var i=function(){function r(){}return r.touch=function(){},r.getRelevantSdkVersion=function(){return r.sdkGameEngineVersion?r.sdkGameEngineVersion:r.sdkWrapperVersion},r.getConnectionType=function(){return r.connectionType},r.updateConnectionType=function(){r.connectionType=navigator.onLine?"ios"===r.buildPlatform||"android"===r.buildPlatform?"wwan":"lan":"offline"},r.getOSVersionString=function(){return r.buildPlatform+" "+r.osVersionPair.version},r.runtimePlatformToString=function(){return r.osVersionPair.name},r.getBrowserVersionString=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i)||[];if(0==i.length&&"ios"===r.buildPlatform)return"webkit_"+r.osVersion;if(/trident/i.test(i[1]))return"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||"");if("Chrome"===i[1]&&null!=(e=t.match(/\b(OPR|Edge|UBrowser)\/(\d+)/)))return e.slice(1).join(" ").replace("OPR","Opera").replace("UBrowser","UC").toLowerCase();if(i[1]&&"fbav"===i[1].toLowerCase()&&(i[1]="facebook",i[2]))return"facebook "+i[2];var n=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"];return null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" ").toLowerCase()},r.getDeviceModel=function(){return"unknown"},r.getDeviceManufacturer=function(){return"unknown"},r.matchItem=function(e,t){var i,n,r,o,a=new h("unknown","0.0.0"),s=0,l=0;for(s=0;s<t.length;s+=1)if(new RegExp(t[s].value,"i").test(e)){if(i=new RegExp(t[s].version+"[- /:;]([\\d._]+)","i"),o="",(n=e.match(i))&&n[1]&&(r=n[1]),r){var p=r.split(/[._]+/);for(l=0;l<Math.min(p.length,3);l+=1)o+=p[l]+(l<Math.min(p.length,3)-1?".":"")}else o="0.0.0";return a.name=t[s].name,a.version=o,a}return a},r.sdkWrapperVersion="javascript 3.1.2",r.osVersionPair=r.matchItem([navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor].join(" "),[new t("windows_phone","Windows Phone","OS"),new t("windows","Win","NT"),new t("ios","iPhone","OS"),new t("ios","iPad","OS"),new t("ios","iPod","OS"),new t("android","Android","Android"),new t("blackBerry","BlackBerry","/"),new t("mac_osx","Mac","OS X"),new t("tizen","Tizen","Tizen"),new t("linux","Linux","rv")]),r.buildPlatform=r.runtimePlatformToString(),r.deviceModel=r.getDeviceModel(),r.deviceManufacturer=r.getDeviceManufacturer(),r.osVersion=r.getOSVersionString(),r.browserVersion=r.getBrowserVersionString(),r.maxSafeInteger=Math.pow(2,53)-1,r}();e.GADevice=i}((F=Be||(Be={})).device||(F.device={})),j=Be||(Be={}),N=j.threading||(j.threading={}),U=function(){function t(e){this.deadline=e,this.ignore=!1,this.async=!1,this.running=!1,this.id=++t.idCounter}return t.idCounter=0,t}(),N.TimedBlock=U,V=Be||(Be={}),H=V.threading||(V.threading={}),W=function(){function e(e){this.comparer=e,this._subQueues={},this._sortedKeys=[]}return e.prototype.enqueue=function(e,t){-1===this._sortedKeys.indexOf(e)&&this.addQueueOfPriority(e),this._subQueues[e].push(t)},e.prototype.addQueueOfPriority=function(e){var i=this;this._sortedKeys.push(e),this._sortedKeys.sort(function(e,t){return i.comparer.compare(e,t)}),this._subQueues[e]=[]},e.prototype.peek=function(){if(this.hasItems())return this._subQueues[this._sortedKeys[0]][0];throw new Error("The queue is empty")},e.prototype.hasItems=function(){return 0<this._sortedKeys.length},e.prototype.dequeue=function(){if(this.hasItems())return this.dequeueFromHighPriorityQueue();throw new Error("The queue is empty")},e.prototype.dequeueFromHighPriorityQueue=function(){var e=this._sortedKeys[0],t=this._subQueues[e].shift();return 0===this._subQueues[e].length&&(this._sortedKeys.shift(),delete this._subQueues[e]),t},e}(),H.PriorityQueue=W,function(e){var c,t,i,n,r=X.logging.GALogger;(t=c=e.EGAStoreArgsOperator||(e.EGAStoreArgsOperator={}))[t.Equal=0]="Equal",t[t.LessOrEqual=1]="LessOrEqual",t[t.NotEqual=2]="NotEqual",(n=i=e.EGAStore||(e.EGAStore={}))[n.Events=0]="Events",n[n.Sessions=1]="Sessions",n[n.Progression=2]="Progression";var o=function(){function u(){this.eventsStore=[],this.sessionsStore=[],this.progressionStore=[],this.storeItems={};try{"object"==typeof localStorage?(localStorage.setItem("testingLocalStorage","yes"),localStorage.removeItem("testingLocalStorage"),u.storageAvailable=!0):u.storageAvailable=!1}catch(e){}}return u.isStorageAvailable=function(){return u.storageAvailable},u.isStoreTooLargeForEvents=function(){return u.instance.eventsStore.length+u.instance.sessionsStore.length>u.MaxNumberOfEntries},u.select=function(e,t,i,n){void 0===t&&(t=[]),void 0===i&&(i=!1),void 0===n&&(n=0);var r=u.getStore(e);if(!r)return null;for(var o=[],a=0;a<r.length;++a){for(var s=r[a],l=!0,p=0;p<t.length;++p){var h=t[p];if(s[h[0]])switch(h[1]){case c.Equal:l=s[h[0]]==h[2];break;case c.LessOrEqual:l=s[h[0]]<=h[2];break;case c.NotEqual:l=s[h[0]]!=h[2];break;default:l=!1}else l=!1;if(!l)break}l&&o.push(s)}return i&&o.sort(function(e,t){return e.client_ts-t.client_ts}),0<n&&o.length>n&&(o=o.slice(0,n+1)),o},u.update=function(e,t,i){void 0===i&&(i=[]);var n=u.getStore(e);if(!n)return!1;for(var r=0;r<n.length;++r){for(var o=n[r],a=!0,s=0;s<i.length;++s){var l=i[s];if(o[l[0]])switch(l[1]){case c.Equal:a=o[l[0]]==l[2];break;case c.LessOrEqual:a=o[l[0]]<=l[2];break;case c.NotEqual:a=o[l[0]]!=l[2];break;default:a=!1}else a=!1;if(!a)break}if(a)for(s=0;s<t.length;++s){var p=t[s];o[p[0]]=p[1]}}return!0},u.delete=function(e,t){var i=u.getStore(e);if(i)for(var n=0;n<i.length;++n){for(var r=i[n],o=!0,a=0;a<t.length;++a){var s=t[a];if(r[s[0]])switch(s[1]){case c.Equal:o=r[s[0]]==s[2];break;case c.LessOrEqual:o=r[s[0]]<=s[2];break;case c.NotEqual:o=r[s[0]]!=s[2];break;default:o=!1}else o=!1;if(!o)break}o&&(i.splice(n,1),--n)}},u.insert=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=null);var r=u.getStore(e);if(r)if(i){if(!n)return;for(var o=!1,a=0;a<r.length;++a){var s=r[a];if(s[n]==t[n]){for(var l in t)s[l]=t[l];o=!0;break}}o||r.push(t)}else r.push(t)},u.save=function(){u.isStorageAvailable()?(localStorage.setItem(u.KeyPrefix+u.EventsStoreKey,JSON.stringify(u.instance.eventsStore)),localStorage.setItem(u.KeyPrefix+u.SessionsStoreKey,JSON.stringify(u.instance.sessionsStore)),localStorage.setItem(u.KeyPrefix+u.ProgressionStoreKey,JSON.stringify(u.instance.progressionStore)),localStorage.setItem(u.KeyPrefix+u.ItemsStoreKey,JSON.stringify(u.instance.storeItems))):r.w("Storage is not available, cannot save.")},u.load=function(){if(u.isStorageAvailable()){try{u.instance.eventsStore=JSON.parse(localStorage.getItem(u.KeyPrefix+u.EventsStoreKey)),u.instance.eventsStore||(u.instance.eventsStore=[])}catch(e){r.w("Load failed for 'events' store. Using empty store."),u.instance.eventsStore=[]}try{u.instance.sessionsStore=JSON.parse(localStorage.getItem(u.KeyPrefix+u.SessionsStoreKey)),u.instance.sessionsStore||(u.instance.sessionsStore=[])}catch(e){r.w("Load failed for 'sessions' store. Using empty store."),u.instance.sessionsStore=[]}try{u.instance.progressionStore=JSON.parse(localStorage.getItem(u.KeyPrefix+u.ProgressionStoreKey)),u.instance.progressionStore||(u.instance.progressionStore=[])}catch(e){r.w("Load failed for 'progression' store. Using empty store."),u.instance.progressionStore=[]}try{u.instance.storeItems=JSON.parse(localStorage.getItem(u.KeyPrefix+u.ItemsStoreKey)),u.instance.storeItems||(u.instance.storeItems={})}catch(e){r.w("Load failed for 'items' store. Using empty store."),u.instance.progressionStore=[]}}else r.w("Storage is not available, cannot load.")},u.setItem=function(e,t){var i=u.KeyPrefix+e;t?u.instance.storeItems[i]=t:i in u.instance.storeItems&&delete u.instance.storeItems[i]},u.getItem=function(e){var t=u.KeyPrefix+e;return t in u.instance.storeItems?u.instance.storeItems[t]:null},u.getStore=function(e){switch(e){case i.Events:return u.instance.eventsStore;case i.Sessions:return u.instance.sessionsStore;case i.Progression:return u.instance.progressionStore;default:return r.w("GAStore.getStore(): Cannot find store: "+e),null}},u.instance=new u,u.MaxNumberOfEntries=2e3,u.KeyPrefix="GA::",u.EventsStoreKey="ga_event",u.SessionsStoreKey="ga_session",u.ProgressionStoreKey="ga_progression",u.ItemsStoreKey="ga_items",u}();e.GAStore=o}((X=Be||(Be={})).store||(X.store={})),q=Be||(Be={}),Y=q.state||(q.state={}),K=q.validators.GAValidator,Z=q.utilities.GAUtilities,J=q.logging.GALogger,Q=q.store.GAStore,$=q.device.GADevice,ee=q.store.EGAStore,te=q.store.EGAStoreArgsOperator,ie=function(){function h(){this.availableCustomDimensions01=[],this.availableCustomDimensions02=[],this.availableCustomDimensions03=[],this.availableResourceCurrencies=[],this.availableResourceItemTypes=[],this.configurations={},this.commandCenterListeners=[],this.sdkConfigDefault={},this.sdkConfig={},this.progressionTries={},this._isEventSubmissionEnabled=!0}return h.setUserId=function(e){h.instance.userId=e,h.cacheIdentifier()},h.getIdentifier=function(){return h.instance.identifier},h.isInitialized=function(){return h.instance.initialized},h.setInitialized=function(e){h.instance.initialized=e},h.getSessionStart=function(){return h.instance.sessionStart},h.getSessionNum=function(){return h.instance.sessionNum},h.getTransactionNum=function(){return h.instance.transactionNum},h.getSessionId=function(){return h.instance.sessionId},h.getCurrentCustomDimension01=function(){return h.instance.currentCustomDimension01},h.getCurrentCustomDimension02=function(){return h.instance.currentCustomDimension02},h.getCurrentCustomDimension03=function(){return h.instance.currentCustomDimension03},h.getGameKey=function(){return h.instance.gameKey},h.getGameSecret=function(){return h.instance.gameSecret},h.getAvailableCustomDimensions01=function(){return h.instance.availableCustomDimensions01},h.setAvailableCustomDimensions01=function(e){K.validateCustomDimensions(e)&&(h.instance.availableCustomDimensions01=e,h.validateAndFixCurrentDimensions(),J.i("Set available custom01 dimension values: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableCustomDimensions02=function(){return h.instance.availableCustomDimensions02},h.setAvailableCustomDimensions02=function(e){K.validateCustomDimensions(e)&&(h.instance.availableCustomDimensions02=e,h.validateAndFixCurrentDimensions(),J.i("Set available custom02 dimension values: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableCustomDimensions03=function(){return h.instance.availableCustomDimensions03},h.setAvailableCustomDimensions03=function(e){K.validateCustomDimensions(e)&&(h.instance.availableCustomDimensions03=e,h.validateAndFixCurrentDimensions(),J.i("Set available custom03 dimension values: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableResourceCurrencies=function(){return h.instance.availableResourceCurrencies},h.setAvailableResourceCurrencies=function(e){K.validateResourceCurrencies(e)&&(h.instance.availableResourceCurrencies=e,J.i("Set available resource currencies: ("+Z.joinStringArray(e,", ")+")"))},h.getAvailableResourceItemTypes=function(){return h.instance.availableResourceItemTypes},h.setAvailableResourceItemTypes=function(e){K.validateResourceItemTypes(e)&&(h.instance.availableResourceItemTypes=e,J.i("Set available resource item types: ("+Z.joinStringArray(e,", ")+")"))},h.getBuild=function(){return h.instance.build},h.setBuild=function(e){h.instance.build=e,J.i("Set build version: "+e)},h.getUseManualSessionHandling=function(){return h.instance.useManualSessionHandling},h.isEventSubmissionEnabled=function(){return h.instance._isEventSubmissionEnabled},h.prototype.setDefaultId=function(e){this.defaultUserId=e||"",h.cacheIdentifier()},h.getDefaultId=function(){return h.instance.defaultUserId},h.getSdkConfig=function(){var e,t=0;for(var i in h.instance.sdkConfig)0===t&&(e=i),++t;if(e&&0<t)return h.instance.sdkConfig;for(var i in t=0,h.instance.sdkConfigCached)0===t&&(e=i),++t;return e&&0<t?h.instance.sdkConfigCached:h.instance.sdkConfigDefault},h.isEnabled=function(){var e=h.getSdkConfig();return!(e.enabled&&"false"==e.enabled||!h.instance.initAuthorized)},h.setCustomDimension01=function(e){h.instance.currentCustomDimension01=e,Q.setItem(h.Dimension01Key,e),J.i("Set custom01 dimension value: "+e)},h.setCustomDimension02=function(e){h.instance.currentCustomDimension02=e,Q.setItem(h.Dimension02Key,e),J.i("Set custom02 dimension value: "+e)},h.setCustomDimension03=function(e){h.instance.currentCustomDimension03=e,Q.setItem(h.Dimension03Key,e),J.i("Set custom03 dimension value: "+e)},h.setFacebookId=function(e){h.instance.facebookId=e,Q.setItem(h.FacebookIdKey,e),J.i("Set facebook id: "+e)},h.setGender=function(e){h.instance.gender=isNaN(Number(q.EGAGender[e]))?q.EGAGender[e].toString().toLowerCase():q.EGAGender[q.EGAGender[e]].toString().toLowerCase(),Q.setItem(h.GenderKey,h.instance.gender),J.i("Set gender: "+h.instance.gender)},h.setBirthYear=function(e){h.instance.birthYear=e,Q.setItem(h.BirthYearKey,e.toString()),J.i("Set birth year: "+e)},h.incrementSessionNum=function(){var e=h.getSessionNum()+1;h.instance.sessionNum=e},h.incrementTransactionNum=function(){var e=h.getTransactionNum()+1;h.instance.transactionNum=e},h.incrementProgressionTries=function(e){var t=h.getProgressionTries(e)+1;h.instance.progressionTries[e]=t;var i={};i.progression=e,i.tries=t,Q.insert(ee.Progression,i,!0,"progression")},h.getProgressionTries=function(e){return e in h.instance.progressionTries?h.instance.progressionTries[e]:0},h.clearProgressionTries=function(e){e in h.instance.progressionTries&&delete h.instance.progressionTries[e];var t=[];t.push(["progression",te.Equal,e]),Q.delete(ee.Progression,t)},h.setKeys=function(e,t){h.instance.gameKey=e,h.instance.gameSecret=t},h.setManualSessionHandling=function(e){h.instance.useManualSessionHandling=e,J.i("Use manual session handling: "+e)},h.setEnabledEventSubmission=function(e){h.instance._isEventSubmissionEnabled=e},h.getEventAnnotations=function(){var e={v:2};e.user_id=h.instance.identifier,e.client_ts=h.getClientTsAdjusted(),e.sdk_version=$.getRelevantSdkVersion(),e.os_version=$.osVersion,e.manufacturer=$.deviceManufacturer,e.device=$.deviceModel,e.browser_version=$.browserVersion,e.platform=$.buildPlatform,e.session_id=h.instance.sessionId,e[h.SessionNumKey]=h.instance.sessionNum;var t=$.getConnectionType();return K.validateConnectionType(t)&&(e.connection_type=t),$.gameEngineVersion&&(e.engine_version=$.gameEngineVersion),h.instance.build&&(e.build=h.instance.build),h.instance.facebookId&&(e[h.FacebookIdKey]=h.instance.facebookId),h.instance.gender&&(e[h.GenderKey]=h.instance.gender),0!=h.instance.birthYear&&(e[h.BirthYearKey]=h.instance.birthYear),e},h.getSdkErrorEventAnnotations=function(){var e={v:2};e.category=h.CategorySdkError,e.sdk_version=$.getRelevantSdkVersion(),e.os_version=$.osVersion,e.manufacturer=$.deviceManufacturer,e.device=$.deviceModel,e.platform=$.buildPlatform;var t=$.getConnectionType();return K.validateConnectionType(t)&&(e.connection_type=t),$.gameEngineVersion&&(e.engine_version=$.gameEngineVersion),e},h.getInitAnnotations=function(){var e={};return e.user_id=h.getIdentifier(),e.sdk_version=$.getRelevantSdkVersion(),e.os_version=$.osVersion,e.platform=$.buildPlatform,e},h.getClientTsAdjusted=function(){var e=Z.timeIntervalSince1970(),t=e+h.instance.clientServerTimeOffset;return K.validateClientTs(t)?t:e},h.sessionIsStarted=function(){return 0!=h.instance.sessionStart},h.cacheIdentifier=function(){h.instance.userId?h.instance.identifier=h.instance.userId:h.instance.defaultUserId&&(h.instance.identifier=h.instance.defaultUserId)},h.ensurePersistedStates=function(){Q.isStorageAvailable()&&Q.load();var e=h.instance;e.setDefaultId(null!=Q.getItem(h.DefaultUserIdKey)?Q.getItem(h.DefaultUserIdKey):Z.createGuid()),e.sessionNum=null!=Q.getItem(h.SessionNumKey)?Number(Q.getItem(h.SessionNumKey)):0,e.transactionNum=null!=Q.getItem(h.TransactionNumKey)?Number(Q.getItem(h.TransactionNumKey)):0,e.facebookId?Q.setItem(h.FacebookIdKey,e.facebookId):(e.facebookId=null!=Q.getItem(h.FacebookIdKey)?Q.getItem(h.FacebookIdKey):"",e.facebookId),e.gender?Q.setItem(h.GenderKey,e.gender):(e.gender=null!=Q.getItem(h.GenderKey)?Q.getItem(h.GenderKey):"",e.gender),e.birthYear&&0!=e.birthYear?Q.setItem(h.BirthYearKey,e.birthYear.toString()):(e.birthYear=null!=Q.getItem(h.BirthYearKey)?Number(Q.getItem(h.BirthYearKey)):0,e.birthYear),e.currentCustomDimension01?Q.setItem(h.Dimension01Key,e.currentCustomDimension01):(e.currentCustomDimension01=null!=Q.getItem(h.Dimension01Key)?Q.getItem(h.Dimension01Key):"",e.currentCustomDimension01),e.currentCustomDimension02?Q.setItem(h.Dimension02Key,e.currentCustomDimension02):(e.currentCustomDimension02=null!=Q.getItem(h.Dimension02Key)?Q.getItem(h.Dimension02Key):"",e.currentCustomDimension02),e.currentCustomDimension03?Q.setItem(h.Dimension03Key,e.currentCustomDimension03):(e.currentCustomDimension03=null!=Q.getItem(h.Dimension03Key)?Q.getItem(h.Dimension03Key):"",e.currentCustomDimension03);var t=null!=Q.getItem(h.SdkConfigCachedKey)?Q.getItem(h.SdkConfigCachedKey):"";if(t){var i=JSON.parse(Z.decode64(t));i&&(e.sdkConfigCached=i)}var n=Q.select(ee.Progression);if(n)for(var r=0;r<n.length;++r){var o=n[r];o&&(e.progressionTries[o.progression]=o.tries)}},h.calculateServerTimeOffset=function(e){return e-Z.timeIntervalSince1970()},h.validateAndCleanCustomFields=function(e){var t={};if(e){var i=0;for(var n in e){var r=e[n];if(n&&r)if(i<h.MAX_CUSTOM_FIELDS_COUNT){var o=new RegExp("^[a-zA-Z0-9_]{1,"+h.MAX_CUSTOM_FIELDS_KEY_LENGTH+"}$");if(Z.stringMatch(n,o)){var a=typeof r;if("string"===a||r instanceof String){var s=r;s.length<=h.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH&&0<s.length?(t[n]=s,++i):J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its value is an empty string or exceeds the max number of characters ("+h.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH+")")}else if("number"===a||r instanceof Number){var l=r;t[n]=l,++i}else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its value is not a string or number")}else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its key contains illegal character, is empty or exceeds the max number of characters ("+h.MAX_CUSTOM_FIELDS_KEY_LENGTH+")")}else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because it exceeds the max number of custom fields ("+h.MAX_CUSTOM_FIELDS_COUNT+")");else J.w("validateAndCleanCustomFields: entry with key="+n+", value="+r+" has been omitted because its key or value is null")}}return t},h.validateAndFixCurrentDimensions=function(){K.validateDimension01(h.getCurrentCustomDimension01(),h.getAvailableCustomDimensions01())||h.setCustomDimension01(""),K.validateDimension02(h.getCurrentCustomDimension02(),h.getAvailableCustomDimensions02())||h.setCustomDimension02(""),K.validateDimension03(h.getCurrentCustomDimension03(),h.getAvailableCustomDimensions03())||h.setCustomDimension03("")},h.getConfigurationStringValue=function(e,t){return h.instance.configurations[e]?h.instance.configurations[e].toString():t},h.isCommandCenterReady=function(){return h.instance.commandCenterIsReady},h.addCommandCenterListener=function(e){h.instance.commandCenterListeners.indexOf(e)<0&&h.instance.commandCenterListeners.push(e)},h.removeCommandCenterListener=function(e){var t=h.instance.commandCenterListeners.indexOf(e);-1<t&&h.instance.commandCenterListeners.splice(t,1)},h.getConfigurationsContentAsString=function(){return JSON.stringify(h.instance.configurations)},h.populateConfigurations=function(e){var t=e.configurations;if(t)for(var i=0;i<t.length;++i){var n=t[i];if(n){var r=n.key,o=n.value,a=n.start?n.start:Number.MIN_VALUE,s=n.end?n.end:Number.MAX_VALUE,l=h.getClientTsAdjusted();r&&o&&a<l&&l<s&&(h.instance.configurations[r]=o)}}h.instance.commandCenterIsReady=!0;var p=h.instance.commandCenterListeners;for(i=0;i<p.length;++i)p[i]&&p[i].onCommandCenterUpdated()},h.CategorySdkError="sdk_error",h.MAX_CUSTOM_FIELDS_COUNT=50,h.MAX_CUSTOM_FIELDS_KEY_LENGTH=64,h.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH=256,h.instance=new h,h.DefaultUserIdKey="default_user_id",h.SessionNumKey="session_num",h.TransactionNumKey="transaction_num",h.FacebookIdKey="facebook_id",h.GenderKey="gender",h.BirthYearKey="birth_year",h.Dimension01Key="dimension01",h.Dimension02Key="dimension02",h.Dimension03Key="dimension03",h.SdkConfigCachedKey="sdk_config_cached",h}(),Y.GAState=ie,ne=Be||(Be={}),re=ne.tasks||(ne.tasks={}),oe=ne.utilities.GAUtilities,ae=ne.logging.GALogger,se=function(){function a(){}return a.execute=function(e,t,i,n){if(a.countMap[t]||(a.countMap[t]=0),!(a.countMap[t]>=a.MaxCount)){var r=oe.getHmac(n,i),o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState){if(!o.responseText)return;if(200!=o.status)return void ae.w("sdk error failed. response code not 200. status code: "+o.status+", description: "+o.statusText+", body: "+o.responseText);a.countMap[t]=a.countMap[t]+1}},o.open("POST",e,!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization",r);try{o.send(i)}catch(e){}}},a.MaxCount=10,a.countMap={},a}(),re.SdkErrorTask=se,le=Be||(Be={}),pe=le.http||(le.http={}),he=le.state.GAState,ue=le.logging.GALogger,ce=le.utilities.GAUtilities,de=le.validators.GAValidator,_e=le.tasks.SdkErrorTask,ye=function(){function h(){this.protocol="https",this.hostName="api.gameanalytics.com",this.version="v2",this.baseUrl=this.protocol+"://"+this.hostName+"/"+this.version,this.initializeUrlPath="init",this.eventsUrlPath="events",this.useGzip=!1}return h.prototype.requestInit=function(e){var t=he.getGameKey(),i=(this.baseUrl,this.initializeUrlPath);i="https://rubick.gameanalytics.com/v2/command_center?game_key="+t+"&interval_seconds=1000000";var n=he.getInitAnnotations(),r=JSON.stringify(n);if(r){var o=this.createPayloadData(r,this.useGzip),a=[];a.push(r),h.sendRequest(i,o,a,this.useGzip,h.initRequestCallback,e)}else e(pe.EGAHTTPApiResponse.JsonEncodeFailed,null)},h.prototype.sendEventsInArray=function(e,t,i){if(0!=e.length){var n=he.getGameKey(),r=this.baseUrl+"/"+n+"/"+this.eventsUrlPath,o=JSON.stringify(e);if(o){var a=this.createPayloadData(o,this.useGzip),s=[];s.push(o),s.push(t),s.push(e.length.toString()),h.sendRequest(r,a,s,this.useGzip,h.sendEventInArrayRequestCallback,i)}else i(pe.EGAHTTPApiResponse.JsonEncodeFailed,null,t,e.length)}},h.prototype.sendSdkErrorEvent=function(e){if(he.isEventSubmissionEnabled()){var t=he.getGameKey(),i=he.getGameSecret();if(de.validateSdkErrorEvent(t,i,e)){var n,r=this.baseUrl+"/"+t+"/"+this.eventsUrlPath,o=he.getSdkErrorEventAnnotations(),a=h.sdkErrorTypeToString(e);o.type=a;var s=[];s.push(o),(n=JSON.stringify(s))?_e.execute(r,e,n,i):ue.w("sendSdkErrorEvent: JSON encoding failed.")}}},h.sendEventInArrayRequestCallback=function(e,t,i,n){void 0===n&&(n=null),n[0],n[1];var r,o,a=n[2],s=parseInt(n[3]);r=e.responseText,o=e.status;var l=h.instance.processRequestResponse(o,e.statusText,r,"Events");if(l==pe.EGAHTTPApiResponse.Ok||l==pe.EGAHTTPApiResponse.BadRequest){var p=r?JSON.parse(r):{};null!=p?(pe.EGAHTTPApiResponse.BadRequest,i(l,p,a,s)):i(pe.EGAHTTPApiResponse.JsonDecodeFailed,null,a,s)}else i(l,null,a,s)},h.sendRequest=function(e,t,i,n,r,o){var a=new XMLHttpRequest,s=he.getGameSecret(),l=ce.getHmac(s,t),p=[];for(var h in p.push(l),i)p.push(i[h]);if(a.onreadystatechange=function(){4===a.readyState&&r(a,e,o,p)},a.open("POST",e,!0),a.setRequestHeader("Content-Type","text/plain"),a.setRequestHeader("Authorization",l),n)throw new Error("gzip not supported");try{a.send(t)}catch(e){}},h.initRequestCallback=function(e,t,i,n){var r,o;void 0===n&&(n=null),n[0],n[1],r=e.responseText,o=e.status;var a=r?JSON.parse(r):{},s=h.instance.processRequestResponse(o,e.statusText,r,"Init");if(s==pe.EGAHTTPApiResponse.Ok||s==pe.EGAHTTPApiResponse.BadRequest)if(null!=a)if(s!==pe.EGAHTTPApiResponse.BadRequest){var l=de.validateAndCleanInitRequestResponse(a);l?i(pe.EGAHTTPApiResponse.Ok,l,"",0):i(pe.EGAHTTPApiResponse.BadResponse,null,"",0)}else i(s,null,"",0);else i(pe.EGAHTTPApiResponse.JsonDecodeFailed,null,"",0);else i(s,null,"",0)},h.prototype.createPayloadData=function(e,t){if(t)throw new Error("gzip not supported");return e},h.prototype.processRequestResponse=function(e,t,i,n){return i?200===e?pe.EGAHTTPApiResponse.Ok:0===e||401===e?pe.EGAHTTPApiResponse.Unauthorized:400===e?pe.EGAHTTPApiResponse.BadRequest:500===e?pe.EGAHTTPApiResponse.InternalServerError:pe.EGAHTTPApiResponse.UnknownResponseCode:pe.EGAHTTPApiResponse.NoResponse},h.sdkErrorTypeToString=function(e){switch(e){case pe.EGASdkErrorType.Rejected:return"rejected";default:return""}},h.instance=new h,h}(),pe.GAHTTPApi=ye,me=Be||(Be={}),fe=me.events||(me.events={}),xe=me.store.GAStore,ve=me.store.EGAStore,ze=me.store.EGAStoreArgsOperator,ge=me.state.GAState,be=me.logging.GALogger,we=me.utilities.GAUtilities,Se=me.http.EGAHTTPApiResponse,Ce=me.http.GAHTTPApi,Me=me.validators.GAValidator,Pe=me.http.EGASdkErrorType,ke=function(){function c(){}return c.addSessionStartEvent=function(){if(ge.isEventSubmissionEnabled()){var e={};e.category=c.CategorySessionStart,ge.incrementSessionNum(),xe.setItem(ge.SessionNumKey,ge.getSessionNum().toString()),c.addDimensionsToEvent(e),c.addEventToStore(e),be.i("Add SESSION START event"),c.processEvents(c.CategorySessionStart,!1)}},c.addSessionEndEvent=function(){if(ge.isEventSubmissionEnabled()){var e=ge.getSessionStart(),t=ge.getClientTsAdjusted()-e;t<0&&(be.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."),t=0);var i={};i.category=c.CategorySessionEnd,i.length=t,c.addDimensionsToEvent(i),c.addEventToStore(i),be.i("Add SESSION END event."),c.processEvents("",!1)}},c.addBusinessEvent=function(e,t,i,n,r,o){if(void 0===r&&(r=null),ge.isEventSubmissionEnabled())if(Me.validateBusinessEvent(e,t,r,i,n)){var a={};ge.incrementTransactionNum(),xe.setItem(ge.TransactionNumKey,ge.getTransactionNum().toString()),a.event_id=i+":"+n,a.category=c.CategoryBusiness,a.currency=e,a.amount=t,a[ge.TransactionNumKey]=ge.getTransactionNum(),r&&(a.cart_type=r),c.addDimensionsToEvent(a),c.addFieldsToEvent(a,ge.validateAndCleanCustomFields(o)),be.i("Add BUSINESS event: {currency:"+e+", amount:"+t+", itemType:"+i+", itemId:"+n+", cartType:"+r+"}"),c.addEventToStore(a)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)},c.addResourceEvent=function(e,t,i,n,r,o){if(ge.isEventSubmissionEnabled())if(Me.validateResourceEvent(e,t,i,n,r,ge.getAvailableResourceCurrencies(),ge.getAvailableResourceItemTypes())){e===me.EGAResourceFlowType.Sink&&(i*=-1);var a={},s=c.resourceFlowTypeToString(e);a.event_id=s+":"+t+":"+n+":"+r,a.category=c.CategoryResource,a.amount=i,c.addDimensionsToEvent(a),c.addFieldsToEvent(a,ge.validateAndCleanCustomFields(o)),be.i("Add RESOURCE event: {currency:"+t+", amount:"+i+", itemType:"+n+", itemId:"+r+"}"),c.addEventToStore(a)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)},c.addProgressionEvent=function(e,t,i,n,r,o,a){if(ge.isEventSubmissionEnabled()){var s=c.progressionStatusToString(e);if(Me.validateProgressionEvent(e,t,i,n)){var l,p={};l=i?n?t+":"+i+":"+n:t+":"+i:t,p.category=c.CategoryProgression,p.event_id=s+":"+l;var h=0;o&&e!=me.EGAProgressionStatus.Start&&(p.score=r),e===me.EGAProgressionStatus.Fail&&ge.incrementProgressionTries(l),e===me.EGAProgressionStatus.Complete&&(ge.incrementProgressionTries(l),h=ge.getProgressionTries(l),p.attempt_num=h,ge.clearProgressionTries(l)),c.addDimensionsToEvent(p),c.addFieldsToEvent(p,ge.validateAndCleanCustomFields(a)),be.i("Add PROGRESSION event: {status:"+s+", progression01:"+t+", progression02:"+i+", progression03:"+n+", score:"+r+", attempt:"+h+"}"),c.addEventToStore(p)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)}},c.addDesignEvent=function(e,t,i,n){if(ge.isEventSubmissionEnabled())if(Me.validateDesignEvent(e,t)){var r={};r.category=c.CategoryDesign,r.event_id=e,i&&(r.value=t),c.addDimensionsToEvent(r),c.addFieldsToEvent(r,ge.validateAndCleanCustomFields(n)),be.i("Add DESIGN event: {eventId:"+e+", value:"+t+"}"),c.addEventToStore(r)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)},c.addErrorEvent=function(e,t,i){if(ge.isEventSubmissionEnabled()){var n=c.errorSeverityToString(e);if(Me.validateErrorEvent(e,t)){var r={};r.category=c.CategoryError,r.severity=n,r.message=t,c.addDimensionsToEvent(r),c.addFieldsToEvent(r,ge.validateAndCleanCustomFields(i)),be.i("Add ERROR event: {severity:"+n+", message:"+t+"}"),c.addEventToStore(r)}else Ce.instance.sendSdkErrorEvent(Pe.Rejected)}},c.processEvents=function(e,t){if(ge.isEventSubmissionEnabled())try{var i=we.createGuid();t&&(c.cleanupEvents(),c.fixMissingSessionEndEvents());var n=[];n.push(["status",ze.Equal,"new"]);var r=[];r.push(["status",ze.Equal,"new"]),e&&(n.push(["category",ze.Equal,e]),r.push(["category",ze.Equal,e]));var o=[];o.push(["status",i]);var a=xe.select(ve.Events,n);if(!a||0==a.length)return be.i("Event queue: No events to send"),void c.updateSessionStore();if(a.length>c.MaxEventCount){if(!(a=xe.select(ve.Events,n,!0,c.MaxEventCount)))return;var s=a[a.length-1].client_ts;if(n.push(["client_ts",ze.LessOrEqual,s]),!(a=xe.select(ve.Events,n)))return;r.push(["client_ts",ze.LessOrEqual,s])}if(be.i("Event queue: Sending "+a.length+" events."),!xe.update(ve.Events,o,r))return;for(var l=[],p=0;p<a.length;++p){var h=a[p],u=JSON.parse(we.decode64(h.event));0!=u.length&&l.push(u)}Ce.instance.sendEventsInArray(l,i,c.processEventsCallback)}catch(e){be.e("Error during ProcessEvents(): "+e.stack)}},c.processEventsCallback=function(e,t,i,n){var r=[];if(r.push(["status",ze.Equal,i]),e===Se.Ok)xe.delete(ve.Events,r),be.i("Event queue: "+n+" events sent.");else if(e===Se.NoResponse){var o=[];o.push(["status","new"]),be.w("Event queue: Failed to send events to collector - Retrying next time"),xe.update(ve.Events,o,r)}else{if(t){var a,s=0;for(var l in t)0==s&&(a=t[l]),++s;e===Se.BadRequest&&a.constructor===Array?be.w("Event queue: "+n+" events sent. "+s+" events failed GA server validation."):be.w("Event queue: Failed to send events.")}else be.w("Event queue: Failed to send events.");xe.delete(ve.Events,r)}},c.cleanupEvents=function(){xe.update(ve.Events,[["status","new"]])},c.fixMissingSessionEndEvents=function(){if(ge.isEventSubmissionEnabled()){var e=[];e.push(["session_id",ze.NotEqual,ge.getSessionId()]);var t=xe.select(ve.Sessions,e);if(t&&0!=t.length){be.i(t.length+" session(s) located with missing session_end event.");for(var i=0;i<t.length;++i){var n=JSON.parse(we.decode64(t[i].event)),r=n.client_ts-t[i].timestamp;r=Math.max(0,r),n.category=c.CategorySessionEnd,n.length=r,c.addEventToStore(n)}}}},c.addEventToStore=function(e){if(ge.isEventSubmissionEnabled())if(ge.isInitialized())try{if(xe.isStoreTooLargeForEvents()&&!we.stringMatch(e.category,/^(user|session_end|business)$/))return void be.w("Database too large. Event has been blocked.");var t=ge.getEventAnnotations(),i=we.encode64(JSON.stringify(t));for(var n in e)t[n]=e[n];var r=JSON.stringify(t);be.ii("Event added to queue: "+r);var o={status:"new"};o.category=t.category,o.session_id=t.session_id,o.client_ts=t.client_ts,o.event=we.encode64(JSON.stringify(t)),xe.insert(ve.Events,o),e.category==c.CategorySessionEnd?xe.delete(ve.Sessions,[["session_id",ze.Equal,t.session_id]]):((o={}).session_id=t.session_id,o.timestamp=ge.getSessionStart(),o.event=i,xe.insert(ve.Sessions,o,!0,"session_id")),xe.isStorageAvailable()&&xe.save()}catch(n){be.e("addEventToStore: error"),be.e(n.stack)}else be.w("Could not add event: SDK is not initialized")},c.updateSessionStore=function(){if(ge.sessionIsStarted()){var e={};e.session_id=ge.instance.sessionId,e.timestamp=ge.getSessionStart(),e.event=we.encode64(JSON.stringify(ge.getEventAnnotations())),xe.insert(ve.Sessions,e,!0,"session_id"),xe.isStorageAvailable()&&xe.save()}},c.addDimensionsToEvent=function(e){e&&(ge.getCurrentCustomDimension01()&&(e.custom_01=ge.getCurrentCustomDimension01()),ge.getCurrentCustomDimension02()&&(e.custom_02=ge.getCurrentCustomDimension02()),ge.getCurrentCustomDimension03()&&(e.custom_03=ge.getCurrentCustomDimension03()))},c.addFieldsToEvent=function(e,t){e&&t&&0<Object.keys(t).length&&(e.custom_fields=t)},c.resourceFlowTypeToString=function(e){return e==me.EGAResourceFlowType.Source||e==me.EGAResourceFlowType[me.EGAResourceFlowType.Source]?"Source":e==me.EGAResourceFlowType.Sink||e==me.EGAResourceFlowType[me.EGAResourceFlowType.Sink]?"Sink":""},c.progressionStatusToString=function(e){return e==me.EGAProgressionStatus.Start||e==me.EGAProgressionStatus[me.EGAProgressionStatus.Start]?"Start":e==me.EGAProgressionStatus.Complete||e==me.EGAProgressionStatus[me.EGAProgressionStatus.Complete]?"Complete":e==me.EGAProgressionStatus.Fail||e==me.EGAProgressionStatus[me.EGAProgressionStatus.Fail]?"Fail":""},c.errorSeverityToString=function(e){return e==me.EGAErrorSeverity.Debug||e==me.EGAErrorSeverity[me.EGAErrorSeverity.Debug]?"debug":e==me.EGAErrorSeverity.Info||e==me.EGAErrorSeverity[me.EGAErrorSeverity.Info]?"info":e==me.EGAErrorSeverity.Warning||e==me.EGAErrorSeverity[me.EGAErrorSeverity.Warning]?"warning":e==me.EGAErrorSeverity.Error||e==me.EGAErrorSeverity[me.EGAErrorSeverity.Error]?"error":e==me.EGAErrorSeverity.Critical||e==me.EGAErrorSeverity[me.EGAErrorSeverity.Critical]?"critical":""},c.instance=new c,c.CategorySessionStart="user",c.CategorySessionEnd="session_end",c.CategoryDesign="design",c.CategoryBusiness="business",c.CategoryProgression="progression",c.CategoryResource="resource",c.CategoryError="error",c.MaxEventCount=500,c}(),fe.GAEvents=ke,Te=Be||(Be={}),Oe=Te.threading||(Te.threading={}),Ae=Te.logging.GALogger,Ee=Te.state.GAState,Ge=Te.events.GAEvents,Ie=function(){function r(){this.blocks=new Oe.PriorityQueue({compare:function(e,t){return e-t}}),this.id2TimedBlockMap={},r.startThread()}return r.createTimedBlock=function(e){void 0===e&&(e=0);var t=new Date;return t.setSeconds(t.getSeconds()+e),new Oe.TimedBlock(t)},r.performTaskOnGAThread=function(e,t){void 0===t&&(t=0);var i=new Date;i.setSeconds(i.getSeconds()+t);var n=new Oe.TimedBlock(i);n.block=e,r.instance.id2TimedBlockMap[n.id]=n,r.instance.addTimedBlock(n)},r.performTimedBlockOnGAThread=function(e){r.instance.id2TimedBlockMap[e.id]=e,r.instance.addTimedBlock(e)},r.scheduleTimer=function(e,t){var i=new Date;i.setSeconds(i.getSeconds()+e);var n=new Oe.TimedBlock(i);return n.block=t,r.instance.id2TimedBlockMap[n.id]=n,r.instance.addTimedBlock(n),n.id},r.getTimedBlockById=function(e){return e in r.instance.id2TimedBlockMap?r.instance.id2TimedBlockMap[e]:null},r.ensureEventQueueIsRunning=function(){r.instance.keepRunning=!0,r.instance.isRunning||(r.instance.isRunning=!0,r.scheduleTimer(r.ProcessEventsIntervalInSeconds,r.processEventQueue))},r.endSessionAndStopQueue=function(){Ee.isInitialized()&&(Ae.i("Ending session."),r.stopEventQueue(),Ee.isEnabled()&&Ee.sessionIsStarted()&&(Ge.addSessionEndEvent(),Ee.instance.sessionStart=0))},r.stopEventQueue=function(){r.instance.keepRunning=!1},r.ignoreTimer=function(e){e in r.instance.id2TimedBlockMap&&(r.instance.id2TimedBlockMap[e].ignore=!0)},r.setEventProcessInterval=function(e){0<e&&(r.ProcessEventsIntervalInSeconds=e)},r.prototype.addTimedBlock=function(e){this.blocks.enqueue(e.deadline.getTime(),e)},r.run=function(){clearTimeout(r.runTimeoutId);try{for(var e;e=r.getNextBlock();)if(!e.ignore)if(e.async){if(!e.running){e.running=!0,e.block();break}}else e.block();return void(r.runTimeoutId=setTimeout(r.run,r.ThreadWaitTimeInMs))}catch(e){Ae.e("Error on GA thread"),Ae.e(e.stack)}},r.startThread=function(){r.runTimeoutId=setTimeout(r.run,0)},r.getNextBlock=function(){var e=new Date;return r.instance.blocks.hasItems()&&r.instance.blocks.peek().deadline.getTime()<=e.getTime()?r.instance.blocks.peek().async&&r.instance.blocks.peek().running?r.instance.blocks.peek():r.instance.blocks.dequeue():null},r.processEventQueue=function(){Ge.processEvents("",!0),r.instance.keepRunning?r.scheduleTimer(r.ProcessEventsIntervalInSeconds,r.processEventQueue):r.instance.isRunning=!1},r.instance=new r,r.ThreadWaitTimeInMs=1e3,r.ProcessEventsIntervalInSeconds=8,r}(),Oe.GAThreading=Ie,Le=Be||(Be={}),De=Le.threading.GAThreading,Re=Le.logging.GALogger,Fe=Le.store.GAStore,je=Le.state.GAState,Ne=Le.http.GAHTTPApi,Ue=Le.device.GADevice,Ve=Le.validators.GAValidator,He=Le.http.EGAHTTPApiResponse,We=Le.utilities.GAUtilities,Xe=Le.events.GAEvents,qe=function(){function a(){}return a.init=function(){if(Ue.touch(),a.methodMap.configureAvailableCustomDimensions01=a.configureAvailableCustomDimensions01,a.methodMap.configureAvailableCustomDimensions02=a.configureAvailableCustomDimensions02,a.methodMap.configureAvailableCustomDimensions03=a.configureAvailableCustomDimensions03,a.methodMap.configureAvailableResourceCurrencies=a.configureAvailableResourceCurrencies,a.methodMap.configureAvailableResourceItemTypes=a.configureAvailableResourceItemTypes,a.methodMap.configureBuild=a.configureBuild,a.methodMap.configureSdkGameEngineVersion=a.configureSdkGameEngineVersion,a.methodMap.configureGameEngineVersion=a.configureGameEngineVersion,a.methodMap.configureUserId=a.configureUserId,a.methodMap.initialize=a.initialize,a.methodMap.addBusinessEvent=a.addBusinessEvent,a.methodMap.addResourceEvent=a.addResourceEvent,a.methodMap.addProgressionEvent=a.addProgressionEvent,a.methodMap.addDesignEvent=a.addDesignEvent,a.methodMap.addErrorEvent=a.addErrorEvent,a.methodMap.addErrorEvent=a.addErrorEvent,a.methodMap.setEnabledInfoLog=a.setEnabledInfoLog,a.methodMap.setEnabledVerboseLog=a.setEnabledVerboseLog,a.methodMap.setEnabledManualSessionHandling=a.setEnabledManualSessionHandling,a.methodMap.setEnabledEventSubmission=a.setEnabledEventSubmission,a.methodMap.setCustomDimension01=a.setCustomDimension01,a.methodMap.setCustomDimension02=a.setCustomDimension02,a.methodMap.setCustomDimension03=a.setCustomDimension03,a.methodMap.setFacebookId=a.setFacebookId,a.methodMap.setGender=a.setGender,a.methodMap.setBirthYear=a.setBirthYear,a.methodMap.setEventProcessInterval=a.setEventProcessInterval,a.methodMap.startSession=a.startSession,a.methodMap.endSession=a.endSession,a.methodMap.onStop=a.onStop,a.methodMap.onResume=a.onResume,a.methodMap.addCommandCenterListener=a.addCommandCenterListener,a.methodMap.removeCommandCenterListener=a.removeCommandCenterListener,a.methodMap.getCommandCenterValueAsString=a.getCommandCenterValueAsString,a.methodMap.isCommandCenterReady=a.isCommandCenterReady,a.methodMap.getConfigurationsContentAsString=a.getConfigurationsContentAsString,"undefined"!=typeof window&&void 0!==window.GameAnalytics&&void 0!==window.GameAnalytics.q){var e=window.GameAnalytics.q;for(var t in e)a.gaCommand.apply(null,e[t])}},a.gaCommand=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0<e.length&&e[0]in Le.GameAnalytics.methodMap&&(1<e.length?Le.GameAnalytics.methodMap[e[0]].apply(null,Array.prototype.slice.call(e,1)):Le.GameAnalytics.methodMap[e[0]]())},a.configureAvailableCustomDimensions01=function(e){void 0===e&&(e=[]),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available custom dimensions must be set before SDK is initialized"):je.setAvailableCustomDimensions01(e)})},a.configureAvailableCustomDimensions02=function(e){void 0===e&&(e=[]),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available custom dimensions must be set before SDK is initialized"):je.setAvailableCustomDimensions02(e)})},a.configureAvailableCustomDimensions03=function(e){void 0===e&&(e=[]),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available custom dimensions must be set before SDK is initialized"):je.setAvailableCustomDimensions03(e)})},a.configureAvailableResourceCurrencies=function(e){void 0===e&&(e=[]),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available resource currencies must be set before SDK is initialized"):je.setAvailableResourceCurrencies(e)})},a.configureAvailableResourceItemTypes=function(e){void 0===e&&(e=[]),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Available resource item types must be set before SDK is initialized"):je.setAvailableResourceItemTypes(e)})},a.configureBuild=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("Build version must be set before SDK is initialized."):Ve.validateBuild(e)?je.setBuild(e):Re.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: "+e)})},a.configureSdkGameEngineVersion=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)||(Ve.validateSdkWrapperVersion(e)?Ue.sdkGameEngineVersion=e:Re.i("Validation fail - configure sdk version: Sdk version not supported. String: "+e))})},a.configureGameEngineVersion=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)||(Ve.validateEngineVersion(e)?Ue.gameEngineVersion=e:Re.i("Validation fail - configure game engine version: Game engine version not supported. String: "+e))})},a.configureUserId=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!1)?Re.w("A custom user id must be set before SDK is initialized."):Ve.validateUserId(e)?je.setUserId(e):Re.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: "+e)})},a.initialize=function(e,t){void 0===e&&(e=""),void 0===t&&(t=""),Ue.updateConnectionType();var i=De.createTimedBlock();i.async=!0,a.initTimedBlockId=i.id,i.block=function(){a.isSdkReady(!0,!1)?Re.w("SDK already initialized. Can only be called once."):Ve.validateKeys(e,t)?(je.setKeys(e,t),a.internalInitialize()):Re.w("SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: "+e+", secretKey: "+t)},De.performTimedBlockOnGAThread(i)},a.addBusinessEvent=function(e,t,i,n,r){void 0===e&&(e=""),void 0===t&&(t=0),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=""),Ue.updateConnectionType(),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!0,"Could not add business event")&&Xe.addBusinessEvent(e,t,i,n,r,{})})},a.addResourceEvent=function(e,t,i,n,r){void 0===e&&(e=Le.EGAResourceFlowType.Undefined),void 0===t&&(t=""),void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=""),Ue.updateConnectionType(),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!0,"Could not add resource event")&&Xe.addResourceEvent(e,t,i,n,r,{})})},a.addProgressionEvent=function(t,i,n,r,o){void 0===t&&(t=Le.EGAProgressionStatus.Undefined),void 0===i&&(i=""),void 0===n&&(n=""),void 0===r&&(r=""),Ue.updateConnectionType(),De.performTaskOnGAThread(function(){if(a.isSdkReady(!0,!0,"Could not add progression event")){var e="number"==typeof o;Xe.addProgressionEvent(t,i,n,r,e?o:0,e,{})}})},a.addDesignEvent=function(t,i){Ue.updateConnectionType(),De.performTaskOnGAThread(function(){if(a.isSdkReady(!0,!0,"Could not add design event")){var e="number"==typeof i;Xe.addDesignEvent(t,e?i:0,e,{})}})},a.addErrorEvent=function(e,t){void 0===e&&(e=Le.EGAErrorSeverity.Undefined),void 0===t&&(t=""),Ue.updateConnectionType(),De.performTaskOnGAThread(function(){a.isSdkReady(!0,!0,"Could not add error event")&&Xe.addErrorEvent(e,t,{})})},a.setEnabledInfoLog=function(e){void 0===e&&(e=!1),De.performTaskOnGAThread(function(){e?(Re.setInfoLog(e),Re.i("Info logging enabled")):(Re.i("Info logging disabled"),Re.setInfoLog(e))})},a.setEnabledVerboseLog=function(e){void 0===e&&(e=!1),De.performTaskOnGAThread(function(){e?(Re.setVerboseLog(e),Re.i("Verbose logging enabled")):(Re.i("Verbose logging disabled"),Re.setVerboseLog(e))})},a.setEnabledManualSessionHandling=function(e){void 0===e&&(e=!1),De.performTaskOnGAThread(function(){je.setManualSessionHandling(e)})},a.setEnabledEventSubmission=function(e){void 0===e&&(e=!1),De.performTaskOnGAThread(function(){e?(je.setEnabledEventSubmission(e),Re.i("Event submission enabled")):(Re.i("Event submission disabled"),je.setEnabledEventSubmission(e))})},a.setCustomDimension01=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){Ve.validateDimension01(e,je.getAvailableCustomDimensions01())?je.setCustomDimension01(e):Re.w("Could not set custom01 dimension value to '"+e+"'. Value not found in available custom01 dimension values")})},a.setCustomDimension02=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){Ve.validateDimension02(e,je.getAvailableCustomDimensions02())?je.setCustomDimension02(e):Re.w("Could not set custom02 dimension value to '"+e+"'. Value not found in available custom02 dimension values")})},a.setCustomDimension03=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){Ve.validateDimension03(e,je.getAvailableCustomDimensions03())?je.setCustomDimension03(e):Re.w("Could not set custom03 dimension value to '"+e+"'. Value not found in available custom03 dimension values")})},a.setFacebookId=function(e){void 0===e&&(e=""),De.performTaskOnGAThread(function(){Ve.validateFacebookId(e)&&je.setFacebookId(e)})},a.setGender=function(e){void 0===e&&(e=Le.EGAGender.Undefined),De.performTaskOnGAThread(function(){Ve.validateGender(e)&&je.setGender(e)})},a.setBirthYear=function(e){void 0===e&&(e=0),De.performTaskOnGAThread(function(){Ve.validateBirthyear(e)&&je.setBirthYear(e)})},a.setEventProcessInterval=function(e){De.performTaskOnGAThread(function(){De.setEventProcessInterval(e)})},a.startSession=function(){if(je.isInitialized()){var e=De.createTimedBlock();e.async=!0,a.initTimedBlockId=e.id,e.block=function(){je.isEnabled()&&je.sessionIsStarted()&&De.endSessionAndStopQueue(),a.resumeSessionAndStartQueue()},De.performTimedBlockOnGAThread(e)}},a.endSession=function(){a.onStop()},a.onStop=function(){De.performTaskOnGAThread(function(){try{De.endSessionAndStopQueue()}catch(e){}})},a.onResume=function(){var e=De.createTimedBlock();e.async=!0,a.initTimedBlockId=e.id,e.block=function(){a.resumeSessionAndStartQueue()},De.performTimedBlockOnGAThread(e)},a.getCommandCenterValueAsString=function(e,t){return void 0===t&&(t=null),je.getConfigurationStringValue(e,t)},a.isCommandCenterReady=function(){return je.isCommandCenterReady()},a.addCommandCenterListener=function(e){je.addCommandCenterListener(e)},a.removeCommandCenterListener=function(e){je.removeCommandCenterListener(e)},a.getConfigurationsContentAsString=function(){return je.getConfigurationsContentAsString()},a.internalInitialize=function(){je.ensurePersistedStates(),Fe.setItem(je.DefaultUserIdKey,je.getDefaultId()),je.setInitialized(!0),a.newSession(),je.isEnabled()&&De.ensureEventQueueIsRunning()},a.newSession=function(){Re.i("Starting a new session."),je.validateAndFixCurrentDimensions(),Ne.instance.requestInit(a.startNewSessionCallback)},a.startNewSessionCallback=function(e,t){if(e===He.Ok&&t){var i=0;if(t.server_ts){var n=t.server_ts;i=je.calculateServerTimeOffset(n)}t.time_offset=i,Fe.setItem(je.SdkConfigCachedKey,We.encode64(JSON.stringify(t))),je.instance.sdkConfigCached=t,je.instance.sdkConfig=t,je.instance.initAuthorized=!0}else e==He.Unauthorized?(Re.w("Initialize SDK failed - Unauthorized"),je.instance.initAuthorized=!1):(e===He.NoResponse||e===He.RequestTimeout?Re.i("Init call (session start) failed - no response. Could be offline or timeout."):e===He.BadResponse||e===He.JsonEncodeFailed||e===He.JsonDecodeFailed?Re.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers."):e!==He.BadRequest&&e!==He.UnknownResponseCode||Re.i("Init call (session start) failed - bad request or unknown response."),null==je.instance.sdkConfig?null!=je.instance.sdkConfigCached?(Re.i("Init call (session start) failed - using cached init values."),je.instance.sdkConfig=je.instance.sdkConfigCached):(Re.i("Init call (session start) failed - using default init values."),je.instance.sdkConfig=je.instance.sdkConfigDefault):Re.i("Init call (session start) failed - using cached init values."),je.instance.initAuthorized=!0);if(je.instance.clientServerTimeOffset=je.getSdkConfig().time_offset?je.getSdkConfig().time_offset:0,je.populateConfigurations(je.getSdkConfig()),!je.isEnabled())return Re.w("Could not start session: SDK is disabled."),void De.stopEventQueue();De.ensureEventQueueIsRunning();var r=We.createGuid();je.instance.sessionId=r,je.instance.sessionStart=je.getClientTsAdjusted(),Xe.addSessionStartEvent();var o=De.getTimedBlockById(a.initTimedBlockId);null!=o&&(o.running=!1),a.initTimedBlockId=-1},a.resumeSessionAndStartQueue=function(){je.isInitialized()&&(Re.i("Resuming session."),je.sessionIsStarted()||a.newSession())},a.isSdkReady=function(e,t,i){return void 0===t&&(t=!0),void 0===i&&(i=""),i&&(i+=": "),e&&!je.isInitialized()?(t&&Re.w(i+"SDK is not initialized"),!1):e&&!je.isEnabled()?(t&&Re.w(i+"SDK is disabled"),!1):!(e&&!je.sessionIsStarted())||(t&&Re.w(i+"Session has not started yet"),!1)},a.initTimedBlockId=-1,a.methodMap={},a}(),Le.GameAnalytics=qe,Be.GameAnalytics.init();Be.GameAnalytics.gaCommand;var Ye=Be,Ke=function(){function e(){}return e.prototype.setup=function(e,t,i){w.analyticsEnabled&&(Ye.GameAnalytics.initialize(e,t),Ye.GameAnalytics.configureBuild(i),Ye.GameAnalytics.startSession(),window.addEventListener("beforeunload",function(){Ye.GameAnalytics.endSession()}))},e.prototype.addProgressionEvent=function(e,t,i,n,r){w.analyticsEnabled&&Ye.GameAnalytics.addProgressionEvent(e,t,i,n,r)},e.prototype.addDesignEvent=function(e,t){w.analyticsEnabled&&Ye.GameAnalytics.addDesignEvent(e,t)},e}();function Ze(o,a,s,l){return new(s||(s=Promise))(function(e,t){function i(e){try{r(l.next(e))}catch(e){t(e)}}function n(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(i,n)}r((l=l.apply(o,a||[])).next())})}function Je(i,n){var r,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(i,s)}catch(e){t=[6,e],o=0}finally{r=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}var Qe=e(function(e,t){e.exports=function o(a,s,l){function p(i,e){if(!s[i]){if(!a[i]){var t=u;if(!e&&t)return t(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=s[i]={exports:{}};a[i][0].call(r.exports,function(e){var t=a[i][1][e];return p(t||e)},r,r.exports,o,a,s,l)}return s[i].exports}for(var h=u,e=0;e<l.length;e++)p(l[e]);return p}({1:[function(e,n,z){(function(){var m,t=this||Function("return this")(),f=function(){var u,i,c,d,_,y,e=Date.now?Date.now:function(){return+new Date},m="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:e;function r(){}function o(e,t){var i;for(i in e)Object.hasOwnProperty.call(e,i)&&t(i)}function a(t,i){return o(i,function(e){t[e]=i[e]}),t}function s(t,i){o(i,function(e){void 0===t[e]&&(t[e]=i[e])})}function f(e,t,i,n,r,o,a){var s,l,p,h=e<o?0:(e-o)/r;for(s in t)t.hasOwnProperty(s)&&(l=a[s],p="function"==typeof l?l:u[l],t[s]=x(i[s],n[s],p,h));return t}function x(e,t,i,n){return e+(t-e)*i(n)}function v(t,i){var n=h.prototype.filter,r=t._filterArgs;o(n,function(e){void 0!==n[e][i]&&n[e][i].apply(t,r)})}function l(e,t,i,n,r,o,a,s,l,p,h){c=t+i+n,d=Math.min(h||m(),c),_=c<=d,y=n-(c-d),e.isPlaying()&&(_?(l(a,e._attachment,y),e.stop(!0)):(e._scheduleId=p(e._timeoutHandler,1e3/60),v(e,"beforeTween"),d<t+i?f(1,r,o,a,1,1,s):f(d,r,o,a,n,t+i,s),v(e,"afterTween"),l(r,e._attachment,y)))}function p(e,t){var i={},n=typeof t;return o(e,"string"===n||"function"===n?function(e){i[e]=t}:function(e){i[e]||(i[e]=t[e]||"linear")}),i}function h(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=i,void 0!==t&&this.setConfig(t)}return i="undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame)||setTimeout,h.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=m(),this._start(this.get(),this._attachment),this.resume())},h.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||r,this._step=e.step||r,this._finish=e.finish||r,this._duration=e.duration||500,this._currentState=a({},e.from||this.get()),this._originalState=this.get(),this._targetState=a({},e.to||this.get());var t=this;this._timeoutHandler=function(){l(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var i=this._currentState,n=this._targetState;return s(n,i),this._easing=p(i,e.easing||"linear"),this._filterArgs=[i,this._originalState,n,this._easing],v(this,"tweenCreated"),this},h.prototype.get=function(){return a({},this._currentState)},h.prototype.set=function(e){this._currentState=e},h.prototype.pause=function(){return this._pausedAtTime=m(),this._isPaused=!0,this},h.prototype.resume=function(){return this._isPaused&&(this._timestamp+=m()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},h.prototype.seek=function(e){e=Math.max(e,0);var t=m();return this._timestamp+e===0||(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,l(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause())),this},h.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=r,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),e&&(v(this,"beforeTween"),f(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),v(this,"afterTween"),v(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},h.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},h.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},h.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},h.prototype.filter={},u=h.prototype.formula={linear:function(e){return e}},a(h,{now:m,each:o,tweenProps:f,tweenProp:x,applyFilter:v,shallowCopy:a,defaults:s,composeEasingObject:p}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=l),"object"==typeof z?n.exports=h:void 0===t.Tweenable&&(t.Tweenable=h),h}();f.shallowCopy(f.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){return e*e*(2.70158*e-1.70158)},easeOutBack:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){return e*e*(2.70158*e-1.70158)},swingTo:function(e){return(e-=1)*e*(2.70158*e+1.70158)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}}),function(){function h(e,t,i,n,r,o){var a,p=0,h=0,u=0,s=0,l=0,c=0;function d(e){return((p*e+h)*e+u)*e}function _(e){return 0<=e?e:0-e}return p=1-(u=3*t)-(h=3*(n-t)-u),s=1-(c=3*i)-(l=3*(r-i)-c),a=function(e,t){var i,n,r,o,a,s,l;for(r=e,s=0;s<8;s++){if(_(o=d(r)-e)<t)return r;if(_(a=(3*p*(l=r)+2*h)*l+u)<1e-6)break;r-=o/a}if(n=1,(r=e)<(i=0))return i;if(n<r)return n;for(;i<n;){if(_((o=d(r))-e)<t)return r;o<e?i=r:n=r,r=.5*(n-i)+i}return r}(e,1/(200*o)),((s*a+l)*a+c)*a}f.setBezierFunction=function(e,t,i,n,r){var o,a,s,l,p=(o=t,a=i,s=n,l=r,function(e){return h(e,o,a,s,l,1)});return p.displayName=e,p.x1=t,p.y1=i,p.x2=n,p.y2=r,f.prototype.formula[e]=p},f.unsetBezierFunction=function(e){delete f.prototype.formula[e]}}(),(m=new f)._filterArgs=[],f.interpolate=function(e,t,i,n,r){var o=f.shallowCopy({},e),a=r||0,s=f.composeEasingObject(e,n||"linear");m.set({});var l=m._filterArgs;l.length=0,l[0]=o,l[1]=e,l[2]=t,l[3]=s,f.applyFilter(m,"tweenCreated"),f.applyFilter(m,"beforeTween");var p,h,u,c,d,_,y=(p=e,h=o,u=t,c=i,d=s,_=a,f.tweenProps(c,h,p,u,1,_,d));return f.applyFilter(m,"afterTween"),y},function(s){var l=/(\d|\-|\.)/,p=/([^\-0-9\.]+)/g,o=/[0-9.\-]+/g,a=new RegExp("rgb\\("+o.source+/,\s*/.source+o.source+/,\s*/.source+o.source+"\\)","g"),h=/^.*\(/,n=/#([0-9]|[a-f]){3,6}/gi,u="VAL";function r(i){s.each(i,function(e){var t=i[e];"string"==typeof t&&t.match(n)&&(i[e]=y(n,t,c))})}function c(e){var t,i=(3===(t=(t=e).replace(/#/,"")).length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]),d[0]=_(t.substr(0,2)),d[1]=_(t.substr(2,2)),d[2]=_(t.substr(4,2)),d);return"rgb("+i[0]+","+i[1]+","+i[2]+")"}var d=[];function _(e){return parseInt(e,16)}function y(e,t,i){var n=t.match(e),r=t.replace(e,u);if(n)for(var o,a=n.length,s=0;s<a;s++)o=n.shift(),r=r.replace(u,i(o));return r}function m(e){for(var t=e.match(o),i=t.length,n=e.match(h)[0],r=0;r<i;r++)n+=parseInt(t[r],10)+",";return n=n.slice(0,-1)+")"}function f(o){var a={};return s.each(o,function(e){var t,i,n=o[e];if("string"==typeof n){var r=g(n);a[e]={formatString:(t=n,i=t.match(p),i?(1===i.length||t.charAt(0).match(l))&&i.unshift(""):i=["",""],i.join(u)),chunkNames:function(e,t){var i,n=[],r=e.length;for(i=0;i<r;i++)n.push("_"+t+"_"+i);return n}(r,e)}}}),a}function x(o,a){s.each(a,function(e){for(var t=o[e],i=g(t),n=i.length,r=0;r<n;r++)o[a[e].chunkNames[r]]=+i[r];delete o[e]})}function v(r,o){s.each(o,function(e){var t=r[e],i=function(e,t){for(var i,n={},r=t.length,o=0;o<r;o++)i=t[o],n[i]=e[i],delete e[i];return n}(r,o[e].chunkNames),n=function(e,t){z.length=0;for(var i=t.length,n=0;n<i;n++)z.push(e[t[n]]);return z}(i,o[e].chunkNames);t=function(e,t){for(var i=e,n=t.length,r=0;r<n;r++)i=i.replace(u,+t[r].toFixed(4));return i}(o[e].formatString,n),r[e]=y(a,t,m)})}var z=[];function g(e){return e.match(o)}s.prototype.filter.token={tweenCreated:function(e,t,i,n){r(e),r(t),r(i),this._tokenData=f(e)},beforeTween:function(e,t,i,n){var l,p;l=n,p=this._tokenData,s.each(p,function(e){var t,i=p[e],n=i.chunkNames,r=n.length,o=l[e];if("string"==typeof o){var a=o.split(" "),s=a[a.length-1];for(t=0;t<r;t++)l[n[t]]=a[t]||s}else for(t=0;t<r;t++)l[n[t]]=o;delete l[e]}),x(e,this._tokenData),x(t,this._tokenData),x(i,this._tokenData)},afterTween:function(e,t,i,n){var l,p;v(e,this._tokenData),v(t,this._tokenData),v(i,this._tokenData),l=n,p=this._tokenData,s.each(p,function(e){var t=p[e],i=t.chunkNames,n=i.length,r=l[i[0]],o=typeof r;if("string"===o){for(var a="",s=0;s<n;s++)a+=" "+l[i[s]],delete l[i[s]];l[e]=a.substr(1)}else l[e]=r})}}}(f)}).call(null)},{}],2:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var i=50-t/2;return r.render(this._pathTemplate,{radius:i,"2radius":2*i})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":9}],3:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},o.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":9}],4:[function(e,t,i){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Square:e("./square"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./square":8,"./utils":9}],5:[function(e,t,i){var h=e("shifty"),u=e("./utils"),n={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},r=function e(t,i){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");var n;i=u.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},i),n=u.isString(t)?document.querySelector(t):t,this.path=n,this._opts=i,this._tweenable=null;var r=this.path.getTotalLength();this.path.style.strokeDasharray=r+" "+r,this.set(0)};r.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength(),i=1-e/t;return parseFloat(i.toFixed(6),10)},r.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(u.isFunction(t)){var i=this._easing(this._opts.easing),n=this._calculateTo(e,i),r=this._opts.shape||this;t(n,r,this._opts.attachment)}},r.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},r.prototype.animate=function(e,i,t){i=i||{},u.isFunction(i)&&(t=i,i={});var n=u.extend({},i),r=u.extend({},this._opts);i=u.extend(r,i);var o=this._easing(i.easing),a=this._resolveFromAndTo(e,o,n);this.stop(),this.path.getBoundingClientRect();var s=this._getComputedDashOffset(),l=this._progressToOffset(e),p=this;this._tweenable=new h,this._tweenable.tween({from:u.extend({offset:s},a.from),to:u.extend({offset:l},a.to),duration:i.duration,easing:o,step:function(e){p.path.style.strokeDashoffset=e.offset;var t=i.shape||p;i.step(e,t,i.attachment)},finish:function(e){u.isFunction(t)&&t()}})},r.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},r.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},r.prototype._resolveFromAndTo=function(e,t,i){return i.from&&i.to?{from:i.from,to:i.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},r.prototype._calculateFrom=function(e){return h.interpolate(this._opts.from,this._opts.to,this.value(),e)},r.prototype._calculateTo=function(e,t){return h.interpolate(this._opts.from,this._opts.to,e,t)},r.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},r.prototype._easing=function(e){return n.hasOwnProperty(e)?n[e]:e},t.exports=r},{"./utils":9,shifty:1}],6:[function(e,t,i){var n=e("./shape"),r=e("./circle"),o=e("./utils"),a=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,n.apply(this,arguments)};((a.prototype=new n).constructor=a).prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},a.prototype._initializeTextContainer=function(e,t,i){e.text.style&&(i.style.top="auto",i.style.bottom="0",e.text.alignToBottom?o.setStyle(i,"transform","translate(-50%, 0)"):o.setStyle(i,"transform","translate(-50%, 50%)"))},a.prototype._pathString=r.prototype._pathString,a.prototype._trailString=r.prototype._trailString,t.exports=a},{"./circle":2,"./shape":7,"./utils":9}],7:[function(e,t,i){var a=e("./path"),s=e("./utils"),n="Object is destroyed",r=function e(t,i){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=s.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},i,!0),s.isObject(i)&&void 0!==i.svgStyle&&(this._opts.svgStyle=i.svgStyle),s.isObject(i)&&s.isObject(i.text)&&void 0!==i.text.style&&(this._opts.text.style=i.text.style);var n,r=this._createSvgView(this._opts);if(!(n=s.isString(t)?document.querySelector(t):t))throw new Error("Container does not exist: "+t);this._container=n,this._container.appendChild(r.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&s.setStyles(r.svg,this._opts.svgStyle),this.svg=r.svg,this.path=r.path,this.trail=r.trail,this.text=null;var o=s.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new a(r.path,o),s.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};r.prototype.animate=function(e,t,i){if(null===this._progressPath)throw new Error(n);this._progressPath.animate(e,t,i)},r.prototype.stop=function(){if(null===this._progressPath)throw new Error(n);void 0!==this._progressPath&&this._progressPath.stop()},r.prototype.destroy=function(){if(null===this._progressPath)throw new Error(n);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,(this._progressPath=null)!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},r.prototype.set=function(e){if(null===this._progressPath)throw new Error(n);this._progressPath.set(e)},r.prototype.value=function(){if(null===this._progressPath)throw new Error(n);return void 0===this._progressPath?0:this._progressPath.value()},r.prototype.setText=function(e){if(null===this._progressPath)throw new Error(n);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),s.isObject(e)?(s.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},r.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var i=null;(e.trailColor||e.trailWidth)&&(i=this._createTrail(e),t.appendChild(i));var n=this._createPath(e);return t.appendChild(n),{svg:t,path:n,trail:i}},r.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},r.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},r.prototype._createTrail=function(e){var t=this._trailString(e),i=s.extend({},e);return i.trailColor||(i.trailColor="#eee"),i.trailWidth||(i.trailWidth=i.strokeWidth),i.color=i.trailColor,i.strokeWidth=i.trailWidth,i.fill=null,this._createPathElement(t,i)},r.prototype._createPathElement=function(e,t){var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d",e),i.setAttribute("stroke",t.color),i.setAttribute("stroke-width",t.strokeWidth),t.fill?i.setAttribute("fill",t.fill):i.setAttribute("fill-opacity","0"),i},r.prototype._createTextContainer=function(e,t){var i=document.createElement("div");i.className=e.text.className;var n=e.text.style;return n&&(e.text.autoStyleContainer&&(t.style.position="relative"),s.setStyles(i,n),n.color||(i.style.color=e.color)),this._initializeTextContainer(e,t,i),i},r.prototype._initializeTextContainer=function(e,t,i){},r.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},r.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},r.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),i=parseFloat(t.getPropertyValue("width"),10),n=parseFloat(t.getPropertyValue("height"),10);s.floatEquals(this.containerAspectRatio,i/n)}},t.exports=r},{"./path":5,"./utils":9}],8:[function(e,t,i){var n=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}",this._trailTemplate="M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}",n.apply(this,arguments)};((o.prototype=new n).constructor=o).prototype._pathString=function(e){var t=100-e.strokeWidth/2;return r.render(this._pathTemplate,{width:t,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2})},o.prototype._trailString=function(e){var t=100-e.strokeWidth/2;return r.render(this._trailTemplate,{width:t,strokeWidth:e.strokeWidth,halfOfStrokeWidth:e.strokeWidth/2,startMargin:e.strokeWidth/2-e.trailWidth/2})},t.exports=o},{"./shape":7,"./utils":9}],9:[function(e,t,i){var a="Webkit Moz O ms".split(" ");function n(e,t,i){for(var n=e.style,r=0;r<a.length;++r){var o=a[r];n[o+s(t)]=i}n[t]=i}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e){if(t=e,"[object Array]"===Object.prototype.toString.call(t))return!1;var t,i=typeof e;return"object"===i&&!!e}function r(e,t){for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t(n,i)}}t.exports={extend:function e(t,i,n){for(var r in t=t||{},n=n||!1,i=i||{})if(i.hasOwnProperty(r)){var o=t[r],a=i[r];n&&l(o)&&l(a)?t[r]=e(o,a,n):t[r]=a}return t},render:function(e,t){var i=e;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n],o="\\{"+n+"\\}",a=new RegExp(o,"g");i=i.replace(a,r)}return i},setStyle:n,setStyles:function(i,e){r(e,function(e,t){null!=e&&(l(e)&&!0===e.prefix?n(i,t,e.value):i.style[t]=e)})},capitalize:s,isString:function(e){return"string"==typeof e||e instanceof String},isFunction:function(e){return"function"==typeof e},isObject:l,forEachObject:r,floatEquals:function(e,t){return Math.abs(e-t)<.001},removeChildren:function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}}},{}]},{},[4])(4)});var $e=function(){function t(e){this.circleLoader=null,this.loaded=!1,this.showPlayButton="undefined"==typeof playBtn||playBtn,this.progress=0,this.options={gameId:"12346",gameTitle:"Place Holder",gameName:"place-holder",libs:[],version:"dev",barColor:"white",gaMeasurementId:"none"},this.options.gameId=e.gameId,this.options.gameTitle=e.gameTitle,this.options.version=e.version,this.options.barColor=e.barColor?e.barColor:this.options.barColor,this.options.libs=e.libs,this.options.gaMeasurementId=e.gaMeasurementId}return t.getInstance=function(e){if(!t.instance){if(!e)throw new Error("Can not create new SplashLoader instance without options!");t.instance=new t(e)}return t.instance},t.prototype.create=function(){return Ze(this,void 0,void 0,function(){var n,r,o,a,s,l,p;return Je(this,function(e){switch(e.label){case 0:return n="\n        #h5branding-center {\n            position: absolute;\n            top: 45%;\n            left: 50%;\n            transform: translate(-50%, -20%);\n            text-align: center;\n            width: 100%;\n        }\n        #h5branding-wrapper {\n            position: relative;\n            z-index: 665;\n            width: 150px;\n            height: 150px;\n            display:inline-block;\n            margin: 35px 40px 96px 40px;\n        }\n\n        #h5branding-version {\n            position: absolute;\n            right: 5px;\n            font-family: Helvetica, Arial, sans-serif;\n            color: #ffffff;\n            font-size: 0.5em;\n            top: 5px;\n        }\n\n        #h5branding-wrapper > #h5branding-bar, #h5branding-wrapper > img {\n            box-shadow: inset 10px 10px 20px 5px rgba(0, 0, 0, 0.5);\n            border-radius: 50%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #h5branding-ad {\n            position: relative;\n            z-index: 667;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: rgba(256, 256, 256, 0.2);\n            width: 336px;\n            height: 280px;\n            display: none;\n            margin: 0px 10px 0px 10px;\n        }\n\n        #h5branding-wrapper > img {\n            /* Needs appropriate vendor prefixes */\n            box-sizing: border-box;\n\n            /* This needs to be equal to strokeWidth */\n            padding: 4%;\n        }\n\n        #h5branding-wrapper > img {\n            border-radius: 50%;\n            box-shadow: inset 0 5px 5px rgba(0, 0, 0, 0.5), 5px 5px 7px rgba(0, 0, 0, 0.3);\n        }\n\n        #h5branding-container {\n            box-sizing: border-box;\n            position: absolute;\n            z-index: 664;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #000;\n            overflow: hidden;\n        }\n\n        #h5branding-background {\n            position: absolute;\n            top: -25%;\n            left: -25%;\n            width: 150%;\n            height: 150%;\n            background-blend-mode: multiply;\n            background-size: cover;\n            filter: blur(40px) brightness(1.5);\n        }\n\n        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n             /* IE10+ CSS styles go here */\n             #h5branding-background {\n                background-image: none !important;\n             }\n        }\n\n        #h5branding-logo {\n            position: absolute;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n            text-align: center;\n            top: 10%;\n        }\n\n        #h5branding-logo > img {\n            height: 150px;\n        }\n\n        #h5branding-title {\n            position: absolute;\n            width: 100%;\n            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5) 50%, transparent);\n            color: #fff;\n            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7);\n            bottom:10%;\n            padding: 15px 0;\n            text-align: center;\n            font-size: 18px;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            line-height: 100%;\n        }\n\n        #h5branding-button {\n            /* border: 0; */\n            padding: 10px 22px;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: linear-gradient(0deg, #dddddd, #ffffff);\n            color: #222;\n            text-transform: uppercase;\n            text-shadow: 0 0 1px #fff;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            font-size: 18px;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n            display: none;\n            width: 150px;\n            position: absolute;\n            top: 170px;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n        }\n\n        @media (orientation: portrait) and (max-width: 1080px) {\n            #h5branding-logo > img {\n                height: initial;\n                width:100%;\n            }\n        }\n\n        @media (orientation: landscape) and (max-height: 640px) {\n            #h5branding-title {\n                display: none;\n            }\n\n            #h5branding-logo > img {\n                height: 100px;\n            }\n        }\n\n        @media (orientation: landscape) and (max-height: 460px) {\n            #h5branding-title {\n                display: none;\n            }\n\n            #h5branding-wrapper {\n                width: 110px;\n                height: 110px;\n                margin: 0;\n            }\n\n            #h5branding-logo {\n                top: 0;\n                transform: scale(0.7, 0.7);\n            }\n\n            #h5branding-button {\n                top: initial;\n                width: 110px;\n                font-size: 14px;\n                position: absolute;\n                top: 140px;\n                left: 0;\n                right: 0;\n            }\n\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n\n        @media (orientation: portrait) and (max-width: 250px) {\n            #h5branding-logo {\n                top: 2%;\n            }\n        }\n\n        @media (orientation: landscape) and (max-width: 330px) {\n             #h5branding-button {\n                top: 120px;\n            }\n\n            #h5branding-logo > img {\n                height: 70px;\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 850px) {\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 1100px) {\n            #h5branding-center {\n                top: 40%;\n            }\n\n            #h5branding-title {\n               bottom: 5%\n            }\n        }\n\n        @media (max-width: 600px) and (max-height: 900px) {\n            #h5branding-title {\n               display: none\n            }\n        }\n\n        @media (orientation: landscape) and (min-width: 800px) {\n            #h5branding-wrapper {\n                margin-left: 120px;\n                margin-right: 120px;\n            }\n        }\n\n        ",t=this.getGameLogoUrl(this.options.gameId),i=this.options.gameTitle,r='\n        <div id="h5branding-background"></div>\n        <div id="h5branding-version"></div>\n        <div id="h5branding-logo"></div>\n        <div id="h5branding-center">\n            <div id="h5branding-ad"></div>\n            <div id="h5branding-wrapper">\n                <img src="'+t+'" />\n                <div id="h5branding-bar"></div>\n                <button id="h5branding-button" onclick="h5branding.SplashLoader.getInstance().onPlayButtonClick();">Play</button>\n            </div>\n        </div>\n        <div id="h5branding-title">'+i+"</div>\n    ",o=document.head||document.getElementsByTagName("head")[0],(a=document.createElement("style")).type="text/css",a.styleSheet?a.styleSheet.cssText=n:a.appendChild(document.createTextNode(n)),o.appendChild(a),(s=document.createElement("div")).innerHTML=r,s.id="h5branding-container",(l=document.body||document.getElementsByTagName("body")[0]).insertBefore(s,l.firstChild),this.circleLoader=new Qe.Circle("#h5branding-bar",{strokeWidth:3,color:this.options.barColor}),this.options.gaMeasurementId&&(C.GAMeasurementId=this.options.gaMeasurementId),(p=document.getElementById("h5branding-version"))&&(p.innerHTML=this.options.version),[4,Promise.all([this.loadBranding(),this.loadLibs(),C.preload()])];case 1:return e.sent(),this.loaded=!0,[2]}var t,i})})},t.prototype.loadBranding=function(){return Ze(this,void 0,void 0,function(){var t,i,n;return Je(this,function(e){switch(e.label){case 0:return[4,w.preload(Date.now().toString())];case 1:return e.sent(),(t=document.getElementById("h5branding-background"))&&(t.style.backgroundImage="url("+this.getGameLogoUrl(this.options.gameId)+")",t.style.backgroundColor=w.brandingBackgroundColor),(i=document.getElementById("h5branding-logo"))&&S.getBrandingDomain()!==l.BrandingDomain.Neutral&&((n=document.createElement("img")).src=w.brandingLogoUrl.replace("_small",""),i.appendChild(n)),[2]}})})},t.prototype.loadLibs=function(){var i=this,n=this.options.libs.map(function(e,t){return a.instance.loadScript(e,!0,function(){i.setScriptloadProgress(n.length,t+1)})});return Promise.all(n)},Object.defineProperty(t.prototype,"bannerAllowed",{get:function(){var e=document.body.clientWidth,t=document.body.clientHeight;return this.progress<100&&!(t<e&&t<=460)&&!(e<600&&t<850)},enumerable:!1,configurable:!0}),t.prototype.showBanner=function(){if(!this.bannerAllowed)return null;var e=document.getElementById("h5branding-ad");return e?(e.style.display="inline-flex",e):null},t.prototype.setScriptloadProgress=function(e,t){var i=.3*t/e;this.circleLoader.animate(i,null,function(){})},t.prototype.setLoadProgress=function(e){var t=this;if(this.loaded)if(e=30+.7*e,100===(this.progress=e)){var i=document.querySelector("#h5branding-button");this.circleLoader.animate(1,null,function(){!S.inGDGameZone()&&i&&!0===t.showPlayButton?i.style.display="block":(S.inGDGameZone()||!1===t.showPlayButton)&&t.onPlayButtonClick()})}else this.circleLoader.animate(e/100,null,function(){})},t.prototype.setButtonCallback=function(e){this.buttonCallback=e},t.prototype.onPlayButtonClick=function(){this.buttonCallback&&this.buttonCallback()},t.prototype.destroy=function(){var e=document.querySelector("#h5branding-container");null!==e&&null!==e.parentNode&&e.parentNode.removeChild(e)},t.prototype.getGameLogoUrl=function(e){var t=e+"-512x512.jpeg";return window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA?"assets/"+t:"https://img.gamedistribution.com/"+t},t}(),et=Ye.EGAProgressionStatus,tt=new C,it=new Ke;l.EGAProgressionStatus=et,l.google=tt,l.gameanalytics=it,l.Utils=S,l.Domain=o,l.Branding=w,l.SplashLoader=$e,Object.defineProperty(l,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.h5ads=e.h5ads||{})}(this,function(a){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};var e,i,t,r=(function(e){var n=Object.prototype.hasOwnProperty,d="~";function i(){}function s(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function r(e,t,i,n,r){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new s(i,n||e,r),a=d?d+t:t;return e._events[a]?e._events[a].fn?e._events[a]=[e._events[a],o]:e._events[a].push(o):(e._events[a]=o,e._eventsCount++),e}function p(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function t(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(d=!1)),t.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},t.prototype.listeners=function(e){var t=d?d+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,r=i.length,o=new Array(r);n<r;n++)o[n]=i[n].fn;return o},t.prototype.listenerCount=function(e){var t=d?d+e:e,i=this._events[t];return i?i.fn?1:i.length:0},t.prototype.emit=function(e,t,i,n,r,o){var a=d?d+e:e;if(!this._events[a])return!1;var s,l,p=this._events[a],h=arguments.length;if(p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),h){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,i),!0;case 4:return p.fn.call(p.context,t,i,n),!0;case 5:return p.fn.call(p.context,t,i,n,r),!0;case 6:return p.fn.call(p.context,t,i,n,r,o),!0}for(l=1,s=new Array(h-1);l<h;l++)s[l-1]=arguments[l];p.fn.apply(p.context,s)}else{var u,c=p.length;for(l=0;l<c;l++)switch(p[l].once&&this.removeListener(e,p[l].fn,void 0,!0),h){case 1:p[l].fn.call(p[l].context);break;case 2:p[l].fn.call(p[l].context,t);break;case 3:p[l].fn.call(p[l].context,t,i);break;case 4:p[l].fn.call(p[l].context,t,i,n);break;default:if(!s)for(u=1,s=new Array(h-1);u<h;u++)s[u-1]=arguments[u];p[l].fn.apply(p[l].context,s)}}return!0},t.prototype.on=function(e,t,i){return r(this,e,t,i,!1)},t.prototype.once=function(e,t,i){return r(this,e,t,i,!0)},t.prototype.removeListener=function(e,t,i,n){var r=d?d+e:e;if(!this._events[r])return this;if(!t)return p(this,r),this;var o=this._events[r];if(o.fn)o.fn!==t||n&&!o.once||i&&o.context!==i||p(this,r);else{for(var a=0,s=[],l=o.length;a<l;a++)(o[a].fn!==t||n&&!o[a].once||i&&o[a].context!==i)&&s.push(o[a]);s.length?this._events[r]=1===s.length?s[0]:s:p(this,r)}return this},t.prototype.removeAllListeners=function(e){var t;return e?(t=d?d+e:e,this._events[t]&&p(this,t)):(this._events=new i,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prefixed=d,t.EventEmitter=t,e.exports=t}(e={exports:{}},e.exports),e.exports);(t=i||(i={}))[t.AdMob=0]="AdMob",t[t.MoPub=1]="MoPub",t[t.Chartboost=2]="Chartboost",t[t.Heyzap=3]="Heyzap";var o,s,l,p,h=function(){function e(e,t){if(this.adsEnabled=!1,this.bannerShowable=!1,this.interstitialShowable=!1,this.insentiveShowable=!1,Cocoon&&Cocoon.Ad){switch(this.adsEnabled=!0,e){default:case i.AdMob:this.cocoonProvider=Cocoon.Ad.AdMob;break;case i.Chartboost:this.cocoonProvider=Cocoon.Ad.Chartboost;break;case i.Heyzap:this.cocoonProvider=Cocoon.Ad.Heyzap;break;case i.MoPub:this.cocoonProvider=Cocoon.Ad.MoPub}this.cocoonProvider.configure(t)}}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){if(this.adsEnabled){if(e===a.AdType.banner){if(!this.bannerShowable||null===this.banner)return;this.adManager.emit(a.AdEvents.BANNER_SHOWN,this.banner.width,this.banner.height),this.adManager.bannerActive=!0,this.banner.show()}if(e===a.AdType.interstitial){if(!this.interstitialShowable||null===this.interstitial)return void this.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.interstitial);this.interstitial.show()}if(e===a.AdType.rewarded){if(!this.insentiveShowable||null===this.insentive)return void this.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.rewarded);this.insentive.show()}}else e!==a.AdType.banner&&this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e,t,i){var n=this;this.adsEnabled&&(this.destroyAd(e),e===a.AdType.banner&&(this.banner=this.cocoonProvider.createBanner(t),i&&this.banner.setLayout(i),this.banner.on("load",function(){n.bannerShowable=!0}),this.banner.on("fail",function(){n.bannerShowable=!1,n.banner=null}),this.banner.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.banner)}),this.banner.on("show",function(){}),this.banner.on("dismiss",function(){}),this.banner.load()),e===a.AdType.interstitial&&(this.interstitial=this.cocoonProvider.createInterstitial(t),this.interstitial.on("load",function(){n.interstitialShowable=!0}),this.interstitial.on("fail",function(){n.interstitialShowable=!1,n.interstitial=null}),this.interstitial.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.interstitial)}),this.interstitial.on("show",function(){n.adManager.emit(a.AdEvents.CONTENT_PAUSED,a.AdType.interstitial)}),this.interstitial.on("dismiss",function(){n.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.interstitial),n.interstitialShowable=!1,n.interstitial=null}),this.interstitial.load()),e===a.AdType.rewarded&&(this.insentive=this.cocoonProvider.createRewardedVideo(t),this.insentive.on("load",function(){n.insentiveShowable=!0}),this.insentive.on("fail",function(){n.insentiveShowable=!1,n.insentive=null}),this.insentive.on("click",function(){n.adManager.emit(a.AdEvents.AD_CLICKED,a.AdType.rewarded)}),this.insentive.on("show",function(){n.adManager.emit(a.AdEvents.CONTENT_PAUSED,a.AdType.rewarded)}),this.insentive.on("dismiss",function(){n.adManager.emit(a.AdEvents.CONTENT_RESUMED,a.AdType.rewarded),n.insentiveShowable=!1,n.insentive=null}),this.insentive.on("reward",function(){n.adManager.emit(a.AdEvents.AD_REWARDED,a.AdType.rewarded),n.insentiveShowable=!1,n.insentive=null}),this.insentive.load()))},e.prototype.destroyAd=function(e){if(this.adsEnabled){if(e===a.AdType.banner&&null!==this.banner){try{this.cocoonProvider.releaseBanner(this.banner)}catch(e){}this.banner=null,this.bannerShowable=!1}e===a.AdType.interstitial&&null!==this.interstitial&&(this.cocoonProvider.releaseInterstitial(this.interstitial),this.interstitial=null,this.interstitialShowable=!1)}},e.prototype.hideAd=function(e){this.adsEnabled&&(e===a.AdType.interstitial&&null!==this.interstitial&&this.interstitial.hide(),e===a.AdType.banner&&null!==this.banner&&(this.adManager.bannerActive&&(this.adManager.bannerActive=!1,this.adManager.emit(a.AdEvents.BANNER_HIDDEN,this.banner.width,this.banner.height)),this.banner.hide()),e===a.AdType.rewarded&&null!==this.insentive&&this.insentive.hide())},e}(),u=function(){function e(e,t,i){void 0===i&&(i=!1),this.adsEnabled=!1,void 0===cordova.plugins||void 0!==cordova.plugins&&void 0===cordova.plugins.gdApi||(i&&cordova.plugins.gdApi.enableTestAds(),this.setAdListeners(),cordova.plugins.gdApi.init([e,t],function(e){},function(e){}))}return e.prototype.setAdListeners=function(){var t=this;cordova.plugins.gdApi.setAdListener(function(e){switch(e.event){case"BANNER_STARTED":t.adManager.emit(a.AdEvents.CONTENT_PAUSED);break;case"API_IS_READY":t.adsEnabled=!0;break;case"API_ALREADY_INITIALIZED":break;case"BANNER_CLOSED":case"API_NOT_READY":case"BANNER_FAILED":t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}},function(e){t.adsEnabled=!1})},e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){var t=this;this.adsEnabled?cordova.plugins.gdApi.showBanner(function(e){},function(e){t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}):this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e){},e.prototype.destroyAd=function(e){},e.prototype.hideAd=function(e){},e}(),c=function(){function e(){var t=this;if(this.adsEnabled=!1,this.rewardedLoaded=!1,"undefined"!=typeof gamedockSDK){gamedockSDK.on("PrivacyPolicyStatus",function(e){t.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)}),gamedockSDK.initialise(!1,{shouldBlock:!0,requiredAge:12},!0,"PRODUCTION",[]),gamedockSDK.on("AdAvailable",function(e){switch(e.type){case"interstitial":t.interstitalAvailable();break;case"rewardVideo":t.rewardedChanged(!0);break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdNotAvailable",function(e){switch(e.type){case"interstitial":case"rewardVideo":t.resumeGameplay();break;case"banner":throw new Error("Not yet implemented.")}}),gamedockSDK.on("AdFinished",function(e){switch(e.type){case"interstitial":t.resumeGameplay();break;case"rewardVideo":t.rewardVideoFinished(e.reason);break;case"banner":throw new Error("Not yet implemented.")}})}}return e.prototype.setManager=function(e){this.adManager=e},e.prototype.showAd=function(e){if(void 0===e&&(e=a.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(e){case a.AdType.interstitial:this.adManager.emit(a.AdEvents.CONTENT_PAUSED),gamedockSDK.requestInterstitial();break;case a.AdType.rewarded:if(!this.adAvailable(a.AdType.rewarded)){this.resumeGameplay();break}this.adManager.emit(a.AdEvents.CONTENT_PAUSED),this.rewardedChanged(!1),gamedockSDK.playRewardVideo();break;default:this.resumeGameplay()}},e.prototype.interstitalAvailable=function(){"undefined"!=typeof gamedockSDK&&gamedockSDK.playInterstitial()},e.prototype.rewardVideoFinished=function(e){switch(e){case"dismiss":this.resumeGameplay();break;case"close":this.adManager.emit(a.AdEvents.AD_REWARDED)}},e.prototype.resumeGameplay=function(){this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.preloadAd=function(e){if(void 0===e&&(e=a.AdType.interstitial),"undefined"!=typeof gamedockSDK)switch(e){case a.AdType.rewarded:if(this.rewardedLoaded)return;gamedockSDK.requestRewardVideo()}},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.adAvailable=function(e){switch(e){case a.AdType.rewarded:return this.rewardedLoaded}return!1},e.prototype.rewardedChanged=function(e){this.rewardedLoaded=e},e}(),d=function(){function e(e){var t=this;this.adsEnabled=!1,this.adsEnabled=!0,HeyzapAds.start(e).then(function(){},function(e){t.adsEnabled=!1})}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e,t){var i=this;switch(this.adsEnabled||this.adManager.emit(a.AdEvents.CONTENT_RESUMED),e){case a.AdType.interstitial:HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.HIDE)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.InterstitialAd.Events.SHOW_FAILED)}),HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.InterstitialAd.Events.CLICKED)}),HeyzapAds.InterstitialAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.interstitial:HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.HIDE)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.VideoAd.Events.SHOW_FAILED)}),HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.VideoAd.Events.CLICKED)}),HeyzapAds.VideoAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.rewarded:HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.HIDE)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED,function(){i.adManager.emit(a.AdEvents.CONTENT_RESUMED,HeyzapAds.IncentivizedAd.Events.SHOW_FAILED)}),HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED,function(){i.adManager.emit(a.AdEvents.AD_CLICKED,HeyzapAds.IncentivizedAd.Events.CLICKED)}),HeyzapAds.IncentivizedAd.show().then(function(){i.adManager.emit(a.AdEvents.CONTENT_PAUSED)},function(e){i.adManager.emit(a.AdEvents.CONTENT_RESUMED)});break;case a.AdType.banner:if(void 0===t)return;HeyzapAds.BannerAd.show(t).then(function(){},function(e){})}},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(e){this.adsEnabled&&e===a.AdType.rewarded&&HeyzapAds.IncentivizedAd.fetch().then(function(){},function(e){})},e.prototype.destroyAd=function(e){this.adsEnabled&&e===a.AdType.banner&&HeyzapAds.BannerAd.destroy().then(function(){},function(e){})},e.prototype.hideAd=function(e){this.adsEnabled&&e===a.AdType.banner&&HeyzapAds.BannerAd.hide().then(function(){},function(e){})},e}(),_=function(){function e(e){var t=this;if(this.adsEnabled=!1,this.interstitialLoaded=!1,this.rewardedLoaded=!1,"undefined"!=typeof IronSourceAds){IronSourceAds.init({appKey:e});var i=function(){return t.resumeGameplay()};window.addEventListener("interstitialClosed",i),window.addEventListener("interstitialShowFailed",i),window.addEventListener("interstitialLoaded",function(){return t.interstitialChanged(!0)}),window.addEventListener("rewardedVideoClosed",i),window.addEventListener("rewardedVideoFailed",i),IronSourceAds.hasRewardedVideo({onSuccess:this.rewardedChanged.bind(this)}),window.addEventListener("rewardedVideoAvailabilityChanged",function(e){return t.rewardedChanged(e.available)})}}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e){switch(void 0===e&&(e=a.AdType.interstitial),e){case a.AdType.interstitial:if(!this.interstitialLoaded){this.resumeGameplay();break}this.interstitialChanged(!1),this.adManager.emit(a.AdEvents.CONTENT_PAUSED),IronSourceAds.showInterstitial();break;case a.AdType.rewarded:if(!this.rewardedLoaded){this.resumeGameplay();break}this.adManager.emit(a.AdEvents.CONTENT_PAUSED),IronSourceAds.showRewardedVideo();break;default:this.resumeGameplay()}},e.prototype.resumeGameplay=function(){this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.preloadAd=function(e){void 0===e&&(e=a.AdType.interstitial),e===a.AdType.interstitial&&IronSourceAds.loadInterstitial()},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.adAvailable=function(e){switch(e){case a.AdType.interstitial:return this.interstitialLoaded;case a.AdType.rewarded:return this.rewardedLoaded}return!1},e.prototype.interstitialChanged=function(e){this.interstitialLoaded=e},e.prototype.rewardedChanged=function(e){this.rewardedLoaded=e},e}();(s=o||(o={})).interstitial="interstitial",s.rewarded="rewarded",s.display="display",(l=a.GameDistributionBannerSize||(a.GameDistributionBannerSize={}))[l.LargeRectangle=0]="LargeRectangle",l[l.MediumRectangle=1]="MediumRectangle",l[l.Billboard=2]="Billboard",l[l.Leaderboard=3]="Leaderboard",l[l.Skyscraper=4]="Skyscraper",l[l.WideSkyscraper=5]="WideSkyscraper",(p=a.GameDistributionAlignment||(a.GameDistributionAlignment={}))[p.TopLeft=0]="TopLeft",p[p.TopCenter=1]="TopCenter",p[p.TopRight=2]="TopRight",p[p.CenterLeft=3]="CenterLeft",p[p.Center=4]="Center",p[p.CenterRight=5]="CenterRight",p[p.BottomLeft=6]="BottomLeft",p[p.BottomCenter=7]="BottomCenter",p[p.BottomRight=8]="BottomRight";var y,m,f=function(){function e(){this.scaleFactor=1,this.offsetX=0,this.offsetY=0,this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left="0px",this.element.id="banner-"+Date.now()+(1e7*Math.random()|0),document.body.appendChild(this.element)}return e.prototype.loadBanner=function(){return"undefined"==typeof gdsdk?Promise.reject("GD Sdk not available, probably due to adblocker"):gdsdk.showAd(o.display,{containerId:this.element.id})},e.prototype.destroy=function(){document.body.removeChild(this.element),this.resizeListener&&window.removeEventListener("resize",this.resizeListener),delete this.element,delete this.parent,delete this.alignment},e.prototype.alignIn=function(e,t){var i=this;this.parent||(this.parent=e,this.alignment=t,this.resizeListener=function(){return i.resize()},window.addEventListener("resize",this.resizeListener),this.resize())},e.prototype.setOffset=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.offsetX=e,this.offsetY=t,this.resize()},e.prototype.resize=function(){if(this.parent){var e=this.parent.getBoundingClientRect();switch(this.alignment){case a.GameDistributionAlignment.TopLeft:this.position(e.left,e.top);break;case a.GameDistributionAlignment.TopCenter:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top);break;case a.GameDistributionAlignment.TopRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top);break;case a.GameDistributionAlignment.CenterLeft:this.position(e.left,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.Center:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.CenterRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top+e.height/2-this.height*this.scaleFactor/2);break;case a.GameDistributionAlignment.BottomLeft:this.position(e.left,e.top+e.height-this.height*this.scaleFactor);break;case a.GameDistributionAlignment.BottomCenter:this.position(e.left+e.width/2-this.width*this.scaleFactor/2,e.top+e.height-this.height*this.scaleFactor);break;case a.GameDistributionAlignment.BottomRight:this.position(e.left+e.width-this.width*this.scaleFactor,e.top+e.height-this.height*this.scaleFactor)}}},e.prototype.setSize=function(e){var t,i;switch(e){default:case a.GameDistributionBannerSize.LargeRectangle:t=336,i=280;break;case a.GameDistributionBannerSize.MediumRectangle:t=300,i=250;break;case a.GameDistributionBannerSize.Billboard:t=970,i=250;break;case a.GameDistributionBannerSize.Leaderboard:t=728,i=90;break;case a.GameDistributionBannerSize.Skyscraper:t=120,i=600;break;case a.GameDistributionBannerSize.WideSkyscraper:t=160,i=600}this.width=t,this.height=i,this.element.style.width=t+"px",this.element.style.height=i+"px"},e.prototype.position=function(e,t){this.element.style.left=e+this.offsetX+"px",this.element.style.top=t+this.offsetY+"px"},e.prototype.scale=function(e){this.element.style.transformOrigin="left top",this.scaleFactor=e,this.element.style.transform="scale("+e+")"},e}(),x=function(){function e(e){var t,i,n,r,o=this;this.adsEnabled=!1,this.hasRewarded=!1,this.adShowing=!1,this.areAdsEnabled(),window.GD_OPTIONS={gameId:e,advertisementSettings:{autoplay:!1},onEvent:function(e){switch(e.name){case"SDK_GAME_PAUSE":o.adManager.emit(a.AdEvents.CONTENT_PAUSED);break;case"SDK_READY":o.sdkLoaded()}}},t=document,i="gamedistribution-jssdk",r=t.getElementsByTagName("script")[0],t.getElementById(i)||((n=t.createElement("script")).id=i,n.src="patch/js/gd-main.js",r.parentNode&&r.parentNode.insertBefore(n,r))}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.sdkLoaded=function(){var t=this;this.areAdsEnabled().then(function(e){e&&(t.adsEnabled=!0)})},e.prototype.showAd=function(e){var t=this;if(this.adsEnabled){if("undefined"==typeof gdsdk||gdsdk&&void 0===gdsdk.showAd)return this.adsEnabled=!1,void this.adManager.emit(a.AdEvents.CONTENT_RESUMED);gdsdk.showAd(e===a.AdType.rewarded?o.rewarded:o.interstitial).then(function(){e===a.AdType.rewarded&&(t.adManager.emit(a.AdEvents.AD_REWARDED),t.hasRewarded=!1),t.adManager.emit(a.AdEvents.CONTENT_RESUMED)}).catch(function(){e===a.AdType.rewarded&&t.hasRewarded&&(t.hasRewarded=!1),t.adManager.emit(a.AdEvents.CONTENT_RESUMED)})}else this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.createBanner=function(e){if(this.adsEnabled){var t=new f;return t.setSize(e),t}},e.prototype.loadBanner=function(e){if(this.adsEnabled){var t=new f;return t.setSize(e),t.loadBanner(),t}},e.prototype.preloadAd=function(e){var t=this;!this.hasRewarded&&this.adsEnabled&&e===a.AdType.rewarded&&gdsdk.preloadAd(o.rewarded).then(function(){t.hasRewarded=!0,t.adManager.emit(a.AdEvents.AD_LOADED,e)})},e.prototype.adAvailable=function(e){return e!==a.AdType.rewarded||this.hasRewarded},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.areAdsEnabled=function(){var e=document.createElement("script");e.id="debug-test-ad",e.src="https://storage.googleapis.com/cdn.fbrq.io/anyad.js",document.body.appendChild(e);return new Promise(function(e){window.setTimeout(function(){e(function(){var e=!0;if(document.getElementById("az-test-ad")||(e=!1),document.getElementById("debug-test-ad")){var t=document.getElementById("debug-test-ad");try{t.parentNode.removeChild(t)}catch(e){}}if(document.getElementById("az-test-ad")){var i=document.getElementById("az-test-ad");try{i.parentNode.removeChild(i)}catch(e){}}return e}())},100)})},e}();(m=y||(y={}))[m.start=0]="start",m[m.firstQuartile=1]="firstQuartile",m[m.midPoint=2]="midPoint",m[m.thirdQuartile=3]="thirdQuartile",m[m.complete=4]="complete";var v,z,g=function(){function e(e,t){this.googleEnabled=!1,this.adsEnabled=!0,this.adTagUrl="",this.adRequested=!1,this.areAdsEnabled(),"undefined"!=typeof google&&(this.googleEnabled=!0,this.gameContent="string"==typeof e.parentElement?document.getElementById(e.parentElement):e.parentElement,this.gameContent.style.position="absolute",this.gameContent.style.width="100%",this.adContent=this.gameContent.parentNode.appendChild(document.createElement("div")),this.adContent.id="phaser-ad-container",this.adContent.style.position="absolute",this.adContent.style.zIndex="9999",this.adContent.style.display="none",this.adContent.style.top="0",this.adContent.style.left="0",this.adContent.style.width="100%",this.adContent.style.height="100%",this.adContent.style.overflow="hidden",this.adTagUrl=t,this.adDisplay=new google.ima.AdDisplayContainer(this.adContent),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale("nl"),this.adLoader=new google.ima.AdsLoader(this.adDisplay),this.adLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdManagerLoader,!1,this),this.adLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this))}return e.prototype.setManager=function(e){this.adManager=e,this.adManager.emit(a.AdEvents.AD_PROVIDER_LOADED)},e.prototype.showAd=function(e,t){if(!this.adRequested)if(this.adsEnabled||this.adManager.emit(a.AdEvents.AD_DISABLED,!0),this.googleEnabled){this.adDisplay.initialize();var i=new google.ima.AdsRequest;i.adTagUrl=this.adTagUrl+this.parseCustomParams(t);var n=window.innerWidth,r=window.innerHeight;document.body.clientHeight<window.innerHeight&&(r=document.body.clientHeight,n=document.body.clientWidth),i.linearAdSlotWidth=n,i.linearAdSlotHeight=r,i.nonLinearAdSlotWidth=n,i.nonLinearAdSlotHeight=r,i.forceNonLinearFullSlot=!0;try{this.adRequested=!0,this.adLoader.requestAds(i)}catch(e){this.onContentResumeRequested()}}else this.onContentResumeRequested()},e.prototype.adAvailable=function(e){return!0},e.prototype.preloadAd=function(){},e.prototype.destroyAd=function(){},e.prototype.hideAd=function(){},e.prototype.onAdManagerLoader=function(e){var t=this,i=new google.ima.AdsRenderingSettings;i.restoreCustomPlaybackStateOnAdBreakComplete=!0;var n=e.getAdsManager(this.gameContent,i);(this.adsManager=n).addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested,!1,this),n.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested,!1,this),n.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError,!1,this),[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE].forEach(function(e){n.addEventListener(e,t.onAdEvent,!1,t)});try{this.adContent.style.display="block";var r=window.innerWidth,o=window.innerHeight;this.adsManager.init(r,o,google.ima.ViewMode.NORMAL),this.adsManager.start(),this.resizeListener=function(){null!==t.adsManager&&t.adsManager.resize(window.innerWidth,window.innerHeight,google.ima.ViewMode.NORMAL)},window.addEventListener("resize",this.resizeListener)}catch(e){this.onAdError(e)}},e.prototype.onAdEvent=function(e){switch(e.type){case google.ima.AdEvent.Type.CLICK:this.adManager.emit(a.AdEvents.AD_CLICKED);break;case google.ima.AdEvent.Type.LOADED:this.adRequested=!1;var t=e.getAd();t.isLinear()||this.onContentResumeRequested();break;case google.ima.AdEvent.Type.STARTED:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.start);break;case google.ima.AdEvent.Type.FIRST_QUARTILE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.firstQuartile);break;case google.ima.AdEvent.Type.MIDPOINT:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.midPoint);break;case google.ima.AdEvent.Type.THIRD_QUARTILE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.thirdQuartile);break;case google.ima.AdEvent.Type.COMPLETE:this.adManager.emit(a.AdEvents.AD_PROGRESSION,y.complete);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.onContentResumeRequested()}},e.prototype.onAdError=function(e){null!==this.adsManager&&(this.adsManager.destroy(),null!==this.resizeListener&&window.removeEventListener("resize",this.resizeListener)),this.adRequested&&(this.adRequested=!1),this.onContentResumeRequested()},e.prototype.onContentPauseRequested=function(){this.adManager.emit(a.AdEvents.CONTENT_PAUSED)},e.prototype.onContentResumeRequested=function(){"undefined"!=typeof google&&(this.adContent.style.display="none"),this.adManager.emit(a.AdEvents.CONTENT_RESUMED)},e.prototype.parseCustomParams=function(e){if(void 0!==e){var t="";for(var i in e){if(e.hasOwnProperty(i))0<t.length&&(t+="&"),t+=i+"="+(Array.isArray(e[i])?e[i].join(","):e[i])}return"&cust_params="+encodeURIComponent(t)}return""},e.prototype.areAdsEnabled=function(){var t=this,i=document.createElement("div");i.innerHTML="&nbsp;",i.className="adsbox",i.style.position="absolute",i.style.fontSize="10px",document.body.appendChild(i);window.setTimeout(function(){var e;t.adsEnabled=(e=!0,0===i.offsetHeight&&(e=!1),i.parentNode&&i.parentNode.removeChild(i),e)},100)},e}();(v=a.AdEvents||(a.AdEvents={})).CONTENT_PAUSED="onContentPaused",v.CONTENT_RESUMED="onContentResumed",v.AD_PROGRESSION="onAdProgression",v.AD_DISABLED="onAdsDisabled",v.AD_CLICKED="onAdClicked",v.AD_REWARDED="onAdRewardGranted",v.BANNER_SHOWN="onBannerShown",v.BANNER_HIDDEN="onBannerHidden",v.AD_LOADED="onAdLoaded",v.AD_PROVIDER_LOADED="onAdProviderLoaded",(z=a.AdType||(a.AdType={}))[z.interstitial=0]="interstitial",z[z.rewarded=1]="rewarded",z[z.banner=2]="banner";var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bannerActive=!1,e.provider=null,e}return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}(e,t),e.prototype.setAdProvider=function(e){this.provider=e,this.provider.setManager(this)},e.prototype.showAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not request an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.showAd.apply(this.provider,t)},e.prototype.createBanner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.provider.loadBanner.apply(this.provider,e)},e.prototype.loadBanner=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof this.provider.loadBanner?this.provider.loadBanner.apply(this.provider,e):null},e.prototype.preloadAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not preload an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.preloadAd.apply(this.provider,t)},e.prototype.destroyAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.destroyAd.apply(this.provider,t)},e.prototype.hideAd=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");t.unshift(e),this.provider.hideAd.apply(this.provider,t)},e.prototype.adsEnabled=function(){if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return this.provider.adsEnabled},e.prototype.adAvailable=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(null===this.provider)throw new Error("Can not hide an ad without an provider, please attach an ad provider!");return t.unshift(e),this.provider.adAvailable.apply(this.provider,t)},e}(r),w=new b;a.H5AdWrapper=b,a.adWrapper=w,a.CocoonAds=h,a.CordovaGamedistribution=u,a.CordovaGamedock=c,a.CordovaHeyzap=d,a.CordovaIronSource=_,a.GameDistribution=x,a.GameDistributionBanner=f,a.Ima3=g,Object.defineProperty(a,"__esModule",{value:!0})});var PhaserInput;__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();!function(e){var l,t;(t=l=e.InputType||(e.InputType={}))[t.text=0]="text",t[t.password=1]="password",t[t.number=2]="number";var i=function(){function e(e,t,i,n,r,o){void 0===i&&(i=l.text),void 0===n&&(n="");var a=this;this.id=t,this.type=i,this.game=e,this.focusIn=r,this.focusOut=o;var s=this.game.canvas.getBoundingClientRect().top+document.body.scrollTop;this.element=document.createElement("input"),this.element.id=t,this.element.style.position="absolute",this.element.style.top=s+"px",this.element.style.left=(-40).toString()+"px",this.element.style.width=10..toString()+"px",this.element.style.height=10..toString()+"px",this.element.style.border="0px",this.element.value=this.value,this.element.type=l[i],this.element.addEventListener("focusin",function(){a.focusIn instanceof Phaser.Signal&&a.focusIn.dispatch()}),this.element.addEventListener("focusout",function(){a.focusOut instanceof Phaser.Signal&&a.focusOut.dispatch()}),document.body.appendChild(this.element)}return e.prototype.addKeyUpListener=function(e){this.keyUpCallback=e,document.addEventListener("keyup",this.keyUpCallback),this.element.addEventListener("input",this.keyUpCallback)},e.prototype.blockKeyDownEvents=function(){document.addEventListener("keydown",this.preventKeyPropagation)},e.prototype.preventKeyPropagation=function(e){e.stopPropagation?e.stopPropagation():event.cancelBubble=!0},e.prototype.unblockKeyDownEvents=function(){document.removeEventListener("keydown",this.preventKeyPropagation)},e.prototype.removeEventListener=function(){document.removeEventListener("keyup",this.keyUpCallback),this.element.removeEventListener("input",this.keyUpCallback)},e.prototype.destroy=function(){document.body.removeChild(this.element)},e.prototype.setMax=function(e,t){if(void 0!==e)if(this.type===l.text||this.type===l.password)this.element.maxLength=parseInt(e,10);else if(this.type===l.number){if(this.element.max=e,void 0===t)return;this.element.min=t}},Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(e){this.element.value=e},enumerable:!0,configurable:!0}),e.prototype.focus=function(){var e=this;if(this.element.focus(),!this.game.device.desktop&&this.game.device.chrome)var t=window.innerWidth,i=window.innerHeight,n=!1,r=setInterval(function(){(t>window.innerWidth||i>window.innerHeight)&&(n=!0),n&&t===window.innerWidth&&i===window.innerHeight&&(e.focusOut instanceof Phaser.Signal&&e.focusOut.dispatch(),clearInterval(r))},50)},e.prototype.blur=function(){this.element.blur()},Object.defineProperty(e.prototype,"hasSelection",{get:function(){return this.type!==l.number&&this.element.selectionStart!==this.element.selectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caretStart",{get:function(){return this.element.selectionEnd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caretEnd",{get:function(){return this.element.selectionStart},enumerable:!0,configurable:!0}),e.prototype.getCaretPosition=function(){return this.type===l.number?-1:this.element.selectionStart},e.prototype.setCaretPosition=function(e){this.type!==l.number&&this.element.setSelectionRange(e,e)},e}();e.InputElement=i}(PhaserInput||(PhaserInput={})),function(a){var s,e;(e=s=a.ForceCase||(a.ForceCase={}))[e.none=0]="none",e[e.lower=1]="lower",e[e.upper=2]="upper";var t=function(o){function e(e,t,i,n){void 0===n&&(n={});var r=o.call(this,e,t,i)||this;return r.focusOutOnEnter=!0,r.placeHolder=null,r.box=null,r.focus=!1,r.value="",r.windowScale=1,r.blockInput=!0,r.focusIn=new Phaser.Signal,r.focusOut=new Phaser.Signal,r.blink=!0,r.cnt=0,r.inputOptions=n,r.inputOptions.width="number"==typeof n.width?n.width:150,r.inputOptions.padding="number"==typeof n.padding?n.padding:0,r.inputOptions.textAlign=n.textAlign||"left",r.inputOptions.type=n.type||a.InputType.text,r.inputOptions.forceCase=n.forceCase?n.forceCase:s.none,r.inputOptions.borderRadius="number"==typeof n.borderRadius?n.borderRadius:0,r.inputOptions.height="number"==typeof n.height?n.height:14,r.inputOptions.fillAlpha=void 0===n.fillAlpha?1:n.fillAlpha,r.inputOptions.selectionColor=n.selectionColor||"rgba(179, 212, 253, 0.8)",r.inputOptions.zoom=!e.device.desktop&&(n.zoom||!1),r.box=new a.InputBox(r.game,n),r.setTexture(r.box.generateTexture()),r.textMask=new a.TextMask(r.game,n),r.addChild(r.textMask),r.domElement=new a.InputElement(r.game,"phaser-input-"+(1e4*Math.random()|0).toString(),r.inputOptions.type,r.value,r.focusIn,r.focusOut),r.domElement.setMax(r.inputOptions.max,r.inputOptions.min),r.selection=new a.SelectionHighlight(r.game,r.inputOptions),r.selection.mask=r.textMask,r.addChild(r.selection),n.placeHolder&&0<n.placeHolder.length&&(r.placeHolder=new Phaser.Text(e,r.inputOptions.padding,r.inputOptions.padding,n.placeHolder,{font:n.font||"14px Arial",fontWeight:n.fontWeight||"normal",fill:n.placeHolderColor||"#bfbebd"}),r.placeHolder.mask=r.textMask,r.addChild(r.placeHolder)),r.cursor=new Phaser.Text(e,r.inputOptions.padding,r.inputOptions.padding-2,"|",{font:n.font||"14px Arial",fontWeight:n.fontWeight||"normal",fill:n.cursorColor||"#000000"}),r.cursor.visible=!1,r.addChild(r.cursor),r.text=new Phaser.Text(e,r.inputOptions.padding,r.inputOptions.padding,"",{font:n.font||"14px Arial",fontWeight:n.fontWeight||"normal",fill:n.fill||"#000000"}),r.text.mask=r.textMask,r.addChild(r.text),r.offscreenText=new Phaser.Text(e,r.inputOptions.padding,r.inputOptions.padding,"",{font:n.font||"14px Arial",fontWeight:n.fontWeight||"normal",fill:n.fill||"#000000"}),r.updateTextAlignment(),r.inputEnabled=!0,r.input.useHandCursor=!0,r.game.input.onDown.add(r.checkDown,r),r.focusOut.add(function(){a.KeyboardOpen&&(r.endFocus(),r.inputOptions.zoom&&r.zoomOut())}),r}return __extends(e,o),Object.defineProperty(e.prototype,"width",{get:function(){return this.inputOptions.width},set:function(e){this.inputOptions.width=e,this.box.resize(e),this.textMask.resize(e),this.updateTextAlignment()},enumerable:!0,configurable:!0}),e.prototype.updateTextAlignment=function(){switch(this.inputOptions.textAlign){case"left":this.text.anchor.set(0,0),this.text.x=this.inputOptions.padding,null!==this.placeHolder&&this.placeHolder.anchor.set(0,0),this.cursor.x=this.inputOptions.padding+this.getCaretPosition();break;case"center":this.text.anchor.set(.5,0),this.text.x=this.inputOptions.padding+this.inputOptions.width/2,null!==this.placeHolder&&(this.placeHolder.anchor.set(.5,0),this.placeHolder.x=this.inputOptions.padding+this.inputOptions.width/2),this.cursor.x=this.inputOptions.padding+this.inputOptions.width/2-this.text.width/2+this.getCaretPosition();break;case"right":this.text.anchor.set(1,0),this.text.x=this.inputOptions.padding+this.inputOptions.width,null!==this.placeHolder&&(this.placeHolder.anchor.set(1,0),this.placeHolder.x=this.inputOptions.padding+this.inputOptions.width),this.cursor.x=this.inputOptions.padding+this.inputOptions.width}},e.prototype.checkDown=function(e){if(this.value||this.resetText(),this.input.checkPointerOver(e)){if(this.focus)return void this.setCaretOnclick(e);this.inputOptions.zoom&&!a.Zoomed&&this.zoomIn(),this.startFocus()}else!0===this.focus&&(this.endFocus(),this.inputOptions.zoom&&this.zoomOut())},e.prototype.update=function(){if(this.text.update(),this.placeHolder&&this.placeHolder.update(),this.focus){if(30!==this.cnt)return this.cnt++;this.cursor.visible=this.blink,this.blink=!this.blink,this.cnt=0}},e.prototype.endFocus=function(){var e=this;this.focus&&(this.domElement.removeEventListener(),!0===this.blockInput&&this.domElement.unblockKeyDownEvents(),this.focus=!1,0===this.value.length&&null!==this.placeHolder&&(this.placeHolder.visible=!0),this.cursor.visible=!1,this.game.device.desktop?setTimeout(function(){e.domElement.blur()},0):this.domElement.blur(),this.game.device.desktop||(a.KeyboardOpen=!1,a.onKeyboardClose.dispatch()))},e.prototype.startFocus=function(){var e=this;this.focus=!0,null!==this.placeHolder&&(this.placeHolder.visible=!1),this.game.device.desktop?setTimeout(function(){e.keyUpProcessor()},0):this.keyUpProcessor(),this.game.device.desktop||(a.KeyboardOpen=!0,a.onKeyboardOpen.dispatch())},e.prototype.keyUpProcessor=function(){this.domElement.addKeyUpListener(this.keyListener.bind(this)),this.domElement.focus(),!0===this.blockInput&&this.domElement.blockKeyDownEvents()},e.prototype.updateText=function(){var e="";if(this.inputOptions.type===a.InputType.password)for(var t=0;t<this.value.length;t++)e+="*";else if(this.inputOptions.type===a.InputType.number){var i=parseInt(this.value);e=i<parseInt(this.inputOptions.min)?this.value=this.domElement.value=this.inputOptions.min:i>parseInt(this.inputOptions.max)?this.value=this.domElement.value=this.inputOptions.max:this.value}else e=this.value;if(this.text.setText(e),this.text.width>this.inputOptions.width)this.text.anchor.x=1,this.text.x=this.inputOptions.padding+this.inputOptions.width;else switch(this.inputOptions.textAlign){case"left":this.text.anchor.set(0,0),this.text.x=this.inputOptions.padding;break;case"center":this.text.anchor.set(.5,0),this.text.x=this.inputOptions.padding+this.inputOptions.width/2;break;case"right":this.text.anchor.set(1,0),this.text.x=this.inputOptions.padding+this.inputOptions.width}},e.prototype.updateCursor=function(){if(this.text.width>this.inputOptions.width||"right"===this.inputOptions.textAlign)this.cursor.x=this.inputOptions.padding+this.inputOptions.width;else switch(this.inputOptions.textAlign){case"left":this.cursor.x=this.inputOptions.padding+this.getCaretPosition();break;case"center":this.cursor.x=this.inputOptions.padding+this.inputOptions.width/2-this.text.width/2+this.getCaretPosition()}},e.prototype.getCaretPosition=function(){var e=this.domElement.getCaretPosition();if(-1===e)return this.text.width;var t=this.value;if(this.inputOptions.type===a.InputType.password){t="";for(var i=0;i<this.value.length;i++)t+="*"}return this.offscreenText.setText(t.slice(0,e)),this.offscreenText.width},e.prototype.setCaretOnclick=function(e){var t=this.text.toLocal(new PIXI.Point(e.x,e.y),this.game.world).x;this.inputOptions.textAlign&&"center"===this.inputOptions.textAlign&&(t+=this.text.width/2);for(var i=this.text.width/this.value.length,n=0,r=0;r<this.value.length;r++)if(r*i<=t&&t<=(r+1)*i){n=r;break}t>(this.value.length-1)*i&&(n=this.value.length),this.startFocus(),this.domElement.setCaretPosition(n),this.updateCursor()},e.prototype.updateSelection=function(){if(this.domElement.hasSelection){var e=this.value;if(this.inputOptions.type===a.InputType.password){e="";for(var t=0;t<this.value.length;t++)e+="*"}switch(e=e.substring(this.domElement.caretStart,this.domElement.caretEnd),this.offscreenText.setText(e),this.selection.updateSelection(this.offscreenText.getBounds()),this.inputOptions.textAlign){case"left":this.selection.x=this.inputOptions.padding;break;case"center":this.selection.x=this.inputOptions.padding+this.inputOptions.width/2-this.text.width/2}}else this.selection.clear()},e.prototype.zoomIn=function(){if(!a.Zoomed){var e=this.getBounds();window.innerHeight>window.innerWidth?this.windowScale=this.game.width/(1.5*e.width):this.windowScale=this.game.width/2/(1.5*e.width);var t=(this.game.width-1.5*e.width)/2/this.windowScale;this.game.world.scale.set(this.game.world.scale.x*this.windowScale,this.game.world.scale.y*this.windowScale),this.game.world.pivot.set(e.x-t,e.y-2*this.inputOptions.padding),a.Zoomed=!0}},e.prototype.zoomOut=function(){a.Zoomed&&(this.game.world.scale.set(this.game.world.scale.x/this.windowScale,this.game.world.scale.y/this.windowScale),this.game.world.pivot.set(0,0),a.Zoomed=!1)},e.prototype.keyListener=function(e){this.value=this.getFormattedText(this.domElement.value),13!==e.keyCode?(this.updateText(),this.updateCursor(),this.updateSelection(),e.preventDefault()):this.focusOutOnEnter&&this.endFocus()},e.prototype.destroy=function(e){this.game.input.onDown.remove(this.checkDown,this),this.focusIn.removeAll(),this.focusOut.removeAll(),this.domElement.destroy(),o.prototype.destroy.call(this,e)},e.prototype.resetText=function(){this.setText()},e.prototype.setText=function(e){void 0===e&&(e=""),null!==this.placeHolder&&(0<e.length?this.placeHolder.visible=!1:this.placeHolder.visible=!0),this.value=this.getFormattedText(e),this.domElement.value=this.value,this.updateText(),this.updateCursor(),this.endFocus()},e.prototype.getFormattedText=function(e){switch(this.inputOptions.forceCase){default:case s.none:return e;case s.lower:return e.toLowerCase();case s.upper:return e.toUpperCase()}},e}(Phaser.Sprite);a.InputField=t}(PhaserInput||(PhaserInput={})),function(e){var t=function(o){function e(e,t){var i=o.call(this,e,0,0)||this;i.bgColor=t.backgroundColor?parseInt(t.backgroundColor.slice(1),16):16777215,i.borderRadius=t.borderRadius="number"==typeof t.borderRadius?t.borderRadius:0,i.borderWidth=t.borderWidth="number"==typeof t.borderWidth?t.borderWidth:1,i.borderColor=t.borderColor?parseInt(t.borderColor.slice(1),16):9803157,i.boxAlpha=t.fillAlpha,i.padding=t.padding;var n=t.height,r=t.width;t.font&&(n=Math.max(parseInt(t.font.substr(0,t.font.indexOf("px")),10),n)),i.boxHeight=2*i.padding+n;r=t.width;return i.boxWidth=2*i.padding+r,i.drawBox(),i}return __extends(e,o),e.prototype.resize=function(e){this.boxWidth=2*this.padding+e,this.drawBox()},e.prototype.drawBox=function(){this.clear().beginFill(this.bgColor,this.boxAlpha).lineStyle(this.borderWidth,this.borderColor,this.boxAlpha),0<this.borderRadius?this.drawRoundedRect(0,0,this.boxWidth,this.boxHeight,this.borderRadius):this.drawRect(0,0,this.boxWidth,this.boxHeight)},e}(Phaser.Graphics);e.InputBox=t}(PhaserInput||(PhaserInput={})),function(e){var t=function(n){function i(e,t){var i=n.call(this,e,t.padding,t.padding)||this;return i.inputOptions=t,i}return __extends(i,n),i.prototype.updateSelection=function(e){var t=Phaser.Color.webToColor(this.inputOptions.selectionColor);this.clear(),this.beginFill(i.rgb2hex(t),t.a),this.drawRect(e.x,e.y,e.width,e.height-this.inputOptions.padding)},i.rgb2hex=function(e){return parseInt(("0"+e.r.toString(16)).slice(-2)+("0"+e.g.toString(16)).slice(-2)+("0"+e.b.toString(16)).slice(-2),16)},i}(Phaser.Graphics);e.SelectionHighlight=t}(PhaserInput||(PhaserInput={})),function(e){var t=function(r){function e(e,t){var i=r.call(this,e,t.padding,t.padding)||this,n=t.height;return t.font&&(n=Math.max(parseInt(t.font.substr(0,t.font.indexOf("px")),10),n)),i.maskWidth=t.width,i.maskHeight=1.3*n,i.drawMask(),i}return __extends(e,r),e.prototype.resize=function(e){this.maskWidth=e,this.drawMask()},e.prototype.drawMask=function(){this.clear().beginFill(0).drawRect(0,0,this.maskWidth,this.maskHeight).endFill()},e}(Phaser.Graphics);e.TextMask=t}(PhaserInput||(PhaserInput={})),function(o){o.Zoomed=!1,o.KeyboardOpen=!1,o.onKeyboardOpen=new Phaser.Signal,o.onKeyboardClose=new Phaser.Signal;var e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i.addInputFieldFactory(),i}return __extends(e,n),e.prototype.addInputFieldFactory=function(){Phaser.GameObjectFactory.prototype.inputField=function(e,t,i,n){void 0===n&&(n=this.world);var r=new o.InputField(this.game,e,t,i);return n.add(r)},Phaser.GameObjectCreator.prototype.inputField=function(e,t,i){return new o.InputField(this.game,e,t,i)}},e}(Phaser.Plugin);e.Zoomed=!1,e.KeyboardOpen=!1,e.onKeyboardOpen=new Phaser.Signal,e.onKeyboardClose=new Phaser.Signal,o.Plugin=e}(PhaserInput||(PhaserInput={})),function(){function n(e,t,i){return e.call.apply(e.bind,arguments)}function r(t,i,e){if(!t)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,n),t.apply(i,e)}}return function(){return t.apply(i,arguments)}}function _(e,t,i){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?n:r).apply(null,arguments)}var s=Date.now||function(){return+new Date};function t(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var l=!!window.FontFace;function p(e,t,i,n){if(t=e.c.createElement(t),i)for(var r in i)i.hasOwnProperty(r)&&("style"==r?t.style.cssText=i[r]:t.setAttribute(r,i[r]));return n&&t.appendChild(e.c.createTextNode(n)),t}function h(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function i(e){e.parentNode&&e.parentNode.removeChild(e)}function y(e,t,i){t=t||[],i=i||[];for(var n=e.className.split(/\s+/),r=0;r<t.length;r+=1){for(var o=!1,a=0;a<n.length;a+=1)if(t[r]===n[a]){o=!0;break}o||n.push(t[r])}for(t=[],r=0;r<n.length;r+=1){for(o=!1,a=0;a<i.length;a+=1)if(n[r]===i[a]){o=!0;break}o||t.push(n[r])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function o(e,t){for(var i=e.className.split(/\s+/),n=0,r=i.length;n<r;n++)if(i[n]==t)return!0;return!1}function u(e,t,i){function n(){a&&r&&(a(o),a=null)}t=p(e,"link",{rel:"stylesheet",href:t,media:"all"});var r=!1,o=null,a=i||null;l?(t.onload=function(){r=!0,n()},t.onerror=function(){r=!0,o=Error("Stylesheet failed to load"),n()}):setTimeout(function(){r=!0,n()},0),h(e,"head",t)}function c(e,t,i,n){var r=e.c.getElementsByTagName("head")[0];if(r){var o=p(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&r.removeChild(o))},r.appendChild(o),setTimeout(function(){a||(a=!0,i&&i(Error("Script load timeout")))},n||5e3),o}return null}function d(){this.a=0,this.c=null}function m(e){return e.a++,function(){e.a--,a(e)}}function f(e,t){e.c=t,a(e)}function a(e){0==e.a&&e.c&&(e.c(),e.c=null)}function x(e){this.a=e||"-"}function v(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function z(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var n=e[i].replace(/['"]/g,"");-1!=n.indexOf(" ")||/^\d/.test(n)?t.push("'"+n+"'"):t.push(n)}return t.join(",")}function g(e){return e.a+e.f}function b(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function w(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new x("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function S(e){if(e.g){var t=o(e.f,e.a.c("wf","active")),i=[],n=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),y(e.f,i,n)}C(e,"inactive")}function C(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,g(i)):e.h[t]())}function M(){this.c={}}function P(e,t){this.c=e,this.f=t,this.a=p(this.c,"span",{"aria-hidden":"true"},this.f)}function k(e){h(e.c,"body",e.a)}function T(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+z(e.c)+";font-style:"+b(e)+";font-weight:"+e.f+"00;"}function O(e,t,i,n,r,o){this.g=e,this.j=t,this.a=n,this.c=i,this.f=r||3e3,this.h=o||void 0}function A(e,t,i,n,r,o,a){this.v=e,this.B=t,this.c=i,this.a=n,this.s=a||"BESbswy",this.f={},this.w=r||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new P(this.c,this.s),this.h=new P(this.c,this.s),this.j=new P(this.c,this.s),this.m=new P(this.c,this.s),e=T(e=new v(this.a.c+",serif",g(this.a))),this.g.a.style.cssText=e,e=T(e=new v(this.a.c+",sans-serif",g(this.a))),this.h.a.style.cssText=e,e=T(e=new v("serif",g(this.a))),this.j.a.style.cssText=e,e=T(e=new v("sans-serif",g(this.a))),this.m.a.style.cssText=e,k(this.g),k(this.h),k(this.j),k(this.m)}x.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},O.prototype.start=function(){var r=this.c.o.document,o=this,a=s(),e=new Promise(function(i,n){!function t(){var e;s()-a>=o.f?n():r.fonts.load((e=o.a,b(e)+" "+e.f+"00 300px "+z(e.c)),o.h).then(function(e){1<=e.length?i():setTimeout(t,25)},function(){n()})}()}),i=null,t=new Promise(function(e,t){i=setTimeout(t,o.f)});Promise.race([t,e]).then(function(){i&&(clearTimeout(i),i=null),o.g(o.a)},function(){o.j(o.a)})};var E={D:"serif",C:"sans-serif"},G=null;function I(){if(null===G){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);G=!!e&&(parseInt(e[1],10)<536||536===parseInt(e[1],10)&&parseInt(e[2],10)<=11)}return G}function B(e,t,i){for(var n in E)if(E.hasOwnProperty(n)&&t===e.f[E[n]]&&i===e.f[E[n]])return!0;return!1}function L(e){var t,i=e.g.a.offsetWidth,n=e.h.a.offsetWidth;(t=i===e.f.serif&&n===e.f["sans-serif"])||(t=I()&&B(e,i,n)),t?s()-e.A>=e.w?I()&&B(e,i,n)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?D(e,e.v):D(e,e.B):setTimeout(_(function(){L(this)},e),50):D(e,e.v)}function D(e,t){setTimeout(_(function(){i(this.g.a),i(this.h.a),i(this.j.a),i(this.m.a),t(this.a)},e),0)}function R(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}A.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=s(),L(this)};var F=null;function j(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&y(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),C(e,"active")):S(e.a))}function e(e){this.j=e,this.a=new M,this.h=0,this.f=this.g=!0}function N(e,t){this.c=e,this.a=t}function U(e,t){this.c=e,this.a=t}function V(e,t){this.c=e||"https://fonts.googleapis.com/css",this.a=[],this.f=[],this.g=t||""}R.prototype.g=function(e){var t=this.a;t.g&&y(t.f,[t.a.c("wf",e.c,g(e).toString(),"active")],[t.a.c("wf",e.c,g(e).toString(),"loading"),t.a.c("wf",e.c,g(e).toString(),"inactive")]),C(t,"fontactive",e),this.m=!0,j(this)},R.prototype.h=function(e){var t=this.a;if(t.g){var i=o(t.f,t.a.c("wf",e.c,g(e).toString(),"active")),n=[],r=[t.a.c("wf",e.c,g(e).toString(),"loading")];i||n.push(t.a.c("wf",e.c,g(e).toString(),"inactive")),y(t.f,n,r)}C(t,"fontinactive",e),j(this)},e.prototype.load=function(e){this.c=new t(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(r,e,t){var i=[],n=t.timeout;o=e,o.g&&y(o.f,[o.a.c("wf","loading")]),C(o,"loading");var o;var i=function(e,t,i){var n,r=[];for(n in t)if(t.hasOwnProperty(n)){var o=e.c[n];o&&r.push(o(t[n],i))}return r}(r.a,t,r.c),a=new R(r.c,e,n);for(r.h=i.length,e=0,t=i.length;e<t;e++)i[e].load(function(e,t,i){var n,p,h,u,c,d;p=a,h=e,u=t,c=i,d=0==--(n=r).h,(n.f||n.g)&&setTimeout(function(){var e=c||null,t=u||{};if(0===h.length&&d)S(p.a);else{p.f+=h.length,d&&(p.j=d);var i,n=[];for(i=0;i<h.length;i++){var r=h[i],o=t[r.c],a=p.a,s=r;if(a.g&&y(a.f,[a.a.c("wf",s.c,g(s).toString(),"loading")]),C(a,"fontloading",s),(a=null)===F)if(window.FontFace){var s=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent),l=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);F=s?42<parseInt(s[1],10):!l}else F=!1;a=F?new O(_(p.g,p),_(p.h,p),p.c,r,p.s,o):new A(_(p.g,p),_(p.h,p),p.c,r,p.s,e,o),n.push(a)}for(i=0;i<n.length;i++)n[i].start()}},0)})}(this,new w(this.c,e),e)},N.prototype.load=function(a){var t=this,s=t.a.projectId,e=t.a.version;if(s){var l=t.c.o;c(this.c,(t.a.api||"https://fast.fonts.net/jsapi")+"/"+s+".js"+(e?"?v="+e:""),function(e){e?a([]):(l["__MonotypeConfiguration__"+s]=function(){return t.a},function e(){if(l["__mti_fntLst"+s]){var t,i=l["__mti_fntLst"+s](),n=[];if(i)for(var r=0;r<i.length;r++){var o=i[r].fontfamily;null!=i[r].fontStyle&&null!=i[r].fontWeight?(t=i[r].fontStyle+i[r].fontWeight,n.push(new v(o,t))):n.push(new v(o))}a(n)}else setTimeout(function(){e()},50)}())}).id="__MonotypeAPIScript__"+s}else a([])},U.prototype.load=function(e){var t,i,n=this.a.urls||[],r=this.a.families||[],o=this.a.testStrings||{},a=new d;for(t=0,i=n.length;t<i;t++)u(this.c,n[t],m(a));var s=[];for(t=0,i=r.length;t<i;t++)if((n=r[t].split(":"))[1])for(var l=n[1].split(","),p=0;p<l.length;p+=1)s.push(new v(n[0],l[p]));else s.push(new v(n[0]));f(a,function(){e(s,o)})};function H(e){this.f=e,this.a=[],this.c={}}var W={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},X={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},q={i:"i",italic:"i",n:"n",normal:"n"},Y=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function K(e,t){this.c=e,this.a=t}var Z={Arimo:!0,Cousine:!0,Tinos:!0};function J(e,t){this.c=e,this.a=t}function Q(e,t){this.c=e,this.f=t,this.a=[]}K.prototype.load=function(e){var t=new d,i=this.c,n=new V(this.a.api,this.a.text),r=this.a.families;!function(e,t){for(var i=t.length,n=0;n<i;n++){var r=t[n].split(":");3==r.length&&e.f.push(r.pop());var o="";2==r.length&&""!=r[1]&&(o=":"),e.a.push(r.join(o))}}(n,r);var o=new H(r);!function(e){for(var t=e.f.length,i=0;i<t;i++){var n=e.f[i].split(":"),r=n[0].replace(/\+/g," "),o=["n4"];if(2<=n.length){var a;if(a=[],s=n[1])for(var s,l=(s=s.split(",")).length,p=0;p<l;p++){var h;if((h=s[p]).match(/^[\w-]+$/))if(null==(c=Y.exec(h.toLowerCase())))h="";else{if(h=null==(h=c[2])||""==h?"n":q[h],null==(c=c[1])||""==c)c="4";else var u=X[c],c=u||(isNaN(c)?"4":c.substr(0,1));h=[h,c].join("")}else h="";h&&a.push(h)}0<a.length&&(o=a),3==n.length&&(a=[],0<(n=(n=n[2])?n.split(","):a).length&&(n=W[n[0]])&&(e.c[r]=n))}for(e.c[r]||(n=W[r])&&(e.c[r]=n),n=0;n<o.length;n+=1)e.a.push(new v(r,o[n]))}}(o),u(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],n=0;n<t;n++)i.push(e.a[n].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(n),m(t)),f(t,function(){e(o.a,o.c,Z)})},J.prototype.load=function(a){var e=this.a.id,s=this.c.o;e?c(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)a([]);else if(s.Typekit&&s.Typekit.config&&s.Typekit.config.fn){e=s.Typekit.config.fn;for(var t=[],i=0;i<e.length;i+=2)for(var n=e[i],r=e[i+1],o=0;o<r.length;o++)t.push(new v(n,r[o]));try{s.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}a(t)}},2e3):a([])},Q.prototype.load=function(p){var e,t=this.f.id,i=this.c.o,h=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(e,t){for(var i=0,n=t.fonts.length;i<n;++i){var r=t.fonts[i];h.a.push(new v(r.name,(o="font-weight:"+r.weight+";font-style:"+r.style,l=s=a=void 0,a=4,s="n",l=null,o&&((l=o.match(/(normal|oblique|italic)/i))&&l[1]&&(s=l[1].substr(0,1).toLowerCase()),(l=o.match(/([1-9]00|normal|bold)/i))&&l[1]&&(/bold/i.test(l[1])?a=7:/[1-9]00/.test(l[1])&&(a=parseInt(l[1].substr(0,1),10)))),s+a)))}var o,a,s,l;p(h.a)},c(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+((e=this.c).o.location.hostname||e.a.location.hostname)+"/"+t+".js",function(e){e&&p([])})):p([])};var $=new e(window);$.a.c.custom=function(e,t){return new U(t,e)},$.a.c.fontdeck=function(e,t){return new Q(t,e)},$.a.c.monotype=function(e,t){return new N(t,e)},$.a.c.typekit=function(e,t){return new J(t,e)},$.a.c.google=function(e,t){return new K(t,e)};var ee={load:_($.load,$)};"function"==typeof define&&define.amd?define(function(){return ee}):"undefined"!=typeof module&&module.exports?module.exports=ee:(window.WebFont=ee,window.WebFontConfig&&$.load(window.WebFontConfig))}(),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.clipboard=t():e.clipboard=t()}(this,function(){return function(i){function n(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return i[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var r={};return n.m=i,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,i){"use strict";function r(e){var t=new f,i=function(i,e,n){c("listener called"),i.success=!0,e.forEach(function(e,t){n.clipboardData.setData(t,e),t===y&&n.clipboardData.getData(t)!=e&&(c("setting text/plain failed"),i.success=!1)}),n.preventDefault()}.bind(this,t,e);document.addEventListener("copy",i);try{document.execCommand("copy")}finally{document.removeEventListener("copy",i)}return t.success}function o(e,t){a(e);var i=r(t);return s(),i}function a(e){var t=document.getSelection(),i=document.createRange();i.selectNodeContents(e),t.removeAllRanges(),t.addRange(i)}function s(){document.getSelection().removeAllRanges()}function l(){return"undefined"==typeof ClipboardEvent&&void 0!==window.clipboardData&&void 0!==window.clipboardData.setData}function p(){return new u(function(e,t){var i=window.clipboardData.getData("Text");""===i?t(new Error("Empty clipboard or could not read plain text from clipboard")):e(i)})}Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),h=i(5),u="undefined"==typeof Promise?n.Promise:Promise,c=function(e){},d=!0,_=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),y="text/plain",m=function(){function e(){}return e.setDebugLog=function(e){c=e},e.suppressWarnings=function(){d=!1,h.suppressDTWarnings()},e.write=function(n){return d&&!n.getData(y)&&_("clipboard.write() was called without a `text/plain` data type. On some platforms, this may result in an empty clipboard. Call clipboard.suppressWarnings() to suppress this warning."),new u(function(e,t){if(l())(function(e){var t=e.getData(y);if(void 0!==t)return window.clipboardData.setData("Text",t);throw"No `text/plain` value was specified."})(n)?e():t(new Error("Copying failed, possibly because the user rejected it."));else{if(r(n))return c("regular execCopy worked"),void e();if(-1<navigator.userAgent.indexOf("Edge"))return c('UA "Edge" => assuming success'),void e();if(o(document.body,n))return c("copyUsingTempSelection worked"),void e();if(function(e){var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important"),t.textContent="temporary element",document.body.appendChild(t);var i=o(t,e);return document.body.removeChild(t),i}(n))return c("copyUsingTempElem worked"),void e();var i=n.getData(y);if(void 0!==i&&function(e){c("copyTextUsingDOM");var t=document.createElement("div");t.setAttribute("style","-webkit-user-select: text !important");var i=t;t.attachShadow&&(c("Using shadow DOM."),i=t.attachShadow({mode:"open"}));var n=document.createElement("span");n.innerText=e,i.appendChild(n),document.body.appendChild(t),a(n);var r=document.execCommand("copy");return s(),document.body.removeChild(t),r}(i))return c("copyTextUsingDOM worked"),void e();t(new Error("Copy command failed."))}})},e.writeText=function(e){if(navigator.clipboard&&navigator.clipboard.writeText)return navigator.clipboard.writeText(e);var t=new h.DT;return t.setData(y,e),this.write(t)},e.read=function(){return new u(function(n,e){l()?p().then(function(e){return n((t=e,(i=new h.DT).setData(y,t),i));var t,i},e):e("Read is not supported in your browser.")})},e.readText=function(){return navigator.clipboard&&navigator.clipboard.readText?navigator.clipboard.readText():l()?p():new u(function(e,t){t("Read is not supported in your browser.")})},e.DT=h.DT,e}();t.default=m;var f=function(){this.success=!1};e.exports=m},function(e,t,H){(function(U,V){e.exports=function(){"use strict";function p(e){return"function"==typeof e}function t(){var e=setTimeout;return function(){return e(i,1)}}function i(){for(var e=0;e<S;e+=2)(0,G[e])(G[e+1]),G[e]=void 0,G[e+1]=void 0;S=0}function s(e,t){var i=arguments,n=this,r=new this.constructor(h);void 0===r[B]&&x(r);var o,a=n._state;return a?(o=i[a-1],P(function(){return f(a,r,o,n._result)})):y(n,r,e,t),r}function l(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(h);return c(t,e),t}function h(){}function a(e){try{return e.then}catch(e){return F.error=e,F}}function u(e,t,i){var n,r,o,a;t.constructor===e.constructor&&i===s&&t.constructor.resolve===l?(o=e,(a=t)._state===D?d(o,a._result):a._state===R?_(o,a._result):y(a,void 0,function(e){return c(o,e)},function(e){return _(o,e)})):i===F?(_(e,F.error),F.error=null):void 0===i?d(e,t):p(i)?(n=t,r=i,P(function(t){var i=!1,e=function(e,t,i,n){try{e.call(t,i,n)}catch(e){return e}}(r,n,function(e){i||(i=!0,n!==e?c(t,e):d(t,e))},function(e){i||(i=!0,_(t,e))},t._label);!i&&e&&(i=!0,_(t,e))},e)):d(e,t)}function c(e,t){var i,n;e===t?_(e,new TypeError("You cannot resolve a promise with itself")):(n=typeof(i=t),null===i||"object"!==n&&"function"!==n?d(e,t):u(e,t,a(t)))}function n(e){e._onerror&&e._onerror(e._result),m(e)}function d(e,t){e._state===L&&(e._result=t,e._state=D,0!==e._subscribers.length&&P(m,e))}function _(e,t){e._state===L&&(e._state=R,e._result=t,P(n,e))}function y(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+D]=i,r[o+R]=n,0===o&&e._state&&P(m,e)}function m(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?f(i,n,r,o):r(o);e._subscribers.length=0}}function e(){this.error=null}function f(e,t,i,n){var r=p(i),o=void 0,a=void 0,s=void 0,l=void 0;if(r){if((o=function(e,t){try{return e(t)}catch(e){return j.error=e,j}}(i,n))===j?(l=!0,a=o.error,o.error=null):s=!0,t===o)return void _(t,new TypeError("A promises callback cannot return that same promise."))}else o=n,s=!0;t._state!==L||(r&&s?c(t,o):l?_(t,a):e===D?d(t,o):e===R&&_(t,o))}function x(e){e[B]=N++,e._state=void 0,e._result=void 0,e._subscribers=[]}function r(e,t){this._instanceConstructor=e,this.promise=new e(h),this.promise[B]||x(this.promise),w(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&d(this.promise,this._result))):_(this.promise,new Error("Array Methods must be provided an Array"))}function v(e){this[B]=N++,this._result=this._state=void 0,this._subscribers=[],h!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof v?function(t,e){try{e(function(e){c(t,e)},function(e){_(t,e)})}catch(e){_(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var o,z,g,b,w=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},S=0,C=void 0,M=void 0,P=function(e,t){G[S]=e,G[S+1]=t,2===(S+=2)&&(M?M(i):I())},k="undefined"!=typeof window?window:void 0,T=k||{},O=T.MutationObserver||T.WebKitMutationObserver,A="undefined"==typeof self&&void 0!==U&&"[object process]"==={}.toString.call(U),E="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,G=new Array(1e3),I=void 0;I=A?function(){return U.nextTick(i)}:O?(z=0,g=new O(i),b=document.createTextNode(""),g.observe(b,{characterData:!0}),function(){b.data=z=++z%2}):E?((o=new MessageChannel).port1.onmessage=i,function(){return o.port2.postMessage(0)}):void 0===k?function(){try{var e=H(4);return void 0!==(C=e.runOnLoop||e.runOnContext)?function(){C(i)}:t()}catch(e){return t()}}():t();var B=Math.random().toString(36).substring(16),L=void 0,D=1,R=2,F=new e,j=new e,N=0;return r.prototype._enumerate=function(e){for(var t=0;this._state===L&&t<e.length;t++)this._eachEntry(e[t],t)},r.prototype._eachEntry=function(t,e){var i=this._instanceConstructor,n=i.resolve;if(n===l){var r=a(t);if(r===s&&t._state!==L)this._settledAt(t._state,e,t._result);else if("function"!=typeof r)this._remaining--,this._result[e]=t;else if(i===v){var o=new i(h);u(o,t,r),this._willSettleAt(o,e)}else this._willSettleAt(new i(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},r.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===L&&(this._remaining--,e===R?_(n,i):this._result[t]=i),0===this._remaining&&d(n,this._result)},r.prototype._willSettleAt=function(e,t){var i=this;y(e,void 0,function(e){return i._settledAt(D,t,e)},function(e){return i._settledAt(R,t,e)})},v.all=function(e){return new r(this,e).promise},v.race=function(r){var o=this;return new o(w(r)?function(e,t){for(var i=r.length,n=0;n<i;n++)o.resolve(r[n]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},v.resolve=l,v.reject=function(e){var t=new this(h);return _(t,e),t},v._setScheduler=function(e){M=e},v._setAsap=function(e){P=e},v._asap=P,v.prototype={constructor:v,then:s,catch:function(e){return this.then(null,e)}},v.polyfill=function(){var e=void 0;if(void 0!==V)e=V;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var i=null;try{i=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===i&&!t.cast)return}e.Promise=v},v.Promise=v}()}).call(t,H(2),H(3))},function(e,t){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function r(t){if(p===setTimeout)return setTimeout(t,0);if((p===i||!p)&&setTimeout)return p=setTimeout,setTimeout(t,0);try{return p(t,0)}catch(e){try{return p.call(null,t,0)}catch(e){return p.call(this,t,0)}}}function o(){_&&c&&(_=!1,c.length?d=c.concat(d):y=-1,d.length&&a())}function a(){if(!_){var e=r(o);_=!0;for(var t=d.length;t;){for(c=d,d=[];++y<t;)c&&c[y].run();y=-1,t=d.length}c=null,_=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function l(){}var p,h,u=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:i}catch(e){p=i}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(e){h=n}}();var c,d=[],_=!1,y=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new s(e,t)),1!==d.length||_||r(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(TIc,UIc){var VIc;VIc=function(){return this}();try{VIc=VIc||Function("return this")()||eval("this")}catch(TIc){"object"==typeof window&&(VIc=window)}TIc.exports=VIc},function(e,t){},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=["text/plain","text/html"],r=function(){(console.warn||console.log).call(arguments)}.bind(console,"[clipboard-polyfill]"),o=!0;t.suppressDTWarnings=function(){o=!1};var a=function(){function e(){this.m={}}return e.prototype.setData=function(e,t){o&&-1===n.indexOf(e)&&r("Unknown data type: "+e,"Call clipboard.suppressWarnings() to suppress this warning."),this.m[e]=t},e.prototype.getData=function(e){return this.m[e]},e.prototype.forEach=function(e){for(var t in this.m)e(this.m[t],t)},e}();t.DT=a}])}),function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(w,e){"use strict";var t=[],S=w.document,n=Object.getPrototypeOf,s=t.slice,y=t.concat,l=t.push,r=t.indexOf,i={},o=i.toString,_=i.hasOwnProperty,a=_.toString,p=a.call(Object),m={};function f(e,t){var i=(t=t||S).createElement("script");i.text=e,t.head.appendChild(i).parentNode.removeChild(i)}var C=function(e,t){return new C.fn.init(e,t)},h=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/^-ms-/,c=/-([a-z])/g,d=function(e,t){return t.toUpperCase()};function x(e){var t=!!e&&"length"in e&&e.length,i=C.type(e);return"function"!==i&&!C.isWindow(e)&&("array"===i||0===t||"number"==typeof t&&0<t&&t-1 in e)}C.fn=C.prototype={jquery:"3.1.1",constructor:C,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=C.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return C.each(this,e)},map:function(i){return this.pushStack(C.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(0<=i&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:t.sort,splice:t.splice},C.extend=C.fn.extend=function(){var e,t,i,n,r,o,a=arguments[0]||{},s=1,l=arguments.length,p=!1;for("boolean"==typeof a&&(p=a,a=arguments[s]||{},s++),"object"==typeof a||C.isFunction(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)i=a[t],a!==(n=e[t])&&(p&&n&&(C.isPlainObject(n)||(r=C.isArray(n)))?(r?(r=!1,o=i&&C.isArray(i)?i:[]):o=i&&C.isPlainObject(i)?i:{},a[t]=C.extend(p,o,n)):void 0!==n&&(a[t]=n));return a},C.extend({expando:"jQuery"+("3.1.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===C.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=C.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==o.call(e)||(t=n(e))&&("function"!=typeof(i=_.call(t,"constructor")&&t.constructor)||a.call(i)!==p))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?i[o.call(e)]||"object":typeof e},globalEval:function(e){f(e)},camelCase:function(e){return e.replace(u,"ms-").replace(c,d)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,n=0;if(x(e))for(i=e.length;n<i&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},trim:function(e){return null==e?"":(e+"").replace(h,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(x(Object(e))?C.merge(i,"string"==typeof e?[e]:e):l.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:r.call(t,e,i)},merge:function(e,t){for(var i=+t.length,n=0,r=e.length;n<i;n++)e[r++]=t[n];return e.length=r,e},grep:function(e,t,i){for(var n=[],r=0,o=e.length,a=!i;r<o;r++)!t(e[r],r)!==a&&n.push(e[r]);return n},map:function(e,t,i){var n,r,o=0,a=[];if(x(e))for(n=e.length;o<n;o++)null!=(r=t(e[o],o,i))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,i))&&a.push(r);return y.apply([],a)},guid:1,proxy:function(e,t){var i,n,r;if("string"==typeof t&&(i=e[t],t=e,e=i),C.isFunction(e))return n=s.call(arguments,2),(r=function(){return e.apply(t||this,n.concat(s.call(arguments)))}).guid=e.guid=e.guid||C.guid++,r},now:Date.now,support:m}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=t[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){i["[object "+t+"]"]=t.toLowerCase()});var v=function(i){var e,d,z,o,r,_,u,y,g,l,p,b,w,a,S,m,s,h,f,C="sizzle"+1*new Date,x=i.document,M=0,n=0,c=ae(),v=ae(),P=ae(),k=function(e,t){return e===t&&(p=!0),0},T={}.hasOwnProperty,t=[],O=t.pop,A=t.push,E=t.push,G=t.slice,I=function(e,t){for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i;return-1},B="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",D="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",R="\\["+L+"*("+D+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+D+"))|)"+L+"*\\]",F=":("+D+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+R+")*)|.*)\\)|)",j=new RegExp(L+"+","g"),N=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),U=new RegExp("^"+L+"*,"+L+"*"),V=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),H=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),W=new RegExp(F),X=new RegExp("^"+D+"$"),q={ID:new RegExp("^#("+D+")"),CLASS:new RegExp("^\\.("+D+")"),TAG:new RegExp("^("+D+"|[*])"),ATTR:new RegExp("^"+R),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+B+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Z=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,$=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),ee=function(e,t,i){var n="0x"+t-65536;return n!=n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},te=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ne=function(){b()},re=xe(function(e){return!0===e.disabled&&("form"in e||"label"in e)},{dir:"parentNode",next:"legend"});try{E.apply(t=G.call(x.childNodes),x.childNodes),t[x.childNodes.length].nodeType}catch(e){E={apply:t.length?function(e,t){A.apply(e,G.call(t))}:function(e,t){for(var i=e.length,n=0;e[i++]=t[n++];);e.length=i-1}}}function oe(e,t,i,n){var r,o,a,s,l,p,h,u=t&&t.ownerDocument,c=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==c&&9!==c&&11!==c)return i;if(!n&&((t?t.ownerDocument||t:x)!==w&&b(t),t=t||w,S)){if(11!==c&&(l=J.exec(e)))if(r=l[1]){if(9===c){if(!(a=t.getElementById(r)))return i;if(a.id===r)return i.push(a),i}else if(u&&(a=u.getElementById(r))&&f(t,a)&&a.id===r)return i.push(a),i}else{if(l[2])return E.apply(i,t.getElementsByTagName(e)),i;if((r=l[3])&&d.getElementsByClassName&&t.getElementsByClassName)return E.apply(i,t.getElementsByClassName(r)),i}if(d.qsa&&!P[e+" "]&&(!m||!m.test(e))){if(1!==c)u=t,h=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(te,ie):t.setAttribute("id",s=C),o=(p=_(e)).length;o--;)p[o]="#"+s+" "+fe(p[o]);h=p.join(","),u=Q.test(e)&&ye(t.parentNode)||t}if(h)try{return E.apply(i,u.querySelectorAll(h)),i}catch(e){}finally{s===C&&t.removeAttribute("id")}}}return y(e.replace(N,"$1"),t,i,n)}function ae(){var n=[];return function e(t,i){return n.push(t+" ")>z.cacheLength&&delete e[n.shift()],e[t+" "]=i}}function se(e){return e[C]=!0,e}function le(e){var t=w.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function pe(e,t){for(var i=e.split("|"),n=i.length;n--;)z.attrHandle[i[n]]=t}function he(e,t){var i=t&&e,n=i&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===t)return-1;return e?1:-1}function ue(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ce(i){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===i}}function de(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&re(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function _e(a){return se(function(o){return o=+o,se(function(e,t){for(var i,n=a([],e.length,o),r=n.length;r--;)e[i=n[r]]&&(e[i]=!(t[i]=e[i]))})})}function ye(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in d=oe.support={},r=oe.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},b=oe.setDocument=function(e){var t,i,n=e?e.ownerDocument||e:x;return n!==w&&9===n.nodeType&&n.documentElement&&(a=(w=n).documentElement,S=!r(w),x!==w&&(i=w.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ne,!1):i.attachEvent&&i.attachEvent("onunload",ne)),d.attributes=le(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=le(function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=Z.test(w.getElementsByClassName),d.getById=le(function(e){return a.appendChild(e).id=C,!w.getElementsByName||!w.getElementsByName(C).length}),d.getById?(z.filter.ID=function(e){var t=e.replace($,ee);return function(e){return e.getAttribute("id")===t}},z.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i=t.getElementById(e);return i?[i]:[]}}):(z.filter.ID=function(e){var i=e.replace($,ee);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===i}},z.find.ID=function(e,t){if(void 0!==t.getElementById&&S){var i,n,r,o=t.getElementById(e);if(o){if((i=o.getAttributeNode("id"))&&i.value===e)return[o];for(r=t.getElementsByName(e),n=0;o=r[n++];)if((i=o.getAttributeNode("id"))&&i.value===e)return[o]}return[]}}),z.find.TAG=d.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var i,n=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},z.find.CLASS=d.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&S)return t.getElementsByClassName(e)},s=[],m=[],(d.qsa=Z.test(w.querySelectorAll))&&(le(function(e){a.appendChild(e).innerHTML="<a id='"+C+"'></a><select id='"+C+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+L+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+L+"*(?:value|"+B+")"),e.querySelectorAll("[id~="+C+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+C+"+*").length||m.push(".#.+[+~]")}),le(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=w.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+L+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(d.matchesSelector=Z.test(h=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&le(function(e){d.disconnectedMatch=h.call(e,"*"),h.call(e,"[s!='']:x"),s.push("!=",F)}),m=m.length&&new RegExp(m.join("|")),s=s.length&&new RegExp(s.join("|")),t=Z.test(a.compareDocumentPosition),f=t||Z.test(a.contains)?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},k=t?function(e,t){if(e===t)return p=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===i?e===w||e.ownerDocument===x&&f(x,e)?-1:t===w||t.ownerDocument===x&&f(x,t)?1:l?I(l,e)-I(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return p=!0,0;var i,n=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e===w?-1:t===w?1:r?-1:o?1:l?I(l,e)-I(l,t):0;if(r===o)return he(e,t);for(i=e;i=i.parentNode;)a.unshift(i);for(i=t;i=i.parentNode;)s.unshift(i);for(;a[n]===s[n];)n++;return n?he(a[n],s[n]):a[n]===x?-1:s[n]===x?1:0}),w},oe.matches=function(e,t){return oe(e,null,null,t)},oe.matchesSelector=function(e,t){if((e.ownerDocument||e)!==w&&b(e),t=t.replace(H,"='$1']"),d.matchesSelector&&S&&!P[t+" "]&&(!s||!s.test(t))&&(!m||!m.test(t)))try{var i=h.call(e,t);if(i||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return 0<oe(t,w,null,[e]).length},oe.contains=function(e,t){return(e.ownerDocument||e)!==w&&b(e),f(e,t)},oe.attr=function(e,t){(e.ownerDocument||e)!==w&&b(e);var i=z.attrHandle[t.toLowerCase()],n=i&&T.call(z.attrHandle,t.toLowerCase())?i(e,t,!S):void 0;return void 0!==n?n:d.attributes||!S?e.getAttribute(t):(n=e.getAttributeNode(t))&&n.specified?n.value:null},oe.escape=function(e){return(e+"").replace(te,ie)},oe.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},oe.uniqueSort=function(e){var t,i=[],n=0,r=0;if(p=!d.detectDuplicates,l=!d.sortStable&&e.slice(0),e.sort(k),p){for(;t=e[r++];)t===e[r]&&(n=i.push(r));for(;n--;)e.splice(i[n],1)}return l=null,e},o=oe.getText=function(e){var t,i="",n=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=o(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[n++];)i+=o(t);return i},(z=oe.selectors={cacheLength:50,createPseudo:se,match:q,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace($,ee),e[3]=(e[3]||e[4]||e[5]||"").replace($,ee),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||oe.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&oe.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return q.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&W.test(i)&&(t=_(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace($,ee).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=c[e+" "];return t||(t=new RegExp("(^|"+L+")"+e+"("+L+"|$)"))&&c(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(i,n,r){return function(e){var t=oe.attr(e,i);return null==t?"!="===n:!n||(t+="","="===n?t===r:"!="===n?t!==r:"^="===n?r&&0===t.indexOf(r):"*="===n?r&&-1<t.indexOf(r):"$="===n?r&&t.slice(-r.length)===r:"~="===n?-1<(" "+t.replace(j," ")+" ").indexOf(r):"|="===n&&(t===r||t.slice(0,r.length+1)===r+"-"))}},CHILD:function(_,e,t,y,m){var f="nth"!==_.slice(0,3),x="last"!==_.slice(-4),v="of-type"===e;return 1===y&&0===m?function(e){return!!e.parentNode}:function(e,t,i){var n,r,o,a,s,l,p=f!==x?"nextSibling":"previousSibling",h=e.parentNode,u=v&&e.nodeName.toLowerCase(),c=!i&&!v,d=!1;if(h){if(f){for(;p;){for(a=e;a=a[p];)if(v?a.nodeName.toLowerCase()===u:1===a.nodeType)return!1;l=p="only"===_&&!l&&"nextSibling"}return!0}if(l=[x?h.firstChild:h.lastChild],x&&c){for(d=(s=(n=(r=(o=(a=h)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]||[])[0]===M&&n[1])&&n[2],a=s&&h.childNodes[s];a=++s&&a&&a[p]||(d=s=0)||l.pop();)if(1===a.nodeType&&++d&&a===e){r[_]=[M,s,d];break}}else if(c&&(d=s=(n=(r=(o=(a=e)[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]||[])[0]===M&&n[1]),!1===d)for(;(a=++s&&a&&a[p]||(d=s=0)||l.pop())&&((v?a.nodeName.toLowerCase()!==u:1!==a.nodeType)||!++d||(c&&((r=(o=a[C]||(a[C]={}))[a.uniqueID]||(o[a.uniqueID]={}))[_]=[M,d]),a!==e)););return(d-=m)===y||d%y==0&&0<=d/y}}},PSEUDO:function(e,o){var t,a=z.pseudos[e]||z.setFilters[e.toLowerCase()]||oe.error("unsupported pseudo: "+e);return a[C]?a(o):1<a.length?(t=[e,e,"",o],z.setFilters.hasOwnProperty(e.toLowerCase())?se(function(e,t){for(var i,n=a(e,o),r=n.length;r--;)e[i=I(e,n[r])]=!(t[i]=n[r])}):function(e){return a(e,0,t)}):a}},pseudos:{not:se(function(e){var n=[],r=[],s=u(e.replace(N,"$1"));return s[C]?se(function(e,t,i,n){for(var r,o=s(e,null,n,[]),a=e.length;a--;)(r=o[a])&&(e[a]=!(t[a]=r))}):function(e,t,i){return n[0]=e,s(n,null,i,r),n[0]=null,!r.pop()}}),has:se(function(t){return function(e){return 0<oe(t,e).length}}),contains:se(function(t){return t=t.replace($,ee),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:se(function(i){return X.test(i||"")||oe.error("unsupported lang: "+i),i=i.replace($,ee).toLowerCase(),function(e){var t;do{if(t=S?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===i||0===t.indexOf(i+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=i.location&&i.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:de(!1),disabled:de(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!z.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:_e(function(){return[0]}),last:_e(function(e,t){return[t-1]}),eq:_e(function(e,t,i){return[i<0?i+t:i]}),even:_e(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:_e(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:_e(function(e,t,i){for(var n=i<0?i+t:i;0<=--n;)e.push(n);return e}),gt:_e(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}}).pseudos.nth=z.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[e]=ue(e);for(e in{submit:!0,reset:!0})z.pseudos[e]=ce(e);function me(){}function fe(e){for(var t=0,i=e.length,n="";t<i;t++)n+=e[t].value;return n}function xe(s,e,t){var l=e.dir,p=e.next,h=p||l,u=t&&"parentNode"===h,c=n++;return e.first?function(e,t,i){for(;e=e[l];)if(1===e.nodeType||u)return s(e,t,i);return!1}:function(e,t,i){var n,r,o,a=[M,c];if(i){for(;e=e[l];)if((1===e.nodeType||u)&&s(e,t,i))return!0}else for(;e=e[l];)if(1===e.nodeType||u)if(r=(o=e[C]||(e[C]={}))[e.uniqueID]||(o[e.uniqueID]={}),p&&p===e.nodeName.toLowerCase())e=e[l]||e;else{if((n=r[h])&&n[0]===M&&n[1]===c)return a[2]=n[2];if((r[h]=a)[2]=s(e,t,i))return!0}return!1}}function ve(r){return 1<r.length?function(e,t,i){for(var n=r.length;n--;)if(!r[n](e,t,i))return!1;return!0}:r[0]}function ze(e,t,i,n,r){for(var o,a=[],s=0,l=e.length,p=null!=t;s<l;s++)(o=e[s])&&(i&&!i(o,n,r)||(a.push(o),p&&t.push(s)));return a}function ge(d,_,y,m,f,e){return m&&!m[C]&&(m=ge(m)),f&&!f[C]&&(f=ge(f,e)),se(function(e,t,i,n){var r,o,a,s=[],l=[],p=t.length,h=e||function(e,t,i){for(var n=0,r=t.length;n<r;n++)oe(e,t[n],i);return i}(_||"*",i.nodeType?[i]:i,[]),u=!d||!e&&_?h:ze(h,s,d,i,n),c=y?f||(e?d:p||m)?[]:t:u;if(y&&y(u,c,i,n),m)for(r=ze(c,l),m(r,[],i,n),o=r.length;o--;)(a=r[o])&&(c[l[o]]=!(u[l[o]]=a));if(e){if(f||d){if(f){for(r=[],o=c.length;o--;)(a=c[o])&&r.push(u[o]=a);f(null,c=[],r,n)}for(o=c.length;o--;)(a=c[o])&&-1<(r=f?I(e,a):s[o])&&(e[r]=!(t[r]=a))}}else c=ze(c===t?c.splice(p,c.length):c),f?f(null,t,c,n):E.apply(t,c)})}function be(e){for(var r,t,i,n=e.length,o=z.relative[e[0].type],a=o||z.relative[" "],s=o?1:0,l=xe(function(e){return e===r},a,!0),p=xe(function(e){return-1<I(r,e)},a,!0),h=[function(e,t,i){var n=!o&&(i||t!==g)||((r=t).nodeType?l(e,t,i):p(e,t,i));return r=null,n}];s<n;s++)if(t=z.relative[e[s].type])h=[xe(ve(h),t)];else{if((t=z.filter[e[s].type].apply(null,e[s].matches))[C]){for(i=++s;i<n&&!z.relative[e[i].type];i++);return ge(1<s&&ve(h),1<s&&fe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(N,"$1"),t,s<i&&be(e.slice(s,i)),i<n&&be(e=e.slice(i)),i<n&&fe(e))}h.push(t)}return ve(h)}return me.prototype=z.filters=z.pseudos,z.setFilters=new me,_=oe.tokenize=function(e,t){var i,n,r,o,a,s,l,p=v[e+" "];if(p)return t?0:p.slice(0);for(a=e,s=[],l=z.preFilter;a;){for(o in i&&!(n=U.exec(a))||(n&&(a=a.slice(n[0].length)||a),s.push(r=[])),i=!1,(n=V.exec(a))&&(i=n.shift(),r.push({value:i,type:n[0].replace(N," ")}),a=a.slice(i.length)),z.filter)!(n=q[o].exec(a))||l[o]&&!(n=l[o](n))||(i=n.shift(),r.push({value:i,type:o,matches:n}),a=a.slice(i.length));if(!i)break}return t?a.length:a?oe.error(e):v(e,s).slice(0)},u=oe.compile=function(e,t){var i,m,f,x,v,n,r=[],o=[],a=P[e+" "];if(!a){for(t||(t=_(e)),i=t.length;i--;)(a=be(t[i]))[C]?r.push(a):o.push(a);(a=P(e,(m=o,x=0<(f=r).length,v=0<m.length,n=function(e,t,i,n,r){var o,a,s,l=0,p="0",h=e&&[],u=[],c=g,d=e||v&&z.find.TAG("*",r),_=M+=null==c?1:Math.random()||.1,y=d.length;for(r&&(g=t===w||t||r);p!==y&&null!=(o=d[p]);p++){if(v&&o){for(a=0,t||o.ownerDocument===w||(b(o),i=!S);s=m[a++];)if(s(o,t||w,i)){n.push(o);break}r&&(M=_)}x&&((o=!s&&o)&&l--,e&&h.push(o))}if(l+=p,x&&p!==l){for(a=0;s=f[a++];)s(h,u,t,i);if(e){if(0<l)for(;p--;)h[p]||u[p]||(u[p]=O.call(n));u=ze(u)}E.apply(n,u),r&&!e&&0<u.length&&1<l+f.length&&oe.uniqueSort(n)}return r&&(M=_,g=c),h},x?se(n):n))).selector=e}return a},y=oe.select=function(e,t,i,n){var r,o,a,s,l,p="function"==typeof e&&e,h=!n&&_(e=p.selector||e);if(i=i||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&S&&z.relative[o[1].type]){if(!(t=(z.find.ID(a.matches[0].replace($,ee),t)||[])[0]))return i;p&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=q.needsContext.test(e)?0:o.length;r--&&(a=o[r],!z.relative[s=a.type]);)if((l=z.find[s])&&(n=l(a.matches[0].replace($,ee),Q.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(r,1),!(e=n.length&&fe(o)))return E.apply(i,n),i;break}}return(p||u(e,h))(n,t,!S,i,!t||Q.test(e)&&ye(t.parentNode)||t),i},d.sortStable=C.split("").sort(k).join("")===C,d.detectDuplicates=!!p,b(),d.sortDetached=le(function(e){return 1&e.compareDocumentPosition(w.createElement("fieldset"))}),le(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,i){if(!i)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&le(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,i){if(!i&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),le(function(e){return null==e.getAttribute("disabled")})||pe(B,function(e,t,i){var n;if(!i)return!0===e[t]?t.toLowerCase():(n=e.getAttributeNode(t))&&n.specified?n.value:null}),oe}(w);C.find=v,C.expr=v.selectors,C.expr[":"]=C.expr.pseudos,C.uniqueSort=C.unique=v.uniqueSort,C.text=v.getText,C.isXMLDoc=v.isXML,C.contains=v.contains,C.escapeSelector=v.escape;var z=function(e,t,i){for(var n=[],r=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&C(e).is(i))break;n.push(e)}return n},g=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},b=C.expr.match.needsContext,M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,P=/^.[^:#\[\.,]*$/;function k(e,i,n){return C.isFunction(i)?C.grep(e,function(e,t){return!!i.call(e,t,e)!==n}):i.nodeType?C.grep(e,function(e){return e===i!==n}):"string"!=typeof i?C.grep(e,function(e){return-1<r.call(i,e)!==n}):P.test(i)?C.filter(i,e,n):(i=C.filter(i,e),C.grep(e,function(e){return-1<r.call(i,e)!==n&&1===e.nodeType}))}C.filter=function(e,t,i){var n=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?C.find.matchesSelector(n,e)?[n]:[]:C.find.matches(e,C.grep(t,function(e){return 1===e.nodeType}))},C.fn.extend({find:function(e){var t,i,n=this.length,r=this;if("string"!=typeof e)return this.pushStack(C(e).filter(function(){for(t=0;t<n;t++)if(C.contains(r[t],this))return!0}));for(i=this.pushStack([]),t=0;t<n;t++)C.find(e,r[t],i);return 1<n?C.uniqueSort(i):i},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&b.test(e)?C(e):e||[],!1).length}});var T,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(e,t,i){var n,r;if(!e)return this;if(i=i||T,"string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:O.exec(e))||!n[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof C?t[0]:t,C.merge(this,C.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:S,!0)),M.test(n[1])&&C.isPlainObject(t))for(n in t)C.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=S.getElementById(n[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):C.isFunction(e)?void 0!==i.ready?i.ready(e):e(C):C.makeArray(e,this)}).prototype=C.fn,T=C(S);var A=/^(?:parents|prev(?:Until|All))/,E={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}C.fn.extend({has:function(e){var t=C(e,this),i=t.length;return this.filter(function(){for(var e=0;e<i;e++)if(C.contains(this,t[e]))return!0})},closest:function(e,t){var i,n=0,r=this.length,o=[],a="string"!=typeof e&&C(e);if(!b.test(e))for(;n<r;n++)for(i=this[n];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(a?-1<a.index(i):1===i.nodeType&&C.find.matchesSelector(i,e))){o.push(i);break}return this.pushStack(1<o.length?C.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?r.call(C(e),this[0]):r.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),C.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return z(e,"parentNode")},parentsUntil:function(e,t,i){return z(e,"parentNode",i)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return z(e,"nextSibling")},prevAll:function(e){return z(e,"previousSibling")},nextUntil:function(e,t,i){return z(e,"nextSibling",i)},prevUntil:function(e,t,i){return z(e,"previousSibling",i)},siblings:function(e){return g((e.parentNode||{}).firstChild,e)},children:function(e){return g(e.firstChild)},contents:function(e){return e.contentDocument||C.merge([],e.childNodes)}},function(n,r){C.fn[n]=function(e,t){var i=C.map(this,r,e);return"Until"!==n.slice(-5)&&(t=e),t&&"string"==typeof t&&(i=C.filter(t,i)),1<this.length&&(E[n]||C.uniqueSort(i),A.test(n)&&i.reverse()),this.pushStack(i)}});var I=/[^\x20\t\r\n\f]+/g;function B(e){return e}function L(e){throw e}function D(e,t,i){var n;try{e&&C.isFunction(n=e.promise)?n.call(e).done(t).fail(i):e&&C.isFunction(n=e.then)?n.call(e,t,i):t.call(void 0,e)}catch(e){i.call(void 0,e)}}C.Callbacks=function(n){var e,i;n="string"==typeof n?(e=n,i={},C.each(e.match(I)||[],function(e,t){i[t]=!0}),i):C.extend({},n);var r,t,o,a,s=[],l=[],p=-1,h=function(){for(a=n.once,o=r=!0;l.length;p=-1)for(t=l.shift();++p<s.length;)!1===s[p].apply(t[0],t[1])&&n.stopOnFalse&&(p=s.length,t=!1);n.memory||(t=!1),r=!1,a&&(s=t?[]:"")},u={add:function(){return s&&(t&&!r&&(p=s.length-1,l.push(t)),function i(e){C.each(e,function(e,t){C.isFunction(t)?n.unique&&u.has(t)||s.push(t):t&&t.length&&"string"!==C.type(t)&&i(t)})}(arguments),t&&!r&&h()),this},remove:function(){return C.each(arguments,function(e,t){for(var i;-1<(i=C.inArray(t,s,i));)s.splice(i,1),i<=p&&p--}),this},has:function(e){return e?-1<C.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=l=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=l=[],t||r||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),r||h()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!o}};return u},C.extend({Deferred:function(e){var o=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var r=arguments;return C.Deferred(function(n){C.each(o,function(e,t){var i=C.isFunction(r[t[4]])&&r[t[4]];s[t[1]](function(){var e=i&&i.apply(this,arguments);e&&C.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,i?[e]:arguments)})}),r=null}).promise()},then:function(t,i,n){var l=0;function p(r,o,a,s){return function(){var i=this,n=arguments,e=function(){var e,t;if(!(r<l)){if((e=a.apply(i,n))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,C.isFunction(t)?s?t.call(e,p(l,o,B,s),p(l,o,L,s)):(l++,t.call(e,p(l,o,B,s),p(l,o,L,s),p(l,o,B,o.notifyWith))):(a!==B&&(i=void 0,n=[e]),(s||o.resolveWith)(i,n))}},t=s?e:function(){try{e()}catch(e){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(e,t.stackTrace),l<=r+1&&(a!==L&&(i=void 0,n=[e]),o.rejectWith(i,n))}};r?t():(C.Deferred.getStackHook&&(t.stackTrace=C.Deferred.getStackHook()),w.setTimeout(t))}}return C.Deferred(function(e){o[0][3].add(p(0,e,C.isFunction(n)?n:B,e.notifyWith)),o[1][3].add(p(0,e,C.isFunction(t)?t:B)),o[2][3].add(p(0,e,C.isFunction(i)?i:L))}).promise()},promise:function(e){return null!=e?C.extend(e,a):a}},s={};return C.each(o,function(e,t){var i=t[2],n=t[5];a[t[1]]=i.add,n&&i.add(function(){r=n},o[3-e][2].disable,o[0][2].lock),i.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=i.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var i=arguments.length,t=i,n=Array(t),r=s.call(arguments),o=C.Deferred(),a=function(t){return function(e){n[t]=this,r[t]=1<arguments.length?s.call(arguments):e,--i||o.resolveWith(n,r)}};if(i<=1&&(D(e,o.done(a(t)).resolve,o.reject),"pending"===o.state()||C.isFunction(r[t]&&r[t].then)))return o.then();for(;t--;)D(r[t],a(t),o.reject);return o.promise()}});var R=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(e,t){w.console&&w.console.warn&&e&&R.test(e.name)&&w.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},C.readyException=function(e){w.setTimeout(function(){throw e})};var F=C.Deferred();function j(){S.removeEventListener("DOMContentLoaded",j),w.removeEventListener("load",j),C.ready()}C.fn.ready=function(e){return F.then(e).catch(function(e){C.readyException(e)}),this},C.extend({isReady:!1,readyWait:1,holdReady:function(e){e?C.readyWait++:C.ready(!0)},ready:function(e){(!0===e?--C.readyWait:C.isReady)||((C.isReady=!0)!==e&&0<--C.readyWait||F.resolveWith(S,[C]))}}),C.ready.then=F.then,"complete"===S.readyState||"loading"!==S.readyState&&!S.documentElement.doScroll?w.setTimeout(C.ready):(S.addEventListener("DOMContentLoaded",j),w.addEventListener("load",j));var N=function(e,t,i,n,r,o,a){var s=0,l=e.length,p=null==i;if("object"===C.type(i))for(s in r=!0,i)N(e,t,s,i[s],!0,o,a);else if(void 0!==n&&(r=!0,C.isFunction(n)||(a=!0),p&&(a?(t.call(e,n),t=null):(p=t,t=function(e,t,i){return p.call(C(e),i)})),t))for(;s<l;s++)t(e[s],i,a?n:n.call(e[s],s,t(e[s],i)));return r?e:p?t.call(e):l?t(e[0],i):o},U=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function V(){this.expando=C.expando+V.uid++}V.uid=1,V.prototype={cache:function(e){var t=e[this.expando];return t||(t={},U(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var n,r=this.cache(e);if("string"==typeof t)r[C.camelCase(t)]=i;else for(n in t)r[C.camelCase(n)]=t[n];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][C.camelCase(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,n=e[this.expando];if(void 0!==n){if(void 0!==t){C.isArray(t)?t=t.map(C.camelCase):t=(t=C.camelCase(t))in n?[t]:t.match(I)||[],i=t.length;for(;i--;)delete n[t[i]]}(void 0===t||C.isEmptyObject(n))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!C.isEmptyObject(t)}};var H=new V,W=new V,X=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/[A-Z]/g;function Y(e,t,i){var n,r;if(void 0===i&&1===e.nodeType)if(n="data-"+t.replace(q,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(n))){try{i="true"===(r=i)||"false"!==r&&("null"===r?null:r===+r+""?+r:X.test(r)?JSON.parse(r):r)}catch(e){}W.set(e,t,i)}else i=void 0;return i}C.extend({hasData:function(e){return W.hasData(e)||H.hasData(e)},data:function(e,t,i){return W.access(e,t,i)},removeData:function(e,t){W.remove(e,t)},_data:function(e,t,i){return H.access(e,t,i)},_removeData:function(e,t){H.remove(e,t)}}),C.fn.extend({data:function(i,e){var t,n,r,o=this[0],a=o&&o.attributes;if(void 0===i){if(this.length&&(r=W.get(o),1===o.nodeType&&!H.get(o,"hasDataAttrs"))){for(t=a.length;t--;)a[t]&&(0===(n=a[t].name).indexOf("data-")&&(n=C.camelCase(n.slice(5)),Y(o,n,r[n])));H.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof i?this.each(function(){W.set(this,i)}):N(this,function(e){var t;if(o&&void 0===e){if(void 0!==(t=W.get(o,i)))return t;if(void 0!==(t=Y(o,i)))return t}else this.each(function(){W.set(this,i,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){W.remove(this,e)})}}),C.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=H.get(e,t),i&&(!n||C.isArray(i)?n=H.access(e,t,C.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=C.queue(e,t),n=i.length,r=i.shift(),o=C._queueHooks(e,t);"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===t&&i.unshift("inprogress"),delete o.stop,r.call(e,function(){C.dequeue(e,t)},o)),!n&&o&&o.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return H.get(e,i)||H.access(e,i,{empty:C.Callbacks("once memory").add(function(){H.remove(e,[t+"queue",i])})})}}),C.fn.extend({queue:function(t,i){var e=2;return"string"!=typeof t&&(i=t,t="fx",e--),arguments.length<e?C.queue(this[0],t):void 0===i?this:this.each(function(){var e=C.queue(this,t,i);C._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&C.dequeue(this,t)})},dequeue:function(e){return this.each(function(){C.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,n=1,r=C.Deferred(),o=this,a=this.length,s=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(i=H.get(o[a],e+"queueHooks"))&&i.empty&&(n++,i.empty.add(s));return s(),r.promise(t)}});var K=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Z=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),J=["Top","Right","Bottom","Left"],Q=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&C.contains(e.ownerDocument,e)&&"none"===C.css(e,"display")},$=function(e,t,i,n){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in r=i.apply(e,n||[]),t)e.style[o]=a[o];return r};function ee(e,t,i,n){var r,o=1,a=20,s=n?function(){return n.cur()}:function(){return C.css(e,t,"")},l=s(),p=i&&i[3]||(C.cssNumber[t]?"":"px"),h=(C.cssNumber[t]||"px"!==p&&+l)&&Z.exec(C.css(e,t));if(h&&h[3]!==p)for(p=p||h[3],i=i||[],h=+l||1;h/=o=o||".5",C.style(e,t,h+p),o!==(o=s()/l)&&1!==o&&--a;);return i&&(h=+h||+l||0,r=i[1]?h+(i[1]+1)*i[2]:+i[2],n&&(n.unit=p,n.start=h,n.end=r)),r}var te={};function ie(e,t){for(var i,n,r=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i=n.style.display,t?("none"===i&&(r[o]=H.get(n,"display")||null,r[o]||(n.style.display="")),""===n.style.display&&Q(n)&&(r[o]=(u=p=l=void 0,p=(s=n).ownerDocument,h=s.nodeName,(u=te[h])||(l=p.body.appendChild(p.createElement(h)),u=C.css(l,"display"),l.parentNode.removeChild(l),"none"===u&&(u="block"),te[h]=u)))):"none"!==i&&(r[o]="none",H.set(n,"display",i)));var s,l,p,h,u;for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}C.fn.extend({show:function(){return ie(this,!0)},hide:function(){return ie(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Q(this)?C(this).show():C(this).hide()})}});var ne=/^(?:checkbox|radio)$/i,re=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,oe=/^$|\/(?:java|ecma)script/i,ae={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function se(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C.nodeName(e,t)?C.merge([e],i):i}function le(e,t){for(var i=0,n=e.length;i<n;i++)H.set(e[i],"globalEval",!t||H.get(t[i],"globalEval"))}ae.optgroup=ae.option,ae.tbody=ae.tfoot=ae.colgroup=ae.caption=ae.thead,ae.th=ae.td;var pe,he,ue=/<|&#?\w+;/;function ce(e,t,i,n,r){for(var o,a,s,l,p,h,u=t.createDocumentFragment(),c=[],d=0,_=e.length;d<_;d++)if((o=e[d])||0===o)if("object"===C.type(o))C.merge(c,o.nodeType?[o]:o);else if(ue.test(o)){for(a=a||u.appendChild(t.createElement("div")),s=(re.exec(o)||["",""])[1].toLowerCase(),l=ae[s]||ae._default,a.innerHTML=l[1]+C.htmlPrefilter(o)+l[2],h=l[0];h--;)a=a.lastChild;C.merge(c,a.childNodes),(a=u.firstChild).textContent=""}else c.push(t.createTextNode(o));for(u.textContent="",d=0;o=c[d++];)if(n&&-1<C.inArray(o,n))r&&r.push(o);else if(p=C.contains(o.ownerDocument,o),a=se(u.appendChild(o),"script"),p&&le(a),i)for(h=0;o=a[h++];)oe.test(o.type||"")&&i.push(o);return u}pe=S.createDocumentFragment().appendChild(S.createElement("div")),(he=S.createElement("input")).setAttribute("type","radio"),he.setAttribute("checked","checked"),he.setAttribute("name","t"),pe.appendChild(he),m.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue;var de=S.documentElement,_e=/^key/,ye=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,me=/^([^.]*)(?:\.(.+)|)/;function fe(){return!0}function xe(){return!1}function ve(){try{return S.activeElement}catch(e){}}function ze(e,t,i,n,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof i&&(n=n||i,i=void 0),t)ze(e,s,i,n,t[s],o);return e}if(null==n&&null==r?(r=i,n=i=void 0):null==r&&("string"==typeof i?(r=n,n=void 0):(r=n,n=i,i=void 0)),!1===r)r=xe;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return C().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=C.guid++)),e.each(function(){C.event.add(this,t,r,n,i)})}C.event={global:{},add:function(t,e,i,n,r){var o,a,s,l,p,h,u,c,d,_,y,m=H.get(t);if(m)for(i.handler&&(i=(o=i).handler,r=o.selector),r&&C.find.matchesSelector(de,r),i.guid||(i.guid=C.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(e){return void 0!==C&&C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),p=(e=(e||"").match(I)||[""]).length;p--;)d=y=(s=me.exec(e[p])||[])[1],_=(s[2]||"").split(".").sort(),d&&(u=C.event.special[d]||{},d=(r?u.delegateType:u.bindType)||d,u=C.event.special[d]||{},h=C.extend({type:d,origType:y,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&C.expr.match.needsContext.test(r),namespace:_.join(".")},o),(c=l[d])||((c=l[d]=[]).delegateCount=0,u.setup&&!1!==u.setup.call(t,n,_,a)||t.addEventListener&&t.addEventListener(d,a)),u.add&&(u.add.call(t,h),h.handler.guid||(h.handler.guid=i.guid)),r?c.splice(c.delegateCount++,0,h):c.push(h),C.event.global[d]=!0)},remove:function(e,t,i,n,r){var o,a,s,l,p,h,u,c,d,_,y,m=H.hasData(e)&&H.get(e);if(m&&(l=m.events)){for(p=(t=(t||"").match(I)||[""]).length;p--;)if(d=y=(s=me.exec(t[p])||[])[1],_=(s[2]||"").split(".").sort(),d){for(u=C.event.special[d]||{},c=l[d=(n?u.delegateType:u.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=c.length;o--;)h=c[o],!r&&y!==h.origType||i&&i.guid!==h.guid||s&&!s.test(h.namespace)||n&&n!==h.selector&&("**"!==n||!h.selector)||(c.splice(o,1),h.selector&&c.delegateCount--,u.remove&&u.remove.call(e,h));a&&!c.length&&(u.teardown&&!1!==u.teardown.call(e,_,m.handle)||C.removeEvent(e,d,m.handle),delete l[d])}else for(d in l)C.event.remove(e,d+t[p],i,n,!0);C.isEmptyObject(l)&&H.remove(e,"handle events")}},dispatch:function(e){var t,i,n,r,o,a,s=C.event.fix(e),l=new Array(arguments.length),p=(H.get(this,"events")||{})[s.type]||[],h=C.event.special[s.type]||{};for(l[0]=s,t=1;t<arguments.length;t++)l[t]=arguments[t];if(s.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,s)){for(a=C.event.handlers.call(this,s,p),t=0;(r=a[t++])&&!s.isPropagationStopped();)for(s.currentTarget=r.elem,i=0;(o=r.handlers[i++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(n=((C.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,l))&&!1===(s.result=n)&&(s.preventDefault(),s.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,s),s.result}},handlers:function(e,t){var i,n,r,o,a,s=[],l=t.delegateCount,p=e.target;if(l&&p.nodeType&&!("click"===e.type&&1<=e.button))for(;p!==this;p=p.parentNode||this)if(1===p.nodeType&&("click"!==e.type||!0!==p.disabled)){for(o=[],a={},i=0;i<l;i++)void 0===a[r=(n=t[i]).selector+" "]&&(a[r]=n.needsContext?-1<C(r,this).index(p):C.find(r,this,null,[p]).length),a[r]&&o.push(n);o.length&&s.push({elem:p,handlers:o})}return p=this,l<t.length&&s.push({elem:p,handlers:t.slice(l)}),s},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:C.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[C.expando]?e:new C.Event(e)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ve()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ve()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&C.nodeName(this,"input"))return this.click(),!1},_default:function(e){return C.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},C.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},C.Event=function(e,t){return this instanceof C.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?fe:xe,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&C.extend(this,t),this.timeStamp=e&&e.timeStamp||C.now(),void(this[C.expando]=!0)):new C.Event(e,t)},C.Event.prototype={constructor:C.Event,isDefaultPrevented:xe,isPropagationStopped:xe,isImmediatePropagationStopped:xe,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=fe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=fe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=fe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&_e.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&ye.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},C.event.addProp),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,r){C.event.special[e]={delegateType:r,bindType:r,handle:function(e){var t,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||C.contains(this,i))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=r),t}}}),C.fn.extend({on:function(e,t,i,n){return ze(this,e,t,i,n)},one:function(e,t,i,n){return ze(this,e,t,i,n,1)},off:function(e,t,i){var n,r;if(e&&e.preventDefault&&e.handleObj)return n=e.handleObj,C(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=xe),this.each(function(){C.event.remove(this,e,i,t)})}});var ge=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,be=/<script|<style|<link/i,we=/checked\s*(?:[^=]|=\s*.checked.)/i,Se=/^true\/(.*)/,Ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Me(e,t){return C.nodeName(e,"table")&&C.nodeName(11!==t.nodeType?t:t.firstChild,"tr")&&e.getElementsByTagName("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function ke(e){var t=Se.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Te(e,t){var i,n,r,o,a,s,l,p;if(1===t.nodeType){if(H.hasData(e)&&(o=H.access(e),a=H.set(t,o),p=o.events))for(r in delete a.handle,a.events={},p)for(i=0,n=p[r].length;i<n;i++)C.event.add(t,r,p[r][i]);W.hasData(e)&&(s=W.access(e),l=C.extend({},s),W.set(t,l))}}function Oe(i,n,r,o){n=y.apply([],n);var e,t,a,s,l,p,h=0,u=i.length,c=u-1,d=n[0],_=C.isFunction(d);if(_||1<u&&"string"==typeof d&&!m.checkClone&&we.test(d))return i.each(function(e){var t=i.eq(e);_&&(n[0]=d.call(this,e,t.html())),Oe(t,n,r,o)});if(u&&(t=(e=ce(n,i[0].ownerDocument,!1,i,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=C.map(se(e,"script"),Pe)).length;h<u;h++)l=e,h!==c&&(l=C.clone(l,!0,!0),s&&C.merge(a,se(l,"script"))),r.call(i[h],l,h);if(s)for(p=a[a.length-1].ownerDocument,C.map(a,ke),h=0;h<s;h++)l=a[h],oe.test(l.type||"")&&!H.access(l,"globalEval")&&C.contains(p,l)&&(l.src?C._evalUrl&&C._evalUrl(l.src):f(l.textContent.replace(Ce,""),p))}return i}function Ae(e,t,i){for(var n,r=t?C.filter(t,e):e,o=0;null!=(n=r[o]);o++)i||1!==n.nodeType||C.cleanData(se(n)),n.parentNode&&(i&&C.contains(n.ownerDocument,n)&&le(se(n,"script")),n.parentNode.removeChild(n));return e}C.extend({htmlPrefilter:function(e){return e.replace(ge,"<$1></$2>")},clone:function(e,t,i){var n,r,o,a,s,l,p,h=e.cloneNode(!0),u=C.contains(e.ownerDocument,e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||C.isXMLDoc(e)))for(a=se(h),n=0,r=(o=se(e)).length;n<r;n++)s=o[n],l=a[n],void 0,"input"===(p=l.nodeName.toLowerCase())&&ne.test(s.type)?l.checked=s.checked:"input"!==p&&"textarea"!==p||(l.defaultValue=s.defaultValue);if(t)if(i)for(o=o||se(e),a=a||se(h),n=0,r=o.length;n<r;n++)Te(o[n],a[n]);else Te(e,h);return 0<(a=se(h,"script")).length&&le(a,!u&&se(e,"script")),h},cleanData:function(e){for(var t,i,n,r=C.event.special,o=0;void 0!==(i=e[o]);o++)if(U(i)){if(t=i[H.expando]){if(t.events)for(n in t.events)r[n]?C.event.remove(i,n):C.removeEvent(i,n,t.handle);i[H.expando]=void 0}i[W.expando]&&(i[W.expando]=void 0)}}}),C.fn.extend({detach:function(e){return Ae(this,e,!0)},remove:function(e){return Ae(this,e)},text:function(e){return N(this,function(e){return void 0===e?C.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Oe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Me(this,e).appendChild(e)})},prepend:function(){return Oe(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Me(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Oe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Oe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(C.cleanData(se(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return C.clone(this,e,t)})},html:function(e){return N(this,function(e){var t=this[0]||{},i=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!be.test(e)&&!ae[(re.exec(e)||["",""])[1].toLowerCase()]){e=C.htmlPrefilter(e);try{for(;i<n;i++)1===(t=this[i]||{}).nodeType&&(C.cleanData(se(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var i=[];return Oe(this,arguments,function(e){var t=this.parentNode;C.inArray(this,i)<0&&(C.cleanData(se(this)),t&&t.replaceChild(e,this))},i)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){C.fn[e]=function(e){for(var t,i=[],n=C(e),r=n.length-1,o=0;o<=r;o++)t=o===r?this:this.clone(!0),C(n[o])[a](t),l.apply(i,t.get());return this.pushStack(i)}});var Ee=/^margin/,Ge=new RegExp("^("+K+")(?!px)[a-z%]+$","i"),Ie=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=w),t.getComputedStyle(e)};function Be(e,t,i){var n,r,o,a,s=e.style;return(i=i||Ie(e))&&(""!==(a=i.getPropertyValue(t)||i[t])||C.contains(e.ownerDocument,e)||(a=C.style(e,t)),!m.pixelMarginRight()&&Ge.test(a)&&Ee.test(t)&&(n=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=i.width,s.width=n,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function Le(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}!function(){function e(){if(a){a.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",a.innerHTML="",de.appendChild(o);var e=w.getComputedStyle(a);t="1%"!==e.top,r="2px"===e.marginLeft,i="4px"===e.width,a.style.marginRight="50%",n="4px"===e.marginRight,de.removeChild(o),a=null}}var t,i,n,r,o=S.createElement("div"),a=S.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",o.appendChild(a),C.extend(m,{pixelPosition:function(){return e(),t},boxSizingReliable:function(){return e(),i},pixelMarginRight:function(){return e(),n},reliableMarginLeft:function(){return e(),r}}))}();var De=/^(none|table(?!-c[ea]).+)/,Re={position:"absolute",visibility:"hidden",display:"block"},Fe={letterSpacing:"0",fontWeight:"400"},je=["Webkit","Moz","ms"],Ne=S.createElement("div").style;function Ue(e){if(e in Ne)return e;for(var t=e[0].toUpperCase()+e.slice(1),i=je.length;i--;)if((e=je[i]+t)in Ne)return e}function Ve(e,t,i){var n=Z.exec(t);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):t}function He(e,t,i,n,r){var o,a=0;for(o=i===(n?"border":"content")?4:"width"===t?1:0;o<4;o+=2)"margin"===i&&(a+=C.css(e,i+J[o],!0,r)),n?("content"===i&&(a-=C.css(e,"padding"+J[o],!0,r)),"margin"!==i&&(a-=C.css(e,"border"+J[o]+"Width",!0,r))):(a+=C.css(e,"padding"+J[o],!0,r),"padding"!==i&&(a+=C.css(e,"border"+J[o]+"Width",!0,r)));return a}function We(e,t,i){var n,r=!0,o=Ie(e),a="border-box"===C.css(e,"boxSizing",!1,o);if(e.getClientRects().length&&(n=e.getBoundingClientRect()[t]),n<=0||null==n){if(((n=Be(e,t,o))<0||null==n)&&(n=e.style[t]),Ge.test(n))return n;r=a&&(m.boxSizingReliable()||n===e.style[t]),n=parseFloat(n)||0}return n+He(e,t,i||(a?"border":"content"),r,o)+"px"}function Xe(e,t,i,n,r){return new Xe.prototype.init(e,t,i,n,r)}C.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Be(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,i,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=C.camelCase(t),l=e.style;return t=C.cssProps[s]||(C.cssProps[s]=Ue(s)||s),a=C.cssHooks[t]||C.cssHooks[s],void 0===i?a&&"get"in a&&void 0!==(r=a.get(e,!1,n))?r:l[t]:("string"===(o=typeof i)&&(r=Z.exec(i))&&r[1]&&(i=ee(e,t,r),o="number"),void(null!=i&&i==i&&("number"===o&&(i+=r&&r[3]||(C.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(i=a.set(e,i,n))||(l[t]=i))))}},css:function(e,t,i,n){var r,o,a,s=C.camelCase(t);return t=C.cssProps[s]||(C.cssProps[s]=Ue(s)||s),(a=C.cssHooks[t]||C.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,i)),void 0===r&&(r=Be(e,t,n)),"normal"===r&&t in Fe&&(r=Fe[t]),""===i||i?(o=parseFloat(r),!0===i||isFinite(o)?o||0:r):r}}),C.each(["height","width"],function(e,a){C.cssHooks[a]={get:function(e,t,i){if(t)return!De.test(C.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?We(e,a,i):$(e,Re,function(){return We(e,a,i)})},set:function(e,t,i){var n,r=i&&Ie(e),o=i&&He(e,a,i,"border-box"===C.css(e,"boxSizing",!1,r),r);return o&&(n=Z.exec(t))&&"px"!==(n[3]||"px")&&(e.style[a]=t,t=C.css(e,a)),Ve(0,t,o)}}}),C.cssHooks.marginLeft=Le(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Be(e,"marginLeft"))||e.getBoundingClientRect().left-$(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),C.each({margin:"",padding:"",border:"Width"},function(r,o){C.cssHooks[r+o]={expand:function(e){for(var t=0,i={},n="string"==typeof e?e.split(" "):[e];t<4;t++)i[r+J[t]+o]=n[t]||n[t-2]||n[0];return i}},Ee.test(r)||(C.cssHooks[r+o].set=Ve)}),C.fn.extend({css:function(e,t){return N(this,function(e,t,i){var n,r,o={},a=0;if(C.isArray(t)){for(n=Ie(e),r=t.length;a<r;a++)o[t[a]]=C.css(e,t[a],!1,n);return o}return void 0!==i?C.style(e,t,i):C.css(e,t)},e,t,1<arguments.length)}}),((C.Tween=Xe).prototype={constructor:Xe,init:function(e,t,i,n,r,o){this.elem=e,this.prop=i,this.easing=r||C.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=o||(C.cssNumber[i]?"":"px")},cur:function(){var e=Xe.propHooks[this.prop];return e&&e.get?e.get(this):Xe.propHooks._default.get(this)},run:function(e){var t,i=Xe.propHooks[this.prop];return this.options.duration?this.pos=t=C.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):Xe.propHooks._default.set(this),this}}).init.prototype=Xe.prototype,(Xe.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=C.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){C.fx.step[e.prop]?C.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[C.cssProps[e.prop]]&&!C.cssHooks[e.prop]?e.elem[e.prop]=e.now:C.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Xe.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},C.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},C.fx=Xe.prototype.init,C.fx.step={};var qe,Ye,Ke,Ze,Je=/^(?:toggle|show|hide)$/,Qe=/queueHooks$/;function $e(){Ye&&(w.requestAnimationFrame($e),C.fx.tick())}function et(){return w.setTimeout(function(){qe=void 0}),qe=C.now()}function tt(e,t){var i,n=0,r={height:e};for(t=t?1:0;n<4;n+=2-t)r["margin"+(i=J[n])]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function it(e,t,i){for(var n,r=(nt.tweeners[t]||[]).concat(nt.tweeners["*"]),o=0,a=r.length;o<a;o++)if(n=r[o].call(i,t,e))return n}function nt(o,e,t){var i,a,n=0,r=nt.prefilters.length,s=C.Deferred().always(function(){delete l.elem}),l=function(){if(a)return!1;for(var e=qe||et(),t=Math.max(0,p.startTime+p.duration-e),i=1-(t/p.duration||0),n=0,r=p.tweens.length;n<r;n++)p.tweens[n].run(i);return s.notifyWith(o,[p,i,t]),i<1&&r?t:(s.resolveWith(o,[p]),!1)},p=s.promise({elem:o,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},t),originalProperties:e,originalOptions:t,startTime:qe||et(),duration:t.duration,tweens:[],createTween:function(e,t){var i=C.Tween(o,p.opts,e,t,p.opts.specialEasing[e]||p.opts.easing);return p.tweens.push(i),i},stop:function(e){var t=0,i=e?p.tweens.length:0;if(a)return this;for(a=!0;t<i;t++)p.tweens[t].run(1);return e?(s.notifyWith(o,[p,1,0]),s.resolveWith(o,[p,e])):s.rejectWith(o,[p,e]),this}}),h=p.props;for(function(e,t){var i,n,r,o,a;for(i in e)if(r=t[n=C.camelCase(i)],o=e[i],C.isArray(o)&&(r=o[1],o=e[i]=o[0]),i!==n&&(e[n]=o,delete e[i]),(a=C.cssHooks[n])&&"expand"in a)for(i in o=a.expand(o),delete e[n],o)i in e||(e[i]=o[i],t[i]=r);else t[n]=r}(h,p.opts.specialEasing);n<r;n++)if(i=nt.prefilters[n].call(p,o,h,p.opts))return C.isFunction(i.stop)&&(C._queueHooks(p.elem,p.opts.queue).stop=C.proxy(i.stop,i)),i;return C.map(h,it,p),C.isFunction(p.opts.start)&&p.opts.start.call(o,p),C.fx.timer(C.extend(l,{elem:o,anim:p,queue:p.opts.queue})),p.progress(p.opts.progress).done(p.opts.done,p.opts.complete).fail(p.opts.fail).always(p.opts.always)}C.Animation=C.extend(nt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return ee(i.elem,e,Z.exec(t),i),i}]},tweener:function(e,t){C.isFunction(e)?(t=e,e=["*"]):e=e.match(I);for(var i,n=0,r=e.length;n<r;n++)i=e[n],nt.tweeners[i]=nt.tweeners[i]||[],nt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var n,r,o,a,s,l,p,h,u="width"in t||"height"in t,c=this,d={},_=e.style,y=e.nodeType&&Q(e),m=H.get(e,"fxshow");for(n in i.queue||(null==(a=C._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,C.queue(e,"fx").length||a.empty.fire()})})),t)if(r=t[n],Je.test(r)){if(delete t[n],o=o||"toggle"===r,r===(y?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;y=!0}d[n]=m&&m[n]||C.style(e,n)}if((l=!C.isEmptyObject(t))||!C.isEmptyObject(d))for(n in u&&1===e.nodeType&&(i.overflow=[_.overflow,_.overflowX,_.overflowY],null==(p=m&&m.display)&&(p=H.get(e,"display")),"none"===(h=C.css(e,"display"))&&(p?h=p:(ie([e],!0),p=e.style.display||p,h=C.css(e,"display"),ie([e]))),("inline"===h||"inline-block"===h&&null!=p)&&"none"===C.css(e,"float")&&(l||(c.done(function(){_.display=p}),null==p&&(h=_.display,p="none"===h?"":h)),_.display="inline-block")),i.overflow&&(_.overflow="hidden",c.always(function(){_.overflow=i.overflow[0],_.overflowX=i.overflow[1],_.overflowY=i.overflow[2]})),l=!1,d)l||(m?"hidden"in m&&(y=m.hidden):m=H.access(e,"fxshow",{display:p}),o&&(m.hidden=!y),y&&ie([e],!0),c.done(function(){for(n in y||ie([e]),H.remove(e,"fxshow"),d)C.style(e,n,d[n])})),l=it(y?m[n]:0,n,c),n in m||(m[n]=l.start,y&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?nt.prefilters.unshift(e):nt.prefilters.push(e)}}),C.speed=function(e,t,i){var n=e&&"object"==typeof e?C.extend({},e):{complete:i||!i&&t||C.isFunction(e)&&e,duration:e,easing:i&&t||t&&!C.isFunction(t)&&t};return C.fx.off||S.hidden?n.duration=0:"number"!=typeof n.duration&&(n.duration in C.fx.speeds?n.duration=C.fx.speeds[n.duration]:n.duration=C.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){C.isFunction(n.old)&&n.old.call(this),n.queue&&C.dequeue(this,n.queue)},n},C.fn.extend({fadeTo:function(e,t,i,n){return this.filter(Q).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(t,e,i,n){var r=C.isEmptyObject(t),o=C.speed(e,i,n),a=function(){var e=nt(this,C.extend({},t),o);(r||H.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(r,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof r&&(o=e,e=r,r=void 0),e&&!1!==r&&this.queue(r||"fx",[]),this.each(function(){var e=!0,t=null!=r&&r+"queueHooks",i=C.timers,n=H.get(this);if(t)n[t]&&n[t].stop&&a(n[t]);else for(t in n)n[t]&&n[t].stop&&Qe.test(t)&&a(n[t]);for(t=i.length;t--;)i[t].elem!==this||null!=r&&i[t].queue!==r||(i[t].anim.stop(o),e=!1,i.splice(t,1));!e&&o||C.dequeue(this,r)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=H.get(this),i=t[a+"queue"],n=t[a+"queueHooks"],r=C.timers,o=i?i.length:0;for(t.finish=!0,C.queue(this,a,[]),n&&n.stop&&n.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===a&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete t.finish})}}),C.each(["toggle","show","hide"],function(e,n){var r=C.fn[n];C.fn[n]=function(e,t,i){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(tt(n,!0),e,t,i)}}),C.each({slideDown:tt("show"),slideUp:tt("hide"),slideToggle:tt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){C.fn[e]=function(e,t,i){return this.animate(n,e,t,i)}}),C.timers=[],C.fx.tick=function(){var e,t=0,i=C.timers;for(qe=C.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||C.fx.stop(),qe=void 0},C.fx.timer=function(e){C.timers.push(e),e()?C.fx.start():C.timers.pop()},C.fx.interval=13,C.fx.start=function(){Ye||(Ye=w.requestAnimationFrame?w.requestAnimationFrame($e):w.setInterval(C.fx.tick,C.fx.interval))},C.fx.stop=function(){w.cancelAnimationFrame?w.cancelAnimationFrame(Ye):w.clearInterval(Ye),Ye=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(n,e){return n=C.fx&&C.fx.speeds[n]||n,e=e||"fx",this.queue(e,function(e,t){var i=w.setTimeout(e,n);t.stop=function(){w.clearTimeout(i)}})},Ke=S.createElement("input"),Ze=S.createElement("select").appendChild(S.createElement("option")),Ke.type="checkbox",m.checkOn=""!==Ke.value,m.optSelected=Ze.selected,(Ke=S.createElement("input")).value="t",Ke.type="radio",m.radioValue="t"===Ke.value;var rt,ot=C.expr.attrHandle;C.fn.extend({attr:function(e,t){return N(this,C.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){C.removeAttr(this,e)})}}),C.extend({attr:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?C.prop(e,t,i):(1===o&&C.isXMLDoc(e)||(r=C.attrHooks[t.toLowerCase()]||(C.expr.match.bool.test(t)?rt:void 0)),void 0!==i?null===i?void C.removeAttr(e,t):r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:(e.setAttribute(t,i+""),i):r&&"get"in r&&null!==(n=r.get(e,t))?n:null==(n=C.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&C.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,n=0,r=t&&t.match(I);if(r&&1===e.nodeType)for(;i=r[n++];)e.removeAttribute(i)}}),rt={set:function(e,t,i){return!1===t?C.removeAttr(e,i):e.setAttribute(i,i),i}},C.each(C.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ot[t]||C.find.attr;ot[t]=function(e,t,i){var n,r,o=t.toLowerCase();return i||(r=ot[o],ot[o]=n,n=null!=a(e,t,i)?o:null,ot[o]=r),n}});var at=/^(?:input|select|textarea|button)$/i,st=/^(?:a|area)$/i;function lt(e){return(e.match(I)||[]).join(" ")}function pt(e){return e.getAttribute&&e.getAttribute("class")||""}C.fn.extend({prop:function(e,t){return N(this,C.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[C.propFix[e]||e]})}}),C.extend({prop:function(e,t,i){var n,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(e)||(t=C.propFix[t]||t,r=C.propHooks[t]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(e,i,t))?n:e[t]=i:r&&"get"in r&&null!==(n=r.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=C.find.attr(e,"tabindex");return t?parseInt(t,10):at.test(e.nodeName)||st.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(C.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){C.propFix[this.toLowerCase()]=this}),C.fn.extend({addClass:function(t){var e,i,n,r,o,a,s,l=0;if(C.isFunction(t))return this.each(function(e){C(this).addClass(t.call(this,e,pt(this)))});if("string"==typeof t&&t)for(e=t.match(I)||[];i=this[l++];)if(r=pt(i),n=1===i.nodeType&&" "+lt(r)+" "){for(a=0;o=e[a++];)n.indexOf(" "+o+" ")<0&&(n+=o+" ");r!==(s=lt(n))&&i.setAttribute("class",s)}return this},removeClass:function(t){var e,i,n,r,o,a,s,l=0;if(C.isFunction(t))return this.each(function(e){C(this).removeClass(t.call(this,e,pt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(I)||[];i=this[l++];)if(r=pt(i),n=1===i.nodeType&&" "+lt(r)+" "){for(a=0;o=e[a++];)for(;-1<n.indexOf(" "+o+" ");)n=n.replace(" "+o+" "," ");r!==(s=lt(n))&&i.setAttribute("class",s)}return this},toggleClass:function(r,t){var o=typeof r;return"boolean"==typeof t&&"string"===o?t?this.addClass(r):this.removeClass(r):C.isFunction(r)?this.each(function(e){C(this).toggleClass(r.call(this,e,pt(this),t),t)}):this.each(function(){var e,t,i,n;if("string"===o)for(t=0,i=C(this),n=r.match(I)||[];e=n[t++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==r&&"boolean"!==o||((e=pt(this))&&H.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===r?"":H.get(this,"__className__")||""))})},hasClass:function(e){var t,i,n=0;for(t=" "+e+" ";i=this[n++];)if(1===i.nodeType&&-1<(" "+lt(pt(i))+" ").indexOf(t))return!0;return!1}});var ht=/\r/g;C.fn.extend({val:function(i){var n,e,r,t=this[0];return arguments.length?(r=C.isFunction(i),this.each(function(e){var t;1===this.nodeType&&(null==(t=r?i.call(this,e,C(this).val()):i)?t="":"number"==typeof t?t+="":C.isArray(t)&&(t=C.map(t,function(e){return null==e?"":e+""})),(n=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in n&&void 0!==n.set(this,t,"value")||(this.value=t))})):t?(n=C.valHooks[t.type]||C.valHooks[t.nodeName.toLowerCase()])&&"get"in n&&void 0!==(e=n.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(ht,""):null==e?"":e:void 0}}),C.extend({valHooks:{option:{get:function(e){var t=C.find.attr(e,"value");return null!=t?t:lt(C.text(e))}},select:{get:function(e){var t,i,n,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:r.length;for(n=o<0?l:a?o:0;n<l;n++)if(((i=r[n]).selected||n===o)&&!i.disabled&&(!i.parentNode.disabled||!C.nodeName(i.parentNode,"optgroup"))){if(t=C(i).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var i,n,r=e.options,o=C.makeArray(t),a=r.length;a--;)((n=r[a]).selected=-1<C.inArray(C.valHooks.option.get(n),o))&&(i=!0);return i||(e.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],function(){C.valHooks[this]={set:function(e,t){if(C.isArray(t))return e.checked=-1<C.inArray(C(e).val(),t)}},m.checkOn||(C.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var ut=/^(?:focusinfocus|focusoutblur)$/;C.extend(C.event,{trigger:function(e,t,i,n){var r,o,a,s,l,p,h,u=[i||S],c=_.call(e,"type")?e.type:e,d=_.call(e,"namespace")?e.namespace.split("."):[];if(o=a=i=i||S,3!==i.nodeType&&8!==i.nodeType&&!ut.test(c+C.event.triggered)&&(-1<c.indexOf(".")&&(c=(d=c.split(".")).shift(),d.sort()),l=c.indexOf(":")<0&&"on"+c,(e=e[C.expando]?e:new C.Event(c,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=d.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),t=null==t?[e]:C.makeArray(t,[e]),h=C.event.special[c]||{},n||!h.trigger||!1!==h.trigger.apply(i,t))){if(!n&&!h.noBubble&&!C.isWindow(i)){for(s=h.delegateType||c,ut.test(s+c)||(o=o.parentNode);o;o=o.parentNode)u.push(o),a=o;a===(i.ownerDocument||S)&&u.push(a.defaultView||a.parentWindow||w)}for(r=0;(o=u[r++])&&!e.isPropagationStopped();)e.type=1<r?s:h.bindType||c,(p=(H.get(o,"events")||{})[e.type]&&H.get(o,"handle"))&&p.apply(o,t),(p=l&&o[l])&&p.apply&&U(o)&&(e.result=p.apply(o,t),!1===e.result&&e.preventDefault());return e.type=c,n||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(u.pop(),t)||!U(i)||l&&C.isFunction(i[c])&&!C.isWindow(i)&&((a=i[l])&&(i[l]=null),i[C.event.triggered=c](),C.event.triggered=void 0,a&&(i[l]=a)),e.result}},simulate:function(e,t,i){var n=C.extend(new C.Event,i,{type:e,isSimulated:!0});C.event.trigger(n,null,t)}}),C.fn.extend({trigger:function(e,t){return this.each(function(){C.event.trigger(e,t,this)})},triggerHandler:function(e,t){var i=this[0];if(i)return C.event.trigger(e,t,i,!0)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,i){C.fn[i]=function(e,t){return 0<arguments.length?this.on(i,null,e,t):this.trigger(i)}}),C.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),m.focusin="onfocusin"in w,m.focusin||C.each({focus:"focusin",blur:"focusout"},function(i,n){var r=function(e){C.event.simulate(n,e.target,C.event.fix(e))};C.event.special[n]={setup:function(){var e=this.ownerDocument||this,t=H.access(e,n);t||e.addEventListener(i,r,!0),H.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=H.access(e,n)-1;t?H.access(e,n,t):(e.removeEventListener(i,r,!0),H.remove(e,n))}}});var ct=w.location,dt=C.now(),_t=/\?/;C.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new w.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||C.error("Invalid XML: "+e),t};var yt=/\[\]$/,mt=/\r?\n/g,ft=/^(?:submit|button|image|reset|file)$/i,xt=/^(?:input|select|textarea|keygen)/i;function vt(i,e,n,r){var t;if(C.isArray(e))C.each(e,function(e,t){n||yt.test(i)?r(i,t):vt(i+"["+("object"==typeof t&&null!=t?e:"")+"]",t,n,r)});else if(n||"object"!==C.type(e))r(i,e);else for(t in e)vt(i+"["+t+"]",e[t],n,r)}C.param=function(e,t){var i,n=[],r=function(e,t){var i=C.isFunction(t)?t():t;n[n.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(C.isArray(e)||e.jquery&&!C.isPlainObject(e))C.each(e,function(){r(this.name,this.value)});else for(i in e)vt(i,e[i],t,r);return n.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=C.prop(this,"elements");return e?C.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!C(this).is(":disabled")&&xt.test(this.nodeName)&&!ft.test(e)&&(this.checked||!ne.test(e))}).map(function(e,t){var i=C(this).val();return null==i?null:C.isArray(i)?C.map(i,function(e){return{name:t.name,value:e.replace(mt,"\r\n")}}):{name:t.name,value:i.replace(mt,"\r\n")}}).get()}});var zt=/%20/g,gt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,St=/^(?:GET|HEAD)$/,Ct=/^\/\//,Mt={},Pt={},kt="*/".concat("*"),Tt=S.createElement("a");function Ot(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var i,n=0,r=e.toLowerCase().match(I)||[];if(C.isFunction(t))for(;i=r[n++];)"+"===i[0]?(i=i.slice(1)||"*",(o[i]=o[i]||[]).unshift(t)):(o[i]=o[i]||[]).push(t)}}function At(t,r,o,a){var s={},l=t===Pt;function p(e){var n;return s[e]=!0,C.each(t[e]||[],function(e,t){var i=t(r,o,a);return"string"!=typeof i||l||s[i]?l?!(n=i):void 0:(r.dataTypes.unshift(i),p(i),!1)}),n}return p(r.dataTypes[0])||!s["*"]&&p("*")}function Et(e,t){var i,n,r=C.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((r[i]?e:n||(n={}))[i]=t[i]);return n&&C.extend(!0,e,n),e}Tt.href=ct.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Et(Et(e,C.ajaxSettings),t):Et(C.ajaxSettings,e)},ajaxPrefilter:Ot(Mt),ajaxTransport:Ot(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var h,u,c,i,d,n,_,y,r,o,m=C.ajaxSetup({},t),f=m.context||m,x=m.context&&(f.nodeType||f.jquery)?C(f):C.event,v=C.Deferred(),z=C.Callbacks("once memory"),g=m.statusCode||{},a={},s={},l="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(_){if(!i)for(i={};t=wt.exec(c);)i[t[1].toLowerCase()]=t[2];t=i[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return _?c:null},setRequestHeader:function(e,t){return null==_&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==_&&(m.mimeType=e),this},statusCode:function(e){var t;if(e)if(_)b.always(e[b.status]);else for(t in e)g[t]=[g[t],e[t]];return this},abort:function(e){var t=e||l;return h&&h.abort(t),p(0,t),this}};if(v.promise(b),m.url=((e||m.url||ct.href)+"").replace(Ct,ct.protocol+"//"),m.type=t.method||t.type||m.method||m.type,m.dataTypes=(m.dataType||"*").toLowerCase().match(I)||[""],null==m.crossDomain){n=S.createElement("a");try{n.href=m.url,n.href=n.href,m.crossDomain=Tt.protocol+"//"+Tt.host!=n.protocol+"//"+n.host}catch(e){m.crossDomain=!0}}if(m.data&&m.processData&&"string"!=typeof m.data&&(m.data=C.param(m.data,m.traditional)),At(Mt,m,t,b),_)return b;for(r in(y=C.event&&m.global)&&0==C.active++&&C.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!St.test(m.type),u=m.url.replace(gt,""),m.hasContent?m.data&&m.processData&&0===(m.contentType||"").indexOf("application/x-www-form-urlencoded")&&(m.data=m.data.replace(zt,"+")):(o=m.url.slice(u.length),m.data&&(u+=(_t.test(u)?"&":"?")+m.data,delete m.data),!1===m.cache&&(u=u.replace(bt,"$1"),o=(_t.test(u)?"&":"?")+"_="+dt+++o),m.url=u+o),m.ifModified&&(C.lastModified[u]&&b.setRequestHeader("If-Modified-Since",C.lastModified[u]),C.etag[u]&&b.setRequestHeader("If-None-Match",C.etag[u])),(m.data&&m.hasContent&&!1!==m.contentType||t.contentType)&&b.setRequestHeader("Content-Type",m.contentType),b.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+kt+"; q=0.01":""):m.accepts["*"]),m.headers)b.setRequestHeader(r,m.headers[r]);if(m.beforeSend&&(!1===m.beforeSend.call(f,b,m)||_))return b.abort();if(l="abort",z.add(m.complete),b.done(m.success),b.fail(m.error),h=At(Pt,m,t,b)){if(b.readyState=1,y&&x.trigger("ajaxSend",[b,m]),_)return b;m.async&&0<m.timeout&&(d=w.setTimeout(function(){b.abort("timeout")},m.timeout));try{_=!1,h.send(a,p)}catch(e){if(_)throw e;p(-1,e)}}else p(-1,"No Transport");function p(e,t,i,n){var r,o,a,s,l,p=t;_||(_=!0,d&&w.clearTimeout(d),h=void 0,c=n||"",b.readyState=0<e?4:0,r=200<=e&&e<300||304===e,i&&(s=function(e,t,i){for(var n,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(r in s)if(s[r]&&s[r].test(n)){l.unshift(r);break}if(l[0]in i)o=l[0];else{for(r in i){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),i[o]}(m,b,i)),s=function(e,t,i,n){var r,o,a,s,l,p={},h=e.dataTypes.slice();if(h[1])for(a in e.converters)p[a.toLowerCase()]=e.converters[a];for(o=h.shift();o;)if(e.responseFields[o]&&(i[e.responseFields[o]]=t),!l&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=p[l+" "+o]||p["* "+o]))for(r in p)if((s=r.split(" "))[1]===o&&(a=p[l+" "+s[0]]||p["* "+s[0]])){!0===a?a=p[r]:!0!==p[r]&&(o=s[0],h.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(m,s,b,r),r?(m.ifModified&&((l=b.getResponseHeader("Last-Modified"))&&(C.lastModified[u]=l),(l=b.getResponseHeader("etag"))&&(C.etag[u]=l)),204===e||"HEAD"===m.type?p="nocontent":304===e?p="notmodified":(p=s.state,o=s.data,r=!(a=s.error))):(a=p,!e&&p||(p="error",e<0&&(e=0))),b.status=e,b.statusText=(t||p)+"",r?v.resolveWith(f,[o,p,b]):v.rejectWith(f,[b,p,a]),b.statusCode(g),g=void 0,y&&x.trigger(r?"ajaxSuccess":"ajaxError",[b,m,r?o:a]),z.fireWith(f,[b,p]),y&&(x.trigger("ajaxComplete",[b,m]),--C.active||C.event.trigger("ajaxStop")))}return b},getJSON:function(e,t,i){return C.get(e,t,i,"json")},getScript:function(e,t){return C.get(e,void 0,t,"script")}}),C.each(["get","post"],function(e,r){C[r]=function(e,t,i,n){return C.isFunction(t)&&(n=n||i,i=t,t=void 0),C.ajax(C.extend({url:e,type:r,dataType:n,data:t,success:i},C.isPlainObject(e)&&e))}}),C._evalUrl=function(e){return C.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},C.fn.extend({wrapAll:function(e){var t;return this[0]&&(C.isFunction(e)&&(e=e.call(this[0])),t=C(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(i){return C.isFunction(i)?this.each(function(e){C(this).wrapInner(i.call(this,e))}):this.each(function(){var e=C(this),t=e.contents();t.length?t.wrapAll(i):e.append(i)})},wrap:function(t){var i=C.isFunction(t);return this.each(function(e){C(this).wrapAll(i?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){C(this).replaceWith(this.childNodes)}),this}}),C.expr.pseudos.hidden=function(e){return!C.expr.pseudos.visible(e)},C.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new w.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},It=C.ajaxSettings.xhr();m.cors=!!It&&"withCredentials"in It,m.ajax=It=!!It,C.ajaxTransport(function(r){var o,a;if(m.cors||It&&!r.crossDomain)return{send:function(e,t){var i,n=r.xhr();if(n.open(r.type,r.url,r.async,r.username,r.password),r.xhrFields)for(i in r.xhrFields)n[i]=r.xhrFields[i];for(i in r.mimeType&&n.overrideMimeType&&n.overrideMimeType(r.mimeType),r.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(i,e[i]);o=function(e){return function(){o&&(o=a=n.onload=n.onerror=n.onabort=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Gt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=o(),a=n.onerror=o("error"),void 0!==n.onabort?n.onabort=a:n.onreadystatechange=function(){4===n.readyState&&w.setTimeout(function(){o&&a()})},o=o("abort");try{n.send(r.hasContent&&r.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),C.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return C.globalEval(e),e}}}),C.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),C.ajaxTransport("script",function(i){var n,r;if(i.crossDomain)return{send:function(e,t){n=C("<script>").prop({charset:i.scriptCharset,src:i.url}).on("load error",r=function(e){n.remove(),r=null,e&&t("error"===e.type?404:200,e.type)}),S.head.appendChild(n[0])},abort:function(){r&&r()}}});var Bt,Lt=[],Dt=/(=)\?(?=&|$)|\?\?/;function Rt(e){return C.isWindow(e)?e:9===e.nodeType&&e.defaultView}C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Lt.pop()||C.expando+"_"+dt++;return this[e]=!0,e}}),C.ajaxPrefilter("json jsonp",function(e,t,i){var n,r,o,a=!1!==e.jsonp&&(Dt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Dt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=C.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Dt,"$1"+n):!1!==e.jsonp&&(e.url+=(_t.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return o||C.error(n+" was not called"),o[0]},e.dataTypes[0]="json",r=w[n],w[n]=function(){o=arguments},i.always(function(){void 0===r?C(w).removeProp(n):w[n]=r,e[n]&&(e.jsonpCallback=t.jsonpCallback,Lt.push(n)),o&&C.isFunction(r)&&r(o[0]),o=r=void 0}),"script"}),m.createHTMLDocument=((Bt=S.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Bt.childNodes.length),C.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(m.createHTMLDocument?((n=(t=S.implementation.createHTMLDocument("")).createElement("base")).href=S.location.href,t.head.appendChild(n)):t=S),o=!i&&[],(r=M.exec(e))?[t.createElement(r[1])]:(r=ce([e],t,o),o&&o.length&&C(o).remove(),C.merge([],r.childNodes)));var n,r,o},C.fn.load=function(e,t,i){var n,r,o,a=this,s=e.indexOf(" ");return-1<s&&(n=lt(e.slice(s)),e=e.slice(0,s)),C.isFunction(t)?(i=t,t=void 0):t&&"object"==typeof t&&(r="POST"),0<a.length&&C.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(n?C("<div>").append(C.parseHTML(e)).find(n):e)}).always(i&&function(e,t){a.each(function(){i.apply(this,o||[e.responseText,t,e])})}),this},C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){C.fn[t]=function(e){return this.on(t,e)}}),C.expr.pseudos.animated=function(t){return C.grep(C.timers,function(e){return t===e.elem}).length},C.offset={setOffset:function(e,t,i){var n,r,o,a,s,l,p=C.css(e,"position"),h=C(e),u={};"static"===p&&(e.style.position="relative"),s=h.offset(),o=C.css(e,"top"),l=C.css(e,"left"),("absolute"===p||"fixed"===p)&&-1<(o+l).indexOf("auto")?(a=(n=h.position()).top,r=n.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),C.isFunction(t)&&(t=t.call(e,i,C.extend({},s))),null!=t.top&&(u.top=t.top-s.top+a),null!=t.left&&(u.left=t.left-s.left+r),"using"in t?t.using.call(e,u):h.css(u)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){C.offset.setOffset(this,t,e)});var e,i,n,r,o=this[0];return o?o.getClientRects().length?(n=o.getBoundingClientRect()).width||n.height?(i=Rt(r=o.ownerDocument),e=r.documentElement,{top:n.top+i.pageYOffset-e.clientTop,left:n.left+i.pageXOffset-e.clientLeft}):n:{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i=this[0],n={top:0,left:0};return"fixed"===C.css(i,"position")?t=i.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),C.nodeName(e[0],"html")||(n=e.offset()),n={top:n.top+C.css(e[0],"borderTopWidth",!0),left:n.left+C.css(e[0],"borderLeftWidth",!0)}),{top:t.top-n.top-C.css(i,"marginTop",!0),left:t.left-n.left-C.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===C.css(e,"position");)e=e.offsetParent;return e||de})}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,r){var o="pageYOffset"===r;C.fn[t]=function(e){return N(this,function(e,t,i){var n=Rt(e);return void 0===i?n?n[r]:e[t]:void(n?n.scrollTo(o?n.pageXOffset:i,o?i:n.pageYOffset):e[t]=i)},t,e,arguments.length)}}),C.each(["top","left"],function(e,i){C.cssHooks[i]=Le(m.pixelPosition,function(e,t){if(t)return t=Be(e,i),Ge.test(t)?C(e).position()[i]+"px":t})}),C.each({Height:"height",Width:"width"},function(a,s){C.each({padding:"inner"+a,content:s,"":"outer"+a},function(n,o){C.fn[o]=function(e,t){var i=arguments.length&&(n||"boolean"!=typeof e),r=n||(!0===e||!0===t?"margin":"border");return N(this,function(e,t,i){var n;return C.isWindow(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+a],n["scroll"+a],e.body["offset"+a],n["offset"+a],n["client"+a])):void 0===i?C.css(e,t,r):C.style(e,t,i,r)},s,i?e:void 0,i)}})}),C.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)}}),C.parseJSON=JSON.parse,"function"==typeof define&&define.amd&&define("jquery",[],function(){return C});var Ft=w.jQuery,jt=w.$;return C.noConflict=function(e){return w.$===C&&(w.$=jt),e&&w.jQuery===C&&(w.jQuery=Ft),C},e||(w.jQuery=w.$=C),C}),function(){var c;function $(e,t){var i=function(){return i.method.apply(i.scope,arguments)};return i.scope=e,i.method=t,i}window.js=js={_Boot:{}},window.zpp_nape=zpp_nape={shape:{},constraint:{},geom:{},phys:{},dynamics:{},callbacks:{},util:{},space:{}},window.sandbox=sandbox={},window.nape=nape={shape:{},constraint:{},geom:{},phys:{},dynamics:{},callbacks:{},space:{},util:{}};var _=_=function(){};_.__name__=["Reflect"],_.field=function(e,t){try{return e[t]}catch(e){return null}},_.fields=function(e){var t=[];if(null!=e){var i=Object.prototype.hasOwnProperty;for(var n in e)"__id__"!=n&&"hx__closures__"!=n&&i.call(e,n)&&t.push(n)}return t},_.copy=function(e){for(var t={},i=0,n=_.fields(e);i<n.length;){var r=n[i];++i,t[r]=_.field(e,r)}return t},_.prototype.__class__=_;var n=n=function(){};n.__name__=["Std"],n.string=function(e){return ze.__string_rec(e,"")},n.prototype.__class__=n;var e=e=function(){};e.__name__=["StringTools"],e.hex=function(e,t){for(var i="";i="0123456789ABCDEF".charAt(15&e)+i,0<(e>>>=4););if(null!=t)for(;i.length<t;)i="0"+i;return i},e.prototype.__class__=e;var r=js._Boot.HaxeError=function(e){Error.call(this),this.val=e,this.message=String(e),Error.captureStackTrace&&Error.captureStackTrace(this,r)};r.__name__=["js","_Boot","HaxeError"],r.__super__=Error,r.prototype=Object.create(Error.prototype),r.wrap=function(e){return e instanceof Error?e:new r(e)},r.prototype.val=null,r.prototype.__class__=r;var ze=js.Boot=function(){};ze.__name__=["js","Boot"],ze.getClass=function(e){if(e instanceof Array&&null==e.__enum__)return Array;var t=e.__class__;if(null!=t)return t;var i=ze.__nativeClassName(e);return null!=i?ze.__resolveNativeClass(i):null},ze.__string_rec=function(e,t){if(null==e)return"null";if(5<=t.length)return"<...>";var i=typeof e;switch("function"==i&&(e.__name__||e.__ename__)&&(i="object"),i){case"function":return"<function>";case"object":if(e instanceof Array){if(e.__enum__){if(2==e.length)return e[0];var n=e[0]+"(";t+="\t";for(var r=2,o=e.length;r<o;){var a=r++;n+=2!=a?","+ze.__string_rec(e[a],t):ze.__string_rec(e[a],t)}return n+")"}var s="[";t+="\t";for(var l=0,p=e.length;l<p;){var h=l++;s+=(0<h?",":"")+ze.__string_rec(e[h],t)}return s+="]"}var u;try{u=e.toString}catch(e){return"???"}if(null!=u&&u!=Object.toString&&"function"==typeof u){var c=e.toString();if("[object Object]"!=c)return c}var d=null,_="{\n";t+="\t";var y=null!=e.hasOwnProperty;for(var d in e)y&&!e.hasOwnProperty(d)||"prototype"!=d&&"__class__"!=d&&"__super__"!=d&&"__interfaces__"!=d&&"__properties__"!=d&&(2!=_.length&&(_+=", \n"),_+=t+d+" : "+ze.__string_rec(e[d],t));return _+="\n"+(t=t.substring(1))+"}";case"string":return e;default:return String(e)}},ze.__interfLoop=function(e,t){if(null==e)return!1;if(e==t)return!0;var i=e.__interfaces__;if(null!=i)for(var n=0,r=i.length;n<r;){var o=i[n++];if(o==t||ze.__interfLoop(o,t))return!0}return ze.__interfLoop(e.__super__,t)},ze.__instanceof=function(e,t){if(null==t)return!1;switch(t){case Array:return e instanceof Array&&null==e.__enum__;case Qn:return"boolean"==typeof e;case Zn:return!0;case Jn:return"number"==typeof e;case Kn:return"number"==typeof e&&(0|e)===e;case String:return"string"==typeof e;default:if(null==e)return!1;if("function"==typeof t){if(e instanceof t)return!0;if(ze.__interfLoop(ze.getClass(e),t))return!0}else if("object"==typeof t&&ze.__isNativeObj(t)&&e instanceof t)return!0;return t==$n&&null!=e.__name__||(t==er&&null!=e.__ename__||e.__enum__==t)}},ze.__nativeClassName=function(e){var t=ze.__toStr.call(e).slice(8,-1);return"Object"==t||"Function"==t||"Math"==t||"JSON"==t?null:t},ze.__isNativeObj=function(e){return null!=ze.__nativeClassName(e)},ze.__resolveNativeClass=function(e){return $global[e]},ze.prototype.__class__=ze;var Qs=nape.Config=function(){};Qs.__name__=["nape","Config"],Qs.prototype.__class__=Qs;var t=nape.callbacks.Callback=function(){this.zpp_inner=null};t.__name__=["nape","callbacks","Callback"],t.prototype.zpp_inner=null,t.prototype.get_event=function(){return Le.events[this.zpp_inner.event]},t.prototype.get_listener=function(){return this.zpp_inner.listener.outer},t.prototype.toString=function(){return""},Object.defineProperty(t.prototype,"event",{get:t.prototype.get_event}),Object.defineProperty(t.prototype,"listener",{get:t.prototype.get_listener}),t.prototype.__class__=t;var i=nape.callbacks.BodyCallback=function(){t.call(this)};i.__name__=["nape","callbacks","BodyCallback"],i.__super__=t,i.prototype=Object.create(t.prototype),i.prototype.get_body=function(){return this.zpp_inner.body.outer},i.prototype.toString=function(){var e="Cb:";return e="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-2],e+=":"+this.zpp_inner.body.outer.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(i.prototype,"body",{get:i.prototype.get_body}),i.prototype.__class__=i;var u=nape.callbacks.Listener=function(){this.zpp_inner=null};u.__name__=["nape","callbacks","Listener"],u.prototype.zpp_inner=null,u.prototype.get_type=function(){return Le.types[this.zpp_inner.type]},u.prototype.get_event=function(){return Le.events[this.zpp_inner.event]},u.prototype.set_event=function(e){var t;Le.events[this.zpp_inner.event]!=e&&(null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new d,Uo.internal=!1),e==Uo.CbEvent_BEGIN?t=0:(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new d,Uo.internal=!1),e==Uo.CbEvent_ONGOING?t=6:(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new d,Uo.internal=!1),e==Uo.CbEvent_END?t=1:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new d,Uo.internal=!1),e==Uo.CbEvent_SLEEP?t=3:(null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new d,Uo.internal=!1),e==Uo.CbEvent_WAKE?t=2:(null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new d,Uo.internal=!1),t=e==Uo.CbEvent_PRE?5:4))))),this.zpp_inner.swapEvent(t));return Le.events[this.zpp_inner.event]},u.prototype.get_precedence=function(){return this.zpp_inner.precedence},u.prototype.set_precedence=function(e){return this.zpp_inner.precedence!=e&&(this.zpp_inner.precedence=e,this.zpp_inner.invalidate_precedence()),this.zpp_inner.precedence},u.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},u.prototype.set_space=function(e){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e)if(null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(this),null!=e){var t=e.zpp_inner.wrap_listeners;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},u.prototype.toString=function(){var e=["BEGIN","END","WAKE","SLEEP","BREAK","PRE","ONGOING"][this.zpp_inner.event];if(0==this.zpp_inner.type)return"BodyListener{"+e+"::"+n.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(1==this.zpp_inner.type)return"ConstraintListener{"+e+"::"+n.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var t,i=this.zpp_inner.interaction;switch(i.itype){case 1:t="COLLISION";break;case 2:t="SENSOR";break;case 4:t="FLUID";break;default:t="ALL"}return(2==this.zpp_inner.type?"InteractionListener{"+e+"#"+t+"::"+n.string(i.outer_zni.zpp_inner_zn.options1.outer)+":"+n.string(i.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+t+"::"+n.string(i.outer_znp.zpp_inner_zn.options1.outer)+":"+n.string(i.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},Object.defineProperty(u.prototype,"type",{get:u.prototype.get_type}),Object.defineProperty(u.prototype,"event",{get:u.prototype.get_event,set:u.prototype.set_event}),Object.defineProperty(u.prototype,"precedence",{get:u.prototype.get_precedence,set:u.prototype.set_precedence}),Object.defineProperty(u.prototype,"space",{get:u.prototype.get_space,set:u.prototype.set_space}),u.prototype.__class__=u;var o=nape.callbacks.BodyListener=function(e,t,i,n){null==n&&(n=0),this.zpp_inner_zn=null,u.call(this);var r=-1;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new d,Uo.internal=!1),e==Uo.CbEvent_WAKE?r=2:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new d,Uo.internal=!1),e==Uo.CbEvent_SLEEP&&(r=3)),this.zpp_inner_zn=new De(je.argument(t),r,i),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner.precedence=n};o.__name__=["nape","callbacks","BodyListener"],o.__super__=u,o.prototype=Object.create(u.prototype),o.prototype.zpp_inner_zn=null,o.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},o.prototype.set_options=function(e){return this.zpp_inner_zn.options.set(e.zpp_inner),this.zpp_inner_zn.options.outer},o.prototype.get_handler=function(){return this.zpp_inner_zn.handler},o.prototype.set_handler=function(e){return this.zpp_inner_zn.handler=e,this.zpp_inner_zn.handler},Object.defineProperty(o.prototype,"options",{get:o.prototype.get_options,set:o.prototype.set_options}),Object.defineProperty(o.prototype,"handler",{get:o.prototype.get_handler,set:o.prototype.set_handler}),o.prototype.__class__=o;var d=nape.callbacks.CbEvent=function(){};d.__name__=["nape","callbacks","CbEvent"],d.BEGIN=null,d.get_BEGIN=function(){return null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new d,Uo.internal=!1),Uo.CbEvent_BEGIN},d.ONGOING=null,d.get_ONGOING=function(){return null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new d,Uo.internal=!1),Uo.CbEvent_ONGOING},d.END=null,d.get_END=function(){return null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new d,Uo.internal=!1),Uo.CbEvent_END},d.WAKE=null,d.get_WAKE=function(){return null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new d,Uo.internal=!1),Uo.CbEvent_WAKE},d.SLEEP=null,d.get_SLEEP=function(){return null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new d,Uo.internal=!1),Uo.CbEvent_SLEEP},d.BREAK=null,d.get_BREAK=function(){return null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new d,Uo.internal=!1),Uo.CbEvent_BREAK},d.PRE=null,d.get_PRE=function(){return null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new d,Uo.internal=!1),Uo.CbEvent_PRE},d.prototype.toString=function(){return null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new d,Uo.internal=!1),this==Uo.CbEvent_PRE?"PRE":(null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new d,Uo.internal=!1),this==Uo.CbEvent_BEGIN?"BEGIN":(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new d,Uo.internal=!1),this==Uo.CbEvent_ONGOING?"ONGOING":(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new d,Uo.internal=!1),this==Uo.CbEvent_END?"END":(null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new d,Uo.internal=!1),this==Uo.CbEvent_WAKE?"WAKE":(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new d,Uo.internal=!1),this==Uo.CbEvent_SLEEP?"SLEEP":(null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new d,Uo.internal=!1),this==Uo.CbEvent_BREAK?"BREAK":""))))))},Object.defineProperty(d,"BEGIN",{get:d.get_BEGIN}),Object.defineProperty(d,"ONGOING",{get:d.get_ONGOING}),Object.defineProperty(d,"END",{get:d.get_END}),Object.defineProperty(d,"WAKE",{get:d.get_WAKE}),Object.defineProperty(d,"SLEEP",{get:d.get_SLEEP}),Object.defineProperty(d,"BREAK",{get:d.get_BREAK}),Object.defineProperty(d,"PRE",{get:d.get_PRE}),d.prototype.__class__=d;var y=nape.callbacks.CbType=function(){this.zpp_inner=null,this.zpp_inner=new Be,this.zpp_inner.outer=this};y.__name__=["nape","callbacks","CbType"],y.ANY_BODY=null,y.get_ANY_BODY=function(){return Be.ANY_BODY},y.ANY_CONSTRAINT=null,y.get_ANY_CONSTRAINT=function(){return Be.ANY_CONSTRAINT},y.ANY_SHAPE=null,y.get_ANY_SHAPE=function(){return Be.ANY_SHAPE},y.ANY_COMPOUND=null,y.get_ANY_COMPOUND=function(){return Be.ANY_COMPOUND},y.prototype.zpp_inner=null,y.prototype.get_id=function(){return this.zpp_inner.id},y.prototype.including=function(e){return new x(this).including(e)},y.prototype.excluding=function(e){return new x(this).excluding(e)},y.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},y.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=vn.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},y.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=fn.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},y.prototype.toString=function(){return this==Be.ANY_BODY?"ANY_BODY":this==Be.ANY_SHAPE?"ANY_SHAPE":this==Be.ANY_COMPOUND?"ANY_COMPOUND":this==Be.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},Object.defineProperty(y,"ANY_BODY",{get:y.get_ANY_BODY}),Object.defineProperty(y,"ANY_CONSTRAINT",{get:y.get_ANY_CONSTRAINT}),Object.defineProperty(y,"ANY_SHAPE",{get:y.get_ANY_SHAPE}),Object.defineProperty(y,"ANY_COMPOUND",{get:y.get_ANY_COMPOUND}),Object.defineProperty(y.prototype,"id",{get:y.prototype.get_id}),Object.defineProperty(y.prototype,"userData",{get:y.prototype.get_userData}),Object.defineProperty(y.prototype,"interactors",{get:y.prototype.get_interactors}),Object.defineProperty(y.prototype,"constraints",{get:y.prototype.get_constraints}),y.prototype.__class__=y;var Ve=nape.callbacks.CbTypeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ve.__name__=["nape","callbacks","CbTypeIterator"],Ve.get=function(e){var t;if(null==Ve.zpp_pool){Tn.internal=!0;var i=new Ve;Tn.internal=!1,t=i}else{var n=Ve.zpp_pool;Ve.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ve.prototype.zpp_inner=null,Ve.prototype.zpp_i=null,Ve.prototype.zpp_critical=null,Ve.prototype.zpp_next=null,Ve.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=this).zpp_inner=null,!1)},Ve.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ve.prototype.__class__=Ve;var m=nape.callbacks.CbTypeList=function(){this.zpp_inner=null,this.zpp_inner=new Tn,this.zpp_inner.outer=this};m.__name__=["nape","callbacks","CbTypeList"],m.fromArray=function(e){for(var t=new m,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},m.prototype.zpp_inner=null,m.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},m.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},m.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},m.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},m.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},m.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},m.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},m.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},m.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},m.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},m.prototype.empty=function(){return null==this.zpp_inner.inner.head},m.prototype.iterator=function(){return this.zpp_inner.valmod(),Ve.get(this)},m.prototype.copy=function(e){null==e&&(e=!1);var t=new m;this.zpp_inner.valmod();for(var i=Ve.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},m.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ve.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},m.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ve.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},m.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ve.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=t).zpp_inner=null;break}}return this},m.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(m.prototype,"length",{get:m.prototype.get_length}),m.prototype.__class__=m;var a=nape.callbacks.ConstraintCallback=function(){t.call(this)};a.__name__=["nape","callbacks","ConstraintCallback"],a.__super__=t,a.prototype=Object.create(t.prototype),a.prototype.get_constraint=function(){return this.zpp_inner.constraint.outer},a.prototype.toString=function(){var e="Cb:";return e="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-2],e+=":"+this.zpp_inner.constraint.outer.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(a.prototype,"constraint",{get:a.prototype.get_constraint}),a.prototype.__class__=a;var s=nape.callbacks.ConstraintListener=function(e,t,i,n){null==n&&(n=0),this.zpp_inner_zn=null,u.call(this);var r=-1;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new d,Uo.internal=!1),e==Uo.CbEvent_WAKE?r=2:(null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new d,Uo.internal=!1),e==Uo.CbEvent_SLEEP?r=3:(null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new d,Uo.internal=!1),e==Uo.CbEvent_BREAK&&(r=4))),this.zpp_inner_zn=new Re(je.argument(t),r,i),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner.precedence=n};s.__name__=["nape","callbacks","ConstraintListener"],s.__super__=u,s.prototype=Object.create(u.prototype),s.prototype.zpp_inner_zn=null,s.prototype.get_options=function(){return this.zpp_inner_zn.options.outer},s.prototype.set_options=function(e){return this.zpp_inner_zn.options.set(e.zpp_inner),this.zpp_inner_zn.options.outer},s.prototype.get_handler=function(){return this.zpp_inner_zn.handler},s.prototype.set_handler=function(e){return this.zpp_inner_zn.handler=e,this.zpp_inner_zn.handler},Object.defineProperty(s.prototype,"options",{get:s.prototype.get_options,set:s.prototype.set_options}),Object.defineProperty(s.prototype,"handler",{get:s.prototype.get_handler,set:s.prototype.set_handler}),s.prototype.__class__=s;var l=nape.callbacks.InteractionCallback=function(){t.call(this)};l.__name__=["nape","callbacks","InteractionCallback"],l.__super__=t,l.prototype=Object.create(t.prototype),l.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},l.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},l.prototype.get_arbiters=function(){return this.zpp_inner.wrap_arbiters},l.prototype.toString=function(){var e="Cb:";return e="Cb:"+["BEGIN","END","","","","","ONGOING"][this.zpp_inner.event],e+=":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),e+=" : "+this.zpp_inner.wrap_arbiters.toString(),e+=" : listener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(l.prototype,"int1",{get:l.prototype.get_int1}),Object.defineProperty(l.prototype,"int2",{get:l.prototype.get_int2}),Object.defineProperty(l.prototype,"arbiters",{get:l.prototype.get_arbiters}),l.prototype.__class__=l;var p=nape.callbacks.InteractionListener=function(e,t,i,n,r,o){null==o&&(o=0),this.zpp_inner_zn=null,u.call(this);var a=-1;null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new d,Uo.internal=!1),e==Uo.CbEvent_BEGIN?a=0:(null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new d,Uo.internal=!1),e==Uo.CbEvent_END?a=1:(null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new d,Uo.internal=!1),e==Uo.CbEvent_ONGOING&&(a=6))),this.zpp_inner_zn=new ri(je.argument(i),je.argument(n),a,2),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_zni=this).zpp_inner.precedence=o,this.zpp_inner_zn.handleri=r;var s,l,p=this.zpp_inner_zn.itype;(1==p?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),s=Uo.InteractionType_COLLISION):2==p?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),s=Uo.InteractionType_SENSOR):4==p?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),s=Uo.InteractionType_FLUID):7==p?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),s=Uo.InteractionType_ANY):s=null,s!=t)&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t==Uo.InteractionType_COLLISION?l=1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),t==Uo.InteractionType_SENSOR?l=2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),l=t==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=l);var h=this.zpp_inner_zn.itype;1==h?null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1):2==h?null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1):4==h?null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1):7==h&&null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1)};p.__name__=["nape","callbacks","InteractionListener"],p.__super__=u,p.prototype=Object.create(u.prototype),p.prototype.zpp_inner_zn=null,p.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},p.prototype.set_options1=function(e){return this.zpp_inner_zn.options1.set(e.zpp_inner),this.zpp_inner_zn.options1.outer},p.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},p.prototype.set_options2=function(e){return this.zpp_inner_zn.options2.set(e.zpp_inner),this.zpp_inner_zn.options2.outer},p.prototype.get_interactionType=function(){var e=this.zpp_inner_zn.itype;return 1==e?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==e?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==e?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==e?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},p.prototype.set_interactionType=function(e){var t,i,n=this.zpp_inner_zn.itype;(1==n?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t=Uo.InteractionType_COLLISION):2==n?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),t=Uo.InteractionType_SENSOR):4==n?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),t=Uo.InteractionType_FLUID):7==n?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),t=Uo.InteractionType_ANY):t=null,t!=e)&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),e==Uo.InteractionType_COLLISION?i=1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?i=2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),i=e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=i);var r=this.zpp_inner_zn.itype;return 1==r?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==r?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==r?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==r?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},p.prototype.get_handler=function(){return this.zpp_inner_zn.handleri},p.prototype.set_handler=function(e){return this.zpp_inner_zn.handleri=e,this.zpp_inner_zn.handleri},p.prototype.get_allowSleepingCallbacks=function(){return this.zpp_inner_zn.allowSleepingCallbacks},p.prototype.set_allowSleepingCallbacks=function(e){return this.zpp_inner_zn.allowSleepingCallbacks=e,this.zpp_inner_zn.allowSleepingCallbacks},Object.defineProperty(p.prototype,"options1",{get:p.prototype.get_options1,set:p.prototype.set_options1}),Object.defineProperty(p.prototype,"options2",{get:p.prototype.get_options2,set:p.prototype.set_options2}),Object.defineProperty(p.prototype,"interactionType",{get:p.prototype.get_interactionType,set:p.prototype.set_interactionType}),Object.defineProperty(p.prototype,"handler",{get:p.prototype.get_handler,set:p.prototype.set_handler}),Object.defineProperty(p.prototype,"allowSleepingCallbacks",{get:p.prototype.get_allowSleepingCallbacks,set:p.prototype.set_allowSleepingCallbacks}),p.prototype.__class__=p;var C=nape.callbacks.InteractionType=function(){};C.__name__=["nape","callbacks","InteractionType"],C.COLLISION=null,C.get_COLLISION=function(){return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION},C.SENSOR=null,C.get_SENSOR=function(){return null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR},C.FLUID=null,C.get_FLUID=function(){return null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID},C.ANY=null,C.get_ANY=function(){return null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY},C.prototype.toString=function(){return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),this==Uo.InteractionType_COLLISION?"COLLISION":(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),this==Uo.InteractionType_SENSOR?"SENSOR":(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),this==Uo.InteractionType_FLUID?"FLUID":(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),this==Uo.InteractionType_ANY?"ANY":"")))},Object.defineProperty(C,"COLLISION",{get:C.get_COLLISION}),Object.defineProperty(C,"SENSOR",{get:C.get_SENSOR}),Object.defineProperty(C,"FLUID",{get:C.get_FLUID}),Object.defineProperty(C,"ANY",{get:C.get_ANY}),C.prototype.__class__=C;var He=nape.callbacks.ListenerIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};He.__name__=["nape","callbacks","ListenerIterator"],He.get=function(e){var t;if(null==He.zpp_pool){gn.internal=!0;var i=new He;gn.internal=!1,t=i}else{var n=He.zpp_pool;He.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},He.prototype.zpp_inner=null,He.prototype.zpp_i=null,He.prototype.zpp_critical=null,He.prototype.zpp_next=null,He.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=He.zpp_pool,(He.zpp_pool=this).zpp_inner=null,!1)},He.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},He.prototype.__class__=He;var h=nape.callbacks.ListenerList=function(){this.zpp_inner=null,this.zpp_inner=new gn,this.zpp_inner.outer=this};h.__name__=["nape","callbacks","ListenerList"],h.fromArray=function(e){for(var t=new h,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},h.prototype.zpp_inner=null,h.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},h.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},h.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},h.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},h.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},h.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},h.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},h.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},h.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},h.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},h.prototype.empty=function(){return null==this.zpp_inner.inner.head},h.prototype.iterator=function(){return this.zpp_inner.valmod(),He.get(this)},h.prototype.copy=function(e){null==e&&(e=!1);var t=new h;this.zpp_inner.valmod();for(var i=He.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=He.zpp_pool,(He.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},h.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=He.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},h.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=He.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=He.zpp_pool,(He.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},h.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=He.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=He.zpp_pool,(He.zpp_pool=t).zpp_inner=null;break}}return this},h.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(h.prototype,"length",{get:h.prototype.get_length}),h.prototype.__class__=h;var f=nape.callbacks.ListenerType=function(){};f.__name__=["nape","callbacks","ListenerType"],f.BODY=null,f.get_BODY=function(){return null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new f,Uo.internal=!1),Uo.ListenerType_BODY},f.CONSTRAINT=null,f.get_CONSTRAINT=function(){return null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new f,Uo.internal=!1),Uo.ListenerType_CONSTRAINT},f.INTERACTION=null,f.get_INTERACTION=function(){return null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new f,Uo.internal=!1),Uo.ListenerType_INTERACTION},f.PRE=null,f.get_PRE=function(){return null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new f,Uo.internal=!1),Uo.ListenerType_PRE},f.prototype.toString=function(){return null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new f,Uo.internal=!1),this==Uo.ListenerType_BODY?"BODY":(null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new f,Uo.internal=!1),this==Uo.ListenerType_CONSTRAINT?"CONSTRAINT":(null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new f,Uo.internal=!1),this==Uo.ListenerType_INTERACTION?"INTERACTION":(null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new f,Uo.internal=!1),this==Uo.ListenerType_PRE?"PRE":"")))},Object.defineProperty(f,"BODY",{get:f.get_BODY}),Object.defineProperty(f,"CONSTRAINT",{get:f.get_CONSTRAINT}),Object.defineProperty(f,"INTERACTION",{get:f.get_INTERACTION}),Object.defineProperty(f,"PRE",{get:f.get_PRE}),f.prototype.__class__=f;var x=nape.callbacks.OptionType=function(e,t){this.zpp_inner=null,this.zpp_inner=new je,this.zpp_inner.outer=this,null!=e&&this.including(e),null!=t&&this.excluding(t)};x.__name__=["nape","callbacks","OptionType"],x.prototype.zpp_inner=null,x.prototype.get_includes=function(){return null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes(),this.zpp_inner.wrap_includes},x.prototype.get_excludes=function(){return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),this.zpp_inner.wrap_excludes},x.prototype.including=function(e){return this.zpp_inner.append(this.zpp_inner.includes,e),this},x.prototype.excluding=function(e){return this.zpp_inner.append(this.zpp_inner.excludes,e),this},x.prototype.toString=function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var e=this.zpp_inner.wrap_includes.toString();return null==this.zpp_inner.wrap_excludes&&this.zpp_inner.setup_excludes(),"@{"+e+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},Object.defineProperty(x.prototype,"includes",{get:x.prototype.get_includes}),Object.defineProperty(x.prototype,"excludes",{get:x.prototype.get_excludes}),x.prototype.__class__=x;var v=nape.callbacks.PreCallback=function(){t.call(this)};v.__name__=["nape","callbacks","PreCallback"],v.__super__=t,v.prototype=Object.create(t.prototype),v.prototype.get_arbiter=function(){return this.zpp_inner.pre_arbiter.wrapper()},v.prototype.get_int1=function(){return this.zpp_inner.int1.outer_i},v.prototype.get_int2=function(){return this.zpp_inner.int2.outer_i},v.prototype.get_swapped=function(){return this.zpp_inner.pre_swapped},v.prototype.toString=function(){var e="Cb:PRE:";return e="Cb:PRE::"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString(),e+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString(),e+=" : listnener: "+n.string(this.zpp_inner.listener.outer)},Object.defineProperty(v.prototype,"arbiter",{get:v.prototype.get_arbiter}),Object.defineProperty(v.prototype,"int1",{get:v.prototype.get_int1}),Object.defineProperty(v.prototype,"int2",{get:v.prototype.get_int2}),Object.defineProperty(v.prototype,"swapped",{get:v.prototype.get_swapped}),v.prototype.__class__=v;var Fo=nape.callbacks.PreFlag=function(){};Fo.__name__=["nape","callbacks","PreFlag"],Fo.ACCEPT=null,Fo.get_ACCEPT=function(){return null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT},Fo.IGNORE=null,Fo.get_IGNORE=function(){return null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE},Fo.ACCEPT_ONCE=null,Fo.get_ACCEPT_ONCE=function(){return null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE},Fo.IGNORE_ONCE=null,Fo.get_IGNORE_ONCE=function(){return null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE},Fo.prototype.toString=function(){return null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),this==Uo.PreFlag_ACCEPT?"ACCEPT":(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),this==Uo.PreFlag_IGNORE?"IGNORE":(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),this==Uo.PreFlag_ACCEPT_ONCE?"ACCEPT_ONCE":(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),this==Uo.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")))},Object.defineProperty(Fo,"ACCEPT",{get:Fo.get_ACCEPT}),Object.defineProperty(Fo,"IGNORE",{get:Fo.get_IGNORE}),Object.defineProperty(Fo,"ACCEPT_ONCE",{get:Fo.get_ACCEPT_ONCE}),Object.defineProperty(Fo,"IGNORE_ONCE",{get:Fo.get_IGNORE_ONCE}),Fo.prototype.__class__=Fo;var z=nape.callbacks.PreListener=function(e,t,i,n,r,o){null==o&&(o=!1),null==r&&(r=0),this.zpp_inner_zn=null,u.call(this),this.zpp_inner_zn=new ri(je.argument(t),je.argument(i),5,3),this.zpp_inner=this.zpp_inner_zn,((this.zpp_inner.outer=this).zpp_inner_zn.outer_znp=this).zpp_inner.precedence=r,this.zpp_inner_zn.pure=o,this.zpp_inner_zn.handlerp=n;var a,s,l=this.zpp_inner_zn.itype;(1==l?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),a=Uo.InteractionType_COLLISION):2==l?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),a=Uo.InteractionType_SENSOR):4==l?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),a=Uo.InteractionType_FLUID):7==l?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),a=Uo.InteractionType_ANY):a=null,a!=e)&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),e==Uo.InteractionType_COLLISION?s=1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?s=2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),s=e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=s);var p=this.zpp_inner_zn.itype;1==p?null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1):2==p?null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1):4==p?null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1):7==p&&null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1)};z.__name__=["nape","callbacks","PreListener"],z.__super__=u,z.prototype=Object.create(u.prototype),z.prototype.zpp_inner_zn=null,z.prototype.get_options1=function(){return this.zpp_inner_zn.options1.outer},z.prototype.set_options1=function(e){return this.zpp_inner_zn.options1.set(e.zpp_inner),this.zpp_inner_zn.options1.outer},z.prototype.get_options2=function(){return this.zpp_inner_zn.options2.outer},z.prototype.set_options2=function(e){return this.zpp_inner_zn.options2.set(e.zpp_inner),this.zpp_inner_zn.options2.outer},z.prototype.get_handler=function(){return this.zpp_inner_zn.handlerp},z.prototype.set_handler=function(e){return this.zpp_inner_zn.handlerp=e,this.zpp_inner_zn.wake(),this.zpp_inner_zn.handlerp},z.prototype.get_pure=function(){return this.zpp_inner_zn.pure},z.prototype.set_pure=function(e){return e||this.zpp_inner_zn.wake(),this.zpp_inner_zn.pure=e,this.zpp_inner_zn.pure},z.prototype.get_interactionType=function(){var e=this.zpp_inner_zn.itype;return 1==e?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==e?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==e?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==e?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},z.prototype.set_interactionType=function(e){var t,i,n=this.zpp_inner_zn.itype;(1==n?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),t=Uo.InteractionType_COLLISION):2==n?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),t=Uo.InteractionType_SENSOR):4==n?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),t=Uo.InteractionType_FLUID):7==n?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),t=Uo.InteractionType_ANY):t=null,t!=e)&&(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),e==Uo.InteractionType_COLLISION?i=1:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),e==Uo.InteractionType_SENSOR?i=2:(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),i=e==Uo.InteractionType_FLUID?4:7)),this.zpp_inner_zn.itype=i);var r=this.zpp_inner_zn.itype;return 1==r?(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION):2==r?(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR):4==r?(null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID):7==r?(null==Uo.InteractionType_ANY&&(Uo.internal=!0,Uo.InteractionType_ANY=new C,Uo.internal=!1),Uo.InteractionType_ANY):null},Object.defineProperty(z.prototype,"options1",{get:z.prototype.get_options1,set:z.prototype.set_options1}),Object.defineProperty(z.prototype,"options2",{get:z.prototype.get_options2,set:z.prototype.set_options2}),Object.defineProperty(z.prototype,"handler",{get:z.prototype.get_handler,set:z.prototype.set_handler}),Object.defineProperty(z.prototype,"pure",{get:z.prototype.get_pure,set:z.prototype.set_pure}),Object.defineProperty(z.prototype,"interactionType",{get:z.prototype.get_interactionType,set:z.prototype.set_interactionType}),z.prototype.__class__=z;var te=nape.constraint.Constraint=function(){this.debugDraw=!0,this.zpp_inner.insert_cbtype(Be.ANY_CONSTRAINT.zpp_inner)};te.__name__=["nape","constraint","Constraint"],te.prototype.zpp_inner=null,te.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},te.prototype.debugDraw=null,te.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},te.prototype.set_compound=function(e){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(this),null!=e)){var t=e.zpp_inner.wrap_constraints;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},te.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},te.prototype.set_space=function(e){if((null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e)if(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),null!=this.zpp_inner.space&&this.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(this),null!=e){var t=e.zpp_inner.wrap_constraints;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}else this.zpp_inner.space=null;return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},te.prototype.get_isSleeping=function(){return this.zpp_inner.component.sleeping},te.prototype.get_active=function(){return this.zpp_inner.active},te.prototype.set_active=function(e){return this.zpp_inner.active!=e&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.woken=!1),this.zpp_inner.clearcache(),e?(this.zpp_inner.active=e,this.zpp_inner.activate(),null!=this.zpp_inner.space&&(null!=this.zpp_inner.component&&(this.zpp_inner.component.sleeping=!0),this.zpp_inner.space.wake_constraint(this.zpp_inner,!0))):(null!=this.zpp_inner.space&&(this.zpp_inner.wake(),this.zpp_inner.space.live_constraints.remove(this.zpp_inner)),this.zpp_inner.active=e,this.zpp_inner.deactivate())),this.zpp_inner.active},te.prototype.get_ignore=function(){return this.zpp_inner.ignore},te.prototype.set_ignore=function(e){return this.zpp_inner.ignore!=e&&(this.zpp_inner.ignore=e,this.zpp_inner.wake()),this.zpp_inner.ignore},te.prototype.get_stiff=function(){return this.zpp_inner.stiff},te.prototype.set_stiff=function(e){return this.zpp_inner.stiff!=e&&(this.zpp_inner.stiff=e,this.zpp_inner.wake()),this.zpp_inner.stiff},te.prototype.get_frequency=function(){return this.zpp_inner.frequency},te.prototype.set_frequency=function(e){return this.zpp_inner.frequency!=e&&(this.zpp_inner.frequency=e,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.frequency},te.prototype.get_damping=function(){return this.zpp_inner.damping},te.prototype.set_damping=function(e){return this.zpp_inner.damping!=e&&(this.zpp_inner.damping=e,this.zpp_inner.stiff||this.zpp_inner.wake()),this.zpp_inner.damping},te.prototype.get_maxForce=function(){return this.zpp_inner.maxForce},te.prototype.set_maxForce=function(e){return this.zpp_inner.maxForce!=e&&(this.zpp_inner.maxForce=e,this.zpp_inner.wake()),this.zpp_inner.maxForce},te.prototype.get_maxError=function(){return this.zpp_inner.maxError},te.prototype.set_maxError=function(e){return this.zpp_inner.maxError!=e&&(this.zpp_inner.maxError=e,this.zpp_inner.wake()),this.zpp_inner.maxError},te.prototype.get_breakUnderForce=function(){return this.zpp_inner.breakUnderForce},te.prototype.set_breakUnderForce=function(e){return this.zpp_inner.breakUnderForce!=e&&(this.zpp_inner.breakUnderForce=e,this.zpp_inner.wake()),this.zpp_inner.breakUnderForce},te.prototype.get_breakUnderError=function(){return this.zpp_inner.breakUnderError},te.prototype.set_breakUnderError=function(e){return this.zpp_inner.breakUnderError!=e&&(this.zpp_inner.breakUnderError=e,this.zpp_inner.wake()),this.zpp_inner.breakUnderError},te.prototype.get_removeOnBreak=function(){return this.zpp_inner.removeOnBreak},te.prototype.set_removeOnBreak=function(e){return this.zpp_inner.removeOnBreak=e,this.zpp_inner.removeOnBreak},te.prototype.impulse=function(){return null},te.prototype.bodyImpulse=function(e){return null},te.prototype.visitBodies=function(e){},te.prototype.get_cbTypes=function(){return null==this.zpp_inner.wrap_cbTypes&&this.zpp_inner.setupcbTypes(),this.zpp_inner.wrap_cbTypes},te.prototype.toString=function(){return"{Constraint}"},te.prototype.copy=function(){return this.zpp_inner.copy()},Object.defineProperty(te.prototype,"userData",{get:te.prototype.get_userData}),Object.defineProperty(te.prototype,"compound",{get:te.prototype.get_compound,set:te.prototype.set_compound}),Object.defineProperty(te.prototype,"space",{get:te.prototype.get_space,set:te.prototype.set_space}),Object.defineProperty(te.prototype,"isSleeping",{get:te.prototype.get_isSleeping}),Object.defineProperty(te.prototype,"active",{get:te.prototype.get_active,set:te.prototype.set_active}),Object.defineProperty(te.prototype,"ignore",{get:te.prototype.get_ignore,set:te.prototype.set_ignore}),Object.defineProperty(te.prototype,"stiff",{get:te.prototype.get_stiff,set:te.prototype.set_stiff}),Object.defineProperty(te.prototype,"frequency",{get:te.prototype.get_frequency,set:te.prototype.set_frequency}),Object.defineProperty(te.prototype,"damping",{get:te.prototype.get_damping,set:te.prototype.set_damping}),Object.defineProperty(te.prototype,"maxForce",{get:te.prototype.get_maxForce,set:te.prototype.set_maxForce}),Object.defineProperty(te.prototype,"maxError",{get:te.prototype.get_maxError,set:te.prototype.set_maxError}),Object.defineProperty(te.prototype,"breakUnderForce",{get:te.prototype.get_breakUnderForce,set:te.prototype.set_breakUnderForce}),Object.defineProperty(te.prototype,"breakUnderError",{get:te.prototype.get_breakUnderError,set:te.prototype.set_breakUnderError}),Object.defineProperty(te.prototype,"removeOnBreak",{get:te.prototype.get_removeOnBreak,set:te.prototype.set_removeOnBreak}),Object.defineProperty(te.prototype,"cbTypes",{get:te.prototype.get_cbTypes}),te.prototype.__class__=te;var g=nape.constraint.AngleJoint=function(e,t,i,n,r){null==r&&(r=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new Ue,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b2!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==t?null:t.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),this.zpp_inner_zn.jointMin!=i&&(this.zpp_inner_zn.jointMin=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),this.zpp_inner_zn.jointMax!=n&&(this.zpp_inner_zn.jointMax=n,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("AngleJoint::ratio"),this.zpp_inner_zn.ratio!=r&&(this.zpp_inner_zn.ratio=r,this.zpp_inner.wake())};g.__name__=["nape","constraint","AngleJoint"],g.__super__=te,g.prototype=Object.create(te.prototype),g.prototype.zpp_inner_zn=null,g.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},g.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},g.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},g.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},g.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},g.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},g.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},g.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},g.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},g.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("AngleJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},g.prototype.isSlack=function(){var e,t=this.zpp_inner_zn,i=t.ratio*t.b2.rot-t.b1.rot;return t.equal?(e=!1,t.scale=1):i<t.jointMin?e=!(t.scale=-1):i>t.jointMax?(i-=t.jointMax,e=!(t.scale=1)):e=!(i=t.scale=0),e},g.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},g.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get(0,0,0)},g.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(g.prototype,"body1",{get:g.prototype.get_body1,set:g.prototype.set_body1}),Object.defineProperty(g.prototype,"body2",{get:g.prototype.get_body2,set:g.prototype.set_body2}),Object.defineProperty(g.prototype,"jointMin",{get:g.prototype.get_jointMin,set:g.prototype.set_jointMin}),Object.defineProperty(g.prototype,"jointMax",{get:g.prototype.get_jointMax,set:g.prototype.set_jointMax}),Object.defineProperty(g.prototype,"ratio",{get:g.prototype.get_ratio,set:g.prototype.set_ratio}),g.prototype.__class__=g;var We=nape.constraint.ConstraintIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};We.__name__=["nape","constraint","ConstraintIterator"],We.get=function(e){var t;if(null==We.zpp_pool){fn.internal=!0;var i=new We;fn.internal=!1,t=i}else{var n=We.zpp_pool;We.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},We.prototype.zpp_inner=null,We.prototype.zpp_i=null,We.prototype.zpp_critical=null,We.prototype.zpp_next=null,We.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=We.zpp_pool,(We.zpp_pool=this).zpp_inner=null,!1)},We.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},We.prototype.__class__=We;var b=nape.constraint.ConstraintList=function(){this.zpp_inner=null,this.zpp_inner=new fn,this.zpp_inner.outer=this};b.__name__=["nape","constraint","ConstraintList"],b.fromArray=function(e){for(var t=new b,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},b.prototype.zpp_inner=null,b.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},b.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},b.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},b.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},b.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},b.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},b.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},b.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},b.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},b.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},b.prototype.empty=function(){return null==this.zpp_inner.inner.head},b.prototype.iterator=function(){return this.zpp_inner.valmod(),We.get(this)},b.prototype.copy=function(e){null==e&&(e=!1);var t=new b;this.zpp_inner.valmod();for(var i=We.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},b.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=We.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},b.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=We.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},b.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=We.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=We.zpp_pool,(We.zpp_pool=t).zpp_inner=null;break}}return this},b.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(b.prototype,"length",{get:b.prototype.get_length}),b.prototype.__class__=b;var w=nape.constraint.DistanceJoint=function(e,t,i,n,r,o){this.zpp_inner_zn=null,this.zpp_inner_zn=new ot,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var a=null==e?null:e.zpp_inner;a!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b2!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var s=null==t?null:t.zpp_inner;s!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b1!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var l=this.zpp_inner_zn.wrap_a1,p=i.zpp_inner;null!=p._validate&&p._validate();var h=i.zpp_inner.x,u=i.zpp_inner;null!=u._validate&&u._validate();var c,d=i.zpp_inner.y,_=l.zpp_inner;if(null!=_._validate&&_._validate(),l.zpp_inner.x==h){var y=l.zpp_inner;null!=y._validate&&y._validate(),c=l.zpp_inner.y==d}else c=!1;if(!c){l.zpp_inner.x=h,l.zpp_inner.y=d;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}if(i.zpp_inner.weak){var f=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=el.zpp_pool,el.zpp_pool=f}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var x=this.zpp_inner_zn.wrap_a2,v=n.zpp_inner;null!=v._validate&&v._validate();var z=n.zpp_inner.x,g=n.zpp_inner;null!=g._validate&&g._validate();var b,w=n.zpp_inner.y,S=x.zpp_inner;if(null!=S._validate&&S._validate(),x.zpp_inner.x==z){var C=x.zpp_inner;null!=C._validate&&C._validate(),b=x.zpp_inner.y==w}else b=!1;if(!b){x.zpp_inner.x=z,x.zpp_inner.y=w;var M=x.zpp_inner;null!=M._invalidate&&M._invalidate(M)}if(n.zpp_inner.weak){var P=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=P.outer&&(P.outer.zpp_inner=null,P.outer=null),P._isimmutable=null,P._validate=null,P._invalidate=null,P.next=el.zpp_pool,el.zpp_pool=P}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),this.zpp_inner_zn.jointMin!=r&&(this.zpp_inner_zn.jointMin=r,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),this.zpp_inner_zn.jointMax!=o&&(this.zpp_inner_zn.jointMax=o,this.zpp_inner.wake())};w.__name__=["nape","constraint","DistanceJoint"],w.__super__=te,w.prototype=Object.create(te.prototype),w.prototype.zpp_inner_zn=null,w.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},w.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},w.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},w.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},w.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},w.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},w.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},w.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},w.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},w.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("DistanceJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},w.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},w.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("DistanceJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},w.prototype.isSlack=function(){return this.zpp_inner_zn.slack},w.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},w.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},w.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(w.prototype,"body1",{get:w.prototype.get_body1,set:w.prototype.set_body1}),Object.defineProperty(w.prototype,"body2",{get:w.prototype.get_body2,set:w.prototype.set_body2}),Object.defineProperty(w.prototype,"anchor1",{get:w.prototype.get_anchor1,set:w.prototype.set_anchor1}),Object.defineProperty(w.prototype,"anchor2",{get:w.prototype.get_anchor2,set:w.prototype.set_anchor2}),Object.defineProperty(w.prototype,"jointMin",{get:w.prototype.get_jointMin,set:w.prototype.set_jointMin}),Object.defineProperty(w.prototype,"jointMax",{get:w.prototype.get_jointMax,set:w.prototype.set_jointMax}),w.prototype.__class__=w;var S=nape.constraint.LineJoint=function(e,t,i,n,r,o,a){this.zpp_inner_zn=null,this.zpp_inner_zn=new at,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var s=null==e?null:e.zpp_inner;s!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=s,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=s&&this.zpp_inner_zn.b2!=s&&null!=s&&s.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=s&&s.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var l=null==t?null:t.zpp_inner;l!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=l,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=l&&this.zpp_inner_zn.b1!=l&&null!=l&&l.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=l&&l.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var p=this.zpp_inner_zn.wrap_a1,h=i.zpp_inner;null!=h._validate&&h._validate();var u=i.zpp_inner.x,c=i.zpp_inner;null!=c._validate&&c._validate();var d,_=i.zpp_inner.y,y=p.zpp_inner;if(null!=y._validate&&y._validate(),p.zpp_inner.x==u){var m=p.zpp_inner;null!=m._validate&&m._validate(),d=p.zpp_inner.y==_}else d=!1;if(!d){p.zpp_inner.x=u,p.zpp_inner.y=_;var f=p.zpp_inner;null!=f._invalidate&&f._invalidate(f)}if(i.zpp_inner.weak){var x=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=el.zpp_pool,el.zpp_pool=x}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var v=this.zpp_inner_zn.wrap_a2,z=n.zpp_inner;null!=z._validate&&z._validate();var g=n.zpp_inner.x,b=n.zpp_inner;null!=b._validate&&b._validate();var w,S=n.zpp_inner.y,C=v.zpp_inner;if(null!=C._validate&&C._validate(),v.zpp_inner.x==g){var M=v.zpp_inner;null!=M._validate&&M._validate(),w=v.zpp_inner.y==S}else w=!1;if(!w){v.zpp_inner.x=g,v.zpp_inner.y=S;var P=v.zpp_inner;null!=P._invalidate&&P._invalidate(P)}if(n.zpp_inner.weak){var k=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=k.outer&&(k.outer.zpp_inner=null,k.outer=null),k._isimmutable=null,k._validate=null,k._invalidate=null,k.next=el.zpp_pool,el.zpp_pool=k}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var T=this.zpp_inner_zn.wrap_n,O=r.zpp_inner;null!=O._validate&&O._validate();var A=r.zpp_inner.x,E=r.zpp_inner;null!=E._validate&&E._validate();var G,I=r.zpp_inner.y,B=T.zpp_inner;if(null!=B._validate&&B._validate(),T.zpp_inner.x==A){var L=T.zpp_inner;null!=L._validate&&L._validate(),G=T.zpp_inner.y==I}else G=!1;if(!G){T.zpp_inner.x=A,T.zpp_inner.y=I;var D=T.zpp_inner;null!=D._invalidate&&D._invalidate(D)}if(r.zpp_inner.weak){var R=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=R.outer&&(R.outer.zpp_inner=null,R.outer=null),R._isimmutable=null,R._validate=null,R._invalidate=null,R.next=el.zpp_pool,el.zpp_pool=R}null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner.immutable_midstep("LineJoint::jointMin"),this.zpp_inner_zn.jointMin!=o&&(this.zpp_inner_zn.jointMin=o,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("LineJoint::jointMax"),this.zpp_inner_zn.jointMax!=a&&(this.zpp_inner_zn.jointMax=a,this.zpp_inner.wake())};S.__name__=["nape","constraint","LineJoint"],S.__super__=te,S.prototype=Object.create(te.prototype),S.prototype.zpp_inner_zn=null,S.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},S.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},S.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},S.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},S.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},S.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},S.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},S.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},S.prototype.get_direction=function(){return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},S.prototype.set_direction=function(e){null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n();var t=this.zpp_inner_zn.wrap_n,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_n&&this.zpp_inner_zn.setup_n(),this.zpp_inner_zn.wrap_n},S.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},S.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("LineJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},S.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},S.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("LineJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},S.prototype.impulse=function(){var e=new X(2,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e},S.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},S.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(S.prototype,"body1",{get:S.prototype.get_body1,set:S.prototype.set_body1}),Object.defineProperty(S.prototype,"body2",{get:S.prototype.get_body2,set:S.prototype.set_body2}),Object.defineProperty(S.prototype,"anchor1",{get:S.prototype.get_anchor1,set:S.prototype.set_anchor1}),Object.defineProperty(S.prototype,"anchor2",{get:S.prototype.get_anchor2,set:S.prototype.set_anchor2}),Object.defineProperty(S.prototype,"direction",{get:S.prototype.get_direction,set:S.prototype.set_direction}),Object.defineProperty(S.prototype,"jointMin",{get:S.prototype.get_jointMin,set:S.prototype.set_jointMin}),Object.defineProperty(S.prototype,"jointMax",{get:S.prototype.get_jointMax,set:S.prototype.set_jointMax}),S.prototype.__class__=S;var M=nape.constraint.MotorJoint=function(e,t,i,n){null==n&&(n=1),null==i&&(i=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new st,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==e?null:e.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==t?null:t.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("MotorJoint::rate"),this.zpp_inner_zn.rate!=i&&(this.zpp_inner_zn.rate=i,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("MotorJoint::ratio"),this.zpp_inner_zn.ratio!=n&&(this.zpp_inner_zn.ratio=n,this.zpp_inner.wake())};M.__name__=["nape","constraint","MotorJoint"],M.__super__=te,M.prototype=Object.create(te.prototype),M.prototype.zpp_inner_zn=null,M.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},M.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},M.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},M.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},M.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},M.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("MotorJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},M.prototype.get_rate=function(){return this.zpp_inner_zn.rate},M.prototype.set_rate=function(e){return this.zpp_inner.immutable_midstep("MotorJoint::rate"),this.zpp_inner_zn.rate!=e&&(this.zpp_inner_zn.rate=e,this.zpp_inner.wake()),this.zpp_inner_zn.rate},M.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},M.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},M.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(M.prototype,"body1",{get:M.prototype.get_body1,set:M.prototype.set_body1}),Object.defineProperty(M.prototype,"body2",{get:M.prototype.get_body2,set:M.prototype.set_body2}),Object.defineProperty(M.prototype,"ratio",{get:M.prototype.get_ratio,set:M.prototype.set_ratio}),Object.defineProperty(M.prototype,"rate",{get:M.prototype.get_rate,set:M.prototype.set_rate}),M.prototype.__class__=M;var P=nape.constraint.PivotJoint=function(e,t,i,n){this.zpp_inner_zn=null,this.zpp_inner_zn=new lt,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var r=null==e?null:e.zpp_inner;r!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=r,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=r&&this.zpp_inner_zn.b2!=r&&null!=r&&r.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=r&&r.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var o=null==t?null:t.zpp_inner;o!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b1!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var a=this.zpp_inner_zn.wrap_a1,s=i.zpp_inner;null!=s._validate&&s._validate();var l=i.zpp_inner.x,p=i.zpp_inner;null!=p._validate&&p._validate();var h,u=i.zpp_inner.y,c=a.zpp_inner;if(null!=c._validate&&c._validate(),a.zpp_inner.x==l){var d=a.zpp_inner;null!=d._validate&&d._validate(),h=a.zpp_inner.y==u}else h=!1;if(!h){a.zpp_inner.x=l,a.zpp_inner.y=u;var _=a.zpp_inner;null!=_._invalidate&&_._invalidate(_)}if(i.zpp_inner.weak){var y=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=el.zpp_pool,el.zpp_pool=y}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var m=this.zpp_inner_zn.wrap_a2,f=n.zpp_inner;null!=f._validate&&f._validate();var x=n.zpp_inner.x,v=n.zpp_inner;null!=v._validate&&v._validate();var z,g=n.zpp_inner.y,b=m.zpp_inner;if(null!=b._validate&&b._validate(),m.zpp_inner.x==x){var w=m.zpp_inner;null!=w._validate&&w._validate(),z=m.zpp_inner.y==g}else z=!1;if(!z){m.zpp_inner.x=x,m.zpp_inner.y=g;var S=m.zpp_inner;null!=S._invalidate&&S._invalidate(S)}if(n.zpp_inner.weak){var C=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null),C._isimmutable=null,C._validate=null,C._invalidate=null,C.next=el.zpp_pool,el.zpp_pool=C}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2()};P.__name__=["nape","constraint","PivotJoint"],P.__super__=te,P.prototype=Object.create(te.prototype),P.prototype.zpp_inner_zn=null,P.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},P.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},P.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},P.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},P.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},P.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},P.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},P.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},P.prototype.impulse=function(){var e=new X(2,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e},P.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},P.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(P.prototype,"body1",{get:P.prototype.get_body1,set:P.prototype.set_body1}),Object.defineProperty(P.prototype,"body2",{get:P.prototype.get_body2,set:P.prototype.set_body2}),Object.defineProperty(P.prototype,"anchor1",{get:P.prototype.get_anchor1,set:P.prototype.set_anchor1}),Object.defineProperty(P.prototype,"anchor2",{get:P.prototype.get_anchor2,set:P.prototype.set_anchor2}),P.prototype.__class__=P;var k=nape.constraint.PulleyJoint=function(e,t,i,n,r,o,a,s,l,p,h){null==h&&(h=1),this.zpp_inner_zn=null,this.zpp_inner_zn=new ct,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var u=null==e?null:e.zpp_inner;u!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=u,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=u&&this.zpp_inner_zn.b2!=u&&this.zpp_inner_zn.b3!=u&&this.zpp_inner_zn.b4!=u&&null!=u&&u.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=u&&u.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var c=null==t?null:t.zpp_inner;c!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=c,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=c&&this.zpp_inner_zn.b1!=c&&this.zpp_inner_zn.b3!=c&&this.zpp_inner_zn.b4!=c&&null!=c&&c.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=c&&c.wake())),this.zpp_inner.immutable_midstep("Constraint::body3");var d=null==i?null:i.zpp_inner;d!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=d,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=d&&this.zpp_inner_zn.b1!=d&&this.zpp_inner_zn.b2!=d&&this.zpp_inner_zn.b4!=d&&null!=d&&d.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=d&&d.wake())),this.zpp_inner.immutable_midstep("Constraint::body4");var _=null==n?null:n.zpp_inner;_!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=_,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=_&&this.zpp_inner_zn.b1!=_&&this.zpp_inner_zn.b2!=_&&this.zpp_inner_zn.b3!=_&&null!=_&&_.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=_&&_.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var y=this.zpp_inner_zn.wrap_a1,m=r.zpp_inner;null!=m._validate&&m._validate();var f=r.zpp_inner.x,x=r.zpp_inner;null!=x._validate&&x._validate();var v,z=r.zpp_inner.y,g=y.zpp_inner;if(null!=g._validate&&g._validate(),y.zpp_inner.x==f){var b=y.zpp_inner;null!=b._validate&&b._validate(),v=y.zpp_inner.y==z}else v=!1;if(!v){y.zpp_inner.x=f,y.zpp_inner.y=z;var w=y.zpp_inner;null!=w._invalidate&&w._invalidate(w)}if(r.zpp_inner.weak){var S=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=S.outer&&(S.outer.zpp_inner=null,S.outer=null),S._isimmutable=null,S._validate=null,S._invalidate=null,S.next=el.zpp_pool,el.zpp_pool=S}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var C=this.zpp_inner_zn.wrap_a2,M=o.zpp_inner;null!=M._validate&&M._validate();var P=o.zpp_inner.x,k=o.zpp_inner;null!=k._validate&&k._validate();var T,O=o.zpp_inner.y,A=C.zpp_inner;if(null!=A._validate&&A._validate(),C.zpp_inner.x==P){var E=C.zpp_inner;null!=E._validate&&E._validate(),T=C.zpp_inner.y==O}else T=!1;if(!T){C.zpp_inner.x=P,C.zpp_inner.y=O;var G=C.zpp_inner;null!=G._invalidate&&G._invalidate(G)}if(o.zpp_inner.weak){var I=o.zpp_inner;o.zpp_inner.outer=null,o.zpp_inner=null,o.zpp_pool=jn.poolVec2,jn.poolVec2=o,null!=I.outer&&(I.outer.zpp_inner=null,I.outer=null),I._isimmutable=null,I._validate=null,I._invalidate=null,I.next=el.zpp_pool,el.zpp_pool=I}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var B=this.zpp_inner_zn.wrap_a3,L=a.zpp_inner;null!=L._validate&&L._validate();var D=a.zpp_inner.x,R=a.zpp_inner;null!=R._validate&&R._validate();var F,j=a.zpp_inner.y,N=B.zpp_inner;if(null!=N._validate&&N._validate(),B.zpp_inner.x==D){var U=B.zpp_inner;null!=U._validate&&U._validate(),F=B.zpp_inner.y==j}else F=!1;if(!F){B.zpp_inner.x=D,B.zpp_inner.y=j;var V=B.zpp_inner;null!=V._invalidate&&V._invalidate(V)}if(a.zpp_inner.weak){var H=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,a.zpp_pool=jn.poolVec2,jn.poolVec2=a,null!=H.outer&&(H.outer.zpp_inner=null,H.outer=null),H._isimmutable=null,H._validate=null,H._invalidate=null,H.next=el.zpp_pool,el.zpp_pool=H}null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var W=this.zpp_inner_zn.wrap_a4,X=s.zpp_inner;null!=X._validate&&X._validate();var q=s.zpp_inner.x,Y=s.zpp_inner;null!=Y._validate&&Y._validate();var K,Z=s.zpp_inner.y,J=W.zpp_inner;if(null!=J._validate&&J._validate(),W.zpp_inner.x==q){var Q=W.zpp_inner;null!=Q._validate&&Q._validate(),K=W.zpp_inner.y==Z}else K=!1;if(!K){W.zpp_inner.x=q,W.zpp_inner.y=Z;var $=W.zpp_inner;null!=$._invalidate&&$._invalidate($)}if(s.zpp_inner.weak){var ee=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=ee.outer&&(ee.outer.zpp_inner=null,ee.outer=null),ee._isimmutable=null,ee._validate=null,ee._invalidate=null,ee.next=el.zpp_pool,el.zpp_pool=ee}null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),this.zpp_inner_zn.ratio!=h&&(this.zpp_inner_zn.ratio=h,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),this.zpp_inner_zn.jointMin!=l&&(this.zpp_inner_zn.jointMin=l,this.zpp_inner.wake()),this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),this.zpp_inner_zn.jointMax!=p&&(this.zpp_inner_zn.jointMax=p,this.zpp_inner.wake())};k.__name__=["nape","constraint","PulleyJoint"],k.__super__=te,k.prototype=Object.create(te.prototype),k.prototype.zpp_inner_zn=null,k.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},k.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},k.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},k.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b3!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},k.prototype.get_body3=function(){return null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},k.prototype.set_body3=function(e){this.zpp_inner.immutable_midstep("Constraint::body3");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b3&&(null!=this.zpp_inner_zn.b3&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b4!=this.zpp_inner_zn.b3&&null!=this.zpp_inner_zn.b3&&this.zpp_inner_zn.b3.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b3.wake()),this.zpp_inner_zn.b3=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b4!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer},k.prototype.get_body4=function(){return null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},k.prototype.set_body4=function(e){this.zpp_inner.immutable_midstep("Constraint::body4");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b4&&(null!=this.zpp_inner_zn.b4&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b3!=this.zpp_inner_zn.b4&&null!=this.zpp_inner_zn.b4&&this.zpp_inner_zn.b4.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b4.wake()),this.zpp_inner_zn.b4=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&this.zpp_inner_zn.b2!=t&&this.zpp_inner_zn.b3!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer},k.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},k.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},k.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},k.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},k.prototype.get_anchor3=function(){return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},k.prototype.set_anchor3=function(e){null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3();var t=this.zpp_inner_zn.wrap_a3,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a3&&this.zpp_inner_zn.setup_a3(),this.zpp_inner_zn.wrap_a3},k.prototype.get_anchor4=function(){return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},k.prototype.set_anchor4=function(e){null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4();var t=this.zpp_inner_zn.wrap_a4,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a4&&this.zpp_inner_zn.setup_a4(),this.zpp_inner_zn.wrap_a4},k.prototype.get_jointMin=function(){return this.zpp_inner_zn.jointMin},k.prototype.set_jointMin=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::jointMin"),this.zpp_inner_zn.jointMin!=e&&(this.zpp_inner_zn.jointMin=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMin},k.prototype.get_jointMax=function(){return this.zpp_inner_zn.jointMax},k.prototype.set_jointMax=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::jointMax"),this.zpp_inner_zn.jointMax!=e&&(this.zpp_inner_zn.jointMax=e,this.zpp_inner.wake()),this.zpp_inner_zn.jointMax},k.prototype.get_ratio=function(){return this.zpp_inner_zn.ratio},k.prototype.set_ratio=function(e){return this.zpp_inner.immutable_midstep("PulleyJoint::ratio"),this.zpp_inner_zn.ratio!=e&&(this.zpp_inner_zn.ratio=e,this.zpp_inner.wake()),this.zpp_inner_zn.ratio},k.prototype.isSlack=function(){return this.zpp_inner_zn.slack},k.prototype.impulse=function(){var e=new X(1,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAcc,e},k.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},k.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer),null!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&e(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer),null!=(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)!=(null==this.zpp_inner_zn.b3?null:this.zpp_inner_zn.b3.outer)&&e(null==this.zpp_inner_zn.b4?null:this.zpp_inner_zn.b4.outer)},Object.defineProperty(k.prototype,"body1",{get:k.prototype.get_body1,set:k.prototype.set_body1}),Object.defineProperty(k.prototype,"body2",{get:k.prototype.get_body2,set:k.prototype.set_body2}),Object.defineProperty(k.prototype,"body3",{get:k.prototype.get_body3,set:k.prototype.set_body3}),Object.defineProperty(k.prototype,"body4",{get:k.prototype.get_body4,set:k.prototype.set_body4}),Object.defineProperty(k.prototype,"anchor1",{get:k.prototype.get_anchor1,set:k.prototype.set_anchor1}),Object.defineProperty(k.prototype,"anchor2",{get:k.prototype.get_anchor2,set:k.prototype.set_anchor2}),Object.defineProperty(k.prototype,"anchor3",{get:k.prototype.get_anchor3,set:k.prototype.set_anchor3}),Object.defineProperty(k.prototype,"anchor4",{get:k.prototype.get_anchor4,set:k.prototype.set_anchor4}),Object.defineProperty(k.prototype,"jointMin",{get:k.prototype.get_jointMin,set:k.prototype.set_jointMin}),Object.defineProperty(k.prototype,"jointMax",{get:k.prototype.get_jointMax,set:k.prototype.set_jointMax}),Object.defineProperty(k.prototype,"ratio",{get:k.prototype.get_ratio,set:k.prototype.set_ratio}),k.prototype.__class__=k;var T=nape.constraint.UserConstraint=function(e,t){null==t&&(t=!1),this.zpp_inner_zn=null,this.zpp_inner_zn=new dt(e,t),this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this)};T.__name__=["nape","constraint","UserConstraint"],T.__super__=te,T.prototype=Object.create(te.prototype),T.prototype.zpp_inner_zn=null,T.prototype.__bindVec2=function(){var e=new ht;return e.zpp_inner._inuse=!0,e.zpp_inner._invalidate=$(c=this.zpp_inner_zn,c.bindVec2_invalidate),e},T.prototype.__copy=function(){return null},T.prototype.__broken=function(){},T.prototype.__validate=function(){},T.prototype.__draw=function(e){},T.prototype.__prepare=function(){},T.prototype.__position=function(e){},T.prototype.__velocity=function(e){},T.prototype.__eff_mass=function(e){},T.prototype.__clamp=function(e){},T.prototype.__impulse=function(e,t,i){},T.prototype.impulse=function(){for(var e=new X(this.zpp_inner_zn.dim,1),t=0,i=this.zpp_inner_zn.dim;t<i;){var n=t++;e.zpp_inner.x[n*e.zpp_inner.n]=this.zpp_inner_zn.jAcc[n]}return e},T.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},T.prototype.visitBodies=function(e){for(var t=0,i=this.zpp_inner_zn.bodies.length;t<i;){var n=this.zpp_inner_zn.bodies[t];if(null!=n.body){for(var r=!1,o=t+1;o<i;)if(this.zpp_inner_zn.bodies[o++].body==n.body){r=!0;break}r||e(n.body.outer)}++t}},T.prototype.__invalidate=function(){this.zpp_inner.immutable_midstep("UserConstraint::invalidate()"),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner.wake()},T.prototype.__registerBody=function(e,t){return this.zpp_inner.immutable_midstep("UserConstraint::registerBody(..)"),e!=t&&(null!=e&&(this.zpp_inner_zn.remBody(e.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&e.zpp_inner.wake()),null!=t&&this.zpp_inner_zn.addBody(t.zpp_inner),this.zpp_inner.wake(),null!=t&&t.zpp_inner.wake()),t},T.prototype.__class__=T;var O=nape.constraint.WeldJoint=function(e,t,i,n,r){null==r&&(r=0),this.zpp_inner_zn=null,this.zpp_inner_zn=new yt,this.zpp_inner=this.zpp_inner_zn,(this.zpp_inner.outer=this).zpp_inner_zn.outer_zn=this,te.call(this),this.zpp_inner.immutable_midstep("Constraint::body1");var o=null==e?null:e.zpp_inner;o!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=o,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=o&&this.zpp_inner_zn.b2!=o&&null!=o&&o.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=o&&o.wake())),this.zpp_inner.immutable_midstep("Constraint::body2");var a=null==t?null:t.zpp_inner;a!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=a,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=a&&this.zpp_inner_zn.b1!=a&&null!=a&&a.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=a&&a.wake())),null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var s=this.zpp_inner_zn.wrap_a1,l=i.zpp_inner;null!=l._validate&&l._validate();var p=i.zpp_inner.x,h=i.zpp_inner;null!=h._validate&&h._validate();var u,c=i.zpp_inner.y,d=s.zpp_inner;if(null!=d._validate&&d._validate(),s.zpp_inner.x==p){var _=s.zpp_inner;null!=_._validate&&_._validate(),u=s.zpp_inner.y==c}else u=!1;if(!u){s.zpp_inner.x=p,s.zpp_inner.y=c;var y=s.zpp_inner;null!=y._invalidate&&y._invalidate(y)}if(i.zpp_inner.weak){var m=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=el.zpp_pool,el.zpp_pool=m}null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var f=this.zpp_inner_zn.wrap_a2,x=n.zpp_inner;null!=x._validate&&x._validate();var v=n.zpp_inner.x,z=n.zpp_inner;null!=z._validate&&z._validate();var g,b=n.zpp_inner.y,w=f.zpp_inner;if(null!=w._validate&&w._validate(),f.zpp_inner.x==v){var S=f.zpp_inner;null!=S._validate&&S._validate(),g=f.zpp_inner.y==b}else g=!1;if(!g){f.zpp_inner.x=v,f.zpp_inner.y=b;var C=f.zpp_inner;null!=C._invalidate&&C._invalidate(C)}if(n.zpp_inner.weak){var M=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=M.outer&&(M.outer.zpp_inner=null,M.outer=null),M._isimmutable=null,M._validate=null,M._invalidate=null,M.next=el.zpp_pool,el.zpp_pool=M}null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner.immutable_midstep("WeldJoint::phase"),this.zpp_inner_zn.phase!=r&&(this.zpp_inner_zn.phase=r,this.zpp_inner.wake())};O.__name__=["nape","constraint","WeldJoint"],O.__super__=te,O.prototype=Object.create(te.prototype),O.prototype.zpp_inner_zn=null,O.prototype.get_body1=function(){return null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},O.prototype.set_body1=function(e){this.zpp_inner.immutable_midstep("Constraint::body1");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b1&&(null!=this.zpp_inner_zn.b1&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2!=this.zpp_inner_zn.b1&&null!=this.zpp_inner_zn.b1&&this.zpp_inner_zn.b1.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1.wake()),this.zpp_inner_zn.b1=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b2!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer},O.prototype.get_body2=function(){return null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},O.prototype.set_body2=function(e){this.zpp_inner.immutable_midstep("Constraint::body2");var t=null==e?null:e.zpp_inner;return t!=this.zpp_inner_zn.b2&&(null!=this.zpp_inner_zn.b2&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b1!=this.zpp_inner_zn.b2&&null!=this.zpp_inner_zn.b2&&this.zpp_inner_zn.b2.constraints.remove(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&this.zpp_inner_zn.b2.wake()),this.zpp_inner_zn.b2=t,null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&null!=t&&this.zpp_inner_zn.b1!=t&&null!=t&&t.constraints.add(this.zpp_inner),this.zpp_inner.active&&null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.wake(),null!=t&&t.wake())),null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer},O.prototype.get_anchor1=function(){return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},O.prototype.set_anchor1=function(e){null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1();var t=this.zpp_inner_zn.wrap_a1,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a1&&this.zpp_inner_zn.setup_a1(),this.zpp_inner_zn.wrap_a1},O.prototype.get_anchor2=function(){return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},O.prototype.set_anchor2=function(e){null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2();var t=this.zpp_inner_zn.wrap_a2,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner_zn.wrap_a2&&this.zpp_inner_zn.setup_a2(),this.zpp_inner_zn.wrap_a2},O.prototype.get_phase=function(){return this.zpp_inner_zn.phase},O.prototype.set_phase=function(e){return this.zpp_inner.immutable_midstep("WeldJoint::phase"),this.zpp_inner_zn.phase!=e&&(this.zpp_inner_zn.phase=e,this.zpp_inner.wake()),this.zpp_inner_zn.phase},O.prototype.impulse=function(){var e=new X(3,1);return e.zpp_inner.x[0*e.zpp_inner.n]=this.zpp_inner_zn.jAccx,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccy,e.zpp_inner.x[e.zpp_inner.n]=this.zpp_inner_zn.jAccz,e},O.prototype.bodyImpulse=function(e){return this.zpp_inner.active?this.zpp_inner_zn.bodyImpulse(e.zpp_inner):Z.get()},O.prototype.visitBodies=function(e){null!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer),null!=(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)&&(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)!=(null==this.zpp_inner_zn.b1?null:this.zpp_inner_zn.b1.outer)&&e(null==this.zpp_inner_zn.b2?null:this.zpp_inner_zn.b2.outer)},Object.defineProperty(O.prototype,"body1",{get:O.prototype.get_body1,set:O.prototype.set_body1}),Object.defineProperty(O.prototype,"body2",{get:O.prototype.get_body2,set:O.prototype.set_body2}),Object.defineProperty(O.prototype,"anchor1",{get:O.prototype.get_anchor1,set:O.prototype.set_anchor1}),Object.defineProperty(O.prototype,"anchor2",{get:O.prototype.get_anchor2,set:O.prototype.set_anchor2}),Object.defineProperty(O.prototype,"phase",{get:O.prototype.get_phase,set:O.prototype.set_phase}),O.prototype.__class__=O;var A=nape.dynamics.Arbiter=function(){this.zpp_inner=null};A.__name__=["nape","dynamics","Arbiter"],A.prototype.zpp_inner=null,A.prototype.get_isSleeping=function(){return this.zpp_inner.sleeping},A.prototype.get_type=function(){return pn.types[this.zpp_inner.type]},A.prototype.isCollisionArbiter=function(){return this.zpp_inner.type==pn.COL},A.prototype.isFluidArbiter=function(){return this.zpp_inner.type==pn.FLUID},A.prototype.isSensorArbiter=function(){return this.zpp_inner.type==pn.SENSOR},A.prototype.get_collisionArbiter=function(){return this.zpp_inner.type==pn.COL?this.zpp_inner.colarb.outer_zn:null},A.prototype.get_fluidArbiter=function(){return this.zpp_inner.type==pn.FLUID?this.zpp_inner.fluidarb.outer_zn:null},A.prototype.get_shape1=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer},A.prototype.get_shape2=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer},A.prototype.get_body1=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b2.outer:this.zpp_inner.b1.outer},A.prototype.get_body2=function(){return this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.b1.outer:this.zpp_inner.b2.outer},A.prototype.get_state=function(){var e=this.zpp_inner.immState;return 5==e?(null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT):1==e?(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_ACCEPT_ONCE):6==e?(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE):(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),Uo.PreFlag_IGNORE_ONCE)},A.prototype.totalImpulse=function(e,t){return null==t&&(t=!1),Z.get(0,0,0)},A.prototype.toString=function(){var e=this.zpp_inner.type==pn.COL?"CollisionArbiter":this.zpp_inner.type==pn.FLUID?"FluidArbiter":"SensorArbiter";if(this.zpp_inner.cleared)return e+"(object-pooled)";var t,i=e+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==pn.COL?"["+["SD","DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-",n=this.zpp_inner.immState;return 5==n?(null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),t=Uo.PreFlag_ACCEPT):1==n?(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),t=Uo.PreFlag_ACCEPT_ONCE):6==n?(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),t=Uo.PreFlag_IGNORE):(null==Uo.PreFlag_IGNORE_ONCE&&(Uo.internal=!0,Uo.PreFlag_IGNORE_ONCE=new Fo,Uo.internal=!1),t=Uo.PreFlag_IGNORE_ONCE),i+t.toString()},Object.defineProperty(A.prototype,"isSleeping",{get:A.prototype.get_isSleeping}),Object.defineProperty(A.prototype,"type",{get:A.prototype.get_type}),Object.defineProperty(A.prototype,"collisionArbiter",{get:A.prototype.get_collisionArbiter}),Object.defineProperty(A.prototype,"fluidArbiter",{get:A.prototype.get_fluidArbiter}),Object.defineProperty(A.prototype,"shape1",{get:A.prototype.get_shape1}),Object.defineProperty(A.prototype,"shape2",{get:A.prototype.get_shape2}),Object.defineProperty(A.prototype,"body1",{get:A.prototype.get_body1}),Object.defineProperty(A.prototype,"body2",{get:A.prototype.get_body2}),Object.defineProperty(A.prototype,"state",{get:A.prototype.get_state}),A.prototype.__class__=A;var Xe=nape.dynamics.ArbiterIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Xe.__name__=["nape","dynamics","ArbiterIterator"],Xe.get=function(e){var t;if(null==Xe.zpp_pool){Dn.internal=!0;var i=new Xe;Dn.internal=!1,t=i}else{var n=Xe.zpp_pool;Xe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Xe.prototype.zpp_inner=null,Xe.prototype.zpp_i=null,Xe.prototype.zpp_critical=null,Xe.prototype.zpp_next=null,Xe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=this).zpp_inner=null,!1)},Xe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Xe.prototype.__class__=Xe;var E=nape.dynamics.ArbiterList=function(){this.zpp_inner=null,this.zpp_inner=new Dn,this.zpp_inner.outer=this};E.__name__=["nape","dynamics","ArbiterList"],E.fromArray=function(e){for(var t=new E,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},E.prototype.zpp_inner=null,E.prototype.get_length=function(){return this.zpp_gl()},E.prototype.zpp_gl=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.head;null!=e;)e.elt.active&&this.zpp_inner.user_length++,e=e.next}return this.zpp_inner.user_length},E.prototype.zpp_vm=function(){this.zpp_inner.valmod()},E.prototype.has=function(e){return this.zpp_vm(),this.zpp_inner.inner.has(e.zpp_inner)},E.prototype.at=function(e){if(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;for(;this.zpp_inner.at_index!=e;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},E.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(e.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},E.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)):this.zpp_inner.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},E.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var i=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},E.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2),i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},E.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},E.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},E.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},E.prototype.empty=function(){return 0==this.zpp_gl()},E.prototype.iterator=function(){return this.zpp_vm(),Xe.get(this)},E.prototype.copy=function(e){null==e&&(e=!1);for(var t=new E,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n,r=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,i.zpp_i<r?n=!0:(i.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=i).zpp_inner=null,n=!1),!n)break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t.push(e?null:o)}return t},E.prototype.merge=function(e){for(var t=e.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,n=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<n?i=!0:(t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null,i=!1),!i)break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||this.add(r)}},E.prototype.toString=function(){for(var e="[",t=!0,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n,r=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,i.zpp_i<r?n=!0:(i.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=i).zpp_inner=null,n=!1),!n)break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},E.prototype.foreach=function(e){for(var t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,n=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<n?i=!0:(t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null,i=!1),!i)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=t).zpp_inner=null;break}}return this},E.prototype.filter=function(e){for(var t=0;t<this.zpp_gl();){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(E.prototype,"length",{get:E.prototype.get_length}),E.prototype.__class__=E;var G=nape.dynamics.ArbiterType=function(){};G.__name__=["nape","dynamics","ArbiterType"],G.COLLISION=null,G.get_COLLISION=function(){return null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new G,Uo.internal=!1),Uo.ArbiterType_COLLISION},G.SENSOR=null,G.get_SENSOR=function(){return null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new G,Uo.internal=!1),Uo.ArbiterType_SENSOR},G.FLUID=null,G.get_FLUID=function(){return null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new G,Uo.internal=!1),Uo.ArbiterType_FLUID},G.prototype.toString=function(){return null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new G,Uo.internal=!1),this==Uo.ArbiterType_COLLISION?"COLLISION":(null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new G,Uo.internal=!1),this==Uo.ArbiterType_SENSOR?"SENSOR":(null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new G,Uo.internal=!1),this==Uo.ArbiterType_FLUID?"FLUID":""))},Object.defineProperty(G,"COLLISION",{get:G.get_COLLISION}),Object.defineProperty(G,"SENSOR",{get:G.get_SENSOR}),Object.defineProperty(G,"FLUID",{get:G.get_FLUID}),G.prototype.__class__=G;var I=nape.dynamics.CollisionArbiter=function(){A.call(this)};I.__name__=["nape","dynamics","CollisionArbiter"],I.__super__=A,I.prototype=Object.create(A.prototype),I.prototype.get_contacts=function(){return null==this.zpp_inner.colarb.wrap_contacts&&this.zpp_inner.colarb.setupcontacts(),this.zpp_inner.colarb.wrap_contacts},I.prototype.get_normal=function(){return null==this.zpp_inner.colarb.wrap_normal&&this.zpp_inner.colarb.getnormal(),this.zpp_inner.colarb.wrap_normal},I.prototype.get_radius=function(){return this.zpp_inner.colarb.radius},I.prototype.get_referenceEdge1=function(){var e=this.zpp_inner.colarb.__ref_edge1;return null==e||1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner.type&&(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).zpp_inner==e.polygon||(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},I.prototype.get_referenceEdge2=function(){var e=this.zpp_inner.colarb.__ref_edge1;return null==e||1==(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner.type&&(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).zpp_inner==e.polygon||(e=this.zpp_inner.colarb.__ref_edge2),null==e?null:e.wrapper()},I.prototype.firstVertex=function(){return null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2)&&-1==this.zpp_inner.colarb.__ref_vertex},I.prototype.secondVertex=function(){return null!=this.zpp_inner.colarb.__ref_edge1!=(null!=this.zpp_inner.colarb.__ref_edge2)&&1==this.zpp_inner.colarb.__ref_vertex},I.prototype.normalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().normalImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var l=a.zpp_inner;null!=l._validate&&l._validate(),n+=a.zpp_inner.y;var p=a.zpp_inner;null!=p._validate&&p._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().normalImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var c=h.zpp_inner;null!=c._validate&&c._validate(),n+=h.zpp_inner.y;var d=h.zpp_inner;null!=d._validate&&d._validate(),r+=h.zpp_inner.z,h.dispose()}return Z.get(i,n,r)},I.prototype.tangentImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().tangentImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var l=a.zpp_inner;null!=l._validate&&l._validate(),n+=a.zpp_inner.y;var p=a.zpp_inner;null!=p._validate&&p._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().tangentImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var c=h.zpp_inner;null!=c._validate&&c._validate(),n+=h.zpp_inner.y;var d=h.zpp_inner;null!=d._validate&&d._validate(),r+=h.zpp_inner.z,h.dispose()}return Z.get(i,n,r)},I.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0,o=this.zpp_inner.colarb;if(!t||o.oc1.fresh){var a=o.oc1.wrapper().totalImpulse(e),s=a.zpp_inner;null!=s._validate&&s._validate(),i+=a.zpp_inner.x;var l=a.zpp_inner;null!=l._validate&&l._validate(),n+=a.zpp_inner.y;var p=a.zpp_inner;null!=p._validate&&p._validate(),r+=a.zpp_inner.z,a.dispose()}if(o.hc2&&(!t||o.oc2.fresh)){var h=o.oc2.wrapper().totalImpulse(e),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var c=h.zpp_inner;null!=c._validate&&c._validate(),n+=h.zpp_inner.y;var d=h.zpp_inner;null!=d._validate&&d._validate(),r+=h.zpp_inner.z,h.dispose()}return Z.get(i,n,r)},I.prototype.rollingImpulse=function(e,t){null==t&&(t=!1);var i=this.zpp_inner.colarb;return!t||i.oc1.fresh?i.oc1.wrapper().rollingImpulse(e):0},I.prototype.get_elasticity=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.restitution},I.prototype.set_elasticity=function(e){var t=this.zpp_inner.colarb;t.restitution=e,t.userdef_restitution=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.restitution},I.prototype.get_dynamicFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.dyn_fric},I.prototype.set_dynamicFriction=function(e){var t=this.zpp_inner.colarb;t.dyn_fric=e,t.userdef_dyn_fric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.dyn_fric},I.prototype.get_staticFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.stat_fric},I.prototype.set_staticFriction=function(e){var t=this.zpp_inner.colarb;t.stat_fric=e,t.userdef_stat_fric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.stat_fric},I.prototype.get_rollingFriction=function(){var e=this.zpp_inner.colarb;return e.invalidated&&(e.invalidated=!1,e.userdef_restitution||(e.s1.material.elasticity<=-1/0||e.s2.material.elasticity<=-1/0?e.restitution=0:e.s1.material.elasticity>=1/0||e.s2.material.elasticity>=1/0?e.restitution=1:e.restitution=(e.s1.material.elasticity+e.s2.material.elasticity)/2,e.restitution<0&&(e.restitution=0),1<e.restitution&&(e.restitution=1)),e.userdef_dyn_fric||(e.dyn_fric=Math.sqrt(e.s1.material.dynamicFriction*e.s2.material.dynamicFriction)),e.userdef_stat_fric||(e.stat_fric=Math.sqrt(e.s1.material.staticFriction*e.s2.material.staticFriction)),e.userdef_rfric||(e.rfric=Math.sqrt(e.s1.material.rollingFriction*e.s2.material.rollingFriction))),e.rfric},I.prototype.set_rollingFriction=function(e){var t=this.zpp_inner.colarb;t.rfric=e,t.userdef_rfric=!0;var i=this.zpp_inner.colarb;return i.invalidated&&(i.invalidated=!1,i.userdef_restitution||(i.s1.material.elasticity<=-1/0||i.s2.material.elasticity<=-1/0?i.restitution=0:i.s1.material.elasticity>=1/0||i.s2.material.elasticity>=1/0?i.restitution=1:i.restitution=(i.s1.material.elasticity+i.s2.material.elasticity)/2,i.restitution<0&&(i.restitution=0),1<i.restitution&&(i.restitution=1)),i.userdef_dyn_fric||(i.dyn_fric=Math.sqrt(i.s1.material.dynamicFriction*i.s2.material.dynamicFriction)),i.userdef_stat_fric||(i.stat_fric=Math.sqrt(i.s1.material.staticFriction*i.s2.material.staticFriction)),i.userdef_rfric||(i.rfric=Math.sqrt(i.s1.material.rollingFriction*i.s2.material.rollingFriction))),i.rfric},Object.defineProperty(I.prototype,"contacts",{get:I.prototype.get_contacts}),Object.defineProperty(I.prototype,"normal",{get:I.prototype.get_normal}),Object.defineProperty(I.prototype,"radius",{get:I.prototype.get_radius}),Object.defineProperty(I.prototype,"referenceEdge1",{get:I.prototype.get_referenceEdge1}),Object.defineProperty(I.prototype,"referenceEdge2",{get:I.prototype.get_referenceEdge2}),Object.defineProperty(I.prototype,"elasticity",{get:I.prototype.get_elasticity,set:I.prototype.set_elasticity}),Object.defineProperty(I.prototype,"dynamicFriction",{get:I.prototype.get_dynamicFriction,set:I.prototype.set_dynamicFriction}),Object.defineProperty(I.prototype,"staticFriction",{get:I.prototype.get_staticFriction,set:I.prototype.set_staticFriction}),Object.defineProperty(I.prototype,"rollingFriction",{get:I.prototype.get_rollingFriction,set:I.prototype.set_rollingFriction}),I.prototype.__class__=I;var B=nape.dynamics.Contact=function(){this.zpp_inner=null};B.__name__=["nape","dynamics","Contact"],B.prototype.zpp_inner=null,B.prototype.get_arbiter=function(){if(null==this.zpp_inner.arbiter)return null;var e=this.zpp_inner.arbiter.outer;return e.zpp_inner.type==pn.COL?e.zpp_inner.colarb.outer_zn:null},B.prototype.get_penetration=function(){return-this.zpp_inner.dist},B.prototype.get_position=function(){return null==this.zpp_inner.wrap_position&&this.zpp_inner.getposition(),this.zpp_inner.wrap_position},B.prototype.get_fresh=function(){return this.zpp_inner.fresh},B.prototype.normalImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jnAcc;return null==e?Z.get(t.nx*n,t.ny*n):e==t.b1.outer?Z.get(t.nx*-n,t.ny*-n,-(t.ny*i.r1x-t.nx*i.r1y)*n):Z.get(t.nx*n,t.ny*n,(t.ny*i.r2x-t.nx*i.r2y)*n)},B.prototype.tangentImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jtAcc;return null==e?Z.get(-t.ny*n,t.nx*n):e==t.b1.outer?Z.get(t.ny*n,-t.nx*n,-(i.r1x*t.nx+i.r1y*t.ny)*n):Z.get(-t.ny*n,t.nx*n,(i.r2x*t.nx+i.r2y*t.ny)*n)},B.prototype.rollingImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.arbiter.colarb.jrAcc;return null==e?i:e==t.b1.outer?-i:i},B.prototype.totalImpulse=function(e){var t=this.zpp_inner.arbiter.colarb,i=this.zpp_inner.inner,n=i.jnAcc,r=i.jtAcc,o=t.jrAcc;if(null==e)return Z.get(t.nx*n-t.ny*r,t.ny*n+t.nx*r,o);var a=t.nx*n-t.ny*r,s=t.ny*n+t.nx*r;return e==t.b1.outer?Z.get(-a,-s,-(s*i.r1x-a*i.r1y)-o):Z.get(a,s,s*i.r2x-a*i.r2y+o)},B.prototype.get_friction=function(){return this.zpp_inner.inner.friction},B.prototype.toString=function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?"{object-pooled}":"{Contact}"},Object.defineProperty(B.prototype,"arbiter",{get:B.prototype.get_arbiter}),Object.defineProperty(B.prototype,"penetration",{get:B.prototype.get_penetration}),Object.defineProperty(B.prototype,"position",{get:B.prototype.get_position}),Object.defineProperty(B.prototype,"fresh",{get:B.prototype.get_fresh}),Object.defineProperty(B.prototype,"friction",{get:B.prototype.get_friction}),B.prototype.__class__=B;var qe=nape.dynamics.ContactIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};qe.__name__=["nape","dynamics","ContactIterator"],qe.get=function(e){var t;if(null==qe.zpp_pool){Rn.internal=!0;var i=new qe;Rn.internal=!1,t=i}else{var n=qe.zpp_pool;qe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},qe.prototype.zpp_inner=null,qe.prototype.zpp_i=null,qe.prototype.zpp_critical=null,qe.prototype.zpp_next=null,qe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;if(e.zpp_inner.valmod(),e.zpp_inner.zip_length){e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=0;for(var t=e.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&e.zpp_inner.user_length++,t=t.next}}var n=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<n||(this.zpp_next=qe.zpp_pool,(qe.zpp_pool=this).zpp_inner=null,!1)},qe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},qe.prototype.__class__=qe;var L=nape.dynamics.ContactList=function(){this.zpp_inner=null,this.zpp_inner=new Rn,this.zpp_inner.outer=this};L.__name__=["nape","dynamics","ContactList"],L.fromArray=function(e){for(var t=new L,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},L.prototype.zpp_inner=null,L.prototype.get_length=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}return this.zpp_inner.user_length},L.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},L.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var t=this.zpp_inner.inner.next;null!=t;){var i=t;i.active&&i.arbiter.active&&this.zpp_inner.user_length++,t=t.next}}e=this.zpp_inner.user_length-1-e}if(e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)for(this.zpp_inner.at_index=0,this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var n=this.zpp_inner.at_ite;if(n.active&&n.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=e;)for(this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){var r=this.zpp_inner.at_ite;if(r.active&&r.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.wrapper()},L.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{if(null==this.zpp_inner.push_ite){var i;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=i}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},L.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){if(null==this.zpp_inner.push_ite){var i;if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(0==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)}this.zpp_inner.push_ite=i}this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},L.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var n=this.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&this.zpp_inner.user_length++,n=n.next}}if(1==this.zpp_inner.user_length)i=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var o=this.zpp_inner.inner.next;null!=o;){var a=o;a.active&&a.arbiter.active&&this.zpp_inner.user_length++,o=o.next}}i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)}var s=(e=null==i?this.zpp_inner.inner.next:i.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(s),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},L.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;if(null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(1==this.zpp_inner.user_length)t=null;else{if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var r=this.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&this.zpp_inner.user_length++,r=r.next}}t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2)}var a=(e=null==t?this.zpp_inner.inner.next:t.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var s=(e=this.zpp_inner.inner.next).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(s),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},L.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},L.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.next;null!=i;){if(i==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},L.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}if(0==this.zpp_inner.user_length)break;this.pop()}else for(;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(0==this.zpp_inner.user_length)break;this.shift()}},L.prototype.empty=function(){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var e=this.zpp_inner.inner.next;null!=e;){var t=e;t.active&&t.arbiter.active&&this.zpp_inner.user_length++,e=e.next}}return 0==this.zpp_inner.user_length},L.prototype.iterator=function(){return this.zpp_inner.valmod(),qe.get(this)},L.prototype.copy=function(e){null==e&&(e=!1);var t=new L;this.zpp_inner.valmod();for(var i=qe.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var r=n.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&n.zpp_inner.user_length++,r=r.next}}var a,s=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<s?a=!0:(i.zpp_next=qe.zpp_pool,(qe.zpp_pool=i).zpp_inner=null,a=!1),!a)break;i.zpp_critical=!1;var l=i.zpp_inner.at(i.zpp_i++);t.push(e?null:l)}return t},L.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=qe.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var n=i.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&i.zpp_inner.user_length++,n=n.next}}var o,a=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<a?o=!0:(t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null,o=!1),!o)break;t.zpp_critical=!1;var s=t.zpp_inner.at(t.zpp_i++);this.has(s)||(this.zpp_inner.reverse_flag?this.push(s):this.unshift(s))}},L.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=qe.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;if(n.zpp_inner.valmod(),n.zpp_inner.zip_length){n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=0;for(var r=n.zpp_inner.inner.next;null!=r;){var o=r;o.active&&o.arbiter.active&&n.zpp_inner.user_length++,r=r.next}}var a,s=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<s?a=!0:(i.zpp_next=qe.zpp_pool,(qe.zpp_pool=i).zpp_inner=null,a=!1),!a)break;i.zpp_critical=!1;var l=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==l?"NULL":l.toString(),t=!1}return e+"]"},L.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=qe.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;if(i.zpp_inner.valmod(),i.zpp_inner.zip_length){i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=0;for(var n=i.zpp_inner.inner.next;null!=n;){var r=n;r.active&&r.arbiter.active&&i.zpp_inner.user_length++,n=n.next}}var o,a=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<a?o=!0:(t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null,o=!1),!o)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=qe.zpp_pool,(qe.zpp_pool=t).zpp_inner=null;break}}return this},L.prototype.filter=function(e){for(var t=0;;){if(this.zpp_inner.valmod(),this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=0;for(var i=this.zpp_inner.inner.next;null!=i;){var n=i;n.active&&n.arbiter.active&&this.zpp_inner.user_length++,i=i.next}}if(!(t<this.zpp_inner.user_length))break;var r=this.at(t);try{e(r)?++t:this.remove(r)}catch(e){break}}return this},Object.defineProperty(L.prototype,"length",{get:L.prototype.get_length}),L.prototype.__class__=L;var D=nape.dynamics.FluidArbiter=function(){A.call(this)};D.__name__=["nape","dynamics","FluidArbiter"],D.__super__=A,D.prototype=Object.create(A.prototype),D.prototype.get_position=function(){return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},D.prototype.set_position=function(e){null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition();var t=this.zpp_inner.fluidarb.wrap_position,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.fluidarb.wrap_position&&this.zpp_inner.fluidarb.getposition(),this.zpp_inner.fluidarb.wrap_position},D.prototype.get_overlap=function(){return this.zpp_inner.fluidarb.overlap},D.prototype.set_overlap=function(e){return this.zpp_inner.fluidarb.overlap=e,this.zpp_inner.fluidarb.overlap},D.prototype.buoyancyImpulse=function(e){var t=this.zpp_inner.fluidarb;return null==e?Z.get(t.buoyx,t.buoyy,0):e.zpp_inner==this.zpp_inner.b2?Z.get(t.buoyx,t.buoyy,t.buoyy*t.r2x-t.buoyx*t.r2y):Z.get(-t.buoyx,-t.buoyy,-(t.buoyy*t.r1x-t.buoyx*t.r1y))},D.prototype.dragImpulse=function(e){var t=this.zpp_inner.fluidarb,i=null==e||e.zpp_inner==this.zpp_inner.b2?1:-1;return Z.get(t.dampx*i,t.dampy*i,t.adamp*i)},D.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=this.buoyancyImpulse(e),n=this.dragImpulse(e),r=n.zpp_inner;null!=r._validate&&r._validate();var o=n.zpp_inner.x,a=i.zpp_inner;null!=a._validate&&a._validate(),n.zpp_inner.x=o+i.zpp_inner.x;var s=n.zpp_inner;null!=s._validate&&s._validate();var l=n.zpp_inner;null!=l._validate&&l._validate();var p=n.zpp_inner.y,h=i.zpp_inner;null!=h._validate&&h._validate(),n.zpp_inner.y=p+i.zpp_inner.y;var u=n.zpp_inner;null!=u._validate&&u._validate();var c=n.zpp_inner;null!=c._validate&&c._validate();var d=n.zpp_inner.z,_=i.zpp_inner;null!=_._validate&&_._validate(),n.zpp_inner.z=d+i.zpp_inner.z;var y=n.zpp_inner;return null!=y._validate&&y._validate(),i.dispose(),n},Object.defineProperty(D.prototype,"position",{get:D.prototype.get_position,set:D.prototype.set_position}),Object.defineProperty(D.prototype,"overlap",{get:D.prototype.get_overlap,set:D.prototype.set_overlap}),D.prototype.__class__=D;var R=nape.dynamics.InteractionFilter=function(e,t,i,n,r,o){null==o&&(o=-1),null==r&&(r=1),null==n&&(n=-1),null==i&&(i=1),null==t&&(t=-1),null==e&&(e=1),(this.zpp_inner=null)==ft.zpp_pool?this.zpp_inner=new ft:(this.zpp_inner=ft.zpp_pool,ft.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),(this.zpp_inner.outer=this).zpp_inner.collisionGroup!=e&&(this.zpp_inner.collisionGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask!=t&&(this.zpp_inner.collisionMask=t,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup!=i&&(this.zpp_inner.sensorGroup=i,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask!=n&&(this.zpp_inner.sensorMask=n,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup!=r&&(this.zpp_inner.fluidGroup=r,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask!=o&&(this.zpp_inner.fluidMask=o,this.zpp_inner.invalidate())};R.__name__=["nape","dynamics","InteractionFilter"],R.prototype.zpp_inner=null,R.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},R.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=Bn.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},R.prototype.get_collisionGroup=function(){return this.zpp_inner.collisionGroup},R.prototype.set_collisionGroup=function(e){return this.zpp_inner.collisionGroup!=e&&(this.zpp_inner.collisionGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionGroup},R.prototype.get_collisionMask=function(){return this.zpp_inner.collisionMask},R.prototype.set_collisionMask=function(e){return this.zpp_inner.collisionMask!=e&&(this.zpp_inner.collisionMask=e,this.zpp_inner.invalidate()),this.zpp_inner.collisionMask},R.prototype.get_sensorGroup=function(){return this.zpp_inner.sensorGroup},R.prototype.set_sensorGroup=function(e){return this.zpp_inner.sensorGroup!=e&&(this.zpp_inner.sensorGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorGroup},R.prototype.get_sensorMask=function(){return this.zpp_inner.sensorMask},R.prototype.set_sensorMask=function(e){return this.zpp_inner.sensorMask!=e&&(this.zpp_inner.sensorMask=e,this.zpp_inner.invalidate()),this.zpp_inner.sensorMask},R.prototype.get_fluidGroup=function(){return this.zpp_inner.fluidGroup},R.prototype.set_fluidGroup=function(e){return this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate()),this.zpp_inner.fluidGroup},R.prototype.get_fluidMask=function(){return this.zpp_inner.fluidMask},R.prototype.set_fluidMask=function(e){return this.zpp_inner.fluidMask!=e&&(this.zpp_inner.fluidMask=e,this.zpp_inner.invalidate()),this.zpp_inner.fluidMask},R.prototype.shouldCollide=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&t.collisionGroup)},R.prototype.shouldSense=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.sensorMask&i.sensorGroup)&&0!=(i.sensorMask&t.sensorGroup)},R.prototype.shouldFlow=function(e){var t=this.zpp_inner,i=e.zpp_inner;return 0!=(t.fluidMask&i.fluidGroup)&&0!=(i.fluidMask&t.fluidGroup)},R.prototype.copy=function(){return new R(this.zpp_inner.collisionGroup,this.zpp_inner.collisionMask,this.zpp_inner.sensorGroup,this.zpp_inner.sensorMask,this.zpp_inner.fluidGroup,this.zpp_inner.fluidMask)},R.prototype.toString=function(){return"{ collision: "+e.hex(this.zpp_inner.collisionGroup,8)+"~"+e.hex(this.zpp_inner.collisionMask,8)+" sensor: "+e.hex(this.zpp_inner.sensorGroup,8)+"~"+e.hex(this.zpp_inner.sensorMask,8)+" fluid: "+e.hex(this.zpp_inner.fluidGroup,8)+"~"+e.hex(this.zpp_inner.fluidMask,8)+" }"},Object.defineProperty(R.prototype,"userData",{get:R.prototype.get_userData}),Object.defineProperty(R.prototype,"shapes",{get:R.prototype.get_shapes}),Object.defineProperty(R.prototype,"collisionGroup",{get:R.prototype.get_collisionGroup,set:R.prototype.set_collisionGroup}),Object.defineProperty(R.prototype,"collisionMask",{get:R.prototype.get_collisionMask,set:R.prototype.set_collisionMask}),Object.defineProperty(R.prototype,"sensorGroup",{get:R.prototype.get_sensorGroup,set:R.prototype.set_sensorGroup}),Object.defineProperty(R.prototype,"sensorMask",{get:R.prototype.get_sensorMask,set:R.prototype.set_sensorMask}),Object.defineProperty(R.prototype,"fluidGroup",{get:R.prototype.get_fluidGroup,set:R.prototype.set_fluidGroup}),Object.defineProperty(R.prototype,"fluidMask",{get:R.prototype.get_fluidMask,set:R.prototype.set_fluidMask}),R.prototype.__class__=R;var F=nape.dynamics.InteractionGroup=function(e){null==e&&(e=!1),this.zpp_inner=null,this.zpp_inner=new xt,(this.zpp_inner.outer=this).zpp_inner.ignore!=e&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=e)};F.__name__=["nape","dynamics","InteractionGroup"],F.prototype.zpp_inner=null,F.prototype.get_group=function(){return null==this.zpp_inner.group?null:this.zpp_inner.group.outer},F.prototype.set_group=function(e){return this.zpp_inner.setGroup(null==e?null:e.zpp_inner),null==this.zpp_inner.group?null:this.zpp_inner.group.outer},F.prototype.get_ignore=function(){return this.zpp_inner.ignore},F.prototype.set_ignore=function(e){return this.zpp_inner.ignore!=e&&(this.zpp_inner.invalidate(!0),this.zpp_inner.ignore=e),this.zpp_inner.ignore},F.prototype.get_interactors=function(){return null==this.zpp_inner.wrap_interactors&&(this.zpp_inner.wrap_interactors=vn.get(this.zpp_inner.interactors,!0)),this.zpp_inner.wrap_interactors},F.prototype.get_groups=function(){return null==this.zpp_inner.wrap_groups&&(this.zpp_inner.wrap_groups=Ln.get(this.zpp_inner.groups,!0)),this.zpp_inner.wrap_groups},F.prototype.toString=function(){var e="InteractionGroup";return this.zpp_inner.ignore&&(e="InteractionGroup:ignore"),e},Object.defineProperty(F.prototype,"group",{get:F.prototype.get_group,set:F.prototype.set_group}),Object.defineProperty(F.prototype,"ignore",{get:F.prototype.get_ignore,set:F.prototype.set_ignore}),Object.defineProperty(F.prototype,"interactors",{get:F.prototype.get_interactors}),Object.defineProperty(F.prototype,"groups",{get:F.prototype.get_groups}),F.prototype.__class__=F;var Ye=nape.dynamics.InteractionGroupIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ye.__name__=["nape","dynamics","InteractionGroupIterator"],Ye.get=function(e){var t;if(null==Ye.zpp_pool){Ln.internal=!0;var i=new Ye;Ln.internal=!1,t=i}else{var n=Ye.zpp_pool;Ye.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ye.prototype.zpp_inner=null,Ye.prototype.zpp_i=null,Ye.prototype.zpp_critical=null,Ye.prototype.zpp_next=null,Ye.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=this).zpp_inner=null,!1)},Ye.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ye.prototype.__class__=Ye;var j=nape.dynamics.InteractionGroupList=function(){this.zpp_inner=null,this.zpp_inner=new Ln,this.zpp_inner.outer=this};j.__name__=["nape","dynamics","InteractionGroupList"],j.fromArray=function(e){for(var t=new j,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},j.prototype.zpp_inner=null,j.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},j.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},j.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},j.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},j.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},j.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},j.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},j.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},j.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},j.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},j.prototype.empty=function(){return null==this.zpp_inner.inner.head},j.prototype.iterator=function(){return this.zpp_inner.valmod(),Ye.get(this)},j.prototype.copy=function(e){null==e&&(e=!1);var t=new j;this.zpp_inner.valmod();for(var i=Ye.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},j.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ye.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},j.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ye.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},j.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ye.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ye.zpp_pool,(Ye.zpp_pool=t).zpp_inner=null;break}}return this},j.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(j.prototype,"length",{get:j.prototype.get_length}),j.prototype.__class__=j;var N=nape.geom.AABB=function(e,t,i,n){var r;null==n&&(n=0),null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),(this.zpp_inner=null)==Ao.zpp_pool?r=new Ao:(r=Ao.zpp_pool,Ao.zpp_pool=r.next,r.next=null),r.minx=e,r.miny=t,r.maxx=e+i,r.maxy=t+n,this.zpp_inner=r,this.zpp_inner.outer=this};N.__name__=["nape","geom","AABB"],N.prototype.zpp_inner=null,N.prototype.copy=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t,i=this.zpp_inner,n=i.minx,r=i.miny,o=i.maxx,a=i.maxy;return null==Ao.zpp_pool?t=new Ao:(t=Ao.zpp_pool,Ao.zpp_pool=t.next,t.next=null),t.minx=n,t.miny=r,t.maxx=o,t.maxy=a,t.wrapper()},N.prototype.get_min=function(){return this.zpp_inner.getmin()},N.prototype.set_min=function(e){var t=this.zpp_inner.getmin(),i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return this.zpp_inner.getmin()},N.prototype.get_max=function(){return this.zpp_inner.getmax()},N.prototype.set_max=function(e){var t=this.zpp_inner.getmax(),i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return this.zpp_inner.getmax()},N.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.minx},N.prototype.set_x=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.minx!=e){this.zpp_inner.maxx+=e-this.zpp_inner.minx,this.zpp_inner.minx=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.minx},N.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.miny},N.prototype.set_y=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.miny!=e){this.zpp_inner.maxy+=e-this.zpp_inner.miny,this.zpp_inner.miny=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.miny},N.prototype.get_width=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner;return t.maxx-t.minx},N.prototype.set_width=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner;if(i.maxx-i.minx!=e){var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.maxx=this.zpp_inner.minx+e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner;return a.maxx-a.minx},N.prototype.get_height=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner;return t.maxy-t.miny},N.prototype.set_height=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner;if(i.maxy-i.miny!=e){var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.maxy=this.zpp_inner.miny+e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner;return a.maxy-a.miny},N.prototype.toString=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.toString()},Object.defineProperty(N.prototype,"min",{get:N.prototype.get_min,set:N.prototype.set_min}),Object.defineProperty(N.prototype,"max",{get:N.prototype.get_max,set:N.prototype.set_max}),Object.defineProperty(N.prototype,"x",{get:N.prototype.get_x,set:N.prototype.set_x}),Object.defineProperty(N.prototype,"y",{get:N.prototype.get_y,set:N.prototype.set_y}),Object.defineProperty(N.prototype,"width",{get:N.prototype.get_width,set:N.prototype.set_width}),Object.defineProperty(N.prototype,"height",{get:N.prototype.get_height,set:N.prototype.set_height}),N.prototype.__class__=N;var U=nape.geom.ConvexResult=function(){this.zpp_inner=null};U.__name__=["nape","geom","ConvexResult"],U.prototype.zpp_inner=null,U.prototype.get_normal=function(){return this.zpp_inner.normal},U.prototype.get_position=function(){return this.zpp_inner.position},U.prototype.get_toi=function(){return this.zpp_inner.toiDistance},U.prototype.get_shape=function(){return this.zpp_inner.shape},U.prototype.dispose=function(){this.zpp_inner.free()},U.prototype.toString=function(){return"{ shape: "+n.string(this.zpp_inner.shape)+" toi: "+this.zpp_inner.toiDistance+" }"},Object.defineProperty(U.prototype,"normal",{get:U.prototype.get_normal}),Object.defineProperty(U.prototype,"position",{get:U.prototype.get_position}),Object.defineProperty(U.prototype,"toi",{get:U.prototype.get_toi}),Object.defineProperty(U.prototype,"shape",{get:U.prototype.get_shape}),U.prototype.__class__=U;var Ke=nape.geom.ConvexResultIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ke.__name__=["nape","geom","ConvexResultIterator"],Ke.get=function(e){var t;if(null==Ke.zpp_pool){Gn.internal=!0;var i=new Ke;Gn.internal=!1,t=i}else{var n=Ke.zpp_pool;Ke.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ke.prototype.zpp_inner=null,Ke.prototype.zpp_i=null,Ke.prototype.zpp_critical=null,Ke.prototype.zpp_next=null,Ke.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=this).zpp_inner=null,!1)},Ke.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ke.prototype.__class__=Ke;var pt=nape.geom.ConvexResultList=function(){this.zpp_inner=null,this.zpp_inner=new Gn,this.zpp_inner.outer=this};pt.__name__=["nape","geom","ConvexResultList"],pt.fromArray=function(e){for(var t=new pt,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},pt.prototype.zpp_inner=null,pt.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},pt.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e)},pt.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},pt.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},pt.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},pt.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=e=null==i?this.zpp_inner.inner.head.elt:i.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e},pt.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=e=null==t?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e},pt.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},pt.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e),this.zpp_inner.invalidate()),t},pt.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},pt.prototype.empty=function(){return null==this.zpp_inner.inner.head},pt.prototype.iterator=function(){return this.zpp_inner.valmod(),Ke.get(this)},pt.prototype.copy=function(e){null==e&&(e=!1);var t=new pt;this.zpp_inner.valmod();for(var i=Ke.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},pt.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ke.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},pt.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ke.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},pt.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ke.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ke.zpp_pool,(Ke.zpp_pool=t).zpp_inner=null;break}}return this},pt.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(pt.prototype,"length",{get:pt.prototype.get_length}),pt.prototype.__class__=pt;var V=nape.geom.Geom=function(){};V.__name__=["nape","geom","Geom"],V.distanceBody=function(e,t,i,n){for(var r=e.zpp_inner.shapes.head;null!=r;)wt.validateShape(r.elt),r=r.next;for(var o=t.zpp_inner.shapes.head;null!=o;)wt.validateShape(o.elt),o=o.next;return Ht.distanceBody(e.zpp_inner,t.zpp_inner,i.zpp_inner,n.zpp_inner)},V.distance=function(e,t,i,n){var r;wt.validateShape(e.zpp_inner),wt.validateShape(t.zpp_inner),null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1;var o,a=e.zpp_inner,s=t.zpp_inner,l=i.zpp_inner,p=n.zpp_inner;if(0==a.type&&0==s.type){var h,u=a.circle,c=s.circle,d=0,_=0;d=c.worldCOMx-u.worldCOMx,_=c.worldCOMy-u.worldCOMy;var y=Math.sqrt(d*d+_*_);if((h=y-(u.radius+c.radius))<1e100){if(0==y)d=1,_=0;else{var m=1/y;d*=m,_*=m}var f=u.radius;l.x=u.worldCOMx+d*f,l.y=u.worldCOMy+_*f;var x=-c.radius;p.x=c.worldCOMx+d*x,p.y=c.worldCOMy+_*x,r.x=d,r.y=_}o=h}else{var v=!1;if(0==a.type&&1==s.type){var z=a;a=s,s=z;var g=l;l=p,p=g,v=!0}if(1==a.type&&0==s.type){for(var b=a.polygon,w=s.circle,S=-1e100,C=null,M=b.edges.head;null!=M;){var P=M.elt,k=P.gnormx*w.worldCOMx+P.gnormy*w.worldCOMy-P.gprojection-w.radius;if(1e100<k){S=k;break}0<k?S<k&&(S=k,C=P):S<0&&S<k&&(S=k,C=P),M=M.next}if(S<1e100){var T=C.gp0,O=C.gp1,A=w.worldCOMy*C.gnormx-w.worldCOMx*C.gnormy;if(A<=T.y*C.gnormx-T.x*C.gnormy){var E=0,G=0;E=w.worldCOMx-T.x,G=w.worldCOMy-T.y;var I=Math.sqrt(E*E+G*G);if((S=I-w.radius)<1e100){if(0==I)E=1,G=0;else{var B=1/I;E*=B,G*=B}l.x=T.x+0*E,l.y=T.y+0*G;var L=-w.radius;p.x=w.worldCOMx+E*L,p.y=w.worldCOMy+G*L,r.x=E,r.y=G}}else if(A>=O.y*C.gnormx-O.x*C.gnormy){var D=0,R=0;D=w.worldCOMx-O.x,R=w.worldCOMy-O.y;var F=Math.sqrt(D*D+R*R);if((S=F-w.radius)<1e100){if(0==F)D=1,R=0;else{var j=1/F;D*=j,R*=j}l.x=O.x+0*D,l.y=O.y+0*R;var N=-w.radius;p.x=w.worldCOMx+D*N,p.y=w.worldCOMy+R*N,r.x=D,r.y=R}}else{var U=-w.radius;p.x=w.worldCOMx+C.gnormx*U,p.y=w.worldCOMy+C.gnormy*U;var V=-S;l.x=p.x+C.gnormx*V,l.y=p.y+C.gnormy*V,r.x=C.gnormx,r.y=C.gnormy}}v&&(r.x=-r.x,r.y=-r.y),o=S}else{for(var H=a.polygon,W=s.polygon,X=-1e100,q=null,Y=null,K=0,Z=H.edges.head;null!=Z;){for(var J=Z.elt,Q=1e100,$=W.gverts.next;null!=$;){var ee=$,te=J.gnormx*ee.x+J.gnormy*ee.y;te<Q&&(Q=te),$=$.next}if(1e100<(Q-=J.gprojection)){X=Q;break}0<Q?X<Q&&(X=Q,q=J,K=1):X<0&&X<Q&&(X=Q,q=J,K=1),Z=Z.next}if(X<1e100){for(var ie=W.edges.head;null!=ie;){for(var ne=ie.elt,re=1e100,oe=H.gverts.next;null!=oe;){var ae=oe,se=ne.gnormx*ae.x+ne.gnormy*ae.y;se<re&&(re=se),oe=oe.next}if(1e100<(re-=ne.gprojection)){X=re;break}0<re?X<re&&(X=re,Y=ne,K=2):X<0&&X<re&&(X=re,Y=ne,K=2),ie=ie.next}if(X<1e100){var le,pe;if(1==K)le=W,pe=q;else{le=H,pe=Y;var he=l;l=p,p=he,v=!v}for(var ue=null,ce=1e100,de=le.edges.head;null!=de;){var _e=de.elt,ye=pe.gnormx*_e.gnormx+pe.gnormy*_e.gnormy;ye<ce&&(ce=ye,ue=_e),de=de.next}if(v?(r.x=-pe.gnormx,r.y=-pe.gnormy):(r.x=pe.gnormx,r.y=pe.gnormy),0<=X){var me,fe,xe,ve,ze=pe.gp0,ge=pe.gp1,be=ue.gp0,we=ue.gp1,Se=1/((me=ge.x-ze.x)*me+(fe=ge.y-ze.y)*fe),Ce=1/((xe=we.x-be.x)*xe+(ve=we.y-be.y)*ve),Me=-(me*(ze.x-be.x)+fe*(ze.y-be.y))*Se,Pe=-(me*(ze.x-we.x)+fe*(ze.y-we.y))*Se,ke=-(xe*(be.x-ze.x)+ve*(be.y-ze.y))*Ce,Te=-(xe*(be.x-ge.x)+ve*(be.y-ge.y))*Ce;Me<0?Me=0:1<Me&&(Me=1),Pe<0?Pe=0:1<Pe&&(Pe=1),ke<0?ke=0:1<ke&&(ke=1),Te<0?Te=0:1<Te&&(Te=1);var Oe,Ae,Ee=Me;Oe=ze.x+me*Ee,Ae=ze.y+fe*Ee;var Ge,Ie,Be=Pe;Ge=ze.x+me*Be,Ie=ze.y+fe*Be;var Le,De,Re=ke;Le=be.x+xe*Re,De=be.y+ve*Re;var Fe,je,Ne=Te;Fe=be.x+xe*Ne,je=be.y+ve*Ne;var Ue,Ve,He,We,Xe,qe,Ye,Ke,Ze=(Ue=Oe-be.x)*Ue+(Ve=Ae-be.y)*Ve,Je=(He=Ge-we.x)*He+(We=Ie-we.y)*We,Qe=(Xe=Le-ze.x)*Xe+(qe=De-ze.y)*qe,$e=(Ye=Fe-ge.x)*Ye+(Ke=je-ge.y)*Ke,et=0,tt=0,it=null;Ze<Je?(et=Oe,tt=Ae,it=be):(et=Ge,tt=Ie,it=we,Ze=Je);var nt=0,rt=0,ot=null;if(Qe<$e?(nt=Le,rt=De,ot=ze):(nt=Fe,rt=je,ot=ge,Qe=$e),Ze<Qe?(l.x=et,l.y=tt,p.x=it.x,p.y=it.y,X=Math.sqrt(Ze)):(p.x=nt,p.y=rt,l.x=ot.x,l.y=ot.y,X=Math.sqrt(Qe)),0!=X){r.x=p.x-l.x,r.y=p.y-l.y;var at=1/X;r.x*=at,r.y*=at,v&&(r.x=-r.x,r.y=-r.y)}o=X}else{var st=0,lt=0;st=ue.gp0.x,lt=ue.gp0.y;var pt,ht,ut=0,ct=0;pt=(ut=ue.gp1.x)-st,ht=(ct=ue.gp1.y)-lt;var dt=pe.gnormy*st-pe.gnormx*lt,_t=pe.gnormy*ut-pe.gnormx*ct,yt=1/(_t-dt),mt=(-pe.tp1-dt)*yt;mt>Qs.epsilon&&(st+=pt*mt,lt+=ht*mt);var ft=(-pe.tp0-_t)*yt;ft<-Qs.epsilon&&(ut+=pt*ft,ct+=ht*ft);var xt=st*pe.gnormx+lt*pe.gnormy-pe.gprojection,vt=ut*pe.gnormx+ct*pe.gnormy-pe.gprojection;if(xt<vt){p.x=st,p.y=lt;var zt=-xt;l.x=p.x+pe.gnormx*zt,l.y=p.y+pe.gnormy*zt,o=xt}else{p.x=ut,p.y=ct;var gt=-vt;l.x=p.x+pe.gnormx*gt,l.y=p.y+pe.gnormy*gt,o=vt}}}else o=1e100}else o=1e100}}var bt=r;return null!=bt.outer&&(bt.outer.zpp_inner=null,bt.outer=null),bt._isimmutable=null,bt._validate=null,bt._invalidate=null,bt.next=el.zpp_pool,el.zpp_pool=bt,o},V.intersectsBody=function(e,t){for(var i=e.zpp_inner.shapes.head;null!=i;)wt.validateShape(i.elt),i=i.next;for(var n=t.zpp_inner.shapes.head;null!=n;)wt.validateShape(n.elt),n=n.next;var r=e.zpp_inner.aabb,o=t.zpp_inner.aabb;if(o.miny<=r.maxy&&r.miny<=o.maxy&&o.minx<=r.maxx&&r.minx<=o.maxx){for(var a=e.zpp_inner.shapes.head;null!=a;){for(var s=a.elt,l=t.zpp_inner.shapes.head;null!=l;){if($s.testCollide_safe(s,l.elt))return!0;l=l.next}a=a.next}return!1}return!1},V.intersects=function(e,t){wt.validateShape(e.zpp_inner),wt.validateShape(t.zpp_inner);var i=e.zpp_inner.aabb,n=t.zpp_inner.aabb;return n.miny<=i.maxy&&i.miny<=n.maxy&&n.minx<=i.maxx&&i.minx<=n.maxx&&$s.testCollide_safe(e.zpp_inner,t.zpp_inner)},V.contains=function(e,t){return wt.validateShape(e.zpp_inner),wt.validateShape(t.zpp_inner),$s.containTest(e.zpp_inner,t.zpp_inner)},V.prototype.__class__=V;var bn=nape.geom.GeomPoly=function(e){if(this.zpp_inner=null,this.zpp_pool=null,this.zpp_inner=new St(this),null!=e){if(e instanceof Array&&null==e.__enum__)for(var t=e,i=0;i<t.length;){var n=t[i];++i;var r=n,o=r.zpp_inner;null!=o._validate&&o._validate();var a=r.zpp_inner.x,s=r.zpp_inner;null!=s._validate&&s._validate();var l,p=r.zpp_inner.y;null==dr.zpp_pool?l=new dr:(l=dr.zpp_pool,dr.zpp_pool=l.next,l.next=null),l.forced=!1,l.x=a,l.y=p;var h=l;null==this.zpp_inner.vertices?this.zpp_inner.vertices=h.prev=h.next=h:(h.prev=this.zpp_inner.vertices,h.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=h,this.zpp_inner.vertices.next=h),this.zpp_inner.vertices=h}else if(ze.__instanceof(e,ge))for(var u=e.iterator();;){u.zpp_inner.zpp_inner.valmod();var c,d=u.zpp_inner.zpp_gl();if(u.zpp_critical=!0,u.zpp_i<d?c=!0:(u.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=u).zpp_inner=null,c=!1),!c)break;u.zpp_critical=!1;var _=u.zpp_inner.at(u.zpp_i++),y=_.zpp_inner;null!=y._validate&&y._validate();var m=_.zpp_inner.x,f=_.zpp_inner;null!=f._validate&&f._validate();var x,v=_.zpp_inner.y;null==dr.zpp_pool?x=new dr:(x=dr.zpp_pool,dr.zpp_pool=x.next,x.next=null),x.forced=!1,x.x=m,x.y=v;var z=x;null==this.zpp_inner.vertices?this.zpp_inner.vertices=z.prev=z.next=z:(z.prev=this.zpp_inner.vertices,z.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=z,this.zpp_inner.vertices.next=z),this.zpp_inner.vertices=z}else if(ze.__instanceof(e,bn)){var g=e.zpp_inner.vertices;if(null!=g)for(var b=g;;){var w,S=b.x,C=b.y;if(null==jn.poolVec2?w=new ht:(w=jn.poolVec2,jn.poolVec2=w.zpp_pool,w.zpp_pool=null),null==w.zpp_inner){var M;null==el.zpp_pool?M=new el:(M=el.zpp_pool,el.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=S,M.y=C,w.zpp_inner=M,w.zpp_inner.outer=w}else{var P,k=w.zpp_inner;if(null!=k._validate&&k._validate(),w.zpp_inner.x==S){var T=w.zpp_inner;null!=T._validate&&T._validate(),P=w.zpp_inner.y==C}else P=!1;if(!P){w.zpp_inner.x=S,w.zpp_inner.y=C;var O=w.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}w.zpp_inner.weak=!1;var A=w;b=b.next;var E=A.zpp_inner;null!=E._validate&&E._validate();var G=A.zpp_inner.x,I=A.zpp_inner;null!=I._validate&&I._validate();var B,L=A.zpp_inner.y;null==dr.zpp_pool?B=new dr:(B=dr.zpp_pool,dr.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=G,B.y=L;var D=B;null==this.zpp_inner.vertices?this.zpp_inner.vertices=D.prev=D.next=D:(D.prev=this.zpp_inner.vertices,D.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=D,this.zpp_inner.vertices.next=D),this.zpp_inner.vertices=D;var R=A.zpp_inner;A.zpp_inner.outer=null,A.zpp_inner=null;var F=A;F.zpp_pool=jn.poolVec2,jn.poolVec2=F;var j=R;if(null!=j.outer&&(j.outer.zpp_inner=null,j.outer=null),j._isimmutable=null,j._validate=null,j._invalidate=null,j.next=el.zpp_pool,el.zpp_pool=j,b==g)break}}if(this.skipForward(1),e instanceof Array&&null==e.__enum__)for(var N=e,U=0;U<N.length;){var V,H=N[U];if(H.zpp_inner.weak){var W=H.zpp_inner;H.zpp_inner.outer=null,H.zpp_inner=null;var X=H;X.zpp_pool=jn.poolVec2,jn.poolVec2=X;var q=W;null!=q.outer&&(q.outer.zpp_inner=null,q.outer=null),q._isimmutable=null,q._validate=null,q._invalidate=null,q.next=el.zpp_pool,el.zpp_pool=q,V=!0}else V=!1;V?N.splice(U,1):++U}else if(ze.__instanceof(e,ge)){var Y=e;null!=Y.zpp_inner._validate&&Y.zpp_inner._validate();for(var K=Y.zpp_inner.inner,Z=null,J=K.head;null!=J;){var Q=J.elt;if(Q.outer.zpp_inner.weak){if(J=K.erase(Z),Q.outer.zpp_inner.weak){var $=Q.outer,ee=$.zpp_inner;$.zpp_inner.outer=null,$.zpp_inner=null;var te=$;te.zpp_pool=jn.poolVec2,jn.poolVec2=te;var ie=ee;null!=ie.outer&&(ie.outer.zpp_inner=null,ie.outer=null),ie._isimmutable=null,ie._validate=null,ie._invalidate=null,ie.next=el.zpp_pool,el.zpp_pool=ie}}else J=(Z=J).next}}}};bn.__name__=["nape","geom","GeomPoly"],bn.get=function(e){var t;if(null==jn.poolGeomPoly?t=new bn:(t=jn.poolGeomPoly,jn.poolGeomPoly=t.zpp_pool,t.zpp_pool=null),null!=e){if(e instanceof Array&&null==e.__enum__)for(var i=e,n=0;n<i.length;){var r=i[n];++n;var o=r,a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,l=o.zpp_inner;null!=l._validate&&l._validate();var p,h=o.zpp_inner.y;null==dr.zpp_pool?p=new dr:(p=dr.zpp_pool,dr.zpp_pool=p.next,p.next=null),p.forced=!1,p.x=s,p.y=h;var u=p;null==t.zpp_inner.vertices?t.zpp_inner.vertices=u.prev=u.next=u:(u.prev=t.zpp_inner.vertices,u.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=u,t.zpp_inner.vertices.next=u),t.zpp_inner.vertices=u}else if(ze.__instanceof(e,ge))for(var c=e.iterator();;){c.zpp_inner.zpp_inner.valmod();var d,_=c.zpp_inner.zpp_gl();if(c.zpp_critical=!0,c.zpp_i<_?d=!0:(c.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=c).zpp_inner=null,d=!1),!d)break;c.zpp_critical=!1;var y=c.zpp_inner.at(c.zpp_i++),m=y.zpp_inner;null!=m._validate&&m._validate();var f=y.zpp_inner.x,x=y.zpp_inner;null!=x._validate&&x._validate();var v,z=y.zpp_inner.y;null==dr.zpp_pool?v=new dr:(v=dr.zpp_pool,dr.zpp_pool=v.next,v.next=null),v.forced=!1,v.x=f,v.y=z;var g=v;null==t.zpp_inner.vertices?t.zpp_inner.vertices=g.prev=g.next=g:(g.prev=t.zpp_inner.vertices,g.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=g,t.zpp_inner.vertices.next=g),t.zpp_inner.vertices=g}else if(ze.__instanceof(e,bn)){var b=e.zpp_inner.vertices;if(null!=b)for(var w=b;;){var S,C=w.x,M=w.y;if(null==jn.poolVec2?S=new ht:(S=jn.poolVec2,jn.poolVec2=S.zpp_pool,S.zpp_pool=null),null==S.zpp_inner){var P;null==el.zpp_pool?P=new el:(P=el.zpp_pool,el.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=C,P.y=M,S.zpp_inner=P,S.zpp_inner.outer=S}else{var k,T=S.zpp_inner;if(null!=T._validate&&T._validate(),S.zpp_inner.x==C){var O=S.zpp_inner;null!=O._validate&&O._validate(),k=S.zpp_inner.y==M}else k=!1;if(!k){S.zpp_inner.x=C,S.zpp_inner.y=M;var A=S.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}S.zpp_inner.weak=!1;var E=S;w=w.next;var G=E.zpp_inner;null!=G._validate&&G._validate();var I=E.zpp_inner.x,B=E.zpp_inner;null!=B._validate&&B._validate();var L,D=E.zpp_inner.y;null==dr.zpp_pool?L=new dr:(L=dr.zpp_pool,dr.zpp_pool=L.next,L.next=null),L.forced=!1,L.x=I,L.y=D;var R=L;null==t.zpp_inner.vertices?t.zpp_inner.vertices=R.prev=R.next=R:(R.prev=t.zpp_inner.vertices,R.next=t.zpp_inner.vertices.next,t.zpp_inner.vertices.next.prev=R,t.zpp_inner.vertices.next=R),t.zpp_inner.vertices=R;var F=E.zpp_inner;E.zpp_inner.outer=null,E.zpp_inner=null;var j=E;j.zpp_pool=jn.poolVec2,jn.poolVec2=j;var N=F;if(null!=N.outer&&(N.outer.zpp_inner=null,N.outer=null),N._isimmutable=null,N._validate=null,N._invalidate=null,N.next=el.zpp_pool,el.zpp_pool=N,w==b)break}}if(t.skipForward(1),e instanceof Array&&null==e.__enum__)for(var U=e,V=0;V<U.length;){var H,W=U[V];if(W.zpp_inner.weak){var X=W.zpp_inner;W.zpp_inner.outer=null,W.zpp_inner=null;var q=W;q.zpp_pool=jn.poolVec2,jn.poolVec2=q;var Y=X;null!=Y.outer&&(Y.outer.zpp_inner=null,Y.outer=null),Y._isimmutable=null,Y._validate=null,Y._invalidate=null,Y.next=el.zpp_pool,el.zpp_pool=Y,H=!0}else H=!1;H?U.splice(V,1):++V}else if(ze.__instanceof(e,ge)){var K=e;null!=K.zpp_inner._validate&&K.zpp_inner._validate();for(var Z=K.zpp_inner.inner,J=null,Q=Z.head;null!=Q;){var $=Q.elt;if($.outer.zpp_inner.weak){if(Q=Z.erase(J),$.outer.zpp_inner.weak){var ee=$.outer,te=ee.zpp_inner;ee.zpp_inner.outer=null,ee.zpp_inner=null;var ie=ee;ie.zpp_pool=jn.poolVec2,jn.poolVec2=ie;var ne=te;null!=ne.outer&&(ne.outer.zpp_inner=null,ne.outer=null),ne._isimmutable=null,ne._validate=null,ne._invalidate=null,ne.next=el.zpp_pool,el.zpp_pool=ne}}else Q=(J=Q).next}}}return t},bn.prototype.zpp_pool=null,bn.prototype.zpp_inner=null,bn.prototype.empty=function(){return null==this.zpp_inner.vertices},bn.prototype.size=function(){var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;++e,(n=n.next)!=i;);return e},bn.prototype.iterator=function(){return Ct.get(this.zpp_inner.vertices,!0)},bn.prototype.forwardIterator=function(){return Ct.get(this.zpp_inner.vertices,!0)},bn.prototype.backwardsIterator=function(){return Ct.get(this.zpp_inner.vertices,!1)},bn.prototype.current=function(){var e=this.zpp_inner.vertices;if(null==e.wrap){var t,i=e.x,n=e.y;if(null==jn.poolVec2?t=new ht:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}}t.zpp_inner.weak=!1,e.wrap=t,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.push=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y;null==dr.zpp_pool?r=new dr:(r=dr.zpp_pool,dr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=i,r.y=o;var a=r;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=a.prev=a.next=a:(a.prev=this.zpp_inner.vertices,a.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=a,this.zpp_inner.vertices.next=a),this.zpp_inner.vertices=a,e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s}return this},bn.prototype.pop=function(){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=null;else{var i=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,t.wrap=null}return t.prev=t.next=null,t.next=dr.zpp_pool,dr.zpp_pool=t,this},bn.prototype.unshift=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y;null==dr.zpp_pool?r=new dr:(r=dr.zpp_pool,dr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=i,r.y=o;var a=r;if(null==this.zpp_inner.vertices?this.zpp_inner.vertices=a.prev=a.next=a:(a.next=this.zpp_inner.vertices,a.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.prev.next=a,this.zpp_inner.vertices.prev=a),this.zpp_inner.vertices=a,e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s}return this},bn.prototype.shift=function(){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,t.wrap=null}return t.prev=t.next=null,t.next=dr.zpp_pool,dr.zpp_pool=t,this},bn.prototype.skipForward=function(e){if(null!=this.zpp_inner.vertices)if(0<e)for(;0<e--;)this.zpp_inner.vertices=this.zpp_inner.vertices.next;else if(e<0)for(;e++<0;)this.zpp_inner.vertices=this.zpp_inner.vertices.prev;return this},bn.prototype.skipBackwards=function(e){return this.skipForward(-e)},bn.prototype.erase=function(e){for(;0!=e&&null!=this.zpp_inner.vertices;){var t=this.zpp_inner.vertices;if(0<e){var i;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,i=this.zpp_inner.vertices=null;else{var n=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,i=n}this.zpp_inner.vertices=i,--e}else if(e<0){var r;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,r=null;else{var o=this.zpp_inner.vertices.prev;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,r=o}this.zpp_inner.vertices=r,++e}if(null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var a=t.wrap,s=a.zpp_inner;a.zpp_inner.outer=null,a.zpp_inner=null,a.zpp_pool=jn.poolVec2,jn.poolVec2=a,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s,t.wrap=null}t.prev=t.next=null,t.next=dr.zpp_pool,dr.zpp_pool=t}return this},bn.prototype.clear=function(){for(;null!=this.zpp_inner.vertices;){var e,t=this.zpp_inner.vertices;if(null!=this.zpp_inner.vertices&&this.zpp_inner.vertices.prev==this.zpp_inner.vertices)this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,e=this.zpp_inner.vertices=null;else{var i=this.zpp_inner.vertices.next;this.zpp_inner.vertices.prev.next=this.zpp_inner.vertices.next,this.zpp_inner.vertices.next.prev=this.zpp_inner.vertices.prev,this.zpp_inner.vertices.next=this.zpp_inner.vertices.prev=null,this.zpp_inner.vertices=null,e=i}if(this.zpp_inner.vertices=e,null!=t.wrap){t.wrap.zpp_inner._inuse=!1;var n=t.wrap,r=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,t.wrap=null}t.prev=t.next=null,t.next=dr.zpp_pool,dr.zpp_pool=t}return this},bn.prototype.copy=function(){var e=bn.get(),t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r,o=n,a=o.x,s=o.y;null==dr.zpp_pool?r=new dr:(r=dr.zpp_pool,dr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=a,r.y=s;var l=r;if(null==e.zpp_inner.vertices?e.zpp_inner.vertices=l.prev=l.next=l:(l.prev=e.zpp_inner.vertices,l.next=e.zpp_inner.vertices.next,e.zpp_inner.vertices.next.prev=l,e.zpp_inner.vertices.next=l),e.zpp_inner.vertices=l,(n=n.next)==i)break}return e.skipForward(1)},bn.prototype.dispose=function(){this.clear();this.zpp_pool=jn.poolGeomPoly,jn.poolGeomPoly=this},bn.prototype.toString=function(){var e="GeomPoly[",t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r!=this.zpp_inner.vertices&&(e+=","),e+="{"+r.x+","+r.y+"}",(n=n.next)==i)break}return e+"]"},bn.prototype.area=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return 0;var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(e+=r.x*(r.next.y-r.prev.y),(n=n.next)==i)break}var o=.5*e;return o<0?-o:o},bn.prototype.winding=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED;var e=0,t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(e+=r.x*(r.next.y-r.prev.y),(n=n.next)==i)break}var o=.5*e;return 0<o?(null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),Uo.Winding_CLOCKWISE):0==o?(null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED):(null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),Uo.Winding_ANTICLOCKWISE)},bn.prototype.contains=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.y,o=!1,a=this.zpp_inner.vertices,s=this.zpp_inner.vertices;if(null!=a)for(var l=a;;){var p=l,h=p.prev;if((p.y<r&&h.y>=r||h.y<r&&p.y>=r)&&(p.x<=i||h.x<=i)&&p.x+(r-p.y)/(h.y-p.y)*(h.x-p.x)<i&&(o=!o),(l=l.next)==s)break}var u=o;if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}return u},bn.prototype.isClockwise=function(){var e=this.winding();return null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),e==Uo.Winding_CLOCKWISE},bn.prototype.isConvex=function(){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return!0;var e=!1,t=!1,i=!0,n=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=n)for(var o=n;;){var a,s,l=o,p=l.prev,h=l.next;a=h.x-l.x,s=h.y-l.y;var u;u=l.x-p.x;var c=(l.y-p.y)*a-u*s;if(0<c?t=!0:c<0&&(e=!0),t&&e){i=!1;break}if((o=o.next)==r)break}return i},bn.prototype.isSimple=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||Dt.isSimple(this.zpp_inner.vertices)},bn.prototype.isMonotone=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||Tt.isMonotone(this.zpp_inner.vertices)},bn.prototype.isDegenerate=function(){return null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next||this.area()<Qs.epsilon},bn.prototype.simplify=function(e){if(null==this.zpp_inner.vertices||null==this.zpp_inner.vertices.next||this.zpp_inner.vertices.prev==this.zpp_inner.vertices.next)return this.copy();var t=jt.simplify(this.zpp_inner.vertices,e),i=bn.get();return i.zpp_inner.vertices=t,i},bn.prototype.simpleDecomposition=function(e){null==At.sharedGVList&&(At.sharedGVList=new Si);for(var t=Dt.decompose(this.zpp_inner.vertices,At.sharedGVList),i=null==e?new wn:e;null!=t.head;){var n=t.pop_unsafe(),r=bn.get();r.zpp_inner.vertices=n,i.zpp_inner.reverse_flag?i.push(r):i.unshift(r)}return i},bn.prototype.monotoneDecomposition=function(e){null==Tt.sharedPPoly&&(Tt.sharedPPoly=new At);var t=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==At.sharedGVList&&(At.sharedGVList=new Si);for(var i=t.extract(At.sharedGVList),n=null==e?new wn:e;null!=i.head;){var r=i.pop_unsafe(),o=bn.get();o.zpp_inner.vertices=r,n.zpp_inner.reverse_flag?n.push(o):n.unshift(o)}return n},bn.prototype.convexDecomposition=function(e,t){null==e&&(e=!1),null==Tt.sharedPPoly&&(Tt.sharedPPoly=new At);var i=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==At.sharedPPList&&(At.sharedPPList=new wi);for(var n=i.extract_partitions(At.sharedPPList),r=null==t?new wn:t;null!=n.head;){var o=n.pop_unsafe();Ut.triangulate(o),e&&Ut.optimise(o),gt.optimise(o),null==At.sharedGVList&&(At.sharedGVList=new Si);var a=o.extract(At.sharedGVList);for(o.next=At.zpp_pool,At.zpp_pool=o;null!=a.head;){var s=a.pop_unsafe(),l=bn.get();l.zpp_inner.vertices=s,r.zpp_inner.reverse_flag?r.push(l):r.unshift(l)}}return r},bn.prototype.triangularDecomposition=function(e,t){null==e&&(e=!1),null==Tt.sharedPPoly&&(Tt.sharedPPoly=new At);var i=Tt.decompose(this.zpp_inner.vertices,Tt.sharedPPoly);null==At.sharedPPList&&(At.sharedPPList=new wi);for(var n=i.extract_partitions(At.sharedPPList),r=null==t?new wn:t;null!=n.head;){var o=n.pop_unsafe();Ut.triangulate(o),e&&Ut.optimise(o),null==At.sharedGVList&&(At.sharedGVList=new Si);var a=o.extract(At.sharedGVList);for(o.next=At.zpp_pool,At.zpp_pool=o;null!=a.head;){var s=a.pop_unsafe(),l=bn.get();l.zpp_inner.vertices=s,r.zpp_inner.reverse_flag?r.push(l):r.unshift(l)}}return r},bn.prototype.inflate=function(e){var t=bn.get(),i=this.winding();null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),i==Uo.Winding_CLOCKWISE&&(e=-e);var n=this.zpp_inner.vertices,r=this.zpp_inner.vertices;if(null!=n)for(var o=n;;){var a,s,l,p,h=o,u=h.prev,c=h.next;a=h.x-u.x,s=h.y-u.y,l=c.x-h.x,p=c.y-h.y;var d=0,_=0,y=0,m=0;d=a,_=s;var f=1/Math.sqrt(d*d+_*_),x=d*=f;d=-(_*=f),_=x;d*=e,_*=e,y=l,m=p;var v=1/Math.sqrt(y*y+m*m),z=y*=v;y=-(m*=v),m=z;var g=p*((y*=e)-d)-l*((m*=e)-_),b=0==g?0:g/(p*a-l*s),w=0,S=0;w=h.x+d,S=h.y+_;var C;if(w+=a*b,S+=s*b,null==jn.poolVec2?C=new ht:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var M;null==el.zpp_pool?M=new el:(M=el.zpp_pool,el.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=w,M.y=S,C.zpp_inner=M,C.zpp_inner.outer=C}else{var P,k=C.zpp_inner;if(null!=k._validate&&k._validate(),C.zpp_inner.x==w){var T=C.zpp_inner;null!=T._validate&&T._validate(),P=C.zpp_inner.y==S}else P=!1;if(!P){C.zpp_inner.x=w,C.zpp_inner.y=S;var O=C.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}if(C.zpp_inner.weak=!1,t.push(C),(o=o.next)==r)break}return t.skipForward(1)},bn.prototype.cut=function(e,t,i,n,r){null==n&&(n=!1),null==i&&(i=!1);var o=Mn.run(this.zpp_inner.vertices,e,t,i,n,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a}if(t.zpp_inner.weak){var s=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s}return o},bn.prototype.transform=function(e){var t=this.zpp_inner.vertices,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n,o=e.zpp_inner.a*r.x+e.zpp_inner.b*r.y+e.zpp_inner.tx;if(r.y=e.zpp_inner.c*r.x+e.zpp_inner.d*r.y+e.zpp_inner.ty,r.x=o,(n=n.next)==i)break}return this},bn.prototype.bounds=function(){var e=1e100,t=1e100,i=-1e100,n=-1e100,r=this.zpp_inner.vertices,o=this.zpp_inner.vertices;if(null!=r)for(var a=r;;){var s=a;if(s.x<e&&(e=s.x),s.y<t&&(t=s.y),s.x>i&&(i=s.x),s.y>n&&(n=s.y),(a=a.next)==o)break}return new N(e,t,i-e,n-t)},bn.prototype.top=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.y<e.y&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var l;null==el.zpp_pool?l=new el:(l=el.zpp_pool,el.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=a,l.y=s,o.zpp_inner=l,o.zpp_inner.outer=o}else{var p,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),p=o.zpp_inner.y==s}else p=!1;if(!p){o.zpp_inner.x=a,o.zpp_inner.y=s;var c=o.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.bottom=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.y>e.y&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var l;null==el.zpp_pool?l=new el:(l=el.zpp_pool,el.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=a,l.y=s,o.zpp_inner=l,o.zpp_inner.outer=o}else{var p,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),p=o.zpp_inner.y==s}else p=!1;if(!p){o.zpp_inner.x=a,o.zpp_inner.y=s;var c=o.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.left=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.x<e.x&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var l;null==el.zpp_pool?l=new el:(l=el.zpp_pool,el.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=a,l.y=s,o.zpp_inner=l,o.zpp_inner.outer=o}else{var p,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),p=o.zpp_inner.y==s}else p=!1;if(!p){o.zpp_inner.x=a,o.zpp_inner.y=s;var c=o.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.right=function(){var e=this.zpp_inner.vertices,t=this.zpp_inner.vertices.next,i=this.zpp_inner.vertices;if(null!=t)for(var n=t;;){var r=n;if(r.x>e.x&&(e=r),(n=n.next)==i)break}if(null==e.wrap){var o,a=e.x,s=e.y;if(null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var l;null==el.zpp_pool?l=new el:(l=el.zpp_pool,el.zpp_pool=l.next,l.next=null),l.weak=!1,l._immutable=!1,l.x=a,l.y=s,o.zpp_inner=l,o.zpp_inner.outer=o}else{var p,h=o.zpp_inner;if(null!=h._validate&&h._validate(),o.zpp_inner.x==a){var u=o.zpp_inner;null!=u._validate&&u._validate(),p=o.zpp_inner.y==s}else p=!1;if(!p){o.zpp_inner.x=a,o.zpp_inner.y=s;var c=o.zpp_inner;null!=c._invalidate&&c._invalidate(c)}}o.zpp_inner.weak=!1,e.wrap=o,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}return e.wrap},bn.prototype.__class__=bn;var Ze=nape.geom.GeomPolyIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Ze.__name__=["nape","geom","GeomPolyIterator"],Ze.get=function(e){var t;if(null==Ze.zpp_pool){An.internal=!0;var i=new Ze;An.internal=!1,t=i}else{var n=Ze.zpp_pool;Ze.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Ze.prototype.zpp_inner=null,Ze.prototype.zpp_i=null,Ze.prototype.zpp_critical=null,Ze.prototype.zpp_next=null,Ze.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=this).zpp_inner=null,!1)},Ze.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Ze.prototype.__class__=Ze;var wn=nape.geom.GeomPolyList=function(){this.zpp_inner=null,this.zpp_inner=new An,this.zpp_inner.outer=this};wn.__name__=["nape","geom","GeomPolyList"],wn.fromArray=function(e){for(var t=new wn,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},wn.prototype.zpp_inner=null,wn.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},wn.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},wn.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},wn.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},wn.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},wn.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},wn.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},wn.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},wn.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},wn.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},wn.prototype.empty=function(){return null==this.zpp_inner.inner.head},wn.prototype.iterator=function(){return this.zpp_inner.valmod(),Ze.get(this)},wn.prototype.copy=function(e){null==e&&(e=!1);var t=new wn;this.zpp_inner.valmod();for(var i=Ze.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},wn.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Ze.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},wn.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Ze.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},wn.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Ze.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Ze.zpp_pool,(Ze.zpp_pool=t).zpp_inner=null;break}}return this},wn.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(wn.prototype,"length",{get:wn.prototype.get_length}),wn.prototype.__class__=wn;var H=nape.geom.GeomVertexIterator=function(){};H.__name__=["nape","geom","GeomVertexIterator"],H.prototype.zpp_inner=null,H.prototype.hasNext=function(){var e=this.zpp_inner.ptr!=this.zpp_inner.start||this.zpp_inner.first;if(this.zpp_inner.first=!1,!e){var t=this.zpp_inner;t.outer.zpp_inner=null,t.ptr=t.start=null,t.next=Ct.zpp_pool,Ct.zpp_pool=t}return e},H.prototype.next=function(){var e=this.zpp_inner.ptr;if(null==e.wrap){var t,i=e.x,n=e.y;if(null==jn.poolVec2?t=new ht:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}}t.zpp_inner.weak=!1,e.wrap=t,e.wrap.zpp_inner._inuse=!0,e.wrap.zpp_inner._invalidate=$(e,e.modwrap),e.wrap.zpp_inner._validate=$(e,e.getwrap)}var p=e.wrap;return this.zpp_inner.ptr=this.zpp_inner.forward?this.zpp_inner.ptr.next:this.zpp_inner.ptr.prev,p},H.prototype.__class__=H;var W=nape.geom.MarchingSquares=function(){};W.__name__=["nape","geom","MarchingSquares"],W.run=function(e,t,i,n,r,o,a){null==o&&(o=!0),null==n&&(n=2);var s=null!=a?a:new wn;if(null==r){var l=t.zpp_inner;null!=l._validate&&l._validate();var p=t.zpp_inner.minx,h=t.zpp_inner;null!=h._validate&&h._validate();var u=t.zpp_inner.miny,c=t.zpp_inner.getmax(),d=c.zpp_inner;null!=d._validate&&d._validate();var _=c.zpp_inner.x,y=t.zpp_inner.getmax(),m=y.zpp_inner;null!=m._validate&&m._validate(),yr.run(e,p,u,_,y.zpp_inner.y,i,n,o,s)}else{var f=t.zpp_inner;null!=f._validate&&f._validate();var x=t.zpp_inner,v=x.maxx-x.minx,z=r.zpp_inner;null!=z._validate&&z._validate();var g=v/r.zpp_inner.x,b=t.zpp_inner;null!=b._validate&&b._validate();var w=t.zpp_inner,S=w.maxy-w.miny,C=r.zpp_inner;null!=C._validate&&C._validate();var M=S/r.zpp_inner.y,P=0|g,k=0|M;P!=g&&++P,k!=M&&++k;for(var T=0,O=P;T<O;){var A=T++,E=t.zpp_inner;null!=E._validate&&E._validate();var G=t.zpp_inner.minx,I=r.zpp_inner;null!=I._validate&&I._validate();var B,L=G+r.zpp_inner.x*A;if(A==P-1){var D=t.zpp_inner.getmax(),R=D.zpp_inner;null!=R._validate&&R._validate(),B=D.zpp_inner.x}else{var F=r.zpp_inner;null!=F._validate&&F._validate(),B=L+r.zpp_inner.x}for(var j=0,N=k;j<N;){var U=j++,V=t.zpp_inner;null!=V._validate&&V._validate();var H=t.zpp_inner.miny,W=r.zpp_inner;null!=W._validate&&W._validate();var X,q=H+r.zpp_inner.y*U;if(U==k-1){var Y=t.zpp_inner.getmax(),K=Y.zpp_inner;null!=K._validate&&K._validate(),X=Y.zpp_inner.y}else{var Z=r.zpp_inner;null!=Z._validate&&Z._validate(),X=q+r.zpp_inner.y}yr.run(e,L,q,B,X,i,n,o,s)}}}if(i.zpp_inner.weak){var J=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=J.outer&&(J.outer.zpp_inner=null,J.outer=null),J._isimmutable=null,J._validate=null,J._invalidate=null,J.next=el.zpp_pool,el.zpp_pool=J}if(null!=r&&r.zpp_inner.weak){var Q=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=Q.outer&&(Q.outer.zpp_inner=null,Q.outer=null),Q._isimmutable=null,Q._validate=null,Q._invalidate=null,Q.next=el.zpp_pool,el.zpp_pool=Q}return s},W.prototype.__class__=W;var ne=nape.geom.Mat23=function(e,t,i,n,r,o){null==o&&(o=0),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=1),this.zpp_inner=null,this.zpp_inner=Pt.get(),(this.zpp_inner.outer=this).zpp_inner.a=e;var a=this.zpp_inner;null!=a._invalidate&&a._invalidate(),this.zpp_inner.b=t;var s=this.zpp_inner;null!=s._invalidate&&s._invalidate(),this.zpp_inner.tx=r;var l=this.zpp_inner;null!=l._invalidate&&l._invalidate(),this.zpp_inner.c=i;var p=this.zpp_inner;null!=p._invalidate&&p._invalidate(),this.zpp_inner.d=n;var h=this.zpp_inner;null!=h._invalidate&&h._invalidate(),this.zpp_inner.ty=o;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate()};ne.__name__=["nape","geom","Mat23"],ne.rotation=function(e){var t=Math.cos(e),i=Math.sin(e);return new ne(t,-i,i,t,0,0)},ne.translation=function(e,t){return new ne(1,0,0,1,e,t)},ne.scale=function(e,t){return new ne(e,0,0,t,0,0)},ne.prototype.zpp_inner=null,ne.prototype.get_a=function(){return this.zpp_inner.a},ne.prototype.set_a=function(e){this.zpp_inner.a=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.a},ne.prototype.get_b=function(){return this.zpp_inner.b},ne.prototype.set_b=function(e){this.zpp_inner.b=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.b},ne.prototype.get_c=function(){return this.zpp_inner.c},ne.prototype.set_c=function(e){this.zpp_inner.c=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.c},ne.prototype.get_d=function(){return this.zpp_inner.d},ne.prototype.set_d=function(e){this.zpp_inner.d=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.d},ne.prototype.get_tx=function(){return this.zpp_inner.tx},ne.prototype.set_tx=function(e){this.zpp_inner.tx=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.tx},ne.prototype.get_ty=function(){return this.zpp_inner.ty},ne.prototype.set_ty=function(e){this.zpp_inner.ty=e;var t=this.zpp_inner;return null!=t._invalidate&&t._invalidate(),this.zpp_inner.ty},ne.prototype.copy=function(){return new ne(this.zpp_inner.a,this.zpp_inner.b,this.zpp_inner.c,this.zpp_inner.d,this.zpp_inner.tx,this.zpp_inner.ty)},ne.prototype.set=function(e){var t=e.zpp_inner;this.zpp_inner.setas(t.a,t.b,t.c,t.d,t.tx,t.ty);var i=this.zpp_inner;return null!=i._invalidate&&i._invalidate(),this},ne.prototype.setAs=function(e,t,i,n,r,o){null==o&&(o=0),null==r&&(r=0),null==n&&(n=1),null==i&&(i=0),null==t&&(t=0),null==e&&(e=1),this.zpp_inner.setas(e,t,i,n,r,o);var a=this.zpp_inner;return null!=a._invalidate&&a._invalidate(),this},ne.prototype.reset=function(){return this.setAs()},ne.prototype.get_determinant=function(){return this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c},ne.prototype.singular=function(){var e=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d,t=this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c;return t<0&&(t=-t),e>Qs.illConditionedThreshold*t},ne.prototype.inverse=function(){var e=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);return new ne(this.zpp_inner.d*e,-this.zpp_inner.b*e,-this.zpp_inner.c*e,this.zpp_inner.a*e,(this.zpp_inner.b*this.zpp_inner.ty-this.zpp_inner.d*this.zpp_inner.tx)*e,(this.zpp_inner.c*this.zpp_inner.tx-this.zpp_inner.a*this.zpp_inner.ty)*e)},ne.prototype.transpose=function(){return new ne(this.zpp_inner.a,this.zpp_inner.c,this.zpp_inner.b,this.zpp_inner.d,-this.zpp_inner.a*this.zpp_inner.tx-this.zpp_inner.c*this.zpp_inner.ty,-this.zpp_inner.b*this.zpp_inner.tx-this.zpp_inner.d*this.zpp_inner.ty)},ne.prototype.concat=function(e){return new ne(e.zpp_inner.a*this.zpp_inner.a+e.zpp_inner.b*this.zpp_inner.c,e.zpp_inner.a*this.zpp_inner.b+e.zpp_inner.b*this.zpp_inner.d,e.zpp_inner.c*this.zpp_inner.a+e.zpp_inner.d*this.zpp_inner.c,e.zpp_inner.c*this.zpp_inner.b+e.zpp_inner.d*this.zpp_inner.d,e.zpp_inner.a*this.zpp_inner.tx+e.zpp_inner.b*this.zpp_inner.ty+e.zpp_inner.tx,e.zpp_inner.c*this.zpp_inner.tx+e.zpp_inner.d*this.zpp_inner.ty+e.zpp_inner.ty)},ne.prototype.transform=function(e,t,i){var n;if(null==i&&(i=!1),null==t&&(t=!1),t){var r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x*this.zpp_inner.a,a=e.zpp_inner;null!=a._validate&&a._validate();var s=o+e.zpp_inner.y*this.zpp_inner.b,l=e.zpp_inner;null!=l._validate&&l._validate();var p=e.zpp_inner.x*this.zpp_inner.c,h=e.zpp_inner;null!=h._validate&&h._validate();var u,c=p+e.zpp_inner.y*this.zpp_inner.d;if(null==jn.poolVec2?u=new ht:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var d;null==el.zpp_pool?d=new el:(d=el.zpp_pool,el.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=s,d.y=c,u.zpp_inner=d,u.zpp_inner.outer=u}else{var _,y=u.zpp_inner;if(null!=y._validate&&y._validate(),u.zpp_inner.x==s){var m=u.zpp_inner;null!=m._validate&&m._validate(),_=u.zpp_inner.y==c}else _=!1;if(!_){u.zpp_inner.x=s,u.zpp_inner.y=c;var f=u.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}u.zpp_inner.weak=i,n=u}else{var x=e.zpp_inner;null!=x._validate&&x._validate();var v=e.zpp_inner.x*this.zpp_inner.a,z=e.zpp_inner;null!=z._validate&&z._validate();var g=v+e.zpp_inner.y*this.zpp_inner.b+this.zpp_inner.tx,b=e.zpp_inner;null!=b._validate&&b._validate();var w=e.zpp_inner.x*this.zpp_inner.c,S=e.zpp_inner;null!=S._validate&&S._validate();var C,M=w+e.zpp_inner.y*this.zpp_inner.d+this.zpp_inner.ty;if(null==jn.poolVec2?C=new ht:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==el.zpp_pool?P=new el:(P=el.zpp_pool,el.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=g,P.y=M,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==g){var O=C.zpp_inner;null!=O._validate&&O._validate(),k=C.zpp_inner.y==M}else k=!1;if(!k){C.zpp_inner.x=g,C.zpp_inner.y=M;var A=C.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}C.zpp_inner.weak=i,n=C}if(e.zpp_inner.weak){var E=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=E.outer&&(E.outer.zpp_inner=null,E.outer=null),E._isimmutable=null,E._validate=null,E._invalidate=null,E.next=el.zpp_pool,el.zpp_pool=E}return n},ne.prototype.inverseTransform=function(e,t,i){null==i&&(i=!1),null==t&&(t=!1);var n,r=1/(this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c);if(t){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x*this.zpp_inner.d,s=e.zpp_inner;null!=s._validate&&s._validate();var l=(a-e.zpp_inner.y*this.zpp_inner.b)*r,p=e.zpp_inner;null!=p._validate&&p._validate();var h=e.zpp_inner.y*this.zpp_inner.a,u=e.zpp_inner;null!=u._validate&&u._validate();var c,d=(h-e.zpp_inner.x*this.zpp_inner.c)*r;if(null==jn.poolVec2?c=new ht:(c=jn.poolVec2,jn.poolVec2=c.zpp_pool,c.zpp_pool=null),null==c.zpp_inner){var _;null==el.zpp_pool?_=new el:(_=el.zpp_pool,el.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=l,_.y=d,c.zpp_inner=_,c.zpp_inner.outer=c}else{var y,m=c.zpp_inner;if(null!=m._validate&&m._validate(),c.zpp_inner.x==l){var f=c.zpp_inner;null!=f._validate&&f._validate(),y=c.zpp_inner.y==d}else y=!1;if(!y){c.zpp_inner.x=l,c.zpp_inner.y=d;var x=c.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}c.zpp_inner.weak=i,n=c}else{var v=e.zpp_inner;null!=v._validate&&v._validate();var z=e.zpp_inner.x-this.zpp_inner.tx,g=e.zpp_inner;null!=g._validate&&g._validate();var b,w=e.zpp_inner.y-this.zpp_inner.ty,S=(z*this.zpp_inner.d-w*this.zpp_inner.b)*r,C=(w*this.zpp_inner.a-z*this.zpp_inner.c)*r;if(null==jn.poolVec2?b=new ht:(b=jn.poolVec2,jn.poolVec2=b.zpp_pool,b.zpp_pool=null),null==b.zpp_inner){var M;null==el.zpp_pool?M=new el:(M=el.zpp_pool,el.zpp_pool=M.next,M.next=null),M.weak=!1,M._immutable=!1,M.x=S,M.y=C,b.zpp_inner=M,b.zpp_inner.outer=b}else{var P,k=b.zpp_inner;if(null!=k._validate&&k._validate(),b.zpp_inner.x==S){var T=b.zpp_inner;null!=T._validate&&T._validate(),P=b.zpp_inner.y==C}else P=!1;if(!P){b.zpp_inner.x=S,b.zpp_inner.y=C;var O=b.zpp_inner;null!=O._invalidate&&O._invalidate(O)}}b.zpp_inner.weak=i,n=b}if(e.zpp_inner.weak){var A=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=A.outer&&(A.outer.zpp_inner=null,A.outer=null),A._isimmutable=null,A._validate=null,A._invalidate=null,A.next=el.zpp_pool,el.zpp_pool=A}return n},ne.prototype.toString=function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},ne.prototype.equiorthogonal=function(){if(this.singular())return!1;var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<Qs.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-this.zpp_inner.c*this.zpp_inner.c-this.zpp_inner.d*this.zpp_inner.d;return t*t<Qs.epsilon}return!1},ne.prototype.orthogonal=function(){var e=this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d;if(e*e<Qs.epsilon){var t=this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.b*this.zpp_inner.b-1,i=this.zpp_inner.c*this.zpp_inner.c+this.zpp_inner.d*this.zpp_inner.d-1;return t*t<Qs.epsilon&&i*i<Qs.epsilon}return!1},ne.prototype.equiorthogonalise=function(){if(!this.equiorthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d),i=(e+t)/2;e=i/e,t=i/t;this.zpp_inner.a=this.zpp_inner.a*e;var n=this.zpp_inner;null!=n._invalidate&&n._invalidate();this.zpp_inner.c=this.zpp_inner.c*e;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate();this.zpp_inner.b=this.zpp_inner.b*t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate();this.zpp_inner.d=this.zpp_inner.d*t;var a=this.zpp_inner;null!=a._invalidate&&a._invalidate();var s=.25*Math.PI-.5*Math.acos((this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d)/(i*i));0<this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c&&(s=-s);var l=Math.sin(s),p=Math.cos(s),h=this.zpp_inner.a*p-this.zpp_inner.c*l,u=this.zpp_inner.b*p+this.zpp_inner.d*l;this.zpp_inner.c=this.zpp_inner.c*p+this.zpp_inner.a*l;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(),this.zpp_inner.a=h;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(),this.zpp_inner.d=this.zpp_inner.d*p-this.zpp_inner.b*l;var _=this.zpp_inner;null!=_._invalidate&&_._invalidate(),this.zpp_inner.b=u;var y=this.zpp_inner;null!=y._invalidate&&y._invalidate();var m=this.zpp_inner;null!=m._invalidate&&m._invalidate()}return this},ne.prototype.orthogonalise=function(){if(!this.orthogonal()){var e=Math.sqrt(this.zpp_inner.a*this.zpp_inner.a+this.zpp_inner.c*this.zpp_inner.c),t=Math.sqrt(this.zpp_inner.b*this.zpp_inner.b+this.zpp_inner.d*this.zpp_inner.d);e=1/e,t=1/t;this.zpp_inner.a=this.zpp_inner.a*e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate();this.zpp_inner.c=this.zpp_inner.c*e;var n=this.zpp_inner;null!=n._invalidate&&n._invalidate();this.zpp_inner.b=this.zpp_inner.b*t;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate();this.zpp_inner.d=this.zpp_inner.d*t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate();var a=.25*Math.PI-.5*Math.acos((this.zpp_inner.a*this.zpp_inner.b+this.zpp_inner.c*this.zpp_inner.d)/1);0<this.zpp_inner.a*this.zpp_inner.d-this.zpp_inner.b*this.zpp_inner.c&&(a=-a);var s=Math.sin(a),l=Math.cos(a),p=this.zpp_inner.a*l-this.zpp_inner.c*s,h=this.zpp_inner.b*l+this.zpp_inner.d*s;this.zpp_inner.c=this.zpp_inner.c*l+this.zpp_inner.a*s;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate(),this.zpp_inner.a=p;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(),this.zpp_inner.d=this.zpp_inner.d*l-this.zpp_inner.b*s;var d=this.zpp_inner;null!=d._invalidate&&d._invalidate(),this.zpp_inner.b=h;var _=this.zpp_inner;null!=_._invalidate&&_._invalidate();var y=this.zpp_inner;null!=y._invalidate&&y._invalidate()}return this},Object.defineProperty(ne.prototype,"a",{get:ne.prototype.get_a,set:ne.prototype.set_a}),Object.defineProperty(ne.prototype,"b",{get:ne.prototype.get_b,set:ne.prototype.set_b}),Object.defineProperty(ne.prototype,"c",{get:ne.prototype.get_c,set:ne.prototype.set_c}),Object.defineProperty(ne.prototype,"d",{get:ne.prototype.get_d,set:ne.prototype.set_d}),Object.defineProperty(ne.prototype,"tx",{get:ne.prototype.get_tx,set:ne.prototype.set_tx}),Object.defineProperty(ne.prototype,"ty",{get:ne.prototype.get_ty,set:ne.prototype.set_ty}),Object.defineProperty(ne.prototype,"determinant",{get:ne.prototype.get_determinant}),ne.prototype.__class__=ne;var X=nape.geom.MatMN=function(e,t){this.zpp_inner=null,this.zpp_inner=new kt(e,t),this.zpp_inner.outer=this};X.__name__=["nape","geom","MatMN"],X.prototype.zpp_inner=null,X.prototype.get_rows=function(){return this.zpp_inner.m},X.prototype.get_cols=function(){return this.zpp_inner.n},X.prototype.x=function(e,t){return this.zpp_inner.x[e*this.zpp_inner.n+t]},X.prototype.setx=function(e,t,i){return this.zpp_inner.x[e*this.zpp_inner.n+t]=i},X.prototype.toString=function(){for(var e="{ ",t=!0,i=0,n=this.zpp_inner.m;i<n;){var r=i++;t||(e+="; "),t=!1;for(var o=0,a=this.zpp_inner.n;o<a;)e+=this.zpp_inner.x[r*this.zpp_inner.n+o++]+" "}return e+="}"},X.prototype.transpose=function(){for(var e=new X(this.zpp_inner.n,this.zpp_inner.m),t=0,i=this.zpp_inner.m;t<i;)for(var n=t++,r=0,o=this.zpp_inner.n;r<o;){var a=r++;e.zpp_inner.x[a*e.zpp_inner.n+n]=this.zpp_inner.x[n*this.zpp_inner.n+a]}return e},X.prototype.mul=function(e){for(var t=new X(this.zpp_inner.m,e.zpp_inner.n),i=0,n=this.zpp_inner.m;i<n;)for(var r=i++,o=0,a=e.zpp_inner.n;o<a;){for(var s=o++,l=0,p=0,h=this.zpp_inner.n;p<h;){var u=p++;l+=this.zpp_inner.x[r*this.zpp_inner.n+u]*e.zpp_inner.x[u*e.zpp_inner.n+s]}t.zpp_inner.x[r*t.zpp_inner.n+s]=l}return t},Object.defineProperty(X.prototype,"rows",{get:X.prototype.get_rows}),Object.defineProperty(X.prototype,"cols",{get:X.prototype.get_cols}),X.prototype.__class__=X;var q=nape.geom.Ray=function(e,t){this.zpp_inner=null,this.zpp_inner=new Et;var i=this.zpp_inner.origin,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a,s=e.zpp_inner.y,l=i.zpp_inner;if(null!=l._validate&&l._validate(),i.zpp_inner.x==r){var p=i.zpp_inner;null!=p._validate&&p._validate(),a=i.zpp_inner.y==s}else a=!1;if(!a){i.zpp_inner.x=r,i.zpp_inner.y=s;var h=i.zpp_inner;null!=h._invalidate&&h._invalidate(h)}if(e.zpp_inner.weak){var u=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=el.zpp_pool,el.zpp_pool=u}var c=this.zpp_inner.direction,d=t.zpp_inner;null!=d._validate&&d._validate();var _=t.zpp_inner.x,y=t.zpp_inner;null!=y._validate&&y._validate();var m,f=t.zpp_inner.y,x=c.zpp_inner;if(null!=x._validate&&x._validate(),c.zpp_inner.x==_){var v=c.zpp_inner;null!=v._validate&&v._validate(),m=c.zpp_inner.y==f}else m=!1;if(!m){c.zpp_inner.x=_,c.zpp_inner.y=f;var z=c.zpp_inner;null!=z._invalidate&&z._invalidate(z)}if(t.zpp_inner.weak){var g=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=g.outer&&(g.outer.zpp_inner=null,g.outer=null),g._isimmutable=null,g._validate=null,g._invalidate=null,g.next=el.zpp_pool,el.zpp_pool=g}this.zpp_inner.zip_dir=!0,this.zpp_inner.maxdist=1/0};q.__name__=["nape","geom","Ray"],q.fromSegment=function(e,t){var i=new q(e,t.sub(e,!0)),n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.y,s=t.zpp_inner;null!=s._validate&&s._validate();var l=t.zpp_inner.x,p=t.zpp_inner;null!=p._validate&&p._validate();var h,u;if(h=r-l,u=a-t.zpp_inner.y,i.zpp_inner.maxdist=Math.sqrt(h*h+u*u),e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}if(t.zpp_inner.weak){var d=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d}return i},q.prototype.zpp_inner=null,q.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},q.prototype.get_origin=function(){return this.zpp_inner.origin},q.prototype.set_origin=function(e){var t=this.zpp_inner.origin,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return this.zpp_inner.origin},q.prototype.get_direction=function(){return this.zpp_inner.direction},q.prototype.set_direction=function(e){var t=this.zpp_inner.direction,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return this.zpp_inner.zip_dir=!0,this.zpp_inner.direction},q.prototype.get_maxDistance=function(){return this.zpp_inner.maxdist},q.prototype.set_maxDistance=function(e){return this.zpp_inner.maxdist=e,this.zpp_inner.maxdist},q.prototype.aabb=function(){return this.zpp_inner.rayAABB().wrapper()},q.prototype.at=function(e,t){null==t&&(t=!1),this.zpp_inner.validate_dir();var i=this.zpp_inner.origin,n=i.zpp_inner;null!=n._validate&&n._validate();var r=i.zpp_inner.x+e*this.zpp_inner.dirx,o=this.zpp_inner.origin,a=o.zpp_inner;null!=a._validate&&a._validate();var s,l=o.zpp_inner.y+e*this.zpp_inner.diry;if(null==jn.poolVec2?s=new ht:(s=jn.poolVec2,jn.poolVec2=s.zpp_pool,s.zpp_pool=null),null==s.zpp_inner){var p;null==el.zpp_pool?p=new el:(p=el.zpp_pool,el.zpp_pool=p.next,p.next=null),p.weak=!1,p._immutable=!1,p.x=r,p.y=l,s.zpp_inner=p,s.zpp_inner.outer=s}else{var h,u=s.zpp_inner;if(null!=u._validate&&u._validate(),s.zpp_inner.x==r){var c=s.zpp_inner;null!=c._validate&&c._validate(),h=s.zpp_inner.y==l}else h=!1;if(!h){s.zpp_inner.x=r,s.zpp_inner.y=l;var d=s.zpp_inner;null!=d._invalidate&&d._invalidate(d)}}return s.zpp_inner.weak=t,s},q.prototype.copy=function(){var e=new q(this.zpp_inner.origin,this.zpp_inner.direction);return e.zpp_inner.maxdist=this.zpp_inner.maxdist,e},Object.defineProperty(q.prototype,"userData",{get:q.prototype.get_userData}),Object.defineProperty(q.prototype,"origin",{get:q.prototype.get_origin,set:q.prototype.set_origin}),Object.defineProperty(q.prototype,"direction",{get:q.prototype.get_direction,set:q.prototype.set_direction}),Object.defineProperty(q.prototype,"maxDistance",{get:q.prototype.get_maxDistance,set:q.prototype.set_maxDistance}),q.prototype.__class__=q;var Y=nape.geom.RayResult=function(){this.zpp_inner=null};Y.__name__=["nape","geom","RayResult"],Y.prototype.zpp_inner=null,Y.prototype.get_normal=function(){return this.zpp_inner.normal},Y.prototype.get_distance=function(){return this.zpp_inner.toiDistance},Y.prototype.get_inner=function(){return this.zpp_inner.inner},Y.prototype.get_shape=function(){return this.zpp_inner.shape},Y.prototype.dispose=function(){this.zpp_inner.free()},Y.prototype.toString=function(){return"{ shape: "+n.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+n.string(this.zpp_inner.inner)+" }"},Object.defineProperty(Y.prototype,"normal",{get:Y.prototype.get_normal}),Object.defineProperty(Y.prototype,"distance",{get:Y.prototype.get_distance}),Object.defineProperty(Y.prototype,"inner",{get:Y.prototype.get_inner}),Object.defineProperty(Y.prototype,"shape",{get:Y.prototype.get_shape}),Y.prototype.__class__=Y;var Je=nape.geom.RayResultIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Je.__name__=["nape","geom","RayResultIterator"],Je.get=function(e){var t;if(null==Je.zpp_pool){En.internal=!0;var i=new Je;En.internal=!1,t=i}else{var n=Je.zpp_pool;Je.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Je.prototype.zpp_inner=null,Je.prototype.zpp_i=null,Je.prototype.zpp_critical=null,Je.prototype.zpp_next=null,Je.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=Je.zpp_pool,(Je.zpp_pool=this).zpp_inner=null,!1)},Je.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Je.prototype.__class__=Je;var K=nape.geom.RayResultList=function(){this.zpp_inner=null,this.zpp_inner=new En,this.zpp_inner.outer=this};K.__name__=["nape","geom","RayResultList"],K.fromArray=function(e){for(var t=new K,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},K.prototype.zpp_inner=null,K.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},K.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e)},K.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},K.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},K.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e)}else this.zpp_inner.inner.add(e);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},K.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=e=null==i?this.zpp_inner.inner.head.elt:i.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e},K.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=e=null==t?this.zpp_inner.inner.head.elt:t.next.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=e=this.zpp_inner.inner.head.elt;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e},K.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},K.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e),this.zpp_inner.invalidate()),t},K.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},K.prototype.empty=function(){return null==this.zpp_inner.inner.head},K.prototype.iterator=function(){return this.zpp_inner.valmod(),Je.get(this)},K.prototype.copy=function(e){null==e&&(e=!1);var t=new K;this.zpp_inner.valmod();for(var i=Je.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Je.zpp_pool,(Je.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},K.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=Je.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},K.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=Je.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=Je.zpp_pool,(Je.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},K.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=Je.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Je.zpp_pool,(Je.zpp_pool=t).zpp_inner=null;break}}return this},K.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(K.prototype,"length",{get:K.prototype.get_length}),K.prototype.__class__=K;var ht=nape.geom.Vec2=function(e,t){var i;null==t&&(t=0),null==e&&(e=0),this.zpp_pool=null,(this.zpp_inner=null)==el.zpp_pool?i=new el:(i=el.zpp_pool,el.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=e,i.y=t,this.zpp_inner=i,this.zpp_inner.outer=this};ht.__name__=["nape","geom","Vec2"],ht.weak=function(e,t){var i;if(null==t&&(t=0),null==e&&(e=0),null==jn.poolVec2?i=new ht:(i=jn.poolVec2,jn.poolVec2=i.zpp_pool,i.zpp_pool=null),null==i.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=e,n.y=t,i.zpp_inner=n,i.zpp_inner.outer=i}else{var r,o=i.zpp_inner;if(null!=o._validate&&o._validate(),i.zpp_inner.x==e){var a=i.zpp_inner;null!=a._validate&&a._validate(),r=i.zpp_inner.y==t}else r=!1;if(!r){i.zpp_inner.x=e,i.zpp_inner.y=t;var s=i.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}return i.zpp_inner.weak=!0,i},ht.get=function(e,t,i){var n;if(null==i&&(i=!1),null==t&&(t=0),null==e&&(e=0),null==jn.poolVec2?n=new ht:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var r;null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t,n.zpp_inner=r,n.zpp_inner.outer=n}else{var o,a=n.zpp_inner;if(null!=a._validate&&a._validate(),n.zpp_inner.x==e){var s=n.zpp_inner;null!=s._validate&&s._validate(),o=n.zpp_inner.y==t}else o=!1;if(!o){n.zpp_inner.x=e,n.zpp_inner.y=t;var l=n.zpp_inner;null!=l._invalidate&&l._invalidate(l)}}return n.zpp_inner.weak=i,n},ht.fromPolar=function(e,t,i){null==i&&(i=!1);var n,r=e*Math.cos(t),o=e*Math.sin(t);if(null==jn.poolVec2?n=new ht:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var a;null==el.zpp_pool?a=new el:(a=el.zpp_pool,el.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=r,a.y=o,n.zpp_inner=a,n.zpp_inner.outer=n}else{var s,l=n.zpp_inner;if(null!=l._validate&&l._validate(),n.zpp_inner.x==r){var p=n.zpp_inner;null!=p._validate&&p._validate(),s=n.zpp_inner.y==o}else s=!1;if(!s){n.zpp_inner.x=r,n.zpp_inner.y=o;var h=n.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return n.zpp_inner.weak=i,n},ht.dsq=function(e,t){var i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.y,a=t.zpp_inner;null!=a._validate&&a._validate();var s=t.zpp_inner.x,l=t.zpp_inner;null!=l._validate&&l._validate();var p,h,u=(p=n-s)*p+(h=o-t.zpp_inner.y)*h;if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}if(t.zpp_inner.weak){var d=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d}return u},ht.distance=function(e,t){var i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.y,a=t.zpp_inner;null!=a._validate&&a._validate();var s=t.zpp_inner.x,l=t.zpp_inner;null!=l._validate&&l._validate();var p,h;p=n-s,h=o-t.zpp_inner.y;var u=Math.sqrt(p*p+h*h);if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}if(t.zpp_inner.weak){var d=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d}return u},ht.prototype.zpp_inner=null,ht.prototype.zpp_pool=null,ht.prototype.dispose=function(){var e=this.zpp_inner;this.zpp_inner.outer=null,this.zpp_inner=null;this.zpp_pool=jn.poolVec2,jn.poolVec2=this,null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=el.zpp_pool,el.zpp_pool=e},ht.prototype.copy=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y;if(null==jn.poolVec2?r=new ht:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==el.zpp_pool?a=new el:(a=el.zpp_pool,el.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,l=r.zpp_inner;if(null!=l._validate&&l._validate(),r.zpp_inner.x==i){var p=r.zpp_inner;null!=p._validate&&p._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},ht.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},ht.prototype.set_x=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.x!=e){this.zpp_inner.x=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.x},ht.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},ht.prototype.set_y=function(e){var t=this.zpp_inner;if(null!=t._validate&&t._validate(),this.zpp_inner.y!=e){this.zpp_inner.y=e;var i=this.zpp_inner;null!=i._invalidate&&i._invalidate(i)}var n=this.zpp_inner;return null!=n._validate&&n._validate(),this.zpp_inner.y},ht.prototype.get_length=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;return null!=a._validate&&a._validate(),Math.sqrt(n+o*this.zpp_inner.y)},ht.prototype.set_length=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var l=e/Math.sqrt(r+a*this.zpp_inner.y),p=this.zpp_inner;null!=p._validate&&p._validate();var h=this.zpp_inner.x*l,u=this.zpp_inner;if(null!=u._validate&&u._validate(),this.zpp_inner.x!=h){this.zpp_inner.x=h;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(c)}var d=this.zpp_inner;null!=d._validate&&d._validate();var _=this.zpp_inner;null!=_._validate&&_._validate();var y=this.zpp_inner.y*l,m=this.zpp_inner;if(null!=m._validate&&m._validate(),this.zpp_inner.y!=y){this.zpp_inner.y=y;var f=this.zpp_inner;null!=f._invalidate&&f._invalidate(f)}var x=this.zpp_inner;null!=x._validate&&x._validate();var v=this.zpp_inner;null!=v._invalidate&&v._invalidate(v);var z=this.zpp_inner;null!=z._validate&&z._validate();var g=this.zpp_inner.x,b=this.zpp_inner;null!=b._validate&&b._validate();var w=g*this.zpp_inner.x,S=this.zpp_inner;null!=S._validate&&S._validate();var C=this.zpp_inner.y,M=this.zpp_inner;return null!=M._validate&&M._validate(),Math.sqrt(w+C*this.zpp_inner.y)},ht.prototype.lsq=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;return null!=a._validate&&a._validate(),n+o*this.zpp_inner.y},ht.prototype.set=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r,o=e.zpp_inner.y,a=this.zpp_inner;if(null!=a._validate&&a._validate(),this.zpp_inner.x==i){var s=this.zpp_inner;null!=s._validate&&s._validate(),r=this.zpp_inner.y==o}else r=!1;if(!r){this.zpp_inner.x=i,this.zpp_inner.y=o;var l=this.zpp_inner;null!=l._invalidate&&l._invalidate(l)}if(e.zpp_inner.weak){var p=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p._isimmutable=null,p._validate=null,p._invalidate=null,p.next=el.zpp_pool,el.zpp_pool=p}return this},ht.prototype.setxy=function(e,t){var i,n=this.zpp_inner;if(null!=n._validate&&n._validate(),this.zpp_inner.x==e){var r=this.zpp_inner;null!=r._validate&&r._validate(),i=this.zpp_inner.y==t}else i=!1;if(!i){this.zpp_inner.x=e,this.zpp_inner.y=t;var o=this.zpp_inner;null!=o._invalidate&&o._invalidate(o)}return this},ht.prototype.get_angle=function(){var e,t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;if(null!=n._validate&&n._validate(),i==this.zpp_inner.y){var r=this.zpp_inner;null!=r._validate&&r._validate(),e=0==this.zpp_inner.x}else e=!1;if(e)return 0;var o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;return null!=s._validate&&s._validate(),Math.atan2(a,this.zpp_inner.x)},ht.prototype.set_angle=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var l,p,h=Math.sqrt(r+a*this.zpp_inner.y),u=h*Math.cos(e),c=h*Math.sin(e),d=this.zpp_inner;if(null!=d._validate&&d._validate(),this.zpp_inner.x==u){var _=this.zpp_inner;null!=_._validate&&_._validate(),l=this.zpp_inner.y==c}else l=!1;if(!l){this.zpp_inner.x=u,this.zpp_inner.y=c;var y=this.zpp_inner;null!=y._invalidate&&y._invalidate(y)}var m=this.zpp_inner;null!=m._validate&&m._validate();var f=this.zpp_inner.x,x=this.zpp_inner;if(null!=x._validate&&x._validate(),f==this.zpp_inner.y){var v=this.zpp_inner;null!=v._validate&&v._validate(),p=0==this.zpp_inner.x}else p=!1;if(p)return 0;var z=this.zpp_inner;null!=z._validate&&z._validate();var g=this.zpp_inner.y,b=this.zpp_inner;return null!=b._validate&&b._validate(),Math.atan2(g,this.zpp_inner.x)},ht.prototype.rotate=function(e){if(e%(2*Math.PI)!=0){var t=Math.sin(e),i=Math.cos(e),n=i*this.zpp_inner.x-t*this.zpp_inner.y;this.zpp_inner.y=this.zpp_inner.x*t+this.zpp_inner.y*i,this.zpp_inner.x=n;var r=this.zpp_inner;null!=r._invalidate&&r._invalidate(r)}return this},ht.prototype.reflect=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o,a=this.zpp_inner.y;if(null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var s;null==el.zpp_pool?s=new el:(s=el.zpp_pool,el.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=n,s.y=a,o.zpp_inner=s,o.zpp_inner.outer=o}else{var l,p=o.zpp_inner;if(null!=p._validate&&p._validate(),o.zpp_inner.x==n){var h=o.zpp_inner;null!=h._validate&&h._validate(),l=o.zpp_inner.y==a}else l=!1;if(!l){o.zpp_inner.x=n,o.zpp_inner.y=a;var u=o.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}o.zpp_inner.weak=!0;var c=o.normalise(),d=e.sub(c.muleq(2*c.dot(e)),t);if(e.zpp_inner.weak){var _=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=el.zpp_pool,el.zpp_pool=_}return d},ht.prototype.normalise=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=1/Math.sqrt(n+o*this.zpp_inner.y),l=this.zpp_inner;null!=l._validate&&l._validate();var p=this.zpp_inner.x*s,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x!=p){this.zpp_inner.x=p;var u=this.zpp_inner;null!=u._invalidate&&u._invalidate(u)}var c=this.zpp_inner;null!=c._validate&&c._validate();var d=this.zpp_inner;null!=d._validate&&d._validate();var _=this.zpp_inner.y*s,y=this.zpp_inner;if(null!=y._validate&&y._validate(),this.zpp_inner.y!=_){this.zpp_inner.y=_;var m=this.zpp_inner;null!=m._invalidate&&m._invalidate(m)}var f=this.zpp_inner;null!=f._validate&&f._validate();var x=this.zpp_inner;return null!=x._invalidate&&x._invalidate(x),this},ht.prototype.unit=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var l=1/Math.sqrt(r+a*this.zpp_inner.y),p=this.zpp_inner;null!=p._validate&&p._validate();var h=this.zpp_inner.x*l,u=this.zpp_inner;null!=u._validate&&u._validate();var c,d=this.zpp_inner.y*l;if(null==jn.poolVec2?c=new ht:(c=jn.poolVec2,jn.poolVec2=c.zpp_pool,c.zpp_pool=null),null==c.zpp_inner){var _;null==el.zpp_pool?_=new el:(_=el.zpp_pool,el.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=h,_.y=d,c.zpp_inner=_,c.zpp_inner.outer=c}else{var y,m=c.zpp_inner;if(null!=m._validate&&m._validate(),c.zpp_inner.x==h){var f=c.zpp_inner;null!=f._validate&&f._validate(),y=c.zpp_inner.y==d}else y=!1;if(!y){c.zpp_inner.x=h,c.zpp_inner.y=d;var x=c.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}return c.zpp_inner.weak=e,c},ht.prototype.add=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=n+e.zpp_inner.x,a=this.zpp_inner;null!=a._validate&&a._validate();var s=this.zpp_inner.y,l=e.zpp_inner;null!=l._validate&&l._validate();var p,h=s+e.zpp_inner.y;if(null==jn.poolVec2?p=new ht:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var u;null==el.zpp_pool?u=new el:(u=el.zpp_pool,el.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=o,u.y=h,p.zpp_inner=u,p.zpp_inner.outer=p}else{var c,d=p.zpp_inner;if(null!=d._validate&&d._validate(),p.zpp_inner.x==o){var _=p.zpp_inner;null!=_._validate&&_._validate(),c=p.zpp_inner.y==h}else c=!1;if(!c){p.zpp_inner.x=o,p.zpp_inner.y=h;var y=p.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}p.zpp_inner.weak=t;var m=p;if(e.zpp_inner.weak){var f=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=el.zpp_pool,el.zpp_pool=f}return m},ht.prototype.addMul=function(e,t,i){null==i&&(i=!1);var n=this.zpp_inner;null!=n._validate&&n._validate();var r=this.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=r+e.zpp_inner.x*t,s=this.zpp_inner;null!=s._validate&&s._validate();var l=this.zpp_inner.y,p=e.zpp_inner;null!=p._validate&&p._validate();var h,u=l+e.zpp_inner.y*t;if(null==jn.poolVec2?h=new ht:(h=jn.poolVec2,jn.poolVec2=h.zpp_pool,h.zpp_pool=null),null==h.zpp_inner){var c;null==el.zpp_pool?c=new el:(c=el.zpp_pool,el.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=a,c.y=u,h.zpp_inner=c,h.zpp_inner.outer=h}else{var d,_=h.zpp_inner;if(null!=_._validate&&_._validate(),h.zpp_inner.x==a){var y=h.zpp_inner;null!=y._validate&&y._validate(),d=h.zpp_inner.y==u}else d=!1;if(!d){h.zpp_inner.x=a,h.zpp_inner.y=u;var m=h.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}h.zpp_inner.weak=i;var f=h;if(e.zpp_inner.weak){var x=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=el.zpp_pool,el.zpp_pool=x}return f},ht.prototype.sub=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o=n-e.zpp_inner.x,a=this.zpp_inner;null!=a._validate&&a._validate();var s=this.zpp_inner.y,l=e.zpp_inner;null!=l._validate&&l._validate();var p,h=s-e.zpp_inner.y;if(null==jn.poolVec2?p=new ht:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var u;null==el.zpp_pool?u=new el:(u=el.zpp_pool,el.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=o,u.y=h,p.zpp_inner=u,p.zpp_inner.outer=p}else{var c,d=p.zpp_inner;if(null!=d._validate&&d._validate(),p.zpp_inner.x==o){var _=p.zpp_inner;null!=_._validate&&_._validate(),c=p.zpp_inner.y==h}else c=!1;if(!c){p.zpp_inner.x=o,p.zpp_inner.y=h;var y=p.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}p.zpp_inner.weak=t;var m=p;if(e.zpp_inner.weak){var f=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=f.outer&&(f.outer.zpp_inner=null,f.outer=null),f._isimmutable=null,f._validate=null,f._invalidate=null,f.next=el.zpp_pool,el.zpp_pool=f}return m},ht.prototype.mul=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;null!=i._validate&&i._validate();var n=this.zpp_inner.x*e,r=this.zpp_inner;null!=r._validate&&r._validate();var o,a=this.zpp_inner.y*e;if(null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var s;null==el.zpp_pool?s=new el:(s=el.zpp_pool,el.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=n,s.y=a,o.zpp_inner=s,o.zpp_inner.outer=o}else{var l,p=o.zpp_inner;if(null!=p._validate&&p._validate(),o.zpp_inner.x==n){var h=o.zpp_inner;null!=h._validate&&h._validate(),l=o.zpp_inner.y==a}else l=!1;if(!l){o.zpp_inner.x=n,o.zpp_inner.y=a;var u=o.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}return o.zpp_inner.weak=t,o},ht.prototype.addeq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i+e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var l,p=a+e.zpp_inner.y,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x==r){var u=this.zpp_inner;null!=u._validate&&u._validate(),l=this.zpp_inner.y==p}else l=!1;if(!l){this.zpp_inner.x=r,this.zpp_inner.y=p;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d}return this},ht.prototype.subeq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i-e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var l,p=a-e.zpp_inner.y,h=this.zpp_inner;if(null!=h._validate&&h._validate(),this.zpp_inner.x==r){var u=this.zpp_inner;null!=u._validate&&u._validate(),l=this.zpp_inner.y==p}else l=!1;if(!l){this.zpp_inner.x=r,this.zpp_inner.y=p;var c=this.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(e.zpp_inner.weak){var d=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d}return this},ht.prototype.muleq=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x*e,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y*e,a=this.zpp_inner;if(null!=a._validate&&a._validate(),this.zpp_inner.x==i){var s=this.zpp_inner;null!=s._validate&&s._validate(),r=this.zpp_inner.y==o}else r=!1;if(!r){this.zpp_inner.x=i,this.zpp_inner.y=o;var l=this.zpp_inner;null!=l._invalidate&&l._invalidate(l)}return this},ht.prototype.dot=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=i*e.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=e.zpp_inner;null!=s._validate&&s._validate();var l=r+a*e.zpp_inner.y;if(e.zpp_inner.weak){var p=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p._isimmutable=null,p._validate=null,p._invalidate=null,p.next=el.zpp_pool,el.zpp_pool=p}return l},ht.prototype.cross=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.y,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=this.zpp_inner;null!=s._validate&&s._validate();var l=r-a*this.zpp_inner.y;if(e.zpp_inner.weak){var p=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=p.outer&&(p.outer.zpp_inner=null,p.outer=null),p._isimmutable=null,p._validate=null,p._invalidate=null,p.next=el.zpp_pool,el.zpp_pool=p}return l},ht.prototype.perp=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=-this.zpp_inner.y,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.x;if(null==jn.poolVec2?r=new ht:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==el.zpp_pool?a=new el:(a=el.zpp_pool,el.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,l=r.zpp_inner;if(null!=l._validate&&l._validate(),r.zpp_inner.x==i){var p=r.zpp_inner;null!=p._validate&&p._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},ht.prototype.toString=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.toString()},Object.defineProperty(ht.prototype,"x",{get:ht.prototype.get_x,set:ht.prototype.set_x}),Object.defineProperty(ht.prototype,"y",{get:ht.prototype.get_y,set:ht.prototype.set_y}),Object.defineProperty(ht.prototype,"length",{get:ht.prototype.get_length,set:ht.prototype.set_length}),Object.defineProperty(ht.prototype,"angle",{get:ht.prototype.get_angle,set:ht.prototype.set_angle}),ht.prototype.__class__=ht;var Qe=nape.geom.Vec2Iterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};Qe.__name__=["nape","geom","Vec2Iterator"],Qe.get=function(e){var t;if(null==Qe.zpp_pool){On.internal=!0;var i=new Qe;On.internal=!1,t=i}else{var n=Qe.zpp_pool;Qe.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},Qe.prototype.zpp_inner=null,Qe.prototype.zpp_i=null,Qe.prototype.zpp_critical=null,Qe.prototype.zpp_next=null,Qe.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner.zpp_gl();return this.zpp_critical=!0,this.zpp_i<e||(this.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=this).zpp_inner=null,!1)},Qe.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},Qe.prototype.__class__=Qe;var ge=nape.geom.Vec2List=function(){this.zpp_inner=null,this.zpp_inner=new On,this.zpp_inner.outer=this};ge.__name__=["nape","geom","Vec2List"],ge.fromArray=function(e){for(var t=new ge,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ge.prototype.zpp_inner=null,ge.prototype.get_length=function(){return this.zpp_gl()},ge.prototype.zpp_gl=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ge.prototype.zpp_vm=function(){this.zpp_inner.valmod()},ge.prototype.has=function(e){return this.zpp_vm(),this.zpp_inner.inner.has(e.zpp_inner)},ge.prototype.at=function(e){if(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;var t=this.zpp_inner.at_ite.elt;if(null==t.outer){t.outer=new ht;var i=t.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i,t.outer.zpp_inner=t}return t.outer},ge.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(e.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},ge.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)):this.zpp_inner.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},ge.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(null==(e=this.zpp_inner.inner.head.elt).outer){e.outer=new ht;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=el.zpp_pool,el.zpp_pool=t,e.outer.zpp_inner=e}var i=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var n=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==n?this.zpp_inner.inner.head.elt:n.next.elt).outer){e.outer=new ht;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(n)}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new ht;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},ge.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var t=1==this.zpp_gl()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer){e.outer=new ht;var i=e.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i,e.outer.zpp_inner=e}var n=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{if(null==(e=this.zpp_inner.inner.head.elt).outer){e.outer=new ht;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new ht;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},ge.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ge.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ge.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},ge.prototype.empty=function(){return 0==this.zpp_gl()},ge.prototype.iterator=function(){return this.zpp_vm(),Qe.get(this)},ge.prototype.copy=function(e){null==e&&(e=!1);for(var t=new ge,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n,r=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,i.zpp_i<r?n=!0:(i.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=i).zpp_inner=null,n=!1),!n)break;i.zpp_critical=!1;var o,a=i.zpp_inner.at(i.zpp_i++);if(e){var s=a.zpp_inner;null!=s._validate&&s._validate();var l=a.zpp_inner.x,p=a.zpp_inner;null!=p._validate&&p._validate();var h,u=a.zpp_inner.y;if(null==jn.poolVec2?h=new ht:(h=jn.poolVec2,jn.poolVec2=h.zpp_pool,h.zpp_pool=null),null==h.zpp_inner){var c;null==el.zpp_pool?c=new el:(c=el.zpp_pool,el.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=l,c.y=u,h.zpp_inner=c,h.zpp_inner.outer=h}else{var d,_=h.zpp_inner;if(null!=_._validate&&_._validate(),h.zpp_inner.x==l){var y=h.zpp_inner;null!=y._validate&&y._validate(),d=h.zpp_inner.y==u}else d=!1;if(!d){h.zpp_inner.x=l,h.zpp_inner.y=u;var m=h.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}h.zpp_inner.weak=!1,o=h}else o=a;t.push(o)}return t},ge.prototype.merge=function(e){for(var t=e.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,n=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<n?i=!0:(t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null,i=!1),!i)break;t.zpp_critical=!1;var r=t.zpp_inner.at(t.zpp_i++);this.has(r)||this.add(r)}},ge.prototype.toString=function(){for(var e="[",t=!0,i=this.iterator();;){i.zpp_inner.zpp_inner.valmod();var n,r=i.zpp_inner.zpp_gl();if(i.zpp_critical=!0,i.zpp_i<r?n=!0:(i.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=i).zpp_inner=null,n=!1),!n)break;i.zpp_critical=!1;var o=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==o?"NULL":o.toString(),t=!1}return e+"]"},ge.prototype.foreach=function(e){for(var t=this.iterator();;){t.zpp_inner.zpp_inner.valmod();var i,n=t.zpp_inner.zpp_gl();if(t.zpp_critical=!0,t.zpp_i<n?i=!0:(t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null,i=!1),!i)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=t).zpp_inner=null;break}}return this},ge.prototype.filter=function(e){for(var t=0;t<this.zpp_gl();){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ge.prototype,"length",{get:ge.prototype.get_length}),ge.prototype.__class__=ge;var Z=nape.geom.Vec3=function(e,t,i){null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),this.zpp_pool=null,this.zpp_inner=null,this.zpp_inner=new Wt,(this.zpp_inner.outer=this).zpp_inner.x=e;var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.y=t;var r=this.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.z=i;var o=this.zpp_inner;null!=o._validate&&o._validate()};Z.__name__=["nape","geom","Vec3"],Z.get=function(e,t,i){var n;return null==i&&(i=0),null==t&&(t=0),null==e&&(e=0),null==jn.poolVec3?n=new Z:(n=jn.poolVec3,jn.poolVec3=n.zpp_pool,n.zpp_pool=null),n.setxyz(e,t,i),n.zpp_inner.immutable=!1,n.zpp_inner._validate=null,n},Z.prototype.zpp_inner=null,Z.prototype.zpp_pool=null,Z.prototype.get_x=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.x},Z.prototype.set_x=function(e){this.zpp_inner.x=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.x},Z.prototype.get_y=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.y},Z.prototype.set_y=function(e){this.zpp_inner.y=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.y},Z.prototype.get_z=function(){var e=this.zpp_inner;return null!=e._validate&&e._validate(),this.zpp_inner.z},Z.prototype.set_z=function(e){this.zpp_inner.z=e;var t=this.zpp_inner;return null!=t._validate&&t._validate(),this.zpp_inner.z},Z.prototype.dispose=function(){this.zpp_pool=jn.poolVec3,jn.poolVec3=this},Z.prototype.get_length=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=n+o*this.zpp_inner.y,l=this.zpp_inner;null!=l._validate&&l._validate();var p=this.zpp_inner.z,h=this.zpp_inner;return null!=h._validate&&h._validate(),Math.sqrt(s+p*this.zpp_inner.z)},Z.prototype.set_length=function(e){var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r=i*this.zpp_inner.x,o=this.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.y,s=this.zpp_inner;null!=s._validate&&s._validate();var l=r+a*this.zpp_inner.y,p=this.zpp_inner;null!=p._validate&&p._validate();var h=this.zpp_inner.z,u=this.zpp_inner;null!=u._validate&&u._validate();var c=e/Math.sqrt(l+h*this.zpp_inner.z),d=this.zpp_inner;null!=d._validate&&d._validate(),this.zpp_inner.x=this.zpp_inner.x*c;var _=this.zpp_inner;null!=_._validate&&_._validate();var y=this.zpp_inner;null!=y._validate&&y._validate(),this.zpp_inner.y=this.zpp_inner.y*c;var m=this.zpp_inner;null!=m._validate&&m._validate();var f=this.zpp_inner;null!=f._validate&&f._validate(),this.zpp_inner.z=this.zpp_inner.z*c;var x=this.zpp_inner;null!=x._validate&&x._validate();var v=this.zpp_inner;null!=v._validate&&v._validate();var z=this.zpp_inner.x,g=this.zpp_inner;null!=g._validate&&g._validate();var b=z*this.zpp_inner.x,w=this.zpp_inner;null!=w._validate&&w._validate();var S=this.zpp_inner.y,C=this.zpp_inner;null!=C._validate&&C._validate();var M=b+S*this.zpp_inner.y,P=this.zpp_inner;null!=P._validate&&P._validate();var k=this.zpp_inner.z,T=this.zpp_inner;return null!=T._validate&&T._validate(),Math.sqrt(M+k*this.zpp_inner.z)},Z.prototype.lsq=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t=this.zpp_inner.x,i=this.zpp_inner;null!=i._validate&&i._validate();var n=t*this.zpp_inner.x,r=this.zpp_inner;null!=r._validate&&r._validate();var o=this.zpp_inner.y,a=this.zpp_inner;null!=a._validate&&a._validate();var s=n+o*this.zpp_inner.y,l=this.zpp_inner;null!=l._validate&&l._validate();var p=this.zpp_inner.z,h=this.zpp_inner;return null!=h._validate&&h._validate(),s+p*this.zpp_inner.z},Z.prototype.set=function(e){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.y,o=e.zpp_inner;return null!=o._validate&&o._validate(),this.setxyz(i,r,e.zpp_inner.z)},Z.prototype.setxyz=function(e,t,i){this.zpp_inner.x=e;var n=this.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.y=t;var r=this.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.z=i;var o=this.zpp_inner;return null!=o._validate&&o._validate(),this},Z.prototype.xy=function(e){null==e&&(e=!1);var t=this.zpp_inner;null!=t._validate&&t._validate();var i=this.zpp_inner.x,n=this.zpp_inner;null!=n._validate&&n._validate();var r,o=this.zpp_inner.y;if(null==jn.poolVec2?r=new ht:(r=jn.poolVec2,jn.poolVec2=r.zpp_pool,r.zpp_pool=null),null==r.zpp_inner){var a;null==el.zpp_pool?a=new el:(a=el.zpp_pool,el.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=i,a.y=o,r.zpp_inner=a,r.zpp_inner.outer=r}else{var s,l=r.zpp_inner;if(null!=l._validate&&l._validate(),r.zpp_inner.x==i){var p=r.zpp_inner;null!=p._validate&&p._validate(),s=r.zpp_inner.y==o}else s=!1;if(!s){r.zpp_inner.x=i,r.zpp_inner.y=o;var h=r.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}return r.zpp_inner.weak=e,r},Z.prototype.toString=function(){var e=this.zpp_inner;null!=e._validate&&e._validate();var t="{ x: "+this.zpp_inner.x+" y: ",i=this.zpp_inner;null!=i._validate&&i._validate();var n=t+this.zpp_inner.y+" z: ",r=this.zpp_inner;return null!=r._validate&&r._validate(),n+this.zpp_inner.z+" }"},Object.defineProperty(Z.prototype,"x",{get:Z.prototype.get_x,set:Z.prototype.set_x}),Object.defineProperty(Z.prototype,"y",{get:Z.prototype.get_y,set:Z.prototype.set_y}),Object.defineProperty(Z.prototype,"z",{get:Z.prototype.get_z,set:Z.prototype.set_z}),Object.defineProperty(Z.prototype,"length",{get:Z.prototype.get_length,set:Z.prototype.set_length}),Z.prototype.__class__=Z;var J=nape.geom.Winding=function(){};J.__name__=["nape","geom","Winding"],J.UNDEFINED=null,J.get_UNDEFINED=function(){return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),Uo.Winding_UNDEFINED},J.CLOCKWISE=null,J.get_CLOCKWISE=function(){return null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),Uo.Winding_CLOCKWISE},J.ANTICLOCKWISE=null,J.get_ANTICLOCKWISE=function(){return null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),Uo.Winding_ANTICLOCKWISE},J.prototype.toString=function(){return null==Uo.Winding_UNDEFINED&&(Uo.internal=!0,Uo.Winding_UNDEFINED=new J,Uo.internal=!1),this==Uo.Winding_UNDEFINED?"UNDEFINED":(null==Uo.Winding_CLOCKWISE&&(Uo.internal=!0,Uo.Winding_CLOCKWISE=new J,Uo.internal=!1),this==Uo.Winding_CLOCKWISE?"CLOCKWISE":(null==Uo.Winding_ANTICLOCKWISE&&(Uo.internal=!0,Uo.Winding_ANTICLOCKWISE=new J,Uo.internal=!1),this==Uo.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""))},Object.defineProperty(J,"UNDEFINED",{get:J.get_UNDEFINED}),Object.defineProperty(J,"CLOCKWISE",{get:J.get_CLOCKWISE}),Object.defineProperty(J,"ANTICLOCKWISE",{get:J.get_ANTICLOCKWISE}),J.prototype.__class__=J;var Q=nape.phys.Interactor=function(){this.zpp_inner_i=null};Q.__name__=["nape","phys","Interactor"],Q.prototype.zpp_inner_i=null,Q.prototype.get_id=function(){return this.zpp_inner_i.id},Q.prototype.get_userData=function(){return null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={}),this.zpp_inner_i.userData},Q.prototype.isShape=function(){return null!=this.zpp_inner_i.ishape},Q.prototype.isBody=function(){return null!=this.zpp_inner_i.ibody},Q.prototype.isCompound=function(){return null!=this.zpp_inner_i.icompound},Q.prototype.get_castShape=function(){return null!=this.zpp_inner_i.ishape?this.zpp_inner_i.ishape.outer:null},Q.prototype.get_castBody=function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},Q.prototype.get_castCompound=function(){return null!=this.zpp_inner_i.icompound?this.zpp_inner_i.icompound.outer:null},Q.prototype.get_group=function(){return null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Q.prototype.set_group=function(e){return this.zpp_inner_i.immutable_midstep("Interactor::group"),this.zpp_inner_i.setGroup(null==e?null:e.zpp_inner),null==this.zpp_inner_i.group?null:this.zpp_inner_i.group.outer},Q.prototype.get_cbTypes=function(){return null==this.zpp_inner_i.wrap_cbTypes&&this.zpp_inner_i.setupcbTypes(),this.zpp_inner_i.wrap_cbTypes},Q.prototype.toString=function(){return""},Object.defineProperty(Q.prototype,"id",{get:Q.prototype.get_id}),Object.defineProperty(Q.prototype,"userData",{get:Q.prototype.get_userData}),Object.defineProperty(Q.prototype,"castShape",{get:Q.prototype.get_castShape}),Object.defineProperty(Q.prototype,"castBody",{get:Q.prototype.get_castBody}),Object.defineProperty(Q.prototype,"castCompound",{get:Q.prototype.get_castCompound}),Object.defineProperty(Q.prototype,"group",{get:Q.prototype.get_group,set:Q.prototype.set_group}),Object.defineProperty(Q.prototype,"cbTypes",{get:Q.prototype.get_cbTypes}),Q.prototype.__class__=Q;var re=nape.phys.Body=function(e,t){if(this.debugDraw=!0,this.zpp_inner=null,Q.call(this),this.zpp_inner=new qt,((this.zpp_inner.outer=this).zpp_inner.outer_i=this).zpp_inner_i=this.zpp_inner,null!=t){var i=t.zpp_inner;null!=i._validate&&i._validate(),this.zpp_inner.posx=t.zpp_inner.x;var n=t.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.posy=t.zpp_inner.y}else this.zpp_inner.posx=0,this.zpp_inner.posy=0;var r,o;(null==e?(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),r=Uo.BodyType_DYNAMIC):r=e,this.zpp_inner.immutable_midstep("Body::type"),qt.types[this.zpp_inner.type]!=r)&&(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),r==Uo.BodyType_DYNAMIC?o=2:(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),o=r==Uo.BodyType_KINEMATIC?3:1),1==o&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,o):this.zpp_inner.type=o);if(null!=t&&t.zpp_inner.weak){var a=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a}this.zpp_inner_i.insert_cbtype(Be.ANY_BODY.zpp_inner)};re.__name__=["nape","phys","Body"],re.__super__=Q,re.prototype=Object.create(Q.prototype),re.prototype.zpp_inner=null,re.prototype.debugDraw=null,re.prototype.get_type=function(){return qt.types[this.zpp_inner.type]},re.prototype.set_type=function(e){var t;(this.zpp_inner.immutable_midstep("Body::type"),qt.types[this.zpp_inner.type]!=e)&&(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),e==Uo.BodyType_DYNAMIC?t=2:(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),t=e==Uo.BodyType_KINEMATIC?3:1),1==t&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,t):this.zpp_inner.type=t);return qt.types[this.zpp_inner.type]},re.prototype.get_isBullet=function(){return this.zpp_inner.bulletEnabled},re.prototype.set_isBullet=function(e){return this.zpp_inner.bulletEnabled=e,this.zpp_inner.bulletEnabled},re.prototype.get_disableCCD=function(){return this.zpp_inner.disableCCD},re.prototype.set_disableCCD=function(e){return this.zpp_inner.disableCCD=e,this.zpp_inner.disableCCD},re.prototype.integrate=function(e){if(this.zpp_inner.immutable_midstep("Body::space"),0==e)return this;var t=this.zpp_inner;t.sweepTime=0,t.sweep_angvel=t.angvel;var i=e-t.sweepTime;if(0!=i&&(t.sweepTime=e,t.posx+=t.velx*i,t.posy+=t.vely*i,0!=t.angvel)){var n=t.sweep_angvel*i;if(t.rot+=n,1e-4<n*n)t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot);else{var r=n*n,o=1-.5*r,a=1-r*r/8,s=(o*t.axisx+n*t.axisy)*a;t.axisy=(o*t.axisy-n*t.axisx)*a,t.axisx=s}}for(var l=t.shapes.head;null!=l;){var p=l.elt;1==p.type&&(p.polygon.invalidate_gverts(),p.polygon.invalidate_gaxi()),p.invalidate_worldCOM(),l=l.next}t.zip_worldCOM=!0,t.zip_axis=!0;for(var h=t.shapes.head;null!=h;){var u=h.elt;1==u.type&&(u.polygon.invalidate_gverts(),u.polygon.invalidate_gaxi()),u.invalidate_worldCOM(),h=h.next}return t.zip_worldCOM=!0,t.sweepTime=0,this},re.prototype.isStatic=function(){return 1==this.zpp_inner.type},re.prototype.isDynamic=function(){return 2==this.zpp_inner.type},re.prototype.isKinematic=function(){return 3==this.zpp_inner.type},re.prototype.get_shapes=function(){return this.zpp_inner.wrap_shapes},re.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},re.prototype.set_compound=function(e){if((null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(this),null!=e)){var t=e.zpp_inner.wrap_bodies;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},re.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},re.prototype.set_space=function(e){if(this.zpp_inner.immutable_midstep("Body::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(this.zpp_inner.component.woken=!1),null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_bodies.remove(this),null!=e)){var t=e.zpp_inner.wrap_bodies;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},re.prototype.get_arbiters=function(){return null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0)),this.zpp_inner.wrap_arbiters},re.prototype.get_isSleeping=function(){return this.zpp_inner.component.sleeping},re.prototype.get_constraints=function(){return null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=fn.get(this.zpp_inner.constraints,!0)),this.zpp_inner.wrap_constraints},re.prototype.copy=function(){return this.zpp_inner.copy()},re.prototype.get_position=function(){return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},re.prototype.set_position=function(e){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var t=this.zpp_inner.wrap_pos,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos},re.prototype.get_velocity=function(){return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},re.prototype.set_velocity=function(e){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var t=this.zpp_inner.wrap_vel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity(),this.zpp_inner.wrap_vel},re.prototype.setVelocityFromTarget=function(e,t,i){var n=1/i;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();var r=this.zpp_inner.wrap_vel;null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var o=e.sub(this.zpp_inner.wrap_pos,!0).muleq(n),a=o.zpp_inner;null!=a._validate&&a._validate();var s=o.zpp_inner.x,l=o.zpp_inner;null!=l._validate&&l._validate();var p,h=o.zpp_inner.y,u=r.zpp_inner;if(null!=u._validate&&u._validate(),r.zpp_inner.x==s){var c=r.zpp_inner;null!=c._validate&&c._validate(),p=r.zpp_inner.y==h}else p=!1;if(!p){r.zpp_inner.x=s,r.zpp_inner.y=h;var d=r.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(o.zpp_inner.weak){var _=o.zpp_inner;o.zpp_inner.outer=null,o.zpp_inner=null,o.zpp_pool=jn.poolVec2,jn.poolVec2=o,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=el.zpp_pool,el.zpp_pool=_}var y=(t-this.zpp_inner.rot)*n;if(this.zpp_inner.angvel!=y&&(this.zpp_inner.angvel=y,this.zpp_inner.wake()),e.zpp_inner.weak){var m=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=el.zpp_pool,el.zpp_pool=m}return this},re.prototype.get_kinematicVel=function(){return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},re.prototype.set_kinematicVel=function(e){null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel();var t=this.zpp_inner.wrap_kinvel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_kinvel&&this.zpp_inner.setupkinvel(),this.zpp_inner.wrap_kinvel},re.prototype.get_surfaceVel=function(){return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},re.prototype.set_surfaceVel=function(e){null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel();var t=this.zpp_inner.wrap_svel,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_svel&&this.zpp_inner.setupsvel(),this.zpp_inner.wrap_svel},re.prototype.get_force=function(){return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},re.prototype.set_force=function(e){null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();var t=this.zpp_inner.wrap_force,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce(),this.zpp_inner.wrap_force},re.prototype.get_constraintVelocity=function(){return null==this.zpp_inner.wrapcvel&&this.zpp_inner.setup_cvel(),this.zpp_inner.wrapcvel},re.prototype.get_rotation=function(){return this.zpp_inner.rot},re.prototype.set_rotation=function(e){if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.rot!=e){this.zpp_inner.rot=e;var t=this.zpp_inner;t.zip_axis=!0;for(var i=t.shapes.head;null!=i;){var n=i.elt;1==n.type&&(n.polygon.invalidate_gverts(),n.polygon.invalidate_gaxi()),n.invalidate_worldCOM(),i=i.next}t.zip_worldCOM=!0,this.zpp_inner.wake()}return this.zpp_inner.rot},re.prototype.get_angularVel=function(){return this.zpp_inner.angvel},re.prototype.set_angularVel=function(e){return this.zpp_inner.angvel!=e&&(this.zpp_inner.angvel=e,this.zpp_inner.wake()),this.zpp_inner.angvel},re.prototype.get_kinAngVel=function(){return this.zpp_inner.kinangvel},re.prototype.set_kinAngVel=function(e){return this.zpp_inner.kinangvel!=e&&(this.zpp_inner.kinangvel=e,this.zpp_inner.wake()),this.zpp_inner.kinangvel},re.prototype.get_torque=function(){return this.zpp_inner.torque},re.prototype.set_torque=function(e){return this.zpp_inner.torque!=e&&(this.zpp_inner.torque=e,this.zpp_inner.wake()),this.zpp_inner.torque},re.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},re.prototype.get_allowMovement=function(){return!this.zpp_inner.nomove},re.prototype.set_allowMovement=function(e){return this.zpp_inner.immutable_midstep("Body::"+(null==e?"null":""+e)),!this.zpp_inner.nomove!=e&&(this.zpp_inner.nomove=!e,this.zpp_inner.invalidate_mass()),!this.zpp_inner.nomove},re.prototype.get_allowRotation=function(){return!this.zpp_inner.norotate},re.prototype.set_allowRotation=function(e){return this.zpp_inner.immutable_midstep("Body::"+(null==e?"null":""+e)),!this.zpp_inner.norotate!=e&&(this.zpp_inner.norotate=!e,this.zpp_inner.invalidate_inertia()),!this.zpp_inner.norotate},re.prototype.get_massMode=function(){null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1);var e=Uo.MassMode_DEFAULT;return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),[e,Uo.MassMode_FIXED][this.zpp_inner.massMode]},re.prototype.set_massMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::massMode"),null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),t=e==Uo.MassMode_DEFAULT?0:1,this.zpp_inner.massMode=t,this.zpp_inner.invalidate_mass(),null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1);var i=Uo.MassMode_DEFAULT;return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),[i,Uo.MassMode_FIXED][this.zpp_inner.massMode]},re.prototype.get_constraintMass=function(){return this.zpp_inner.world||this.zpp_inner.validate_mass(),this.zpp_inner.smass},re.prototype.get_mass=function(){return this.zpp_inner.validate_mass(),this.zpp_inner.cmass},re.prototype.set_mass=function(e){return this.zpp_inner.immutable_midstep("Body::mass"),this.zpp_inner.massMode=1,this.zpp_inner.cmass=e,this.zpp_inner.invalidate_mass(),this.zpp_inner.validate_mass(),this.zpp_inner.cmass},re.prototype.get_gravMassMode=function(){null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new le,Uo.internal=!1);var e=Uo.GravMassMode_DEFAULT;null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new le,Uo.internal=!1);var t=Uo.GravMassMode_FIXED;return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new le,Uo.internal=!1),[e,t,Uo.GravMassMode_SCALED][this.zpp_inner.massMode]},re.prototype.set_gravMassMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::gravMassMode"),null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new le,Uo.internal=!1),e==Uo.GravMassMode_SCALED?t=2:(null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new le,Uo.internal=!1),t=e==Uo.GravMassMode_DEFAULT?0:1),this.zpp_inner.gravMassMode=t,this.zpp_inner.invalidate_gravMass(),null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new le,Uo.internal=!1);var i=Uo.GravMassMode_DEFAULT;null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new le,Uo.internal=!1);var n=Uo.GravMassMode_FIXED;return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new le,Uo.internal=!1),[i,n,Uo.GravMassMode_SCALED][this.zpp_inner.massMode]},re.prototype.get_gravMass=function(){return this.zpp_inner.validate_gravMass(),this.zpp_inner.gravMass},re.prototype.set_gravMass=function(e){return this.zpp_inner.immutable_midstep("Body::gravMass"),this.zpp_inner.gravMassMode=1,this.zpp_inner.gravMass=e,this.zpp_inner.invalidate_gravMass(),this.zpp_inner.validate_gravMass(),this.zpp_inner.gravMass},re.prototype.get_gravMassScale=function(){return this.zpp_inner.validate_gravMassScale(),this.zpp_inner.gravMassScale},re.prototype.set_gravMassScale=function(e){return this.zpp_inner.immutable_midstep("Body::gravMassScale"),this.zpp_inner.gravMassMode=2,this.zpp_inner.gravMassScale=e,this.zpp_inner.invalidate_gravMassScale(),this.zpp_inner.validate_gravMassScale(),this.zpp_inner.gravMassScale},re.prototype.get_inertiaMode=function(){null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new pe,Uo.internal=!1);var e=Uo.InertiaMode_DEFAULT;return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new pe,Uo.internal=!1),[e,Uo.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},re.prototype.set_inertiaMode=function(e){var t;this.zpp_inner.immutable_midstep("Body::inertiaMode"),null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new pe,Uo.internal=!1),t=e==Uo.InertiaMode_FIXED?1:0,this.zpp_inner.inertiaMode=t,this.zpp_inner.invalidate_inertia(),null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new pe,Uo.internal=!1);var i=Uo.InertiaMode_DEFAULT;return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new pe,Uo.internal=!1),[i,Uo.InertiaMode_FIXED][this.zpp_inner.inertiaMode]},re.prototype.get_constraintInertia=function(){return this.zpp_inner.world||this.zpp_inner.validate_inertia(),this.zpp_inner.sinertia},re.prototype.get_inertia=function(){return this.zpp_inner.validate_inertia(),this.zpp_inner.cinertia},re.prototype.set_inertia=function(e){return this.zpp_inner.immutable_midstep("Body::inertia"),this.zpp_inner.inertiaMode=1,this.zpp_inner.cinertia=e,this.zpp_inner.invalidate_inertia(),this.zpp_inner.validate_inertia(),this.zpp_inner.cinertia},re.prototype.connectedBodies=function(e,t){return null==e&&(e=-1),this.zpp_inner.connectedBodies(e,t)},re.prototype.interactingBodies=function(e,t,i){var n;return null==t&&(t=-1),null==e?n=pn.COL|pn.SENSOR|pn.FLUID:(null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),e==Uo.InteractionType_COLLISION?n=pn.COL:(null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),n=e==Uo.InteractionType_SENSOR?pn.SENSOR:pn.FLUID)),this.zpp_inner.interactingBodies(n,t,i)},re.prototype.crushFactor=function(){var e,t=0;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var i;null==el.zpp_pool?i=new el:(i=el.zpp_pool,el.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,e.zpp_inner=i,e.zpp_inner.outer=e}else{var n,r=e.zpp_inner;if(null!=r._validate&&r._validate(),0==e.zpp_inner.x){var o=e.zpp_inner;null!=o._validate&&o._validate(),n=0==e.zpp_inner.y}else n=!1;if(!n){e.zpp_inner.x=0,e.zpp_inner.y=0;var a=e.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}e.zpp_inner.weak=!1;var s=e;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var l=this.zpp_inner.wrap_arbiters.iterator();;){l.zpp_inner.zpp_inner.valmod();var p,h=l.zpp_inner.zpp_gl();if(l.zpp_critical=!0,l.zpp_i<h?p=!0:(l.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=l).zpp_inner=null,p=!1),!p)break;l.zpp_critical=!1;var u=l.zpp_inner.at(l.zpp_i++).totalImpulse(this),c=u.xy();s.addeq(c);var d=c.zpp_inner;null!=d._validate&&d._validate();var _=c.zpp_inner.x,y=c.zpp_inner;null!=y._validate&&y._validate();var m=_*c.zpp_inner.x,f=c.zpp_inner;null!=f._validate&&f._validate();var x=c.zpp_inner.y,v=c.zpp_inner;null!=v._validate&&v._validate(),t+=Math.sqrt(m+x*c.zpp_inner.y);var z=c.zpp_inner;c.zpp_inner.outer=null,c.zpp_inner=null,c.zpp_pool=jn.poolVec2,jn.poolVec2=c,null!=z.outer&&(z.outer.zpp_inner=null,z.outer=null),z._isimmutable=null,z._validate=null,z._invalidate=null,z.next=el.zpp_pool,el.zpp_pool=z,u.dispose()}null==this.zpp_inner.wrap_constraints&&(this.zpp_inner.wrap_constraints=fn.get(this.zpp_inner.constraints,!0));var g=this.zpp_inner.wrap_constraints;g.zpp_inner.valmod();for(var b=We.get(g);;){b.zpp_inner.zpp_inner.valmod();var w=b.zpp_inner;w.zpp_inner.valmod(),w.zpp_inner.zip_length&&(w.zpp_inner.zip_length=!1,w.zpp_inner.user_length=w.zpp_inner.inner.length);var S,C=w.zpp_inner.user_length;if(b.zpp_critical=!0,b.zpp_i<C?S=!0:(b.zpp_next=We.zpp_pool,(We.zpp_pool=b).zpp_inner=null,S=!1),!S)break;b.zpp_critical=!1;var M=b.zpp_inner.at(b.zpp_i++).bodyImpulse(this),P=M.xy();s.addeq(P);var k=P.zpp_inner;null!=k._validate&&k._validate();var T=P.zpp_inner.x,O=P.zpp_inner;null!=O._validate&&O._validate();var A=T*P.zpp_inner.x,E=P.zpp_inner;null!=E._validate&&E._validate();var G=P.zpp_inner.y,I=P.zpp_inner;null!=I._validate&&I._validate(),t+=Math.sqrt(A+G*P.zpp_inner.y);var B=P.zpp_inner;P.zpp_inner.outer=null,P.zpp_inner=null,P.zpp_pool=jn.poolVec2,jn.poolVec2=P,null!=B.outer&&(B.outer.zpp_inner=null,B.outer=null),B._isimmutable=null,B._validate=null,B._invalidate=null,B.next=el.zpp_pool,el.zpp_pool=B,M.dispose()}var L=s.zpp_inner;null!=L._validate&&L._validate();var D=s.zpp_inner.x,R=s.zpp_inner;null!=R._validate&&R._validate();var F=D*s.zpp_inner.x,j=s.zpp_inner;null!=j._validate&&j._validate();var N=s.zpp_inner.y,U=s.zpp_inner;null!=U._validate&&U._validate();var V=t-Math.sqrt(F+N*s.zpp_inner.y);this.zpp_inner.validate_mass();var H=V/(this.zpp_inner.cmass*(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.pre_dt),W=s.zpp_inner;return s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=W.outer&&(W.outer.zpp_inner=null,W.outer=null),W._isimmutable=null,W._validate=null,W._invalidate=null,W.next=el.zpp_pool,el.zpp_pool=W,H},re.prototype.localPointToWorld=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.axisy*e.zpp_inner.x,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a-this.zpp_inner.axisx*e.zpp_inner.y;var l=e.zpp_inner;null!=l._validate&&l._validate();var p=e.zpp_inner.x*this.zpp_inner.axisx,h=e.zpp_inner;if(null!=h._validate&&h._validate(),r=p+e.zpp_inner.y*this.zpp_inner.axisy,e.zpp_inner.weak){var u=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=el.zpp_pool,el.zpp_pool=u}var c,d=n+this.zpp_inner.posx,_=r+this.zpp_inner.posy;if(null==jn.poolVec2?c=new ht:(c=jn.poolVec2,jn.poolVec2=c.zpp_pool,c.zpp_pool=null),null==c.zpp_inner){var y;null==el.zpp_pool?y=new el:(y=el.zpp_pool,el.zpp_pool=y.next,y.next=null),y.weak=!1,y._immutable=!1,y.x=d,y.y=_,c.zpp_inner=y,c.zpp_inner.outer=c}else{var m,f=c.zpp_inner;if(null!=f._validate&&f._validate(),c.zpp_inner.x==d){var x=c.zpp_inner;null!=x._validate&&x._validate(),m=c.zpp_inner.y==_}else m=!1;if(!m){c.zpp_inner.x=d,c.zpp_inner.y=_;var v=c.zpp_inner;null!=v._invalidate&&v._invalidate(v)}}return c.zpp_inner.weak=t,c},re.prototype.worldPointToLocal=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o,a,s=e.zpp_inner;null!=s._validate&&s._validate(),o=e.zpp_inner.x-this.zpp_inner.posx;var l,p=e.zpp_inner;if(null!=p._validate&&p._validate(),a=e.zpp_inner.y-this.zpp_inner.posy,n=o*this.zpp_inner.axisy+a*this.zpp_inner.axisx,r=a*this.zpp_inner.axisy-o*this.zpp_inner.axisx,e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}if(null==jn.poolVec2?l=new ht:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var u;null==el.zpp_pool?u=new el:(u=el.zpp_pool,el.zpp_pool=u.next,u.next=null),u.weak=!1,u._immutable=!1,u.x=n,u.y=r,l.zpp_inner=u,l.zpp_inner.outer=l}else{var c,d=l.zpp_inner;if(null!=d._validate&&d._validate(),l.zpp_inner.x==n){var _=l.zpp_inner;null!=_._validate&&_._validate(),c=l.zpp_inner.y==r}else c=!1;if(!c){l.zpp_inner.x=n,l.zpp_inner.y=r;var y=l.zpp_inner;null!=y._invalidate&&y._invalidate(y)}}return l.zpp_inner.weak=t,l},re.prototype.localVectorToWorld=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.axisy*e.zpp_inner.x,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a-this.zpp_inner.axisx*e.zpp_inner.y;var l=e.zpp_inner;null!=l._validate&&l._validate();var p,h=e.zpp_inner.x*this.zpp_inner.axisx,u=e.zpp_inner;if(null!=u._validate&&u._validate(),r=h+e.zpp_inner.y*this.zpp_inner.axisy,e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}if(null==jn.poolVec2?p=new ht:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var d;null==el.zpp_pool?d=new el:(d=el.zpp_pool,el.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=n,d.y=r,p.zpp_inner=d,p.zpp_inner.outer=p}else{var _,y=p.zpp_inner;if(null!=y._validate&&y._validate(),p.zpp_inner.x==n){var m=p.zpp_inner;null!=m._validate&&m._validate(),_=p.zpp_inner.y==r}else _=!1;if(!_){p.zpp_inner.x=n,p.zpp_inner.y=r;var f=p.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}return p.zpp_inner.weak=t,p},re.prototype.worldVectorToLocal=function(e,t){null==t&&(t=!1);var i=this.zpp_inner;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));var n,r,o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x*this.zpp_inner.axisy,s=e.zpp_inner;null!=s._validate&&s._validate(),n=a+e.zpp_inner.y*this.zpp_inner.axisx;var l=e.zpp_inner;null!=l._validate&&l._validate();var p,h=e.zpp_inner.y*this.zpp_inner.axisy,u=e.zpp_inner;if(null!=u._validate&&u._validate(),r=h-e.zpp_inner.x*this.zpp_inner.axisx,e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}if(null==jn.poolVec2?p=new ht:(p=jn.poolVec2,jn.poolVec2=p.zpp_pool,p.zpp_pool=null),null==p.zpp_inner){var d;null==el.zpp_pool?d=new el:(d=el.zpp_pool,el.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=n,d.y=r,p.zpp_inner=d,p.zpp_inner.outer=p}else{var _,y=p.zpp_inner;if(null!=y._validate&&y._validate(),p.zpp_inner.x==n){var m=p.zpp_inner;null!=m._validate&&m._validate(),_=p.zpp_inner.y==r}else _=!1;if(!_){p.zpp_inner.x=n,p.zpp_inner.y=r;var f=p.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}return p.zpp_inner.weak=t,p},re.prototype.applyImpulse=function(e,t,i){if(null==i&&(i=!1),i&&this.zpp_inner.component.sleeping){if(e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n}if(null!=t&&t.zpp_inner.weak){var r=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r}return this}this.zpp_inner.validate_mass();var o=this.zpp_inner.imass,a=e.zpp_inner;null!=a._validate&&a._validate(),this.zpp_inner.velx+=e.zpp_inner.x*o;var s=e.zpp_inner;if(null!=s._validate&&s._validate(),this.zpp_inner.vely+=e.zpp_inner.y*o,null!=t){var l,p,h=t.zpp_inner;null!=h._validate&&h._validate(),l=t.zpp_inner.x-this.zpp_inner.posx;var u=t.zpp_inner;null!=u._validate&&u._validate(),p=t.zpp_inner.y-this.zpp_inner.posy,this.zpp_inner.validate_inertia();var c=e.zpp_inner;null!=c._validate&&c._validate();var d=e.zpp_inner.y*l,_=e.zpp_inner;if(null!=_._validate&&_._validate(),this.zpp_inner.angvel+=(d-e.zpp_inner.x*p)*this.zpp_inner.iinertia,t.zpp_inner.weak){var y=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=el.zpp_pool,el.zpp_pool=y}}if(i||2==this.zpp_inner.type&&this.zpp_inner.wake(),e.zpp_inner.weak){var m=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=el.zpp_pool,el.zpp_pool=m}return this},re.prototype.applyAngularImpulse=function(e,t){return null==t&&(t=!1),t&&this.zpp_inner.component.sleeping||(this.zpp_inner.validate_inertia(),this.zpp_inner.angvel+=e*this.zpp_inner.iinertia,t||2==this.zpp_inner.type&&this.zpp_inner.wake()),this},re.prototype.translateShapes=function(e){this.zpp_inner.immutable_midstep("Body::translateShapes()");var t=e.zpp_inner.weak;e.zpp_inner.weak=!1;for(var i=this.zpp_inner.shapes.head;null!=i;)i.elt.outer.translate(e),i=i.next;if(e.zpp_inner.weak=t,e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n}return this},re.prototype.rotateShapes=function(e){this.zpp_inner.immutable_midstep("Body::rotateShapes()");for(var t=this.zpp_inner.shapes.head;null!=t;)t.elt.outer.rotate(e),t=t.next;return this},re.prototype.scaleShapes=function(e,t){this.zpp_inner.immutable_midstep("Body::scaleShapes()");for(var i=this.zpp_inner.shapes.head;null!=i;)i.elt.outer.scale(e,t),i=i.next;return this},re.prototype.transformShapes=function(e){this.zpp_inner.immutable_midstep("Body::transformShapes()");for(var t=this.zpp_inner.shapes.head;null!=t;)t.elt.outer.transform(e),t=t.next;return this},re.prototype.align=function(){this.zpp_inner.immutable_midstep("Body::align()"),this.zpp_inner.validate_localCOM();var e,t=-this.zpp_inner.localCOMx,i=-this.zpp_inner.localCOMy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1;var l=e;this.translateShapes(l);var p=this.localVectorToWorld(l);if(null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition(),this.zpp_inner.wrap_pos.subeq(p),this.zpp_inner.pre_posx<1/0){var h=p.zpp_inner;null!=h._validate&&h._validate(),this.zpp_inner.pre_posx-=p.zpp_inner.x;var u=p.zpp_inner;null!=u._validate&&u._validate(),this.zpp_inner.pre_posy-=p.zpp_inner.y}var c=l.zpp_inner;l.zpp_inner.outer=null,l.zpp_inner=null,l.zpp_pool=jn.poolVec2,jn.poolVec2=l,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c;var d=p.zpp_inner;return p.zpp_inner.outer=null,p.zpp_inner=null,p.zpp_pool=jn.poolVec2,jn.poolVec2=p,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d,this},re.prototype.rotate=function(e,t){var i=e.zpp_inner.weak;e.zpp_inner.weak=!1,null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var n=this.zpp_inner.wrap_pos.sub(e);n.rotate(t);var r=e.add(n,!0);null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var o=this.zpp_inner.wrap_pos,a=r.zpp_inner;null!=a._validate&&a._validate();var s=r.zpp_inner.x,l=r.zpp_inner;null!=l._validate&&l._validate();var p,h=r.zpp_inner.y,u=o.zpp_inner;if(null!=u._validate&&u._validate(),o.zpp_inner.x==s){var c=o.zpp_inner;null!=c._validate&&c._validate(),p=o.zpp_inner.y==h}else p=!1;if(!p){o.zpp_inner.x=s,o.zpp_inner.y=h;var d=o.zpp_inner;null!=d._invalidate&&d._invalidate(d)}if(r.zpp_inner.weak){var _=r.zpp_inner;r.zpp_inner.outer=null,r.zpp_inner=null,r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=el.zpp_pool,el.zpp_pool=_}null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();var y=n.zpp_inner;n.zpp_inner.outer=null,n.zpp_inner=null,n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=y.outer&&(y.outer.zpp_inner=null,y.outer=null),y._isimmutable=null,y._validate=null,y._invalidate=null,y.next=el.zpp_pool,el.zpp_pool=y;var m=this.zpp_inner.rot+t;if(this.zpp_inner.immutable_midstep("Body::rotation"),this.zpp_inner.rot!=m){this.zpp_inner.rot=m;var f=this.zpp_inner;f.zip_axis=!0;for(var x=f.shapes.head;null!=x;){var v=x.elt;1==v.type&&(v.polygon.invalidate_gverts(),v.polygon.invalidate_gaxi()),v.invalidate_worldCOM(),x=x.next}f.zip_worldCOM=!0,this.zpp_inner.wake()}if(e.zpp_inner.weak=i,e.zpp_inner.weak){var z=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=z.outer&&(z.outer.zpp_inner=null,z.outer=null),z._isimmutable=null,z._validate=null,z._invalidate=null,z.next=el.zpp_pool,el.zpp_pool=z}return this},re.prototype.setShapeMaterials=function(e){this.zpp_inner.immutable_midstep("Body::setShapeMaterials()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.immutable_midstep("Shape::material"),i.zpp_inner.setMaterial(e.zpp_inner),i.zpp_inner.material.wrapper(),t=t.next}return this},re.prototype.setShapeFilters=function(e){this.zpp_inner.immutable_midstep("Body::setShapeFilters()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.immutable_midstep("Shape::filter"),i.zpp_inner.setFilter(e.zpp_inner),i.zpp_inner.filter.wrapper(),t=t.next}return this},re.prototype.setShapeFluidProperties=function(e){this.zpp_inner.immutable_midstep("Body::setShapeFluidProperties()");for(var t=this.zpp_inner.shapes.head;null!=t;){var i=t.elt.outer;i.zpp_inner.setFluid(e.zpp_inner),i.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==i.zpp_inner.fluidProperties&&i.zpp_inner.setFluid((new se).zpp_inner),i.zpp_inner.fluidProperties.wrapper(),t=t.next}return this},re.prototype.get_localCOM=function(){if(null==this.zpp_inner.wrap_localCOM){var e,t=this.zpp_inner.localCOMx,i=this.zpp_inner.localCOMy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_localCOM=e,this.zpp_inner.wrap_localCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_localCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_localCOM.zpp_inner._validate=$(c=this.zpp_inner,c.getlocalCOM)}return this.zpp_inner.wrap_localCOM},re.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var e,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=e,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(c=this.zpp_inner,c.getworldCOM)}return this.zpp_inner.wrap_worldCOM},re.prototype.normalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a,s=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,o.zpp_i<s?a=!0:(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,a=!1),!a)break;o.zpp_critical=!1;var l=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(l.type==pn.COL&&(null==e||l.b2==e.zpp_inner||l.b1==e.zpp_inner)){var p=l.wrapper(),h=(p.zpp_inner.type==pn.COL?p.zpp_inner.colarb.outer_zn:null).normalImpulse(this,t),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var c=h.zpp_inner;null!=c._validate&&c._validate(),n+=h.zpp_inner.y;var d=h.zpp_inner;null!=d._validate&&d._validate(),r+=h.zpp_inner.z,h.dispose()}}return Z.get(i,n,r)},re.prototype.tangentImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a,s=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,o.zpp_i<s?a=!0:(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,a=!1),!a)break;o.zpp_critical=!1;var l=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(l.type==pn.COL&&(null==e||l.b2==e.zpp_inner||l.b1==e.zpp_inner)){var p=l.wrapper(),h=(p.zpp_inner.type==pn.COL?p.zpp_inner.colarb.outer_zn:null).tangentImpulse(this,t),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var c=h.zpp_inner;null!=c._validate&&c._validate(),n+=h.zpp_inner.y;var d=h.zpp_inner;null!=d._validate&&d._validate(),r+=h.zpp_inner.z,h.dispose()}}return Z.get(i,n,r)},re.prototype.totalContactsImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a,s=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,o.zpp_i<s?a=!0:(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,a=!1),!a)break;o.zpp_critical=!1;var l=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(l.type==pn.COL&&(null==e||l.b2==e.zpp_inner||l.b1==e.zpp_inner)){var p=l.wrapper(),h=(p.zpp_inner.type==pn.COL?p.zpp_inner.colarb.outer_zn:null).totalImpulse(this,t),u=h.zpp_inner;null!=u._validate&&u._validate(),i+=h.zpp_inner.x;var c=h.zpp_inner;null!=c._validate&&c._validate(),n+=h.zpp_inner.y;var d=h.zpp_inner;null!=d._validate&&d._validate(),r+=h.zpp_inner.z,h.dispose()}}return Z.get(i,n,r)},re.prototype.rollingImpulse=function(e,t){null==t&&(t=!1);var i=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var n=this.zpp_inner.wrap_arbiters.iterator();;){n.zpp_inner.zpp_inner.valmod();var r,o=n.zpp_inner.zpp_gl();if(n.zpp_critical=!0,n.zpp_i<o?r=!0:(n.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=n).zpp_inner=null,r=!1),!r)break;n.zpp_critical=!1;var a=n.zpp_inner.at(n.zpp_i++).zpp_inner;if(a.type==pn.COL&&(null==e||a.b2==e.zpp_inner||a.b1==e.zpp_inner)){var s=a.wrapper();i+=(s.zpp_inner.type==pn.COL?s.zpp_inner.colarb.outer_zn:null).rollingImpulse(this,t)}}return i},re.prototype.buoyancyImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o,a=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<a?o=!0:(r.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=r).zpp_inner=null,o=!1),!o)break;r.zpp_critical=!1;var s=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(s.type==pn.FLUID&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var l=s.wrapper(),p=(l.zpp_inner.type==pn.FLUID?l.zpp_inner.fluidarb.outer_zn:null).buoyancyImpulse(this),h=p.zpp_inner;null!=h._validate&&h._validate(),t+=p.zpp_inner.x;var u=p.zpp_inner;null!=u._validate&&u._validate(),i+=p.zpp_inner.y;var c=p.zpp_inner;null!=c._validate&&c._validate(),n+=p.zpp_inner.z,p.dispose()}}return Z.get(t,i,n)},re.prototype.dragImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o,a=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<a?o=!0:(r.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=r).zpp_inner=null,o=!1),!o)break;r.zpp_critical=!1;var s=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(s.type==pn.FLUID&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var l=s.wrapper(),p=(l.zpp_inner.type==pn.FLUID?l.zpp_inner.fluidarb.outer_zn:null).dragImpulse(this),h=p.zpp_inner;null!=h._validate&&h._validate(),t+=p.zpp_inner.x;var u=p.zpp_inner;null!=u._validate&&u._validate(),i+=p.zpp_inner.y;var c=p.zpp_inner;null!=c._validate&&c._validate(),n+=p.zpp_inner.z,p.dispose()}}return Z.get(t,i,n)},re.prototype.totalFluidImpulse=function(e){var t=0,i=0,n=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var r=this.zpp_inner.wrap_arbiters.iterator();;){r.zpp_inner.zpp_inner.valmod();var o,a=r.zpp_inner.zpp_gl();if(r.zpp_critical=!0,r.zpp_i<a?o=!0:(r.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=r).zpp_inner=null,o=!1),!o)break;r.zpp_critical=!1;var s=r.zpp_inner.at(r.zpp_i++).zpp_inner;if(s.type==pn.FLUID&&(null==e||s.b2==e.zpp_inner||s.b1==e.zpp_inner)){var l=s.wrapper(),p=(l.zpp_inner.type==pn.FLUID?l.zpp_inner.fluidarb.outer_zn:null).totalImpulse(this),h=p.zpp_inner;null!=h._validate&&h._validate(),t+=p.zpp_inner.x;var u=p.zpp_inner;null!=u._validate&&u._validate(),i+=p.zpp_inner.y;var c=p.zpp_inner;null!=c._validate&&c._validate(),n+=p.zpp_inner.z,p.dispose()}}return Z.get(t,i,n)},re.prototype.constraintsImpulse=function(){for(var e=0,t=0,i=0,n=this.zpp_inner.constraints.head;null!=n;){var r=n.elt.outer.bodyImpulse(this),o=r.zpp_inner;null!=o._validate&&o._validate(),e+=r.zpp_inner.x;var a=r.zpp_inner;null!=a._validate&&a._validate(),t+=r.zpp_inner.y;var s=r.zpp_inner;null!=s._validate&&s._validate(),i+=r.zpp_inner.z,r.dispose(),n=n.next}return Z.get(e,t,i)},re.prototype.totalImpulse=function(e,t){null==t&&(t=!1);var i=0,n=0,r=0;null==this.zpp_inner.wrap_arbiters&&(this.zpp_inner.wrap_arbiters=Dn.get(this.zpp_inner.arbiters,!0));for(var o=this.zpp_inner.wrap_arbiters.iterator();;){o.zpp_inner.zpp_inner.valmod();var a,s=o.zpp_inner.zpp_gl();if(o.zpp_critical=!0,o.zpp_i<s?a=!0:(o.zpp_next=Xe.zpp_pool,(Xe.zpp_pool=o).zpp_inner=null,a=!1),!a)break;o.zpp_critical=!1;var l=o.zpp_inner.at(o.zpp_i++).zpp_inner;if(l.type!=pn.SENSOR&&(null==e||l.b2==e.zpp_inner||l.b1==e.zpp_inner)){var p=l.wrapper().totalImpulse(this,t),h=p.zpp_inner;null!=h._validate&&h._validate(),i+=p.zpp_inner.x;var u=p.zpp_inner;null!=u._validate&&u._validate(),n+=p.zpp_inner.y;var c=p.zpp_inner;null!=c._validate&&c._validate(),r+=p.zpp_inner.z,p.dispose()}}for(var d=this.zpp_inner.constraints.head;null!=d;){var _=d.elt;if(_.active){var y=_.outer.bodyImpulse(this),m=y.zpp_inner;null!=m._validate&&m._validate(),i+=y.zpp_inner.x;var f=y.zpp_inner;null!=f._validate&&f._validate(),n+=y.zpp_inner.y;var x=y.zpp_inner;null!=x._validate&&x._validate(),r+=y.zpp_inner.z,y.dispose()}d=d.next}return Z.get(i,n,r)},re.prototype.contains=function(e){var t,i=e.zpp_inner.weak;t=e.zpp_inner.weak=!1;for(var n=this.zpp_inner.shapes.head;null!=n;){if(n.elt.outer.contains(e)){t=!0;break}n=n.next}if(e.zpp_inner.weak=i,e.zpp_inner.weak){var r=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r}return t},re.prototype.toString=function(){return(this.zpp_inner.world?"(space::world":"("+(2==this.zpp_inner.type?"dynamic":1==this.zpp_inner.type?"static":"kinematic"))+")#"+this.zpp_inner_i.id},Object.defineProperty(re.prototype,"type",{get:re.prototype.get_type,set:re.prototype.set_type}),Object.defineProperty(re.prototype,"isBullet",{get:re.prototype.get_isBullet,set:re.prototype.set_isBullet}),Object.defineProperty(re.prototype,"disableCCD",{get:re.prototype.get_disableCCD,set:re.prototype.set_disableCCD}),Object.defineProperty(re.prototype,"shapes",{get:re.prototype.get_shapes}),Object.defineProperty(re.prototype,"compound",{get:re.prototype.get_compound,set:re.prototype.set_compound}),Object.defineProperty(re.prototype,"space",{get:re.prototype.get_space,set:re.prototype.set_space}),Object.defineProperty(re.prototype,"arbiters",{get:re.prototype.get_arbiters}),Object.defineProperty(re.prototype,"isSleeping",{get:re.prototype.get_isSleeping}),Object.defineProperty(re.prototype,"constraints",{get:re.prototype.get_constraints}),Object.defineProperty(re.prototype,"position",{get:re.prototype.get_position,set:re.prototype.set_position}),Object.defineProperty(re.prototype,"velocity",{get:re.prototype.get_velocity,set:re.prototype.set_velocity}),Object.defineProperty(re.prototype,"kinematicVel",{get:re.prototype.get_kinematicVel,set:re.prototype.set_kinematicVel}),Object.defineProperty(re.prototype,"surfaceVel",{get:re.prototype.get_surfaceVel,set:re.prototype.set_surfaceVel}),Object.defineProperty(re.prototype,"force",{get:re.prototype.get_force,set:re.prototype.set_force}),Object.defineProperty(re.prototype,"constraintVelocity",{get:re.prototype.get_constraintVelocity}),Object.defineProperty(re.prototype,"rotation",{get:re.prototype.get_rotation,set:re.prototype.set_rotation}),Object.defineProperty(re.prototype,"angularVel",{get:re.prototype.get_angularVel,set:re.prototype.set_angularVel}),Object.defineProperty(re.prototype,"kinAngVel",{get:re.prototype.get_kinAngVel,set:re.prototype.set_kinAngVel}),Object.defineProperty(re.prototype,"torque",{get:re.prototype.get_torque,set:re.prototype.set_torque}),Object.defineProperty(re.prototype,"bounds",{get:re.prototype.get_bounds}),Object.defineProperty(re.prototype,"allowMovement",{get:re.prototype.get_allowMovement,set:re.prototype.set_allowMovement}),Object.defineProperty(re.prototype,"allowRotation",{get:re.prototype.get_allowRotation,set:re.prototype.set_allowRotation}),Object.defineProperty(re.prototype,"massMode",{get:re.prototype.get_massMode,set:re.prototype.set_massMode}),Object.defineProperty(re.prototype,"constraintMass",{get:re.prototype.get_constraintMass}),Object.defineProperty(re.prototype,"mass",{get:re.prototype.get_mass,set:re.prototype.set_mass}),Object.defineProperty(re.prototype,"gravMassMode",{get:re.prototype.get_gravMassMode,set:re.prototype.set_gravMassMode}),Object.defineProperty(re.prototype,"gravMass",{get:re.prototype.get_gravMass,set:re.prototype.set_gravMass}),Object.defineProperty(re.prototype,"gravMassScale",{get:re.prototype.get_gravMassScale,set:re.prototype.set_gravMassScale}),Object.defineProperty(re.prototype,"inertiaMode",{get:re.prototype.get_inertiaMode,set:re.prototype.set_inertiaMode}),Object.defineProperty(re.prototype,"constraintInertia",{get:re.prototype.get_constraintInertia}),Object.defineProperty(re.prototype,"inertia",{get:re.prototype.get_inertia,set:re.prototype.set_inertia}),Object.defineProperty(re.prototype,"localCOM",{get:re.prototype.get_localCOM}),Object.defineProperty(re.prototype,"worldCOM",{get:re.prototype.get_worldCOM}),re.prototype.__class__=re;var $e=nape.phys.BodyIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};$e.__name__=["nape","phys","BodyIterator"],$e.get=function(e){var t;if(null==$e.zpp_pool){xn.internal=!0;var i=new $e;xn.internal=!1,t=i}else{var n=$e.zpp_pool;$e.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},$e.prototype.zpp_inner=null,$e.prototype.zpp_i=null,$e.prototype.zpp_critical=null,$e.prototype.zpp_next=null,$e.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=$e.zpp_pool,($e.zpp_pool=this).zpp_inner=null,!1)},$e.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},$e.prototype.__class__=$e;var ee=nape.phys.BodyList=function(){this.zpp_inner=null,this.zpp_inner=new xn,this.zpp_inner.outer=this};ee.__name__=["nape","phys","BodyList"],ee.fromArray=function(e){for(var t=new ee,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ee.prototype.zpp_inner=null,ee.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ee.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ee.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},ee.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ee.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ee.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},ee.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},ee.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ee.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ee.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ee.prototype.empty=function(){return null==this.zpp_inner.inner.head},ee.prototype.iterator=function(){return this.zpp_inner.valmod(),$e.get(this)},ee.prototype.copy=function(e){null==e&&(e=!1);var t=new ee;this.zpp_inner.valmod();for(var i=$e.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},ee.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=$e.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},ee.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=$e.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},ee.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=$e.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=$e.zpp_pool,($e.zpp_pool=t).zpp_inner=null;break}}return this},ee.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ee.prototype,"length",{get:ee.prototype.get_length}),ee.prototype.__class__=ee;var oe=nape.phys.BodyType=function(){};oe.__name__=["nape","phys","BodyType"],oe.STATIC=null,oe.get_STATIC=function(){return null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1),Uo.BodyType_STATIC},oe.DYNAMIC=null,oe.get_DYNAMIC=function(){return null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),Uo.BodyType_DYNAMIC},oe.KINEMATIC=null,oe.get_KINEMATIC=function(){return null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),Uo.BodyType_KINEMATIC},oe.prototype.toString=function(){return null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1),this==Uo.BodyType_STATIC?"STATIC":(null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1),this==Uo.BodyType_DYNAMIC?"DYNAMIC":(null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),this==Uo.BodyType_KINEMATIC?"KINEMATIC":""))},Object.defineProperty(oe,"STATIC",{get:oe.get_STATIC}),Object.defineProperty(oe,"DYNAMIC",{get:oe.get_DYNAMIC}),Object.defineProperty(oe,"KINEMATIC",{get:oe.get_KINEMATIC}),oe.prototype.__class__=oe;var ie=nape.phys.Compound=function(){this.zpp_inner=null,Q.call(this),this.zpp_inner=new Yt,((this.zpp_inner.outer=this).zpp_inner.outer_i=this).zpp_inner_i=this.zpp_inner,this.zpp_inner.insert_cbtype(Be.ANY_COMPOUND.zpp_inner)};ie.__name__=["nape","phys","Compound"],ie.__super__=Q,ie.prototype=Object.create(Q.prototype),ie.prototype.zpp_inner=null,ie.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},ie.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},ie.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},ie.prototype.get_compound=function(){return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},ie.prototype.set_compound=function(e){if(this.zpp_inner.immutable_midstep("Compound::compound"),(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)!=e&&(null!=(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer)&&(null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(this),null!=e)){var t=e.zpp_inner.wrap_compounds;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.compound?null:this.zpp_inner.compound.outer},ie.prototype.get_space=function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},ie.prototype.set_space=function(e){if(this.zpp_inner.immutable_midstep("Compound::space"),(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)!=e&&(null!=(null==this.zpp_inner.space?null:this.zpp_inner.space.outer)&&(null==this.zpp_inner.space?null:this.zpp_inner.space.outer).zpp_inner.wrap_compounds.remove(this),null!=e)){var t=e.zpp_inner.wrap_compounds;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},ie.prototype.toString=function(){return"Compound"+this.zpp_inner_i.id},ie.prototype.copy=function(){return this.zpp_inner.copy()},ie.prototype.breakApart=function(){this.zpp_inner.breakApart()},ie.prototype.visitBodies=function(e){var t=this.zpp_inner.wrap_bodies;t.zpp_inner.valmod();for(var i=$e.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var a=this.zpp_inner.wrap_compounds;a.zpp_inner.valmod();for(var s=et.get(a);;){s.zpp_inner.zpp_inner.valmod();var l=s.zpp_inner;l.zpp_inner.valmod(),l.zpp_inner.zip_length&&(l.zpp_inner.zip_length=!1,l.zpp_inner.user_length=l.zpp_inner.inner.length);var p,h=l.zpp_inner.user_length;if(s.zpp_critical=!0,s.zpp_i<h?p=!0:(s.zpp_next=et.zpp_pool,(et.zpp_pool=s).zpp_inner=null,p=!1),!p)break;s.zpp_critical=!1,s.zpp_inner.at(s.zpp_i++).visitBodies(e)}},ie.prototype.visitConstraints=function(e){var t=this.zpp_inner.wrap_constraints;t.zpp_inner.valmod();for(var i=We.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var a=this.zpp_inner.wrap_compounds;a.zpp_inner.valmod();for(var s=et.get(a);;){s.zpp_inner.zpp_inner.valmod();var l=s.zpp_inner;l.zpp_inner.valmod(),l.zpp_inner.zip_length&&(l.zpp_inner.zip_length=!1,l.zpp_inner.user_length=l.zpp_inner.inner.length);var p,h=l.zpp_inner.user_length;if(s.zpp_critical=!0,s.zpp_i<h?p=!0:(s.zpp_next=et.zpp_pool,(et.zpp_pool=s).zpp_inner=null,p=!1),!p)break;s.zpp_critical=!1,s.zpp_inner.at(s.zpp_i++).visitConstraints(e)}},ie.prototype.visitCompounds=function(e){var t=this.zpp_inner.wrap_compounds;t.zpp_inner.valmod();for(var i=et.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);e(a),a.visitCompounds(e)}},ie.prototype.COM=function(e){var t;if(null==e&&(e=!1),null==jn.poolVec2?t=new ht:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var i;null==el.zpp_pool?i=new el:(i=el.zpp_pool,el.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,t.zpp_inner=i,t.zpp_inner.outer=t}else{var n,r=t.zpp_inner;if(null!=r._validate&&r._validate(),0==t.zpp_inner.x){var o=t.zpp_inner;null!=o._validate&&o._validate(),n=0==t.zpp_inner.y}else n=!1;if(!n){t.zpp_inner.x=0,t.zpp_inner.y=0;var a=t.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}t.zpp_inner.weak=e;var h=t,u=0;return this.visitBodies(function(e){if(null!=e.zpp_inner.wrap_shapes.zpp_inner.inner.head){if(null==e.zpp_inner.wrap_worldCOM){var t,i=e.zpp_inner.worldCOMx,n=e.zpp_inner.worldCOMy;if(null==jn.poolVec2?t=new ht:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var r;null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=i,r.y=n,t.zpp_inner=r,t.zpp_inner.outer=t}else{var o,a=t.zpp_inner;if(null!=a._validate&&a._validate(),t.zpp_inner.x==i){var s=t.zpp_inner;null!=s._validate&&s._validate(),o=t.zpp_inner.y==n}else o=!1;if(!o){t.zpp_inner.x=i,t.zpp_inner.y=n;var l=t.zpp_inner;null!=l._invalidate&&l._invalidate(l)}}t.zpp_inner.weak=!1,e.zpp_inner.wrap_worldCOM=t,e.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,e.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,e.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(c=e.zpp_inner,c.getworldCOM)}var p=e.zpp_inner.wrap_worldCOM;e.zpp_inner.validate_mass(),h.addeq(p.mul(e.zpp_inner.cmass,!0)),e.zpp_inner.validate_mass(),u+=e.zpp_inner.cmass}}),h.muleq(1/u),h},ie.prototype.translate=function(t){var e=t.zpp_inner.weak;if(t.zpp_inner.weak=!1,this.visitBodies(function(e){null==e.zpp_inner.wrap_pos&&e.zpp_inner.setupPosition(),e.zpp_inner.wrap_pos.addeq(t)}),t.zpp_inner.weak=e,t.zpp_inner.weak){var i=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null;var n=t;n.zpp_pool=jn.poolVec2,jn.poolVec2=n,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i}return this},ie.prototype.rotate=function(t,i){var e=t.zpp_inner.weak;if(t.zpp_inner.weak=!1,this.visitBodies(function(e){e.rotate(t,i)}),t.zpp_inner.weak=e,t.zpp_inner.weak){var n=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null;var r=t;r.zpp_pool=jn.poolVec2,jn.poolVec2=r,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n}return this},Object.defineProperty(ie.prototype,"bodies",{get:ie.prototype.get_bodies}),Object.defineProperty(ie.prototype,"constraints",{get:ie.prototype.get_constraints}),Object.defineProperty(ie.prototype,"compounds",{get:ie.prototype.get_compounds}),Object.defineProperty(ie.prototype,"compound",{get:ie.prototype.get_compound,set:ie.prototype.set_compound}),Object.defineProperty(ie.prototype,"space",{get:ie.prototype.get_space,set:ie.prototype.set_space}),ie.prototype.__class__=ie;var et=nape.phys.CompoundIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};et.__name__=["nape","phys","CompoundIterator"],et.get=function(e){var t;if(null==et.zpp_pool){zn.internal=!0;var i=new et;zn.internal=!1,t=i}else{var n=et.zpp_pool;et.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},et.prototype.zpp_inner=null,et.prototype.zpp_i=null,et.prototype.zpp_critical=null,et.prototype.zpp_next=null,et.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=et.zpp_pool,(et.zpp_pool=this).zpp_inner=null,!1)},et.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},et.prototype.__class__=et;var ae=nape.phys.CompoundList=function(){this.zpp_inner=null,this.zpp_inner=new zn,this.zpp_inner.outer=this};ae.__name__=["nape","phys","CompoundList"],ae.fromArray=function(e){for(var t=new ae,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ae.prototype.zpp_inner=null,ae.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ae.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ae.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},ae.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ae.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ae.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},ae.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},ae.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ae.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ae.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ae.prototype.empty=function(){return null==this.zpp_inner.inner.head},ae.prototype.iterator=function(){return this.zpp_inner.valmod(),et.get(this)},ae.prototype.copy=function(e){null==e&&(e=!1);var t=new ae;this.zpp_inner.valmod();for(var i=et.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},ae.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=et.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},ae.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=et.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},ae.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=et.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=et.zpp_pool,(et.zpp_pool=t).zpp_inner=null;break}}return this},ae.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ae.prototype,"length",{get:ae.prototype.get_length}),ae.prototype.__class__=ae;var se=nape.phys.FluidProperties=function(e,t){null==t&&(t=1),null==e&&(e=1),(this.zpp_inner=null)==Kt.zpp_pool?this.zpp_inner=new Kt:(this.zpp_inner=Kt.zpp_pool,Kt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),e!=1e3*(this.zpp_inner.outer=this).zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate()),t!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=t/1,this.zpp_inner.invalidate())};se.__name__=["nape","phys","FluidProperties"],se.prototype.zpp_inner=null,se.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},se.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=Bn.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},se.prototype.copy=function(){var e=new se(1e3*this.zpp_inner.density,this.zpp_inner.viscosity);null!=this.zpp_inner.userData&&(e.zpp_inner.userData=_.copy(this.zpp_inner.userData));var t=this.zpp_inner.wrap_gravity;if(null==t){if(null!=e.zpp_inner.wrap_gravity){e.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var i=e.zpp_inner.wrap_gravity,n=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n,e.zpp_inner.wrap_gravity=null}}else{null==e.zpp_inner.wrap_gravity&&e.zpp_inner.getgravity();var r=e.zpp_inner.wrap_gravity,o=t.zpp_inner;null!=o._validate&&o._validate();var a=t.zpp_inner.x,s=t.zpp_inner;null!=s._validate&&s._validate();var l,p=t.zpp_inner.y,h=r.zpp_inner;if(null!=h._validate&&h._validate(),r.zpp_inner.x==a){var u=r.zpp_inner;null!=u._validate&&u._validate(),l=r.zpp_inner.y==p}else l=!1;if(!l){r.zpp_inner.x=a,r.zpp_inner.y=p;var c=r.zpp_inner;null!=c._invalidate&&c._invalidate(c)}if(t.zpp_inner.weak){var d=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null),d._isimmutable=null,d._validate=null,d._invalidate=null,d.next=el.zpp_pool,el.zpp_pool=d}}return e},se.prototype.get_density=function(){return 1e3*this.zpp_inner.density},se.prototype.set_density=function(e){return e!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate()),1e3*this.zpp_inner.density},se.prototype.get_viscosity=function(){return this.zpp_inner.viscosity},se.prototype.set_viscosity=function(e){return e!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=e/1,this.zpp_inner.invalidate()),this.zpp_inner.viscosity},se.prototype.get_gravity=function(){return this.zpp_inner.wrap_gravity},se.prototype.set_gravity=function(e){if(null==e){if(null!=this.zpp_inner.wrap_gravity){this.zpp_inner.wrap_gravity.zpp_inner._inuse=!1;var t=this.zpp_inner.wrap_gravity,i=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i,this.zpp_inner.wrap_gravity=null}}else{null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var n=this.zpp_inner.wrap_gravity,r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x,a=e.zpp_inner;null!=a._validate&&a._validate();var s,l=e.zpp_inner.y,p=n.zpp_inner;if(null!=p._validate&&p._validate(),n.zpp_inner.x==o){var h=n.zpp_inner;null!=h._validate&&h._validate(),s=n.zpp_inner.y==l}else s=!1;if(!s){n.zpp_inner.x=o,n.zpp_inner.y=l;var u=n.zpp_inner;null!=u._invalidate&&u._invalidate(u)}if(e.zpp_inner.weak){var c=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=c.outer&&(c.outer.zpp_inner=null,c.outer=null),c._isimmutable=null,c._validate=null,c._invalidate=null,c.next=el.zpp_pool,el.zpp_pool=c}}return this.zpp_inner.wrap_gravity},se.prototype.toString=function(){return"{ density: "+1e3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+n.string(this.zpp_inner.wrap_gravity)+" }"},Object.defineProperty(se.prototype,"userData",{get:se.prototype.get_userData}),Object.defineProperty(se.prototype,"shapes",{get:se.prototype.get_shapes}),Object.defineProperty(se.prototype,"density",{get:se.prototype.get_density,set:se.prototype.set_density}),Object.defineProperty(se.prototype,"viscosity",{get:se.prototype.get_viscosity,set:se.prototype.set_viscosity}),Object.defineProperty(se.prototype,"gravity",{get:se.prototype.get_gravity,set:se.prototype.set_gravity}),se.prototype.__class__=se;var le=nape.phys.GravMassMode=function(){};le.__name__=["nape","phys","GravMassMode"],le.DEFAULT=null,le.get_DEFAULT=function(){return null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new le,Uo.internal=!1),Uo.GravMassMode_DEFAULT},le.FIXED=null,le.get_FIXED=function(){return null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new le,Uo.internal=!1),Uo.GravMassMode_FIXED},le.SCALED=null,le.get_SCALED=function(){return null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new le,Uo.internal=!1),Uo.GravMassMode_SCALED},le.prototype.toString=function(){return null==Uo.GravMassMode_DEFAULT&&(Uo.internal=!0,Uo.GravMassMode_DEFAULT=new le,Uo.internal=!1),this==Uo.GravMassMode_DEFAULT?"DEFAULT":(null==Uo.GravMassMode_FIXED&&(Uo.internal=!0,Uo.GravMassMode_FIXED=new le,Uo.internal=!1),this==Uo.GravMassMode_FIXED?"FIXED":(null==Uo.GravMassMode_SCALED&&(Uo.internal=!0,Uo.GravMassMode_SCALED=new le,Uo.internal=!1),this==Uo.GravMassMode_SCALED?"SCALED":""))},Object.defineProperty(le,"DEFAULT",{get:le.get_DEFAULT}),Object.defineProperty(le,"FIXED",{get:le.get_FIXED}),Object.defineProperty(le,"SCALED",{get:le.get_SCALED}),le.prototype.__class__=le;var pe=nape.phys.InertiaMode=function(){};pe.__name__=["nape","phys","InertiaMode"],pe.DEFAULT=null,pe.get_DEFAULT=function(){return null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new pe,Uo.internal=!1),Uo.InertiaMode_DEFAULT},pe.FIXED=null,pe.get_FIXED=function(){return null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new pe,Uo.internal=!1),Uo.InertiaMode_FIXED},pe.prototype.toString=function(){return null==Uo.InertiaMode_DEFAULT&&(Uo.internal=!0,Uo.InertiaMode_DEFAULT=new pe,Uo.internal=!1),this==Uo.InertiaMode_DEFAULT?"DEFAULT":(null==Uo.InertiaMode_FIXED&&(Uo.internal=!0,Uo.InertiaMode_FIXED=new pe,Uo.internal=!1),this==Uo.InertiaMode_FIXED?"FIXED":"")},Object.defineProperty(pe,"DEFAULT",{get:pe.get_DEFAULT}),Object.defineProperty(pe,"FIXED",{get:pe.get_FIXED}),pe.prototype.__class__=pe;var tt=nape.phys.InteractorIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};tt.__name__=["nape","phys","InteractorIterator"],tt.get=function(e){var t;if(null==tt.zpp_pool){vn.internal=!0;var i=new tt;vn.internal=!1,t=i}else{var n=tt.zpp_pool;tt.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},tt.prototype.zpp_inner=null,tt.prototype.zpp_i=null,tt.prototype.zpp_critical=null,tt.prototype.zpp_next=null,tt.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=tt.zpp_pool,(tt.zpp_pool=this).zpp_inner=null,!1)},tt.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},tt.prototype.__class__=tt;var he=nape.phys.InteractorList=function(){this.zpp_inner=null,this.zpp_inner=new vn,this.zpp_inner.outer=this};he.__name__=["nape","phys","InteractorList"],he.fromArray=function(e){for(var t=new he,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},he.prototype.zpp_inner=null,he.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},he.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner_i)},he.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},he.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner_i);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},he.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner_i)}else this.zpp_inner.inner.add(e.zpp_inner_i);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},he.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer_i},he.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer_i;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer_i},he.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},he.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner_i){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner_i),this.zpp_inner.invalidate()),t},he.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},he.prototype.empty=function(){return null==this.zpp_inner.inner.head},he.prototype.iterator=function(){return this.zpp_inner.valmod(),tt.get(this)},he.prototype.copy=function(e){null==e&&(e=!1);var t=new he;this.zpp_inner.valmod();for(var i=tt.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=tt.zpp_pool,(tt.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},he.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=tt.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},he.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=tt.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=tt.zpp_pool,(tt.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},he.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=tt.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=tt.zpp_pool,(tt.zpp_pool=t).zpp_inner=null;break}}return this},he.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(he.prototype,"length",{get:he.prototype.get_length}),he.prototype.__class__=he;var ue=nape.phys.MassMode=function(){};ue.__name__=["nape","phys","MassMode"],ue.DEFAULT=null,ue.get_DEFAULT=function(){return null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),Uo.MassMode_DEFAULT},ue.FIXED=null,ue.get_FIXED=function(){return null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),Uo.MassMode_FIXED},ue.prototype.toString=function(){return null==Uo.MassMode_DEFAULT&&(Uo.internal=!0,Uo.MassMode_DEFAULT=new ue,Uo.internal=!1),this==Uo.MassMode_DEFAULT?"DEFAULT":(null==Uo.MassMode_FIXED&&(Uo.internal=!0,Uo.MassMode_FIXED=new ue,Uo.internal=!1),this==Uo.MassMode_FIXED?"FIXED":"")},Object.defineProperty(ue,"DEFAULT",{get:ue.get_DEFAULT}),Object.defineProperty(ue,"FIXED",{get:ue.get_FIXED}),ue.prototype.__class__=ue;var ce=nape.phys.Material=function(e,t,i,n,r){null==r&&(r=.001),null==n&&(n=1),null==i&&(i=2),null==t&&(t=1),null==e&&(e=0),(this.zpp_inner=null)==Zt.zpp_pool?this.zpp_inner=new Zt:(this.zpp_inner=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null),e!=(this.zpp_inner.outer=this).zpp_inner.elasticity&&(this.zpp_inner.elasticity=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),t!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=t/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ANGDRAG|Zt.ARBITERS)),i!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=i/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),n!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=n/1e3,this.zpp_inner.invalidate(Zt.WAKE|Zt.PROPS)),r!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=r/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS))};ce.__name__=["nape","phys","Material"],ce.wood=function(){return new ce(.4,.2,.38,.7,.005)},ce.steel=function(){return new ce(.2,.57,.74,7.8,.001)},ce.ice=function(){return new ce(.3,.03,.1,.9,1e-4)},ce.rubber=function(){return new ce(.8,1,1.4,1.5,.01)},ce.glass=function(){return new ce(.4,.4,.94,2.6,.002)},ce.sand=function(){return new ce(-1,.45,.6,1.6,16)},ce.prototype.zpp_inner=null,ce.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},ce.prototype.get_shapes=function(){return null==this.zpp_inner.wrap_shapes&&(this.zpp_inner.wrap_shapes=Bn.get(this.zpp_inner.shapes,!0)),this.zpp_inner.wrap_shapes},ce.prototype.copy=function(){var e=new ce(this.zpp_inner.elasticity,this.zpp_inner.dynamicFriction,this.zpp_inner.staticFriction,1e3*this.zpp_inner.density,this.zpp_inner.rollingFriction);return null!=this.zpp_inner.userData&&(e.zpp_inner.userData=_.copy(this.zpp_inner.userData)),e},ce.prototype.get_elasticity=function(){return this.zpp_inner.elasticity},ce.prototype.set_elasticity=function(e){return e!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),this.zpp_inner.elasticity},ce.prototype.get_dynamicFriction=function(){return this.zpp_inner.dynamicFriction},ce.prototype.set_dynamicFriction=function(e){return e!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ANGDRAG|Zt.ARBITERS)),this.zpp_inner.dynamicFriction},ce.prototype.get_staticFriction=function(){return this.zpp_inner.staticFriction},ce.prototype.set_staticFriction=function(e){return e!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),this.zpp_inner.staticFriction},ce.prototype.get_density=function(){return 1e3*this.zpp_inner.density},ce.prototype.set_density=function(e){return e!=1e3*this.zpp_inner.density&&(this.zpp_inner.density=e/1e3,this.zpp_inner.invalidate(Zt.WAKE|Zt.PROPS)),1e3*this.zpp_inner.density},ce.prototype.get_rollingFriction=function(){return this.zpp_inner.rollingFriction},ce.prototype.set_rollingFriction=function(e){return e!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=e/1,this.zpp_inner.invalidate(Zt.WAKE|Zt.ARBITERS)),this.zpp_inner.rollingFriction},ce.prototype.toString=function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1e3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},Object.defineProperty(ce.prototype,"userData",{get:ce.prototype.get_userData}),Object.defineProperty(ce.prototype,"shapes",{get:ce.prototype.get_shapes}),Object.defineProperty(ce.prototype,"elasticity",{get:ce.prototype.get_elasticity,set:ce.prototype.set_elasticity}),Object.defineProperty(ce.prototype,"dynamicFriction",{get:ce.prototype.get_dynamicFriction,set:ce.prototype.set_dynamicFriction}),Object.defineProperty(ce.prototype,"staticFriction",{get:ce.prototype.get_staticFriction,set:ce.prototype.set_staticFriction}),Object.defineProperty(ce.prototype,"density",{get:ce.prototype.get_density,set:ce.prototype.set_density}),Object.defineProperty(ce.prototype,"rollingFriction",{get:ce.prototype.get_rollingFriction,set:ce.prototype.set_rollingFriction}),ce.prototype.__class__=ce;var be=nape.shape.Shape=function(){this.zpp_inner=null,Q.call(this)};be.__name__=["nape","shape","Shape"],be.__super__=Q,be.prototype=Object.create(Q.prototype),be.prototype.zpp_inner=null,be.prototype.get_type=function(){return Jt.types[this.zpp_inner.type]},be.prototype.isCircle=function(){return 0==this.zpp_inner.type},be.prototype.isPolygon=function(){return 1==this.zpp_inner.type},be.prototype.get_body=function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},be.prototype.set_body=function(e){if(this.zpp_inner.immutable_midstep("Shape::body"),(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null)!=e&&(null!=this.zpp_inner.body&&(null!=this.zpp_inner.body?this.zpp_inner.body.outer:null).zpp_inner.wrap_shapes.remove(this),null!=e)){var t=e.zpp_inner.wrap_shapes;t.zpp_inner.reverse_flag?t.push(this):t.unshift(this)}return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},be.prototype.get_castCircle=function(){return 0==this.zpp_inner.type?this.zpp_inner.circle.outer_zn:null},be.prototype.get_castPolygon=function(){return 1==this.zpp_inner.type?this.zpp_inner.polygon.outer_zn:null},be.prototype.get_worldCOM=function(){if(null==this.zpp_inner.wrap_worldCOM){var e,t=this.zpp_inner.worldCOMx,i=this.zpp_inner.worldCOMy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.zpp_inner.wrap_worldCOM=e,this.zpp_inner.wrap_worldCOM.zpp_inner._inuse=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._immutable=!0,this.zpp_inner.wrap_worldCOM.zpp_inner._validate=$(c=this.zpp_inner,c.getworldCOM)}return this.zpp_inner.wrap_worldCOM},be.prototype.get_localCOM=function(){return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},be.prototype.set_localCOM=function(e){this.zpp_inner.immutable_midstep("Body::localCOM"),null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());var t=this.zpp_inner.wrap_localCOM,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_localCOM&&(0==this.zpp_inner.type?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM()),this.zpp_inner.wrap_localCOM},be.prototype.get_area=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.area},be.prototype.get_inertia=function(){return this.zpp_inner.validate_area_inertia(),this.zpp_inner.inertia},be.prototype.get_angDrag=function(){return this.zpp_inner.validate_angDrag(),this.zpp_inner.angDrag},be.prototype.get_material=function(){return this.zpp_inner.material.wrapper()},be.prototype.set_material=function(e){return this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(e.zpp_inner),this.zpp_inner.material.wrapper()},be.prototype.get_filter=function(){return this.zpp_inner.filter.wrapper()},be.prototype.set_filter=function(e){return this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(e.zpp_inner),this.zpp_inner.filter.wrapper()},be.prototype.get_fluidProperties=function(){return this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},be.prototype.set_fluidProperties=function(e){return this.zpp_inner.setFluid(e.zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()},be.prototype.get_fluidEnabled=function(){return this.zpp_inner.fluidEnabled},be.prototype.set_fluidEnabled=function(e){return this.zpp_inner.immutable_midstep("Shape::fluidEnabled"),(this.zpp_inner.fluidEnabled=e)&&null==this.zpp_inner.fluidProperties&&(this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new se).zpp_inner),this.zpp_inner.fluidProperties.wrapper()),this.zpp_inner.wake(),this.zpp_inner.fluidEnabled},be.prototype.get_sensorEnabled=function(){return this.zpp_inner.sensorEnabled},be.prototype.set_sensorEnabled=function(e){return this.zpp_inner.immutable_midstep("Shape::sensorEnabled"),this.zpp_inner.sensorEnabled=e,this.zpp_inner.wake(),this.zpp_inner.sensorEnabled},be.prototype.get_bounds=function(){return this.zpp_inner.aabb.wrapper()},be.prototype.translate=function(e){if(this.zpp_inner.immutable_midstep("Shape::translate()"),0<e.lsq())if(0==this.zpp_inner.type){var t=e.zpp_inner;null!=t._validate&&t._validate();var i=e.zpp_inner.x,n=e.zpp_inner;null!=n._validate&&n._validate(),this.zpp_inner.circle.__translate(i,e.zpp_inner.y)}else{var r=e.zpp_inner;null!=r._validate&&r._validate();var o=e.zpp_inner.x,a=e.zpp_inner;null!=a._validate&&a._validate(),this.zpp_inner.polygon.__translate(o,e.zpp_inner.y)}if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s}return this},be.prototype.scale=function(e,t){if(this.zpp_inner.immutable_midstep("Shape::scale()"),0==this.zpp_inner.type){var i=e*e-t*t;i*i<Qs.epsilon*Qs.epsilon&&this.zpp_inner.circle.__scale(e,t)}else this.zpp_inner.polygon.__scale(e,t);return this},be.prototype.rotate=function(e){if(this.zpp_inner.immutable_midstep("Shape::rotate()"),e%(2*Math.PI)!=0){var t=Math.cos(e),i=Math.sin(e);0==this.zpp_inner.type?this.zpp_inner.circle.__rotate(i,t):this.zpp_inner.polygon.__rotate(i,t)}return this},be.prototype.transform=function(e){return this.zpp_inner.immutable_midstep("Shape::transform()"),0==this.zpp_inner.type?e.equiorthogonal()&&this.zpp_inner.circle.__transform(e):this.zpp_inner.polygon.__transform(e),this},be.prototype.contains=function(e){wt.validateShape(this.zpp_inner);var t=e.zpp_inner;null!=t._validate&&t._validate();var i=$s.shapeContains(this.zpp_inner,e.zpp_inner);if(e.zpp_inner.weak){var n=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n}return i},be.prototype.copy=function(){return this.zpp_inner.copy()},be.prototype.toString=function(){return(0==this.zpp_inner.type?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},Object.defineProperty(be.prototype,"type",{get:be.prototype.get_type}),Object.defineProperty(be.prototype,"body",{get:be.prototype.get_body,set:be.prototype.set_body}),Object.defineProperty(be.prototype,"castCircle",{get:be.prototype.get_castCircle}),Object.defineProperty(be.prototype,"castPolygon",{get:be.prototype.get_castPolygon}),Object.defineProperty(be.prototype,"worldCOM",{get:be.prototype.get_worldCOM}),Object.defineProperty(be.prototype,"localCOM",{get:be.prototype.get_localCOM,set:be.prototype.set_localCOM}),Object.defineProperty(be.prototype,"area",{get:be.prototype.get_area}),Object.defineProperty(be.prototype,"inertia",{get:be.prototype.get_inertia}),Object.defineProperty(be.prototype,"angDrag",{get:be.prototype.get_angDrag}),Object.defineProperty(be.prototype,"material",{get:be.prototype.get_material,set:be.prototype.set_material}),Object.defineProperty(be.prototype,"filter",{get:be.prototype.get_filter,set:be.prototype.set_filter}),Object.defineProperty(be.prototype,"fluidProperties",{get:be.prototype.get_fluidProperties,set:be.prototype.set_fluidProperties}),Object.defineProperty(be.prototype,"fluidEnabled",{get:be.prototype.get_fluidEnabled,set:be.prototype.set_fluidEnabled}),Object.defineProperty(be.prototype,"sensorEnabled",{get:be.prototype.get_sensorEnabled,set:be.prototype.set_sensorEnabled}),Object.defineProperty(be.prototype,"bounds",{get:be.prototype.get_bounds}),be.prototype.__class__=be;var de=nape.shape.Circle=function(e,t,i,n){if(this.zpp_inner_zn=null,be.call(this),this.zpp_inner_zn=new Qt,((this.zpp_inner_zn.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,(this.zpp_inner_i.outer_i=this).zpp_inner.immutable_midstep("Circle::radius"),e!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=e,this.zpp_inner_zn.invalidate_radius()),null==t)this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0;else{var r=t.zpp_inner;null!=r._validate&&r._validate(),this.zpp_inner.localCOMx=t.zpp_inner.x;var o=t.zpp_inner;if(null!=o._validate&&o._validate(),this.zpp_inner.localCOMy=t.zpp_inner.y,t.zpp_inner.weak){var a=t.zpp_inner;t.zpp_inner.outer=null,t.zpp_inner=null,t.zpp_pool=jn.poolVec2,jn.poolVec2=t,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a}}null==i?null==Zt.zpp_pool?this.zpp_inner.material=new Zt:(this.zpp_inner.material=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(i.zpp_inner),this.zpp_inner.material.wrapper()),null==n?null==ft.zpp_pool?this.zpp_inner.filter=new ft:(this.zpp_inner.filter=ft.zpp_pool,ft.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(n.zpp_inner),this.zpp_inner.filter.wrapper()),this.zpp_inner_i.insert_cbtype(Be.ANY_SHAPE.zpp_inner)};de.__name__=["nape","shape","Circle"],de.__super__=be,de.prototype=Object.create(be.prototype),de.prototype.zpp_inner_zn=null,de.prototype.get_radius=function(){return this.zpp_inner_zn.radius},de.prototype.set_radius=function(e){return this.zpp_inner.immutable_midstep("Circle::radius"),e!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=e,this.zpp_inner_zn.invalidate_radius()),this.zpp_inner_zn.radius},Object.defineProperty(de.prototype,"radius",{get:de.prototype.get_radius,set:de.prototype.set_radius}),de.prototype.__class__=de;var _e=nape.shape.Edge=function(){this.zpp_inner=null};_e.__name__=["nape","shape","Edge"],_e.prototype.zpp_inner=null,_e.prototype.get_polygon=function(){return this.zpp_inner.polygon.outer_zn},_e.prototype.get_localNormal=function(){return null==this.zpp_inner.wrap_lnorm&&this.zpp_inner.getlnorm(),this.zpp_inner.wrap_lnorm},_e.prototype.get_worldNormal=function(){return null==this.zpp_inner.wrap_gnorm&&this.zpp_inner.getgnorm(),this.zpp_inner.wrap_gnorm},_e.prototype.get_length=function(){return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.length},_e.prototype.get_localProjection=function(){return this.zpp_inner.polygon.validate_laxi(),this.zpp_inner.lprojection},_e.prototype.get_worldProjection=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,l=e.gverts.next,p=l;for(l=l.next;null!=l;){var h=l,u=s.elt;s=s.next,u.gp0=p,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,l=l.next}var c=s.elt;c.gp0=p,c.gp1=e.gverts.next,c.gnormx=e.body.axisy*c.lnormx-e.body.axisx*c.lnormy,c.gnormy=c.lnormx*e.body.axisx+c.lnormy*e.body.axisy,c.gprojection=e.body.posx*c.gnormx+e.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}return this.zpp_inner.gprojection},_e.prototype.get_localVertex1=function(){this.zpp_inner.polygon.validate_laxi();var e=this.zpp_inner.lp0;if(null==e.outer){e.outer=new ht;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=el.zpp_pool,el.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},_e.prototype.get_localVertex2=function(){this.zpp_inner.polygon.validate_laxi();var e=this.zpp_inner.lp1;if(null==e.outer){e.outer=new ht;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=el.zpp_pool,el.zpp_pool=t,e.outer.zpp_inner=e}return e.outer},_e.prototype.get_worldVertex1=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,l=e.gverts.next,p=l;for(l=l.next;null!=l;){var h=l,u=s.elt;s=s.next,u.gp0=p,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,l=l.next}var c=s.elt;c.gp0=p,c.gp1=e.gverts.next,c.gnormx=e.body.axisy*c.lnormx-e.body.axisx*c.lnormy,c.gnormy=c.lnormx*e.body.axisx+c.lnormy*e.body.axisy,c.gprojection=e.body.posx*c.gnormx+e.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}var d=this.zpp_inner.gp0;if(null==d.outer){d.outer=new ht;var _=d.outer.zpp_inner;null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=el.zpp_pool,el.zpp_pool=_,d.outer.zpp_inner=d}return d.outer},_e.prototype.get_worldVertex2=function(){var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,l=e.gverts.next,p=l;for(l=l.next;null!=l;){var h=l,u=s.elt;s=s.next,u.gp0=p,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,l=l.next}var c=s.elt;c.gp0=p,c.gp1=e.gverts.next,c.gnormx=e.body.axisy*c.lnormx-e.body.axisx*c.lnormy,c.gnormy=c.lnormx*e.body.axisx+c.lnormy*e.body.axisy,c.gprojection=e.body.posx*c.gnormx+e.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}var d=this.zpp_inner.gp1;if(null==d.outer){d.outer=new ht;var _=d.outer.zpp_inner;null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=el.zpp_pool,el.zpp_pool=_,d.outer.zpp_inner=d}return d.outer},_e.prototype.toString=function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } }";var e=this.zpp_inner.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,l=e.gverts.next,p=l;for(l=l.next;null!=l;){var h=l,u=s.elt;s=s.next,u.gp0=p,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,l=l.next}var c=s.elt;c.gp0=p,c.gp1=e.gverts.next,c.gnormx=e.body.axisy*c.lnormx-e.body.axisx*c.lnormy,c.gnormy=c.lnormx*e.body.axisx+c.lnormy*e.body.axisy,c.gprojection=e.body.posx*c.gnormx+e.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}return"{ localNormal : { x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" } worldNormal : { x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" } }"},Object.defineProperty(_e.prototype,"polygon",{get:_e.prototype.get_polygon}),Object.defineProperty(_e.prototype,"localNormal",{get:_e.prototype.get_localNormal}),Object.defineProperty(_e.prototype,"worldNormal",{get:_e.prototype.get_worldNormal}),Object.defineProperty(_e.prototype,"length",{get:_e.prototype.get_length}),Object.defineProperty(_e.prototype,"localProjection",{get:_e.prototype.get_localProjection}),Object.defineProperty(_e.prototype,"worldProjection",{get:_e.prototype.get_worldProjection}),Object.defineProperty(_e.prototype,"localVertex1",{get:_e.prototype.get_localVertex1}),Object.defineProperty(_e.prototype,"localVertex2",{get:_e.prototype.get_localVertex2}),Object.defineProperty(_e.prototype,"worldVertex1",{get:_e.prototype.get_worldVertex1}),Object.defineProperty(_e.prototype,"worldVertex2",{get:_e.prototype.get_worldVertex2}),_e.prototype.__class__=_e;var it=nape.shape.EdgeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};it.__name__=["nape","shape","EdgeIterator"],it.get=function(e){var t;if(null==it.zpp_pool){In.internal=!0;var i=new it;In.internal=!1,t=i}else{var n=it.zpp_pool;it.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},it.prototype.zpp_inner=null,it.prototype.zpp_i=null,it.prototype.zpp_critical=null,it.prototype.zpp_next=null,it.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=it.zpp_pool,(it.zpp_pool=this).zpp_inner=null,!1)},it.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},it.prototype.__class__=it;var ye=nape.shape.EdgeList=function(){this.zpp_inner=null,this.zpp_inner=new In,this.zpp_inner.outer=this};ye.__name__=["nape","shape","EdgeList"],ye.fromArray=function(e){for(var t=new ye,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},ye.prototype.zpp_inner=null,ye.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},ye.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},ye.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e==this.zpp_inner.user_length-1?e=e:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-2-e)),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},ye.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ye.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},ye.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.wrapper()},ye.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).wrapper();null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.wrapper()},ye.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},ye.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},ye.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},ye.prototype.empty=function(){return null==this.zpp_inner.inner.head},ye.prototype.iterator=function(){return this.zpp_inner.valmod(),it.get(this)},ye.prototype.copy=function(e){null==e&&(e=!1);var t=new ye;this.zpp_inner.valmod();for(var i=it.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=it.zpp_pool,(it.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},ye.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=it.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},ye.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=it.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=it.zpp_pool,(it.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},ye.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=it.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=it.zpp_pool,(it.zpp_pool=t).zpp_inner=null;break}}return this},ye.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(ye.prototype,"length",{get:ye.prototype.get_length}),ye.prototype.__class__=ye;var me=nape.shape.Polygon=function(e,t,i){if(this.zpp_inner_zn=null,be.call(this),this.zpp_inner_zn=new ei,((this.zpp_inner_zn.outer=this).zpp_inner_zn.outer_zn=this).zpp_inner=this.zpp_inner_zn,this.zpp_inner_i=this.zpp_inner,this.zpp_inner_i.outer_i=this,e instanceof Array&&null==e.__enum__)for(var n=e,r=0;r<n.length;){var o=n[r];++r;var a=o;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var s=this.zpp_inner_zn.wrap_lverts,l=a.zpp_inner;null!=l._validate&&l._validate();var p=a.zpp_inner.x,h=a.zpp_inner;null!=h._validate&&h._validate();var u,c=a.zpp_inner.y;if(null==jn.poolVec2?u=new ht:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var d;null==el.zpp_pool?d=new el:(d=el.zpp_pool,el.zpp_pool=d.next,d.next=null),d.weak=!1,d._immutable=!1,d.x=p,d.y=c,u.zpp_inner=d,u.zpp_inner.outer=u}else{var _,y=u.zpp_inner;if(null!=y._validate&&y._validate(),u.zpp_inner.x==p){var m=u.zpp_inner;null!=m._validate&&m._validate(),_=u.zpp_inner.y==c}else _=!1;if(!_){u.zpp_inner.x=p,u.zpp_inner.y=c;var f=u.zpp_inner;null!=f._invalidate&&f._invalidate(f)}}u.zpp_inner.weak=!1,s.push(u)}else if(ze.__instanceof(e,ge))for(var x=e.iterator();;){x.zpp_inner.zpp_inner.valmod();var v,z=x.zpp_inner.zpp_gl();if(x.zpp_critical=!0,x.zpp_i<z?v=!0:(x.zpp_next=Qe.zpp_pool,(Qe.zpp_pool=x).zpp_inner=null,v=!1),!v)break;x.zpp_critical=!1;var g=x.zpp_inner.at(x.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var b=this.zpp_inner_zn.wrap_lverts,w=g.zpp_inner;null!=w._validate&&w._validate();var S=g.zpp_inner.x,C=g.zpp_inner;null!=C._validate&&C._validate();var M,P=g.zpp_inner.y;if(null==jn.poolVec2?M=new ht:(M=jn.poolVec2,jn.poolVec2=M.zpp_pool,M.zpp_pool=null),null==M.zpp_inner){var k;null==el.zpp_pool?k=new el:(k=el.zpp_pool,el.zpp_pool=k.next,k.next=null),k.weak=!1,k._immutable=!1,k.x=S,k.y=P,M.zpp_inner=k,M.zpp_inner.outer=M}else{var T,O=M.zpp_inner;if(null!=O._validate&&O._validate(),M.zpp_inner.x==S){var A=M.zpp_inner;null!=A._validate&&A._validate(),T=M.zpp_inner.y==P}else T=!1;if(!T){M.zpp_inner.x=S,M.zpp_inner.y=P;var E=M.zpp_inner;null!=E._invalidate&&E._invalidate(E)}}M.zpp_inner.weak=!1,b.push(M)}else if(ze.__instanceof(e,bn)){var G=e.zpp_inner.vertices;if(null!=G)for(var I=G;;){var B,L=I.x,D=I.y;if(null==jn.poolVec2?B=new ht:(B=jn.poolVec2,jn.poolVec2=B.zpp_pool,B.zpp_pool=null),null==B.zpp_inner){var R;null==el.zpp_pool?R=new el:(R=el.zpp_pool,el.zpp_pool=R.next,R.next=null),R.weak=!1,R._immutable=!1,R.x=L,R.y=D,B.zpp_inner=R,B.zpp_inner.outer=B}else{var F,j=B.zpp_inner;if(null!=j._validate&&j._validate(),B.zpp_inner.x==L){var N=B.zpp_inner;null!=N._validate&&N._validate(),F=B.zpp_inner.y==D}else F=!1;if(!F){B.zpp_inner.x=L,B.zpp_inner.y=D;var U=B.zpp_inner;null!=U._invalidate&&U._invalidate(U)}}B.zpp_inner.weak=!1;var V=B;I=I.next,null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();var H=this.zpp_inner_zn.wrap_lverts,W=V.zpp_inner;null!=W._validate&&W._validate();var X=V.zpp_inner.x,q=V.zpp_inner;null!=q._validate&&q._validate();var Y,K=V.zpp_inner.y;if(null==jn.poolVec2?Y=new ht:(Y=jn.poolVec2,jn.poolVec2=Y.zpp_pool,Y.zpp_pool=null),null==Y.zpp_inner){var Z;null==el.zpp_pool?Z=new el:(Z=el.zpp_pool,el.zpp_pool=Z.next,Z.next=null),Z.weak=!1,Z._immutable=!1,Z.x=X,Z.y=K,Y.zpp_inner=Z,Y.zpp_inner.outer=Y}else{var J,Q=Y.zpp_inner;if(null!=Q._validate&&Q._validate(),Y.zpp_inner.x==X){var $=Y.zpp_inner;null!=$._validate&&$._validate(),J=Y.zpp_inner.y==K}else J=!1;if(!J){Y.zpp_inner.x=X,Y.zpp_inner.y=K;var ee=Y.zpp_inner;null!=ee._invalidate&&ee._invalidate(ee)}}Y.zpp_inner.weak=!1,H.push(Y);var te=V.zpp_inner;V.zpp_inner.outer=null,V.zpp_inner=null;var ie=V;ie.zpp_pool=jn.poolVec2,jn.poolVec2=ie;var ne=te;if(null!=ne.outer&&(ne.outer.zpp_inner=null,ne.outer=null),ne._isimmutable=null,ne._validate=null,ne._invalidate=null,ne.next=el.zpp_pool,el.zpp_pool=ne,I==G)break}}if(e instanceof Array&&null==e.__enum__)for(var re=e,oe=0;oe<re.length;){var ae,se=re[oe];if(se.zpp_inner.weak){var le=se.zpp_inner;se.zpp_inner.outer=null,se.zpp_inner=null;var pe=se;pe.zpp_pool=jn.poolVec2,jn.poolVec2=pe;var he=le;null!=he.outer&&(he.outer.zpp_inner=null,he.outer=null),he._isimmutable=null,he._validate=null,he._invalidate=null,he.next=el.zpp_pool,el.zpp_pool=he,ae=!0}else ae=!1;ae?re.splice(oe,1):++oe}else if(ze.__instanceof(e,ge)){var ue=e;null!=ue.zpp_inner._validate&&ue.zpp_inner._validate();for(var ce=ue.zpp_inner.inner,de=null,_e=ce.head;null!=_e;){var ye=_e.elt;if(ye.outer.zpp_inner.weak){if(_e=ce.erase(de),ye.outer.zpp_inner.weak){var me=ye.outer,fe=me.zpp_inner;me.zpp_inner.outer=null,me.zpp_inner=null;var xe=me;xe.zpp_pool=jn.poolVec2,jn.poolVec2=xe;var ve=fe;null!=ve.outer&&(ve.outer.zpp_inner=null,ve.outer=null),ve._isimmutable=null,ve._validate=null,ve._invalidate=null,ve.next=el.zpp_pool,el.zpp_pool=ve}}else _e=(de=_e).next}}null==t?null==Zt.zpp_pool?this.zpp_inner.material=new Zt:(this.zpp_inner.material=Zt.zpp_pool,Zt.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(t.zpp_inner),this.zpp_inner.material.wrapper()),null==i?null==ft.zpp_pool?this.zpp_inner.filter=new ft:(this.zpp_inner.filter=ft.zpp_pool,ft.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(i.zpp_inner),this.zpp_inner.filter.wrapper()),this.zpp_inner_i.insert_cbtype(Be.ANY_SHAPE.zpp_inner)};me.__name__=["nape","shape","Polygon"],me.__super__=be,me.prototype=Object.create(be.prototype),me.rect=function(e,t,i,n,r){var o;if(null==r&&(r=!1),null==jn.poolVec2?o=new ht:(o=jn.poolVec2,jn.poolVec2=o.zpp_pool,o.zpp_pool=null),null==o.zpp_inner){var a;null==el.zpp_pool?a=new el:(a=el.zpp_pool,el.zpp_pool=a.next,a.next=null),a.weak=!1,a._immutable=!1,a.x=e,a.y=t,o.zpp_inner=a,o.zpp_inner.outer=o}else{var s,l=o.zpp_inner;if(null!=l._validate&&l._validate(),o.zpp_inner.x==e){var p=o.zpp_inner;null!=p._validate&&p._validate(),s=o.zpp_inner.y==t}else s=!1;if(!s){o.zpp_inner.x=e,o.zpp_inner.y=t;var h=o.zpp_inner;null!=h._invalidate&&h._invalidate(h)}}o.zpp_inner.weak=r;var u,c=o,d=e+i;if(null==jn.poolVec2?u=new ht:(u=jn.poolVec2,jn.poolVec2=u.zpp_pool,u.zpp_pool=null),null==u.zpp_inner){var _;null==el.zpp_pool?_=new el:(_=el.zpp_pool,el.zpp_pool=_.next,_.next=null),_.weak=!1,_._immutable=!1,_.x=d,_.y=t,u.zpp_inner=_,u.zpp_inner.outer=u}else{var y,m=u.zpp_inner;if(null!=m._validate&&m._validate(),u.zpp_inner.x==d){var f=u.zpp_inner;null!=f._validate&&f._validate(),y=u.zpp_inner.y==t}else y=!1;if(!y){u.zpp_inner.x=d,u.zpp_inner.y=t;var x=u.zpp_inner;null!=x._invalidate&&x._invalidate(x)}}u.zpp_inner.weak=r;var v,z=u,g=e+i,b=t+n;if(null==jn.poolVec2?v=new ht:(v=jn.poolVec2,jn.poolVec2=v.zpp_pool,v.zpp_pool=null),null==v.zpp_inner){var w;null==el.zpp_pool?w=new el:(w=el.zpp_pool,el.zpp_pool=w.next,w.next=null),w.weak=!1,w._immutable=!1,w.x=g,w.y=b,v.zpp_inner=w,v.zpp_inner.outer=v}else{var S,C=v.zpp_inner;if(null!=C._validate&&C._validate(),v.zpp_inner.x==g){var M=v.zpp_inner;null!=M._validate&&M._validate(),S=v.zpp_inner.y==b}else S=!1;if(!S){v.zpp_inner.x=g,v.zpp_inner.y=b;var P=v.zpp_inner;null!=P._invalidate&&P._invalidate(P)}}v.zpp_inner.weak=r;var k,T=v,O=t+n;if(null==jn.poolVec2?k=new ht:(k=jn.poolVec2,jn.poolVec2=k.zpp_pool,k.zpp_pool=null),null==k.zpp_inner){var A;null==el.zpp_pool?A=new el:(A=el.zpp_pool,el.zpp_pool=A.next,A.next=null),A.weak=!1,A._immutable=!1,A.x=e,A.y=O,k.zpp_inner=A,k.zpp_inner.outer=k}else{var E,G=k.zpp_inner;if(null!=G._validate&&G._validate(),k.zpp_inner.x==e){var I=k.zpp_inner;null!=I._validate&&I._validate(),E=k.zpp_inner.y==O}else E=!1;if(!E){k.zpp_inner.x=e,k.zpp_inner.y=O;var B=k.zpp_inner;null!=B._invalidate&&B._invalidate(B)}}return k.zpp_inner.weak=r,[c,z,T,k]},me.box=function(e,t,i){return null==i&&(i=!1),me.rect(-e/2,-t/2,e,t,i)},me.regular=function(e,t,i,n,r){null==r&&(r=!1),null==n&&(n=0);for(var o=[],a=2*Math.PI/i,s=0;s<i;){var l,p=s++*a+n,h=Math.cos(p)*e,u=Math.sin(p)*t;if(null==jn.poolVec2?l=new ht:(l=jn.poolVec2,jn.poolVec2=l.zpp_pool,l.zpp_pool=null),null==l.zpp_inner){var c;null==el.zpp_pool?c=new el:(c=el.zpp_pool,el.zpp_pool=c.next,c.next=null),c.weak=!1,c._immutable=!1,c.x=h,c.y=u,l.zpp_inner=c,l.zpp_inner.outer=l}else{var d,_=l.zpp_inner;if(null!=_._validate&&_._validate(),l.zpp_inner.x==h){var y=l.zpp_inner;null!=y._validate&&y._validate(),d=l.zpp_inner.y==u}else d=!1;if(!d){l.zpp_inner.x=h,l.zpp_inner.y=u;var m=l.zpp_inner;null!=m._invalidate&&m._invalidate(m)}}l.zpp_inner.weak=r,o.push(l)}return o},me.prototype.zpp_inner_zn=null,me.prototype.get_localVerts=function(){return null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts(),this.zpp_inner_zn.wrap_lverts},me.prototype.get_worldVerts=function(){return null==this.zpp_inner_zn.wrap_gverts&&this.zpp_inner_zn.getgverts(),this.zpp_inner_zn.wrap_gverts},me.prototype.get_edges=function(){return null==this.zpp_inner_zn.wrap_edges&&this.zpp_inner_zn.getedges(),this.zpp_inner_zn.wrap_edges},me.prototype.validity=function(){return this.zpp_inner_zn.valid()},Object.defineProperty(me.prototype,"localVerts",{get:me.prototype.get_localVerts}),Object.defineProperty(me.prototype,"worldVerts",{get:me.prototype.get_worldVerts}),Object.defineProperty(me.prototype,"edges",{get:me.prototype.get_edges}),me.prototype.__class__=me;var ut=nape.shape.ShapeIterator=function(){this.zpp_next=null,this.zpp_critical=!1,this.zpp_i=0,this.zpp_inner=null};ut.__name__=["nape","shape","ShapeIterator"],ut.get=function(e){var t;if(null==ut.zpp_pool){Bn.internal=!0;var i=new ut;Bn.internal=!1,t=i}else{var n=ut.zpp_pool;ut.zpp_pool=n.zpp_next,t=n}return t.zpp_i=0,t.zpp_inner=e,t.zpp_critical=!1,t},ut.prototype.zpp_inner=null,ut.prototype.zpp_i=null,ut.prototype.zpp_critical=null,ut.prototype.zpp_next=null,ut.prototype.hasNext=function(){this.zpp_inner.zpp_inner.valmod();var e=this.zpp_inner;e.zpp_inner.valmod(),e.zpp_inner.zip_length&&(e.zpp_inner.zip_length=!1,e.zpp_inner.user_length=e.zpp_inner.inner.length);var t=e.zpp_inner.user_length;return this.zpp_critical=!0,this.zpp_i<t||(this.zpp_next=ut.zpp_pool,(ut.zpp_pool=this).zpp_inner=null,!1)},ut.prototype.next=function(){return this.zpp_critical=!1,this.zpp_inner.at(this.zpp_i++)},ut.prototype.__class__=ut;var fe=nape.shape.ShapeList=function(){this.zpp_inner=null,this.zpp_inner=new Bn,this.zpp_inner.outer=this};fe.__name__=["nape","shape","ShapeList"],fe.fromArray=function(e){for(var t=new fe,i=0;i<e.length;){var n=e[i];++i,t.push(n)}return t},fe.prototype.zpp_inner=null,fe.prototype.get_length=function(){return this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),this.zpp_inner.user_length},fe.prototype.has=function(e){return this.zpp_inner.valmod(),this.zpp_inner.inner.has(e.zpp_inner)},fe.prototype.at=function(e){if(this.zpp_inner.valmod(),this.zpp_inner.reverse_flag&&(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),e=this.zpp_inner.user_length-1-e),e<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=e,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(e);else for(;this.zpp_inner.at_index!=e;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},fe.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag)this.zpp_inner.inner.add(e.zpp_inner);else{var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},fe.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);if(t){if(this.zpp_inner.reverse_flag){var i;if(null==this.zpp_inner.push_ite)null==this.zpp_inner.inner.head?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-1)),this.zpp_inner.push_ite=i;this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,e.zpp_inner)}else this.zpp_inner.inner.add(e.zpp_inner);this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)}return t},fe.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(t),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{var i;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?i=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),i=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var n=(e=null==i?this.zpp_inner.inner.head.elt:i.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(i)}return this.zpp_inner.invalidate(),e.outer},fe.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_inner.valmod();var e=null;if(this.zpp_inner.reverse_flag){var t;null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null),this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),1==this.zpp_inner.user_length?t=null:(this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t=this.zpp_inner.inner.iterator_at(this.zpp_inner.user_length-2));var i=(e=null==t?this.zpp_inner.inner.head.elt:t.next.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.zpp_inner.inner.erase(t)}else{var n=(e=this.zpp_inner.inner.head.elt).outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}return this.zpp_inner.invalidate(),e.outer},fe.prototype.add=function(e){return this.zpp_inner.reverse_flag?this.push(e):this.unshift(e)},fe.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_inner.valmod(),t=!1;for(var i=this.zpp_inner.inner.head;null!=i;){if(i.elt==e.zpp_inner){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},fe.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},fe.prototype.empty=function(){return null==this.zpp_inner.inner.head},fe.prototype.iterator=function(){return this.zpp_inner.valmod(),ut.get(this)},fe.prototype.copy=function(e){null==e&&(e=!1);var t=new fe;this.zpp_inner.valmod();for(var i=ut.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=ut.zpp_pool,(ut.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t.push(e?null:a)}return t},fe.prototype.merge=function(e){e.zpp_inner.valmod();for(var t=ut.get(e);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=ut.zpp_pool,(ut.zpp_pool=t).zpp_inner=null,n=!1),!n)break;t.zpp_critical=!1;var o=t.zpp_inner.at(t.zpp_i++);this.has(o)||(this.zpp_inner.reverse_flag?this.push(o):this.unshift(o))}},fe.prototype.toString=function(){var e="[",t=!0;this.zpp_inner.valmod();for(var i=ut.get(this);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=ut.zpp_pool,(ut.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);t||(e+=","),e+=null==a?"NULL":a.toString(),t=!1}return e+"]"},fe.prototype.foreach=function(e){this.zpp_inner.valmod();for(var t=ut.get(this);;){t.zpp_inner.zpp_inner.valmod();var i=t.zpp_inner;i.zpp_inner.valmod(),i.zpp_inner.zip_length&&(i.zpp_inner.zip_length=!1,i.zpp_inner.user_length=i.zpp_inner.inner.length);var n,r=i.zpp_inner.user_length;if(t.zpp_critical=!0,t.zpp_i<r?n=!0:(t.zpp_next=ut.zpp_pool,(ut.zpp_pool=t).zpp_inner=null,n=!1),!n)break;try{t.zpp_critical=!1,e(t.zpp_inner.at(t.zpp_i++))}catch(e){t.zpp_next=ut.zpp_pool,(ut.zpp_pool=t).zpp_inner=null;break}}return this},fe.prototype.filter=function(e){for(var t=0;this.zpp_inner.valmod(),this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length),t<this.zpp_inner.user_length;){var i=this.at(t);try{e(i)?++t:this.remove(i)}catch(e){break}}return this},Object.defineProperty(fe.prototype,"length",{get:fe.prototype.get_length}),fe.prototype.__class__=fe;var xe=nape.shape.ShapeType=function(){};xe.__name__=["nape","shape","ShapeType"],xe.CIRCLE=null,xe.get_CIRCLE=function(){return null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new xe,Uo.internal=!1),Uo.ShapeType_CIRCLE},xe.POLYGON=null,xe.get_POLYGON=function(){return null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new xe,Uo.internal=!1),Uo.ShapeType_POLYGON},xe.prototype.toString=function(){return null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new xe,Uo.internal=!1),this==Uo.ShapeType_CIRCLE?"CIRCLE":(null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new xe,Uo.internal=!1),this==Uo.ShapeType_POLYGON?"POLYGON":"")},Object.defineProperty(xe,"CIRCLE",{get:xe.get_CIRCLE}),Object.defineProperty(xe,"POLYGON",{get:xe.get_POLYGON}),xe.prototype.__class__=xe;var ve=nape.shape.ValidationResult=function(){};ve.__name__=["nape","shape","ValidationResult"],ve.VALID=null,ve.get_VALID=function(){return null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new ve,Uo.internal=!1),Uo.ValidationResult_VALID},ve.DEGENERATE=null,ve.get_DEGENERATE=function(){return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new ve,Uo.internal=!1),Uo.ValidationResult_DEGENERATE},ve.CONCAVE=null,ve.get_CONCAVE=function(){return null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new ve,Uo.internal=!1),Uo.ValidationResult_CONCAVE},ve.SELF_INTERSECTING=null,ve.get_SELF_INTERSECTING=function(){return null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new ve,Uo.internal=!1),Uo.ValidationResult_SELF_INTERSECTING},ve.prototype.toString=function(){return null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new ve,Uo.internal=!1),this==Uo.ValidationResult_VALID?"VALID":(null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new ve,Uo.internal=!1),this==Uo.ValidationResult_DEGENERATE?"DEGENERATE":(null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new ve,Uo.internal=!1),this==Uo.ValidationResult_CONCAVE?"CONCAVE":(null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new ve,Uo.internal=!1),this==Uo.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")))},Object.defineProperty(ve,"VALID",{get:ve.get_VALID}),Object.defineProperty(ve,"DEGENERATE",{get:ve.get_DEGENERATE}),Object.defineProperty(ve,"CONCAVE",{get:ve.get_CONCAVE}),Object.defineProperty(ve,"SELF_INTERSECTING",{get:ve.get_SELF_INTERSECTING}),ve.prototype.__class__=ve;var we=nape.space.Broadphase=function(){};we.__name__=["nape","space","Broadphase"],we.DYNAMIC_AABB_TREE=null,we.get_DYNAMIC_AABB_TREE=function(){return null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),Uo.Broadphase_DYNAMIC_AABB_TREE},we.SWEEP_AND_PRUNE=null,we.get_SWEEP_AND_PRUNE=function(){return null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),Uo.Broadphase_SWEEP_AND_PRUNE},we.prototype.toString=function(){return null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),this==Uo.Broadphase_DYNAMIC_AABB_TREE?"DYNAMIC_AABB_TREE":(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),this==Uo.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"")},Object.defineProperty(we,"DYNAMIC_AABB_TREE",{get:we.get_DYNAMIC_AABB_TREE}),Object.defineProperty(we,"SWEEP_AND_PRUNE",{get:we.get_SWEEP_AND_PRUNE}),we.prototype.__class__=we;var Se=nape.space.Space=function(e,t){if(this.zpp_inner=null,this.zpp_inner=new si(null==e?null:e.zpp_inner,t),this.zpp_inner.outer=this,null!=e&&e.zpp_inner.weak){var i=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i}};Se.__name__=["nape","space","Space"],Se.prototype.zpp_inner=null,Se.prototype.get_userData=function(){return null==this.zpp_inner.userData&&(this.zpp_inner.userData={}),this.zpp_inner.userData},Se.prototype.get_gravity=function(){return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Se.prototype.set_gravity=function(e){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();var t=this.zpp_inner.wrap_gravity,i=e.zpp_inner;null!=i._validate&&i._validate();var n=e.zpp_inner.x,r=e.zpp_inner;null!=r._validate&&r._validate();var o,a=e.zpp_inner.y,s=t.zpp_inner;if(null!=s._validate&&s._validate(),t.zpp_inner.x==n){var l=t.zpp_inner;null!=l._validate&&l._validate(),o=t.zpp_inner.y==a}else o=!1;if(!o){t.zpp_inner.x=n,t.zpp_inner.y=a;var p=t.zpp_inner;null!=p._invalidate&&p._invalidate(p)}if(e.zpp_inner.weak){var h=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h}return null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity(),this.zpp_inner.wrap_gravity},Se.prototype.get_broadphase=function(){return this.zpp_inner.bphase.is_sweep?(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),Uo.Broadphase_SWEEP_AND_PRUNE):(null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),Uo.Broadphase_DYNAMIC_AABB_TREE)},Se.prototype.get_sortContacts=function(){return this.zpp_inner.sortcontacts},Se.prototype.set_sortContacts=function(e){return this.zpp_inner.sortcontacts=e,this.zpp_inner.sortcontacts},Se.prototype.get_worldAngularDrag=function(){return this.zpp_inner.global_ang_drag},Se.prototype.set_worldAngularDrag=function(e){return this.zpp_inner.global_ang_drag=e,this.zpp_inner.global_ang_drag},Se.prototype.get_worldLinearDrag=function(){return this.zpp_inner.global_lin_drag},Se.prototype.set_worldLinearDrag=function(e){return this.zpp_inner.global_lin_drag=e,this.zpp_inner.global_lin_drag},Se.prototype.get_compounds=function(){return this.zpp_inner.wrap_compounds},Se.prototype.get_bodies=function(){return this.zpp_inner.wrap_bodies},Se.prototype.get_liveBodies=function(){return this.zpp_inner.wrap_live},Se.prototype.get_constraints=function(){return this.zpp_inner.wrap_constraints},Se.prototype.get_liveConstraints=function(){return this.zpp_inner.wrap_livecon},Se.prototype.visitBodies=function(e){var t=this.zpp_inner.wrap_bodies;t.zpp_inner.valmod();for(var i=$e.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=$e.zpp_pool,($e.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var a=this.zpp_inner.wrap_compounds;a.zpp_inner.valmod();for(var s=et.get(a);;){s.zpp_inner.zpp_inner.valmod();var l=s.zpp_inner;l.zpp_inner.valmod(),l.zpp_inner.zip_length&&(l.zpp_inner.zip_length=!1,l.zpp_inner.user_length=l.zpp_inner.inner.length);var p,h=l.zpp_inner.user_length;if(s.zpp_critical=!0,s.zpp_i<h?p=!0:(s.zpp_next=et.zpp_pool,(et.zpp_pool=s).zpp_inner=null,p=!1),!p)break;s.zpp_critical=!1,s.zpp_inner.at(s.zpp_i++).visitBodies(e)}},Se.prototype.visitConstraints=function(e){var t=this.zpp_inner.wrap_constraints;t.zpp_inner.valmod();for(var i=We.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=We.zpp_pool,(We.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1,e(i.zpp_inner.at(i.zpp_i++))}var a=this.zpp_inner.wrap_compounds;a.zpp_inner.valmod();for(var s=et.get(a);;){s.zpp_inner.zpp_inner.valmod();var l=s.zpp_inner;l.zpp_inner.valmod(),l.zpp_inner.zip_length&&(l.zpp_inner.zip_length=!1,l.zpp_inner.user_length=l.zpp_inner.inner.length);var p,h=l.zpp_inner.user_length;if(s.zpp_critical=!0,s.zpp_i<h?p=!0:(s.zpp_next=et.zpp_pool,(et.zpp_pool=s).zpp_inner=null,p=!1),!p)break;s.zpp_critical=!1,s.zpp_inner.at(s.zpp_i++).visitConstraints(e)}},Se.prototype.visitCompounds=function(e){var t=this.zpp_inner.wrap_compounds;t.zpp_inner.valmod();for(var i=et.get(t);;){i.zpp_inner.zpp_inner.valmod();var n=i.zpp_inner;n.zpp_inner.valmod(),n.zpp_inner.zip_length&&(n.zpp_inner.zip_length=!1,n.zpp_inner.user_length=n.zpp_inner.inner.length);var r,o=n.zpp_inner.user_length;if(i.zpp_critical=!0,i.zpp_i<o?r=!0:(i.zpp_next=et.zpp_pool,(et.zpp_pool=i).zpp_inner=null,r=!1),!r)break;i.zpp_critical=!1;var a=i.zpp_inner.at(i.zpp_i++);e(a),a.visitCompounds(e)}},Se.prototype.get_world=function(){return this.zpp_inner.__static},Se.prototype.get_arbiters=function(){if(null==this.zpp_inner.wrap_arbiters){var e=new vt;e.space=this.zpp_inner,this.zpp_inner.wrap_arbiters=e}return this.zpp_inner.wrap_arbiters},Se.prototype.get_listeners=function(){return this.zpp_inner.wrap_listeners},Se.prototype.clear=function(){this.zpp_inner.clear()},Se.prototype.step=function(e,t,i){null==i&&(i=10),null==t&&(t=10),this.zpp_inner.step(e,t,i)},Se.prototype.get_timeStamp=function(){return this.zpp_inner.stamp},Se.prototype.get_elapsedTime=function(){return this.zpp_inner.time},Se.prototype.interactionType=function(e,t){if(1==(null!=e.zpp_inner.body?e.zpp_inner.body.outer:null).zpp_inner.type&&1==(null!=t.zpp_inner.body?t.zpp_inner.body.outer:null).zpp_inner.type)return null;if((null!=e.zpp_inner.body?e.zpp_inner.body.outer:null)==(null!=t.zpp_inner.body?t.zpp_inner.body.outer:null))return null;var i,n=e.zpp_inner,r=t.zpp_inner,o=n.body,a=r.body;i=!1;for(var s,l,p=o.constraints.head;null!=p;){var h=p.elt;if(h.ignore&&h.pair_exists(o.id,a.id)){i=!0;break}p=p.next}if(i)l=!1;else{for(var u=n;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var c,d=null==u?null:u.group;if(null==d)c=!1;else{for(var _=r;null!=_&&null==_.group;)_=null!=_.ishape?_.ishape.body:null!=_.icompound?_.icompound.compound:_.ibody.compound;var y=null==_?null:_.group;if(null==y)c=!1;else{for(var m=!1;null!=d&&null!=y;){if(d==y){m=d.ignore;break}d.depth<y.depth?y=y.group:d=d.group}c=m}}l=!c}if(l){var f;if(n.sensorEnabled||r.sensorEnabled){var x=n.filter,v=r.filter;f=0!=(x.sensorMask&v.sensorGroup)&&0!=(v.sensorMask&x.sensorGroup)}else f=!1;if(f)s=2;else{var z;if(n.fluidEnabled||r.fluidEnabled){var g=n.filter,b=r.filter;z=0!=(g.fluidMask&b.fluidGroup)&&0!=(b.fluidMask&g.fluidGroup)}else z=!1;if(!!z&&!(0==o.imass&&0==a.imass&&0==o.iinertia&&0==a.iinertia))s=0;else{var w=n.filter,S=r.filter;s=0!=(w.collisionMask&S.collisionGroup)&&0!=(S.collisionMask&w.collisionGroup)&&!(0==o.imass&&0==a.imass&&0==o.iinertia&&0==a.iinertia)?1:-1}}}else s=-1;switch(s){case 0:return null==Uo.InteractionType_FLUID&&(Uo.internal=!0,Uo.InteractionType_FLUID=new C,Uo.internal=!1),Uo.InteractionType_FLUID;case 1:return null==Uo.InteractionType_COLLISION&&(Uo.internal=!0,Uo.InteractionType_COLLISION=new C,Uo.internal=!1),Uo.InteractionType_COLLISION;case 2:return null==Uo.InteractionType_SENSOR&&(Uo.internal=!0,Uo.InteractionType_SENSOR=new C,Uo.internal=!1),Uo.InteractionType_SENSOR;default:return null}},Se.prototype.shapesUnderPoint=function(e,t,i){var n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.shapesUnderPoint(r,e.zpp_inner.y,null==t?null:t.zpp_inner,i);if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s}return a},Se.prototype.bodiesUnderPoint=function(e,t,i){var n=e.zpp_inner;null!=n._validate&&n._validate();var r=e.zpp_inner.x,o=e.zpp_inner;null!=o._validate&&o._validate();var a=this.zpp_inner.bodiesUnderPoint(r,e.zpp_inner.y,null==t?null:t.zpp_inner,i);if(e.zpp_inner.weak){var s=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=s.outer&&(s.outer.zpp_inner=null,s.outer=null),s._isimmutable=null,s._validate=null,s._invalidate=null,s.next=el.zpp_pool,el.zpp_pool=s}return a},Se.prototype.shapesInAABB=function(e,t,i,n,r){return null==i&&(i=!0),null==t&&(t=!1),this.zpp_inner.shapesInAABB(e,i,t,null==n?null:n.zpp_inner,r)},Se.prototype.bodiesInAABB=function(e,t,i,n,r){return null==i&&(i=!0),null==t&&(t=!1),this.zpp_inner.bodiesInAABB(e,i,t,null==n?null:n.zpp_inner,r)},Se.prototype.shapesInCircle=function(e,t,i,n,r){null==i&&(i=!1);var o=this.zpp_inner.shapesInCircle(e,t,i,null==n?null:n.zpp_inner,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a}return o},Se.prototype.bodiesInCircle=function(e,t,i,n,r){null==i&&(i=!1);var o=this.zpp_inner.bodiesInCircle(e,t,i,null==n?null:n.zpp_inner,r);if(e.zpp_inner.weak){var a=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a}return o},Se.prototype.shapesInShape=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.shapesInShape(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},Se.prototype.bodiesInShape=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.bodiesInShape(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},Se.prototype.shapesInBody=function(e,t,i){var n=null==i?new fe:i,r=e.zpp_inner.wrap_shapes;r.zpp_inner.valmod();for(var o=ut.get(r);;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner;a.zpp_inner.valmod(),a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);var s,l=a.zpp_inner.user_length;if(o.zpp_critical=!0,o.zpp_i<l?s=!0:(o.zpp_next=ut.zpp_pool,(ut.zpp_pool=o).zpp_inner=null,s=!1),!s)break;o.zpp_critical=!1,this.shapesInShape(o.zpp_inner.at(o.zpp_i++),!1,t,n)}return n},Se.prototype.bodiesInBody=function(e,t,i){var n=null==i?new ee:i,r=e.zpp_inner.wrap_shapes;r.zpp_inner.valmod();for(var o=ut.get(r);;){o.zpp_inner.zpp_inner.valmod();var a=o.zpp_inner;a.zpp_inner.valmod(),a.zpp_inner.zip_length&&(a.zpp_inner.zip_length=!1,a.zpp_inner.user_length=a.zpp_inner.inner.length);var s,l=a.zpp_inner.user_length;if(o.zpp_critical=!0,o.zpp_i<l?s=!0:(o.zpp_next=ut.zpp_pool,(ut.zpp_pool=o).zpp_inner=null,s=!1),!s)break;o.zpp_critical=!1,this.bodiesInShape(o.zpp_inner.at(o.zpp_i++),!1,t,n)}return n},Se.prototype.convexCast=function(e,t,i,n){return null==i&&(i=!1),this.zpp_inner.convexCast(e.zpp_inner,t,n,i)},Se.prototype.convexMultiCast=function(e,t,i,n,r){return null==i&&(i=!1),this.zpp_inner.convexMultiCast(e.zpp_inner,t,n,i,r)},Se.prototype.rayCast=function(e,t,i){return null==t&&(t=!1),this.zpp_inner.rayCast(e,t,i)},Se.prototype.rayMultiCast=function(e,t,i,n){return null==t&&(t=!1),this.zpp_inner.rayMultiCast(e,t,i,n)},Object.defineProperty(Se.prototype,"userData",{get:Se.prototype.get_userData}),Object.defineProperty(Se.prototype,"gravity",{get:Se.prototype.get_gravity,set:Se.prototype.set_gravity}),Object.defineProperty(Se.prototype,"broadphase",{get:Se.prototype.get_broadphase}),Object.defineProperty(Se.prototype,"sortContacts",{get:Se.prototype.get_sortContacts,set:Se.prototype.set_sortContacts}),Object.defineProperty(Se.prototype,"worldAngularDrag",{get:Se.prototype.get_worldAngularDrag,set:Se.prototype.set_worldAngularDrag}),Object.defineProperty(Se.prototype,"worldLinearDrag",{get:Se.prototype.get_worldLinearDrag,set:Se.prototype.set_worldLinearDrag}),Object.defineProperty(Se.prototype,"compounds",{get:Se.prototype.get_compounds}),Object.defineProperty(Se.prototype,"bodies",{get:Se.prototype.get_bodies}),Object.defineProperty(Se.prototype,"liveBodies",{get:Se.prototype.get_liveBodies}),Object.defineProperty(Se.prototype,"constraints",{get:Se.prototype.get_constraints}),Object.defineProperty(Se.prototype,"liveConstraints",{get:Se.prototype.get_liveConstraints}),Object.defineProperty(Se.prototype,"world",{get:Se.prototype.get_world}),Object.defineProperty(Se.prototype,"arbiters",{get:Se.prototype.get_arbiters}),Object.defineProperty(Se.prototype,"listeners",{get:Se.prototype.get_listeners}),Object.defineProperty(Se.prototype,"timeStamp",{get:Se.prototype.get_timeStamp}),Object.defineProperty(Se.prototype,"elapsedTime",{get:Se.prototype.get_elapsedTime}),Se.prototype.__class__=Se;var Ce=nape.util.Debug=function(){};Ce.__name__=["nape","util","Debug"],Ce.version=function(){return"Nape 2.0.19"},Ce.clearObjectPools=function(){for(;null!=We.zpp_pool;){var e=We.zpp_pool.zpp_next;We.zpp_pool.zpp_next=null,We.zpp_pool=e}for(;null!=tt.zpp_pool;){var t=tt.zpp_pool.zpp_next;tt.zpp_pool.zpp_next=null,tt.zpp_pool=t}for(;null!=$e.zpp_pool;){var i=$e.zpp_pool.zpp_next;$e.zpp_pool.zpp_next=null,$e.zpp_pool=i}for(;null!=et.zpp_pool;){var n=et.zpp_pool.zpp_next;et.zpp_pool.zpp_next=null,et.zpp_pool=n}for(;null!=He.zpp_pool;){var r=He.zpp_pool.zpp_next;He.zpp_pool.zpp_next=null,He.zpp_pool=r}for(;null!=Ve.zpp_pool;){var o=Ve.zpp_pool.zpp_next;Ve.zpp_pool.zpp_next=null,Ve.zpp_pool=o}for(;null!=Ke.zpp_pool;){var a=Ke.zpp_pool.zpp_next;Ke.zpp_pool.zpp_next=null,Ke.zpp_pool=a}for(;null!=Ze.zpp_pool;){var s=Ze.zpp_pool.zpp_next;Ze.zpp_pool.zpp_next=null,Ze.zpp_pool=s}for(;null!=Qe.zpp_pool;){var l=Qe.zpp_pool.zpp_next;Qe.zpp_pool.zpp_next=null,Qe.zpp_pool=l}for(;null!=Je.zpp_pool;){var p=Je.zpp_pool.zpp_next;Je.zpp_pool.zpp_next=null,Je.zpp_pool=p}for(;null!=ut.zpp_pool;){var h=ut.zpp_pool.zpp_next;ut.zpp_pool.zpp_next=null,ut.zpp_pool=h}for(;null!=it.zpp_pool;){var u=it.zpp_pool.zpp_next;it.zpp_pool.zpp_next=null,it.zpp_pool=u}for(;null!=qe.zpp_pool;){var c=qe.zpp_pool.zpp_next;qe.zpp_pool.zpp_next=null,qe.zpp_pool=c}for(;null!=Xe.zpp_pool;){var d=Xe.zpp_pool.zpp_next;Xe.zpp_pool.zpp_next=null,Xe.zpp_pool=d}for(;null!=Ye.zpp_pool;){var _=Ye.zpp_pool.zpp_next;Ye.zpp_pool.zpp_next=null,Ye.zpp_pool=_}for(;null!=ji.zpp_pool;){var y=ji.zpp_pool.next;ji.zpp_pool.next=null,ji.zpp_pool=y}for(;null!=Ni.zpp_pool;){var m=Ni.zpp_pool.next;Ni.zpp_pool.next=null,Ni.zpp_pool=m}for(;null!=Zt.zpp_pool;){var f=Zt.zpp_pool.next;Zt.zpp_pool.next=null,Zt.zpp_pool=f}for(;null!=Ui.zpp_pool;){var x=Ui.zpp_pool.next;Ui.zpp_pool.next=null,Ui.zpp_pool=x}for(;null!=Kt.zpp_pool;){var v=Kt.zpp_pool.next;Kt.zpp_pool.next=null,Kt.zpp_pool=v}for(;null!=Vi.zpp_pool;){var z=Vi.zpp_pool.next;Vi.zpp_pool.next=null,Vi.zpp_pool=z}for(;null!=Hi.zpp_pool;){var g=Hi.zpp_pool.next;Hi.zpp_pool.next=null,Hi.zpp_pool=g}for(;null!=Wi.zpp_pool;){var b=Wi.zpp_pool.next;Wi.zpp_pool.next=null,Wi.zpp_pool=b}for(;null!=Ko.zpp_pool;){var w=Ko.zpp_pool.next;Ko.zpp_pool.next=null,Ko.zpp_pool=w}for(;null!=Nn.zpp_pool;){var S=Nn.zpp_pool.next;Nn.zpp_pool.next=null,Nn.zpp_pool=S}for(;null!=No.zpp_pool;){var C=No.zpp_pool.next;No.zpp_pool.next=null,No.zpp_pool=C}for(;null!=Zo.zpp_pool;){var M=Zo.zpp_pool.next;Zo.zpp_pool.next=null,Zo.zpp_pool=M}for(;null!=Xi.zpp_pool;){var P=Xi.zpp_pool.next;Xi.zpp_pool.next=null,Xi.zpp_pool=P}for(;null!=Jo.zpp_pool;){var k=Jo.zpp_pool.next;Jo.zpp_pool.next=null,Jo.zpp_pool=k}for(;null!=qi.zpp_pool;){var T=qi.zpp_pool.next;qi.zpp_pool.next=null,qi.zpp_pool=T}for(;null!=nt.zpp_pool;){var O=nt.zpp_pool.next;nt.zpp_pool.next=null,nt.zpp_pool=O}for(;null!=jo.zpp_pool;){var A=jo.zpp_pool.next;jo.zpp_pool.next=null,jo.zpp_pool=A}for(;null!=Yi.zpp_pool;){var E=Yi.zpp_pool.next;Yi.zpp_pool.next=null,Yi.zpp_pool=E}for(;null!=Ki.zpp_pool;){var G=Ki.zpp_pool.next;Ki.zpp_pool.next=null,Ki.zpp_pool=G}for(;null!=dr.zpp_pool;){var I=dr.zpp_pool.next;dr.zpp_pool.next=null,dr.zpp_pool=I}for(;null!=Ct.zpp_pool;){var B=Ct.zpp_pool.next;Ct.zpp_pool.next=null,Ct.zpp_pool=B}for(;null!=Pt.zpp_pool;){var L=Pt.zpp_pool.next;Pt.zpp_pool.next=null,Pt.zpp_pool=L}for(;null!=Un.zpp_pool;){var D=Un.zpp_pool.next;Un.zpp_pool.next=null,Un.zpp_pool=D}for(;null!=Sn.zpp_pool;){var R=Sn.zpp_pool.next;Sn.zpp_pool.next=null,Sn.zpp_pool=R}for(;null!=Cn.zpp_pool;){var F=Cn.zpp_pool.next;Cn.zpp_pool.next=null,Cn.zpp_pool=F}for(;null!=Zi.zpp_pool;){var j=Zi.zpp_pool.next;Zi.zpp_pool.next=null,Zi.zpp_pool=j}for(;null!=Ji.zpp_pool;){var N=Ji.zpp_pool.next;Ji.zpp_pool.next=null,Ji.zpp_pool=N}for(;null!=el.zpp_pool;){var U=el.zpp_pool.next;el.zpp_pool.next=null,el.zpp_pool=U}for(;null!=Qi.zpp_pool;){var V=Qi.zpp_pool.next;Qi.zpp_pool.next=null,Qi.zpp_pool=V}for(;null!=Ot.zpp_pool;){var H=Ot.zpp_pool.next;Ot.zpp_pool.next=null,Ot.zpp_pool=H}for(;null!=Vn.zpp_pool;){var W=Vn.zpp_pool.next;Vn.zpp_pool.next=null,Vn.zpp_pool=W}for(;null!=Rt.zpp_pool;){var X=Rt.zpp_pool.next;Rt.zpp_pool.next=null,Rt.zpp_pool=X}for(;null!=Ft.zpp_pool;){var q=Ft.zpp_pool.next;Ft.zpp_pool.next=null,Ft.zpp_pool=q}for(;null!=At.zpp_pool;){var Y=At.zpp_pool.next;At.zpp_pool.next=null,At.zpp_pool=Y}for(;null!=$i.zpp_pool;){var K=$i.zpp_pool.next;$i.zpp_pool.next=null,$i.zpp_pool=K}for(;null!=en.zpp_pool;){var Z=en.zpp_pool.next;en.zpp_pool.next=null,en.zpp_pool=Z}for(;null!=Nt.zpp_pool;){var J=Nt.zpp_pool.next;Nt.zpp_pool.next=null,Nt.zpp_pool=J}for(;null!=Hn.zpp_pool;){var Q=Hn.zpp_pool.next;Hn.zpp_pool.next=null,Hn.zpp_pool=Q}for(;null!=tn.zpp_pool;){var $=tn.zpp_pool.next;tn.zpp_pool.next=null,tn.zpp_pool=$}for(;null!=Ao.zpp_pool;){var ee=Ao.zpp_pool.next;Ao.zpp_pool.next=null,Ao.zpp_pool=ee}for(;null!=Wn.zpp_pool;){var te=Wn.zpp_pool.next;Wn.zpp_pool.next=null,Wn.zpp_pool=te}for(;null!=Gt.zpp_pool;){var ie=Gt.zpp_pool.next;Gt.zpp_pool.next=null,Gt.zpp_pool=ie}for(;null!=It.zpp_pool;){var ne=It.zpp_pool.next;It.zpp_pool.next=null,It.zpp_pool=ne}for(;null!=Xn.zpp_pool;){var re=Xn.zpp_pool.next;Xn.zpp_pool.next=null,Xn.zpp_pool=re}for(;null!=qn.zpp_pool;){var oe=qn.zpp_pool.next;qn.zpp_pool.next=null,qn.zpp_pool=oe}for(;null!=Bt.zpp_pool;){var ae=Bt.zpp_pool.next;Bt.zpp_pool.next=null,Bt.zpp_pool=ae}for(;null!=di.zpp_pool;){var se=di.zpp_pool.next;di.zpp_pool.next=null,di.zpp_pool=se}for(;null!=Vt.zpp_pool;){var le=Vt.zpp_pool.next;Vt.zpp_pool.next=null,Vt.zpp_pool=le}for(;null!=nn.zpp_pool;){var pe=nn.zpp_pool.next;nn.zpp_pool.next=null,nn.zpp_pool=pe}for(;null!=rn.zpp_pool;){var he=rn.zpp_pool.next;rn.zpp_pool.next=null,rn.zpp_pool=he}for(;null!=Mt.zpp_pool;){var ue=Mt.zpp_pool.next;Mt.zpp_pool.next=null,Mt.zpp_pool=ue}for(;null!=_r.zpp_pool;){var ce=_r.zpp_pool.next;_r.zpp_pool.next=null,_r.zpp_pool=ce}for(;null!=on.zpp_pool;){var de=on.zpp_pool.next;on.zpp_pool.next=null,on.zpp_pool=de}for(;null!=$t.zpp_pool;){var _e=$t.zpp_pool.next;$t.zpp_pool.next=null,$t.zpp_pool=_e}for(;null!=rr.zpp_pool;){var ye=rr.zpp_pool.next;rr.zpp_pool.next=null,rr.zpp_pool=ye}for(;null!=an.zpp_pool;){var me=an.zpp_pool.next;an.zpp_pool.next=null,an.zpp_pool=me}for(;null!=li.zpp_pool;){var fe=li.zpp_pool.next;li.zpp_pool.next=null,li.zpp_pool=fe}for(;null!=Eo.zpp_pool;){var xe=Eo.zpp_pool.next;Eo.zpp_pool.next=null,Eo.zpp_pool=xe}for(;null!=nr.zpp_pool;){var ve=nr.zpp_pool.next;nr.zpp_pool.next=null,nr.zpp_pool=ve}for(;null!=sn.zpp_pool;){var ze=sn.zpp_pool.next;sn.zpp_pool.next=null,sn.zpp_pool=ze}for(;null!=Xo.zpp_pool;){var ge=Xo.zpp_pool.next;Xo.zpp_pool.next=null,Xo.zpp_pool=ge}for(;null!=ln.zpp_pool;){var be=ln.zpp_pool.next;ln.zpp_pool.next=null,ln.zpp_pool=be}for(;null!=ni.zpp_pool;){var we=ni.zpp_pool.next;ni.zpp_pool.next=null,ni.zpp_pool=we}for(;null!=oi.zpp_pool;){var Se=oi.zpp_pool.next;oi.zpp_pool.next=null,oi.zpp_pool=Se}for(;null!=Yo.zpp_pool;){var Ce=Yo.zpp_pool.next;Yo.zpp_pool.next=null,Yo.zpp_pool=Ce}for(;null!=Vo.zpp_pool;){var Me=Vo.zpp_pool.next;Vo.zpp_pool.next=null,Vo.zpp_pool=Me}for(;null!=Ho.zpp_pool;){var Pe=Ho.zpp_pool.next;Ho.zpp_pool.next=null,Ho.zpp_pool=Pe}for(;null!=Yn.zpp_pool;){var ke=Yn.zpp_pool.next;Yn.zpp_pool.next=null,Yn.zpp_pool=ke}for(;null!=Qo.zpp_pool;){var Te=Qo.zpp_pool.next;Qo.zpp_pool.next=null,Qo.zpp_pool=Te}for(;null!=Wo.zpp_pool;){var Oe=Wo.zpp_pool.next;Wo.zpp_pool.next=null,Wo.zpp_pool=Oe}for(;null!=$o.zpp_pool;){var Ae=$o.zpp_pool.next;$o.zpp_pool.next=null,$o.zpp_pool=Ae}for(;null!=hn.zpp_pool;){var Ee=hn.zpp_pool.next;hn.zpp_pool.next=null,hn.zpp_pool=Ee}for(;null!=ea.zpp_pool;){var Ge=ea.zpp_pool.next;ea.zpp_pool.next=null,ea.zpp_pool=Ge}for(;null!=un.zpp_pool;){var Ie=un.zpp_pool.next;un.zpp_pool.next=null,un.zpp_pool=Ie}for(;null!=cn.zpp_pool;){var Be=cn.zpp_pool.next;cn.zpp_pool.next=null,cn.zpp_pool=Be}for(;null!=ft.zpp_pool;){var Le=ft.zpp_pool.next;ft.zpp_pool.next=null,ft.zpp_pool=Le}for(;null!=dn.zpp_pool;){var De=dn.zpp_pool.next;dn.zpp_pool.next=null,dn.zpp_pool=De}for(;null!=_n.zpp_pool;){var Re=_n.zpp_pool.next;_n.zpp_pool.next=null,_n.zpp_pool=Re}for(;null!=yn.zpp_pool;){var Fe=yn.zpp_pool.next;yn.zpp_pool.next=null,yn.zpp_pool=Fe}for(;null!=jn.poolGeomPoly;){var je=jn.poolGeomPoly.zpp_pool;jn.poolGeomPoly.zpp_pool=null,jn.poolGeomPoly=je}for(;null!=jn.poolVec2;){var Ne=jn.poolVec2.zpp_pool;jn.poolVec2.zpp_pool=null,jn.poolVec2=Ne}for(;null!=jn.poolVec3;){var Ue=jn.poolVec3.zpp_pool;jn.poolVec3.zpp_pool=null,jn.poolVec3=Ue}},Ce.prototype.__class__=Ce;var Me=sandbox.Main=function(){};Me.__name__=["sandbox","Main"],Me.main=function(){},Me.prototype.__class__=Me;var Pe=zpp_nape.ZPP_Const=function(){};Pe.__name__=["zpp_nape","ZPP_Const"],Pe.POSINF=function(){return 1/0},Pe.NEGINF=function(){return-1/0},Pe.prototype.__class__=Pe;var ke=zpp_nape.ZPP_ID=function(){};ke.__name__=["zpp_nape","ZPP_ID"],ke.Constraint=function(){return ke._Constraint++},ke.Interactor=function(){return ke._Interactor++},ke.CbType=function(){return ke._CbType++},ke.CbSet=function(){return ke._CbSet++},ke.Listener=function(){return ke._Listener++},ke.ZPP_SimpleVert=function(){return ke._ZPP_SimpleVert++},ke.ZPP_SimpleSeg=function(){return ke._ZPP_SimpleSeg++},ke.Space=function(){return ke._Space++},ke.InteractionGroup=function(){return ke._InteractionGroup++},ke.prototype.__class__=ke;var nt=zpp_nape.callbacks.ZPP_Callback=function(){this.constraint=null,this.body=null,this.pre_swapped=!1,this.pre_arbiter=null,this.wrap_arbiters=null,this.set=null,this.int2=null,this.int1=null,this.length=0,this.prev=null,this.next=null,this.index=0,this.space=null,this.listener=null,this.event=0,this.outer_int=null,this.outer_con=null,this.outer_body=null,this.length=0};nt.__name__=["zpp_nape","callbacks","ZPP_Callback"],nt.prototype.outer_body=null,nt.prototype.outer_con=null,nt.prototype.outer_int=null,nt.prototype.wrapper_body=function(){return null==this.outer_body&&(this.outer_body=new i,this.outer_body.zpp_inner=this),this.outer_body},nt.prototype.wrapper_con=function(){return null==this.outer_con&&(this.outer_con=new a,this.outer_con.zpp_inner=this),this.outer_con},nt.prototype.wrapper_int=function(){return null==this.outer_int&&(this.outer_int=new l,this.outer_int.zpp_inner=this),null==this.wrap_arbiters?this.wrap_arbiters=Dn.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null,this.outer_int},nt.prototype.event=null,nt.prototype.listener=null,nt.prototype.space=null,nt.prototype.index=null,nt.prototype.next=null,nt.prototype.prev=null,nt.prototype.length=null,nt.prototype.push=function(e){null!=this.prev?this.prev.next=e:this.next=e,e.prev=this.prev,e.next=null,this.prev=e,this.length++},nt.prototype.push_rev=function(e){null!=this.next?this.next.prev=e:this.prev=e,e.next=this.next,e.prev=null,this.next=e,this.length++},nt.prototype.pop=function(){var e=this.next;return this.next=e.next,null==this.next?this.prev=null:this.next.prev=null,this.length--,e},nt.prototype.pop_rev=function(){var e=this.prev;return this.prev=e.prev,null==this.prev?this.next=null:this.prev.next=null,this.length--,e},nt.prototype.empty=function(){return null==this.next},nt.prototype.clear=function(){for(;!this.empty();)this.pop()},nt.prototype.splice=function(e){var t=e.next;return null==e.prev?(this.next=e.next,null!=this.next?this.next.prev=null:this.prev=null):(e.prev.next=e.next,null!=e.next?e.next.prev=e.prev:this.prev=e.prev),this.length--,t},nt.prototype.rotateL=function(){this.push(this.pop())},nt.prototype.rotateR=function(){this.push_rev(this.pop_rev())},nt.prototype.cycleNext=function(e){return null==e.next?this.next:e.next},nt.prototype.cyclePrev=function(e){return null==e.prev?this.prev:e.prev},nt.prototype.at=function(e){for(var t=this.next;0!=e--;)t=t.next;return t},nt.prototype.rev_at=function(e){for(var t=this.prev;0!=e--;)t=t.prev;return t},nt.prototype.free=function(){this.int1=this.int2=null,this.body=null,this.constraint=null,(this.listener=null)!=this.wrap_arbiters&&(this.wrap_arbiters.zpp_inner.inner=null),this.set=null},nt.prototype.alloc=function(){},nt.prototype.int1=null,nt.prototype.int2=null,nt.prototype.set=null,nt.prototype.wrap_arbiters=null,nt.prototype.pre_arbiter=null,nt.prototype.pre_swapped=null,nt.prototype.genarbs=function(){null==this.wrap_arbiters?this.wrap_arbiters=Dn.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters,this.wrap_arbiters.zpp_inner.zip_length=!0,this.wrap_arbiters.zpp_inner.at_ite=null},nt.prototype.body=null,nt.prototype.constraint=null,nt.prototype.__class__=nt;var jo=zpp_nape.callbacks.ZPP_CbSet=function(){this.wrap_constraints=null,this.constraints=null,this.wrap_interactors=null,this.interactors=null,this.zip_conlisteners=!1,this.conlisteners=null,this.zip_bodylisteners=!1,this.bodylisteners=null,this.zip_listeners=!1,this.listeners=null,this.cbpairs=null,this.manager=null,this.id=0,this.next=null,this.count=0,this.cbTypes=null,this.cbTypes=new Fe,this.listeners=new Te,this.zip_listeners=!0,this.bodylisteners=new Oe,this.zip_bodylisteners=!0,this.conlisteners=new Ae,this.zip_conlisteners=!0,this.constraints=new Ee,this.interactors=new Ge,this.id=ke.CbSet(),this.cbpairs=new zi};jo.__name__=["zpp_nape","callbacks","ZPP_CbSet"],jo.setlt=function(e,t){for(var i=e.cbTypes.head,n=t.cbTypes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r.id<o.id)return!0;if(o.id<r.id)return!1;i=i.next,n=n.next}return null!=n&&null==i},jo.get=function(e){var t;null==jo.zpp_pool?t=new jo:(t=jo.zpp_pool,jo.zpp_pool=t.next,t.next=null);for(var i=null,n=e.head;null!=n;){var r=n.elt;i=t.cbTypes.insert(i,r),r.cbsets.add(t),n=n.next}return t},jo.compatible=function(e,t,i){var n,r=e.options1,o=t.cbTypes;if(r.nonemptyintersection(o,r.includes)&&!r.nonemptyintersection(o,r.excludes)){var a=e.options2,s=i.cbTypes;n=!!a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)}else n=!1;if(n)return!0;var l=e.options2,p=t.cbTypes;if(l.nonemptyintersection(p,l.includes)&&!l.nonemptyintersection(p,l.excludes)){var h=e.options1,u=i.cbTypes;return!!h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)}return!1},jo.empty_intersection=function(e,t){for(var i,n=null,r=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=r;){var o=r.elt;if(o.a==e&&o.b==t||o.a==t&&o.b==e){n=o;break}r=r.next}null==n&&(null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),n=i,e.cbpairs.add(n),t!=e&&t.cbpairs.add(n));return n.zip_listeners&&(n.zip_listeners=!1,n.__validate()),null==n.listeners.head},jo.single_intersection=function(e,t,i){for(var n,r=null,o=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=o;){var a=o.elt;if(a.a==e&&a.b==t||a.a==t&&a.b==e){r=a;break}o=o.next}null==r&&(null==No.zpp_pool?n=new No:(n=No.zpp_pool,No.zpp_pool=n.next,n.next=null),n.zip_listeners=!0,jo.setlt(e,t)?(n.a=e,n.b=t):(n.a=t,n.b=e),r=n,e.cbpairs.add(r),t!=e&&t.cbpairs.add(r));r.zip_listeners&&(r.zip_listeners=!1,r.__validate());var s=r.listeners.head;return null!=s&&s.elt==i&&null==s.next},jo.find_all=function(e,t,i,n){for(var r,o=null,a=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=a;){var s=a.elt;if(s.a==e&&s.b==t||s.a==t&&s.b==e){o=s;break}a=a.next}null==o&&(null==No.zpp_pool?r=new No:(r=No.zpp_pool,No.zpp_pool=r.next,r.next=null),r.zip_listeners=!0,jo.setlt(e,t)?(r.a=e,r.b=t):(r.a=t,r.b=e),o=r,e.cbpairs.add(o),t!=e&&t.cbpairs.add(o));o.zip_listeners&&(o.zip_listeners=!1,o.__validate());for(var l=o.listeners.head;null!=l;){var p=l.elt;p.event==i&&n(p),l=l.next}},jo.prototype.cbTypes=null,jo.prototype.count=null,jo.prototype.next=null,jo.prototype.id=null,jo.prototype.manager=null,jo.prototype.cbpairs=null,jo.prototype.increment=function(){this.count++},jo.prototype.decrement=function(){return 0==--this.count},jo.prototype.invalidate_pairs=function(){for(var e=this.cbpairs.head;null!=e;)e.elt.zip_listeners=!0,e=e.next},jo.prototype.listeners=null,jo.prototype.zip_listeners=null,jo.prototype.invalidate_listeners=function(){this.zip_listeners=!0,this.invalidate_pairs()},jo.prototype.validate_listeners=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners())},jo.prototype.realvalidate_listeners=function(){this.listeners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.listeners.head,n=e.elt.listeners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){if(r.space==this.manager.space){var s,l=this.listeners;null==Zo.zpp_pool?s=new Zo:(s=Zo.zpp_pool,Zo.zpp_pool=s.next,s.next=null),s.elt=r;var p=s;null==t?(p.next=l.head,l.head=p):(p.next=t.next,t.next=p),l.pushmod=l.modified=!0,l.length++,t=p}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.bodylisteners=null,jo.prototype.zip_bodylisteners=null,jo.prototype.invalidate_bodylisteners=function(){this.zip_bodylisteners=!0},jo.prototype.validate_bodylisteners=function(){this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners())},jo.prototype.realvalidate_bodylisteners=function(){this.bodylisteners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.bodylisteners.head,n=e.elt.bodylisteners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){var s=r.options;if(!s.nonemptyintersection(this.cbTypes,s.excludes)&&r.space==this.manager.space){var l,p=this.bodylisteners;null==qi.zpp_pool?l=new qi:(l=qi.zpp_pool,qi.zpp_pool=l.next,l.next=null),l.elt=r;var h=l;null==t?(h.next=p.head,p.head=h):(h.next=t.next,t.next=h),p.pushmod=p.modified=!0,p.length++,t=h}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.conlisteners=null,jo.prototype.zip_conlisteners=null,jo.prototype.invalidate_conlisteners=function(){this.zip_conlisteners=!0},jo.prototype.validate_conlisteners=function(){this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},jo.prototype.realvalidate_conlisteners=function(){this.conlisteners.clear();for(var e=this.cbTypes.head;null!=e;){for(var t=null,i=this.conlisteners.head,n=e.elt.conlisteners.head;null!=n;){var r=n.elt;if(null!=i&&i.elt==r)n=n.next,i=(t=i).next;else{var o;if(null!=i){var a=i.elt;o=!(r.precedence<=a.precedence)||r.precedence==a.precedence&&r.id>a.id}else o=!0;if(o){var s=r.options;if(!s.nonemptyintersection(this.cbTypes,s.excludes)&&r.space==this.manager.space){var l,p=this.conlisteners;null==Ki.zpp_pool?l=new Ki:(l=Ki.zpp_pool,Ki.zpp_pool=l.next,l.next=null),l.elt=r;var h=l;null==t?(h.next=p.head,p.head=h):(h.next=t.next,t.next=h),p.pushmod=p.modified=!0,p.length++,t=h}n=n.next}else i=(t=i).next}}e=e.next}},jo.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners()),this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners()),this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},jo.prototype.interactors=null,jo.prototype.wrap_interactors=null,jo.prototype.constraints=null,jo.prototype.wrap_constraints=null,jo.prototype.addConstraint=function(e){this.constraints.add(e)},jo.prototype.addInteractor=function(e){this.interactors.add(e)},jo.prototype.remConstraint=function(e){this.constraints.remove(e)},jo.prototype.remInteractor=function(e){this.interactors.remove(e)},jo.prototype.free=function(){for(this.listeners.clear(),this.zip_listeners=!0,this.bodylisteners.clear(),this.zip_bodylisteners=!0,this.conlisteners.clear(),this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},jo.prototype.alloc=function(){},jo.prototype.__class__=jo;var No=zpp_nape.callbacks.ZPP_CbSetPair=function(){this.listeners=null,this.zip_listeners=!1,this.next=null,this.b=null,this.a=null,this.listeners=new Te};No.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"],No.get=function(e,t){var i;return null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),i},No.setlt=function(e,t){return!!jo.setlt(e.a,t.a)||e.a==t.a&&jo.setlt(e.b,t.b)},No.prototype.a=null,No.prototype.b=null,No.prototype.next=null,No.prototype.free=function(){this.a=this.b=null,this.listeners.clear()},No.prototype.alloc=function(){this.zip_listeners=!0},No.prototype.compatible=function(e){var t,i=e.options1,n=this.a.cbTypes;if(i.nonemptyintersection(n,i.includes)&&!i.nonemptyintersection(n,i.excludes)){var r=e.options2,o=this.b.cbTypes;t=!!r.nonemptyintersection(o,r.includes)&&!r.nonemptyintersection(o,r.excludes)}else t=!1;if(t)return!0;var a=e.options2,s=this.a.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var l=e.options1,p=this.b.cbTypes;return!!l.nonemptyintersection(p,l.includes)&&!l.nonemptyintersection(p,l.excludes)}return!1},No.prototype.zip_listeners=null,No.prototype.listeners=null,No.prototype.invalidate=function(){this.zip_listeners=!0},No.prototype.validate=function(){this.zip_listeners&&(this.zip_listeners=!1,this.__validate())},No.prototype.__validate=function(){this.listeners.clear();for(var e=this.a.listeners.head,t=this.b.listeners.head;null!=e&&null!=t;){var i=e.elt,n=t.elt;if(i==n){var r,o,a=i.options1,s=this.a.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var l=i.options2,p=this.b.cbTypes;o=!!l.nonemptyintersection(p,l.includes)&&!l.nonemptyintersection(p,l.excludes)}else o=!1;if(o)r=!0;else{var h=i.options2,u=this.a.cbTypes;if(h.nonemptyintersection(u,h.includes)&&!h.nonemptyintersection(u,h.excludes)){var c=i.options1,d=this.b.cbTypes;r=!!c.nonemptyintersection(d,c.includes)&&!c.nonemptyintersection(d,c.excludes)}else r=!1}r&&this.listeners.add(i),e=e.next,t=t.next}else i.precedence>n.precedence||i.precedence==n.precedence&&i.id>n.id?e=e.next:t=t.next}},No.prototype.empty_intersection=function(){return null==this.listeners.head},No.prototype.single_intersection=function(e){var t=this.listeners.head;return null!=t&&t.elt==e&&null==t.next},No.prototype.forall=function(e,t){for(var i=this.listeners.head;null!=i;){var n=i.elt;n.event==e&&t(n),i=i.next}},No.prototype.__class__=No;var Te=zpp_nape.util.ZNPList_ZPP_InteractionListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Te.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"],Te.prototype.head=null,Te.prototype.begin=function(){return this.head},Te.prototype.modified=null,Te.prototype.pushmod=null,Te.prototype.length=null,Te.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Te.prototype.add=function(e){var t;null==Zo.zpp_pool?t=new Zo:(t=Zo.zpp_pool,Zo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Te.prototype.inlined_add=function(e){var t;null==Zo.zpp_pool?t=new Zo:(t=Zo.zpp_pool,Zo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Te.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Te.prototype.insert=function(e,t){var i;null==Zo.zpp_pool?i=new Zo:(i=Zo.zpp_pool,Zo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Te.prototype.inlined_insert=function(e,t){var i;null==Zo.zpp_pool?i=new Zo:(i=Zo.zpp_pool,Zo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Te.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Te.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Te.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Te.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Te.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Te.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Te.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zo.zpp_pool,Zo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Te.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Zo.zpp_pool,Zo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Te.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zo.zpp_pool,Zo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Te.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zo.zpp_pool,Zo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Te.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Te.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Te.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zo.zpp_pool,Zo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Te.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Te.prototype.empty=function(){return null==this.head},Te.prototype.size=function(){return this.length},Te.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Te.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Te.prototype.front=function(){return this.head.elt},Te.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Te.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Te.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Te.prototype.__class__=Te;var Oe=zpp_nape.util.ZNPList_ZPP_BodyListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Oe.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"],Oe.prototype.head=null,Oe.prototype.begin=function(){return this.head},Oe.prototype.modified=null,Oe.prototype.pushmod=null,Oe.prototype.length=null,Oe.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Oe.prototype.add=function(e){var t;null==qi.zpp_pool?t=new qi:(t=qi.zpp_pool,qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oe.prototype.inlined_add=function(e){var t;null==qi.zpp_pool?t=new qi:(t=qi.zpp_pool,qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oe.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Oe.prototype.insert=function(e,t){var i;null==qi.zpp_pool?i=new qi:(i=qi.zpp_pool,qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oe.prototype.inlined_insert=function(e,t){var i;null==qi.zpp_pool?i=new qi:(i=qi.zpp_pool,qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oe.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oe.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oe.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oe.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oe.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=qi.zpp_pool,qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oe.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Oe.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=qi.zpp_pool,qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oe.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=qi.zpp_pool,qi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Oe.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=qi.zpp_pool,qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oe.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=qi.zpp_pool,qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oe.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Oe.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oe.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=qi.zpp_pool,qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oe.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Oe.prototype.empty=function(){return null==this.head},Oe.prototype.size=function(){return this.length},Oe.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oe.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oe.prototype.front=function(){return this.head.elt},Oe.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Oe.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Oe.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Oe.prototype.__class__=Oe;var Ae=zpp_nape.util.ZNPList_ZPP_ConstraintListener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ae.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"],Ae.prototype.head=null,Ae.prototype.begin=function(){return this.head},Ae.prototype.modified=null,Ae.prototype.pushmod=null,Ae.prototype.length=null,Ae.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ae.prototype.add=function(e){var t;null==Ki.zpp_pool?t=new Ki:(t=Ki.zpp_pool,Ki.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ae.prototype.inlined_add=function(e){var t;null==Ki.zpp_pool?t=new Ki:(t=Ki.zpp_pool,Ki.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ae.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ae.prototype.insert=function(e,t){var i;null==Ki.zpp_pool?i=new Ki:(i=Ki.zpp_pool,Ki.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ae.prototype.inlined_insert=function(e,t){var i;null==Ki.zpp_pool?i=new Ki:(i=Ki.zpp_pool,Ki.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ae.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ae.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ae.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ae.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ae.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ki.zpp_pool,Ki.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ae.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ae.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ki.zpp_pool,Ki.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ae.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ki.zpp_pool,Ki.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ae.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ki.zpp_pool,Ki.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ae.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ki.zpp_pool,Ki.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ae.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ae.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ae.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ki.zpp_pool,Ki.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ae.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ae.prototype.empty=function(){return null==this.head},Ae.prototype.size=function(){return this.length},Ae.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ae.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ae.prototype.front=function(){return this.head.elt},Ae.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ae.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ae.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ae.prototype.__class__=Ae;var Ee=zpp_nape.util.ZNPList_ZPP_Constraint=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ee.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"],Ee.prototype.head=null,Ee.prototype.begin=function(){return this.head},Ee.prototype.modified=null,Ee.prototype.pushmod=null,Ee.prototype.length=null,Ee.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ee.prototype.add=function(e){var t;null==Hi.zpp_pool?t=new Hi:(t=Hi.zpp_pool,Hi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ee.prototype.inlined_add=function(e){var t;null==Hi.zpp_pool?t=new Hi:(t=Hi.zpp_pool,Hi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ee.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ee.prototype.insert=function(e,t){var i;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ee.prototype.inlined_insert=function(e,t){var i;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ee.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ee.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ee.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ee.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ee.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Hi.zpp_pool,Hi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ee.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ee.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Hi.zpp_pool,Hi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ee.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Hi.zpp_pool,Hi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ee.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Hi.zpp_pool,Hi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ee.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Hi.zpp_pool,Hi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ee.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ee.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ee.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Hi.zpp_pool,Hi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ee.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ee.prototype.empty=function(){return null==this.head},Ee.prototype.size=function(){return this.length},Ee.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ee.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ee.prototype.front=function(){return this.head.elt},Ee.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ee.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ee.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ee.prototype.__class__=Ee;var Ge=zpp_nape.util.ZNPList_ZPP_Interactor=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ge.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"],Ge.prototype.head=null,Ge.prototype.begin=function(){return this.head},Ge.prototype.modified=null,Ge.prototype.pushmod=null,Ge.prototype.length=null,Ge.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ge.prototype.add=function(e){var t;null==Jo.zpp_pool?t=new Jo:(t=Jo.zpp_pool,Jo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ge.prototype.inlined_add=function(e){var t;null==Jo.zpp_pool?t=new Jo:(t=Jo.zpp_pool,Jo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ge.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ge.prototype.insert=function(e,t){var i;null==Jo.zpp_pool?i=new Jo:(i=Jo.zpp_pool,Jo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ge.prototype.inlined_insert=function(e,t){var i;null==Jo.zpp_pool?i=new Jo:(i=Jo.zpp_pool,Jo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ge.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ge.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ge.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ge.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ge.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ge.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ge.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ge.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Jo.zpp_pool,Jo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ge.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ge.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ge.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ge.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ge.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Jo.zpp_pool,Jo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ge.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ge.prototype.empty=function(){return null==this.head},Ge.prototype.size=function(){return this.length},Ge.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ge.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ge.prototype.front=function(){return this.head.elt},Ge.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ge.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ge.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ge.prototype.__class__=Ge;var Ie=zpp_nape.util.ZNPList_ZPP_CbSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ie.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"],Ie.prototype.head=null,Ie.prototype.begin=function(){return this.head},Ie.prototype.modified=null,Ie.prototype.pushmod=null,Ie.prototype.length=null,Ie.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ie.prototype.add=function(e){var t;null==Xi.zpp_pool?t=new Xi:(t=Xi.zpp_pool,Xi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ie.prototype.inlined_add=function(e){var t;null==Xi.zpp_pool?t=new Xi:(t=Xi.zpp_pool,Xi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ie.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ie.prototype.insert=function(e,t){var i;null==Xi.zpp_pool?i=new Xi:(i=Xi.zpp_pool,Xi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ie.prototype.inlined_insert=function(e,t){var i;null==Xi.zpp_pool?i=new Xi:(i=Xi.zpp_pool,Xi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ie.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ie.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ie.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ie.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ie.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Xi.zpp_pool,Xi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ie.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ie.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Xi.zpp_pool,Xi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ie.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Xi.zpp_pool,Xi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ie.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Xi.zpp_pool,Xi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ie.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Xi.zpp_pool,Xi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ie.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ie.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ie.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Xi.zpp_pool,Xi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ie.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ie.prototype.empty=function(){return null==this.head},Ie.prototype.size=function(){return this.length},Ie.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ie.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ie.prototype.front=function(){return this.head.elt},Ie.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ie.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ie.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ie.prototype.__class__=Ie;var Be=zpp_nape.callbacks.ZPP_CbType=function(){this.conlisteners=null,this.bodylisteners=null,this.listeners=null,this.cbsets=null,this.id=0,this.userData=null,this.outer=null,this.id=ke.CbType(),this.listeners=new Te,this.bodylisteners=new Oe,this.conlisteners=new Ae,this.constraints=new Ee,this.interactors=new Ge,this.cbsets=new Ie};Be.__name__=["zpp_nape","callbacks","ZPP_CbType"],Be.setlt=function(e,t){return e.id<t.id},Be.prototype.outer=null,Be.prototype.userData=null,Be.prototype.id=null,Be.prototype.cbsets=null,Be.prototype.interactors=null,Be.prototype.wrap_interactors=null,Be.prototype.constraints=null,Be.prototype.wrap_constraints=null,Be.prototype.addConstraint=function(e){this.constraints.add(e)},Be.prototype.addInteractor=function(e){this.interactors.add(e)},Be.prototype.remConstraint=function(e){this.constraints.remove(e)},Be.prototype.remInteractor=function(e){this.interactors.remove(e)},Be.prototype.listeners=null,Be.prototype.addint=function(e){for(var t=null,i=this.listeners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.listeners;null==Zo.zpp_pool?r=new Zo:(r=Zo.zpp_pool,Zo.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;){var l=s.elt;l.zip_listeners=!0,l.invalidate_pairs(),s=s.next}},Be.prototype.removeint=function(e){this.listeners.remove(e);for(var t=this.cbsets.head;null!=t;){var i=t.elt;i.zip_listeners=!0,i.invalidate_pairs(),t=t.next}},Be.prototype.invalidateint=function(){for(var e=this.cbsets.head;null!=e;){var t=e.elt;t.zip_listeners=!0,t.invalidate_pairs(),e=e.next}},Be.prototype.bodylisteners=null,Be.prototype.addbody=function(e){for(var t=null,i=this.bodylisteners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.bodylisteners;null==qi.zpp_pool?r=new qi:(r=qi.zpp_pool,qi.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;)s.elt.zip_bodylisteners=!0,s=s.next},Be.prototype.removebody=function(e){this.bodylisteners.remove(e);for(var t=this.cbsets.head;null!=t;)t.elt.zip_bodylisteners=!0,t=t.next},Be.prototype.invalidatebody=function(){for(var e=this.cbsets.head;null!=e;)e.elt.zip_bodylisteners=!0,e=e.next},Be.prototype.conlisteners=null,Be.prototype.addconstraint=function(e){for(var t=null,i=this.conlisteners.head;null!=i;){var n=i.elt;if(e.precedence>n.precedence||e.precedence==n.precedence&&e.id>n.id)break;i=(t=i).next}var r,o=this.conlisteners;null==Ki.zpp_pool?r=new Ki:(r=Ki.zpp_pool,Ki.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==t?(a.next=o.head,o.head=a):(a.next=t.next,t.next=a),o.pushmod=o.modified=!0,o.length++;for(var s=this.cbsets.head;null!=s;)s.elt.zip_conlisteners=!0,s=s.next},Be.prototype.removeconstraint=function(e){this.conlisteners.remove(e);for(var t=this.cbsets.head;null!=t;)t.elt.zip_conlisteners=!0,t=t.next},Be.prototype.invalidateconstraint=function(){for(var e=this.cbsets.head;null!=e;)e.elt.zip_conlisteners=!0,e=e.next},Be.prototype.__class__=Be;var Uo=zpp_nape.util.ZPP_Flags=function(){};Uo.__name__=["zpp_nape","util","ZPP_Flags"],Uo.GravMassMode_DEFAULT=null,Uo.GravMassMode_FIXED=null,Uo.GravMassMode_SCALED=null,Uo.InertiaMode_DEFAULT=null,Uo.InertiaMode_FIXED=null,Uo.MassMode_DEFAULT=null,Uo.MassMode_FIXED=null,Uo.BodyType_STATIC=null,Uo.BodyType_DYNAMIC=null,Uo.BodyType_KINEMATIC=null,Uo.ListenerType_BODY=null,Uo.PreFlag_ACCEPT=null,Uo.ListenerType_CONSTRAINT=null,Uo.PreFlag_IGNORE=null,Uo.ListenerType_INTERACTION=null,Uo.PreFlag_ACCEPT_ONCE=null,Uo.ListenerType_PRE=null,Uo.PreFlag_IGNORE_ONCE=null,Uo.CbEvent_BEGIN=null,Uo.InteractionType_COLLISION=null,Uo.CbEvent_ONGOING=null,Uo.InteractionType_SENSOR=null,Uo.CbEvent_END=null,Uo.InteractionType_FLUID=null,Uo.CbEvent_WAKE=null,Uo.InteractionType_ANY=null,Uo.CbEvent_SLEEP=null,Uo.CbEvent_BREAK=null,Uo.CbEvent_PRE=null,Uo.Winding_UNDEFINED=null,Uo.Winding_CLOCKWISE=null,Uo.Winding_ANTICLOCKWISE=null,Uo.ValidationResult_VALID=null,Uo.ValidationResult_DEGENERATE=null,Uo.ValidationResult_CONCAVE=null,Uo.ValidationResult_SELF_INTERSECTING=null,Uo.ShapeType_CIRCLE=null,Uo.ShapeType_POLYGON=null,Uo.Broadphase_DYNAMIC_AABB_TREE=null,Uo.Broadphase_SWEEP_AND_PRUNE=null,Uo.ArbiterType_COLLISION=null,Uo.ArbiterType_SENSOR=null,Uo.ArbiterType_FLUID=null,Uo.prototype.__class__=Uo;var Le=zpp_nape.callbacks.ZPP_Listener=function(){this.space=null,this.interaction=null,this.constraint=null,this.body=null,this.precedence=0,this.event=0,this.type=0,this.id=0,this.outer=null,this.id=ke.Listener()};Le.__name__=["zpp_nape","callbacks","ZPP_Listener"],Le.setlt=function(e,t){return!(e.precedence<=t.precedence)||e.precedence==t.precedence&&e.id>t.id},Le.prototype.outer=null,Le.prototype.id=null,Le.prototype.type=null,Le.prototype.event=null,Le.prototype.precedence=null,Le.prototype.body=null,Le.prototype.constraint=null,Le.prototype.interaction=null,Le.prototype.space=null,Le.prototype.swapEvent=function(e){},Le.prototype.invalidate_precedence=function(){},Le.prototype.addedToSpace=function(){},Le.prototype.removedFromSpace=function(){},Le.prototype.__class__=Le;var De=zpp_nape.callbacks.ZPP_BodyListener=function(e,t,i){this.handler=null,this.options=null,this.outer_zn=null,Le.call(this),this.event=t,this.handler=i,(this.body=this).type=0,this.options=e.zpp_inner};De.__name__=["zpp_nape","callbacks","ZPP_BodyListener"],De.__super__=Le,De.prototype=Object.create(Le.prototype),De.prototype.outer_zn=null,De.prototype.options=null,De.prototype.handler=null,De.prototype.addedToSpace=function(){this.options.handler=$(this,this.cbtype_change);for(var e=this.options.includes.head;null!=e;){for(var t=e.elt,i=null,n=t.bodylisteners.head;null!=n;){var r=n.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;n=(i=n).next}var o,a=t.bodylisteners;null==qi.zpp_pool?o=new qi:(o=qi.zpp_pool,qi.zpp_pool=o.next,o.next=null),o.elt=this;var s=o;null==i?(s.next=a.head,a.head=s):(s.next=i.next,i.next=s),a.pushmod=a.modified=!0,a.length++;for(var l=t.cbsets.head;null!=l;)l.elt.zip_bodylisteners=!0,l=l.next;e=e.next}},De.prototype.removedFromSpace=function(){for(var e=this.options.includes.head;null!=e;){var t=e.elt;t.bodylisteners.remove(this);for(var i=t.cbsets.head;null!=i;)i.elt.zip_bodylisteners=!0,i=i.next;e=e.next}this.options.handler=null},De.prototype.cbtype_change=function(e,t,i){this.removedFromSpace();var n=this.options;if(t)if(i){for(var r=null,o=n.includes.head;null!=o&&!(e.id<o.elt.id);)o=(r=o).next;var a,s=n.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=e;var l=a;null==r?(l.next=s.head,s.head=l):(l.next=r.next,r.next=l),s.pushmod=s.modified=!0,s.length++}else n.includes.remove(e);else if(i){for(var p=null,h=n.excludes.head;null!=h&&!(e.id<h.elt.id);)h=(p=h).next;var u,c=n.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=e;var d=u;null==p?(d.next=c.head,c.head=d):(d.next=p.next,p.next=d),c.pushmod=c.modified=!0,c.length++}else n.excludes.remove(e);this.addedToSpace()},De.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},De.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},De.prototype.__class__=De;var Re=zpp_nape.callbacks.ZPP_ConstraintListener=function(e,t,i){this.handler=null,this.options=null,this.outer_zn=null,Le.call(this),this.event=t,this.handler=i,(this.constraint=this).type=1,this.options=e.zpp_inner};Re.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"],Re.__super__=Le,Re.prototype=Object.create(Le.prototype),Re.prototype.outer_zn=null,Re.prototype.options=null,Re.prototype.handler=null,Re.prototype.addedToSpace=function(){this.options.handler=$(this,this.cbtype_change);for(var e=this.options.includes.head;null!=e;){for(var t=e.elt,i=null,n=t.conlisteners.head;null!=n;){var r=n.elt;if(this.precedence>r.precedence||this.precedence==r.precedence&&this.id>r.id)break;n=(i=n).next}var o,a=t.conlisteners;null==Ki.zpp_pool?o=new Ki:(o=Ki.zpp_pool,Ki.zpp_pool=o.next,o.next=null),o.elt=this;var s=o;null==i?(s.next=a.head,a.head=s):(s.next=i.next,i.next=s),a.pushmod=a.modified=!0,a.length++;for(var l=t.cbsets.head;null!=l;)l.elt.zip_conlisteners=!0,l=l.next;e=e.next}},Re.prototype.removedFromSpace=function(){for(var e=this.options.includes.head;null!=e;){var t=e.elt;t.conlisteners.remove(this);for(var i=t.cbsets.head;null!=i;)i.elt.zip_conlisteners=!0,i=i.next;e=e.next}this.options.handler=null},Re.prototype.cbtype_change=function(e,t,i){this.removedFromSpace();var n=this.options;if(t)if(i){for(var r=null,o=n.includes.head;null!=o&&!(e.id<o.elt.id);)o=(r=o).next;var a,s=n.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=e;var l=a;null==r?(l.next=s.head,s.head=l):(l.next=r.next,r.next=l),s.pushmod=s.modified=!0,s.length++}else n.includes.remove(e);else if(i){for(var p=null,h=n.excludes.head;null!=h&&!(e.id<h.elt.id);)h=(p=h).next;var u,c=n.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=e;var d=u;null==p?(d.next=c.head,c.head=d):(d.next=p.next,p.next=d),c.pushmod=c.modified=!0,c.length++}else n.excludes.remove(e);this.addedToSpace()},Re.prototype.invalidate_precedence=function(){null!=this.space&&(this.removedFromSpace(),this.addedToSpace())},Re.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},Re.prototype.__class__=Re;var Fe=zpp_nape.util.ZNPList_ZPP_CbType=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Fe.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"],Fe.prototype.head=null,Fe.prototype.begin=function(){return this.head},Fe.prototype.modified=null,Fe.prototype.pushmod=null,Fe.prototype.length=null,Fe.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Fe.prototype.add=function(e){var t;null==ji.zpp_pool?t=new ji:(t=ji.zpp_pool,ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fe.prototype.inlined_add=function(e){var t;null==ji.zpp_pool?t=new ji:(t=ji.zpp_pool,ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fe.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Fe.prototype.insert=function(e,t){var i;null==ji.zpp_pool?i=new ji:(i=ji.zpp_pool,ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fe.prototype.inlined_insert=function(e,t){var i;null==ji.zpp_pool?i=new ji:(i=ji.zpp_pool,ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fe.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fe.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fe.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fe.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fe.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ji.zpp_pool,ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fe.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Fe.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ji.zpp_pool,ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fe.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ji.zpp_pool,ji.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Fe.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ji.zpp_pool,ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fe.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ji.zpp_pool,ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fe.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Fe.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fe.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ji.zpp_pool,ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fe.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Fe.prototype.empty=function(){return null==this.head},Fe.prototype.size=function(){return this.length},Fe.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fe.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fe.prototype.front=function(){return this.head.elt},Fe.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Fe.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Fe.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Fe.prototype.__class__=Fe;var ri=zpp_nape.callbacks.ZPP_InteractionListener=function(e,t,i,n){this.handlerp=null,this.pure=!1,this.allowSleepingCallbacks=!1,this.handleri=null,this.options2=null,this.options1=null,this.itype=0,this.outer_znp=null,this.outer_zni=null,Le.call(this),this.type=n,(this.interaction=this).event=i,this.options1=e.zpp_inner,this.options2=t.zpp_inner,this.allowSleepingCallbacks=!1};ri.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"],ri.__super__=Le,ri.prototype=Object.create(Le.prototype),ri.prototype.outer_zni=null,ri.prototype.outer_znp=null,ri.prototype.itype=null,ri.prototype.options1=null,ri.prototype.options2=null,ri.prototype.handleri=null,ri.prototype.allowSleepingCallbacks=null,ri.prototype.pure=null,ri.prototype.handlerp=null,ri.prototype.setInteractionType=function(e){this.itype=e},ri.prototype.wake=function(){for(var e=this.options1.includes.head,t=this.options2.includes.head;null!=e&&null!=t;){var i=e.elt,n=t.elt;if(i==n){for(var r=i.interactors.head;null!=r;)r.elt.wake(),r=r.next;e=e.next,t=t.next}else if(i.id<n.id){for(var o=i.interactors.head;null!=o;)o.elt.wake(),o=o.next;e=e.next}else{for(var a=n.interactors.head;null!=a;)a.elt.wake(),a=a.next;t=t.next}}for(;null!=e;){for(var s=e.elt.interactors.head;null!=s;)s.elt.wake(),s=s.next;e=e.next}for(;null!=t;){for(var l=t.elt.interactors.head;null!=l;)l.elt.wake(),l=l.next;t=t.next}},ri.prototype.CbSetset=function(e,t,i){for(var n=ri.UCbSet,r=ri.VCbSet,o=ri.WCbSet,a=e.head,s=t.head;null!=a&&null!=s;){var l=a.elt,p=s.elt;if(l==p){var h;null==Xi.zpp_pool?h=new Xi:(h=Xi.zpp_pool,Xi.zpp_pool=h.next,h.next=null),h.elt=l;var u=h;u.next=o.head,o.head=u,o.modified=!0,o.length++,a=a.next,s=s.next}else if(jo.setlt(l,p)){var c;null==Xi.zpp_pool?c=new Xi:(c=Xi.zpp_pool,Xi.zpp_pool=c.next,c.next=null),c.elt=l;var d=c;d.next=n.head,n.head=d,n.modified=!0,n.length++,a=a.next}else{var _;null==Xi.zpp_pool?_=new Xi:(_=Xi.zpp_pool,Xi.zpp_pool=_.next,_.next=null),_.elt=p;var y=_;y.next=r.head,r.head=y,r.modified=!0,r.length++,s=s.next}}for(;null!=a;){var m,f=a.elt;null==Xi.zpp_pool?m=new Xi:(m=Xi.zpp_pool,Xi.zpp_pool=m.next,m.next=null),m.elt=f;var x=m;x.next=n.head,n.head=x,n.modified=!0,n.length++,a=a.next}for(;null!=s;){var v,z=s.elt;null==Xi.zpp_pool?v=new Xi:(v=Xi.zpp_pool,Xi.zpp_pool=v.next,v.next=null),v.elt=z;var g=v;g.next=r.head,r.head=g,r.modified=!0,r.length++,s=s.next}for(;null!=n.head;)for(var b=n.pop_unsafe(),w=t.head;null!=w;)i(b,w.elt),w=w.next;for(;null!=r.head;)for(var S=r.pop_unsafe(),C=o.head;null!=C;)i(S,C.elt),C=C.next;for(;null!=o.head;){var M=o.pop_unsafe();i(M,M);for(var P=o.head;null!=P;)i(M,P.elt),P=P.next}},ri.prototype.CbTypeset=function(e,t,i){for(var n=ri.UCbType,r=ri.VCbType,o=ri.WCbType,a=e.head,s=t.head;null!=a&&null!=s;){var l=a.elt,p=s.elt;if(l==p){var h;null==ji.zpp_pool?h=new ji:(h=ji.zpp_pool,ji.zpp_pool=h.next,h.next=null),h.elt=l;var u=h;u.next=o.head,o.head=u,o.modified=!0,o.length++,a=a.next,s=s.next}else if(l.id<p.id){var c;null==ji.zpp_pool?c=new ji:(c=ji.zpp_pool,ji.zpp_pool=c.next,c.next=null),c.elt=l;var d=c;d.next=n.head,n.head=d,n.modified=!0,n.length++,a=a.next}else{var _;null==ji.zpp_pool?_=new ji:(_=ji.zpp_pool,ji.zpp_pool=_.next,_.next=null),_.elt=p;var y=_;y.next=r.head,r.head=y,r.modified=!0,r.length++,s=s.next}}for(;null!=a;){var m,f=a.elt;null==ji.zpp_pool?m=new ji:(m=ji.zpp_pool,ji.zpp_pool=m.next,m.next=null),m.elt=f;var x=m;x.next=n.head,n.head=x,n.modified=!0,n.length++,a=a.next}for(;null!=s;){var v,z=s.elt;null==ji.zpp_pool?v=new ji:(v=ji.zpp_pool,ji.zpp_pool=v.next,v.next=null),v.elt=z;var g=v;g.next=r.head,r.head=g,r.modified=!0,r.length++,s=s.next}for(;null!=n.head;)for(var b=n.pop_unsafe(),w=t.head;null!=w;)i(b,w.elt),w=w.next;for(;null!=r.head;)for(var S=r.pop_unsafe(),C=o.head;null!=C;)i(S,C.elt),C=C.next;for(;null!=o.head;){var M=o.pop_unsafe();i(M,M);for(var P=o.head;null!=P;)i(M,P.elt),P=P.next}},ri.prototype.with_uniquesets=function(e){var t,i=this;null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.lt=No.setlt;for(var n=this.options2.includes,r=ri.UCbType,o=ri.VCbType,a=ri.WCbType,s=this.options1.includes.head,l=n.head;null!=s&&null!=l;){var p=s.elt,h=l.elt;if(p==h){var u;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=p;var c=u;c.next=a.head,a.head=c,a.modified=!0,a.length++,s=s.next,l=l.next}else if(p.id<h.id){var d;null==ji.zpp_pool?d=new ji:(d=ji.zpp_pool,ji.zpp_pool=d.next,d.next=null),d.elt=p;var _=d;_.next=r.head,r.head=_,r.modified=!0,r.length++,s=s.next}else{var y;null==ji.zpp_pool?y=new ji:(y=ji.zpp_pool,ji.zpp_pool=y.next,y.next=null),y.elt=h;var m=y;m.next=o.head,o.head=m,o.modified=!0,o.length++,l=l.next}}for(;null!=s;){var f,x=s.elt;null==ji.zpp_pool?f=new ji:(f=ji.zpp_pool,ji.zpp_pool=f.next,f.next=null),f.elt=x;var v=f;v.next=r.head,r.head=v,r.modified=!0,r.length++,s=s.next}for(;null!=l;){var z,g=l.elt;null==ji.zpp_pool?z=new ji:(z=ji.zpp_pool,ji.zpp_pool=z.next,z.next=null),z.elt=g;var b=z;b.next=o.head,o.head=b,o.modified=!0,o.length++,l=l.next}for(;null!=r.head;)for(var w=r.pop_unsafe(),S=n.head;null!=S;){for(var C=S.elt.cbsets,M=ri.UCbSet,P=ri.VCbSet,k=ri.WCbSet,T=w.cbsets.head,O=C.head;null!=T&&null!=O;){var A=T.elt,E=O.elt;if(A==E){var G;null==Xi.zpp_pool?G=new Xi:(G=Xi.zpp_pool,Xi.zpp_pool=G.next,G.next=null),G.elt=A;var I=G;I.next=k.head,k.head=I,k.modified=!0,k.length++,T=T.next,O=O.next}else if(jo.setlt(A,E)){var B;null==Xi.zpp_pool?B=new Xi:(B=Xi.zpp_pool,Xi.zpp_pool=B.next,B.next=null),B.elt=A;var L=B;L.next=M.head,M.head=L,M.modified=!0,M.length++,T=T.next}else{var D;null==Xi.zpp_pool?D=new Xi:(D=Xi.zpp_pool,Xi.zpp_pool=D.next,D.next=null),D.elt=E;var R=D;R.next=P.head,P.head=R,P.modified=!0,P.length++,O=O.next}}for(;null!=T;){var F,j=T.elt;null==Xi.zpp_pool?F=new Xi:(F=Xi.zpp_pool,Xi.zpp_pool=F.next,F.next=null),F.elt=j;var N=F;N.next=M.head,M.head=N,M.modified=!0,M.length++,T=T.next}for(;null!=O;){var U,V=O.elt;null==Xi.zpp_pool?U=new Xi:(U=Xi.zpp_pool,Xi.zpp_pool=U.next,U.next=null),U.elt=V;var H=U;H.next=P.head,P.head=H,P.modified=!0,P.length++,O=O.next}for(;null!=M.head;)for(var W=M.pop_unsafe(),X=C.head;null!=X;){var q,Y=X.elt;if(W.validate(),Y.validate(),jo.single_intersection(W,Y,i))null==No.zpp_pool?q=new No:(q=No.zpp_pool,No.zpp_pool=q.next,q.next=null),q.zip_listeners=!0,jo.setlt(W,Y)?(q.a=W,q.b=Y):(q.a=Y,q.b=W),t.try_insert(q);X=X.next}for(;null!=P.head;)for(var K=P.pop_unsafe(),Z=k.head;null!=Z;){var J,Q=Z.elt;if(K.validate(),Q.validate(),jo.single_intersection(K,Q,i))null==No.zpp_pool?J=new No:(J=No.zpp_pool,No.zpp_pool=J.next,J.next=null),J.zip_listeners=!0,jo.setlt(K,Q)?(J.a=K,J.b=Q):(J.a=Q,J.b=K),t.try_insert(J);Z=Z.next}for(;null!=k.head;){var $,ee=k.pop_unsafe();if(ee.validate(),ee.validate(),jo.single_intersection(ee,ee,i))null==No.zpp_pool?$=new No:($=No.zpp_pool,No.zpp_pool=$.next,$.next=null),$.zip_listeners=!0,jo.setlt(ee,ee),$.a=ee,$.b=ee,t.try_insert($);for(var te=k.head;null!=te;){var ie,ne=te.elt;if(ee.validate(),ne.validate(),jo.single_intersection(ee,ne,i))null==No.zpp_pool?ie=new No:(ie=No.zpp_pool,No.zpp_pool=ie.next,ie.next=null),ie.zip_listeners=!0,jo.setlt(ee,ne)?(ie.a=ee,ie.b=ne):(ie.a=ne,ie.b=ee),t.try_insert(ie);te=te.next}}S=S.next}for(;null!=o.head;)for(var re=o.pop_unsafe(),oe=a.head;null!=oe;){for(var ae=oe.elt.cbsets,se=ri.UCbSet,le=ri.VCbSet,pe=ri.WCbSet,he=re.cbsets.head,ue=ae.head;null!=he&&null!=ue;){var ce=he.elt,de=ue.elt;if(ce==de){var _e;null==Xi.zpp_pool?_e=new Xi:(_e=Xi.zpp_pool,Xi.zpp_pool=_e.next,_e.next=null),_e.elt=ce;var ye=_e;ye.next=pe.head,pe.head=ye,pe.modified=!0,pe.length++,he=he.next,ue=ue.next}else if(jo.setlt(ce,de)){var me;null==Xi.zpp_pool?me=new Xi:(me=Xi.zpp_pool,Xi.zpp_pool=me.next,me.next=null),me.elt=ce;var fe=me;fe.next=se.head,se.head=fe,se.modified=!0,se.length++,he=he.next}else{var xe;null==Xi.zpp_pool?xe=new Xi:(xe=Xi.zpp_pool,Xi.zpp_pool=xe.next,xe.next=null),xe.elt=de;var ve=xe;ve.next=le.head,le.head=ve,le.modified=!0,le.length++,ue=ue.next}}for(;null!=he;){var ze,ge=he.elt;null==Xi.zpp_pool?ze=new Xi:(ze=Xi.zpp_pool,Xi.zpp_pool=ze.next,ze.next=null),ze.elt=ge;var be=ze;be.next=se.head,se.head=be,se.modified=!0,se.length++,he=he.next}for(;null!=ue;){var we,Se=ue.elt;null==Xi.zpp_pool?we=new Xi:(we=Xi.zpp_pool,Xi.zpp_pool=we.next,we.next=null),we.elt=Se;var Ce=we;Ce.next=le.head,le.head=Ce,le.modified=!0,le.length++,ue=ue.next}for(;null!=se.head;)for(var Me=se.pop_unsafe(),Pe=ae.head;null!=Pe;){var ke,Te=Pe.elt;if(Me.validate(),Te.validate(),jo.single_intersection(Me,Te,i))null==No.zpp_pool?ke=new No:(ke=No.zpp_pool,No.zpp_pool=ke.next,ke.next=null),ke.zip_listeners=!0,jo.setlt(Me,Te)?(ke.a=Me,ke.b=Te):(ke.a=Te,ke.b=Me),t.try_insert(ke);Pe=Pe.next}for(;null!=le.head;)for(var Oe=le.pop_unsafe(),Ae=pe.head;null!=Ae;){var Ee,Ge=Ae.elt;if(Oe.validate(),Ge.validate(),jo.single_intersection(Oe,Ge,i))null==No.zpp_pool?Ee=new No:(Ee=No.zpp_pool,No.zpp_pool=Ee.next,Ee.next=null),Ee.zip_listeners=!0,jo.setlt(Oe,Ge)?(Ee.a=Oe,Ee.b=Ge):(Ee.a=Ge,Ee.b=Oe),t.try_insert(Ee);Ae=Ae.next}for(;null!=pe.head;){var Ie,Be=pe.pop_unsafe();if(Be.validate(),Be.validate(),jo.single_intersection(Be,Be,i))null==No.zpp_pool?Ie=new No:(Ie=No.zpp_pool,No.zpp_pool=Ie.next,Ie.next=null),Ie.zip_listeners=!0,jo.setlt(Be,Be),Ie.a=Be,Ie.b=Be,t.try_insert(Ie);for(var Le=pe.head;null!=Le;){var De,Re=Le.elt;if(Be.validate(),Re.validate(),jo.single_intersection(Be,Re,i))null==No.zpp_pool?De=new No:(De=No.zpp_pool,No.zpp_pool=De.next,De.next=null),De.zip_listeners=!0,jo.setlt(Be,Re)?(De.a=Be,De.b=Re):(De.a=Re,De.b=Be),t.try_insert(De);Le=Le.next}}oe=oe.next}for(;null!=a.head;){for(var Fe=a.pop_unsafe(),je=Fe.cbsets,Ne=ri.UCbSet,Ue=ri.VCbSet,Ve=ri.WCbSet,He=Fe.cbsets.head,We=je.head;null!=He&&null!=We;){var Xe=He.elt,qe=We.elt;if(Xe==qe){var Ye;null==Xi.zpp_pool?Ye=new Xi:(Ye=Xi.zpp_pool,Xi.zpp_pool=Ye.next,Ye.next=null),Ye.elt=Xe;var Ke=Ye;Ke.next=Ve.head,Ve.head=Ke,Ve.modified=!0,Ve.length++,He=He.next,We=We.next}else if(jo.setlt(Xe,qe)){var Ze;null==Xi.zpp_pool?Ze=new Xi:(Ze=Xi.zpp_pool,Xi.zpp_pool=Ze.next,Ze.next=null),Ze.elt=Xe;var Je=Ze;Je.next=Ne.head,Ne.head=Je,Ne.modified=!0,Ne.length++,He=He.next}else{var Qe;null==Xi.zpp_pool?Qe=new Xi:(Qe=Xi.zpp_pool,Xi.zpp_pool=Qe.next,Qe.next=null),Qe.elt=qe;var $e=Qe;$e.next=Ue.head,Ue.head=$e,Ue.modified=!0,Ue.length++,We=We.next}}for(;null!=He;){var et,tt=He.elt;null==Xi.zpp_pool?et=new Xi:(et=Xi.zpp_pool,Xi.zpp_pool=et.next,et.next=null),et.elt=tt;var it=et;it.next=Ne.head,Ne.head=it,Ne.modified=!0,Ne.length++,He=He.next}for(;null!=We;){var nt,rt=We.elt;null==Xi.zpp_pool?nt=new Xi:(nt=Xi.zpp_pool,Xi.zpp_pool=nt.next,nt.next=null),nt.elt=rt;var ot=nt;ot.next=Ue.head,Ue.head=ot,Ue.modified=!0,Ue.length++,We=We.next}for(;null!=Ne.head;)for(var at=Ne.pop_unsafe(),st=je.head;null!=st;){var lt,pt=st.elt;if(at.validate(),pt.validate(),jo.single_intersection(at,pt,i))null==No.zpp_pool?lt=new No:(lt=No.zpp_pool,No.zpp_pool=lt.next,lt.next=null),lt.zip_listeners=!0,jo.setlt(at,pt)?(lt.a=at,lt.b=pt):(lt.a=pt,lt.b=at),t.try_insert(lt);st=st.next}for(;null!=Ue.head;)for(var ht=Ue.pop_unsafe(),ut=Ve.head;null!=ut;){var ct,dt=ut.elt;if(ht.validate(),dt.validate(),jo.single_intersection(ht,dt,i))null==No.zpp_pool?ct=new No:(ct=No.zpp_pool,No.zpp_pool=ct.next,ct.next=null),ct.zip_listeners=!0,jo.setlt(ht,dt)?(ct.a=ht,ct.b=dt):(ct.a=dt,ct.b=ht),t.try_insert(ct);ut=ut.next}for(;null!=Ve.head;){var _t,yt=Ve.pop_unsafe();if(yt.validate(),yt.validate(),jo.single_intersection(yt,yt,i))null==No.zpp_pool?_t=new No:(_t=No.zpp_pool,No.zpp_pool=_t.next,_t.next=null),_t.zip_listeners=!0,jo.setlt(yt,yt),_t.a=yt,_t.b=yt,t.try_insert(_t);for(var mt=Ve.head;null!=mt;){var ft,xt=mt.elt;if(yt.validate(),xt.validate(),jo.single_intersection(yt,xt,i))null==No.zpp_pool?ft=new No:(ft=No.zpp_pool,No.zpp_pool=ft.next,ft.next=null),ft.zip_listeners=!0,jo.setlt(yt,xt)?(ft.a=yt,ft.b=xt):(ft.a=xt,ft.b=yt),t.try_insert(ft);mt=mt.next}}for(var vt=a.head;null!=vt;){for(var zt=vt.elt.cbsets,gt=ri.UCbSet,bt=ri.VCbSet,wt=ri.WCbSet,St=Fe.cbsets.head,Ct=zt.head;null!=St&&null!=Ct;){var Mt=St.elt,Pt=Ct.elt;if(Mt==Pt){var kt;null==Xi.zpp_pool?kt=new Xi:(kt=Xi.zpp_pool,Xi.zpp_pool=kt.next,kt.next=null),kt.elt=Mt;var Tt=kt;Tt.next=wt.head,wt.head=Tt,wt.modified=!0,wt.length++,St=St.next,Ct=Ct.next}else if(jo.setlt(Mt,Pt)){var Ot;null==Xi.zpp_pool?Ot=new Xi:(Ot=Xi.zpp_pool,Xi.zpp_pool=Ot.next,Ot.next=null),Ot.elt=Mt;var At=Ot;At.next=gt.head,gt.head=At,gt.modified=!0,gt.length++,St=St.next}else{var Et;null==Xi.zpp_pool?Et=new Xi:(Et=Xi.zpp_pool,Xi.zpp_pool=Et.next,Et.next=null),Et.elt=Pt;var Gt=Et;Gt.next=bt.head,bt.head=Gt,bt.modified=!0,bt.length++,Ct=Ct.next}}for(;null!=St;){var It,Bt=St.elt;null==Xi.zpp_pool?It=new Xi:(It=Xi.zpp_pool,Xi.zpp_pool=It.next,It.next=null),It.elt=Bt;var Lt=It;Lt.next=gt.head,gt.head=Lt,gt.modified=!0,gt.length++,St=St.next}for(;null!=Ct;){var Dt,Rt=Ct.elt;null==Xi.zpp_pool?Dt=new Xi:(Dt=Xi.zpp_pool,Xi.zpp_pool=Dt.next,Dt.next=null),Dt.elt=Rt;var Ft=Dt;Ft.next=bt.head,bt.head=Ft,bt.modified=!0,bt.length++,Ct=Ct.next}for(;null!=gt.head;)for(var jt=gt.pop_unsafe(),Nt=zt.head;null!=Nt;){var Ut,Vt=Nt.elt;if(jt.validate(),Vt.validate(),jo.single_intersection(jt,Vt,i))null==No.zpp_pool?Ut=new No:(Ut=No.zpp_pool,No.zpp_pool=Ut.next,Ut.next=null),Ut.zip_listeners=!0,jo.setlt(jt,Vt)?(Ut.a=jt,Ut.b=Vt):(Ut.a=Vt,Ut.b=jt),t.try_insert(Ut);Nt=Nt.next}for(;null!=bt.head;)for(var Ht=bt.pop_unsafe(),Wt=wt.head;null!=Wt;){var Xt,qt=Wt.elt;if(Ht.validate(),qt.validate(),jo.single_intersection(Ht,qt,i))null==No.zpp_pool?Xt=new No:(Xt=No.zpp_pool,No.zpp_pool=Xt.next,Xt.next=null),Xt.zip_listeners=!0,jo.setlt(Ht,qt)?(Xt.a=Ht,Xt.b=qt):(Xt.a=qt,Xt.b=Ht),t.try_insert(Xt);Wt=Wt.next}for(;null!=wt.head;){var Yt,Kt=wt.pop_unsafe();if(Kt.validate(),Kt.validate(),jo.single_intersection(Kt,Kt,i))null==No.zpp_pool?Yt=new No:(Yt=No.zpp_pool,No.zpp_pool=Yt.next,Yt.next=null),Yt.zip_listeners=!0,jo.setlt(Kt,Kt),Yt.a=Kt,Yt.b=Kt,t.try_insert(Yt);for(var Zt=wt.head;null!=Zt;){var Jt,Qt=Zt.elt;if(Kt.validate(),Qt.validate(),jo.single_intersection(Kt,Qt,i))null==No.zpp_pool?Jt=new No:(Jt=No.zpp_pool,No.zpp_pool=Jt.next,Jt.next=null),Jt.zip_listeners=!0,jo.setlt(Kt,Qt)?(Jt.a=Kt,Jt.b=Qt):(Jt.a=Qt,Jt.b=Kt),t.try_insert(Jt);Zt=Zt.next}}vt=vt.next}}if(null!=t.parent){for(var $t=t.parent;null!=$t;)if(null!=$t.prev)$t=$t.prev;else if(null!=$t.next)$t=$t.next;else{var ei=$t.data;e?i.space.freshListenerType(ei.a,ei.b):i.space.nullListenerType(ei.a,ei.b),ei.a=ei.b=null,ei.listeners.clear(),ei.next=No.zpp_pool,No.zpp_pool=ei;var ti=$t.parent;null!=ti&&($t==ti.prev?ti.prev=null:ti.next=null,$t.parent=null);var ii=$t;ii.data=null,ii.lt=null,ii.swapped=null,ii.next=Un.zpp_pool,Un.zpp_pool=ii,$t=ti}t.parent=null}var ni=t;ni.data=null,ni.lt=null,ni.swapped=null,ni.next=Un.zpp_pool,Un.zpp_pool=ni},ri.prototype.with_union=function(e){for(var t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var n=t.elt,r=i.elt;n==r?(e(n),t=t.next,i=i.next):n.id<r.id?(e(n),t=t.next):(e(r),i=i.next)}for(;null!=t;)e(t.elt),t=t.next;for(;null!=i;)e(i.elt),i=i.next},ri.prototype.addedToSpace=function(){for(var e=this,t=3==this.type,i=this.options1.includes.head,n=this.options2.includes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r==o){for(var a=null,s=r.listeners.head;null!=s;){var l=s.elt;if(e.precedence>l.precedence||e.precedence==l.precedence&&e.id>l.id)break;s=(a=s).next}var p,h=r.listeners;null==Zo.zpp_pool?p=new Zo:(p=Zo.zpp_pool,Zo.zpp_pool=p.next,p.next=null),p.elt=e;var u=p;null==a?(u.next=h.head,h.head=u):(u.next=a.next,a.next=u),h.pushmod=h.modified=!0,h.length++;for(var c=r.cbsets.head;null!=c;){var d=c.elt;d.zip_listeners=!0,d.invalidate_pairs(),c=c.next}if(t)for(var _=r.interactors.head;null!=_;)_.elt.wake(),_=_.next;i=i.next,n=n.next}else if(r.id<o.id){for(var y=null,m=r.listeners.head;null!=m;){var f=m.elt;if(e.precedence>f.precedence||e.precedence==f.precedence&&e.id>f.id)break;m=(y=m).next}var x,v=r.listeners;null==Zo.zpp_pool?x=new Zo:(x=Zo.zpp_pool,Zo.zpp_pool=x.next,x.next=null),x.elt=e;var z=x;null==y?(z.next=v.head,v.head=z):(z.next=y.next,y.next=z),v.pushmod=v.modified=!0,v.length++;for(var g=r.cbsets.head;null!=g;){var b=g.elt;b.zip_listeners=!0,b.invalidate_pairs(),g=g.next}if(t)for(var w=r.interactors.head;null!=w;)w.elt.wake(),w=w.next;i=i.next}else{for(var S=null,C=o.listeners.head;null!=C;){var M=C.elt;if(e.precedence>M.precedence||e.precedence==M.precedence&&e.id>M.id)break;C=(S=C).next}var P,k=o.listeners;null==Zo.zpp_pool?P=new Zo:(P=Zo.zpp_pool,Zo.zpp_pool=P.next,P.next=null),P.elt=e;var T=P;null==S?(T.next=k.head,k.head=T):(T.next=S.next,S.next=T),k.pushmod=k.modified=!0,k.length++;for(var O=o.cbsets.head;null!=O;){var A=O.elt;A.zip_listeners=!0,A.invalidate_pairs(),O=O.next}if(t)for(var E=o.interactors.head;null!=E;)E.elt.wake(),E=E.next;n=n.next}}for(;null!=i;){for(var G=i.elt,I=null,B=G.listeners.head;null!=B;){var L=B.elt;if(e.precedence>L.precedence||e.precedence==L.precedence&&e.id>L.id)break;B=(I=B).next}var D,R=G.listeners;null==Zo.zpp_pool?D=new Zo:(D=Zo.zpp_pool,Zo.zpp_pool=D.next,D.next=null),D.elt=e;var F=D;null==I?(F.next=R.head,R.head=F):(F.next=I.next,I.next=F),R.pushmod=R.modified=!0,R.length++;for(var j=G.cbsets.head;null!=j;){var N=j.elt;N.zip_listeners=!0,N.invalidate_pairs(),j=j.next}if(t)for(var U=G.interactors.head;null!=U;)U.elt.wake(),U=U.next;i=i.next}for(;null!=n;){for(var V=n.elt,H=null,W=V.listeners.head;null!=W;){var X=W.elt;if(e.precedence>X.precedence||e.precedence==X.precedence&&e.id>X.id)break;W=(H=W).next}var q,Y=V.listeners;null==Zo.zpp_pool?q=new Zo:(q=Zo.zpp_pool,Zo.zpp_pool=q.next,q.next=null),q.elt=e;var K=q;null==H?(K.next=Y.head,Y.head=K):(K.next=H.next,H.next=K),Y.pushmod=Y.modified=!0,Y.length++;for(var Z=V.cbsets.head;null!=Z;){var J=Z.elt;J.zip_listeners=!0,J.invalidate_pairs(),Z=Z.next}if(t)for(var Q=V.interactors.head;null!=Q;)Q.elt.wake(),Q=Q.next;n=n.next}this.options1.handler=$(this,this.cbtype_change1),this.options2.handler=$(this,this.cbtype_change2),this.with_uniquesets(!0)},ri.prototype.removedFromSpace=function(){this.with_uniquesets(!1);for(var e=3==this.type,t=this.options1.includes.head,i=this.options2.includes.head;null!=t&&null!=i;){var n=t.elt,r=i.elt;if(n==r){n.listeners.remove(this);for(var o=n.cbsets.head;null!=o;){var a=o.elt;a.zip_listeners=!0,a.invalidate_pairs(),o=o.next}if(e)for(var s=n.interactors.head;null!=s;)s.elt.wake(),s=s.next;t=t.next,i=i.next}else if(n.id<r.id){n.listeners.remove(this);for(var l=n.cbsets.head;null!=l;){var p=l.elt;p.zip_listeners=!0,p.invalidate_pairs(),l=l.next}if(e)for(var h=n.interactors.head;null!=h;)h.elt.wake(),h=h.next;t=t.next}else{r.listeners.remove(this);for(var u=r.cbsets.head;null!=u;){var c=u.elt;c.zip_listeners=!0,c.invalidate_pairs(),u=u.next}if(e)for(var d=r.interactors.head;null!=d;)d.elt.wake(),d=d.next;i=i.next}}for(;null!=t;){var _=t.elt;_.listeners.remove(this);for(var y=_.cbsets.head;null!=y;){var m=y.elt;m.zip_listeners=!0,m.invalidate_pairs(),y=y.next}if(e)for(var f=_.interactors.head;null!=f;)f.elt.wake(),f=f.next;t=t.next}for(;null!=i;){var x=i.elt;x.listeners.remove(this);for(var v=x.cbsets.head;null!=v;){var z=v.elt;z.zip_listeners=!0,z.invalidate_pairs(),v=v.next}if(e)for(var g=x.interactors.head;null!=g;)g.elt.wake(),g=g.next;i=i.next}this.options1.handler=null,this.options2.handler=null},ri.prototype.invalidate_precedence=function(){var e=this;if(null!=this.space){for(var t=3==this.type,i=this.options1.includes.head,n=this.options2.includes.head;null!=i&&null!=n;){var r=i.elt,o=n.elt;if(r==o){r.listeners.remove(e);for(var a=r.cbsets.head;null!=a;){var s=a.elt;s.zip_listeners=!0,s.invalidate_pairs(),a=a.next}for(var l=null,p=r.listeners.head;null!=p;){var h=p.elt;if(e.precedence>h.precedence||e.precedence==h.precedence&&e.id>h.id)break;p=(l=p).next}var u,c=r.listeners;null==Zo.zpp_pool?u=new Zo:(u=Zo.zpp_pool,Zo.zpp_pool=u.next,u.next=null),u.elt=e;var d=u;null==l?(d.next=c.head,c.head=d):(d.next=l.next,l.next=d),c.pushmod=c.modified=!0,c.length++;for(var _=r.cbsets.head;null!=_;){var y=_.elt;y.zip_listeners=!0,y.invalidate_pairs(),_=_.next}if(t)for(var m=r.interactors.head;null!=m;)m.elt.wake(),m=m.next;i=i.next,n=n.next}else if(r.id<o.id){r.listeners.remove(e);for(var f=r.cbsets.head;null!=f;){var x=f.elt;x.zip_listeners=!0,x.invalidate_pairs(),f=f.next}for(var v=null,z=r.listeners.head;null!=z;){var g=z.elt;if(e.precedence>g.precedence||e.precedence==g.precedence&&e.id>g.id)break;z=(v=z).next}var b,w=r.listeners;null==Zo.zpp_pool?b=new Zo:(b=Zo.zpp_pool,Zo.zpp_pool=b.next,b.next=null),b.elt=e;var S=b;null==v?(S.next=w.head,w.head=S):(S.next=v.next,v.next=S),w.pushmod=w.modified=!0,w.length++;for(var C=r.cbsets.head;null!=C;){var M=C.elt;M.zip_listeners=!0,M.invalidate_pairs(),C=C.next}if(t)for(var P=r.interactors.head;null!=P;)P.elt.wake(),P=P.next;i=i.next}else{o.listeners.remove(e);for(var k=o.cbsets.head;null!=k;){var T=k.elt;T.zip_listeners=!0,T.invalidate_pairs(),k=k.next}for(var O=null,A=o.listeners.head;null!=A;){var E=A.elt;if(e.precedence>E.precedence||e.precedence==E.precedence&&e.id>E.id)break;A=(O=A).next}var G,I=o.listeners;null==Zo.zpp_pool?G=new Zo:(G=Zo.zpp_pool,Zo.zpp_pool=G.next,G.next=null),G.elt=e;var B=G;null==O?(B.next=I.head,I.head=B):(B.next=O.next,O.next=B),I.pushmod=I.modified=!0,I.length++;for(var L=o.cbsets.head;null!=L;){var D=L.elt;D.zip_listeners=!0,D.invalidate_pairs(),L=L.next}if(t)for(var R=o.interactors.head;null!=R;)R.elt.wake(),R=R.next;n=n.next}}for(;null!=i;){var F=i.elt;F.listeners.remove(e);for(var j=F.cbsets.head;null!=j;){var N=j.elt;N.zip_listeners=!0,N.invalidate_pairs(),j=j.next}for(var U=null,V=F.listeners.head;null!=V;){var H=V.elt;if(e.precedence>H.precedence||e.precedence==H.precedence&&e.id>H.id)break;V=(U=V).next}var W,X=F.listeners;null==Zo.zpp_pool?W=new Zo:(W=Zo.zpp_pool,Zo.zpp_pool=W.next,W.next=null),W.elt=e;var q=W;null==U?(q.next=X.head,X.head=q):(q.next=U.next,U.next=q),X.pushmod=X.modified=!0,X.length++;for(var Y=F.cbsets.head;null!=Y;){var K=Y.elt;K.zip_listeners=!0,K.invalidate_pairs(),Y=Y.next}if(t)for(var Z=F.interactors.head;null!=Z;)Z.elt.wake(),Z=Z.next;i=i.next}for(;null!=n;){var J=n.elt;J.listeners.remove(e);for(var Q=J.cbsets.head;null!=Q;){var $=Q.elt;$.zip_listeners=!0,$.invalidate_pairs(),Q=Q.next}for(var ee=null,te=J.listeners.head;null!=te;){var ie=te.elt;if(e.precedence>ie.precedence||e.precedence==ie.precedence&&e.id>ie.id)break;te=(ee=te).next}var ne,re=J.listeners;null==Zo.zpp_pool?ne=new Zo:(ne=Zo.zpp_pool,Zo.zpp_pool=ne.next,ne.next=null),ne.elt=e;var oe=ne;null==ee?(oe.next=re.head,re.head=oe):(oe.next=ee.next,ee.next=oe),re.pushmod=re.modified=!0,re.length++;for(var ae=J.cbsets.head;null!=ae;){var se=ae.elt;se.zip_listeners=!0,se.invalidate_pairs(),ae=ae.next}if(t)for(var le=J.interactors.head;null!=le;)le.elt.wake(),le=le.next;n=n.next}}},ri.prototype.cbtype_change1=function(e,t,i){this.cbtype_change(this.options1,e,t,i)},ri.prototype.cbtype_change2=function(e,t,i){this.cbtype_change(this.options2,e,t,i)},ri.prototype.cbtype_change=function(e,t,i,n){if(this.removedFromSpace(),i)if(n){for(var r=null,o=e.includes.head;null!=o&&!(t.id<o.elt.id);)o=(r=o).next;var a,s=e.includes;null==ji.zpp_pool?a=new ji:(a=ji.zpp_pool,ji.zpp_pool=a.next,a.next=null),a.elt=t;var l=a;null==r?(l.next=s.head,s.head=l):(l.next=r.next,r.next=l),s.pushmod=s.modified=!0,s.length++}else e.includes.remove(t);else if(n){for(var p=null,h=e.excludes.head;null!=h&&!(t.id<h.elt.id);)h=(p=h).next;var u,c=e.excludes;null==ji.zpp_pool?u=new ji:(u=ji.zpp_pool,ji.zpp_pool=u.next,u.next=null),u.elt=t;var d=u;null==p?(d.next=c.head,c.head=d):(d.next=p.next,p.next=d),c.pushmod=c.modified=!0,c.length++}else e.excludes.remove(t);this.addedToSpace()},ri.prototype.swapEvent=function(e){this.removedFromSpace(),this.event=e,this.addedToSpace()},ri.prototype.__class__=ri;var je=zpp_nape.callbacks.ZPP_OptionType=function(){this.wrap_excludes=null,this.wrap_includes=null,this.excludes=null,this.includes=null,this.handler=null,this.outer=null,this.includes=new Fe,this.excludes=new Fe};je.__name__=["zpp_nape","callbacks","ZPP_OptionType"],je.argument=function(e){return null==e?new x:ze.__instanceof(e,x)?e:(new x).including(e)},je.prototype.outer=null,je.prototype.handler=null,je.prototype.includes=null,je.prototype.excludes=null,je.prototype.wrap_includes=null,je.prototype.wrap_excludes=null,je.prototype.setup_includes=function(){this.wrap_includes=Tn.get(this.includes,!0)},je.prototype.setup_excludes=function(){this.wrap_excludes=Tn.get(this.excludes,!0)},je.prototype.excluded=function(e){return this.nonemptyintersection(e,this.excludes)},je.prototype.included=function(e){return this.nonemptyintersection(e,this.includes)},je.prototype.compatible=function(e){return!!this.nonemptyintersection(e,this.includes)&&!this.nonemptyintersection(e,this.excludes)},je.prototype.nonemptyintersection=function(e,t){for(var i=!1,n=e.head,r=t.head;null!=r&&null!=n;){var o=r.elt,a=n.elt;if(o==a){i=!0;break}o.id<a.id?r=r.next:n=n.next}return i},je.prototype.effect_change=function(e,t,i){if(t)if(i){for(var n=null,r=this.includes.head;null!=r&&!(e.id<r.elt.id);)r=(n=r).next;var o,a=this.includes;null==ji.zpp_pool?o=new ji:(o=ji.zpp_pool,ji.zpp_pool=o.next,o.next=null),o.elt=e;var s=o;null==n?(s.next=a.head,a.head=s):(s.next=n.next,n.next=s),a.pushmod=a.modified=!0,a.length++}else this.includes.remove(e);else if(i){for(var l=null,p=this.excludes.head;null!=p&&!(e.id<p.elt.id);)p=(l=p).next;var h,u=this.excludes;null==ji.zpp_pool?h=new ji:(h=ji.zpp_pool,ji.zpp_pool=h.next,h.next=null),h.elt=e;var c=h;null==l?(c.next=u.head,u.head=c):(c.next=l.next,l.next=c),u.pushmod=u.modified=!0,u.length++}else this.excludes.remove(e)},je.prototype.append_type=function(e,t){if(e==this.includes){if(!this.includes.has(t))if(this.excludes.has(t))null!=this.handler?this.handler(t,!1,!1):this.excludes.remove(t);else if(null!=this.handler)this.handler(t,!0,!0);else{for(var i=null,n=this.includes.head;null!=n&&!(t.id<n.elt.id);)n=(i=n).next;var r,o=this.includes;null==ji.zpp_pool?r=new ji:(r=ji.zpp_pool,ji.zpp_pool=r.next,r.next=null),r.elt=t;var a=r;null==i?(a.next=o.head,o.head=a):(a.next=i.next,i.next=a),o.pushmod=o.modified=!0,o.length++}}else if(!this.excludes.has(t))if(this.includes.has(t))null!=this.handler?this.handler(t,!0,!1):this.includes.remove(t);else if(null!=this.handler)this.handler(t,!1,!0);else{for(var s=null,l=this.excludes.head;null!=l&&!(t.id<l.elt.id);)l=(s=l).next;var p,h=this.excludes;null==ji.zpp_pool?p=new ji:(p=ji.zpp_pool,ji.zpp_pool=p.next,p.next=null),p.elt=t;var u=p;null==s?(u.next=h.head,h.head=u):(u.next=s.next,s.next=u),h.pushmod=h.modified=!0,h.length++}},je.prototype.set=function(e){if(e!=this){for(;null!=this.includes.head;)this.append_type(this.excludes,this.includes.head.elt);for(;null!=this.excludes.head;)this.append_type(this.includes,this.excludes.head.elt);for(var t=e.excludes.head;null!=t;)this.append_type(this.excludes,t.elt),t=t.next;for(var i=e.includes.head;null!=i;)this.append_type(this.includes,i.elt),i=i.next}return this},je.prototype.append=function(e,t){if(ze.__instanceof(t,y)){var i=t;this.append_type(e,i.zpp_inner)}else if(ze.__instanceof(t,m)){var n=t;n.zpp_inner.valmod();for(var r=Ve.get(n);;){r.zpp_inner.zpp_inner.valmod();var o=r.zpp_inner;o.zpp_inner.valmod(),o.zpp_inner.zip_length&&(o.zpp_inner.zip_length=!1,o.zpp_inner.user_length=o.zpp_inner.inner.length);var a,s=o.zpp_inner.user_length;if(r.zpp_critical=!0,r.zpp_i<s?a=!0:(r.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=r).zpp_inner=null,a=!1),!a)break;r.zpp_critical=!1,this.append_type(e,r.zpp_inner.at(r.zpp_i++).zpp_inner)}}else if(t instanceof Array&&null==t.__enum__)for(var l=t,p=0;p<l.length;){var h=l[p];++p;var u=h;this.append_type(e,u.zpp_inner)}},je.prototype.__class__=je;var Ne=zpp_nape.constraint.ZPP_Constraint=function(){this.pre_dt=0,this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.__velocity=!1,this.ignore=!1,this.component=null,this.removeOnBreak=!1,this.breakUnderError=!1,this.breakUnderForce=!1,this.maxError=0,this.maxForce=0,this.damping=0,this.frequency=0,this.stiff=!1,this.active=!1,this.space=null,this.compound=null,this.userData=null,this.id=0,this.outer=null,this.__velocity=!1,this.id=ke.Constraint(),this.stiff=!0,this.active=!0,this.ignore=!1,this.frequency=10,this.damping=1,this.maxForce=1/0,this.maxError=1/0,this.breakUnderForce=!1,this.removeOnBreak=!0,this.pre_dt=-1,this.cbTypes=new Fe};Ne.__name__=["zpp_nape","constraint","ZPP_Constraint"],Ne.prototype.outer=null,Ne.prototype.clear=function(){},Ne.prototype.id=null,Ne.prototype.userData=null,Ne.prototype.compound=null,Ne.prototype.space=null,Ne.prototype.active=null,Ne.prototype.stiff=null,Ne.prototype.frequency=null,Ne.prototype.damping=null,Ne.prototype.maxForce=null,Ne.prototype.maxError=null,Ne.prototype.breakUnderForce=null,Ne.prototype.breakUnderError=null,Ne.prototype.removeOnBreak=null,Ne.prototype.component=null,Ne.prototype.ignore=null,Ne.prototype.__velocity=null,Ne.prototype.immutable_midstep=function(e){},Ne.prototype.cbTypes=null,Ne.prototype.cbSet=null,Ne.prototype.wrap_cbTypes=null,Ne.prototype.setupcbTypes=function(){this.wrap_cbTypes=Tn.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0},Ne.prototype.wrap_cbTypes_subber=function(e){var t=e.zpp_inner;this.cbTypes.has(t)&&(null!=this.space&&(this.dealloc_cbSet(),t.constraints.remove(this)),this.cbTypes.remove(t),null!=this.space&&(this.alloc_cbSet(),this.wake()))},Ne.prototype.wrap_cbTypes_adder=function(e){return this.insert_cbtype(e.zpp_inner),!1},Ne.prototype.insert_cbtype=function(e){if(!this.cbTypes.has(e)){null!=this.space&&(this.dealloc_cbSet(),e.constraints.add(this));for(var t=null,i=this.cbTypes.head;null!=i&&!(e.id<i.elt.id);)i=(t=i).next;var n,r=this.cbTypes;null==ji.zpp_pool?n=new ji:(n=ji.zpp_pool,ji.zpp_pool=n.next,n.next=null),n.elt=e;var o=n;null==t?(o.next=r.head,r.head=o):(o.next=t.next,t.next=o),r.pushmod=r.modified=!0,r.length++,null!=this.space&&(this.alloc_cbSet(),this.wake())}},Ne.prototype.alloc_cbSet=function(){null!=(this.cbSet=this.space.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.constraints.add(this))},Ne.prototype.dealloc_cbSet=function(){if(null!=this.cbSet){if(this.cbSet.constraints.remove(this),0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var e=this.cbSet;for(e.listeners.clear(),e.zip_listeners=!0,e.bodylisteners.clear(),e.zip_bodylisteners=!0,e.conlisteners.clear(),e.zip_conlisteners=!0;null!=e.cbTypes.head;)e.cbTypes.pop_unsafe().cbsets.remove(e);e.next=jo.zpp_pool,jo.zpp_pool=e}this.cbSet=null}},Ne.prototype.activate=function(){null!=this.space&&this.activeInSpace()},Ne.prototype.deactivate=function(){null!=this.space&&this.inactiveOrOutSpace()},Ne.prototype.addedToSpace=function(){this.active&&this.activeInSpace(),this.activeBodies();for(var e=this.cbTypes.head;null!=e;)e.elt.constraints.add(this),e=e.next},Ne.prototype.removedFromSpace=function(){this.active&&this.inactiveOrOutSpace(),this.inactiveBodies();for(var e=this.cbTypes.head;null!=e;)e.elt.constraints.remove(this),e=e.next},Ne.prototype.activeInSpace=function(){this.alloc_cbSet(),null==oi.zpp_pool?this.component=new oi:(this.component=oi.zpp_pool,oi.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!1,this.component.constraint=this},Ne.prototype.inactiveOrOutSpace=function(){this.dealloc_cbSet();var e=this.component;e.body=null,e.constraint=null,e.next=oi.zpp_pool,oi.zpp_pool=e,this.component=null},Ne.prototype.activeBodies=function(){},Ne.prototype.inactiveBodies=function(){},Ne.prototype.clearcache=function(){},Ne.prototype.validate=function(){},Ne.prototype.wake_connected=function(){},Ne.prototype.forest=function(){},Ne.prototype.pair_exists=function(e,t){return!1},Ne.prototype.broken=function(){},Ne.prototype.warmStart=function(){},Ne.prototype.pre_dt=null,Ne.prototype.preStep=function(e){return!1},Ne.prototype.applyImpulseVel=function(){return!1},Ne.prototype.applyImpulsePos=function(){return!1},Ne.prototype.wake=function(){null!=this.space&&this.space.wake_constraint(this)},Ne.prototype.draw=function(e){},Ne.prototype.copy=function(e,t){return null},Ne.prototype.copyto=function(e){var t=this.outer;null==t.zpp_inner.wrap_cbTypes&&t.zpp_inner.setupcbTypes();var i=t.zpp_inner.wrap_cbTypes;i.zpp_inner.valmod();for(var n=Ve.get(i);;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var o,a=r.zpp_inner.user_length;if(n.zpp_critical=!0,n.zpp_i<a?o=!0:(n.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=n).zpp_inner=null,o=!1),!o)break;n.zpp_critical=!1;var s=n.zpp_inner.at(n.zpp_i++);null==e.zpp_inner.wrap_cbTypes&&e.zpp_inner.setupcbTypes();var l=e.zpp_inner.wrap_cbTypes;l.zpp_inner.reverse_flag?l.push(s):l.unshift(s)}e.zpp_inner.removeOnBreak=t.zpp_inner.removeOnBreak;var p=t.zpp_inner.breakUnderError;e.zpp_inner.breakUnderError!=p&&(e.zpp_inner.breakUnderError=p,e.zpp_inner.wake());var h=t.zpp_inner.breakUnderForce;e.zpp_inner.breakUnderForce!=h&&(e.zpp_inner.breakUnderForce=h,e.zpp_inner.wake());var u=t.zpp_inner.maxError;e.zpp_inner.maxError!=u&&(e.zpp_inner.maxError=u,e.zpp_inner.wake());var c=t.zpp_inner.maxForce;e.zpp_inner.maxForce!=c&&(e.zpp_inner.maxForce=c,e.zpp_inner.wake());var d=t.zpp_inner.damping;e.zpp_inner.damping!=d&&(e.zpp_inner.damping=d,e.zpp_inner.stiff||e.zpp_inner.wake());var _=t.zpp_inner.frequency;e.zpp_inner.frequency!=_&&(e.zpp_inner.frequency=_,e.zpp_inner.stiff||e.zpp_inner.wake());var y=t.zpp_inner.stiff;e.zpp_inner.stiff!=y&&(e.zpp_inner.stiff=y,e.zpp_inner.wake());var m=t.zpp_inner.ignore;e.zpp_inner.ignore!=m&&(e.zpp_inner.ignore=m,e.zpp_inner.wake());var f=t.zpp_inner.active;e.zpp_inner.active!=f&&(null!=e.zpp_inner.component&&(e.zpp_inner.component.woken=!1),e.zpp_inner.clearcache(),f?(e.zpp_inner.active=f,e.zpp_inner.activate(),null!=e.zpp_inner.space&&(null!=e.zpp_inner.component&&(e.zpp_inner.component.sleeping=!0),e.zpp_inner.space.wake_constraint(e.zpp_inner,!0))):(null!=e.zpp_inner.space&&(e.zpp_inner.wake(),e.zpp_inner.space.live_constraints.remove(e.zpp_inner)),e.zpp_inner.active=f,e.zpp_inner.deactivate()))},Ne.prototype.__class__=Ne;var Ue=zpp_nape.constraint.ZPP_AngleJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.scale=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=0,this.outer_zn=null,Ne.call(this),this.ratio=1,this.jAcc=0,this.slack=!1,this.jMax=1/0,this.stepped=!1};Ue.__name__=["zpp_nape","constraint","ZPP_AngleJoint"],Ue.__super__=Ne,Ue.prototype=Object.create(Ne.prototype),Ue.prototype.outer_zn=null,Ue.prototype.ratio=null,Ue.prototype.jointMin=null,Ue.prototype.jointMax=null,Ue.prototype.slack=null,Ue.prototype.equal=null,Ue.prototype.scale=null,Ue.prototype.is_slack=function(){var e,t=this.ratio*this.b2.rot-this.b1.rot;return this.equal?(e=!1,this.scale=1):t<this.jointMin?e=!(this.scale=-1):t>this.jointMax?(t-=this.jointMax,e=!(this.scale=1)):e=!(t=this.scale=0),e},Ue.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(0,0,-this.scale*this.jAcc):Z.get(0,0,this.ratio*this.scale*this.jAcc):Z.get(0,0,0)},Ue.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},Ue.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},Ue.prototype.b1=null,Ue.prototype.b2=null,Ue.prototype.kMass=null,Ue.prototype.jAcc=null,Ue.prototype.jMax=null,Ue.prototype.gamma=null,Ue.prototype.bias=null,Ue.prototype.stepped=null,Ue.prototype.copy=function(e,t){var i=new g(null,null,this.jointMin,this.jointMax,this.ratio);if(this.copyto(i),null!=e&&null!=this.b1){for(var n=null,r=0;r<e.length;){var o=e[r];if(++r,o.id==this.b1.id){n=o.bc;break}}null!=n?i.zpp_inner_zn.b1=n.zpp_inner:t.push(rt.todo(this.b1.id,function(e){i.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var a=null,s=0;s<e.length;){var l=e[s];if(++s,l.id==this.b2.id){a=l.bc;break}}null!=a?i.zpp_inner_zn.b2=a.zpp_inner:t.push(rt.todo(this.b2.id,function(e){i.zpp_inner_zn.b2=e.zpp_inner}))}return i},Ue.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: AngleJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: AngleJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},Ue.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},Ue.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},Ue.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},Ue.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1,this.slack=!1},Ue.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax;var i=this.ratio*this.b2.rot-this.b1.rot;this.equal?(i-=this.jointMax,this.slack=!1,this.scale=1):i<this.jointMin?(i=this.jointMin-i,this.scale=-1,this.slack=!1):i>this.jointMax?(i-=this.jointMax,this.scale=1,this.slack=!1):(i=this.scale=0,this.slack=!0);var n=i;if(!this.slack){if(this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&n*n>this.maxError*this.maxError)return!0;var r,o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var a=1/(1+this.gamma);r=e*o*o*this.gamma,this.gamma*=a,this.kMass*=a,this.bias=-n*r,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},Ue.prototype.warmStart=function(){this.slack||(this.b1.angvel-=this.scale*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*this.jAcc)},Ue.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-this.scale*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel))-this.jAcc*this.gamma,t=this.jAcc;return this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),!(!this.breakUnderForce||!(this.jAcc>this.jMax||this.jAcc<-this.jMax))||(this.stiff||(this.jAcc>this.jMax?this.jAcc=this.jMax:this.jAcc<-this.jMax&&(this.jAcc=-this.jMax)),e=this.jAcc-t,this.b1.angvel-=this.scale*this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.scale*this.b2.iinertia*e,!1)},Ue.prototype.applyImpulsePos=function(){var e,t,i,n=this.ratio*this.b2.rot-this.b1.rot;if(this.equal?(n-=this.jointMax,i=!1,this.scale=1):n<this.jointMin?(n=this.jointMin-n,i=!(this.scale=-1)):n>this.jointMax?(n-=this.jointMax,i=!(this.scale=1)):i=!(n=this.scale=0),e=n,!i){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(t=-(e*=.5)*this.kMass,this.equal||t<0){var r=this.b1,o=-this.scale*t*this.b1.iinertia;if(r.rot+=o,1e-4<o*o)r.axisx=Math.sin(r.rot),r.axisy=Math.cos(r.rot);else{var a=o*o,s=1-.5*a,l=1-a*a/8,p=(s*r.axisx+o*r.axisy)*l;r.axisy=(s*r.axisy-o*r.axisx)*l,r.axisx=p}var h=this.b2,u=this.ratio*this.scale*t*this.b2.iinertia;if(h.rot+=u,1e-4<u*u)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var c=u*u,d=1-.5*c,_=1-c*c/8,y=(d*h.axisx+u*h.axisy)*_;h.axisy=(d*h.axisy-u*h.axisx)*_,h.axisx=y}}}return!1},Ue.prototype.draw=function(e){},Ue.prototype.__class__=Ue;var rt=zpp_nape.constraint.ZPP_CopyHelper=function(){this.cb=null,this.bc=null,this.id=0};rt.__name__=["zpp_nape","constraint","ZPP_CopyHelper"],rt.dict=function(e,t){var i=new rt;return i.id=e,i.bc=t,i},rt.todo=function(e,t){var i=new rt;return i.id=e,i.cb=t,i},rt.prototype.id=null,rt.prototype.bc=null,rt.prototype.cb=null,rt.prototype.__class__=rt;var ot=zpp_nape.constraint.ZPP_DistanceJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx2=0,this.cx1=0,this.ny=0,this.nx=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=0};ot.__name__=["zpp_nape","constraint","ZPP_DistanceJoint"],ot.__super__=Ne,ot.prototype=Object.create(Ne.prototype),ot.prototype.outer_zn=null,ot.prototype.jointMin=null,ot.prototype.jointMax=null,ot.prototype.slack=null,ot.prototype.equal=null,ot.prototype.is_slack=function(){var e;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var t=0,i=0,n=(t=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx))*t+(i=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely))*i;if(n<Qs.epsilon)e=!0;else{var r=1/(n=Math.sqrt(n));t*=r,i*=r,this.equal?e=!1:n<this.jointMin?e=!1:n>this.jointMax?(n-=this.jointMax,e=!1):e=!(n=i=t=0)}return e},ot.prototype.nx=null,ot.prototype.ny=null,ot.prototype.cx1=null,ot.prototype.cx2=null,ot.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(-this.jAcc*this.nx,-this.jAcc*this.ny,-this.cx1*this.jAcc):Z.get(this.jAcc*this.nx,this.jAcc*this.ny,this.cx2*this.jAcc):Z.get(0,0,0)},ot.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},ot.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},ot.prototype.b1=null,ot.prototype.a1localx=null,ot.prototype.a1localy=null,ot.prototype.a1relx=null,ot.prototype.a1rely=null,ot.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},ot.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},ot.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},ot.prototype.wrap_a1=null,ot.prototype.b2=null,ot.prototype.a2localx=null,ot.prototype.a2localy=null,ot.prototype.a2relx=null,ot.prototype.a2rely=null,ot.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},ot.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},ot.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},ot.prototype.wrap_a2=null,ot.prototype.kMass=null,ot.prototype.jAcc=null,ot.prototype.jMax=null,ot.prototype.gamma=null,ot.prototype.bias=null,ot.prototype.stepped=null,ot.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new w(null,null,n,r.zpp_inner_zn.wrap_a2,this.jointMin,this.jointMax);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var l=e[s];if(++s,l.id==this.b1.id){a=l.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var p=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){p=u.bc;break}}null!=p?o.zpp_inner_zn.b2=p.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},ot.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: DistanceJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: DistanceJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},ot.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},ot.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},ot.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},ot.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},ot.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.nx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.ny=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely);var i=this.nx*this.nx+this.ny*this.ny;if(i<Qs.epsilon)this.nx=0,i=this.ny=0,this.slack=!0;else{var n=1/(i=Math.sqrt(i));this.nx*=n,this.ny*=n,this.equal?(i-=this.jointMax,this.slack=!1):i<this.jointMin?(i=this.jointMin-i,this.nx=-this.nx,this.ny=-this.ny,this.slack=!1):i>this.jointMax?(i-=this.jointMax,this.slack=!1):(this.nx=0,i=this.ny=0,this.slack=!0)}var r=i;if(!this.slack){if(this.cx1=this.ny*this.a1relx-this.nx*this.a1rely,this.cx2=this.ny*this.a2relx-this.nx*this.a2rely,this.kMass=this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&r*r>this.maxError*this.maxError)return!0;var o,a=2*Math.PI*this.frequency;this.gamma=1/(e*a*(2*this.damping+a*e));var s=1/(1+this.gamma);o=e*a*a*this.gamma,this.gamma*=s,this.kMass*=s,this.bias=-r*o,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},ot.prototype.warmStart=function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.nx*e,this.b1.vely-=this.ny*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.nx*t,this.b2.vely+=this.ny*t,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc}},ot.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-(this.nx*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.ny*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1))-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.nx*i,this.b1.vely-=this.ny*i;var n=this.b2.imass*e;return this.b2.velx+=this.nx*n,this.b2.vely+=this.ny*n,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,!1},ot.prototype.applyImpulsePos=function(){var e,t,i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o,a;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var s=0,l=0,p=(s=this.b2.posx+r-(this.b1.posx+i))*s+(l=this.b2.posy+o-(this.b1.posy+n))*l;if(p<Qs.epsilon)a=!(p=l=s=0);else{var h=1/(p=Math.sqrt(p));s*=h,l*=h,this.equal?(p-=this.jointMax,a=!1):p<this.jointMin?(p=this.jointMin-p,s=-s,l=-l,a=!1):p>this.jointMax?(p-=this.jointMax,a=!1):a=!(p=l=s=0)}if(e=p,!a){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(e*e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;if(6<(e*=.5)*e){var u=this.b1.smass+this.b2.smass;if(u>Qs.epsilon&&(t=-e*(u=.75/u),this.equal||t<0)){var c=t*this.b1.imass;this.b1.posx-=s*c,this.b1.posy-=l*c;var d=t*this.b2.imass;this.b2.posx+=s*d,this.b2.posy+=l*d;var _=(s=this.b2.posx+r-(this.b1.posx+i))*s+(l=this.b2.posy+o-(this.b1.posy+n))*l;if(_<Qs.epsilon)_=l=s=0;else{var y=1/(_=Math.sqrt(_));s*=y,l*=y,this.equal?_-=this.jointMax:_<this.jointMin?(_=this.jointMin-_,s=-s,l=-l):_>this.jointMax?_-=this.jointMax:_=l=s=0}e=_,e*=.5}}var m,f;m=l*i-s*n,f=l*r-s*o;var x=this.b1.smass+this.b2.smass+m*m*this.b1.sinertia+f*f*this.b2.sinertia;if(0!=x&&(x=1/x),t=-e*x,this.equal||t<0){var v=this.b1.imass*t;this.b1.posx-=s*v,this.b1.posy-=l*v;var z=this.b2.imass*t;this.b2.posx+=s*z,this.b2.posy+=l*z;var g=this.b1,b=-m*this.b1.iinertia*t;if(g.rot+=b,1e-4<b*b)g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot);else{var w=b*b,S=1-.5*w,C=1-w*w/8,M=(S*g.axisx+b*g.axisy)*C;g.axisy=(S*g.axisy-b*g.axisx)*C,g.axisx=M}var P=this.b2,k=f*this.b2.iinertia*t;if(P.rot+=k,1e-4<k*k)P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot);else{var T=k*k,O=1-.5*T,A=1-T*T/8,E=(O*P.axisx+k*P.axisy)*A;P.axisy=(O*P.axisy-k*P.axisx)*A,P.axisx=E}}}return!1},ot.prototype.draw=function(e){},ot.prototype.__class__=ot;var at=zpp_nape.constraint.ZPP_LineJoint=function(){this.biasy=0,this.biasx=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_n=null,this.nrely=0,this.nrelx=0,this.nlocaly=0,this.nlocalx=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.cx2=0,this.cx1=0,this.dot2=0,this.dot1=0,this.equal=!1,this.jointMax=0,this.jointMin=0,this.scale=0,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.nlocalx=0,this.nlocaly=0,this.nrelx=0,this.nrely=0,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.jointMin=-1/0,this.jointMax=1/0,this.stepped=!1};at.__name__=["zpp_nape","constraint","ZPP_LineJoint"],at.__super__=Ne,at.prototype=Object.create(Ne.prototype),at.prototype.outer_zn=null,at.prototype.scale=null,at.prototype.jointMin=null,at.prototype.jointMax=null,at.prototype.equal=null,at.prototype.dot1=null,at.prototype.dot2=null,at.prototype.cx1=null,at.prototype.cx2=null,at.prototype.bodyImpulse=function(e){if(this.stepped){var t=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,i=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy;return e==this.b1?Z.get(-t,-i,this.scale*this.cx1*i-this.dot1*t):Z.get(t,i,this.scale*this.cx1*i-this.dot1*t)}return Z.get(0,0,0)},at.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},at.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},at.prototype.b1=null,at.prototype.a1localx=null,at.prototype.a1localy=null,at.prototype.a1relx=null,at.prototype.a1rely=null,at.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},at.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},at.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},at.prototype.wrap_a1=null,at.prototype.b2=null,at.prototype.a2localx=null,at.prototype.a2localy=null,at.prototype.a2relx=null,at.prototype.a2rely=null,at.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},at.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},at.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},at.prototype.wrap_a2=null,at.prototype.zip_n=null,at.prototype.nlocalx=null,at.prototype.nlocaly=null,at.prototype.nrelx=null,at.prototype.nrely=null,at.prototype.validate_n=function(){this.wrap_n.zpp_inner.x=this.nlocalx,this.wrap_n.zpp_inner.y=this.nlocaly},at.prototype.invalidate_n=function(e){this.immutable_midstep("Constraint::n"),this.nlocalx=e.x,this.nlocaly=e.y,this.zip_n=!0,this.wake()},at.prototype.setup_n=function(){var e,t=this.nlocalx,i=this.nlocaly;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_n=e,this.wrap_n.zpp_inner._inuse=!0,this.wrap_n.zpp_inner._validate=$(this,this.validate_n),this.wrap_n.zpp_inner._invalidate=$(this,this.invalidate_n)},at.prototype.wrap_n=null,at.prototype.validate_norm=function(){if(this.zip_n){this.zip_n=!1;var e=1/Math.sqrt(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly);this.nlocalx*=e,this.nlocaly*=e}},at.prototype.kMassa=null,at.prototype.kMassb=null,at.prototype.kMassc=null,at.prototype.jAccx=null,at.prototype.jAccy=null,at.prototype.jMax=null,at.prototype.gamma=null,at.prototype.biasx=null,at.prototype.biasy=null,at.prototype.stepped=null,at.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=r.zpp_inner_zn.wrap_a2,a=this.outer_zn;null==a.zpp_inner_zn.wrap_n&&a.zpp_inner_zn.setup_n();var s=new S(null,null,n,o,a.zpp_inner_zn.wrap_n,this.jointMin,this.jointMax);if(this.copyto(s),null!=e&&null!=this.b1){for(var l=null,p=0;p<e.length;){var h=e[p];if(++p,h.id==this.b1.id){l=h.bc;break}}null!=l?s.zpp_inner_zn.b1=l.zpp_inner:t.push(rt.todo(this.b1.id,function(e){s.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var u=null,c=0;c<e.length;){var d=e[c];if(++c,d.id==this.b2.id){u=d.bc;break}}null!=u?s.zpp_inner_zn.b2=u.zpp_inner:t.push(rt.todo(this.b2.id,function(e){s.zpp_inner_zn.b2=e.zpp_inner}))}return s},at.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: DistanceJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: DistanceJoint must have jointMin <= jointMax");if(this.nlocalx*this.nlocalx+this.nlocaly*this.nlocaly<Qs.epsilon)throw new r("Error: DistanceJoint direction must be non-degenerate");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},at.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},at.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},at.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},at.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},at.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.equal=this.jointMin==this.jointMax,this.stepped=!0,this.validate_norm(),this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.nrelx=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,this.nrely=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i,n,r,o=0;i=this.b2.posx+this.a2relx-this.b1.posx-this.a1relx,r=(n=this.b2.posy+this.a2rely-this.b1.posy-this.a1rely)*this.nrelx-i*this.nrely,o=this.nrelx*i+this.nrely*n,this.equal?(o-=this.jointMin,this.scale=1):o>this.jointMax?(o-=this.jointMax,this.scale=1):o<this.jointMin?(o=this.jointMin-o,this.scale=-1):(o=0,this.scale=0);var a,s;a=i+this.a1relx,s=n+this.a1rely,this.dot1=this.nrelx*a+this.nrely*s,this.cx1=s*this.nrelx-a*this.nrely,this.dot2=this.nrelx*this.a2relx+this.nrely*this.a2rely,this.cx2=this.a2rely*this.nrelx-this.a2relx*this.nrely,this.kMassa=this.b1.smass+this.b2.smass+this.dot1*this.dot1*this.b1.sinertia+this.dot2*this.dot2*this.b2.sinertia,this.kMassb=-this.scale*(this.dot1*this.cx1*this.b1.sinertia+this.dot2*this.cx2*this.b2.sinertia),this.kMassc=this.scale*this.scale*(this.b1.smass+this.b2.smass+this.cx1*this.cx1*this.b1.sinertia+this.cx2*this.cx2*this.b2.sinertia);var l,p=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(p!=p)this.kMassa=this.kMassb=this.kMassc=0,l=3;else if(0==p){var h=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,h=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,h|=2),this.kMassb=0,l=h}else{p=1/p;var u=this.kMassc*p;this.kMassc=this.kMassa*p,this.kMassa=u,this.kMassb*=-p,l=0}if(0!=(1&l)&&(this.jAccx=0),0!=(2&l)&&(this.jAccy=0),this.stiff)this.gamma=0,this.biasx=0,this.biasy=0;else{if(this.breakUnderError&&r*r+o*o>this.maxError*this.maxError)return!0;var c,d=2*Math.PI*this.frequency;this.gamma=1/(e*d*(2*this.damping+d*e));var _=1/(1+this.gamma);c=e*d*d*this.gamma,this.gamma*=_,this.kMassa*=_,this.kMassb*=_,this.kMassc*=_,this.biasx=r,this.biasy=o;var y=-c;this.biasx*=y,this.biasy*=y;var m=this.maxError,f=this.biasx*this.biasx+this.biasy*this.biasy;if(m*m<f){var x=m*(1/Math.sqrt(f));this.biasx*=x,this.biasy*=x}}return this.jAccx*=t,this.jAccy*=t,this.jMax=this.maxForce*e,!1},at.prototype.warmStart=function(){var e=this.scale*this.nrelx*this.jAccy-this.nrely*this.jAccx,t=this.nrelx*this.jAccx+this.scale*this.nrely*this.jAccy,i=this.b1.imass;this.b1.velx-=e*i,this.b1.vely-=t*i;var n=this.b2.imass;this.b2.velx+=e*n,this.b2.vely+=t*n,this.b1.angvel+=(this.scale*this.cx1*this.jAccy-this.dot1*this.jAccx)*this.b1.iinertia,this.b2.angvel+=(this.dot2*this.jAccx-this.scale*this.cx2*this.jAccy)*this.b2.iinertia},at.prototype.applyImpulseVel=function(){var e,t,i=0,n=0;i=this.b2.velx-this.b1.velx,n=this.b2.vely-this.b1.vely,i+=this.b2.kinvelx-this.b1.kinvelx,e=(n+=this.b2.kinvely-this.b1.kinvely)*this.nrelx-i*this.nrely+(this.b2.angvel+this.b2.kinangvel)*this.dot2-(this.b1.angvel+this.b1.kinangvel)*this.dot1,t=this.scale*(this.nrelx*i+this.nrely*n-(this.b2.angvel+this.b2.kinangvel)*this.cx2+(this.b1.angvel+this.b1.kinangvel)*this.cx1);var r=0,o=0;r=this.biasx-e,o=this.biasy-t;var a=this.kMassa*r+this.kMassb*o;o=this.kMassb*r+this.kMassc*o,r=a;var s=this.gamma;r-=this.jAccx*s,o-=this.jAccy*s;var l,p;if(l=this.jAccx,p=this.jAccy,this.jAccx+=r,this.jAccy+=o,0<this.jAccy&&(this.jAccy=0),this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var h=this.jMax,u=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(h*h<u){var c=h*(1/Math.sqrt(u));this.jAccx*=c,this.jAccy*=c}}r=this.jAccx-l,o=this.jAccy-p;var d=this.scale*this.nrelx*o-this.nrely*r,_=this.nrelx*r+this.scale*this.nrely*o,y=this.b1.imass;this.b1.velx-=d*y,this.b1.vely-=_*y;var m=this.b2.imass;return this.b2.velx+=d*m,this.b2.vely+=_*m,this.b1.angvel+=(this.scale*this.cx1*o-this.dot1*r)*this.b1.iinertia,this.b2.angvel+=(this.dot2*r-this.scale*this.cx2*o)*this.b2.iinertia,!1},at.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.nlocalx-this.b1.axisx*this.nlocaly,t=this.nlocalx*this.b1.axisx+this.nlocaly*this.b1.axisy;var i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var a,s=0,l=0,p=0,h=0;if(s=this.b2.posx+r-this.b1.posx-i,p=(l=this.b2.posy+o-this.b1.posy-n)*e-s*t,h=e*s+t*l,this.equal?(h-=this.jointMin,a=1):h>this.jointMax?(h-=this.jointMax,a=1):h<this.jointMin?(h=this.jointMin-h,a=-1):a=h=0,this.breakUnderError&&p*p+h*h>this.maxError*this.maxError)return!0;if(p*p+h*h<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;var u,c,d,_,y=0,m=0;if(6<(p*=.5)*p+(h*=.5)*h){var f=this.b1.smass+this.b2.smass;if(f>Qs.epsilon){var x=(f=.8/f)*(t*p-a*e*h),v=f*(e*p*a-t*p),z=this.b1.imass;this.b1.posx-=x*z,this.b1.posy-=v*z;var g=this.b2.imass;this.b2.posx+=x*g,this.b2.posy+=v*g,s=this.b2.posx+r-this.b1.posx-i,p=(l=this.b2.posy+o-this.b1.posy-n)*e-s*t,h=e*s+t*l,this.equal?(h-=this.jointMin,a=1):h>this.jointMax?(h-=this.jointMax,a=1):h<this.jointMin?(h=this.jointMin-h,a=-1):a=h=0,p*=.5,h*=.5}}var b,w,S,C,M;u=e*(C=s+i)+t*(M=l+n),d=M*e-C*t,c=e*r+t*o,_=o*e-r*t,b=this.b1.smass+this.b2.smass+u*u*this.b1.sinertia+c*c*this.b2.sinertia,w=-a*(u*d*this.b1.sinertia+c*_*this.b2.sinertia),y=-p,m=-h;var P=b*(S=a*a*(this.b1.smass+this.b2.smass+d*d*this.b1.sinertia+_*_*this.b2.sinertia))-w*w;if(P!=P)y=m=0;else if(0==P)0!=b?y/=b:y=0,0!=S?m/=S:m=0;else{var k=(P=1/P)*(S*y-w*m);m=P*(b*m-w*y),y=k}0<m&&(m=0);var T=a*e*m-t*y,O=e*y+a*t*m,A=this.b1.imass;this.b1.posx-=T*A,this.b1.posy-=O*A;var E=this.b2.imass;this.b2.posx+=T*E,this.b2.posy+=O*E;var G=this.b1,I=(a*d*m-u*y)*this.b1.iinertia;if(G.rot+=I,1e-4<I*I)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var B=I*I,L=1-.5*B,D=1-B*B/8,R=(L*G.axisx+I*G.axisy)*D;G.axisy=(L*G.axisy-I*G.axisx)*D,G.axisx=R}var F=this.b2,j=(c*y-a*_*m)*this.b2.iinertia;if(F.rot+=j,1e-4<j*j)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{var N=j*j,U=1-.5*N,V=1-N*N/8,H=(U*F.axisx+j*F.axisy)*V;F.axisy=(U*F.axisy-j*F.axisx)*V,F.axisx=H}return!1},at.prototype.draw=function(e){},at.prototype.__class__=at;var st=zpp_nape.constraint.ZPP_MotorJoint=function(){this.stepped=!1,this.jMax=0,this.jAcc=0,this.kMass=0,this.b2=null,this.b1=null,this.rate=0,this.ratio=0,this.outer_zn=null,Ne.call(this),this.jAcc=0,this.stepped=!1,this.__velocity=!0};st.__name__=["zpp_nape","constraint","ZPP_MotorJoint"],st.__super__=Ne,st.prototype=Object.create(Ne.prototype),st.prototype.outer_zn=null,st.prototype.ratio=null,st.prototype.rate=null,st.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(0,0,-this.jAcc):Z.get(0,0,this.ratio*this.jAcc):Z.get(0,0,0)},st.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},st.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},st.prototype.b1=null,st.prototype.b2=null,st.prototype.kMass=null,st.prototype.jAcc=null,st.prototype.jMax=null,st.prototype.stepped=null,st.prototype.copy=function(e,t){var i=new M(null,null,this.rate,this.ratio);if(this.copyto(i),null!=e&&null!=this.b1){for(var n=null,r=0;r<e.length;){var o=e[r];if(++r,o.id==this.b1.id){n=o.bc;break}}null!=n?i.zpp_inner_zn.b1=n.zpp_inner:t.push(rt.todo(this.b1.id,function(e){i.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var a=null,s=0;s<e.length;){var l=e[s];if(++s,l.id==this.b2.id){a=l.bc;break}}null!=a?i.zpp_inner_zn.b2=a.zpp_inner:t.push(rt.todo(this.b2.id,function(e){i.zpp_inner_zn.b2=e.zpp_inner}))}return i},st.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: MotorJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},st.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},st.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},st.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},st.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},st.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;return this.pre_dt=e,this.stepped=!0,this.kMass=this.b1.sinertia+this.ratio*this.ratio*this.b2.sinertia,this.kMass=1/this.kMass,this.jAcc*=t,this.jMax=this.maxForce*e,!1},st.prototype.warmStart=function(){this.b1.angvel-=this.b1.iinertia*this.jAcc,this.b2.angvel+=this.ratio*this.b2.iinertia*this.jAcc},st.prototype.applyImpulseVel=function(){var e=-this.kMass*(this.ratio*(this.b2.angvel+this.b2.kinangvel)-this.b1.angvel-this.b1.kinangvel-this.rate),t=this.jAcc;if(this.jAcc+=e,this.breakUnderForce){if(this.jAcc>this.jMax||this.jAcc<-this.jMax)return!0}else this.jAcc<-this.jMax?this.jAcc=-this.jMax:this.jAcc>this.jMax&&(this.jAcc=this.jMax);return e=this.jAcc-t,this.b1.angvel-=this.b1.iinertia*e,this.b2.angvel+=this.ratio*this.b2.iinertia*e,!1},st.prototype.applyImpulsePos=function(){return!1},st.prototype.__class__=st;var lt=zpp_nape.constraint.ZPP_PivotJoint=function(){this.stepped=!1,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccy=0,this.jAccx=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,Ne.call(this),this.stepped=!1,this.jAccx=0,this.jAccy=0,this.jMax=1/0,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};lt.__name__=["zpp_nape","constraint","ZPP_PivotJoint"],lt.__super__=Ne,lt.prototype=Object.create(Ne.prototype),lt.prototype.outer_zn=null,lt.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely)):Z.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely):Z.get(0,0,0)},lt.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},lt.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},lt.prototype.b1=null,lt.prototype.a1localx=null,lt.prototype.a1localy=null,lt.prototype.a1relx=null,lt.prototype.a1rely=null,lt.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},lt.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},lt.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},lt.prototype.wrap_a1=null,lt.prototype.b2=null,lt.prototype.a2localx=null,lt.prototype.a2localy=null,lt.prototype.a2relx=null,lt.prototype.a2rely=null,lt.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},lt.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},lt.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},lt.prototype.wrap_a2=null,lt.prototype.kMassa=null,lt.prototype.kMassb=null,lt.prototype.kMassc=null,lt.prototype.jAccx=null,lt.prototype.jAccy=null,lt.prototype.jMax=null,lt.prototype.gamma=null,lt.prototype.biasx=null,lt.prototype.biasy=null,lt.prototype.stepped=null,lt.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new P(null,null,n,r.zpp_inner_zn.wrap_a2);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var l=e[s];if(++s,l.id==this.b1.id){a=l.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var p=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){p=u.bc;break}}null!=p?o.zpp_inner_zn.b2=p.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},lt.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: PivotJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: PivotJoint cannot be simulated with body1 == body2 (body1=body2="+this.b1.outer.toString()+")");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic (body1="+this.b1.outer.toString()+", body2="+this.b2.outer.toString()+")")},lt.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},lt.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},lt.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},lt.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.pre_dt=-1},lt.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=this.b1.smass+this.b2.smass;if(this.kMassa=i,this.kMassb=0,this.kMassc=i,0!=this.b1.sinertia){var n=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassc+=n*this.a1relx}if(0!=this.b2.sinertia){var o=this.a2relx*this.b2.sinertia,a=this.a2rely*this.b2.sinertia;this.kMassa+=a*this.a2rely,this.kMassb+=-a*this.a2relx,this.kMassc+=o*this.a2relx}var s,l=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(l!=l)this.kMassa=this.kMassb=this.kMassc=0,s=3;else if(0==l){var p=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,p=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,p|=2),this.kMassb=0,s=p}else{l=1/l;var h=this.kMassc*l;this.kMassc=this.kMassa*l,this.kMassa=h,this.kMassb*=-l,s=0}if(0!=(1&s)&&(this.jAccx=0),0!=(2&s)&&(this.jAccy=0),this.stiff)this.biasx=0,this.biasy=0,this.gamma=0;else{var u,c=2*Math.PI*this.frequency;this.gamma=1/(e*c*(2*this.damping+c*e));var d=1/(1+this.gamma);if(u=e*c*c*this.gamma,this.gamma*=d,this.kMassa*=d,this.kMassb*=d,this.kMassc*=d,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy>this.maxError*this.maxError)return!0;var _=-u;this.biasx*=_,this.biasy*=_;var y=this.maxError,m=this.biasx*this.biasx+this.biasy*this.biasy;if(y*y<m){var f=y*(1/Math.sqrt(m));this.biasx*=f,this.biasy*=f}}return this.jAccx*=t,this.jAccy*=t,this.jMax=this.maxForce*e,!1},lt.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e,this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t,this.b2.vely+=this.jAccy*t,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely)*this.b2.iinertia},lt.prototype.applyImpulseVel=function(){var e,t;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel));var i=0,n=0;i=this.biasx-e,n=this.biasy-t;var r=this.kMassa*i+this.kMassb*n;n=this.kMassb*i+this.kMassc*n,i=r;var o=this.gamma;i-=this.jAccx*o,n-=this.jAccy*o;var a,s;if(a=this.jAccx,s=this.jAccy,this.jAccx+=i,this.jAccy+=n,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy>this.jMax*this.jMax)return!0}else if(!this.stiff){var l=this.jMax,p=this.jAccx*this.jAccx+this.jAccy*this.jAccy;if(l*l<p){var h=l*(1/Math.sqrt(p));this.jAccx*=h,this.jAccy*=h}}i=this.jAccx-a,n=this.jAccy-s;var u=this.b1.imass;this.b1.velx-=i*u,this.b1.vely-=n*u;var c=this.b2.imass;return this.b2.velx+=i*c,this.b2.vely+=n*c,this.b1.angvel-=(n*this.a1relx-i*this.a1rely)*this.b1.iinertia,this.b2.angvel+=(n*this.a2relx-i*this.a2rely)*this.b2.iinertia,!1},lt.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,n;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,n=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,o=0;if(r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),this.breakUnderError&&r*r+o*o>this.maxError*this.maxError)return!0;if(r*r+o*o<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;var a=0,s=0;if(6<(r*=.5)*r+(o*=.5)*o){var l=this.b1.smass+this.b2.smass;if(l>Qs.epsilon){var p=(a=-r*(l=.75/l))*a+(s=-o*l)*s;if(400<p){var h=1/Math.sqrt(p)*20;a*=h,s*=h}var u=this.b1.imass;this.b1.posx-=a*u,this.b1.posy-=s*u;var c=this.b2.imass;this.b2.posx+=a*c,this.b2.posy+=s*c,r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),r*=.5,o*=.5}}var d=0,_=0,y=0,m=this.b1.smass+this.b2.smass;if(y=d=m,(_=0)!=this.b1.sinertia){var f=e*this.b1.sinertia,x=t*this.b1.sinertia;d=m+x*t,_+=-x*e,y=m+f*e}if(0!=this.b2.sinertia){var v=i*this.b2.sinertia,z=n*this.b2.sinertia;d+=z*n,_+=-z*i,y+=v*i}var g=(a=-r)*a+(s=-o)*s;if(36<g){var b=1/Math.sqrt(g)*6;a*=b,s*=b}var w=d*y-_*_;if(w!=w)a=s=0;else if(0==w)0!=d?a/=d:a=0,0!=y?s/=y:s=0;else{var S=(w=1/w)*(y*a-_*s);s=w*(d*s-_*a),a=S}var C=this.b1.imass;this.b1.posx-=a*C,this.b1.posy-=s*C;var M=this.b2.imass;this.b2.posx+=a*M,this.b2.posy+=s*M;var P=this.b1,k=-(s*e-a*t)*this.b1.iinertia;if(P.rot+=k,1e-4<k*k)P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot);else{var T=k*k,O=1-.5*T,A=1-T*T/8,E=(O*P.axisx+k*P.axisy)*A;P.axisy=(O*P.axisy-k*P.axisx)*A,P.axisx=E}var G=this.b2,I=(s*i-a*n)*this.b2.iinertia;if(G.rot+=I,1e-4<I*I)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var B=I*I,L=1-.5*B,D=1-B*B/8,R=(L*G.axisx+I*G.axisy)*D;G.axisy=(L*G.axisy-I*G.axisx)*D,G.axisx=R}return!1},lt.prototype.draw=function(e){},lt.prototype.__class__=lt;var ct=zpp_nape.constraint.ZPP_PulleyJoint=function(){this.stepped=!1,this.bias=0,this.gamma=0,this.jMax=0,this.jAcc=0,this.kMass=0,this.wrap_a4=null,this.a4rely=0,this.a4relx=0,this.a4localy=0,this.a4localx=0,this.b4=null,this.wrap_a3=null,this.a3rely=0,this.a3relx=0,this.a3localy=0,this.a3localx=0,this.b3=null,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.cx4=0,this.cx3=0,this.cx2=0,this.cx1=0,this.n34y=0,this.n34x=0,this.n12y=0,this.n12x=0,this.equal=!1,this.slack=!1,this.jointMax=0,this.jointMin=0,this.ratio=1,this.outer_zn=null,Ne.call(this),this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0,this.a3localx=0,this.a3localy=0,this.a3relx=0,this.a3rely=0,this.a4localx=0,this.a4localy=0,this.a4relx=0,this.a4rely=0,this.n12x=1,this.n12y=0,this.n34x=1,this.n34y=0,this.jAcc=0,this.jMax=1/0,this.stepped=!1,this.cx1=this.cx2=this.cx3=this.cx4=0};ct.__name__=["zpp_nape","constraint","ZPP_PulleyJoint"],ct.__super__=Ne,ct.prototype=Object.create(Ne.prototype),ct.prototype.outer_zn=null,ct.prototype.ratio=null,ct.prototype.jointMin=null,ct.prototype.jointMax=null,ct.prototype.slack=null,ct.prototype.equal=null,ct.prototype.is_slack=function(){var e;this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var t,i,n,r;t=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),i=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),n=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),r=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var o=Math.sqrt(t*t+i*i),a=Math.sqrt(n*n+r*r);0==a&&Math.sqrt(0);var s=o+this.ratio*a;return this.equal?e=!1:s<this.jointMin?e=!1:s>this.jointMax?(s-=this.jointMax,e=!1):e=!(s=0),e},ct.prototype.n12x=null,ct.prototype.n12y=null,ct.prototype.n34x=null,ct.prototype.n34y=null,ct.prototype.cx1=null,ct.prototype.cx2=null,ct.prototype.cx3=null,ct.prototype.cx4=null,ct.prototype.bodyImpulse=function(e){if(this.stepped){var t=Z.get();if(e==this.b1){var i=t.zpp_inner;null!=i._validate&&i._validate(),t.zpp_inner.x=t.zpp_inner.x-this.jAcc*this.n12x;var n=t.zpp_inner;null!=n._validate&&n._validate();var r=t.zpp_inner;null!=r._validate&&r._validate(),t.zpp_inner.y=t.zpp_inner.y-this.jAcc*this.n12y;var o=t.zpp_inner;null!=o._validate&&o._validate();var a=t.zpp_inner;null!=a._validate&&a._validate(),t.zpp_inner.z=t.zpp_inner.z-this.cx1*this.jAcc;var s=t.zpp_inner;null!=s._validate&&s._validate()}if(e==this.b2){var l=t.zpp_inner;null!=l._validate&&l._validate(),t.zpp_inner.x=t.zpp_inner.x+this.jAcc*this.n12x;var p=t.zpp_inner;null!=p._validate&&p._validate();var h=t.zpp_inner;null!=h._validate&&h._validate(),t.zpp_inner.y=t.zpp_inner.y+this.jAcc*this.n12y;var u=t.zpp_inner;null!=u._validate&&u._validate();var c=t.zpp_inner;null!=c._validate&&c._validate(),t.zpp_inner.z=t.zpp_inner.z+this.cx2*this.jAcc;var d=t.zpp_inner;null!=d._validate&&d._validate()}if(e==this.b3){var _=t.zpp_inner;null!=_._validate&&_._validate(),t.zpp_inner.x=t.zpp_inner.x-this.jAcc*this.n34x;var y=t.zpp_inner;null!=y._validate&&y._validate();var m=t.zpp_inner;null!=m._validate&&m._validate(),t.zpp_inner.y=t.zpp_inner.y-this.jAcc*this.n34y;var f=t.zpp_inner;null!=f._validate&&f._validate();var x=t.zpp_inner;null!=x._validate&&x._validate(),t.zpp_inner.z=t.zpp_inner.z-this.cx3*this.jAcc;var v=t.zpp_inner;null!=v._validate&&v._validate()}if(e==this.b4){var z=t.zpp_inner;null!=z._validate&&z._validate(),t.zpp_inner.x=t.zpp_inner.x+this.jAcc*this.n34x;var g=t.zpp_inner;null!=g._validate&&g._validate();var b=t.zpp_inner;null!=b._validate&&b._validate(),t.zpp_inner.y=t.zpp_inner.y+this.jAcc*this.n34y;var w=t.zpp_inner;null!=w._validate&&w._validate();var S=t.zpp_inner;null!=S._validate&&S._validate(),t.zpp_inner.z=t.zpp_inner.z+this.cx4*this.jAcc;var C=t.zpp_inner;null!=C._validate&&C._validate()}return t}return Z.get(0,0,0)},ct.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.add(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.add(this)},ct.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this),this.b3!=this.b1&&this.b3!=this.b2&&null!=this.b3&&this.b3.constraints.remove(this),this.b4!=this.b1&&this.b4!=this.b2&&this.b4!=this.b3&&null!=this.b4&&this.b4.constraints.remove(this)},ct.prototype.b1=null,ct.prototype.a1localx=null,ct.prototype.a1localy=null,ct.prototype.a1relx=null,ct.prototype.a1rely=null,ct.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},ct.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},ct.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},ct.prototype.wrap_a1=null,ct.prototype.b2=null,ct.prototype.a2localx=null,ct.prototype.a2localy=null,ct.prototype.a2relx=null,ct.prototype.a2rely=null,ct.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},ct.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},ct.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},ct.prototype.wrap_a2=null,ct.prototype.b3=null,ct.prototype.a3localx=null,ct.prototype.a3localy=null,ct.prototype.a3relx=null,ct.prototype.a3rely=null,ct.prototype.validate_a3=function(){this.wrap_a3.zpp_inner.x=this.a3localx,this.wrap_a3.zpp_inner.y=this.a3localy},ct.prototype.invalidate_a3=function(e){this.immutable_midstep("Constraint::a3"),this.a3localx=e.x,this.a3localy=e.y,this.wake()},ct.prototype.setup_a3=function(){var e,t=this.a3localx,i=this.a3localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a3=e,this.wrap_a3.zpp_inner._inuse=!0,this.wrap_a3.zpp_inner._validate=$(this,this.validate_a3),this.wrap_a3.zpp_inner._invalidate=$(this,this.invalidate_a3)},ct.prototype.wrap_a3=null,ct.prototype.b4=null,ct.prototype.a4localx=null,ct.prototype.a4localy=null,ct.prototype.a4relx=null,ct.prototype.a4rely=null,ct.prototype.validate_a4=function(){this.wrap_a4.zpp_inner.x=this.a4localx,this.wrap_a4.zpp_inner.y=this.a4localy},ct.prototype.invalidate_a4=function(e){this.immutable_midstep("Constraint::a4"),this.a4localx=e.x,this.a4localy=e.y,this.wake()},ct.prototype.setup_a4=function(){var e,t=this.a4localx,i=this.a4localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a4=e,this.wrap_a4.zpp_inner._inuse=!0,this.wrap_a4.zpp_inner._validate=$(this,this.validate_a4),this.wrap_a4.zpp_inner._invalidate=$(this,this.invalidate_a4)},ct.prototype.wrap_a4=null,ct.prototype.kMass=null,ct.prototype.jAcc=null,ct.prototype.jMax=null,ct.prototype.gamma=null,ct.prototype.bias=null,ct.prototype.stepped=null,ct.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=r.zpp_inner_zn.wrap_a2,a=this.outer_zn;null==a.zpp_inner_zn.wrap_a3&&a.zpp_inner_zn.setup_a3();var s=a.zpp_inner_zn.wrap_a3,l=this.outer_zn;null==l.zpp_inner_zn.wrap_a4&&l.zpp_inner_zn.setup_a4();var p=new k(null,null,null,null,n,o,s,l.zpp_inner_zn.wrap_a4,this.jointMin,this.jointMax,this.ratio);if(this.copyto(p),null!=e&&null!=this.b1){for(var h=null,u=0;u<e.length;){var c=e[u];if(++u,c.id==this.b1.id){h=c.bc;break}}null!=h?p.zpp_inner_zn.b1=h.zpp_inner:t.push(rt.todo(this.b1.id,function(e){p.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var d=null,_=0;_<e.length;){var y=e[_];if(++_,y.id==this.b2.id){d=y.bc;break}}null!=d?p.zpp_inner_zn.b2=d.zpp_inner:t.push(rt.todo(this.b2.id,function(e){p.zpp_inner_zn.b2=e.zpp_inner}))}if(null!=e&&null!=this.b3){for(var m=null,f=0;f<e.length;){var x=e[f];if(++f,x.id==this.b3.id){m=x.bc;break}}null!=m?p.zpp_inner_zn.b3=m.zpp_inner:t.push(rt.todo(this.b3.id,function(e){p.zpp_inner_zn.b3=e.zpp_inner}))}if(null!=e&&null!=this.b4){for(var v=null,z=0;z<e.length;){var g=e[z];if(++z,g.id==this.b4.id){v=g.bc;break}}null!=v?p.zpp_inner_zn.b4=v.zpp_inner:t.push(rt.todo(this.b4.id,function(e){p.zpp_inner_zn.b4=e.zpp_inner}))}return p},ct.prototype.validate=function(){if(null==this.b1||null==this.b2||null==this.b3||null==this.b4)throw new r("Error: PulleyJoint cannot be simulated with null bodies");if(this.b1==this.b2||this.b3==this.b4)throw new r("Error: PulleyJoint cannot have body1==body2 or body3==body4");if(this.b1.space!=this.space||this.b2.space!=this.space||this.b3.space!=this.space||this.b4.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(this.jointMin>this.jointMax)throw new r("Error: PulleyJoint must have jointMin <= jointMax");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic");if(2!=this.b3.type&&2!=this.b4.type)throw new r("Error: PulleyJoint cannot have both bodies in a linked pair non-dynamic")},ct.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake(),null!=this.b3&&2==this.b3.type&&this.b3.wake(),null!=this.b4&&2==this.b4.type&&this.b4.wake()},ct.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}if(2==this.b3.type){var z,g;if(this.b3.component==this.b3.component.parent)z=this.b3.component;else{for(var b=this.b3.component,w=null;b!=b.parent;){var S=b.parent;b.parent=w,w=b,b=S}for(;null!=w;){var C=w.parent;w.parent=b,w=C}z=b}if(this.component==this.component.parent)g=this.component;else{for(var M=this.component,P=null;M!=M.parent;){var k=M.parent;M.parent=P,P=M,M=k}for(;null!=P;){var T=P.parent;P.parent=M,P=T}g=M}z!=g&&(z.rank<g.rank?z.parent=g:z.rank>g.rank?g.parent=z:(g.parent=z).rank++)}if(2==this.b4.type){var O,A;if(this.b4.component==this.b4.component.parent)O=this.b4.component;else{for(var E=this.b4.component,G=null;E!=E.parent;){var I=E.parent;E.parent=G,G=E,E=I}for(;null!=G;){var B=G.parent;G.parent=E,G=B}O=E}if(this.component==this.component.parent)A=this.component;else{for(var L=this.component,D=null;L!=L.parent;){var R=L.parent;L.parent=D,D=L,L=R}for(;null!=D;){var F=D.parent;D.parent=L,D=F}A=L}O!=A&&(O.rank<A.rank?O.parent=A:O.rank>A.rank?A.parent=O:(A.parent=O).rank++)}},ct.prototype.pair_exists=function(e,t){return this.b1.id==e&&(this.b2.id==t||this.b3.id==t||this.b4.id==t)||this.b2.id==e&&(this.b3.id==t||this.b4.id==t||this.b1.id==t)||this.b3.id==e&&(this.b4.id==t||this.b1.id==t||this.b2.id==t)||this.b4.id==e&&(this.b1.id==t||this.b2.id==t||this.b3.id==t)},ct.prototype.clearcache=function(){this.jAcc=0,this.pre_dt=-1},ct.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.equal=this.jointMin==this.jointMax,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy,this.a3relx=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,this.a3rely=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy,this.a4relx=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,this.a4rely=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var i,n,r,o;i=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),n=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),r=this.b4.posx+this.a4relx-(this.b3.posx+this.a3relx),o=this.b4.posy+this.a4rely-(this.b3.posy+this.a3rely);var a=Math.sqrt(i*i+n*n),s=Math.sqrt(r*r+o*o);if(0!=a){var l=1/a;this.n12x=i*l,this.n12y=n*l}if(0!=s){var p=1/s;this.n34x=r*p,this.n34y=o*p;var h=this.ratio;this.n34x*=h,this.n34y*=h}else{var u=this.ratio/Math.sqrt(this.n34x*this.n34x+this.n34y*this.n34y);this.n34x*=u,this.n34y*=u}var c=a+this.ratio*s;this.equal?(c-=this.jointMax,this.slack=!1):c<this.jointMin?(c=this.jointMin-c,this.n12x=-this.n12x,this.n12y=-this.n12y,this.n34x=-this.n34x,this.n34y=-this.n34y,this.slack=!1):c>this.jointMax?(c-=this.jointMax,this.slack=!1):(this.n12x=0,this.n12y=0,this.n34x=0,c=this.n34y=0,this.slack=!0);var d=c;if(!this.slack){this.cx1=this.n12y*this.a1relx-this.n12x*this.a1rely,this.cx2=this.n12y*this.a2relx-this.n12x*this.a2rely,this.cx3=this.n34y*this.a3relx-this.n34x*this.a3rely,this.cx4=this.n34y*this.a4relx-this.n34x*this.a4rely;var _=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*this.cx1*this.cx1+this.b2.sinertia*this.cx2*this.cx2+this.b3.sinertia*this.cx3*this.cx3+this.b4.sinertia*this.cx4*this.cx4;if(this.b1==this.b4&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx4*this.b1.sinertia)),this.b1==this.b3&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b1.smass+this.cx1*this.cx3*this.b1.sinertia)),this.b2==this.b3&&(_-=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx3*this.b2.sinertia)),this.b2==this.b4&&(_+=2*((this.n12x*this.n34x+this.n12y*this.n34y)*this.b2.smass+this.cx2*this.cx4*this.b2.sinertia)),this.kMass=_,0!=this.kMass?this.kMass=1/this.kMass:this.jAcc=0,this.stiff)this.bias=0,this.gamma=0;else{if(this.breakUnderError&&d*d>this.maxError*this.maxError)return!0;var y,m=2*Math.PI*this.frequency;this.gamma=1/(e*m*(2*this.damping+m*e));var f=1/(1+this.gamma);y=e*m*m*this.gamma,this.gamma*=f,this.kMass*=f,this.bias=-d*y,this.bias<-this.maxError?this.bias=-this.maxError:this.bias>this.maxError&&(this.bias=this.maxError)}this.jAcc*=t,this.jMax=this.maxForce*e}return!1},ct.prototype.warmStart=function(){if(!this.slack){var e=this.b1.imass*this.jAcc;this.b1.velx-=this.n12x*e,this.b1.vely-=this.n12y*e;var t=this.b2.imass*this.jAcc;this.b2.velx+=this.n12x*t,this.b2.vely+=this.n12y*t;var i=this.b3.imass*this.jAcc;this.b3.velx-=this.n34x*i,this.b3.vely-=this.n34y*i;var n=this.b4.imass*this.jAcc;this.b4.velx+=this.n34x*n,this.b4.vely+=this.n34y*n,this.b1.angvel-=this.cx1*this.b1.iinertia*this.jAcc,this.b2.angvel+=this.cx2*this.b2.iinertia*this.jAcc,this.b3.angvel-=this.cx3*this.b3.iinertia*this.jAcc,this.b4.angvel+=this.cx4*this.b4.iinertia*this.jAcc}},ct.prototype.applyImpulseVel=function(){if(this.slack)return!1;var e=this.kMass*(this.bias-(this.n12x*(this.b2.velx+this.b2.kinvelx-this.b1.velx-this.b1.kinvelx)+this.n12y*(this.b2.vely+this.b2.kinvely-this.b1.vely-this.b1.kinvely)+this.n34x*(this.b4.velx+this.b4.kinvelx-this.b3.velx-this.b3.kinvelx)+this.n34y*(this.b4.vely+this.b4.kinvely-this.b3.vely-this.b3.kinvely)+(this.b2.angvel+this.b2.kinangvel)*this.cx2-(this.b1.angvel+this.b1.kinangvel)*this.cx1+(this.b4.angvel+this.b4.kinangvel)*this.cx4-(this.b3.angvel+this.b3.kinangvel)*this.cx3))-this.jAcc*this.gamma,t=this.jAcc;if(this.jAcc+=e,!this.equal&&0<this.jAcc&&(this.jAcc=0),this.breakUnderForce&&this.jAcc<-this.jMax)return!0;this.stiff||this.jAcc<-this.jMax&&(this.jAcc=-this.jMax),e=this.jAcc-t;var i=this.b1.imass*e;this.b1.velx-=this.n12x*i,this.b1.vely-=this.n12y*i;var n=this.b2.imass*e;this.b2.velx+=this.n12x*n,this.b2.vely+=this.n12y*n;var r=this.b3.imass*e;this.b3.velx-=this.n34x*r,this.b3.vely-=this.n34y*r;var o=this.b4.imass*e;return this.b4.velx+=this.n34x*o,this.b4.vely+=this.n34y*o,this.b1.angvel-=this.cx1*this.b1.iinertia*e,this.b2.angvel+=this.cx2*this.b2.iinertia*e,this.b3.angvel-=this.cx3*this.b3.iinertia*e,this.b4.angvel+=this.cx4*this.b4.iinertia*e,!1},ct.prototype.applyImpulsePos=function(){var e,t,i,n;i=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,n=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var r,o;r=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,o=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var a,s;a=this.b3.axisy*this.a3localx-this.b3.axisx*this.a3localy,s=this.a3localx*this.b3.axisx+this.a3localy*this.b3.axisy;var l,p,h;l=this.b4.axisy*this.a4localx-this.b4.axisx*this.a4localy,p=this.a4localx*this.b4.axisx+this.a4localy*this.b4.axisy;var u=0,c=0,d=0,_=0;u=this.n12x,c=this.n12y,d=this.n34x,_=this.n34y;var y,m,f,x;y=this.b2.posx+r-(this.b1.posx+i),m=this.b2.posy+o-(this.b1.posy+n),f=this.b4.posx+l-(this.b3.posx+a),x=this.b4.posy+p-(this.b3.posy+s);var v=Math.sqrt(y*y+m*m),z=Math.sqrt(f*f+x*x);if(0!=v){var g=1/v;u=y*g,c=m*g}if(0!=z){var b=1/z;d=f*b,_=x*b;var w=this.ratio;d*=w,_*=w}else{var S=this.ratio/Math.sqrt(d*d+_*_);d*=S,_*=S}var C=v+this.ratio*z;if(this.equal?(C-=this.jointMax,h=!1):C<this.jointMin?(C=this.jointMin-C,u=-u,c=-c,d=-d,_=-_,h=!1):C>this.jointMax?(C-=this.jointMax,h=!1):h=!(C=_=d=c=u=0),e=C,!h){if(this.breakUnderError&&e*e>this.maxError*this.maxError)return!0;if(e*e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;if(6<(e*=.5)*e){var M=this.b1.smass+this.b2.smass;if(M>Qs.epsilon&&(t=-e*(M=.75/M),this.equal||t<0)){var P=t*this.b1.imass;this.b1.posx-=u*P,this.b1.posy-=c*P;var k=t*this.b2.imass;this.b2.posx+=u*k,this.b2.posy+=c*k;var T=t*this.b3.imass;this.b3.posx-=d*T,this.b3.posy-=_*T;var O=t*this.b4.imass;this.b4.posx+=d*O,this.b4.posy+=_*O;var A,E,G,I;A=this.b2.posx+r-(this.b1.posx+i),E=this.b2.posy+o-(this.b1.posy+n),G=this.b4.posx+l-(this.b3.posx+a),I=this.b4.posy+p-(this.b3.posy+s);var B=Math.sqrt(A*A+E*E),L=Math.sqrt(G*G+I*I);if(0!=B){var D=1/B;u=A*D,c=E*D}if(0!=L){var R=1/L;d=G*R,_=I*R;var F=this.ratio;d*=F,_*=F}else{var j=this.ratio/Math.sqrt(d*d+_*_);d*=j,_*=j}var N=B+this.ratio*L;this.equal?N-=this.jointMax:N<this.jointMin?(N=this.jointMin-N,u=-u,c=-c,d=-d,_=-_):N>this.jointMax?N-=this.jointMax:N=_=d=c=u=0,e=N,e*=.5}}var U,V,H,W;U=c*i-u*n,V=c*r-u*o,H=_*a-d*s,W=_*l-d*p;var X=this.b1.smass+this.b2.smass+this.ratio*this.ratio*(this.b3.smass+this.b4.smass)+this.b1.sinertia*U*U+this.b2.sinertia*V*V+this.b3.sinertia*H*H+this.b4.sinertia*W*W;this.b1==this.b4&&(X-=2*((u*d+c*_)*this.b1.smass+U*W*this.b1.sinertia)),this.b1==this.b3&&(X+=2*((u*d+c*_)*this.b1.smass+U*H*this.b1.sinertia)),this.b2==this.b3&&(X-=2*((u*d+c*_)*this.b2.smass+V*H*this.b2.sinertia)),this.b2==this.b4&&(X+=2*((u*d+c*_)*this.b2.smass+V*W*this.b2.sinertia));var q=X;if(0!=q&&(q=1/q),t=-e*q,this.equal||t<0){var Y=this.b1.imass*t;this.b1.posx-=u*Y,this.b1.posy-=c*Y;var K=this.b2.imass*t;this.b2.posx+=u*K,this.b2.posy+=c*K;var Z=this.b3.imass*t;this.b3.posx-=d*Z,this.b3.posy-=_*Z;var J=this.b4.imass*t;this.b4.posx+=d*J,this.b4.posy+=_*J;var Q=this.b1,$=-U*this.b1.iinertia*t;if(Q.rot+=$,1e-4<$*$)Q.axisx=Math.sin(Q.rot),Q.axisy=Math.cos(Q.rot);else{var ee=$*$,te=1-.5*ee,ie=1-ee*ee/8,ne=(te*Q.axisx+$*Q.axisy)*ie;Q.axisy=(te*Q.axisy-$*Q.axisx)*ie,Q.axisx=ne}var re=this.b2,oe=V*this.b2.iinertia*t;if(re.rot+=oe,1e-4<oe*oe)re.axisx=Math.sin(re.rot),re.axisy=Math.cos(re.rot);else{var ae=oe*oe,se=1-.5*ae,le=1-ae*ae/8,pe=(se*re.axisx+oe*re.axisy)*le;re.axisy=(se*re.axisy-oe*re.axisx)*le,re.axisx=pe}var he=this.b3,ue=-H*this.b3.iinertia*t;if(he.rot+=ue,1e-4<ue*ue)he.axisx=Math.sin(he.rot),he.axisy=Math.cos(he.rot);else{var ce=ue*ue,de=1-.5*ce,_e=1-ce*ce/8,ye=(de*he.axisx+ue*he.axisy)*_e;he.axisy=(de*he.axisy-ue*he.axisx)*_e,he.axisx=ye}var me=this.b4,fe=W*this.b4.iinertia*t;if(me.rot+=fe,1e-4<fe*fe)me.axisx=Math.sin(me.rot),me.axisy=Math.cos(me.rot);else{var xe=fe*fe,ve=1-.5*xe,ze=1-xe*xe/8,ge=(ve*me.axisx+fe*me.axisy)*ze;me.axisy=(ve*me.axisy-fe*me.axisx)*ze,me.axisx=ge}}}return!1},ct.prototype.draw=function(e){},ct.prototype.__class__=ct;var dt=zpp_nape.constraint.ZPP_UserConstraint=function(e,t){this.jOld=null,this.J=null,this.vec3=null,this.Keff=null,this.jMax=0,this.velonly=!1,this.gamma=0,this.soft=0,this.y=null,this.L=null,this.stepped=!1,this.bias=null,this.jAcc=null,this.dim=0,this.bodies=null,this.outer_zn=null,Ne.call(this),this.bodies=[],this.dim=e,this.velonly=t,this.jAcc=[],this.bias=[],this.L=[],this.J=[],this.jOld=[],this.y=[],this.Keff=[],this.vec3=Z.get(0,0,0);for(var i=0;i<e;){var n=i++;this.J[n]=this.jOld[n]=this.y[n]=0,this.bias[n]=0;for(var r=this.jAcc[n]=0;r<e;)this.L[n*e+r++]=0}this.stepped=!1};dt.__name__=["zpp_nape","constraint","ZPP_UserConstraint"],dt.__super__=Ne,dt.prototype=Object.create(Ne.prototype),dt.prototype.outer_zn=null,dt.prototype.bindVec2_invalidate=function(e){this.outer_zn.__invalidate()},dt.prototype.bodies=null,dt.prototype.dim=null,dt.prototype.jAcc=null,dt.prototype.bias=null,dt.prototype.addBody=function(e){for(var t=null,i=0,n=this.bodies;i<n.length;){var r=n[i];if(++i,r.body==e){t=r;break}}null==t?(this.bodies.push(new _t(1,e)),this.active&&null!=this.space&&null!=e&&e.constraints.add(this)):t.cnt++},dt.prototype.remBody=function(e){for(var t=null,i=0|this.bodies.length,n=0;n<i;){var r=this.bodies[n];if(r.body==e){r.cnt--,0==r.cnt&&(0<i&&(this.bodies[n]=this.bodies[i-1]),this.bodies.pop(),this.active&&null!=this.space&&null!=e&&e.constraints.remove(this)),t=r;break}++n}return null!=t},dt.prototype.bodyImpulse=function(e){for(var t=0,i=this.dim;t<i;){var n=t++;this.J[n]=this.jAcc[n]}var r=Z.get(0,0,0);return this.stepped&&this.outer_zn.__impulse(this.J,e.outer,r),r},dt.prototype.activeBodies=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,null!=i.body&&i.body.constraints.add(this)}},dt.prototype.inactiveBodies=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,null!=i.body&&i.body.constraints.remove(this)}},dt.prototype.stepped=null,dt.prototype.copy=function(e,t){throw this.copyto(this.outer_zn.__copy()),new r("not done yet")},dt.prototype.validate=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];if(++e,i.body.space!=this.space)throw new r("Error: Constraints must have each body within the same sapce to which the constraint has been assigned")}this.outer_zn.__validate()},dt.prototype.wake_connected=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e,2==i.body.type&&i.body.wake()}},dt.prototype.forest=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];if(++e,2==i.body.type){var n,r;if(i.body.component==i.body.component.parent)n=i.body.component;else{for(var o=i.body.component,a=null;o!=o.parent;){var s=o.parent;o.parent=a,a=o,o=s}for(;null!=a;){var l=a.parent;a.parent=o,a=l}n=o}if(this.component==this.component.parent)r=this.component;else{for(var p=this.component,h=null;p!=p.parent;){var u=p.parent;p.parent=h,h=p,p=u}for(;null!=h;){var c=h.parent;h.parent=p,h=c}r=p}n!=r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n).rank++)}}},dt.prototype.pair_exists=function(e,t){for(var i=!1,n=0|this.bodies.length,r=0;r<n;){for(var o=r++,a=this.bodies[o].body,s=o+1;s<n;){var l=this.bodies[s++].body;if(a.id==e&&l.id==t||a.id==t&&l.id==e){i=!0;break}}if(i)break}return i},dt.prototype.broken=function(){this.outer_zn.__broken()},dt.prototype.clearcache=function(){for(var e=0,t=this.dim;e<t;)this.jAcc[e++]=0;this.pre_dt=-1},dt.prototype.lsq=function(e){for(var t=0,i=0,n=this.dim;i<n;){var r=i++;t+=e[r]*e[r]}return t},dt.prototype._clamp=function(e,t){var i=this.lsq(e);if(t*t<i)for(var n=t/Math.sqrt(i),r=0,o=this.dim;r<o;)e[r++]*=n},dt.prototype.L=null,dt.prototype.solve=function(e){for(var t=0,i=0,n=this.dim;i<n;){for(var r=i++,o=0,a=0,s=r-1;a<s;){var l=a++;o+=this.L[r*this.dim+l]*this.L[r*this.dim+l]}var p=Math.sqrt(e[t++]-o);if(0!=(this.L[r*this.dim+r]=p)){p=1/p;for(var h=r+1,u=this.dim;h<u;){for(var c=h++,d=0,_=0,y=r-1;_<y;){var m=_++;d+=this.L[c*this.dim+m]*this.L[r*this.dim+m]}this.L[c*this.dim+r]=p*(e[t++]-d)}}else{for(var f=r+1,x=this.dim;f<x;)this.L[f++*this.dim+r]=0;t+=this.dim-r-1}}return this.L},dt.prototype.y=null,dt.prototype.transform=function(e,t){for(var i=0,n=this.dim;i<n;){var r=i++,o=t[r],a=e[r*this.dim+r];if(0!=a){for(var s=0;s<r;){var l=s++;o-=e[r*this.dim+l]*this.y[l]}this.y[r]=o/a}else this.y[r]=0}for(var p=0,h=this.dim;p<h;){var u=this.dim-1-p++,c=e[u*this.dim+u];if(0!=c){for(var d=this.y[u],_=u+1,y=this.dim;_<y;){var m=_++;d-=e[m*this.dim+u]*t[m]}t[u]=d/c}else t[u]=0}},dt.prototype.soft=null,dt.prototype.gamma=null,dt.prototype.velonly=null,dt.prototype.jMax=null,dt.prototype.Keff=null,dt.prototype.preStep=function(e){this.outer_zn.__validate(),-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;if(this.pre_dt=e,this.stepped=!0,this.outer_zn.__prepare(),this.outer_zn.__eff_mass(this.Keff),this.L=this.solve(this.Keff),this.stiff||this.velonly){for(var i=0,n=this.dim;i<n;)this.bias[i++]=0;this.gamma=0,this.soft=1}else{var r,o=2*Math.PI*this.frequency;this.gamma=1/(e*o*(2*this.damping+o*e));var a=1/(1+this.gamma);if(r=e*o*o*this.gamma,this.gamma*=a,this.soft=a,this.outer_zn.__position(this.bias),this.breakUnderError&&this.lsq(this.bias)>this.maxError*this.maxError)return!0;for(var s=0,l=this.dim;s<l;)this.bias[s++]*=-r;this._clamp(this.bias,this.maxError)}for(var p=0,h=this.dim;p<h;)this.jAcc[p++]*=t;return this.jMax=this.maxForce*e,!1},dt.prototype.vec3=null,dt.prototype.warmStart=function(){for(var e=0,t=this.bodies;e<t.length;){var i=t[e];++e;var n=i.body;this.outer_zn.__impulse(this.jAcc,n.outer,this.vec3);var r=n.imass,o=this.vec3,a=o.zpp_inner;null!=a._validate&&a._validate(),n.velx+=o.zpp_inner.x*r;var s=this.vec3,l=s.zpp_inner;null!=l._validate&&l._validate(),n.vely+=s.zpp_inner.y*r;var p=this.vec3,h=p.zpp_inner;null!=h._validate&&h._validate(),n.angvel+=p.zpp_inner.z*n.iinertia}},dt.prototype.J=null,dt.prototype.jOld=null,dt.prototype.applyImpulseVel=function(){this.outer_zn.__velocity(this.J);for(var e=0,t=this.dim;e<t;){var i=e++;this.J[i]=this.bias[i]-this.J[i]}this.transform(this.L,this.J);for(var n=0,r=this.dim;n<r;){var o=n++;this.jOld[o]=this.jAcc[o],this.jAcc[o]+=this.J[o]=this.J[o]*this.soft-this.jAcc[o]*this.gamma}if(this.outer_zn.__clamp(this.jAcc),(this.breakUnderForce||!this.stiff)&&this.lsq(this.jAcc)>this.jMax*this.jMax){if(this.breakUnderForce)return!0;this.stiff||this._clamp(this.jAcc,this.jMax)}for(var a=0,s=this.dim;a<s;){var l=a++;this.J[l]=this.jAcc[l]-this.jOld[l]}for(var p=0,h=this.bodies;p<h.length;){var u=h[p];++p;var c=u.body;this.outer_zn.__impulse(this.J,c.outer,this.vec3);var d=c.imass,_=this.vec3,y=_.zpp_inner;null!=y._validate&&y._validate(),c.velx+=_.zpp_inner.x*d;var m=this.vec3,f=m.zpp_inner;null!=f._validate&&f._validate(),c.vely+=m.zpp_inner.y*d;var x=this.vec3,v=x.zpp_inner;null!=v._validate&&v._validate(),c.angvel+=x.zpp_inner.z*c.iinertia}return!1},dt.prototype.applyImpulsePos=function(){if(this.velonly)return!1;this.outer_zn.__prepare(),this.outer_zn.__position(this.J);var e=this.lsq(this.J);if(this.breakUnderError&&e>this.maxError*this.maxError)return!0;if(e<Qs.constraintLinearSlop*Qs.constraintLinearSlop)return!1;for(var t=0,i=this.dim;t<i;)this.J[t++]*=-1;this.outer_zn.__eff_mass(this.Keff),this.transform(this.solve(this.Keff),this.J),this.outer_zn.__clamp(this.J);for(var n=0,r=this.bodies;n<r.length;){var o=r[n];++n;var a=o.body;this.outer_zn.__impulse(this.J,a.outer,this.vec3);var s=a.imass,l=this.vec3,p=l.zpp_inner;null!=p._validate&&p._validate(),a.posx+=l.zpp_inner.x*s;var h=this.vec3,u=h.zpp_inner;null!=u._validate&&u._validate(),a.posy+=h.zpp_inner.y*s;var c=this.vec3,d=c.zpp_inner;null!=d._validate&&d._validate();var _=c.zpp_inner.z*a.iinertia;if(a.rot+=_,1e-4<_*_)a.axisx=Math.sin(a.rot),a.axisy=Math.cos(a.rot);else{var y=_*_,m=1-.5*y,f=1-y*y/8,x=(m*a.axisx+_*a.axisy)*f;a.axisy=(m*a.axisy-_*a.axisx)*f,a.axisx=x}}return!1},dt.prototype.draw=function(e){this.outer_zn.__draw(e)},dt.prototype.__class__=dt;var _t=zpp_nape.constraint.ZPP_UserBody=function(e,t){this.body=null,this.cnt=0,this.cnt=e,this.body=t};_t.__name__=["zpp_nape","constraint","ZPP_UserBody"],_t.prototype.cnt=null,_t.prototype.body=null,_t.prototype.__class__=_t;var yt=zpp_nape.constraint.ZPP_WeldJoint=function(){this.stepped=!1,this.biasz=0,this.biasy=0,this.biasx=0,this.gamma=0,this.jMax=0,this.jAccz=0,this.jAccy=0,this.jAccx=0,this.kMassf=0,this.kMasse=0,this.kMassc=0,this.kMassd=0,this.kMassb=0,this.kMassa=0,this.phase=0,this.wrap_a2=null,this.a2rely=0,this.a2relx=0,this.a2localy=0,this.a2localx=0,this.b2=null,this.wrap_a1=null,this.a1rely=0,this.a1relx=0,this.a1localy=0,this.a1localx=0,this.b1=null,this.outer_zn=null,Ne.call(this),this.phase=0,this.jAccx=0,this.jAccy=0,this.jAccz=0,this.jMax=1/0,this.stepped=!1,this.a1localx=0,this.a1localy=0,this.a1relx=0,this.a1rely=0,this.a2localx=0,this.a2localy=0,this.a2relx=0,this.a2rely=0};yt.__name__=["zpp_nape","constraint","ZPP_WeldJoint"],yt.__super__=Ne,yt.prototype=Object.create(Ne.prototype),yt.prototype.outer_zn=null,yt.prototype.bodyImpulse=function(e){return this.stepped?e==this.b1?Z.get(-this.jAccx,-this.jAccy,-(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)):Z.get(this.jAccx,this.jAccy,this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz):Z.get(0,0,0)},yt.prototype.activeBodies=function(){null!=this.b1&&this.b1.constraints.add(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.add(this)},yt.prototype.inactiveBodies=function(){null!=this.b1&&this.b1.constraints.remove(this),this.b2!=this.b1&&null!=this.b2&&this.b2.constraints.remove(this)},yt.prototype.b1=null,yt.prototype.a1localx=null,yt.prototype.a1localy=null,yt.prototype.a1relx=null,yt.prototype.a1rely=null,yt.prototype.validate_a1=function(){this.wrap_a1.zpp_inner.x=this.a1localx,this.wrap_a1.zpp_inner.y=this.a1localy},yt.prototype.invalidate_a1=function(e){this.immutable_midstep("Constraint::a1"),this.a1localx=e.x,this.a1localy=e.y,this.wake()},yt.prototype.setup_a1=function(){var e,t=this.a1localx,i=this.a1localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a1=e,this.wrap_a1.zpp_inner._inuse=!0,this.wrap_a1.zpp_inner._validate=$(this,this.validate_a1),this.wrap_a1.zpp_inner._invalidate=$(this,this.invalidate_a1)},yt.prototype.wrap_a1=null,yt.prototype.b2=null,yt.prototype.a2localx=null,yt.prototype.a2localy=null,yt.prototype.a2relx=null,yt.prototype.a2rely=null,yt.prototype.validate_a2=function(){this.wrap_a2.zpp_inner.x=this.a2localx,this.wrap_a2.zpp_inner.y=this.a2localy},yt.prototype.invalidate_a2=function(e){this.immutable_midstep("Constraint::a2"),this.a2localx=e.x,this.a2localy=e.y,this.wake()},yt.prototype.setup_a2=function(){var e,t=this.a2localx,i=this.a2localy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_a2=e,this.wrap_a2.zpp_inner._inuse=!0,this.wrap_a2.zpp_inner._validate=$(this,this.validate_a2),this.wrap_a2.zpp_inner._invalidate=$(this,this.invalidate_a2)},yt.prototype.wrap_a2=null,yt.prototype.phase=null,yt.prototype.kMassa=null,yt.prototype.kMassb=null,yt.prototype.kMassd=null,yt.prototype.kMassc=null,yt.prototype.kMasse=null,yt.prototype.kMassf=null,yt.prototype.jAccx=null,yt.prototype.jAccy=null,yt.prototype.jAccz=null,yt.prototype.jMax=null,yt.prototype.gamma=null,yt.prototype.biasx=null,yt.prototype.biasy=null,yt.prototype.biasz=null,yt.prototype.stepped=null,yt.prototype.copy=function(e,t){var i=this.outer_zn;null==i.zpp_inner_zn.wrap_a1&&i.zpp_inner_zn.setup_a1();var n=i.zpp_inner_zn.wrap_a1,r=this.outer_zn;null==r.zpp_inner_zn.wrap_a2&&r.zpp_inner_zn.setup_a2();var o=new O(null,null,n,r.zpp_inner_zn.wrap_a2);if(this.copyto(o),null!=e&&null!=this.b1){for(var a=null,s=0;s<e.length;){var l=e[s];if(++s,l.id==this.b1.id){a=l.bc;break}}null!=a?o.zpp_inner_zn.b1=a.zpp_inner:t.push(rt.todo(this.b1.id,function(e){o.zpp_inner_zn.b1=e.zpp_inner}))}if(null!=e&&null!=this.b2){for(var p=null,h=0;h<e.length;){var u=e[h];if(++h,u.id==this.b2.id){p=u.bc;break}}null!=p?o.zpp_inner_zn.b2=p.zpp_inner:t.push(rt.todo(this.b2.id,function(e){o.zpp_inner_zn.b2=e.zpp_inner}))}return o},yt.prototype.validate=function(){if(null==this.b1||null==this.b2)throw new r("Error: AngleJoint cannot be simulated null bodies");if(this.b1==this.b2)throw new r("Error: WeldJoint cannot be simulated with body1 == body2");if(this.b1.space!=this.space||this.b2.space!=this.space)throw new r("Error: Constraints must have each body within the same space to which the constraint has been assigned");if(2!=this.b1.type&&2!=this.b2.type)throw new r("Error: Constraints cannot have both bodies non-dynamic")},yt.prototype.wake_connected=function(){null!=this.b1&&2==this.b1.type&&this.b1.wake(),null!=this.b2&&2==this.b2.type&&this.b2.wake()},yt.prototype.forest=function(){if(2==this.b1.type){var e,t;if(this.b1.component==this.b1.component.parent)e=this.b1.component;else{for(var i=this.b1.component,n=null;i!=i.parent;){var r=i.parent;i.parent=n,n=i,i=r}for(;null!=n;){var o=n.parent;n.parent=i,n=o}e=i}if(this.component==this.component.parent)t=this.component;else{for(var a=this.component,s=null;a!=a.parent;){var l=a.parent;a.parent=s,s=a,a=l}for(;null!=s;){var p=s.parent;s.parent=a,s=p}t=a}e!=t&&(e.rank<t.rank?e.parent=t:e.rank>t.rank?t.parent=e:(t.parent=e).rank++)}if(2==this.b2.type){var h,u;if(this.b2.component==this.b2.component.parent)h=this.b2.component;else{for(var c=this.b2.component,d=null;c!=c.parent;){var _=c.parent;c.parent=d,d=c,c=_}for(;null!=d;){var y=d.parent;d.parent=c,d=y}h=c}if(this.component==this.component.parent)u=this.component;else{for(var m=this.component,f=null;m!=m.parent;){var x=m.parent;m.parent=f,f=m,m=x}for(;null!=f;){var v=f.parent;f.parent=m,f=v}u=m}h!=u&&(h.rank<u.rank?h.parent=u:h.rank>u.rank?u.parent=h:(u.parent=h).rank++)}},yt.prototype.pair_exists=function(e,t){return this.b1.id==e&&this.b2.id==t||this.b1.id==t&&this.b2.id==e},yt.prototype.clearcache=function(){this.jAccx=0,this.jAccy=0,this.jAccz=0,this.pre_dt=-1},yt.prototype.preStep=function(e){-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e,this.stepped=!0,this.a1relx=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,this.a1rely=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy,this.a2relx=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,this.a2rely=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var i=this.b1.smass+this.b2.smass;if(this.kMassa=i,this.kMassb=0,this.kMassd=i,this.kMassc=0,this.kMasse=0,(this.kMassf=0)!=this.b1.sinertia){var n=this.a1relx*this.b1.sinertia,r=this.a1rely*this.b1.sinertia;this.kMassa+=r*this.a1rely,this.kMassb+=-r*this.a1relx,this.kMassd+=n*this.a1relx,this.kMassc+=-r,this.kMasse+=n,this.kMassf+=this.b1.sinertia}if(0!=this.b2.sinertia){var o=this.a2relx*this.b2.sinertia,a=this.a2rely*this.b2.sinertia;this.kMassa+=a*this.a2rely,this.kMassb+=-a*this.a2relx,this.kMassd+=o*this.a2relx,this.kMassc+=-a,this.kMasse+=o,this.kMassf+=this.b2.sinertia}var s,l=this.kMassa*(this.kMassd*this.kMassf-this.kMasse*this.kMasse)+this.kMassb*(this.kMassc*this.kMasse-this.kMassb*this.kMassf)+this.kMassc*(this.kMassb*this.kMasse-this.kMassc*this.kMassd);if(l!=l)this.kMassa=0,this.kMassb=0,this.kMassd=0,this.kMassc=0,this.kMasse=0,this.kMassf=0,s=7;else if(0==l){var p=0;0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,p=1),0!=this.kMassd?this.kMassd=1/this.kMassd:(this.kMassd=0,p|=2),0!=this.kMassf?this.kMassf=1/this.kMassf:(this.kMassf=0,p|=4),this.kMassb=this.kMassc=this.kMasse=0,s=p}else{var h=(l=1/l)*(this.kMassd*this.kMassf-this.kMasse*this.kMasse),u=l*(this.kMasse*this.kMassc-this.kMassb*this.kMassf),c=l*(this.kMassa*this.kMassf-this.kMassc*this.kMassc),d=l*(this.kMassb*this.kMasse-this.kMassc*this.kMassd),_=l*(this.kMassb*this.kMassc-this.kMassa*this.kMasse),y=this.kMassa*this.kMassd-this.kMassb*this.kMassb;this.kMassa=h,this.kMassb=u,this.kMassd=c,this.kMassc=d,this.kMasse=_,this.kMassf=l*y,s=0}if(0!=(1&s)&&(this.jAccx=0),0!=(2&s)&&(this.jAccy=0),0!=(4&s)&&(this.jAccz=0),this.stiff)this.biasx=0,this.biasy=0,this.biasz=0,this.gamma=0;else{var m,f=2*Math.PI*this.frequency;this.gamma=1/(e*f*(2*this.damping+f*e));var x=1/(1+this.gamma);if(m=e*f*f*this.gamma,this.gamma*=x,this.kMassa*=x,this.kMassb*=x,this.kMassd*=x,this.kMassc*=x,this.kMasse*=x,this.kMassf*=x,this.biasx=this.b2.posx+this.a2relx-(this.b1.posx+this.a1relx),this.biasy=this.b2.posy+this.a2rely-(this.b1.posy+this.a1rely),this.biasz=this.b2.rot-this.b1.rot-this.phase,this.breakUnderError&&this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz>this.maxError*this.maxError)return!0;var v=-m;this.biasx*=v,this.biasy*=v,this.biasz*=v;var z=this.maxError,g=this.biasx*this.biasx+this.biasy*this.biasy+this.biasz*this.biasz;if(z*z<g){var b=z*(1/Math.sqrt(g));this.biasx*=b,this.biasy*=b,this.biasz*=b}}return this.jAccx*=t,this.jAccy*=t,this.jAccz*=t,this.jMax=this.maxForce*e,!1},yt.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.jAccx*e,this.b1.vely-=this.jAccy*e;var t=this.b2.imass;this.b2.velx+=this.jAccx*t,this.b2.vely+=this.jAccy*t,this.b1.angvel-=(this.jAccy*this.a1relx-this.jAccx*this.a1rely+this.jAccz)*this.b1.iinertia,this.b2.angvel+=(this.jAccy*this.a2relx-this.jAccx*this.a2rely+this.jAccz)*this.b2.iinertia},yt.prototype.applyImpulseVel=function(){var e,t,i;e=this.b2.velx+this.b2.kinvelx-this.a2rely*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.a1rely*(this.b1.angvel+this.b1.kinangvel)),t=this.b2.vely+this.b2.kinvely+this.a2relx*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.a1relx*(this.b1.angvel+this.b1.kinangvel)),i=this.b2.angvel+this.b2.kinangvel-this.b1.angvel-this.b1.kinangvel;var n=0,r=0,o=0;n=this.biasx-e,r=this.biasy-t,o=this.biasz-i;var a=this.kMassa*n+this.kMassb*r+this.kMassc*o,s=this.kMassb*n+this.kMassd*r+this.kMasse*o;o=this.kMassc*n+this.kMasse*r+this.kMassf*o,n=a,r=s;var l=this.gamma;n-=this.jAccx*l,r-=this.jAccy*l,o-=this.jAccz*l;var p,h,u;if(p=this.jAccx,h=this.jAccy,u=this.jAccz,this.jAccx+=n,this.jAccy+=r,this.jAccz+=o,this.breakUnderForce){if(this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz>this.jMax*this.jMax)return!0}else if(!this.stiff){var c=this.jMax,d=this.jAccx*this.jAccx+this.jAccy*this.jAccy+this.jAccz*this.jAccz;if(c*c<d){var _=c*(1/Math.sqrt(d));this.jAccx*=_,this.jAccy*=_,this.jAccz*=_}}n=this.jAccx-p,r=this.jAccy-h,o=this.jAccz-u;var y=this.b1.imass;this.b1.velx-=n*y,this.b1.vely-=r*y;var m=this.b2.imass;return this.b2.velx+=n*m,this.b2.vely+=r*m,this.b1.angvel-=(r*this.a1relx-n*this.a1rely+o)*this.b1.iinertia,this.b2.angvel+=(r*this.a2relx-n*this.a2rely+o)*this.b2.iinertia,!1},yt.prototype.applyImpulsePos=function(){var e,t;e=this.b1.axisy*this.a1localx-this.b1.axisx*this.a1localy,t=this.a1localx*this.b1.axisx+this.a1localy*this.b1.axisy;var i,n;i=this.b2.axisy*this.a2localx-this.b2.axisx*this.a2localy,n=this.a2localx*this.b2.axisx+this.a2localy*this.b2.axisy;var r=0,o=0,a=0;r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),a=this.b2.rot-this.b1.rot-this.phase;var s=0,l=0,p=0;if(this.breakUnderError&&r*r+o*o+a*a>this.maxError*this.maxError)return!0;var h=!0;r*r+o*o<Qs.constraintLinearSlop*Qs.constraintLinearSlop&&(h=!1,o=r=0);var u=a*a,c=Qs.constraintAngularSlop;if(u<c*c){if(!h)return!1;a=0}if(a*=.5,6<(r*=.5)*r+(o*=.5)*o){var d=this.b1.smass+this.b2.smass;if(d>Qs.epsilon){var _=(s=-r*(d=.75/d))*s+(l=-o*d)*l;if(400<_){var y=1/Math.sqrt(_)*20;s*=y,l*=y}var m=this.b1.imass;this.b1.posx-=s*m,this.b1.posy-=l*m;var f=this.b2.imass;this.b2.posx+=s*f,this.b2.posy+=l*f,r=this.b2.posx+i-(this.b1.posx+e),o=this.b2.posy+n-(this.b1.posy+t),a=this.b2.rot-this.b1.rot-this.phase,r*=.5,o*=.5,a*=.5}}var x=0,v=0,z=0,g=0,b=0,w=0,S=this.b1.smass+this.b2.smass;if(z=x=S,(w=b=g=v=0)!=this.b1.sinertia){var C=e*this.b1.sinertia,M=t*this.b1.sinertia;x=S+M*t,v+=-M*e,z=S+C*e,g+=-M,b+=C,w+=this.b1.sinertia}if(0!=this.b2.sinertia){var P=i*this.b2.sinertia,k=n*this.b2.sinertia;x+=k*n,v+=-k*i,z+=P*i,g+=-k,b+=P,w+=this.b2.sinertia}p=-a;var T=(s=-r)*s+(l=-o)*l;if(36<T){var O=1/Math.sqrt(T)*6;s*=O,l*=O}var A=x*(z*w-b*b)+v*(g*b-v*w)+g*(v*b-g*z);if(A!=A)s=l=p=0;else if(0==A)0!=x?s/=x:s=0,0!=z?l/=z:l=0,0!=w?p/=w:p=0;else{var E=b*g-v*w,G=v*b-g*z,I=v*g-x*b,B=(A=1/A)*(s*(z*w-b*b)+l*E+p*G),L=A*(s*E+l*(x*w-g*g)+p*I);p=A*(s*G+l*I+p*(x*z-v*v)),s=B,l=L}var D=this.b1.imass;this.b1.posx-=s*D,this.b1.posy-=l*D;var R=this.b2.imass;this.b2.posx+=s*R,this.b2.posy+=l*R;var F=this.b1,j=-(l*e-s*t+p)*this.b1.iinertia;if(F.rot+=j,1e-4<j*j)F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot);else{var N=j*j,U=1-.5*N,V=1-N*N/8,H=(U*F.axisx+j*F.axisy)*V;F.axisy=(U*F.axisy-j*F.axisx)*V,F.axisx=H}var W=this.b2,X=(l*i-s*n+p)*this.b2.iinertia;if(W.rot+=X,1e-4<X*X)W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot);else{var q=X*X,Y=1-.5*q,K=1-q*q/8,Z=(Y*W.axisx+X*W.axisy)*K;W.axisy=(Y*W.axisy-X*W.axisx)*K,W.axisx=Z}return!1},yt.prototype.draw=function(e){},yt.prototype.__class__=yt;var pn=zpp_nape.dynamics.ZPP_Arbiter=function(){this.sensorarb=null,this.fluidarb=null,this.colarb=null,this.type=0,this.pair=null,this.ws2=null,this.ws1=null,this.b2=null,this.b1=null,this.invalidated=!1,this.immState=0,this.fresh=!1,this.continuous=!1,this.presentable=!1,this.intchange=!1,this.present=0,this.sleeping=!1,this.cleared=!1,this.active=!1,this.endGenerated=0,this.sleep_stamp=0,this.up_stamp=0,this.stamp=0,this.di=0,this.id=0,this.hnext=null,this.outer=null};pn.__name__=["zpp_nape","dynamics","ZPP_Arbiter"],pn.prototype.outer=null,pn.prototype.wrapper=function(){return null==this.outer&&(pn.internal=!0,this.type==pn.COL?(this.colarb.outer_zn=new I,this.outer=this.colarb.outer_zn):this.type==pn.FLUID?(this.fluidarb.outer_zn=new D,this.outer=this.fluidarb.outer_zn):this.outer=new A,this.outer.zpp_inner=this,pn.internal=!1),this.outer},pn.prototype.inactiveme=function(){return!this.active},pn.prototype.hnext=null,pn.prototype.id=null,pn.prototype.di=null,pn.prototype.stamp=null,pn.prototype.up_stamp=null,pn.prototype.sleep_stamp=null,pn.prototype.endGenerated=null,pn.prototype.active=null,pn.prototype.cleared=null,pn.prototype.sleeping=null,pn.prototype.present=null,pn.prototype.intchange=null,pn.prototype.presentable=null,pn.prototype.continuous=null,pn.prototype.fresh=null,pn.prototype.immState=null,pn.prototype.acting=function(){return!!this.active&&0!=(1&this.immState)},pn.prototype.invalidated=null,pn.prototype.b1=null,pn.prototype.b2=null,pn.prototype.ws1=null,pn.prototype.ws2=null,pn.prototype.pair=null,pn.prototype.swap_features=function(){var e=this.b1;this.b1=this.b2,this.b2=e;var t=this.ws1;this.ws1=this.ws2,this.ws2=t;var i=this.colarb.s1;this.colarb.s1=this.colarb.s2,this.colarb.s2=i},pn.prototype.type=null,pn.prototype.colarb=null,pn.prototype.fluidarb=null,pn.prototype.sensorarb=null,pn.prototype.lazyRetire=function(e,t){if(this.cleared=!0,null==t||this.b2==t)for(var i=this.b1.arbiters,n=null,r=i.head;null!=r;){if(r.elt==this){var o,a;null==n?(a=(o=i.head).next,i.head=a,null==i.head&&(i.pushmod=!0)):(a=(o=n.next).next,null==(n.next=a)&&(i.pushmod=!0));var s=o;s.elt=null,s.next=Ko.zpp_pool,Ko.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0;break}r=(n=r).next}if(null==t||this.b1==t)for(var l=this.b2.arbiters,p=null,h=l.head;null!=h;){if(h.elt==this){var u,c;null==p?(c=(u=l.head).next,l.head=c,null==l.head&&(l.pushmod=!0)):(c=(u=p.next).next,null==(p.next=c)&&(l.pushmod=!0));var d=u;d.elt=null,d.next=Ko.zpp_pool,Ko.zpp_pool=d,l.modified=!0,l.length--,l.pushmod=!0;break}h=(p=h).next}null!=this.pair&&(this.pair.arb=null,this.pair=null),this.active=!1,e.f_arbiters.modified=!0},pn.prototype.sup_assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,l=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var p=s;p.next=l.head,l.head=p,l.modified=!0,l.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},pn.prototype.sup_retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,l=a.head;null!=l;){if(l.elt==this){var p,h;null==s?(h=(p=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(p=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=p;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}l=(s=l).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1},pn.prototype.__class__=pn;var Vo=zpp_nape.dynamics.ZPP_SensorArbiter=function(){this.next=null,pn.call(this),this.type=pn.SENSOR,this.sensorarb=this};Vo.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"],Vo.__super__=pn,Vo.prototype=Object.create(pn.prototype),Vo.prototype.next=null,Vo.prototype.alloc=function(){},Vo.prototype.free=function(){},Vo.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,l=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var p=s;p.next=l.head,l.head=p,l.modified=!0,l.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1},Vo.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,l=a.head;null!=l;){if(l.elt==this){var p,h;null==s?(h=(p=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(p=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=p;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}l=(s=l).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;this.next=Vo.zpp_pool,Vo.zpp_pool=this},Vo.prototype.makemutable=function(){},Vo.prototype.makeimmutable=function(){},Vo.prototype.__class__=Vo;var Ho=zpp_nape.dynamics.ZPP_FluidArbiter=function(){this.pre_dt=0,this.mutable=!1,this.wrap_position=null,this.buoyy=0,this.buoyx=0,this.ny=0,this.nx=0,this.lgamma=0,this.dampy=0,this.dampx=0,this.vMassc=0,this.vMassb=0,this.vMassa=0,this.agamma=0,this.adamp=0,this.wMass=0,this.nodrag=!1,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0,this.overlap=0,this.centroidy=0,this.centroidx=0,this.next=null,this.outer_zn=null,pn.call(this),this.type=pn.FLUID,(this.fluidarb=this).buoyx=0,this.buoyy=0,this.pre_dt=-1};Ho.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"],Ho.__super__=pn,Ho.prototype=Object.create(pn.prototype),Ho.prototype.outer_zn=null,Ho.prototype.next=null,Ho.prototype.alloc=function(){},Ho.prototype.free=function(){},Ho.prototype.centroidx=null,Ho.prototype.centroidy=null,Ho.prototype.overlap=null,Ho.prototype.r1x=null,Ho.prototype.r1y=null,Ho.prototype.r2x=null,Ho.prototype.r2y=null,Ho.prototype.nodrag=null,Ho.prototype.wMass=null,Ho.prototype.adamp=null,Ho.prototype.agamma=null,Ho.prototype.vMassa=null,Ho.prototype.vMassb=null,Ho.prototype.vMassc=null,Ho.prototype.dampx=null,Ho.prototype.dampy=null,Ho.prototype.lgamma=null,Ho.prototype.nx=null,Ho.prototype.ny=null,Ho.prototype.buoyx=null,Ho.prototype.buoyy=null,Ho.prototype.position_validate=function(){this.wrap_position.zpp_inner.x=this.centroidx,this.wrap_position.zpp_inner.y=this.centroidy},Ho.prototype.position_invalidate=function(e){this.centroidx=e.x,this.centroidy=e.y},Ho.prototype.wrap_position=null,Ho.prototype.getposition=function(){var e;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==el.zpp_pool?t=new el:(t=el.zpp_pool,el.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_position=e,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!this.mutable,this.wrap_position.zpp_inner._validate=$(this,this.position_validate),this.wrap_position.zpp_inner._invalidate=$(this,this.position_invalidate)},Ho.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,l=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var p=s;p.next=l.head,l.head=p,l.modified=!0,l.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.nx=0,this.ny=1,this.dampx=0,this.dampy=0,this.adamp=0},Ho.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,l=a.head;null!=l;){if(l.elt==this){var p,h;null==s?(h=(p=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(p=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=p;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}l=(s=l).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}this.b1=this.b2=null,this.active=!1,this.intchange=!1;this.next=Ho.zpp_pool,(Ho.zpp_pool=this).pre_dt=-1},Ho.prototype.mutable=null,Ho.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!1)},Ho.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_position&&(this.wrap_position.zpp_inner._immutable=!0)},Ho.prototype.inject=function(e,t,i){this.overlap=e,this.centroidx=t,this.centroidy=i},Ho.prototype.pre_dt=null,Ho.prototype.preStep=function(e,t){-1==this.pre_dt&&(this.pre_dt=t);var i=t/this.pre_dt;this.pre_dt=t,this.r1x=this.centroidx-this.b1.posx,this.r1y=this.centroidy-this.b1.posy,this.r2x=this.centroidx-this.b2.posx,this.r2y=this.centroidy-this.b2.posy;var n=0,r=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(n=this.ws1.fluidProperties.gravityx,r=this.ws1.fluidProperties.gravityy):(n=e.gravityx,r=e.gravityy);var o=0,a=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(o=this.ws2.fluidProperties.gravityx,a=this.ws2.fluidProperties.gravityy):(o=e.gravityx,a=e.gravityy);var s=0,l=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var p=this.overlap*this.ws1.fluidProperties.density,h=this.overlap*this.ws2.fluidProperties.density;if(h<p){var u=p+h;s-=n*u,l-=r*u}else if(p<h){var c=p+h;s+=o*c,l+=a*c}else{var d=0,_=0;if(d=n+o,_=r+a,d*=.5,_*=.5,this.ws1.worldCOMx*d+this.ws1.worldCOMy*_>this.ws2.worldCOMx*d+this.ws2.worldCOMy*_){var y=p+h;s-=d*y,l-=_*y}else{var m=p+h;s+=d*m,l+=_*m}}}else if(this.ws1.fluidEnabled){var f=this.overlap*this.ws1.fluidProperties.density;s-=n*f,l-=r*f}else if(this.ws2.fluidEnabled){var x=this.overlap*this.ws2.fluidProperties.density;s+=o*x,l+=a*x}if(s*=t,l*=t,this.buoyx=s,this.buoyy=l,2==this.b1.type){var v=this.b1.imass;this.b1.velx-=s*v,this.b1.vely-=l*v,this.b1.angvel-=(l*this.r1x-s*this.r1y)*this.b1.iinertia}if(2==this.b2.type){var z=this.b2.imass;this.b2.velx+=s*z,this.b2.vely+=l*z,this.b2.angvel+=(l*this.r2x-s*this.r2y)*this.b2.iinertia}if(this.ws1.fluidEnabled&&0!=this.ws1.fluidProperties.viscosity||this.ws2.fluidEnabled&&0!=this.ws2.fluidProperties.viscosity){this.nodrag=!1;var g=0;if(this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),g=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area),this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),g+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area),0!=g){var b=this.b1.sinertia+this.b2.sinertia;this.wMass=0!=b?1/b:0,g*=4e-4;var w=2*Math.PI*g;this.agamma=1/(t*w*(2+w*t));var S=1/(1+this.agamma);this.agamma*=S,this.wMass*=S}else this.wMass=0,this.agamma=0;var C=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel)),M=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));if(!(C*C+M*M<Qs.epsilon*Qs.epsilon)){var P=1/Math.sqrt(C*C+M*M);C*=P,M*=P,this.nx=C,this.ny=M}var k=0;if(this.ws1.fluidEnabled){var T=-this.ws1.fluidProperties.viscosity*this.overlap/this.ws2.area;if(0==this.ws2.type)k=0-T*this.ws2.circle.radius*Qs.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{for(var O=0,A=0,E=this.ws2.polygon.edges.head;null!=E;){var G=E.elt;O+=G.length;var I=T*G.length*(G.gnormx*this.nx+G.gnormy*this.ny);0<I&&(I=I*=-Qs.fluidVacuumDrag),A-=.5*I*Qs.fluidLinearDrag,E=E.next}k=A/O}}if(this.ws2.fluidEnabled){var B=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area;if(0==this.ws1.type)k-=B*this.ws1.circle.radius*Qs.fluidLinearDrag/(2*this.ws1.circle.radius*Math.PI);else{for(var L=0,D=0,R=this.ws1.polygon.edges.head;null!=R;){var F=R.elt;L+=F.length;var j=B*F.length*(F.gnormx*this.nx+F.gnormy*this.ny);0<j&&(j=j*=-Qs.fluidVacuumDrag),D-=.5*j*Qs.fluidLinearDrag,R=R.next}k+=D/L}}if(0!=k){var N=this.b1.smass+this.b2.smass,U=0,V=0,H=0;if(H=U=N,(V=0)!=this.b1.sinertia){var W=this.r1x*this.b1.sinertia,X=this.r1y*this.b1.sinertia;U=N+X*this.r1y,V+=-X*this.r1x,H=N+W*this.r1x}if(0!=this.b2.sinertia){var q=this.r2x*this.b2.sinertia,Y=this.r2y*this.b2.sinertia;U+=Y*this.r2y,V+=-Y*this.r2x,H+=q*this.r2x}var K=U*H-V*V;if(K!=K)U=V=H=0;else if(0==K)U=0!=U?1/U:0,H=0!=H?1/H:0,V=0;else{var Z=H*(K=1/K);H=U*K,U=Z,V*=-K}this.vMassa=U,this.vMassb=V,this.vMassc=H;var J=2*Math.PI*k;this.lgamma=1/(t*J*(2+J*t));var Q=1/(1+this.lgamma);this.lgamma*=Q,this.vMassa*=Q,this.vMassb*=Q,this.vMassc*=Q}else this.vMassa=0,this.vMassb=0,this.vMassc=0,this.lgamma=0}else this.nodrag=!0,this.dampx=0,this.dampy=0,this.adamp=0;this.dampx*=i,this.dampy*=i,this.adamp*=i},Ho.prototype.warmStart=function(){var e=this.b1.imass;this.b1.velx-=this.dampx*e,this.b1.vely-=this.dampy*e;var t=this.b2.imass;this.b2.velx+=this.dampx*t,this.b2.vely+=this.dampy*t,this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y),this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y),this.b1.angvel-=this.adamp*this.b1.iinertia,this.b2.angvel+=this.adamp*this.b2.iinertia},Ho.prototype.applyImpulseVel=function(){if(!this.nodrag){var e=this.b1.angvel+this.b1.kinangvel,t=this.b2.angvel+this.b2.kinangvel,i=this.b1.velx+this.b1.kinvelx-this.r1y*e-(this.b2.velx+this.b2.kinvelx-this.r2y*t),n=this.b1.vely+this.b1.kinvely+this.r1x*e-(this.b2.vely+this.b2.kinvely+this.r2x*t),r=this.vMassa*i+this.vMassb*n;n=this.vMassb*i+this.vMassc*n,i=r;var o=this.lgamma;i-=this.dampx*o,n-=this.dampy*o,this.dampx+=i,this.dampy+=n;var a=this.b1.imass;this.b1.velx-=i*a,this.b1.vely-=n*a;var s=this.b2.imass;this.b2.velx+=i*s,this.b2.vely+=n*s,this.b1.angvel-=this.b1.iinertia*(n*this.r1x-i*this.r1y),this.b2.angvel+=this.b2.iinertia*(n*this.r2x-i*this.r2y);var l=(e-t)*this.wMass-this.adamp*this.agamma;this.adamp+=l,this.b1.angvel-=l*this.b1.iinertia,this.b2.angvel+=l*this.b2.iinertia}},Ho.prototype.__class__=Ho;var Wo=zpp_nape.dynamics.ZPP_ColArbiter=function(){this.pre_dt=0,this.mutable=!1,this.stat=!1,this.next=null,this.hpc2=!1,this.hc2=!1,this.oc2=null,this.c2=null,this.oc1=null,this.c1=null,this.__ref_vertex=0,this.__ref_edge2=null,this.__ref_edge1=null,this.biasCoef=0,this.rev=!1,this.radius=0,this.lproj=0,this.lnormy=0,this.lnormx=0,this.surfacey=0,this.surfacex=0,this.k2y=0,this.k2x=0,this.k1y=0,this.k1x=0,this.rt2b=0,this.rn2b=0,this.rt2a=0,this.rn2a=0,this.rt1b=0,this.rn1b=0,this.rt1a=0,this.rn1a=0,this.jrAcc=0,this.rMass=0,this.Kc=0,this.Kb=0,this.Ka=0,this.kMassc=0,this.kMassb=0,this.kMassa=0,this.wrap_normal=null,this.ny=0,this.nx=0,this.innards=null,this.wrap_contacts=null,this.contacts=null,this.s2=null,this.s1=null,this.userdef_rfric=!1,this.userdef_restitution=!1,this.userdef_stat_fric=!1,this.userdef_dyn_fric=!1,this.rfric=0,this.restitution=0,this.stat_fric=0,this.dyn_fric=0,this.outer_zn=null,pn.call(this),this.pre_dt=-1,this.contacts=new Xo,this.innards=new mt,this.type=pn.COL,this.colarb=this};Wo.__name__=["zpp_nape","dynamics","ZPP_ColArbiter"],Wo.__super__=pn,Wo.prototype=Object.create(pn.prototype),Wo.prototype.outer_zn=null,Wo.prototype.dyn_fric=null,Wo.prototype.stat_fric=null,Wo.prototype.restitution=null,Wo.prototype.rfric=null,Wo.prototype.userdef_dyn_fric=null,Wo.prototype.userdef_stat_fric=null,Wo.prototype.userdef_restitution=null,Wo.prototype.userdef_rfric=null,Wo.prototype.s1=null,Wo.prototype.s2=null,Wo.prototype.contacts=null,Wo.prototype.wrap_contacts=null,Wo.prototype.innards=null,Wo.prototype.nx=null,Wo.prototype.ny=null,Wo.prototype.normal_validate=function(){if(this.cleared)throw new r("Error: Arbiter not currently in use");this.wrap_normal.zpp_inner.x=this.nx,this.wrap_normal.zpp_inner.y=this.ny,this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},Wo.prototype.wrap_normal=null,Wo.prototype.getnormal=function(){var e;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==el.zpp_pool?t=new el:(t=el.zpp_pool,el.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_normal=e,this.wrap_normal.zpp_inner._immutable=!0,this.wrap_normal.zpp_inner._inuse=!0,this.wrap_normal.zpp_inner._validate=$(this,this.normal_validate)},Wo.prototype.kMassa=null,Wo.prototype.kMassb=null,Wo.prototype.kMassc=null,Wo.prototype.Ka=null,Wo.prototype.Kb=null,Wo.prototype.Kc=null,Wo.prototype.rMass=null,Wo.prototype.jrAcc=null,Wo.prototype.rn1a=null,Wo.prototype.rt1a=null,Wo.prototype.rn1b=null,Wo.prototype.rt1b=null,Wo.prototype.rn2a=null,Wo.prototype.rt2a=null,Wo.prototype.rn2b=null,Wo.prototype.rt2b=null,Wo.prototype.k1x=null,Wo.prototype.k1y=null,Wo.prototype.k2x=null,Wo.prototype.k2y=null,Wo.prototype.surfacex=null,Wo.prototype.surfacey=null,Wo.prototype.ptype=null,Wo.prototype.lnormx=null,Wo.prototype.lnormy=null,Wo.prototype.lproj=null,Wo.prototype.radius=null,Wo.prototype.rev=null,Wo.prototype.biasCoef=null,Wo.prototype.__ref_edge1=null,Wo.prototype.__ref_edge2=null,Wo.prototype.__ref_vertex=null,Wo.prototype.c1=null,Wo.prototype.oc1=null,Wo.prototype.c2=null,Wo.prototype.oc2=null,Wo.prototype.hc2=null,Wo.prototype.hpc2=null,Wo.prototype.next=null,Wo.prototype.alloc=function(){},Wo.prototype.free=function(){this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null},Wo.prototype.stat=null,Wo.prototype.injectContact=function(e,t,i,n,r,o,a){null==a&&(a=!1);for(var s=null,l=this.contacts.next;null!=l;){var p=l;if(o==p.hash){s=p;break}l=l.next}if(null==s){null==Xo.zpp_pool?s=new Xo:(s=Xo.zpp_pool,Xo.zpp_pool=s.next,s.next=null);var h=s.inner;h.jnAcc=h.jtAcc=0,s.hash=o,s.fresh=!0,(s.arbiter=this).jrAcc=0;var u=this.contacts;s._inuse=!0;var c=s;c.next=u.next,u.next=c,u.modified=!0,u.length++,this.innards.add(h)}else s.fresh=!1;return s.px=e,s.py=t,this.nx=i,this.ny=n,s.dist=r,s.stamp=this.stamp,s.posOnly=a,s},Wo.prototype.assign=function(e,t,i,n){this.b1=e.body,this.ws1=e,this.b2=t.body,this.ws2=t,this.id=i,this.di=n;var r,o=this.b1.arbiters;null==Ko.zpp_pool?r=new Ko:(r=Ko.zpp_pool,Ko.zpp_pool=r.next,r.next=null),r.elt=this;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s,l=this.b2.arbiters;null==Ko.zpp_pool?s=new Ko:(s=Ko.zpp_pool,Ko.zpp_pool=s.next,s.next=null),s.elt=this;var p=s;p.next=l.head,l.head=p,l.modified=!0,l.length++,this.active=!0,this.present=0,this.cleared=!1,this.sleeping=!1,this.fresh=!1,this.presentable=!1,this.s1=e,this.s2=t,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},Wo.prototype.calcProperties=function(){this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))},Wo.prototype.validate_props=function(){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction)))},Wo.prototype.retire=function(){if(!this.cleared){for(var e=this.b1.arbiters,t=null,i=e.head;null!=i;){if(i.elt==this){var n,r;null==t?(r=(n=e.head).next,e.head=r,null==e.head&&(e.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(e.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,e.modified=!0,e.length--,e.pushmod=!0;break}i=(t=i).next}for(var a=this.b2.arbiters,s=null,l=a.head;null!=l;){if(l.elt==this){var p,h;null==s?(h=(p=a.head).next,a.head=h,null==a.head&&(a.pushmod=!0)):(h=(p=s.next).next,null==(s.next=h)&&(a.pushmod=!0));var u=p;u.elt=null,u.next=Ko.zpp_pool,Ko.zpp_pool=u,a.modified=!0,a.length--,a.pushmod=!0;break}l=(s=l).next}null!=this.pair&&(this.pair.arb=null,this.pair=null)}for(this.b1=this.b2=null,this.active=!1,this.intchange=!1;null!=this.contacts.next;){var c=this.contacts,d=c.next;c.pop(),d.arbiter=null,d.next=Xo.zpp_pool,Xo.zpp_pool=d;var _=this.innards,y=_.next;_.next=y.next,y._inuse=!1,null==_.next&&(_.pushmod=!0),_.modified=!0,_.length--}this.userdef_dyn_fric=!1,this.userdef_stat_fric=!1,this.userdef_restitution=!1,this.userdef_rfric=!1,this.__ref_edge1=this.__ref_edge2=null,this.next=Wo.zpp_pool,(Wo.zpp_pool=this).pre_dt=-1},Wo.prototype.mutable=null,Wo.prototype.makemutable=function(){this.mutable=!0,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!1),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!1)},Wo.prototype.makeimmutable=function(){this.mutable=!1,null!=this.wrap_normal&&(this.wrap_normal.zpp_inner._immutable=!0),null!=this.wrap_contacts&&(this.wrap_contacts.zpp_inner.immutable=!0)},Wo.prototype.contacts_adder=function(e){return!1},Wo.prototype.contacts_subber=function(e){for(var t=null,i=null,n=this.innards.next,r=this.contacts.next;null!=r;){var o=r;if(o==e.zpp_inner){this.contacts.erase(t),this.innards.erase(i),o.arbiter=null,o.next=Xo.zpp_pool,Xo.zpp_pool=o;break}t=r,n=(i=n).next,r=r.next}},Wo.prototype.setupcontacts=function(){this.wrap_contacts=Rn.get(this.contacts,!0),this.wrap_contacts.zpp_inner.immutable=!this.mutable,this.wrap_contacts.zpp_inner.adder=$(this,this.contacts_adder),this.wrap_contacts.zpp_inner.dontremove=!0,this.wrap_contacts.zpp_inner.subber=$(this,this.contacts_subber)},Wo.prototype.cleanupContacts=function(){var e=!0,t=null,i=null,n=this.innards.next;this.hc2=!1;for(var r=this.contacts.next;null!=r;){var o=r;if(o.stamp+Qs.arbiterExpirationDelay<this.stamp){var a,s,l=this.contacts;null==t?(s=(a=l.next).next,l.next=s,null==l.next&&(l.pushmod=!0)):(s=(a=t.next).next,null==(t.next=s)&&(l.pushmod=!0)),a._inuse=!1,l.modified=!0,l.length--,l.pushmod=!0,r=s;var p,h,u=this.innards;null==i?(h=(p=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(p=i.next).next,null==(i.next=h)&&(u.pushmod=!0)),p._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,n=h,o.arbiter=null,o.next=Xo.zpp_pool,Xo.zpp_pool=o}else{var c=o.inner,d=o.active;o.active=o.stamp==this.stamp,o.active&&(e?(e=!1,this.c1=c,this.oc1=o):(this.hc2=!0,this.c2=c,this.oc2=o)),d!=o.active&&(this.contacts.modified=!0),t=r,n=(i=n).next,r=r.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var _=this.c1;this.c1=this.c2,this.c2=_;var y=this.oc1;this.oc1=this.oc2,this.oc2=y,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(e=!0)}else this.hpc2=!1;return e},Wo.prototype.pre_dt=null,Wo.prototype.preStep=function(e){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.s1.material.elasticity<=-1/0||this.s2.material.elasticity<=-1/0?this.restitution=0:this.s1.material.elasticity>=1/0||this.s2.material.elasticity>=1/0?this.restitution=1:this.restitution=(this.s1.material.elasticity+this.s2.material.elasticity)/2,this.restitution<0&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*this.s2.material.rollingFriction))),-1==this.pre_dt&&(this.pre_dt=e);var t=e/this.pre_dt;this.pre_dt=e;var i=this.b1.smass+this.b2.smass,n=!(this.hc2=!1);this.biasCoef=2!=this.b1.type||2!=this.b2.type?this.continuous?Qs.contactContinuousStaticBiasCoef:Qs.contactStaticBiasCoef:this.continuous?Qs.contactContinuousBiasCoef:Qs.contactBiasCoef,this.continuous=!1;for(var r=null,o=null,a=this.innards.next,s=this.contacts.next;null!=s;){var l=s;if(l.stamp+Qs.arbiterExpirationDelay<this.stamp){var p,h,u=this.contacts;null==r?(h=(p=u.next).next,u.next=h,null==u.next&&(u.pushmod=!0)):(h=(p=r.next).next,null==(r.next=h)&&(u.pushmod=!0)),p._inuse=!1,u.modified=!0,u.length--,u.pushmod=!0,s=h;var c,d,_=this.innards;null==o?(d=(c=_.next).next,_.next=d,null==_.next&&(_.pushmod=!0)):(d=(c=o.next).next,null==(o.next=d)&&(_.pushmod=!0)),c._inuse=!1,_.modified=!0,_.length--,_.pushmod=!0,a=d,l.arbiter=null,l.next=Xo.zpp_pool,Xo.zpp_pool=l}else{var y=l.inner,m=l.active;if(l.active=l.stamp==this.stamp,l.active){n?(n=!1,this.c1=y,this.oc1=l):(this.hc2=!0,this.c2=y,this.oc2=l),y.r2x=l.px-this.b2.posx,y.r2y=l.py-this.b2.posy,y.r1x=l.px-this.b1.posx,y.r1y=l.py-this.b1.posy;var f=y.r2x*this.nx+y.r2y*this.ny,x=i+this.b2.sinertia*(f*f),v=y.r1x*this.nx+y.r1y*this.ny;x+=this.b1.sinertia*(v*v),y.tMass=x<Qs.epsilon*Qs.epsilon?0:1/x;var z=this.ny*y.r2x-this.nx*y.r2y,g=i+this.b2.sinertia*(z*z),b=this.ny*y.r1x-this.nx*y.r1y;g+=this.b1.sinertia*(b*b),y.nMass=g<Qs.epsilon*Qs.epsilon?0:1/g;var w=0,S=0,C=this.b2.angvel+this.b2.kinangvel;w=this.b2.velx+this.b2.kinvelx-y.r2y*C,S=this.b2.vely+this.b2.kinvely+y.r2x*C,C=this.b1.angvel+this.b1.kinangvel,w-=this.b1.velx+this.b1.kinvelx-y.r1y*C,S-=this.b1.vely+this.b1.kinvely+y.r1x*C;var M=this.nx*w+this.ny*S;l.elasticity=this.restitution,y.bounce=M*l.elasticity,y.bounce>-Qs.elasticThreshold&&(y.bounce=0),M=S*this.nx-w*this.ny;var P=Qs.staticFrictionThreshold;y.friction=P*P<M*M?this.dyn_fric:this.stat_fric,y.jnAcc*=t,y.jtAcc*=t}m!=l.active&&(this.contacts.modified=!0),r=s,a=(o=a).next,s=s.next}}if(this.hc2){if(this.hpc2=!0,this.oc1.posOnly){var k=this.c1;this.c1=this.c2,this.c2=k;var T=this.oc1;this.oc1=this.oc2,this.oc2=T,this.hc2=!1}else this.oc2.posOnly&&(this.hc2=!1);this.oc1.posOnly&&(n=!0)}else this.hpc2=!1;if(this.jrAcc*=t,n||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel)),this.hc2)if(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=i+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=i+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=i+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<Qs.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)){this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc;var O=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(O!=O)this.kMassa=this.kMassb=this.kMassc=0;else if(0==O)0!=this.kMassa?this.kMassa=1/this.kMassa:this.kMassa=0,0!=this.kMassc?this.kMassc=1/this.kMassc:this.kMassc=0,this.kMassb=0;else{O=1/O;var A=this.kMassc*O;this.kMassc=this.kMassa*O,this.kMassa=A,this.kMassb*=-O}}else{if(this.hc2=!1,this.oc2.dist<this.oc1.dist){var E=this.c1;this.c1=this.c2,this.c2=E}this.oc2.active=!1,this.contacts.modified=!0}return this.surfacex=this.b2.svelx,this.surfacey=this.b2.svely,this.surfacex+=this.b1.svelx,this.surfacey+=this.b1.svely,this.surfacex=-this.surfacex,this.surfacey=-this.surfacey,this.rMass=this.b1.sinertia+this.b2.sinertia,0!=this.rMass&&(this.rMass=1/this.rMass),n},Wo.prototype.warmStart=function(){var e=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,t=this.ny*this.c1.jnAcc+this.nx*this.c1.jtAcc,i=this.b1.imass;this.b1.velx-=e*i,this.b1.vely-=t*i,this.b1.angvel-=this.b1.iinertia*(t*this.c1.r1x-e*this.c1.r1y);var n=this.b2.imass;if(this.b2.velx+=e*n,this.b2.vely+=t*n,this.b2.angvel+=this.b2.iinertia*(t*this.c1.r2x-e*this.c1.r2y),this.hc2){var r=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,o=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,a=this.b1.imass;this.b1.velx-=r*a,this.b1.vely-=o*a,this.b1.angvel-=this.b1.iinertia*(o*this.c2.r1x-r*this.c2.r1y);var s=this.b2.imass;this.b2.velx+=r*s,this.b2.vely+=o*s,this.b2.angvel+=this.b2.iinertia*(o*this.c2.r2x-r*this.c2.r2y)}this.b2.angvel+=this.jrAcc*this.b2.iinertia,this.b1.angvel-=this.jrAcc*this.b1.iinertia},Wo.prototype.applyImpulseVel=function(){var e,t,i,n,r,o,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);if(i=(s*this.nx-a*this.ny+this.surfacex)*this.c1.tMass,(n=this.c1.friction*this.c1.jnAcc)<(o=(r=this.c1.jtAcc)-i)?o=n:o<-n&&(o=-n),i=o-r,this.c1.jtAcc=o,e=-this.ny*i,t=this.nx*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rt1b*i*this.b2.iinertia,this.b1.angvel-=this.rt1a*i*this.b1.iinertia,this.hc2){var l=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),p=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);i=(p*this.nx-l*this.ny+this.surfacex)*this.c2.tMass,(n=this.c2.friction*this.c2.jnAcc)<(o=(r=this.c2.jtAcc)-i)?o=n:o<-n&&(o=-n),i=o-r,this.c2.jtAcc=o,e=-this.ny*i,t=this.nx*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rt2b*i*this.b2.iinertia,this.b1.angvel-=this.rt2a*i*this.b1.iinertia,a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),l=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),p=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel);var h=this.c1.jnAcc,u=this.c2.jnAcc,c=a*this.nx+s*this.ny+this.surfacey+this.c1.bounce-(this.Ka*h+this.Kb*u),d=l*this.nx+p*this.ny+this.surfacey+this.c2.bounce-(this.Kb*h+this.Kc*u),_=-(this.kMassa*c+this.kMassb*d),y=-(this.kMassb*c+this.kMassc*d);0<=_&&0<=y?(c=_-h,d=y-u,this.c1.jnAcc=_,this.c2.jnAcc=y):0<=(_=-this.c1.nMass*c)&&0<=this.Kb*_+d?(c=_-h,d=-u,this.c1.jnAcc=_,this.c2.jnAcc=0):0<=(y=-this.c2.nMass*d)&&0<=this.Kb*y+c?(c=-h,d=y-u,this.c1.jnAcc=0,this.c2.jnAcc=y):0<=c&&0<=d?(c=-h,d=-u,this.c1.jnAcc=this.c2.jnAcc=0):d=c=0,i=c+d,e=this.nx*i,t=this.ny*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=(this.rn1b*c+this.rn2b*d)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*c+this.rn2a*d)*this.b1.iinertia}else 0!=this.radius&&(i=(this.b2.angvel-this.b1.angvel)*this.rMass,n=this.rfric*this.c1.jnAcc,r=this.jrAcc,this.jrAcc-=i,this.jrAcc>n?this.jrAcc=n:this.jrAcc<-n&&(this.jrAcc=-n),i=this.jrAcc-r,this.b2.angvel+=i*this.b2.iinertia,this.b1.angvel-=i*this.b1.iinertia),a=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),s=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),i=(this.c1.bounce+(this.nx*a+this.ny*s)+this.surfacey)*this.c1.nMass,(o=(r=this.c1.jnAcc)-i)<0&&(o=0),i=o-r,this.c1.jnAcc=o,e=this.nx*i,t=this.ny*i,this.b2.velx+=e*this.b2.imass,this.b2.vely+=t*this.b2.imass,this.b1.velx-=e*this.b1.imass,this.b1.vely-=t*this.b1.imass,this.b2.angvel+=this.rn1b*i*this.b2.iinertia,this.b1.angvel-=this.rn1a*i*this.b1.iinertia},Wo.prototype.applyImpulsePos=function(){if(2==this.ptype){var e=this.c1,t=0,i=0;t=this.b2.axisy*e.lr2x-this.b2.axisx*e.lr2y,i=e.lr2x*this.b2.axisx+e.lr2y*this.b2.axisy,t+=this.b2.posx,i+=this.b2.posy;var n=0,r=0;n=this.b1.axisy*e.lr1x-this.b1.axisx*e.lr1y,r=e.lr1x*this.b1.axisx+e.lr1y*this.b1.axisy;var o=0,a=0;o=t-(n+=this.b1.posx),a=i-(r+=this.b1.posy);var s=Math.sqrt(o*o+a*a),l=this.radius-Qs.collisionSlop,p=s-l;if(o*this.nx+a*this.ny<0&&(o=-o,a=-a,p-=this.radius),p<0)if(s<Qs.epsilon)0!=this.b1.smass?this.b1.posx+=10*Qs.epsilon:this.b2.posx+=10*Qs.epsilon;else{var h=1/s;o*=h;var u=.5*(n+t),c=.5*(r+i),d=s-l,_=(a*=h)*(n=u-this.b1.posx)-o*(r=c-this.b1.posy),y=a*(t=u-this.b2.posx)-o*(i=c-this.b2.posy),m=this.b2.smass+y*y*this.b2.sinertia+this.b1.smass+_*_*this.b1.sinertia;if(0!=m){var f,x,v=-this.biasCoef*d/m;f=o*v,x=a*v;var z=this.b1.imass;this.b1.posx-=f*z,this.b1.posy-=x*z;var g=this.b1,b=-_*this.b1.iinertia*v;if(g.rot+=b,1e-4<b*b)g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot);else{var w=b*b,S=1-.5*w,C=1-w*w/8,M=(S*g.axisx+b*g.axisy)*C;g.axisy=(S*g.axisy-b*g.axisx)*C,g.axisx=M}var P=this.b2.imass;this.b2.posx+=f*P,this.b2.posy+=x*P;var k=this.b2,T=y*this.b2.iinertia*v;if(k.rot+=T,1e-4<T*T)k.axisx=Math.sin(k.rot),k.axisy=Math.cos(k.rot);else{var O=T*T,A=1-.5*O,E=1-O*O/8,G=(A*k.axisx+T*k.axisy)*E;k.axisy=(A*k.axisy-T*k.axisx)*E,k.axisx=G}}}}else{var I,B=0,L=0,D=0,R=0,F=0,j=0;0==this.ptype?(B=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,L=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,I=this.lproj+(B*this.b1.posx+L*this.b1.posy),D=this.b2.axisy*this.c1.lr1x-this.b2.axisx*this.c1.lr1y,R=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,D+=this.b2.posx,R+=this.b2.posy,this.hpc2&&(F=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,j=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,F+=this.b2.posx,j+=this.b2.posy)):(B=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,L=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,I=this.lproj+(B*this.b2.posx+L*this.b2.posy),D=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,R=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,D+=this.b1.posx,R+=this.b1.posy,this.hpc2&&(F=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,j=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,F+=this.b1.posx,j+=this.b1.posy));var N=D*B+R*L-I-this.radius;N+=Qs.collisionSlop;var U=0;if(this.hpc2&&(U=F*B+j*L-I-this.radius,U+=Qs.collisionSlop),N<0||U<0){this.rev&&(B=-B,L=-L);var V,H;V=D-this.b1.posx,H=R-this.b1.posy;var W,X;W=D-this.b2.posx,X=R-this.b2.posy;if(this.hpc2){var q=L*V-B*H,Y=L*W-B*X,K=L*(F-this.b1.posx)-B*(j-this.b1.posy),Z=L*(F-this.b2.posx)-B*(j-this.b2.posy),J=this.b1.smass+this.b2.smass;this.kMassa=J+this.b1.sinertia*q*q+this.b2.sinertia*Y*Y,this.kMassb=J+this.b1.sinertia*q*K+this.b2.sinertia*Y*Z,this.kMassc=J+this.b1.sinertia*K*K+this.b2.sinertia*Z*Z;var Q,$,ee;Q=this.kMassa,$=this.kMassb,ee=this.kMassc;for(var te=N*this.biasCoef,ie=U*this.biasCoef;;){var ne=0,re=0;ne=-(ne=te),re=-(re=ie);var oe=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(oe!=oe)ne=re=0;else if(0==oe)0!=this.kMassa?ne/=this.kMassa:ne=0,0!=this.kMassc?re/=this.kMassc:re=0;else{var ae=(oe=1/oe)*(this.kMassc*ne-this.kMassb*re);re=oe*(this.kMassa*re-this.kMassb*ne),ne=ae}if(0<=ne&&0<=re){var se=(ne+re)*this.b1.imass;this.b1.posx-=B*se,this.b1.posy-=L*se;var le=this.b1,pe=-this.b1.iinertia*(q*ne+K*re);if(le.rot+=pe,1e-4<pe*pe)le.axisx=Math.sin(le.rot),le.axisy=Math.cos(le.rot);else{var he=pe*pe,ue=1-.5*he,ce=1-he*he/8,de=(ue*le.axisx+pe*le.axisy)*ce;le.axisy=(ue*le.axisy-pe*le.axisx)*ce,le.axisx=de}var _e=(ne+re)*this.b2.imass;this.b2.posx+=B*_e,this.b2.posy+=L*_e;var ye=this.b2,me=this.b2.iinertia*(Y*ne+Z*re);if(ye.rot+=me,1e-4<me*me)ye.axisx=Math.sin(ye.rot),ye.axisy=Math.cos(ye.rot);else{var fe=me*me,xe=1-.5*fe,ve=1-fe*fe/8,ze=(xe*ye.axisx+me*ye.axisy)*ve;ye.axisy=(xe*ye.axisy-me*ye.axisx)*ve,ye.axisx=ze}break}if((re=0)<=(ne=-te/Q)&&0<=$*ne+ie){var ge=(ne+re)*this.b1.imass;this.b1.posx-=B*ge,this.b1.posy-=L*ge;var be=this.b1,we=-this.b1.iinertia*(q*ne+K*re);if(be.rot+=we,1e-4<we*we)be.axisx=Math.sin(be.rot),be.axisy=Math.cos(be.rot);else{var Se=we*we,Ce=1-.5*Se,Me=1-Se*Se/8,Pe=(Ce*be.axisx+we*be.axisy)*Me;be.axisy=(Ce*be.axisy-we*be.axisx)*Me,be.axisx=Pe}var ke=(ne+re)*this.b2.imass;this.b2.posx+=B*ke,this.b2.posy+=L*ke;var Te=this.b2,Oe=this.b2.iinertia*(Y*ne+Z*re);if(Te.rot+=Oe,1e-4<Oe*Oe)Te.axisx=Math.sin(Te.rot),Te.axisy=Math.cos(Te.rot);else{var Ae=Oe*Oe,Ee=1-.5*Ae,Ge=1-Ae*Ae/8,Ie=(Ee*Te.axisx+Oe*Te.axisy)*Ge;Te.axisy=(Ee*Te.axisy-Oe*Te.axisx)*Ge,Te.axisx=Ie}break}if((ne=0)<=(re=-ie/ee)&&0<=$*re+te){var Be=(ne+re)*this.b1.imass;this.b1.posx-=B*Be,this.b1.posy-=L*Be;var Le=this.b1,De=-this.b1.iinertia*(q*ne+K*re);if(Le.rot+=De,1e-4<De*De)Le.axisx=Math.sin(Le.rot),Le.axisy=Math.cos(Le.rot);else{var Re=De*De,Fe=1-.5*Re,je=1-Re*Re/8,Ne=(Fe*Le.axisx+De*Le.axisy)*je;Le.axisy=(Fe*Le.axisy-De*Le.axisx)*je,Le.axisx=Ne}var Ue=(ne+re)*this.b2.imass;this.b2.posx+=B*Ue,this.b2.posy+=L*Ue;var Ve=this.b2,He=this.b2.iinertia*(Y*ne+Z*re);if(Ve.rot+=He,1e-4<He*He)Ve.axisx=Math.sin(Ve.rot),Ve.axisy=Math.cos(Ve.rot);else{var We=He*He,Xe=1-.5*We,qe=1-We*We/8,Ye=(Xe*Ve.axisx+He*Ve.axisy)*qe;Ve.axisy=(Xe*Ve.axisy-He*Ve.axisx)*qe,Ve.axisx=Ye}break}break}}else{var Ke=L*V-B*H,Ze=L*W-B*X,Je=this.b2.smass+Ze*Ze*this.b2.sinertia+this.b1.smass+Ke*Ke*this.b1.sinertia;if(0!=Je){var Qe,$e,et=-this.biasCoef*N/Je;Qe=B*et,$e=L*et;var tt=this.b1.imass;this.b1.posx-=Qe*tt,this.b1.posy-=$e*tt;var it=this.b1,nt=-Ke*this.b1.iinertia*et;if(it.rot+=nt,1e-4<nt*nt)it.axisx=Math.sin(it.rot),it.axisy=Math.cos(it.rot);else{var rt=nt*nt,ot=1-.5*rt,at=1-rt*rt/8,st=(ot*it.axisx+nt*it.axisy)*at;it.axisy=(ot*it.axisy-nt*it.axisx)*at,it.axisx=st}var lt=this.b2.imass;this.b2.posx+=Qe*lt,this.b2.posy+=$e*lt;var pt=this.b2,ht=Ze*this.b2.iinertia*et;if(pt.rot+=ht,1e-4<ht*ht)pt.axisx=Math.sin(pt.rot),pt.axisy=Math.cos(pt.rot);else{var ut=ht*ht,ct=1-.5*ut,dt=1-ut*ut/8,_t=(ct*pt.axisx+ht*pt.axisy)*dt;pt.axisy=(ct*pt.axisy-ht*pt.axisx)*dt,pt.axisx=_t}}}}}},Wo.prototype.__class__=Wo;var Xo=zpp_nape.dynamics.ZPP_Contact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.elasticity=0,this.dist=0,this.fresh=!1,this.hash=0,this.stamp=0,this.posOnly=!1,this.active=!1,this.inner=null,this.arbiter=null,this.wrap_position=null,this.py=0,this.px=0,this.outer=null,this.inner=new mt};Xo.__name__=["zpp_nape","dynamics","ZPP_Contact"],Xo.prototype.outer=null,Xo.prototype.wrapper=function(){return null==this.outer&&(Xo.internal=!0,this.outer=new B,Xo.internal=!1,this.outer.zpp_inner=this),this.outer},Xo.prototype.px=null,Xo.prototype.py=null,Xo.prototype.position_validate=function(){this.wrap_position.zpp_inner.x=this.px,this.wrap_position.zpp_inner.y=this.py},Xo.prototype.wrap_position=null,Xo.prototype.getposition=function(){var e;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var t;null==el.zpp_pool?t=new el:(t=el.zpp_pool,el.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!1,t.x=0,t.y=0,e.zpp_inner=t,e.zpp_inner.outer=e}else{var i,n=e.zpp_inner;if(null!=n._validate&&n._validate(),0==e.zpp_inner.x){var r=e.zpp_inner;null!=r._validate&&r._validate(),i=0==e.zpp_inner.y}else i=!1;if(!i){e.zpp_inner.x=0,e.zpp_inner.y=0;var o=e.zpp_inner;null!=o._invalidate&&o._invalidate(o)}}e.zpp_inner.weak=!1,this.wrap_position=e,this.wrap_position.zpp_inner._inuse=!0,this.wrap_position.zpp_inner._immutable=!0,this.wrap_position.zpp_inner._validate=$(this,this.position_validate)},Xo.prototype.inactiveme=function(){return!(this.active&&null!=this.arbiter&&this.arbiter.active)},Xo.prototype.arbiter=null,Xo.prototype.inner=null,Xo.prototype.active=null,Xo.prototype.posOnly=null,Xo.prototype.stamp=null,Xo.prototype.hash=null,Xo.prototype.fresh=null,Xo.prototype.dist=null,Xo.prototype.elasticity=null,Xo.prototype.free=function(){this.arbiter=null},Xo.prototype.alloc=function(){},Xo.prototype.next=null,Xo.prototype.elem=function(){return this},Xo.prototype.begin=function(){return this.next},Xo.prototype._inuse=null,Xo.prototype.modified=null,Xo.prototype.pushmod=null,Xo.prototype.length=null,Xo.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Xo.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Xo.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Xo.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Xo.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Xo.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Xo.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Xo.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Xo.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Xo.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Xo.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Xo.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Xo.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Xo.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Xo.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Xo.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Xo.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Xo.prototype.clear=function(){},Xo.prototype.inlined_clear=function(){},Xo.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Xo.prototype.empty=function(){return null==this.next},Xo.prototype.size=function(){return this.length},Xo.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Xo.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Xo.prototype.front=function(){return this.next},Xo.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Xo.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Xo.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Xo.prototype.__class__=Xo;var mt=zpp_nape.dynamics.ZPP_IContact=function(){this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.lr2y=0,this.lr2x=0,this.lr1y=0,this.lr1x=0,this.jtAcc=0,this.jnAcc=0,this.friction=0,this.bounce=0,this.tMass=0,this.nMass=0,this.r2y=0,this.r2x=0,this.r1y=0,this.r1x=0};mt.__name__=["zpp_nape","dynamics","ZPP_IContact"],mt.prototype.r1x=null,mt.prototype.r1y=null,mt.prototype.r2x=null,mt.prototype.r2y=null,mt.prototype.nMass=null,mt.prototype.tMass=null,mt.prototype.bounce=null,mt.prototype.friction=null,mt.prototype.jnAcc=null,mt.prototype.jtAcc=null,mt.prototype.lr1x=null,mt.prototype.lr1y=null,mt.prototype.lr2x=null,mt.prototype.lr2y=null,mt.prototype.next=null,mt.prototype.elem=function(){return this},mt.prototype.begin=function(){return this.next},mt.prototype._inuse=null,mt.prototype.modified=null,mt.prototype.pushmod=null,mt.prototype.length=null,mt.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},mt.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},mt.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},mt.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},mt.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},mt.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},mt.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},mt.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},mt.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},mt.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},mt.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mt.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},mt.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},mt.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},mt.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},mt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},mt.prototype.clear=function(){},mt.prototype.inlined_clear=function(){},mt.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},mt.prototype.empty=function(){return null==this.next},mt.prototype.size=function(){return this.length},mt.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},mt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},mt.prototype.front=function(){return this.next},mt.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},mt.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},mt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},mt.prototype.__class__=mt;var ft=zpp_nape.dynamics.ZPP_InteractionFilter=function(){this.fluidMask=0,this.fluidGroup=0,this.sensorMask=0,this.sensorGroup=0,this.collisionMask=0,this.collisionGroup=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new mi,this.collisionGroup=this.sensorGroup=this.fluidGroup=1,this.collisionMask=this.sensorMask=this.fluidMask=-1};ft.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"],ft.prototype.next=null,ft.prototype.userData=null,ft.prototype.outer=null,ft.prototype.wrapper=function(){if(null==this.outer){this.outer=new R;var e=this.outer.zpp_inner;e.outer=null,e.next=ft.zpp_pool,ft.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},ft.prototype.free=function(){this.outer=null},ft.prototype.alloc=function(){},ft.prototype.shapes=null,ft.prototype.wrap_shapes=null,ft.prototype.feature_cons=function(){this.shapes=new mi},ft.prototype.addShape=function(e){this.shapes.add(e)},ft.prototype.remShape=function(e){this.shapes.remove(e)},ft.prototype.copy=function(){var e;return null==ft.zpp_pool?e=new ft:(e=ft.zpp_pool,ft.zpp_pool=e.next,e.next=null),e.collisionGroup=this.collisionGroup,e.collisionMask=this.collisionMask,e.sensorGroup=this.sensorGroup,e.sensorMask=this.sensorMask,e.fluidGroup=this.fluidGroup,e.fluidMask=this.fluidMask,e},ft.prototype.collisionGroup=null,ft.prototype.collisionMask=null,ft.prototype.shouldCollide=function(e){return 0!=(this.collisionMask&e.collisionGroup)&&0!=(e.collisionMask&this.collisionGroup)},ft.prototype.sensorGroup=null,ft.prototype.sensorMask=null,ft.prototype.shouldSense=function(e){return 0!=(this.sensorMask&e.sensorGroup)&&0!=(e.sensorMask&this.sensorGroup)},ft.prototype.fluidGroup=null,ft.prototype.fluidMask=null,ft.prototype.shouldFlow=function(e){return 0!=(this.fluidMask&e.fluidGroup)&&0!=(e.fluidMask&this.fluidGroup)},ft.prototype.invalidate=function(){for(var e=this.shapes.head;null!=e;)e.elt.invalidate_filter(),e=e.next},ft.prototype.__class__=ft;var xt=zpp_nape.dynamics.ZPP_InteractionGroup=function(){this.depth=0,this.wrap_interactors=null,this.interactors=null,this.wrap_groups=null,this.groups=null,this.group=null,this.ignore=!1,this.outer=null,this.depth=0,this.groups=new Bi,this.interactors=new Ge};xt.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"],xt.prototype.outer=null,xt.prototype.ignore=null,xt.prototype.group=null,xt.prototype.setGroup=function(e){this.group!=e&&(null!=this.group&&(this.group.groups.remove(this),this.depth=0,this.group.invalidate(!0)),null!=(this.group=e)?(e.groups.add(this),this.depth=e.depth+1,e.invalidate(!0)):this.invalidate(!0))},xt.prototype.groups=null,xt.prototype.wrap_groups=null,xt.prototype.interactors=null,xt.prototype.wrap_interactors=null,xt.prototype.depth=null,xt.prototype.invalidate=function(e){if(null==e&&(e=!1),e||this.ignore){for(var t=this.interactors.head;null!=t;){var i=t.elt;null!=i.ibody?i.ibody.wake():null!=i.ishape?i.ishape.body.wake():i.icompound.wake(),t=t.next}for(var n=this.groups.head;null!=n;)n.elt.invalidate(e),n=n.next}},xt.prototype.addGroup=function(e){this.groups.add(e),e.depth=this.depth+1},xt.prototype.remGroup=function(e){this.groups.remove(e),e.depth=0},xt.prototype.addInteractor=function(e){this.interactors.add(e)},xt.prototype.remInteractor=function(e,t){null==t&&(t=-1),this.interactors.remove(e)},xt.prototype.__class__=xt;var vt=zpp_nape.dynamics.ZPP_SpaceArbiterList=function(){this.at_index_3=0,this.at_index_2=0,this.at_index_1=0,this.at_index_0=0,this.ite_3=null,this.ite_2=null,this.ite_1=null,this.ite_0=null,this.lengths=null,this.zip_length=!1,this._length=0,this.space=null,E.call(this),this.at_index_0=0,this.at_index_1=0,this.at_index_2=0,this.at_index_3=0,this.zip_length=!0,this._length=0,this.lengths=[];for(var e=0;e<4;)++e,this.lengths.push(0)};vt.__name__=["zpp_nape","dynamics","ZPP_SpaceArbiterList"],vt.__super__=E,vt.prototype=Object.create(E.prototype),vt.prototype.space=null,vt.prototype._length=null,vt.prototype.zip_length=null,vt.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){for(var e=this._length=0,t=this.space.c_arbiters_true.head;null!=t;)t.elt.active&&++e,t=t.next;this.lengths[0]=e,this._length+=e;for(var i=0,n=this.space.c_arbiters_false.head;null!=n;)n.elt.active&&++i,n=n.next;this.lengths[1]=i,this._length+=i;for(var r=0,o=this.space.f_arbiters.head;null!=o;)o.elt.active&&++r,o=o.next;this.lengths[2]=r,this._length+=r;for(var a=0,s=this.space.s_arbiters.head;null!=s;)s.elt.active&&++a,s=s.next;this.lengths[3]=a,this._length+=a,this.zip_length=!1}return this._length},vt.prototype.lengths=null,vt.prototype.ite_0=null,vt.prototype.ite_1=null,vt.prototype.ite_2=null,vt.prototype.ite_3=null,vt.prototype.at_index_0=null,vt.prototype.at_index_1=null,vt.prototype.at_index_2=null,vt.prototype.at_index_3=null,vt.prototype.zpp_vm=function(){var e=!1;this.space.c_arbiters_true.modified&&(e=!0,this.space.c_arbiters_true.modified=!1),this.space.c_arbiters_false.modified&&(e=!0,this.space.c_arbiters_false.modified=!1),this.space.f_arbiters.modified&&(e=!0,this.space.f_arbiters.modified=!1),this.space.s_arbiters.modified&&(e=!0,this.space.s_arbiters.modified=!1),e&&(this.zip_length=!0,this._length=0,this.ite_0=null,this.ite_1=null,this.ite_2=null,this.ite_3=null)},vt.prototype.push=function(e){return!1},vt.prototype.pop=function(){return null},vt.prototype.unshift=function(e){return!1},vt.prototype.shift=function(){return null},vt.prototype.remove=function(e){return!1},vt.prototype.clear=function(){},vt.prototype.at=function(e){this.zpp_vm();var t=null,i=0;if(null==t)if(e<this.lengths[0]){var n=e;if(n<this.at_index_0||null==this.ite_0)for(this.at_index_0=0,this.ite_0=this.space.c_arbiters_true.head;!this.ite_0.elt.active;)this.ite_0=this.ite_0.next;for(;this.at_index_0!=n;)for(this.at_index_0++,this.ite_0=this.ite_0.next;!this.ite_0.elt.active;)this.ite_0=this.ite_0.next;t=this.ite_0.elt.wrapper()}else i=this.lengths[0];if(null==t)if(e<i+this.lengths[1]){var r=e-i;if(r<this.at_index_1||null==this.ite_1)for(this.at_index_1=0,this.ite_1=this.space.c_arbiters_false.head;!this.ite_1.elt.active;)this.ite_1=this.ite_1.next;for(;this.at_index_1!=r;)for(this.at_index_1++,this.ite_1=this.ite_1.next;!this.ite_1.elt.active;)this.ite_1=this.ite_1.next;t=this.ite_1.elt.wrapper()}else i+=this.lengths[1];if(null==t)if(e<i+this.lengths[2]){var o=e-i;if(o<this.at_index_2||null==this.ite_2)for(this.at_index_2=0,this.ite_2=this.space.f_arbiters.head;!this.ite_2.elt.active;)this.ite_2=this.ite_2.next;for(;this.at_index_2!=o;)for(this.at_index_2++,this.ite_2=this.ite_2.next;!this.ite_2.elt.active;)this.ite_2=this.ite_2.next;t=this.ite_2.elt.wrapper()}else i+=this.lengths[2];if(null==t)if(e<i+this.lengths[3]){var a=e-i;if(a<this.at_index_3||null==this.ite_3)for(this.at_index_3=0,this.ite_3=this.space.s_arbiters.head;!this.ite_3.elt.active;)this.ite_3=this.ite_3.next;for(;this.at_index_3!=a;)for(this.at_index_3++,this.ite_3=this.ite_3.next;!this.ite_3.elt.active;)this.ite_3=this.ite_3.next;t=this.ite_3.elt.wrapper()}else i+=this.lengths[3];return t},vt.prototype.__class__=vt;var Ao=zpp_nape.geom.ZPP_AABB=function(){this.wrap_max=null,this.maxy=0,this.maxx=0,this.wrap_min=null,this.miny=0,this.minx=0,this.next=null,this.outer=null,this._immutable=!1,this._validate=null,this._invalidate=null};Ao.__name__=["zpp_nape","geom","ZPP_AABB"],Ao.get=function(e,t,i,n){var r;return null==Ao.zpp_pool?r=new Ao:(r=Ao.zpp_pool,Ao.zpp_pool=r.next,r.next=null),r.minx=e,r.miny=t,r.maxx=i,r.maxy=n,r},Ao.prototype._invalidate=null,Ao.prototype._validate=null,Ao.prototype._immutable=null,Ao.prototype.validate=function(){null!=this._validate&&this._validate()},Ao.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},Ao.prototype.outer=null,Ao.prototype.wrapper=function(){if(null==this.outer){this.outer=new N;var e=this.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e.wrap_min=e.wrap_max=null,e._invalidate=null,e._validate=null,e.next=Ao.zpp_pool,Ao.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Ao.prototype.next=null,Ao.prototype.alloc=function(){},Ao.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this.wrap_min=this.wrap_max=null,this._invalidate=null,this._validate=null},Ao.prototype.copy=function(){var e,t=this.minx,i=this.miny,n=this.maxx,r=this.maxy;return null==Ao.zpp_pool?e=new Ao:(e=Ao.zpp_pool,Ao.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=i,e.maxx=n,e.maxy=r,e},Ao.prototype.width=function(){return this.maxx-this.minx},Ao.prototype.height=function(){return this.maxy-this.miny},Ao.prototype.perimeter=function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},Ao.prototype.minx=null,Ao.prototype.miny=null,Ao.prototype.wrap_min=null,Ao.prototype.getmin=function(){if(null==this.wrap_min){var e,t=this.minx,i=this.miny;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_min=e,this.wrap_min.zpp_inner._inuse=!0,this._immutable?this.wrap_min.zpp_inner._immutable=!0:this.wrap_min.zpp_inner._invalidate=$(this,this.mod_min),this.wrap_min.zpp_inner._validate=$(this,this.dom_min)}return this.wrap_min},Ao.prototype.dom_min=function(){null!=this._validate&&this._validate(),this.wrap_min.zpp_inner.x=this.minx,this.wrap_min.zpp_inner.y=this.miny},Ao.prototype.mod_min=function(e){e.x==this.minx&&e.y==this.miny||(this.minx=e.x,this.miny=e.y,null!=this._invalidate&&this._invalidate(this))},Ao.prototype.maxx=null,Ao.prototype.maxy=null,Ao.prototype.wrap_max=null,Ao.prototype.getmax=function(){if(null==this.wrap_max){var e,t=this.maxx,i=this.maxy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_max=e,this.wrap_max.zpp_inner._inuse=!0,this._immutable?this.wrap_max.zpp_inner._immutable=!0:this.wrap_max.zpp_inner._invalidate=$(this,this.mod_max),this.wrap_max.zpp_inner._validate=$(this,this.dom_max)}return this.wrap_max},Ao.prototype.dom_max=function(){null!=this._validate&&this._validate(),this.wrap_max.zpp_inner.x=this.maxx,this.wrap_max.zpp_inner.y=this.maxy},Ao.prototype.mod_max=function(e){e.x==this.maxx&&e.y==this.maxy||(this.maxx=e.x,this.maxy=e.y,null!=this._invalidate&&this._invalidate(this))},Ao.prototype.intersectX=function(e){return!(e.minx>this.maxx||this.minx>e.maxx)},Ao.prototype.intersectY=function(e){return!(e.miny>this.maxy||this.miny>e.maxy)},Ao.prototype.intersect=function(e){return e.miny<=this.maxy&&this.miny<=e.maxy&&e.minx<=this.maxx&&this.minx<=e.maxx},Ao.prototype.combine=function(e){e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy)},Ao.prototype.contains=function(e){return e.minx>=this.minx&&e.miny>=this.miny&&e.maxx<=this.maxx&&e.maxy<=this.maxy},Ao.prototype.containsPoint=function(e){return e.x>=this.minx&&e.x<=this.maxx&&e.y>=this.miny&&e.y<=this.maxy},Ao.prototype.setCombine=function(e,t){this.minx=e.minx<t.minx?e.minx:t.minx,this.miny=e.miny<t.miny?e.miny:t.miny,this.maxx=e.maxx>t.maxx?e.maxx:t.maxx,this.maxy=e.maxy>t.maxy?e.maxy:t.maxy},Ao.prototype.setExpand=function(e,t){this.minx=e.minx-t,this.miny=e.miny-t,this.maxx=e.maxx+t,this.maxy=e.maxy+t},Ao.prototype.setExpandPoint=function(e,t){e<this.minx&&(this.minx=e),e>this.maxx&&(this.maxx=e),t<this.miny&&(this.miny=t),t>this.maxy&&(this.maxy=t)},Ao.prototype.toString=function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+" h: "+(this.maxy-this.miny)+" }"},Ao.prototype.__class__=Ao;var zt=zpp_nape.util.ZNPList_ZPP_Vec2=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};zt.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"],zt.prototype.head=null,zt.prototype.begin=function(){return this.head},zt.prototype.modified=null,zt.prototype.pushmod=null,zt.prototype.length=null,zt.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},zt.prototype.add=function(e){var t;null==on.zpp_pool?t=new on:(t=on.zpp_pool,on.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zt.prototype.inlined_add=function(e){var t;null==on.zpp_pool?t=new on:(t=on.zpp_pool,on.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zt.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},zt.prototype.insert=function(e,t){var i;null==on.zpp_pool?i=new on:(i=on.zpp_pool,on.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zt.prototype.inlined_insert=function(e,t){var i;null==on.zpp_pool?i=new on:(i=on.zpp_pool,on.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zt.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zt.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zt.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zt.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zt.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=on.zpp_pool,on.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zt.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},zt.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=on.zpp_pool,on.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=on.zpp_pool,on.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},zt.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=on.zpp_pool,on.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zt.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=on.zpp_pool,on.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},zt.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zt.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=on.zpp_pool,on.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zt.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},zt.prototype.empty=function(){return null==this.head},zt.prototype.size=function(){return this.length},zt.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zt.prototype.front=function(){return this.head.elt},zt.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},zt.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},zt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},zt.prototype.__class__=zt;var $s=zpp_nape.geom.ZPP_Collide=function(){};$s.__name__=["zpp_nape","geom","ZPP_Collide"],$s.circleContains=function(e,t){var i,n;return(i=t.x-e.worldCOMx)*i+(n=t.y-e.worldCOMy)*n<e.radius*e.radius},$s.polyContains=function(e,t){var i;i=!0;for(var n=e.edges.head;null!=n;){var r=n.elt;if(!(r.gnormx*t.x+r.gnormy*t.y<=r.gprojection)){i=!1;break}n=n.next}return i},$s.shapeContains=function(e,t){return 0==e.type?$s.circleContains(e.circle,t):$s.polyContains(e.polygon,t)},$s.bodyContains=function(e,t){var i;i=!1;for(var n=e.shapes.head;null!=n;){if($s.shapeContains(n.elt,t)){i=!0;break}n=n.next}return i},$s.containTest=function(e,t){var i=e.aabb,n=t.aabb;if(n.minx>=i.minx&&n.miny>=i.miny&&n.maxx<=i.maxx&&n.maxy<=i.maxy){if(0==e.type){if(0==t.type){var r,o,a=e.circle.radius+-t.circle.radius;return(r=t.circle.worldCOMx-e.circle.worldCOMx)*r+(o=t.circle.worldCOMy-e.circle.worldCOMy)*o<=a*a}var s;s=!0;for(var l=t.polygon.gverts.next;null!=l;){var p,h,u=l,c=e.circle.radius;if(!((p=u.x-e.circle.worldCOMx)*p+(h=u.y-e.circle.worldCOMy)*h<=c*c)){s=!1;break}l=l.next}return s}if(0==t.type){var d;d=!0;for(var _=e.polygon.edges.head;null!=_;){var y=_.elt;if(!(y.gnormx*t.circle.worldCOMx+y.gnormy*t.circle.worldCOMy+t.circle.radius<=y.gprojection)){d=!1;break}_=_.next}return d}var m;m=!0;for(var f=e.polygon.edges.head;null!=f;){for(var x=f.elt,v=-1e100,z=t.polygon.gverts.next;null!=z;){var g=z,b=x.gnormx*g.x+x.gnormy*g.y;v<b&&(v=b),z=z.next}if(!(v<=x.gprojection)){m=!1;break}f=f.next}return m}return!1},$s.contactCollide=function(e,t,i,n){if(1==t.type){if(1==e.type){for(var r=!0,o=-1e100,a=-1,s=null,l=null,p=e.polygon.edges.head;null!=p;){for(var h=p.elt,u=1e100,c=t.polygon.gverts.next;null!=c;){var d=c,_=h.gnormx*d.x+h.gnormy*d.y;if(_<u&&(u=_),u-h.gprojection<=o)break;c=c.next}if(0<=(u-=h.gprojection)){r=!1;break}o<u&&(o=u,s=h,a=1),p=p.next}if(r){for(var y=t.polygon.edges.head;null!=y;){for(var m=y.elt,f=1e100,x=e.polygon.gverts.next;null!=x;){var v=x,z=m.gnormx*v.x+m.gnormy*v.y;if(z<f&&(f=z),f-m.gprojection<=o)break;x=x.next}if(0<=(f-=m.gprojection)){r=!1;break}o<f&&(o=f,l=m,a=2),y=y.next}if(r){var g,b,w;1==a?(g=t.polygon,b=s,w=1):(g=e.polygon,b=l,w=-1);for(var S=null,C=1e100,M=g.edges.head;null!=M;){var P=M.elt,k=b.gnormx*P.gnormx+b.gnormy*P.gnormy;k<C&&(C=k,S=P),M=M.next}var T=0,O=0;T=S.gp0.x,O=S.gp0.y;var A,E,G=0,I=0;A=(G=S.gp1.x)-T,E=(I=S.gp1.y)-O;var B=b.gnormy*T-b.gnormx*O,L=b.gnormy*G-b.gnormx*I,D=1/(L-B),R=(-b.tp1-B)*D;R>Qs.epsilon&&(T+=A*R,O+=E*R);var F=(-b.tp0-L)*D;F<-Qs.epsilon&&(G+=A*F,I+=E*F);var j=0,N=0,U=w;j=b.gnormx*U,N=b.gnormy*U,i.lnormx=b.lnormx,i.lnormy=b.lnormy,i.lproj=b.lprojection,i.radius=0,i.rev=n!=(-1==w),i.ptype=i.rev?1:0;var V=T*b.gnormx+O*b.gnormy-b.gprojection,H=G*b.gnormx+I*b.gnormy-b.gprojection;if(0<V&&0<H)return!1;n&&(j=-j,N=-N);for(var W=T-b.gnormx*V*.5,X=O-b.gnormy*V*.5,q=i.rev?1:0,Y=null,K=i.contacts.next;null!=K;){var Z=K;if(q==Z.hash){Y=Z;break}K=K.next}if(null==Y){null==Xo.zpp_pool?Y=new Xo:(Y=Xo.zpp_pool,Xo.zpp_pool=Y.next,Y.next=null);var J=Y.inner;J.jnAcc=J.jtAcc=0,Y.hash=q,Y.fresh=!0,(Y.arbiter=i).jrAcc=0;var Q=i.contacts;Y._inuse=!0;var $=Y;$.next=Q.next,Q.next=$,Q.modified=!0,Q.length++,i.innards.add(J)}else Y.fresh=!1;Y.px=W,Y.py=X,i.nx=j,i.ny=N,Y.dist=V,Y.stamp=i.stamp,Y.posOnly=0<V;var ee=Y;T-=g.body.posx,O-=g.body.posy,ee.inner.lr1x=T*g.body.axisy+O*g.body.axisx,ee.inner.lr1y=O*g.body.axisy-T*g.body.axisx;for(var te=G-b.gnormx*H*.5,ie=I-b.gnormy*H*.5,ne=i.rev?0:1,re=null,oe=i.contacts.next;null!=oe;){var ae=oe;if(ne==ae.hash){re=ae;break}oe=oe.next}if(null==re){null==Xo.zpp_pool?re=new Xo:(re=Xo.zpp_pool,Xo.zpp_pool=re.next,re.next=null);var se=re.inner;se.jnAcc=se.jtAcc=0,re.hash=ne,re.fresh=!0,(re.arbiter=i).jrAcc=0;var le=i.contacts;re._inuse=!0;var pe=re;pe.next=le.next,le.next=pe,le.modified=!0,le.length++,i.innards.add(se)}else re.fresh=!1;return re.px=te,re.py=ie,i.nx=j,i.ny=N,re.dist=H,re.stamp=i.stamp,re.posOnly=0<H,ee=re,G-=g.body.posx,I-=g.body.posy,ee.inner.lr1x=G*g.body.axisy+I*g.body.axisx,ee.inner.lr1y=I*g.body.axisy-G*g.body.axisx,1==a?(i.__ref_edge1=b,i.__ref_edge2=S):(i.__ref_edge2=b,i.__ref_edge1=S),!0}return!1}return!1}for(var he=-1e100,ue=!0,ce=null,de=null,_e=t.polygon.gverts.next,ye=t.polygon.edges.head;null!=ye;){var me=ye.elt,fe=me.gnormx*e.circle.worldCOMx+me.gnormy*e.circle.worldCOMy-me.gprojection-e.circle.radius;if(0<fe){ue=!1;break}he<fe&&(he=fe,ce=me,de=_e),_e=_e.next,ye=ye.next}if(ue){var xe=de,ve=null==de.next?t.polygon.gverts.next:de.next,ze=e.circle.worldCOMy*ce.gnormx-e.circle.worldCOMx*ce.gnormy;if(ze<=xe.y*ce.gnormx-xe.x*ce.gnormy){var ge,be,we,Se=e.circle.radius,Ce=(ge=xe.x-e.circle.worldCOMx)*ge+(be=xe.y-e.circle.worldCOMy)*be;if(Se*Se<Ce)we=null;else if(Ce<Qs.epsilon*Qs.epsilon){for(var Me=e.circle.worldCOMx,Pe=e.circle.worldCOMy,ke=null,Te=i.contacts.next;null!=Te;){var Oe=Te;if(0==Oe.hash){ke=Oe;break}Te=Te.next}if(null==ke){null==Xo.zpp_pool?ke=new Xo:(ke=Xo.zpp_pool,Xo.zpp_pool=ke.next,ke.next=null);var Ae=ke.inner;Ae.jnAcc=Ae.jtAcc=0,ke.hash=0,ke.fresh=!0,(ke.arbiter=i).jrAcc=0;var Ee=i.contacts;ke._inuse=!0;var Ge=ke;Ge.next=Ee.next,Ee.next=Ge,Ee.modified=!0,Ee.length++,i.innards.add(Ae)}else ke.fresh=!1;ke.px=Me,ke.py=Pe,i.nx=1,i.ny=0,ke.dist=-Se,ke.stamp=i.stamp,ke.posOnly=!1,we=ke}else{var Ie=1/Math.sqrt(Ce),Be=Ie<Qs.epsilon?1e100:1/Ie,Le=.5+(e.circle.radius-.5*Se)*Ie;if(n){for(var De=e.circle.worldCOMx+ge*Le,Re=e.circle.worldCOMy+be*Le,Fe=null,je=i.contacts.next;null!=je;){var Ne=je;if(0==Ne.hash){Fe=Ne;break}je=je.next}if(null==Fe){null==Xo.zpp_pool?Fe=new Xo:(Fe=Xo.zpp_pool,Xo.zpp_pool=Fe.next,Fe.next=null);var Ue=Fe.inner;Ue.jnAcc=Ue.jtAcc=0,Fe.hash=0,Fe.fresh=!0,(Fe.arbiter=i).jrAcc=0;var Ve=i.contacts;Fe._inuse=!0;var He=Fe;He.next=Ve.next,Ve.next=He,Ve.modified=!0,Ve.length++,i.innards.add(Ue)}else Fe.fresh=!1;Fe.px=De,Fe.py=Re,i.nx=-ge*Ie,i.ny=-be*Ie,Fe.dist=Be-Se,Fe.stamp=i.stamp,Fe.posOnly=!1,we=Fe}else{for(var We=e.circle.worldCOMx+ge*Le,Xe=e.circle.worldCOMy+be*Le,qe=null,Ye=i.contacts.next;null!=Ye;){var Ke=Ye;if(0==Ke.hash){qe=Ke;break}Ye=Ye.next}if(null==qe){null==Xo.zpp_pool?qe=new Xo:(qe=Xo.zpp_pool,Xo.zpp_pool=qe.next,qe.next=null);var Ze=qe.inner;Ze.jnAcc=Ze.jtAcc=0,qe.hash=0,qe.fresh=!0,(qe.arbiter=i).jrAcc=0;var Je=i.contacts;qe._inuse=!0;var Qe=qe;Qe.next=Je.next,Je.next=Qe,Je.modified=!0,Je.length++,i.innards.add(Ze)}else qe.fresh=!1;qe.px=We,qe.py=Xe,i.nx=ge*Ie,i.ny=be*Ie,qe.dist=Be-Se,qe.stamp=i.stamp,qe.posOnly=!1,we=qe}}if(null!=we){var $e=we.inner;i.ptype=2;var et,tt;et=xe.x-t.polygon.body.posx,tt=xe.y-t.polygon.body.posy,i.__ref_edge1=ce,i.__ref_vertex=-1,n?($e.lr1x=et*t.polygon.body.axisy+tt*t.polygon.body.axisx,$e.lr1y=tt*t.polygon.body.axisy-et*t.polygon.body.axisx,$e.lr2x=e.circle.localCOMx,$e.lr2y=e.circle.localCOMy):($e.lr2x=et*t.polygon.body.axisy+tt*t.polygon.body.axisx,$e.lr2y=tt*t.polygon.body.axisy-et*t.polygon.body.axisx,$e.lr1x=e.circle.localCOMx,$e.lr1y=e.circle.localCOMy),i.radius=e.circle.radius}return null!=we}if(ze>=ve.y*ce.gnormx-ve.x*ce.gnormy){var it,nt,rt,ot=e.circle.radius,at=(it=ve.x-e.circle.worldCOMx)*it+(nt=ve.y-e.circle.worldCOMy)*nt;if(ot*ot<at)rt=null;else if(at<Qs.epsilon*Qs.epsilon){for(var st=e.circle.worldCOMx,lt=e.circle.worldCOMy,pt=null,ht=i.contacts.next;null!=ht;){var ut=ht;if(0==ut.hash){pt=ut;break}ht=ht.next}if(null==pt){null==Xo.zpp_pool?pt=new Xo:(pt=Xo.zpp_pool,Xo.zpp_pool=pt.next,pt.next=null);var ct=pt.inner;ct.jnAcc=ct.jtAcc=0,pt.hash=0,pt.fresh=!0,(pt.arbiter=i).jrAcc=0;var dt=i.contacts;pt._inuse=!0;var _t=pt;_t.next=dt.next,dt.next=_t,dt.modified=!0,dt.length++,i.innards.add(ct)}else pt.fresh=!1;pt.px=st,pt.py=lt,i.nx=1,i.ny=0,pt.dist=-ot,pt.stamp=i.stamp,pt.posOnly=!1,rt=pt}else{var yt=1/Math.sqrt(at),mt=yt<Qs.epsilon?1e100:1/yt,ft=.5+(e.circle.radius-.5*ot)*yt;if(n){for(var xt=e.circle.worldCOMx+it*ft,vt=e.circle.worldCOMy+nt*ft,zt=null,gt=i.contacts.next;null!=gt;){var bt=gt;if(0==bt.hash){zt=bt;break}gt=gt.next}if(null==zt){null==Xo.zpp_pool?zt=new Xo:(zt=Xo.zpp_pool,Xo.zpp_pool=zt.next,zt.next=null);var wt=zt.inner;wt.jnAcc=wt.jtAcc=0,zt.hash=0,zt.fresh=!0,(zt.arbiter=i).jrAcc=0;var St=i.contacts;zt._inuse=!0;var Ct=zt;Ct.next=St.next,St.next=Ct,St.modified=!0,St.length++,i.innards.add(wt)}else zt.fresh=!1;zt.px=xt,zt.py=vt,i.nx=-it*yt,i.ny=-nt*yt,zt.dist=mt-ot,zt.stamp=i.stamp,zt.posOnly=!1,rt=zt}else{for(var Mt=e.circle.worldCOMx+it*ft,Pt=e.circle.worldCOMy+nt*ft,kt=null,Tt=i.contacts.next;null!=Tt;){var Ot=Tt;if(0==Ot.hash){kt=Ot;break}Tt=Tt.next}if(null==kt){null==Xo.zpp_pool?kt=new Xo:(kt=Xo.zpp_pool,Xo.zpp_pool=kt.next,kt.next=null);var At=kt.inner;At.jnAcc=At.jtAcc=0,kt.hash=0,kt.fresh=!0,(kt.arbiter=i).jrAcc=0;var Et=i.contacts;kt._inuse=!0;var Gt=kt;Gt.next=Et.next,Et.next=Gt,Et.modified=!0,Et.length++,i.innards.add(At)}else kt.fresh=!1;kt.px=Mt,kt.py=Pt,i.nx=it*yt,i.ny=nt*yt,kt.dist=mt-ot,kt.stamp=i.stamp,kt.posOnly=!1,rt=kt}}if(null!=rt){var It=rt.inner;i.ptype=2;var Bt,Lt;Bt=ve.x-t.polygon.body.posx,Lt=ve.y-t.polygon.body.posy,i.__ref_edge1=ce,i.__ref_vertex=1,n?(It.lr1x=Bt*t.polygon.body.axisy+Lt*t.polygon.body.axisx,It.lr1y=Lt*t.polygon.body.axisy-Bt*t.polygon.body.axisx,It.lr2x=e.circle.localCOMx,It.lr2y=e.circle.localCOMy):(It.lr2x=Bt*t.polygon.body.axisy+Lt*t.polygon.body.axisx,It.lr2y=Lt*t.polygon.body.axisy-Bt*t.polygon.body.axisx,It.lr1x=e.circle.localCOMx,It.lr1y=e.circle.localCOMy),i.radius=e.circle.radius}return null!=rt}var Dt,Rt,Ft=e.circle.radius+.5*he;Dt=ce.gnormx*Ft,Rt=ce.gnormy*Ft;var jt,Nt,Ut;if(jt=e.circle.worldCOMx-Dt,Nt=e.circle.worldCOMy-Rt,n){for(var Vt=ce.gnormx,Ht=ce.gnormy,Wt=null,Xt=i.contacts.next;null!=Xt;){var qt=Xt;if(0==qt.hash){Wt=qt;break}Xt=Xt.next}if(null==Wt){null==Xo.zpp_pool?Wt=new Xo:(Wt=Xo.zpp_pool,Xo.zpp_pool=Wt.next,Wt.next=null);var Yt=Wt.inner;Yt.jnAcc=Yt.jtAcc=0,Wt.hash=0,Wt.fresh=!0,(Wt.arbiter=i).jrAcc=0;var Kt=i.contacts;Wt._inuse=!0;var Zt=Wt;Zt.next=Kt.next,Kt.next=Zt,Kt.modified=!0,Kt.length++,i.innards.add(Yt)}else Wt.fresh=!1;Wt.px=jt,Wt.py=Nt,i.nx=Vt,i.ny=Ht,Wt.dist=he,Wt.stamp=i.stamp,Wt.posOnly=!1,Ut=Wt}else{for(var Jt=-ce.gnormx,Qt=-ce.gnormy,$t=null,ei=i.contacts.next;null!=ei;){var ti=ei;if(0==ti.hash){$t=ti;break}ei=ei.next}if(null==$t){null==Xo.zpp_pool?$t=new Xo:($t=Xo.zpp_pool,Xo.zpp_pool=$t.next,$t.next=null);var ii=$t.inner;ii.jnAcc=ii.jtAcc=0,$t.hash=0,$t.fresh=!0,($t.arbiter=i).jrAcc=0;var ni=i.contacts;$t._inuse=!0;var ri=$t;ri.next=ni.next,ni.next=ri,ni.modified=!0,ni.length++,i.innards.add(ii)}else $t.fresh=!1;$t.px=jt,$t.py=Nt,i.nx=Jt,i.ny=Qt,$t.dist=he,$t.stamp=i.stamp,$t.posOnly=!1,Ut=$t}return i.ptype=n?0:1,i.lnormx=ce.lnormx,i.lnormy=ce.lnormy,i.rev=!n,i.lproj=ce.lprojection,i.radius=e.circle.radius,Ut.inner.lr1x=e.circle.localCOMx,Ut.inner.lr1y=e.circle.localCOMy,i.__ref_edge1=ce,!(i.__ref_vertex=0)}return!1}var oi,ai,si,li=e.circle.radius+t.circle.radius,pi=(oi=t.circle.worldCOMx-e.circle.worldCOMx)*oi+(ai=t.circle.worldCOMy-e.circle.worldCOMy)*ai;if(li*li<pi)si=null;else if(pi<Qs.epsilon*Qs.epsilon){for(var hi=e.circle.worldCOMx,ui=e.circle.worldCOMy,ci=null,di=i.contacts.next;null!=di;){var _i=di;if(0==_i.hash){ci=_i;break}di=di.next}if(null==ci){null==Xo.zpp_pool?ci=new Xo:(ci=Xo.zpp_pool,Xo.zpp_pool=ci.next,ci.next=null);var yi=ci.inner;yi.jnAcc=yi.jtAcc=0,ci.hash=0,ci.fresh=!0,(ci.arbiter=i).jrAcc=0;var mi=i.contacts;ci._inuse=!0;var fi=ci;fi.next=mi.next,mi.next=fi,mi.modified=!0,mi.length++,i.innards.add(yi)}else ci.fresh=!1;ci.px=hi,ci.py=ui,i.nx=1,i.ny=0,ci.dist=-li,ci.stamp=i.stamp,ci.posOnly=!1,si=ci}else{var xi=1/Math.sqrt(pi),vi=xi<Qs.epsilon?1e100:1/xi,zi=.5+(e.circle.radius-.5*li)*xi;if(n){for(var gi=e.circle.worldCOMx+oi*zi,bi=e.circle.worldCOMy+ai*zi,wi=null,Si=i.contacts.next;null!=Si;){var Ci=Si;if(0==Ci.hash){wi=Ci;break}Si=Si.next}if(null==wi){null==Xo.zpp_pool?wi=new Xo:(wi=Xo.zpp_pool,Xo.zpp_pool=wi.next,wi.next=null);var Mi=wi.inner;Mi.jnAcc=Mi.jtAcc=0,wi.hash=0,wi.fresh=!0,(wi.arbiter=i).jrAcc=0;var Pi=i.contacts;wi._inuse=!0;var ki=wi;ki.next=Pi.next,Pi.next=ki,Pi.modified=!0,Pi.length++,i.innards.add(Mi)}else wi.fresh=!1;wi.px=gi,wi.py=bi,i.nx=-oi*xi,i.ny=-ai*xi,wi.dist=vi-li,wi.stamp=i.stamp,wi.posOnly=!1,si=wi}else{for(var Ti=e.circle.worldCOMx+oi*zi,Oi=e.circle.worldCOMy+ai*zi,Ai=null,Ei=i.contacts.next;null!=Ei;){var Gi=Ei;if(0==Gi.hash){Ai=Gi;break}Ei=Ei.next}if(null==Ai){null==Xo.zpp_pool?Ai=new Xo:(Ai=Xo.zpp_pool,Xo.zpp_pool=Ai.next,Ai.next=null);var Ii=Ai.inner;Ii.jnAcc=Ii.jtAcc=0,Ai.hash=0,Ai.fresh=!0,(Ai.arbiter=i).jrAcc=0;var Bi=i.contacts;Ai._inuse=!0;var Li=Ai;Li.next=Bi.next,Bi.next=Li,Bi.modified=!0,Bi.length++,i.innards.add(Ii)}else Ai.fresh=!1;Ai.px=Ti,Ai.py=Oi,i.nx=oi*xi,i.ny=ai*xi,Ai.dist=vi-li,Ai.stamp=i.stamp,Ai.posOnly=!1,si=Ai}}if(null!=si){var Di=si.inner;return n?(Di.lr1x=t.circle.localCOMx,Di.lr1y=t.circle.localCOMy,Di.lr2x=e.circle.localCOMx,Di.lr2y=e.circle.localCOMy):(Di.lr1x=e.circle.localCOMx,Di.lr1y=e.circle.localCOMy,Di.lr2x=t.circle.localCOMx,Di.lr2y=t.circle.localCOMy),i.radius=e.circle.radius+t.circle.radius,i.ptype=2,!0}return!1},$s.testCollide_safe=function(e,t){if(0==t.type){var i=e;e=t,t=i}return $s.testCollide(e,t)},$s.testCollide=function(e,t){if(1==t.type){if(1==e.type){for(var i=!0,n=e.polygon.edges.head;null!=n;){for(var r=n.elt,o=1e100,a=t.polygon.gverts.next;null!=a;){var s=a,l=r.gnormx*s.x+r.gnormy*s.y;l<o&&(o=l),a=a.next}if(0<(o-=r.gprojection)){i=!1;break}n=n.next}if(i){for(var p=t.polygon.edges.head;null!=p;){for(var h=p.elt,u=1e100,c=e.polygon.gverts.next;null!=c;){var d=c,_=h.gnormx*d.x+h.gnormy*d.y;_<u&&(u=_),c=c.next}if(0<(u-=h.gprojection)){i=!1;break}p=p.next}return i}return!1}for(var y=null,m=null,f=!0,x=-1e100,v=t.polygon.gverts.next,z=t.polygon.edges.head;null!=z;){var g=z.elt,b=g.gnormx*e.circle.worldCOMx+g.gnormy*e.circle.worldCOMy-g.gprojection-e.circle.radius;if(0<b){f=!1;break}x<b&&(x=b,y=g,m=v),v=v.next,z=z.next}if(f){var w=m,S=null==m.next?t.polygon.gverts.next:m.next,C=e.circle.worldCOMy*y.gnormx-e.circle.worldCOMx*y.gnormy;if(C<=w.y*y.gnormx-w.x*y.gnormy){var M,P,k=e.circle.radius;return(M=w.x-e.circle.worldCOMx)*M+(P=w.y-e.circle.worldCOMy)*P<=k*k}if(C>=S.y*y.gnormx-S.x*y.gnormy){var T,O,A=e.circle.radius;return(T=S.x-e.circle.worldCOMx)*T+(O=S.y-e.circle.worldCOMy)*O<=A*A}return!0}return!1}var E,G,I=e.circle.radius+t.circle.radius;return(E=t.circle.worldCOMx-e.circle.worldCOMx)*E+(G=t.circle.worldCOMy-e.circle.worldCOMy)*G<=I*I},$s.flowCollide=function(e,t,i){if(1==t.type){if(1==e.type){for(var n=[],r=[],o=!0,a=!0,s=e.polygon.edges.head;null!=s;){for(var l=s.elt,p=1e100,h=0,u=t.polygon.gverts.next;null!=u;){var c=u,d=l.gnormx*c.x+l.gnormy*c.y;d<p&&(p=d),d>=l.gprojection+Qs.epsilon&&(a=!(r[h]=!0)),++h,u=u.next}if(0<(p-=l.gprojection)){o=!1;break}s=s.next}if(a){var _=t.polygon;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var m=y.localCOMy=0,f=y.lverts.next,x=f,v=f=f.next;for(f=f.next;null!=f;){var z=f;m+=v.x*(z.y-x.y);var g=z.y*v.x-z.x*v.y;y.localCOMx+=(v.x+z.x)*g,y.localCOMy+=(v.y+z.y)*g,x=v,v=z,f=f.next}var b=f=y.lverts.next;m+=v.x*(b.y-x.y);var w=b.y*v.x-b.x*v.y;y.localCOMx+=(v.x+b.x)*w,y.localCOMy+=(v.y+b.y)*w,x=v;var S=f=f.next;m+=b.x*(S.y-x.y);var C=S.y*b.x-S.x*b.y;y.localCOMx+=(b.x+S.x)*C,y.localCOMy+=(b.y+S.y)*C;var M=m=1/(3*m);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=t.polygon.area,T=t.polygon.worldCOMx,O=t.polygon.worldCOMy;return i.overlap=k,i.centroidx=T,i.centroidy=O,!0}if(o){a=!0;for(var A=t.polygon.edges.head;null!=A;){for(var E=A.elt,G=1e100,I=0,B=e.polygon.gverts.next;null!=B;){var L=B,D=E.gnormx*L.x+E.gnormy*L.y;D<G&&(G=D),D>=E.gprojection+Qs.epsilon&&(a=!(n[I]=!0)),++I,B=B.next}if(0<(G-=E.gprojection)){o=!1;break}A=A.next}if(a){var R=e.polygon;if(R.zip_worldCOM&&null!=R.body){if(R.zip_worldCOM=!1,R.zip_localCOM){if(R.zip_localCOM=!1,1==R.type){var F=R.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,V=N=N.next;for(N=N.next;null!=N;){var H=N;j+=V.x*(H.y-U.y);var W=H.y*V.x-H.x*V.y;F.localCOMx+=(V.x+H.x)*W,F.localCOMy+=(V.y+H.y)*W,U=V,V=H,N=N.next}var X=N=F.lverts.next;j+=V.x*(X.y-U.y);var q=X.y*V.x-X.x*V.y;F.localCOMx+=(V.x+X.x)*q,F.localCOMy+=(V.y+X.y)*q,U=V;var Y=N=N.next;j+=X.x*(Y.y-U.y);var K=Y.y*X.x-Y.x*X.y;F.localCOMx+=(X.x+Y.x)*K,F.localCOMy+=(X.y+Y.y)*K;var Z=j=1/(3*j);F.localCOMx*=Z,F.localCOMy*=Z}}null!=R.wrap_localCOM&&(R.wrap_localCOM.zpp_inner.x=R.localCOMx,R.wrap_localCOM.zpp_inner.y=R.localCOMy)}var J=R.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),R.worldCOMx=R.body.posx+(R.body.axisy*R.localCOMx-R.body.axisx*R.localCOMy),R.worldCOMy=R.body.posy+(R.localCOMx*R.body.axisx+R.localCOMy*R.body.axisy)}var Q=e.polygon.area,$=e.polygon.worldCOMx,ee=e.polygon.worldCOMy;return i.overlap=Q,i.centroidx=$,i.centroidy=ee,!0}if(o){for(;null!=$s.flowpoly.head;){var te=$s.flowpoly.pop_unsafe();te._inuse||(null!=te.outer&&(te.outer.zpp_inner=null,te.outer=null),te._isimmutable=null,te._validate=null,te._invalidate=null,te.next=el.zpp_pool,el.zpp_pool=te)}for(var ie=null,ne=!1,re=e.polygon.gverts.next,oe=0,ae=t.polygon.gverts.next,se=0,le=0,pe=t.polygon.edgeCnt;le<pe;){var he=le++;if(!r[he]){se=he;break}ae=ae.next}if(null==ae){ae=t.polygon.gverts.next,ne=!0;for(var ue=0,ce=e.polygon.edgeCnt;ue<ce;){var de=ue++;if(!n[de]){oe=de;break}re=re.next}null==re?re=e.polygon.gverts.next:($s.flowpoly.add(re),ie=$s.flowpoly.head.elt)}else $s.flowpoly.add(ae),ie=$s.flowpoly.head.elt;var _e=1;if(null==$s.flowpoly.head){for(var ye=!0,me=e.polygon.gverts.next,fe=me,xe=me.next;null!=xe;){for(var ve=xe,ze=2,ge=t.polygon.gverts.next,be=ge,we=ge.next;null!=we;){var Se,Ce,Me=we,Pe=0;Se=fe.x-be.x,Ce=fe.y-be.y;var ke,Te;ke=ve.x-fe.x;var Oe,Ae,Ee,Ge=(Te=ve.y-fe.y)*(Oe=Me.x-be.x)-ke*(Ae=Me.y-be.y);if(Ge*Ge>Qs.epsilon*Qs.epsilon){var Ie=(Ae*Se-Oe*Ce)*(Ge=1/Ge);if(Ie>Qs.epsilon&&Ie<1-Qs.epsilon){var Be=(Te*Se-ke*Ce)*Ge;Be>Qs.epsilon&&Be<1-Qs.epsilon?(Pe=Ie,Ee=!0):Ee=!1}else Ee=!1}else Ee=!1;Ee&&Pe<ze&&(ze=Pe,ae=ge),be=Me,we=(ge=we).next}for(;;){var Le,De,Re=we=t.polygon.gverts.next,Fe=0;Le=fe.x-be.x,De=fe.y-be.y;var je,Ne;je=ve.x-fe.x;var Ue,Ve,He,We=(Ne=ve.y-fe.y)*(Ue=Re.x-be.x)-je*(Ve=Re.y-be.y);if(We*We>Qs.epsilon*Qs.epsilon){var Xe=(Ve*Le-Ue*De)*(We=1/We);if(Xe>Qs.epsilon&&Xe<1-Qs.epsilon){var qe=(Ne*Le-je*De)*We;qe>Qs.epsilon&&qe<1-Qs.epsilon?(Fe=Xe,He=!0):He=!1}else He=!1}else He=!1;He&&Fe<ze&&(ze=Fe,ae=ge);break}if(2!=ze){var Ye,Ke,Ze,Je=ze;Ye=fe.x+(ve.x-fe.x)*Je,Ke=fe.y+(ve.y-fe.y)*Je,null==el.zpp_pool?Ze=new el:(Ze=el.zpp_pool,el.zpp_pool=Ze.next,Ze.next=null),Ze.weak=!1,Ze._immutable=!1,Ze.x=Ye,Ze.y=Ke,ie=Ze,$s.flowpoly.add(ie),re=me,ye=!(ne=!0);break}fe=ve,xe=(me=xe).next}if(ye)for(;;){for(var Qe=xe=e.polygon.gverts.next,$e=2,et=t.polygon.gverts.next,tt=et,it=et.next;null!=it;){var nt,rt,ot=it,at=0;nt=fe.x-tt.x,rt=fe.y-tt.y;var st,lt;st=Qe.x-fe.x;var pt,ht,ut,ct=(lt=Qe.y-fe.y)*(pt=ot.x-tt.x)-st*(ht=ot.y-tt.y);if(ct*ct>Qs.epsilon*Qs.epsilon){var dt=(ht*nt-pt*rt)*(ct=1/ct);if(dt>Qs.epsilon&&dt<1-Qs.epsilon){var _t=(lt*nt-st*rt)*ct;_t>Qs.epsilon&&_t<1-Qs.epsilon?(at=dt,ut=!0):ut=!1}else ut=!1}else ut=!1;ut&&at<$e&&($e=at,ae=et),tt=ot,it=(et=it).next}for(;;){var yt,mt,ft=it=t.polygon.gverts.next,xt=0;yt=fe.x-tt.x,mt=fe.y-tt.y;var vt,zt;vt=Qe.x-fe.x;var gt,bt,wt,St=(zt=Qe.y-fe.y)*(gt=ft.x-tt.x)-vt*(bt=ft.y-tt.y);if(St*St>Qs.epsilon*Qs.epsilon){var Ct=(bt*yt-gt*mt)*(St=1/St);if(Ct>Qs.epsilon&&Ct<1-Qs.epsilon){var Mt=(zt*yt-vt*mt)*St;Mt>Qs.epsilon&&Mt<1-Qs.epsilon?(xt=Ct,wt=!0):wt=!1}else wt=!1}else wt=!1;wt&&xt<$e&&($e=xt,ae=et);break}if(2!=$e){var Pt,kt,Tt,Ot=$e;Pt=fe.x+(Qe.x-fe.x)*Ot,kt=fe.y+(Qe.y-fe.y)*Ot,null==el.zpp_pool?Tt=new el:(Tt=el.zpp_pool,el.zpp_pool=Tt.next,Tt.next=null),Tt.weak=!1,Tt._immutable=!1,Tt.x=Pt,Tt.y=kt,ie=Tt,$s.flowpoly.add(ie),ne=!0,re=me;break}break}_e=2}for(;;)if(ne)if(++oe,null==(re=re.next)&&(re=e.polygon.gverts.next,oe=0),n[oe]){var At=$s.flowpoly.head.elt,Et=re,Gt=ae,It=ae.next;null==It&&(It=t.polygon.gverts.next);for(var Bt=-1,Lt=null,Dt=0,Rt=0,Ft=It,jt=It;;){var Nt,Ut,Vt=jt,Ht=0;Nt=Gt.x-At.x,Ut=Gt.y-At.y;var Wt,Xt;Wt=Vt.x-Gt.x;var qt,Yt,Kt,Zt=(Xt=Vt.y-Gt.y)*(qt=Et.x-At.x)-Wt*(Yt=Et.y-At.y);if(Zt*Zt>Qs.epsilon*Qs.epsilon){var Jt=(Yt*Nt-qt*Ut)*(Zt=1/Zt);if(Jt>Qs.epsilon&&Jt<1-Qs.epsilon){var Qt=(Xt*Nt-Wt*Ut)*Zt;Qt>Qs.epsilon&&Qt<1-Qs.epsilon?(Ht=Jt,Kt=!0):Kt=!1}else Kt=!1}else Kt=!1;if(Kt&&-1<=Ht){if(Lt=ae,Dt=se,(Rt=1)==_e){Bt=Ht,jt=Ft;break}Bt=Ht}Gt=Vt,ae=jt,++se>=t.polygon.edgeCnt&&(se=0),null==(jt=jt.next)&&(jt=t.polygon.gverts.next);break}for(;jt!=Ft;){var $t,ei,ti=jt,ii=0;$t=Gt.x-At.x,ei=Gt.y-At.y;var ni,ri;ni=ti.x-Gt.x;var oi,ai,si,li=(ri=ti.y-Gt.y)*(oi=Et.x-At.x)-ni*(ai=Et.y-At.y);if(li*li>Qs.epsilon*Qs.epsilon){var pi=(ai*$t-oi*ei)*(li=1/li);if(pi>Qs.epsilon&&pi<1-Qs.epsilon){var hi=(ri*$t-ni*ei)*li;hi>Qs.epsilon&&hi<1-Qs.epsilon?(ii=pi,si=!0):si=!1}else si=!1}else si=!1;if(si&&Bt<=ii){if(Lt=ae,Dt=se,++Rt==_e){Bt=ii;break}Bt=ii}Gt=ti,ae=jt,++se>=t.polygon.edgeCnt&&(se=0),null==(jt=jt.next)&&(jt=t.polygon.gverts.next)}if(null==Lt)break;var ui=Lt,ci=Lt.next;null==ci&&(ci=t.polygon.gverts.next);var di,_i,yi,mi,fi=ci,xi=Bt;if(di=ui.x+(fi.x-ui.x)*xi,_i=ui.y+(fi.y-ui.y)*xi,null!=ie){var vi,zi;yi=(vi=di-ie.x)*vi+(zi=_i-ie.y)*zi<Qs.epsilon}else yi=!1;if(yi)break;null==el.zpp_pool?mi=new el:(mi=el.zpp_pool,el.zpp_pool=mi.next,mi.next=null),mi.weak=!1,mi._immutable=!1,mi.x=di,mi.y=_i,$s.flowpoly.add(mi),null==ie&&(ie=$s.flowpoly.head.elt),ae=Lt,se=Dt,ne=!ne,_e=2}else{var gi,bi=re;if(null!=ie){var wi,Si,Ci=bi.x,Mi=bi.y;gi=(wi=Ci-ie.x)*wi+(Si=Mi-ie.y)*Si<Qs.epsilon}else gi=!1;if(gi)break;$s.flowpoly.add(bi),null==ie&&(ie=$s.flowpoly.head.elt),_e=1}else if(++se,null==(ae=ae.next)&&(ae=t.polygon.gverts.next,se=0),r[se]){var Pi=$s.flowpoly.head.elt,ki=ae,Ti=re,Oi=re.next;null==Oi&&(Oi=e.polygon.gverts.next);for(var Ai=-1,Ei=null,Gi=0,Ii=0,Bi=Oi,Li=Oi;;){var Di,Ri,Fi=Li,ji=0;Di=Ti.x-Pi.x,Ri=Ti.y-Pi.y;var Ni,Ui;Ni=Fi.x-Ti.x;var Vi,Hi,Wi,Xi=(Ui=Fi.y-Ti.y)*(Vi=ki.x-Pi.x)-Ni*(Hi=ki.y-Pi.y);if(Xi*Xi>Qs.epsilon*Qs.epsilon){var qi=(Hi*Di-Vi*Ri)*(Xi=1/Xi);if(qi>Qs.epsilon&&qi<1-Qs.epsilon){var Yi=(Ui*Di-Ni*Ri)*Xi;Yi>Qs.epsilon&&Yi<1-Qs.epsilon?(ji=qi,Wi=!0):Wi=!1}else Wi=!1}else Wi=!1;if(Wi&&-1<=ji){if(Ei=re,Gi=oe,(Ii=1)==_e){Ai=ji,Li=Bi;break}Ai=ji}Ti=Fi,re=Li,++oe>=e.polygon.edgeCnt&&(oe=0),null==(Li=Li.next)&&(Li=e.polygon.gverts.next);break}for(;Li!=Bi;){var Ki,Zi,Ji=Li,Qi=0;Ki=Ti.x-Pi.x,Zi=Ti.y-Pi.y;var $i,en;$i=Ji.x-Ti.x;var tn,nn,rn,on=(en=Ji.y-Ti.y)*(tn=ki.x-Pi.x)-$i*(nn=ki.y-Pi.y);if(on*on>Qs.epsilon*Qs.epsilon){var an=(nn*Ki-tn*Zi)*(on=1/on);if(an>Qs.epsilon&&an<1-Qs.epsilon){var sn=(en*Ki-$i*Zi)*on;sn>Qs.epsilon&&sn<1-Qs.epsilon?(Qi=an,rn=!0):rn=!1}else rn=!1}else rn=!1;if(rn&&Ai<=Qi){if(Ei=re,Gi=oe,++Ii==_e){Ai=Qi;break}Ai=Qi}Ti=Ji,re=Li,++oe>=e.polygon.edgeCnt&&(oe=0),null==(Li=Li.next)&&(Li=e.polygon.gverts.next)}if(null==Ei)break;var ln=Ei,pn=Ei.next;null==pn&&(pn=e.polygon.gverts.next);var hn,un,cn,dn,_n=pn,yn=Ai;if(hn=ln.x+(_n.x-ln.x)*yn,un=ln.y+(_n.y-ln.y)*yn,null!=ie){var mn,fn;cn=(mn=hn-ie.x)*mn+(fn=un-ie.y)*fn<Qs.epsilon}else cn=!1;if(cn)break;null==el.zpp_pool?dn=new el:(dn=el.zpp_pool,el.zpp_pool=dn.next,dn.next=null),dn.weak=!1,dn._immutable=!1,dn.x=hn,dn.y=un,$s.flowpoly.add(dn),null==ie&&(ie=$s.flowpoly.head.elt),re=Ei,oe=Gi,ne=!ne,_e=2}else{var xn,vn=ae;if(null!=ie){var zn,gn,bn=vn.x,wn=vn.y;xn=(zn=bn-ie.x)*zn+(gn=wn-ie.y)*gn<Qs.epsilon}else xn=!1;if(xn)break;$s.flowpoly.add(vn),null==ie&&(ie=$s.flowpoly.head.elt),_e=1}if(null!=$s.flowpoly.head&&null!=$s.flowpoly.head.next&&null!=$s.flowpoly.head.next.next){var Sn=0,Cn=0,Mn=0;Sn=Mn=Cn=0;var Pn=$s.flowpoly.head,kn=Pn.elt,Tn=(Pn=Pn.next).elt;for(Pn=Pn.next;null!=Pn;){var On=Pn.elt;Sn+=Tn.x*(On.y-kn.y);var An=On.y*Tn.x-On.x*Tn.y;Cn+=(Tn.x+On.x)*An,Mn+=(Tn.y+On.y)*An,kn=Tn,Tn=On,Pn=Pn.next}var En=(Pn=$s.flowpoly.head).elt;Sn+=Tn.x*(En.y-kn.y);var Gn=En.y*Tn.x-En.x*Tn.y;Cn+=(Tn.x+En.x)*Gn,Mn+=(Tn.y+En.y)*Gn,kn=Tn;var In=(Pn=Pn.next).elt;Sn+=En.x*(In.y-kn.y);var Bn=In.y*En.x-In.x*En.y;Cn+=(En.x+In.x)*Bn,Mn+=(En.y+In.y)*Bn;var Ln=1/(6*(Sn*=.5));return Cn*=Ln,Mn*=Ln,i.overlap=-Sn,i.centroidx=Cn,i.centroidy=Mn,!0}return!1}return!1}return!1}for(var Dn=[],Rn=!0,Fn=null,jn=null,Nn=-1e100,Un=!0,Vn=t.polygon.gverts.next,Hn=0,Wn=t.polygon.edges.head;null!=Wn;){var Xn=Wn.elt,qn=Xn.gnormx*e.circle.worldCOMx+Xn.gnormy*e.circle.worldCOMy;if(qn>Xn.gprojection+e.circle.radius){Un=!1;break}qn+e.circle.radius>Xn.gprojection+Qs.epsilon&&(Rn=!1,Dn[Hn]=!0),Nn<(qn-=Xn.gprojection+e.circle.radius)&&(Nn=qn,Fn=Xn,jn=Vn),Vn=Vn.next,++Hn,Wn=Wn.next}if(Un){if(Rn){var Yn=e.circle.area,Kn=e.circle.worldCOMx,Zn=e.circle.worldCOMy;return i.overlap=Yn,i.centroidx=Kn,i.centroidy=Zn,!0}var Jn,Qn=jn,$n=null==jn.next?t.polygon.gverts.next:jn.next,er=e.circle.worldCOMy*Fn.gnormx-e.circle.worldCOMx*Fn.gnormy;if(er<=Qn.y*Fn.gnormx-Qn.x*Fn.gnormy){var tr,ir,nr=e.circle.radius;Jn=(tr=Qn.x-e.circle.worldCOMx)*tr+(ir=Qn.y-e.circle.worldCOMy)*ir<=nr*nr}else if(er>=$n.y*Fn.gnormx-$n.x*Fn.gnormy){var rr,or,ar=e.circle.radius;Jn=(rr=$n.x-e.circle.worldCOMx)*rr+(or=$n.y-e.circle.worldCOMy)*or<=ar*ar}else Jn=!0;if(Jn){for(var sr=[],lr=0,pr=!0,hr=null,ur=0,cr=t.polygon.gverts.next;null!=cr;){var dr,_r,yr=cr,mr=yr.x,fr=yr.y;dr=mr-e.circle.worldCOMx,_r=fr-e.circle.worldCOMy,(sr[lr]=dr*dr+_r*_r<=e.circle.radius*e.circle.radius)?(ur=lr,hr=cr):pr=!1,++lr,cr=cr.next}if(pr){var xr=t.polygon;if(xr.zip_worldCOM&&null!=xr.body){if(xr.zip_worldCOM=!1,xr.zip_localCOM){if(xr.zip_localCOM=!1,1==xr.type){var vr=xr.polygon;if(null==vr.lverts.next.next)vr.localCOMx=vr.lverts.next.x,vr.localCOMy=vr.lverts.next.y;else if(null==vr.lverts.next.next.next)vr.localCOMx=vr.lverts.next.x,vr.localCOMy=vr.lverts.next.y,vr.localCOMx+=vr.lverts.next.next.x,vr.localCOMy+=vr.lverts.next.next.y,vr.localCOMx*=.5,vr.localCOMy*=.5;else{vr.localCOMx=0;var zr=vr.localCOMy=0,gr=vr.lverts.next,br=gr,wr=gr=gr.next;for(gr=gr.next;null!=gr;){var Sr=gr;zr+=wr.x*(Sr.y-br.y);var Cr=Sr.y*wr.x-Sr.x*wr.y;vr.localCOMx+=(wr.x+Sr.x)*Cr,vr.localCOMy+=(wr.y+Sr.y)*Cr,br=wr,wr=Sr,gr=gr.next}var Mr=gr=vr.lverts.next;zr+=wr.x*(Mr.y-br.y);var Pr=Mr.y*wr.x-Mr.x*wr.y;vr.localCOMx+=(wr.x+Mr.x)*Pr,vr.localCOMy+=(wr.y+Mr.y)*Pr,br=wr;var kr=gr=gr.next;zr+=Mr.x*(kr.y-br.y);var Tr=kr.y*Mr.x-kr.x*Mr.y;vr.localCOMx+=(Mr.x+kr.x)*Tr,vr.localCOMy+=(Mr.y+kr.y)*Tr;var Or=zr=1/(3*zr);vr.localCOMx*=Or,vr.localCOMy*=Or}}null!=xr.wrap_localCOM&&(xr.wrap_localCOM.zpp_inner.x=xr.localCOMx,xr.wrap_localCOM.zpp_inner.y=xr.localCOMy)}var Ar=xr.body;Ar.zip_axis&&(Ar.zip_axis=!1,Ar.axisx=Math.sin(Ar.rot),Ar.axisy=Math.cos(Ar.rot)),xr.worldCOMx=xr.body.posx+(xr.body.axisy*xr.localCOMx-xr.body.axisx*xr.localCOMy),xr.worldCOMy=xr.body.posy+(xr.localCOMx*xr.body.axisx+xr.localCOMy*xr.body.axisy)}var Er=t.polygon.area,Gr=t.polygon.worldCOMx,Ir=t.polygon.worldCOMy;return i.overlap=Er,i.centroidx=Gr,i.centroidy=Ir,!0}for(;null!=$s.flowpoly.head;){var Br=$s.flowpoly.pop_unsafe();Br._inuse||(null!=Br.outer&&(Br.outer.zpp_inner=null,Br.outer=null),Br._isimmutable=null,Br._validate=null,Br._invalidate=null,Br.next=el.zpp_pool,el.zpp_pool=Br)}$s.flowsegs.clear();var Lr=null,Dr=1;for(null==hr?(hr=t.polygon.gverts.next,Dr=2):(Lr=hr,$s.flowpoly.add(Lr));0!=Dr;)if(1==Dr)if(null==(hr=hr.next)&&(hr=t.polygon.gverts.next),++ur>=t.polygon.edgeCnt&&(ur=0),sr[ur]){var Rr,Fr,jr=Lr.x,Nr=Lr.y;if((Rr=jr-hr.x)*Rr+(Fr=Nr-hr.y)*Fr<Qs.epsilon)break;$s.flowpoly.add(hr)}else{var Ur,Vr,Hr,Wr,Xr,qr,Yr=$s.flowpoly.head.elt,Kr=hr,Zr=(Ur=Kr.x-Yr.x)*Ur+(Vr=Kr.y-Yr.y)*Vr,Jr=2*((Hr=Yr.x-e.circle.worldCOMx)*Ur+(Wr=Yr.y-e.circle.worldCOMy)*Vr),Qr=Math.sqrt(Jr*Jr-4*Zr*(Hr*Hr+Wr*Wr-e.circle.radius*e.circle.radius)),$r=(-Jr-Qr)*(Zr=1/(2*Zr)),eo=$r<Qs.epsilon?(-Jr+Qr)*Zr:$r;Xr=Yr.x+(Kr.x-Yr.x)*eo,qr=Yr.y+(Kr.y-Yr.y)*eo;var to,io,no;if((to=Lr.x-Xr)*to+(io=Lr.y-qr)*io<Qs.epsilon)break;null==el.zpp_pool?no=new el:(no=el.zpp_pool,el.zpp_pool=no.next,no.next=null),no.weak=!1,no._immutable=!1,no.x=Xr,no.y=qr,$s.flowpoly.add(no),Dr=2}else if(2==Dr){var ro=hr.next;null==ro&&(ro=t.polygon.gverts.next);var oo=hr;Dr=0;for(var ao=ro,so=ro;;){var lo=so,po=ur+1;if(po==t.polygon.edgeCnt&&(po=0),Dn[ur]){if(sr[po]){var ho,uo,co,_o,yo,mo,fo=(ho=lo.x-oo.x)*ho+(uo=lo.y-oo.y)*uo,xo=2*((co=oo.x-e.circle.worldCOMx)*ho+(_o=oo.y-e.circle.worldCOMy)*uo),vo=Math.sqrt(xo*xo-4*fo*(co*co+_o*_o-e.circle.radius*e.circle.radius)),zo=(-xo-vo)*(fo=1/(2*fo)),go=zo<Qs.epsilon?(-xo+vo)*fo:zo;yo=oo.x+(lo.x-oo.x)*go,mo=oo.y+(lo.y-oo.y)*go;var bo,wo,So;if((bo=Lr.x-yo)*bo+(wo=Lr.y-mo)*wo<Qs.epsilon){Dr=0,so=ao;break}null==el.zpp_pool?So=new el:(So=el.zpp_pool,el.zpp_pool=So.next,So.next=null),So.weak=!1,So._immutable=!1,So.x=yo,So.y=mo;var Co=So;$s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(Co),$s.flowpoly.add(Co),Dr=1,so=ao;break}var Mo,Po,ko,To,Oo,Ao=0,Eo=0,Go=(Mo=lo.x-oo.x)*Mo+(Po=lo.y-oo.y)*Po,Io=2*((ko=oo.x-e.circle.worldCOMx)*Mo+(To=oo.y-e.circle.worldCOMy)*Po),Bo=Io*Io-4*Go*(ko*ko+To*To-e.circle.radius*e.circle.radius);if(Bo*Bo<Qs.epsilon?(Ao=Bo<0?10:Eo=-Io/(2*Go),Oo=!1):(Ao=(-Io-(Bo=Math.sqrt(Bo)))*(Go=1/(2*Go)),Eo=(-Io+Bo)*Go,Oo=!0),Ao<1-Qs.epsilon&&Eo>Qs.epsilon){var Lo,Do,Ro,Fo,jo=Ao;if(Lo=oo.x+(lo.x-oo.x)*jo,Do=oo.y+(lo.y-oo.y)*jo,null!=Lr){var No,Uo;Ro=(No=Lr.x-Lo)*No+(Uo=Lr.y-Do)*Uo<Qs.epsilon}else Ro=!1;if(Ro){Dr=0,so=ao;break}null==el.zpp_pool?Fo=new el:(Fo=el.zpp_pool,el.zpp_pool=Fo.next,Fo.next=null),Fo.weak=!1,Fo._immutable=!1,Fo.x=Lo,Fo.y=Do;var Vo=Fo;if(null!=$s.flowpoly.head&&($s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(Vo)),$s.flowpoly.add(Vo),null==Lr&&(Lr=$s.flowpoly.head.elt),Oo){var Ho,Wo,Xo,qo=Eo;Ho=oo.x+(lo.x-oo.x)*qo,Wo=oo.y+(lo.y-oo.y)*qo,null==el.zpp_pool?Xo=new el:(Xo=el.zpp_pool,el.zpp_pool=Xo.next,Xo.next=null),Xo.weak=!1,Xo._immutable=!1,Xo.x=Ho,Xo.y=Wo,$s.flowpoly.add(Xo)}}}oo=lo,ur=po,null==(so=(hr=so).next)&&(so=t.polygon.gverts.next);break}for(;so!=ao;){var Yo=so,Ko=ur+1;if(Ko==t.polygon.edgeCnt&&(Ko=0),Dn[ur]){if(sr[Ko]){var Zo,Jo,Qo,$o,ea,ta,ia=(Zo=Yo.x-oo.x)*Zo+(Jo=Yo.y-oo.y)*Jo,na=2*((Qo=oo.x-e.circle.worldCOMx)*Zo+($o=oo.y-e.circle.worldCOMy)*Jo),ra=Math.sqrt(na*na-4*ia*(Qo*Qo+$o*$o-e.circle.radius*e.circle.radius)),oa=(-na-ra)*(ia=1/(2*ia)),aa=oa<Qs.epsilon?(-na+ra)*ia:oa;ea=oo.x+(Yo.x-oo.x)*aa,ta=oo.y+(Yo.y-oo.y)*aa;var sa,la,pa;if((sa=Lr.x-ea)*sa+(la=Lr.y-ta)*la<Qs.epsilon){Dr=0;break}null==el.zpp_pool?pa=new el:(pa=el.zpp_pool,el.zpp_pool=pa.next,pa.next=null),pa.weak=!1,pa._immutable=!1,pa.x=ea,pa.y=ta;var ha=pa;$s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(ha),$s.flowpoly.add(ha),Dr=1;break}var ua,ca,da,_a,ya,ma=0,fa=0,xa=(ua=Yo.x-oo.x)*ua+(ca=Yo.y-oo.y)*ca,va=2*((da=oo.x-e.circle.worldCOMx)*ua+(_a=oo.y-e.circle.worldCOMy)*ca),za=va*va-4*xa*(da*da+_a*_a-e.circle.radius*e.circle.radius);if(za*za<Qs.epsilon?(ma=za<0?10:fa=-va/(2*xa),ya=!1):(ma=(-va-(za=Math.sqrt(za)))*(xa=1/(2*xa)),fa=(-va+za)*xa,ya=!0),ma<1-Qs.epsilon&&fa>Qs.epsilon){var ga,ba,wa,Sa,Ca=ma;if(ga=oo.x+(Yo.x-oo.x)*Ca,ba=oo.y+(Yo.y-oo.y)*Ca,null!=Lr){var Ma,Pa;wa=(Ma=Lr.x-ga)*Ma+(Pa=Lr.y-ba)*Pa<Qs.epsilon}else wa=!1;if(wa){Dr=0;break}null==el.zpp_pool?Sa=new el:(Sa=el.zpp_pool,el.zpp_pool=Sa.next,Sa.next=null),Sa.weak=!1,Sa._immutable=!1,Sa.x=ga,Sa.y=ba;var ka=Sa;if(null!=$s.flowpoly.head&&($s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add(ka)),$s.flowpoly.add(ka),null==Lr&&(Lr=$s.flowpoly.head.elt),ya){var Ta,Oa,Aa,Ea=fa;Ta=oo.x+(Yo.x-oo.x)*Ea,Oa=oo.y+(Yo.y-oo.y)*Ea,null==el.zpp_pool?Aa=new el:(Aa=el.zpp_pool,el.zpp_pool=Aa.next,Aa.next=null),Aa.weak=!1,Aa._immutable=!1,Aa.x=Ta,Aa.y=Oa,$s.flowpoly.add(Aa)}}}oo=Yo,ur=Ko,null==(so=(hr=so).next)&&(so=t.polygon.gverts.next)}}if(null==$s.flowpoly.head)return!1;if(null==$s.flowpoly.head.next){for(var Ga=!0,Ia=t.polygon.edges.head;null!=Ia;){var Ba=Ia.elt;if(Ba.gnormx*e.circle.worldCOMx+Ba.gnormy*e.circle.worldCOMy>Ba.gprojection){Ga=!1;break}Ia=Ia.next}if(Ga){var La=e.circle.area,Da=e.circle.worldCOMx,Ra=e.circle.worldCOMy;return i.overlap=La,i.centroidx=Da,i.centroidy=Ra,!0}return!1}var Fa=0,ja=0,Na=0;if(null!=$s.flowpoly.head.next.next){var Ua=0,Va=0,Ha=0;Ua=Ha=Va=0;var Wa=$s.flowpoly.head,Xa=Wa.elt,qa=(Wa=Wa.next).elt;for(Wa=Wa.next;null!=Wa;){var Ya=Wa.elt;Ua+=qa.x*(Ya.y-Xa.y);var Ka=Ya.y*qa.x-Ya.x*qa.y;Va+=(qa.x+Ya.x)*Ka,Ha+=(qa.y+Ya.y)*Ka,Xa=qa,qa=Ya,Wa=Wa.next}var Za=(Wa=$s.flowpoly.head).elt;Ua+=qa.x*(Za.y-Xa.y);var Ja=Za.y*qa.x-Za.x*qa.y;Va+=(qa.x+Za.x)*Ja,Ha+=(qa.y+Za.y)*Ja,Xa=qa;var Qa=(Wa=Wa.next).elt;Ua+=Za.x*(Qa.y-Xa.y);var $a=Qa.y*Za.x-Qa.x*Za.y;Va+=(Za.x+Qa.x)*$a,Ha+=(Za.y+Qa.y)*$a;var es=1/(6*(Ua*=.5)),ts=-Ua;Fa+=(Va*=es)*ts,ja+=(Ha*=es)*ts,Na=0-Ua}else $s.flowsegs.add($s.flowpoly.head.elt),$s.flowsegs.add($s.flowpoly.head.next.elt);for(;null!=$s.flowsegs.head;){var is=$s.flowsegs.pop_unsafe(),ns=$s.flowsegs.pop_unsafe(),rs=0,os=0;rs=ns.x-is.x,os=ns.y-is.y;var as=1/Math.sqrt(rs*rs+os*os),ss=rs*=as;rs=-(os*=as),os=ss;var ls=0,ps=0;ls=is.x+ns.x,ps=is.y+ns.y,ls*=.5,ps*=.5;var hs,us,cs=rs*(ls-=e.circle.worldCOMx)+os*(ps-=e.circle.worldCOMy),ds=cs/e.circle.radius,_s=Math.sqrt(1-ds*ds),ys=Math.acos(ds);hs=e.circle.radius*(e.circle.radius*ys-cs*_s),us=.6666666666666666*e.circle.radius*_s*_s*_s/(ys-ds*_s),ls=e.circle.worldCOMx,ps=e.circle.worldCOMy;Fa+=(ls+=rs*us)*hs,ja+=(ps+=os*us)*hs,Na+=hs}var ms=1/Na;return Fa*=ms,ja*=ms,i.overlap=Na,i.centroidx=Fa,i.centroidy=ja,!0}return!1}return!1}var fs,xs,vs=e.circle,zs=t.circle;fs=zs.worldCOMx-vs.worldCOMx,xs=zs.worldCOMy-vs.worldCOMy;var gs=vs.radius+zs.radius,bs=fs*fs+xs*xs;if(gs*gs<bs)return!1;if(bs<Qs.epsilon*Qs.epsilon){if(vs.radius<zs.radius){var ws=vs.area,Ss=vs.worldCOMx,Cs=vs.worldCOMy;i.overlap=ws,i.centroidx=Ss,i.centroidy=Cs}else{var Ms=zs.area,Ps=zs.worldCOMx,ks=zs.worldCOMy;i.overlap=Ms,i.centroidx=Ps,i.centroidy=ks}return!0}var Ts=Math.sqrt(bs),Os=1/Ts,As=.5*(Ts-(zs.radius*zs.radius-vs.radius*vs.radius)*Os);if(As<=-vs.radius){var Es=vs.area,Gs=vs.worldCOMx,Is=vs.worldCOMy;i.overlap=Es,i.centroidx=Gs,i.centroidy=Is}else{var Bs=Ts-As;if(Bs<=-zs.radius){var Ls=zs.area,Ds=zs.worldCOMx,Rs=zs.worldCOMy;i.overlap=Ls,i.centroidx=Ds,i.centroidy=Rs}else{var Fs,js,Ns,Us=As/vs.radius,Vs=Math.sqrt(1-Us*Us),Hs=Math.acos(Us);Fs=vs.radius*(vs.radius*Hs-As*Vs),js=.6666666666666666*vs.radius*Vs*Vs*Vs/(Hs-Us*Vs);var Ws=Bs/zs.radius,Xs=Math.sqrt(1-Ws*Ws),qs=Math.acos(Ws),Ys=Fs+(Ns=zs.radius*(zs.radius*qs-Bs*Xs)),Ks=(js*Fs+(Ts-.6666666666666666*zs.radius*Xs*Xs*Xs/(qs-Ws*Xs))*Ns)/Ys*Os,Zs=vs.worldCOMx+fs*Ks,Js=vs.worldCOMy+xs*Ks;i.overlap=Ys,i.centroidx=Zs,i.centroidy=Js}}return!0},$s.prototype.__class__=$s;var gt=zpp_nape.geom.ZPP_Convex=function(){};gt.__name__=["zpp_nape","geom","ZPP_Convex"],gt.isinner=function(e,t,i){var n,r;n=e.x-t.x,r=e.y-t.y;var o;return o=i.x-t.x,0<=(i.y-t.y)*n-o*r},gt.optimise=function(e){var t=e.vertices,i=e.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);var r=e.vertices,o=e.vertices;if(null!=r)for(var a=r;;){for(var s=a,l=s.prev,p=null,h=s.diagonals.head;null!=h;){var u=h.elt;if(gt.isinner(null==h.next?s.next:h.next.elt,s,l)){for(var c=!0,d=u.prev,_=null,y=u.diagonals.head;null!=y;){var m=y.elt;if(m==s){c=gt.isinner(null==y.next?u.next:y.next.elt,u,d);break}d=m,y=(_=y).next}c?(h=s.diagonals.erase(p),u.diagonals.erase(_)):(l=u,h=(p=h).next)}else l=u,h=(p=h).next}if((a=a.next)==o)break}},gt.prototype.__class__=gt;var bt=zpp_nape.geom.ZPP_ConvexRayResult=function(){this.toiDistance=0,this.next=null,this.inner=!1,this.ray=null,this.position=null,this.convex=null,this.shape=null,this.normal=null};bt.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"],bt.getRay=function(e,t,i,n){var r;null==bt.rayPool?(bt.internal=!0,(r=new Y).zpp_inner=new bt,r.zpp_inner.ray=r,bt.internal=!1):(r=bt.rayPool.ray,bt.rayPool=bt.rayPool.next,r.zpp_inner.next=null);var o=r.zpp_inner;return(o.normal=e).zpp_inner._immutable=!0,o.toiDistance=t,o.inner=i,o.shape=n,r},bt.getConvex=function(e,t,i,n){var r;null==bt.convexPool?(bt.internal=!0,(r=new U).zpp_inner=new bt,r.zpp_inner.convex=r,bt.internal=!1):(r=bt.convexPool.convex,bt.convexPool=bt.convexPool.next,r.zpp_inner.next=null);var o=r.zpp_inner;return o.normal=e,o.position=t,e.zpp_inner._immutable=!0,t.zpp_inner._immutable=!0,o.toiDistance=i,o.shape=n,r},bt.prototype.normal=null,bt.prototype.shape=null,bt.prototype.convex=null,bt.prototype.position=null,bt.prototype.ray=null,bt.prototype.inner=null,bt.prototype.next=null,bt.prototype.toiDistance=null,bt.prototype.disposed=function(){},bt.prototype.free=function(){this.normal.zpp_inner._immutable=!1;var e=this.normal,t=e.zpp_inner;if(e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=el.zpp_pool,el.zpp_pool=t,null!=this.position){this.position.zpp_inner._immutable=!1;var i=this.position,n=i.zpp_inner;i.zpp_inner.outer=null,i.zpp_inner=null,i.zpp_pool=jn.poolVec2,jn.poolVec2=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n}this.shape=null,this.toiDistance=0,null!=this.convex?(this.next=bt.convexPool,bt.convexPool=this):(this.next=bt.rayPool,bt.rayPool=this)},bt.prototype.__class__=bt;var Sn=zpp_nape.geom.ZPP_CutVert=function(){this.used=!1,this.rank=0,this.parent=null,this.positive=!1,this.value=0,this.vert=null,this.posy=0,this.posx=0,this.next=null,this.prev=null};Sn.__name__=["zpp_nape","geom","ZPP_CutVert"],Sn.path=function(e){var t;return null==Sn.zpp_pool?t=new Sn:(t=Sn.zpp_pool,Sn.zpp_pool=t.next,t.next=null),t.vert=e,(t.parent=t).rank=0,t.used=!1,t},Sn.prototype.prev=null,Sn.prototype.next=null,Sn.prototype.posx=null,Sn.prototype.posy=null,Sn.prototype.vert=null,Sn.prototype.value=null,Sn.prototype.positive=null,Sn.prototype.parent=null,Sn.prototype.rank=null,Sn.prototype.used=null,Sn.prototype.alloc=function(){},Sn.prototype.free=function(){this.vert=null,this.parent=null},Sn.prototype.__class__=Sn;var Cn=zpp_nape.geom.ZPP_CutInt=function(){this.path1=null,this.start=null,this.end=null,this.path0=null,this.vertex=!1,this.virtualint=!1,this.time=0,this.next=null};Cn.__name__=["zpp_nape","geom","ZPP_CutInt"],Cn.get=function(e,t,i,n,r,o,a){var s;return null==a&&(a=!1),null==o&&(o=!1),null==Cn.zpp_pool?s=new Cn:(s=Cn.zpp_pool,Cn.zpp_pool=s.next,s.next=null),s.virtualint=o,s.end=t,s.start=i,s.path0=n,s.path1=r,s.time=e,s.vertex=a,s},Cn.prototype.next=null,Cn.prototype.time=null,Cn.prototype.virtualint=null,Cn.prototype.vertex=null,Cn.prototype.path0=null,Cn.prototype.end=null,Cn.prototype.start=null,Cn.prototype.path1=null,Cn.prototype.alloc=function(){},Cn.prototype.free=function(){this.end=this.start=null,this.path0=this.path1=null},Cn.prototype.__class__=Cn;var Mn=zpp_nape.geom.ZPP_Cutter=function(){};Mn.__name__=["zpp_nape","geom","ZPP_Cutter"],Mn.run=function(e,t,i,n,r,o){var a,s,l=t.zpp_inner;null!=l._validate&&l._validate(),a=t.zpp_inner.x;var p=t.zpp_inner;null!=p._validate&&p._validate(),s=t.zpp_inner.y;var h,u,c=i.zpp_inner;null!=c._validate&&c._validate(),h=i.zpp_inner.x-a;var d=i.zpp_inner;null!=d._validate&&d._validate();for(var _=n?0:-1/0,y=r?1:1/0,m=-(s*h-a*(u=i.zpp_inner.y-s)),f=null,x=!1,v=e;;){var z;null==Sn.zpp_pool?z=new Sn:(z=Sn.zpp_pool,Sn.zpp_pool=z.next,z.next=null),z.vert=v,z.posx=z.vert.x,z.posy=z.vert.y,z.value=z.posy*h-z.posx*u+m,z.positive=0<z.value,0==z.value&&(x=!0);var g=z;if(null==f?f=g.prev=g.next=g:(g.prev=f,g.next=f.next,f.next.prev=g,f.next=g),f=g,(v=v.next)==e)break}if(x){var b=null,w=f;if(null!=f)for(var S=f;;){var C=S;if(0!=C.value){b=C;break}if((S=S.next)==w)break}var M=0,P=0;M=h,P=u;var k=1/Math.sqrt(M*M+P*P),T=M*=k;M=-(P*=k),P=T;for(var O=null,A=b;;)if(0==A.value||null!=O&&A!=O.next){var E=O.value*A.value;if(0!=E){var G,I=O.next;if(0<E)G=O.positive;else{var B=I.next,L=0,D=0;L=I.posx+B.posx,D=I.posy+B.posy;var R=(L*=.5)+1e-8*M,F=(D*=.5)+1e-8*P,j=!1;if(null!=e)for(var N=e;;){var U=N,V=U.prev;if((U.y<F&&V.y>=F||V.y<F&&U.y>=F)&&(U.x<=R||V.x<=R)&&U.x+(F-U.y)/(V.y-U.y)*(V.x-U.x)<R&&(j=!j),(N=N.next)==e)break}G=j}var H=A;if(null!=I)for(var W=I;W.positive=G,(W=W.next)!=H;);if((A=(O=A).next)==b)break}else if((A=A.next)==b)break}else if((A=(O=A).next)==b)break;for(;;){if(0!=A.value&&(null==O||A==O.next)){A=(O=A).next;break}var X=O.value*A.value;if(0==X){A=A.next;break}var q,Y=O.next;if(0<X)q=O.positive;else{var K=Y.next,Z=0,J=0;Z=Y.posx+K.posx,J=Y.posy+K.posy;var Q=(Z*=.5)+1e-8*M,$=(J*=.5)+1e-8*P,ee=!1;if(null!=e)for(var te=e;;){var ie=te,ne=ie.prev;if((ie.y<$&&ne.y>=$||ne.y<$&&ie.y>=$)&&(ie.x<=Q||ne.x<=Q)&&ie.x+($-ie.y)/(ne.y-ie.y)*(ne.x-ie.x)<Q&&(ee=!ee),(te=te.next)==e)break}q=ee}var re=A;if(null!=Y)for(var oe=Y;oe.positive=q,(oe=oe.next)!=re;);A=(O=A).next;break}}null==Mn.ints&&(Mn.ints=new Pn),null==Mn.paths&&(Mn.paths=new kn);var ae,se=null,le=f.posx,pe=f.posy;null==dr.zpp_pool?ae=new dr:(ae=dr.zpp_pool,dr.zpp_pool=ae.next,ae.next=null),ae.forced=!1,ae.x=le,ae.y=pe;var he=ae;null==se?se=he.prev=he.next=he:(he.next=se,he.prev=se.prev,se.prev.next=he,se.prev=he);var ue,ce=se;null==Sn.zpp_pool?ue=new Sn:(ue=Sn.zpp_pool,Sn.zpp_pool=ue.next,ue.next=null),ue.vert=se,(ue.parent=ue).rank=0,ue.used=!1;var de=ue;Mn.paths.add(de);for(var _e=f;;){var ye,me=_e.next,fe=me.posx,xe=me.posy;null==dr.zpp_pool?ye=new dr:(ye=dr.zpp_pool,dr.zpp_pool=ye.next,ye.next=null),ye.forced=!1,ye.x=fe,ye.y=xe;var ve=ye;if(_e.positive==me.positive)null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);else{var ze,ge,be=u*(ze=me.posx-_e.posx)-h*(ge=me.posy-_e.posy);be=1/be;var we,Se,Ce,Me=(ge*(we=a-_e.posx)-ze*(Se=s-_e.posy))*be;if(Me<_||y<Me)null==Cn.zpp_pool?Ce=new Cn:(Ce=Cn.zpp_pool,Cn.zpp_pool=Ce.next,Ce.next=null),Ce.virtualint=!0,Ce.end=null,Ce.start=null,Ce.path0=null,Ce.path1=null,Ce.time=Me,Ce.vertex=!1,Mn.ints.add(Ce),null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);else if(0==_e.value){var Pe=se.prev;se=null;var ke,Te=Pe.x,Oe=Pe.y;null==dr.zpp_pool?ke=new dr:(ke=dr.zpp_pool,dr.zpp_pool=ke.next,ke.next=null),ke.forced=!1,ke.x=Te,ke.y=Oe;var Ae=ke;null==se?se=Ae.prev=Ae.next=Ae:(Ae.next=se,Ae.prev=se.prev,se.prev.next=Ae,se.prev=Ae),null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);var Ee,Ge=Mn.paths.head.elt;null==Sn.zpp_pool?Ee=new Sn:(Ee=Sn.zpp_pool,Sn.zpp_pool=Ee.next,Ee.next=null),Ee.vert=se,(Ee.parent=Ee).rank=0,Ee.used=!1,Mn.paths.add(Ee);var Ie,Be=Mn.paths.head.elt;null==Cn.zpp_pool?Ie=new Cn:(Ie=Cn.zpp_pool,Cn.zpp_pool=Ie.next,Ie.next=null),Ie.virtualint=!0,Ie.end=Pe,Ie.start=se,Ie.path0=Ge,Ie.path1=Be,Ie.time=Me,Ie.vertex=!1,Mn.ints.add(Ie)}else if(0==me.value){null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);var Le=se.prev;se=null;var De,Re=me.posx,Fe=me.posy;null==dr.zpp_pool?De=new dr:(De=dr.zpp_pool,dr.zpp_pool=De.next,De.next=null),De.forced=!1,De.x=Re,De.y=Fe;var je=De;null==se?se=je.prev=je.next=je:(je.next=se,je.prev=se.prev,se.prev.next=je,se.prev=je);var Ne,Ue=Mn.paths.head.elt;null==Sn.zpp_pool?Ne=new Sn:(Ne=Sn.zpp_pool,Sn.zpp_pool=Ne.next,Ne.next=null),Ne.vert=se,(Ne.parent=Ne).rank=0,Ne.used=!1,Mn.paths.add(Ne);var Ve,He=Mn.paths.head.elt;null==Cn.zpp_pool?Ve=new Cn:(Ve=Cn.zpp_pool,Cn.zpp_pool=Ve.next,Ve.next=null),Ve.virtualint=!0,Ve.end=Le,Ve.start=se,Ve.path0=Ue,Ve.path1=He,Ve.time=Me,Ve.vertex=!1,Mn.ints.add(Ve)}else{var We,Xe=(u*we-h*Se)*be,qe=0,Ye=0;qe=_e.posx,Ye=_e.posy,qe+=ze*Xe,Ye+=ge*Xe,null==dr.zpp_pool?We=new dr:(We=dr.zpp_pool,dr.zpp_pool=We.next,We.next=null),We.forced=!1,We.x=qe,We.y=Ye;var Ke=We;null==se?se=Ke.prev=Ke.next=Ke:(Ke.next=se,Ke.prev=se.prev,se.prev.next=Ke,se.prev=Ke);var Ze,Je=se.prev;(se=null)==dr.zpp_pool?Ze=new dr:(Ze=dr.zpp_pool,dr.zpp_pool=Ze.next,Ze.next=null),Ze.forced=!1,Ze.x=qe,Ze.y=Ye;var Qe=Ze;null==se?se=Qe.prev=Qe.next=Qe:(Qe.next=se,Qe.prev=se.prev,se.prev.next=Qe,se.prev=Qe),null==se?se=ve.prev=ve.next=ve:(ve.next=se,ve.prev=se.prev,se.prev.next=ve,se.prev=ve);var $e,et=Mn.paths.head.elt;null==Sn.zpp_pool?$e=new Sn:($e=Sn.zpp_pool,Sn.zpp_pool=$e.next,$e.next=null),$e.vert=se,($e.parent=$e).rank=0,$e.used=!1,Mn.paths.add($e);var tt,it=Mn.paths.head.elt;null==Cn.zpp_pool?tt=new Cn:(tt=Cn.zpp_pool,Cn.zpp_pool=tt.next,tt.next=null),tt.virtualint=!1,tt.end=Je,tt.start=se,tt.path0=et,tt.path1=it,tt.time=Me,tt.vertex=!1,Mn.ints.add(tt)}}if((_e=_e.next)==f)break}var nt=se.prev;nt.next.prev=ce.prev,ce.prev.next=nt.next,(nt.next=ce).prev=nt;var rt,ot,at=Mn.paths.head.elt;if(de==de.parent)rt=de;else{for(var st=de,lt=null;st!=st.parent;){var pt=st.parent;st.parent=lt,lt=st,st=pt}for(;null!=lt;){var ht=lt.parent;lt.parent=st,lt=ht}rt=st}if(at==at.parent)ot=at;else{for(var ut=at,ct=null;ut!=ut.parent;){var dt=ut.parent;ut.parent=ct,ct=ut,ut=dt}for(;null!=ct;){var _t=ct.parent;ct.parent=ut,ct=_t}ot=ut}rt!=ot&&(rt.rank<ot.rank?rt.parent=ot:rt.rank>ot.rank?ot.parent=rt:(ot.parent=rt).rank++);var yt=Mn.ints;if(null!=yt.head&&null!=yt.head.next){for(var mt,ft,xt,vt=yt.head,zt=null,gt=null,bt=null,wt=null,St=1;;){for(mt=0,gt=vt,zt=vt=null;null!=gt;){for(++mt,bt=gt,ft=0,xt=St;null!=bt&&ft<St;)++ft,bt=bt.next;for(;0<ft||0<xt&&null!=bt;)0==ft?(bt=(wt=bt).next,--xt):0==xt||null==bt?(gt=(wt=gt).next,--ft):gt.elt.time<bt.elt.time?(gt=(wt=gt).next,--ft):(bt=(wt=bt).next,--xt),null!=zt?zt.next=wt:vt=wt,zt=wt;gt=bt}if(zt.next=null,St<<=1,!(1<mt))break}yt.head=vt,yt.modified=!0,yt.pushmod=!0}for(;null!=Mn.ints.head;){var Ct=Mn.ints.pop_unsafe(),Mt=Mn.ints.pop_unsafe();if(Ct.virtualint||Mt.virtualint){if(Ct.virtualint&&!Mt.virtualint){var Pt,kt,Tt;if(null!=Mt.end&&Mt.end.prev==Mt.end){Mt.end.next=Mt.end.prev=null;var Ot=Mt.end;if(null!=Ot.wrap){Ot.wrap.zpp_inner._inuse=!1;var At=Ot.wrap,Et=At.zpp_inner;At.zpp_inner.outer=null,At.zpp_inner=null,At.zpp_pool=jn.poolVec2,jn.poolVec2=At,null!=Et.outer&&(Et.outer.zpp_inner=null,Et.outer=null),Et._isimmutable=null,Et._validate=null,Et._invalidate=null,Et.next=el.zpp_pool,el.zpp_pool=Et,Ot.wrap=null}Ot.prev=Ot.next=null,Ot.next=dr.zpp_pool,dr.zpp_pool=Ot,Pt=null}else{var Gt=Mt.end.prev;Mt.end.prev.next=Mt.end.next,Mt.end.next.prev=Mt.end.prev,Mt.end.next=Mt.end.prev=null;var It=Mt.end;if(null!=It.wrap){It.wrap.zpp_inner._inuse=!1;var Bt=It.wrap,Lt=Bt.zpp_inner;Bt.zpp_inner.outer=null,Bt.zpp_inner=null,Bt.zpp_pool=jn.poolVec2,jn.poolVec2=Bt,null!=Lt.outer&&(Lt.outer.zpp_inner=null,Lt.outer=null),Lt._isimmutable=null,Lt._validate=null,Lt._invalidate=null,Lt.next=el.zpp_pool,el.zpp_pool=Lt,It.wrap=null}It.prev=It.next=null,It.next=dr.zpp_pool,dr.zpp_pool=It,Mt.end=null,Pt=Gt}if(Mt.end=Pt,!Mt.vertex)if(Mt.end!=Mt.path0.vert){var Dt;if(Mt.start.x=Mt.end.x,Mt.start.y=Mt.end.y,null!=Mt.end&&Mt.end.prev==Mt.end){Mt.end.next=Mt.end.prev=null;var Rt=Mt.end;if(null!=Rt.wrap){Rt.wrap.zpp_inner._inuse=!1;var Ft=Rt.wrap,jt=Ft.zpp_inner;Ft.zpp_inner.outer=null,Ft.zpp_inner=null,Ft.zpp_pool=jn.poolVec2,jn.poolVec2=Ft,null!=jt.outer&&(jt.outer.zpp_inner=null,jt.outer=null),jt._isimmutable=null,jt._validate=null,jt._invalidate=null,jt.next=el.zpp_pool,el.zpp_pool=jt,Rt.wrap=null}Rt.prev=Rt.next=null,Rt.next=dr.zpp_pool,dr.zpp_pool=Rt,Dt=null}else{var Nt=Mt.end.prev;Mt.end.prev.next=Mt.end.next,Mt.end.next.prev=Mt.end.prev,Mt.end.next=Mt.end.prev=null;var Ut=Mt.end;if(null!=Ut.wrap){Ut.wrap.zpp_inner._inuse=!1;var Vt=Ut.wrap,Ht=Vt.zpp_inner;Vt.zpp_inner.outer=null,Vt.zpp_inner=null,Vt.zpp_pool=jn.poolVec2,jn.poolVec2=Vt,null!=Ht.outer&&(Ht.outer.zpp_inner=null,Ht.outer=null),Ht._isimmutable=null,Ht._validate=null,Ht._invalidate=null,Ht.next=el.zpp_pool,el.zpp_pool=Ht,Ut.wrap=null}Ut.prev=Ut.next=null,Ut.next=dr.zpp_pool,dr.zpp_pool=Ut,Mt.end=null,Dt=Nt}Mt.end=Dt}else{var Wt=Mt.start.next;if(Mt.start.x=Wt.x,Mt.start.y=Wt.y,null!=Wt&&Wt.prev==Wt){Wt.next=Wt.prev=null;var Xt=Wt;if(null!=Xt.wrap){Xt.wrap.zpp_inner._inuse=!1;var qt=Xt.wrap,Yt=qt.zpp_inner;qt.zpp_inner.outer=null,qt.zpp_inner=null,qt.zpp_pool=jn.poolVec2,jn.poolVec2=qt,null!=Yt.outer&&(Yt.outer.zpp_inner=null,Yt.outer=null),Yt._isimmutable=null,Yt._validate=null,Yt._invalidate=null,Yt.next=el.zpp_pool,el.zpp_pool=Yt,Xt.wrap=null}Xt.prev=Xt.next=null,Xt.next=dr.zpp_pool,dr.zpp_pool=Xt,Wt=null}else{Wt.prev.next=Wt.next,Wt.next.prev=Wt.prev,Wt.next=Wt.prev=null;var Kt=Wt;if(null!=Kt.wrap){Kt.wrap.zpp_inner._inuse=!1;var Zt=Kt.wrap,Jt=Zt.zpp_inner;Zt.zpp_inner.outer=null,Zt.zpp_inner=null,Zt.zpp_pool=jn.poolVec2,jn.poolVec2=Zt,null!=Jt.outer&&(Jt.outer.zpp_inner=null,Jt.outer=null),Jt._isimmutable=null,Jt._validate=null,Jt._invalidate=null,Jt.next=el.zpp_pool,el.zpp_pool=Jt,Kt.wrap=null}Kt.prev=Kt.next=null,Kt.next=dr.zpp_pool,dr.zpp_pool=Kt}}if(Mt.end.next.prev=Mt.start.prev,Mt.start.prev.next=Mt.end.next,Mt.end.next=Mt.start,Mt.start.prev=Mt.end,Mt.path0==Mt.path0.parent)kt=Mt.path0;else{for(var Qt=Mt.path0,$t=null;Qt!=Qt.parent;){var ei=Qt.parent;Qt.parent=$t,$t=Qt,Qt=ei}for(;null!=$t;){var ti=$t.parent;$t.parent=Qt,$t=ti}kt=Qt}if(Mt.path1==Mt.path1.parent)Tt=Mt.path1;else{for(var ii=Mt.path1,ni=null;ii!=ii.parent;){var ri=ii.parent;ii.parent=ni,ni=ii,ii=ri}for(;null!=ni;){var oi=ni.parent;ni.parent=ii,ni=oi}Tt=ii}kt!=Tt&&(kt.rank<Tt.rank?kt.parent=Tt:kt.rank>Tt.rank?Tt.parent=kt:(Tt.parent=kt).rank++)}else if(Mt.virtualint&&!Ct.virtualint){var ai,si,li;if(null!=Ct.end&&Ct.end.prev==Ct.end){Ct.end.next=Ct.end.prev=null;var pi=Ct.end;if(null!=pi.wrap){pi.wrap.zpp_inner._inuse=!1;var hi=pi.wrap,ui=hi.zpp_inner;hi.zpp_inner.outer=null,hi.zpp_inner=null,hi.zpp_pool=jn.poolVec2,jn.poolVec2=hi,null!=ui.outer&&(ui.outer.zpp_inner=null,ui.outer=null),ui._isimmutable=null,ui._validate=null,ui._invalidate=null,ui.next=el.zpp_pool,el.zpp_pool=ui,pi.wrap=null}pi.prev=pi.next=null,pi.next=dr.zpp_pool,dr.zpp_pool=pi,ai=null}else{var ci=Ct.end.prev;Ct.end.prev.next=Ct.end.next,Ct.end.next.prev=Ct.end.prev,Ct.end.next=Ct.end.prev=null;var di=Ct.end;if(null!=di.wrap){di.wrap.zpp_inner._inuse=!1;var _i=di.wrap,yi=_i.zpp_inner;_i.zpp_inner.outer=null,_i.zpp_inner=null,_i.zpp_pool=jn.poolVec2,jn.poolVec2=_i,null!=yi.outer&&(yi.outer.zpp_inner=null,yi.outer=null),yi._isimmutable=null,yi._validate=null,yi._invalidate=null,yi.next=el.zpp_pool,el.zpp_pool=yi,di.wrap=null}di.prev=di.next=null,di.next=dr.zpp_pool,dr.zpp_pool=di,Ct.end=null,ai=ci}if(Ct.end=ai,!Ct.vertex)if(Ct.end!=Ct.path0.vert){var mi;if(Ct.start.x=Ct.end.x,Ct.start.y=Ct.end.y,null!=Ct.end&&Ct.end.prev==Ct.end){Ct.end.next=Ct.end.prev=null;var fi=Ct.end;if(null!=fi.wrap){fi.wrap.zpp_inner._inuse=!1;var xi=fi.wrap,vi=xi.zpp_inner;xi.zpp_inner.outer=null,xi.zpp_inner=null,xi.zpp_pool=jn.poolVec2,jn.poolVec2=xi,null!=vi.outer&&(vi.outer.zpp_inner=null,vi.outer=null),vi._isimmutable=null,vi._validate=null,vi._invalidate=null,vi.next=el.zpp_pool,el.zpp_pool=vi,fi.wrap=null}fi.prev=fi.next=null,fi.next=dr.zpp_pool,dr.zpp_pool=fi,mi=null}else{var zi=Ct.end.prev;Ct.end.prev.next=Ct.end.next,Ct.end.next.prev=Ct.end.prev,Ct.end.next=Ct.end.prev=null;var gi=Ct.end;if(null!=gi.wrap){gi.wrap.zpp_inner._inuse=!1;var bi=gi.wrap,wi=bi.zpp_inner;bi.zpp_inner.outer=null,bi.zpp_inner=null,bi.zpp_pool=jn.poolVec2,jn.poolVec2=bi,null!=wi.outer&&(wi.outer.zpp_inner=null,wi.outer=null),wi._isimmutable=null,wi._validate=null,wi._invalidate=null,wi.next=el.zpp_pool,el.zpp_pool=wi,gi.wrap=null}gi.prev=gi.next=null,gi.next=dr.zpp_pool,dr.zpp_pool=gi,Ct.end=null,mi=zi}Ct.end=mi}else{var Si=Ct.start.next;if(Ct.start.x=Si.x,Ct.start.y=Si.y,null!=Si&&Si.prev==Si){Si.next=Si.prev=null;var Ci=Si;if(null!=Ci.wrap){Ci.wrap.zpp_inner._inuse=!1;var Mi=Ci.wrap,Pi=Mi.zpp_inner;Mi.zpp_inner.outer=null,Mi.zpp_inner=null,Mi.zpp_pool=jn.poolVec2,jn.poolVec2=Mi,null!=Pi.outer&&(Pi.outer.zpp_inner=null,Pi.outer=null),Pi._isimmutable=null,Pi._validate=null,Pi._invalidate=null,Pi.next=el.zpp_pool,el.zpp_pool=Pi,Ci.wrap=null}Ci.prev=Ci.next=null,Ci.next=dr.zpp_pool,dr.zpp_pool=Ci,Si=null}else{Si.prev.next=Si.next,Si.next.prev=Si.prev,Si.next=Si.prev=null;var ki=Si;if(null!=ki.wrap){ki.wrap.zpp_inner._inuse=!1;var Ti=ki.wrap,Oi=Ti.zpp_inner;Ti.zpp_inner.outer=null,Ti.zpp_inner=null,Ti.zpp_pool=jn.poolVec2,jn.poolVec2=Ti,null!=Oi.outer&&(Oi.outer.zpp_inner=null,Oi.outer=null),Oi._isimmutable=null,Oi._validate=null,Oi._invalidate=null,Oi.next=el.zpp_pool,el.zpp_pool=Oi,ki.wrap=null}ki.prev=ki.next=null,ki.next=dr.zpp_pool,dr.zpp_pool=ki}}if(Ct.end.next.prev=Ct.start.prev,Ct.start.prev.next=Ct.end.next,Ct.end.next=Ct.start,Ct.start.prev=Ct.end,Ct.path0==Ct.path0.parent)si=Ct.path0;else{for(var Ai=Ct.path0,Ei=null;Ai!=Ai.parent;){var Gi=Ai.parent;Ai.parent=Ei,Ei=Ai,Ai=Gi}for(;null!=Ei;){var Ii=Ei.parent;Ei.parent=Ai,Ei=Ii}si=Ai}if(Ct.path1==Ct.path1.parent)li=Ct.path1;else{for(var Bi=Ct.path1,Li=null;Bi!=Bi.parent;){var Di=Bi.parent;Bi.parent=Li,Li=Bi,Bi=Di}for(;null!=Li;){var Ri=Li.parent;Li.parent=Bi,Li=Ri}li=Bi}si!=li&&(si.rank<li.rank?si.parent=li:si.rank>li.rank?li.parent=si:(li.parent=si).rank++)}}else{var Fi,ji,Ni,Ui;if(Ct.end.next.prev=Mt.start.prev,Mt.start.prev.next=Ct.end.next,Ct.end.next=Mt.start,Mt.start.prev=Ct.end,Mt.end.next.prev=Ct.start.prev,Ct.start.prev.next=Mt.end.next,Mt.end.next=Ct.start,Ct.start.prev=Mt.end,Ct.path0==Ct.path0.parent)Fi=Ct.path0;else{for(var Vi=Ct.path0,Hi=null;Vi!=Vi.parent;){var Wi=Vi.parent;Vi.parent=Hi,Hi=Vi,Vi=Wi}for(;null!=Hi;){var Xi=Hi.parent;Hi.parent=Vi,Hi=Xi}Fi=Vi}if(Mt.path1==Mt.path1.parent)ji=Mt.path1;else{for(var qi=Mt.path1,Yi=null;qi!=qi.parent;){var Ki=qi.parent;qi.parent=Yi,Yi=qi,qi=Ki}for(;null!=Yi;){var Zi=Yi.parent;Yi.parent=qi,Yi=Zi}ji=qi}if(Fi!=ji&&(Fi.rank<ji.rank?Fi.parent=ji:Fi.rank>ji.rank?ji.parent=Fi:(ji.parent=Fi).rank++),Ct.path1==Ct.path1.parent)Ni=Ct.path1;else{for(var Ji=Ct.path1,Qi=null;Ji!=Ji.parent;){var $i=Ji.parent;Ji.parent=Qi,Qi=Ji,Ji=$i}for(;null!=Qi;){var en=Qi.parent;Qi.parent=Ji,Qi=en}Ni=Ji}if(Mt.path0==Mt.path0.parent)Ui=Mt.path0;else{for(var tn=Mt.path0,nn=null;tn!=tn.parent;){var rn=tn.parent;tn.parent=nn,nn=tn,tn=rn}for(;null!=nn;){var on=nn.parent;nn.parent=tn,nn=on}Ui=tn}Ni!=Ui&&(Ni.rank<Ui.rank?Ni.parent=Ui:Ni.rank>Ui.rank?Ui.parent=Ni:(Ui.parent=Ni).rank++)}Ct.end=Ct.start=null,Ct.path0=Ct.path1=null,Ct.next=Cn.zpp_pool,Cn.zpp_pool=Ct,Mt.end=Mt.start=null,Mt.path0=Mt.path1=null,Mt.next=Cn.zpp_pool,Cn.zpp_pool=Mt}for(var an=null==o?new wn:o,sn=Mn.paths.head;null!=sn;){var ln,pn=sn.elt;if(pn==pn.parent)ln=pn;else{for(var hn=pn,un=null;hn!=hn.parent;){var cn=hn.parent;hn.parent=un,un=hn,hn=cn}for(;null!=un;){var dn=un.parent;un.parent=hn,un=dn}ln=hn}if(ln.used)sn=sn.next;else{ln.used=!0;for(var _n=ln.vert,yn=!0;null!=ln.vert&&(yn||_n!=ln.vert);)if(yn=!1,_n.x==_n.next.x&&_n.y==_n.next.y)if(_n==ln.vert&&(ln.vert=_n.next==_n?null:_n.next,yn=!0),null!=_n&&_n.prev==_n)_n.next=_n.prev=null,_n=_n=null;else{var mn=_n.next;_n.prev.next=_n.next,_n.next.prev=_n.prev,_n.next=_n.prev=null,_n=null,_n=mn}else _n=_n.next;if(null!=ln.vert){var fn=bn.get();fn.zpp_inner.vertices=ln.vert,an.zpp_inner.reverse_flag?an.push(fn):an.unshift(fn)}sn=sn.next}}for(;null!=Mn.paths.head;){var xn=Mn.paths.pop_unsafe();xn.vert=null,xn.parent=null,xn.next=Sn.zpp_pool,Sn.zpp_pool=xn}for(;null!=f;)if(null!=f&&f.prev==f){f.next=f.prev=null;var vn=f;vn.vert=null,vn.parent=null,vn.next=Sn.zpp_pool,Sn.zpp_pool=vn,f=f=null}else{var zn=f.next;f.prev.next=f.next,f.next.prev=f.prev,f.next=f.prev=null;var gn=f;gn.vert=null,gn.parent=null,gn.next=Sn.zpp_pool,Sn.zpp_pool=gn,f=null,f=zn}return an},Mn.prototype.__class__=Mn;var wt=zpp_nape.geom.ZPP_Geom=function(){};wt.__name__=["zpp_nape","geom","ZPP_Geom"],wt.validateShape=function(e){if(1==e.type){var t=e.polygon;if(t.zip_gaxi&&null!=t.body){t.zip_gaxi=!1,t.validate_laxi();var i=t.body;if(i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot)),t.zip_gverts&&null!=t.body){t.zip_gverts=!1,t.validate_lverts();var n=t.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var r=t.lverts.next,o=t.gverts.next;null!=o;){var a=o,s=r;r=r.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),o=o.next}}var l=t.edges.head,p=t.gverts.next,h=p;for(p=p.next;null!=p;){var u=p,c=l.elt;l=l.next,c.gp0=h,c.gp1=u,c.gnormx=t.body.axisy*c.lnormx-t.body.axisx*c.lnormy,c.gnormy=c.lnormx*t.body.axisx+c.lnormy*t.body.axisy,c.gprojection=t.body.posx*c.gnormx+t.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy,h=u,p=p.next}var d=l.elt;d.gp0=h,d.gp1=t.gverts.next,d.gnormx=t.body.axisy*d.lnormx-t.body.axisx*d.lnormy,d.gnormy=d.lnormx*t.body.axisx+d.lnormy*t.body.axisy,d.gprojection=t.body.posx*d.gnormx+t.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}}if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var _=e.circle;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var m=y.localCOMy=0,f=y.lverts.next,x=f,v=f=f.next;for(f=f.next;null!=f;){var z=f;m+=v.x*(z.y-x.y);var g=z.y*v.x-z.x*v.y;y.localCOMx+=(v.x+z.x)*g,y.localCOMy+=(v.y+z.y)*g,x=v,v=z,f=f.next}var b=f=y.lverts.next;m+=v.x*(b.y-x.y);var w=b.y*v.x-b.x*v.y;y.localCOMx+=(v.x+b.x)*w,y.localCOMy+=(v.y+b.y)*w,x=v;var S=f=f.next;m+=b.x*(S.y-x.y);var C=S.y*b.x-S.x*b.y;y.localCOMx+=(b.x+S.x)*C,y.localCOMy+=(b.y+S.y)*C;var M=m=1/(3*m);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=_.radius,T=_.radius;_.aabb.minx=_.worldCOMx-k,_.aabb.miny=_.worldCOMy-T,_.aabb.maxx=_.worldCOMx+k,_.aabb.maxy=_.worldCOMy+T}else{var O=e.polygon;if(O.zip_gverts&&null!=O.body){O.zip_gverts=!1,O.validate_lverts();var A=O.body;A.zip_axis&&(A.zip_axis=!1,A.axisx=Math.sin(A.rot),A.axisy=Math.cos(A.rot));for(var E=O.lverts.next,G=O.gverts.next;null!=G;){var I=G,B=E;E=E.next,I.x=O.body.posx+(O.body.axisy*B.x-O.body.axisx*B.y),I.y=O.body.posy+(B.x*O.body.axisx+B.y*O.body.axisy),G=G.next}}var L=O.gverts.next;O.aabb.minx=L.x,O.aabb.miny=L.y,O.aabb.maxx=L.x,O.aabb.maxy=L.y;for(var D=O.gverts.next.next;null!=D;){var R=D;R.x<O.aabb.minx&&(O.aabb.minx=R.x),R.x>O.aabb.maxx&&(O.aabb.maxx=R.x),R.y<O.aabb.miny&&(O.aabb.miny=R.y),R.y>O.aabb.maxy&&(O.aabb.maxy=R.y),D=D.next}}if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var F=e.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,V=N=N.next;for(N=N.next;null!=N;){var H=N;j+=V.x*(H.y-U.y);var W=H.y*V.x-H.x*V.y;F.localCOMx+=(V.x+H.x)*W,F.localCOMy+=(V.y+H.y)*W,U=V,V=H,N=N.next}var X=N=F.lverts.next;j+=V.x*(X.y-U.y);var q=X.y*V.x-X.x*V.y;F.localCOMx+=(V.x+X.x)*q,F.localCOMy+=(V.y+X.y)*q,U=V;var Y=N=N.next;j+=X.x*(Y.y-U.y);var K=Y.y*X.x-Y.x*X.y;F.localCOMx+=(X.x+Y.x)*K,F.localCOMy+=(X.y+Y.y)*K;var Z=j=1/(3*j);F.localCOMx*=Z,F.localCOMy*=Z}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var J=e.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}},wt.prototype.__class__=wt;var dr=zpp_nape.geom.ZPP_GeomVert=function(){this.forced=!1,this.wrap=null,this.next=null,this.prev=null,this.y=0,this.x=0};dr.__name__=["zpp_nape","geom","ZPP_GeomVert"],dr.get=function(e,t){var i;return null==dr.zpp_pool?i=new dr:(i=dr.zpp_pool,dr.zpp_pool=i.next,i.next=null),i.forced=!1,i.x=e,i.y=t,i},dr.prototype.x=null,dr.prototype.y=null,dr.prototype.prev=null,dr.prototype.next=null,dr.prototype.wrap=null,dr.prototype.forced=null,dr.prototype.free=function(){if(null!=this.wrap){this.wrap.zpp_inner._inuse=!1;var e=this.wrap,t=e.zpp_inner;e.zpp_inner.outer=null,e.zpp_inner=null,e.zpp_pool=jn.poolVec2,jn.poolVec2=e,null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=el.zpp_pool,el.zpp_pool=t,this.wrap=null}this.prev=this.next=null},dr.prototype.alloc=function(){this.forced=!1},dr.prototype.wrapper=function(){if(null==this.wrap){var e,t=this.x,i=this.y;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap=e,this.wrap.zpp_inner._inuse=!0,this.wrap.zpp_inner._invalidate=$(this,this.modwrap),this.wrap.zpp_inner._validate=$(this,this.getwrap)}return this.wrap},dr.prototype.modwrap=function(e){this.x=e.x,this.y=e.y},dr.prototype.getwrap=function(){this.wrap.zpp_inner.x=this.x,this.wrap.zpp_inner.y=this.y},dr.prototype.__class__=dr;var St=zpp_nape.geom.ZPP_GeomPoly=function(e){this.vertices=null,this.outer=null,this.outer=e};St.__name__=["zpp_nape","geom","ZPP_GeomPoly"],St.prototype.outer=null,St.prototype.vertices=null,St.prototype.__class__=St;var Ct=zpp_nape.geom.ZPP_GeomVertexIterator=function(){this.next=null,this.outer=null,this.forward=!1,this.first=!1,this.start=null,this.ptr=null,this.outer=new H};Ct.__name__=["zpp_nape","geom","ZPP_GeomVertexIterator"],Ct.get=function(e,t){var i;return null==Ct.zpp_pool?i=new Ct:(i=Ct.zpp_pool,Ct.zpp_pool=i.next,i.next=null),(i.outer.zpp_inner=i).ptr=e,i.forward=t,i.start=e,i.first=null!=e,i.outer},Ct.prototype.ptr=null,Ct.prototype.start=null,Ct.prototype.first=null,Ct.prototype.forward=null,Ct.prototype.outer=null,Ct.prototype.next=null,Ct.prototype.free=function(){this.outer.zpp_inner=null,this.ptr=this.start=null},Ct.prototype.alloc=function(){},Ct.prototype.__class__=Ct;var Mt=zpp_nape.geom.ZPP_MarchSpan=function(){this.next=null,this.out=!1,this.rank=0,this.parent=null,this.parent=this};Mt.__name__=["zpp_nape","geom","ZPP_MarchSpan"],Mt.prototype.parent=null,Mt.prototype.rank=null,Mt.prototype.out=null,Mt.prototype.next=null,Mt.prototype.free=function(){this.parent=this},Mt.prototype.alloc=function(){this.out=!1,this.rank=0},Mt.prototype.__class__=Mt;var _r=zpp_nape.geom.ZPP_MarchPair=function(){this.next=null,this.spanr=null,this.span2=null,this.span1=null,this.pd=null,this.okeyr=0,this.keyr=0,this.pr=null,this.okey2=0,this.key2=0,this.p2=null,this.okey1=0,this.key1=0,this.p1=null};_r.__name__=["zpp_nape","geom","ZPP_MarchPair"],_r.prototype.p1=null,_r.prototype.key1=null,_r.prototype.okey1=null,_r.prototype.p2=null,_r.prototype.key2=null,_r.prototype.okey2=null,_r.prototype.pr=null,_r.prototype.keyr=null,_r.prototype.okeyr=null,_r.prototype.pd=null,_r.prototype.span1=null,_r.prototype.span2=null,_r.prototype.spanr=null,_r.prototype.next=null,_r.prototype.free=function(){this.p1=this.p2=this.pr=this.pd=null,this.span1=this.span2=this.spanr=null},_r.prototype.alloc=function(){},_r.prototype.__class__=_r;var yr=zpp_nape.geom.ZPP_MarchingSquares=function(){};yr.__name__=["zpp_nape","geom","ZPP_MarchingSquares"],yr.isos=null,yr.ints=null,yr.map=null,yr.run=function(e,t,i,n,r,o,a,s,l){var p=n-t,h=o.zpp_inner;null!=h._validate&&h._validate();var u=p/o.zpp_inner.x,c=0|u,d=r-i,_=o.zpp_inner;null!=_._validate&&_._validate();var y=d/o.zpp_inner.y,m=0|y;u!=c&&++c,y!=m&&++m,s&&(null==yr.map?yr.map=new ci(c,m):yr.map.resize(c,m,null)),null==yr.isos?yr.isos=new hi(c+1,m+1):yr.isos.resize(c+1,m+1,0);for(var f=0,x=m+1;f<x;){var v,z=f++;if(0==z)v=i;else if(z<=m){var g=o.zpp_inner;null!=g._validate&&g._validate(),v=i+o.zpp_inner.y*z}else v=r;for(var b=0,w=c+1;b<w;){var S,C=b++;if(0==C)S=t;else if(C<=c){var M=o.zpp_inner;null!=M._validate&&M._validate(),S=t+o.zpp_inner.x*C}else S=n;var P=yr.isos,k=e(S,v);P.list[z*P.width+C]=k}}null==yr.ints?yr.ints=new ui(c+1,1+(m<<1)):yr.ints.resize(c+1,1+(m<<1),null);var T=null;s&&(null==Mt.zpp_pool?T=new Mt:(T=Mt.zpp_pool,Mt.zpp_pool=T.next,T.next=null),T.out=!1,T.rank=0);for(var O=i,A=0,E=m;A<E;){var G,I=A++,B=O;if(I==m-1)G=r;else{var L=o.zpp_inner;null!=L._validate&&L._validate(),G=i+o.zpp_inner.y*(I+1)}O=G;for(var D=t,R=null,F=0,j=c;F<j;){var N,U=F++,V=D;if(U==c-1)N=n;else{var H=o.zpp_inner;null!=H._validate&&H._validate(),N=t+o.zpp_inner.x*(U+1)}D=N;var W=yr.me.marchSquare(e,yr.isos,yr.ints,V,B,N,G,U,I,0==U||!s,0==I||!s,U==c-1||!s,I==m-1||!s,a);if(null!=W)if(s){var X=null!=W.p2&&14!=W.okey2?W.p2:W.p1;W.pd=0==(128&(X==W.p2?W.okey2:W.okey1))?X.prev:X.prev.prev;var q,Y=yr.map;if(Y.list[I*Y.width+U]=W,null!=R){var K=W.key1,Z=1&K|(192&K)>>5,J=0;0!=(1&Z)&&(J=1),0!=(2&Z)&&++J,0!=(4&Z)&&++J,q=2<=J}else q=!1;if(q)yr.me.combLR(R,W),W.span1=R.spanr;else{null==Mt.zpp_pool?W.span1=new Mt:(W.span1=Mt.zpp_pool,Mt.zpp_pool=W.span1.next,W.span1.next=null);var Q=W.span1;Q.out=!1,Q.rank=0,W.span1.next=T,T=W.span1}if(null!=W.p2){null==Mt.zpp_pool?W.span2=new Mt:(W.span2=Mt.zpp_pool,Mt.zpp_pool=W.span2.next,W.span2.next=null);var $=W.span2;$.out=!1,$.rank=0,W.span2.next=T,T=W.span2,W.spanr=W.span2}else W.spanr=W.span1;var ee=(28&W.keyr)>>2,te=0;0!=(1&ee)&&(te=1),0!=(2&ee)&&++te,0!=(4&ee)&&++te,R=2<=te?W:null}else yr.me.output(l,W.p1),null!=W.p2&&yr.me.output(l,W.p2),W.p1=W.p2=W.pr=W.pd=null,W.span1=W.span2=W.spanr=null,W.next=_r.zpp_pool,_r.zpp_pool=W;else R=null}}if(s){for(var ie=1,ne=m;ie<ne;)for(var re=ie++,oe=null,ae=0,se=c;ae<se;){var le=ae++,pe=yr.map,he=pe.list[re*pe.width+le];if(null!=he){var ue=7&(null!=he.p2&&14==he.okey2?he.okey2:he.okey1),ce=0;if(0!=(1&ue)&&(ce=1),0!=(2&ue)&&++ce,0!=(4&ue)&&++ce,ce<2)oe=null;else{var de=yr.map,_e=de.list[(re-1)*de.width+le];if(null!=_e){var ye=(112&(null!=_e.p2&&56==_e.okey2?_e.okey2:_e.okey1))>>4,me=0;if(0!=(1&ye)&&(me=1),0!=(2&ye)&&++me,0!=(4&ye)&&++me,me<2)oe=null;else{var fe,xe,ve=null!=_e.p2&&56==_e.okey2?_e.span2:_e.span1,ze=null!=he.p2&&14==he.okey2?he.span2:he.span1;if(ve==ve.parent)fe=ve;else{for(var ge=ve,be=null;ge!=ge.parent;){var we=ge.parent;ge.parent=be,be=ge,ge=we}for(;null!=be;){var Se=be.parent;be.parent=ge,be=Se}fe=ge}if(ze==ze.parent)xe=ze;else{for(var Ce=ze,Me=null;Ce!=Ce.parent;){var Pe=Ce.parent;Ce.parent=Me,Me=Ce,Ce=Pe}for(;null!=Me;){var ke=Me.parent;Me.parent=Ce,Me=ke}xe=Ce}if(fe==xe)oe!=ze&&yr.me.combUD_virtual(_e,he);else{var Te,Oe;if(ve==ve.parent)Te=ve;else{for(var Ae=ve,Ee=null;Ae!=Ae.parent;){var Ge=Ae.parent;Ae.parent=Ee,Ee=Ae,Ae=Ge}for(;null!=Ee;){var Ie=Ee.parent;Ee.parent=Ae,Ee=Ie}Te=Ae}if(ze==ze.parent)Oe=ze;else{for(var Be=ze,Le=null;Be!=Be.parent;){var De=Be.parent;Be.parent=Le,Le=Be,Be=De}for(;null!=Le;){var Re=Le.parent;Le.parent=Be,Le=Re}Oe=Be}Te!=Oe&&(Te.rank<Oe.rank?Te.parent=Oe:Te.rank>Oe.rank?Oe.parent=Te:(Oe.parent=Te).rank++),yr.me.combUD(_e,he)}oe=0!=(4&(ze==he.span2?he.okey2:he.okey1))?ze:null}}else oe=null}}else oe=null}for(var Fe=0,je=m;Fe<je;)for(var Ne=Fe++,Ue=0,Ve=c;Ue<Ve;){var He=Ue++,We=yr.map,Xe=We.list[Ne*We.width+He];if(null!=Xe){var qe;if(Xe.span1==Xe.span1.parent)qe=Xe.span1;else{for(var Ye=Xe.span1,Ke=null;Ye!=Ye.parent;){var Ze=Ye.parent;Ye.parent=Ke,Ke=Ye,Ye=Ze}for(;null!=Ke;){var Je=Ke.parent;Ke.parent=Ye,Ke=Je}qe=Ye}if(qe.out||(qe.out=!0,yr.me.output(l,Xe.p1)),null!=Xe.p2){if(Xe.span2==Xe.span2.parent)qe=Xe.span2;else{for(var Qe=Xe.span2,$e=null;Qe!=Qe.parent;){var et=Qe.parent;Qe.parent=$e,$e=Qe,Qe=et}for(;null!=$e;){var tt=$e.parent;$e.parent=Qe,$e=tt}qe=Qe}qe.out||(qe.out=!0,yr.me.output(l,Xe.p2))}Xe.p1=Xe.p2=Xe.pr=Xe.pd=null,Xe.span1=Xe.span2=Xe.spanr=null,Xe.next=_r.zpp_pool,_r.zpp_pool=Xe;var it=yr.map;it.list[Ne*it.width+He]=null}}for(;null!=T;){var nt=T;T=nt.next,(nt.parent=nt).next=Mt.zpp_pool,Mt.zpp_pool=nt}}},yr.ISO=function(e,t,i){return e(t,i)},yr.prototype.output=function(e,t){var i;if(null==t||t.next==t||t.next==t.prev)i=!0;else{var n=0,r=t;if(null!=t)for(var o=t;;){var a=o;if(n+=a.x*(a.next.y-a.prev.y),(o=o.next)==r)break}var s=.5*n;i=s*s<Qs.epsilon*Qs.epsilon}if(i)for(;null!=t;)if(null!=t&&t.prev==t)t.next=t.prev=null,t=t=null;else{var l=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null,t=null,t=l}else{var p=bn.get();p.zpp_inner.vertices=t,e.zpp_inner.reverse_flag?e.push(p):e.unshift(p)}},yr.prototype.linkright=function(e,t){var i=7&t;return 0==i?e:3==i?e.next.next:e.next},yr.prototype.linkleft=function(e,t){return 0==(1&t)?e.prev:e},yr.prototype.linkdown=function(e,t){return 0==(128&t)?e.prev:e.prev.prev},yr.prototype.linkup=function(e,t){return e},yr.prototype.combLR=function(e,t){var i=e.pr,n=7&e.okeyr,r=0==n?i:3==n?i.next.next:i.next,o=t.p1,a=0==(1&t.okey1)?o.prev:o,s=r.next,l=a.prev;if(0!=(4&e.keyr)){t.pr==t.p1&&(t.pr=r.prev),t.p1=r.prev,r.prev.next=a.next,a.next.prev=r.prev;var p=r;if(null!=p.wrap){p.wrap.zpp_inner._inuse=!1;var h=p.wrap,u=h.zpp_inner;h.zpp_inner.outer=null,h.zpp_inner=null,h.zpp_pool=jn.poolVec2,jn.poolVec2=h,null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u._isimmutable=null,u._validate=null,u._invalidate=null,u.next=el.zpp_pool,el.zpp_pool=u,p.wrap=null}p.prev=p.next=null,p.next=dr.zpp_pool,dr.zpp_pool=p}else r.next=a.next,a.next.prev=r;var c=a;if(null!=c.wrap){c.wrap.zpp_inner._inuse=!1;var d=c.wrap,_=d.zpp_inner;d.zpp_inner.outer=null,d.zpp_inner=null,d.zpp_pool=jn.poolVec2,jn.poolVec2=d,null!=_.outer&&(_.outer.zpp_inner=null,_.outer=null),_._isimmutable=null,_._validate=null,_._invalidate=null,_.next=el.zpp_pool,el.zpp_pool=_,c.wrap=null}if(c.prev=c.next=null,c.next=dr.zpp_pool,dr.zpp_pool=c,0!=(16&e.keyr)){if(t.pd=s.next,s.next.prev=l.prev,l.prev.next=s.next,null!=s.wrap){s.wrap.zpp_inner._inuse=!1;var y=s.wrap,m=y.zpp_inner;y.zpp_inner.outer=null,y.zpp_inner=null,y.zpp_pool=jn.poolVec2,jn.poolVec2=y,null!=m.outer&&(m.outer.zpp_inner=null,m.outer=null),m._isimmutable=null,m._validate=null,m._invalidate=null,m.next=el.zpp_pool,el.zpp_pool=m,s.wrap=null}s.prev=s.next=null,s.next=dr.zpp_pool,dr.zpp_pool=s}else s.prev=l.prev,l.prev.next=s;if(null!=l.wrap){l.wrap.zpp_inner._inuse=!1;var f=l.wrap,x=f.zpp_inner;f.zpp_inner.outer=null,f.zpp_inner=null,f.zpp_pool=jn.poolVec2,jn.poolVec2=f,null!=x.outer&&(x.outer.zpp_inner=null,x.outer=null),x._isimmutable=null,x._validate=null,x._invalidate=null,x.next=el.zpp_pool,el.zpp_pool=x,l.wrap=null}l.prev=l.next=null,l.next=dr.zpp_pool,dr.zpp_pool=l},yr.prototype.combUD=function(e,t){null!=e.p2&&e.key2;var i=null!=t.p2&&14==t.key2?t.p2:t.p1,n=e.pd,r=i,o=n.prev,a=r.next;if(r.next=n.next,n.next.prev=r,null!=n.wrap){n.wrap.zpp_inner._inuse=!1;var s=n.wrap,l=s.zpp_inner;s.zpp_inner.outer=null,s.zpp_inner=null,s.zpp_pool=jn.poolVec2,jn.poolVec2=s,null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l._isimmutable=null,l._validate=null,l._invalidate=null,l.next=el.zpp_pool,el.zpp_pool=l,n.wrap=null}if(n.prev=n.next=null,n.next=dr.zpp_pool,dr.zpp_pool=n,a.prev=o.prev,o.prev.next=a,o==e.p1&&(e.p1=a),null!=o.wrap){o.wrap.zpp_inner._inuse=!1;var p=o.wrap,h=p.zpp_inner;p.zpp_inner.outer=null,p.zpp_inner=null,p.zpp_pool=jn.poolVec2,jn.poolVec2=p,null!=h.outer&&(h.outer.zpp_inner=null,h.outer=null),h._isimmutable=null,h._validate=null,h._invalidate=null,h.next=el.zpp_pool,el.zpp_pool=h,o.wrap=null}o.prev=o.next=null,o.next=dr.zpp_pool,dr.zpp_pool=o},yr.prototype.combUD_virtual=function(e,t){null!=e.p2&&e.key2;var i=null!=t.p2&&14==t.key2?t.p2:t.p1,n=e.pd,r=i;n.forced=r.forced=n.prev.forced=r.next.forced=!0},yr.prototype.combLeft=function(e){var t=1&e|(192&e)>>5,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combRight=function(e){var t=(28&e)>>2,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combUp=function(e){var t=7&e,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.combDown=function(e){var t=(112&e)>>4,i=0;return 0!=(1&t)&&(i=1),0!=(2&t)&&++i,0!=(4&t)&&++i,2<=i},yr.prototype.comb=function(e){var t=0;return 0!=(1&e)&&(t=1),0!=(2&e)&&++t,0!=(4&e)&&++t,2<=t},yr.prototype.marchSquare=function(e,t,i,n,r,o,a,s,l,p,h,u,c,d){var _=0,y=t.list[l*t.width+s];y<0&&(_=8);var m=t.list[l*t.width+(s+1)];m<0&&(_|=4);var f=t.list[(l+1)*t.width+(s+1)];f<0&&(_|=2);var x,v=t.list[(l+1)*t.width+s];if(v<0&&(_|=1),0==_)return null;if(null==_r.zpp_pool?x=new _r:(x=_r.zpp_pool,_r.zpp_pool=x.next,x.next=null),10!=_&&5!=_){var z=yr.look_march[_];x.okey1=z;for(var g=0;g<8;){var b=g++;if(0!=(z&1<<b)){var w,S,C,M,P=null;if(0==b)null==dr.zpp_pool?w=new dr:(w=dr.zpp_pool,dr.zpp_pool=w.next,w.next=null),w.forced=!1,w.x=n,w.y=r,P=w,(p||h)&&(P.forced=!0);else if(2==b)null==dr.zpp_pool?S=new dr:(S=dr.zpp_pool,dr.zpp_pool=S.next,S.next=null),S.forced=!1,S.x=o,S.y=r,P=S,(u||h)&&(P.forced=!0);else if(4==b)null==dr.zpp_pool?C=new dr:(C=dr.zpp_pool,dr.zpp_pool=C.next,C.next=null),C.forced=!1,C.x=o,C.y=a,P=C,(u||c)&&(P.forced=!0);else if(6==b)null==dr.zpp_pool?M=new dr:(M=dr.zpp_pool,dr.zpp_pool=M.next,M.next=null),M.forced=!1,M.x=n,M.y=a,P=M,(p||c)&&(P.forced=!0);else if(1==b){if(null==(P=i.list[(l<<1)*i.width+s])){var k,T=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?k=new dr:(k=dr.zpp_pool,dr.zpp_pool=k.next,k.next=null),k.forced=!1,k.x=T,k.y=r,P=k,i.list[(l<<1)*i.width+s]=P}else{var O,A=P.x,E=P.y;null==dr.zpp_pool?O=new dr:(O=dr.zpp_pool,dr.zpp_pool=O.next,O.next=null),O.forced=!1,O.x=A,O.y=E,P=O}h&&(P.forced=!0),P.x!=n&&P.x!=o||(P.x==n&&0!=(1&z)||P.x==o&&0!=(4&z))&&(z^=2)}else if(5==b){if(null==(P=i.list[(2+(l<<1))*i.width+s])){var G,I=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?G=new dr:(G=dr.zpp_pool,dr.zpp_pool=G.next,G.next=null),G.forced=!1,G.x=I,G.y=a,P=G,i.list[(2+(l<<1))*i.width+s]=P}else{var B,L=P.x,D=P.y;null==dr.zpp_pool?B=new dr:(B=dr.zpp_pool,dr.zpp_pool=B.next,B.next=null),B.forced=!1,B.x=L,B.y=D,P=B}c&&(P.forced=!0),P.x!=n&&P.x!=o||(P.x==n&&0!=(64&z)||P.x==o&&0!=(16&z))&&(z^=32)}else if(3==b){if(null==(P=i.list[(1+(l<<1))*i.width+(s+1)])){var R,F=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?R=new dr:(R=dr.zpp_pool,dr.zpp_pool=R.next,R.next=null),R.forced=!1,R.x=o,R.y=F,P=R,i.list[(1+(l<<1))*i.width+(s+1)]=P}else{var j,N=P.x,U=P.y;null==dr.zpp_pool?j=new dr:(j=dr.zpp_pool,dr.zpp_pool=j.next,j.next=null),j.forced=!1,j.x=N,j.y=U,P=j}u&&(P.forced=!0),P.y!=r&&P.y!=a||(P.y==r&&0!=(4&z)||P.y==a&&0!=(16&z))&&(z^=8)}else{if(null==(P=i.list[(1+(l<<1))*i.width+s])){var V,H=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?V=new dr:(V=dr.zpp_pool,dr.zpp_pool=V.next,V.next=null),V.forced=!1,V.x=n,V.y=H,P=V,i.list[(1+(l<<1))*i.width+s]=P}else{var W,X=P.x,q=P.y;null==dr.zpp_pool?W=new dr:(W=dr.zpp_pool,dr.zpp_pool=W.next,W.next=null),W.forced=!1,W.x=X,W.y=q,P=W}p&&(P.forced=!0),P.y!=r&&P.y!=a||(P.y==r&&0!=(1&z)||P.y==a&&0!=(64&z))&&(z^=128)}var Y=P;null==x.p1?x.p1=Y.prev=Y.next=Y:(Y.prev=x.p1,Y.next=x.p1.next,x.p1.next.prev=Y,x.p1.next=Y),x.p1=Y}}x.p1=x.p1.next,1!=(x.key1=z)&&4!=z&&16!=z&&64!=z&&3!=z&&12!=z&&48!=z&&192!=z&&129!=z&&6!=z&&24!=z&&96!=z&&5!=z&&20!=z&&80!=z&&65!=z&&17!=z&&68!=z||(z=0,x.key1=0,x.p1=null),0==z?x=null:(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1)}else{var K=e(.5*(n+o),.5*(r+a))<0;if(10==_)if(K){var Z=187;x.okey1=187;for(var J=0;J<8;){var Q=J++;if(0!=(Z&1<<Q)){var $,ee,te,ie,ne=null;if(0==Q)null==dr.zpp_pool?$=new dr:($=dr.zpp_pool,dr.zpp_pool=$.next,$.next=null),$.forced=!1,$.x=n,$.y=r,ne=$,(p||h)&&(ne.forced=!0);else if(2==Q)null==dr.zpp_pool?ee=new dr:(ee=dr.zpp_pool,dr.zpp_pool=ee.next,ee.next=null),ee.forced=!1,ee.x=o,ee.y=r,ne=ee,(u||h)&&(ne.forced=!0);else if(4==Q)null==dr.zpp_pool?te=new dr:(te=dr.zpp_pool,dr.zpp_pool=te.next,te.next=null),te.forced=!1,te.x=o,te.y=a,ne=te,(u||c)&&(ne.forced=!0);else if(6==Q)null==dr.zpp_pool?ie=new dr:(ie=dr.zpp_pool,dr.zpp_pool=ie.next,ie.next=null),ie.forced=!1,ie.x=n,ie.y=a,ne=ie,(p||c)&&(ne.forced=!0);else if(1==Q){if(null==(ne=i.list[(l<<1)*i.width+s])){var re,oe=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?re=new dr:(re=dr.zpp_pool,dr.zpp_pool=re.next,re.next=null),re.forced=!1,re.x=oe,re.y=r,ne=re,i.list[(l<<1)*i.width+s]=ne}else{var ae,se=ne.x,le=ne.y;null==dr.zpp_pool?ae=new dr:(ae=dr.zpp_pool,dr.zpp_pool=ae.next,ae.next=null),ae.forced=!1,ae.x=se,ae.y=le,ne=ae}h&&(ne.forced=!0),ne.x!=n&&ne.x!=o||(ne.x==n&&0!=(1&Z)||ne.x==o&&0!=(4&Z))&&(Z^=2)}else if(5==Q){if(null==(ne=i.list[(2+(l<<1))*i.width+s])){var pe,he=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?pe=new dr:(pe=dr.zpp_pool,dr.zpp_pool=pe.next,pe.next=null),pe.forced=!1,pe.x=he,pe.y=a,ne=pe,i.list[(2+(l<<1))*i.width+s]=ne}else{var ue,ce=ne.x,de=ne.y;null==dr.zpp_pool?ue=new dr:(ue=dr.zpp_pool,dr.zpp_pool=ue.next,ue.next=null),ue.forced=!1,ue.x=ce,ue.y=de,ne=ue}c&&(ne.forced=!0),ne.x!=n&&ne.x!=o||(ne.x==n&&0!=(64&Z)||ne.x==o&&0!=(16&Z))&&(Z^=32)}else if(3==Q){if(null==(ne=i.list[(1+(l<<1))*i.width+(s+1)])){var _e,ye=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?_e=new dr:(_e=dr.zpp_pool,dr.zpp_pool=_e.next,_e.next=null),_e.forced=!1,_e.x=o,_e.y=ye,ne=_e,i.list[(1+(l<<1))*i.width+(s+1)]=ne}else{var me,fe=ne.x,xe=ne.y;null==dr.zpp_pool?me=new dr:(me=dr.zpp_pool,dr.zpp_pool=me.next,me.next=null),me.forced=!1,me.x=fe,me.y=xe,ne=me}u&&(ne.forced=!0),ne.y!=r&&ne.y!=a||(ne.y==r&&0!=(4&Z)||ne.y==a&&0!=(16&Z))&&(Z^=8)}else{if(null==(ne=i.list[(1+(l<<1))*i.width+s])){var ve,ze=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?ve=new dr:(ve=dr.zpp_pool,dr.zpp_pool=ve.next,ve.next=null),ve.forced=!1,ve.x=n,ve.y=ze,ne=ve,i.list[(1+(l<<1))*i.width+s]=ne}else{var ge,be=ne.x,we=ne.y;null==dr.zpp_pool?ge=new dr:(ge=dr.zpp_pool,dr.zpp_pool=ge.next,ge.next=null),ge.forced=!1,ge.x=be,ge.y=we,ne=ge}p&&(ne.forced=!0),ne.y!=r&&ne.y!=a||(ne.y==r&&0!=(1&Z)||ne.y==a&&0!=(64&Z))&&(Z^=128)}var Se=ne;null==x.p1?x.p1=Se.prev=Se.next=Se:(Se.prev=x.p1,Se.next=x.p1.next,x.p1.next.prev=Se,x.p1.next=Se),x.p1=Se}}x.p1=x.p1.next,1!=(x.key1=Z)&&4!=Z&&16!=Z&&64!=Z&&3!=Z&&12!=Z&&48!=Z&&192!=Z&&129!=Z&&6!=Z&&24!=Z&&96!=Z&&5!=Z&&20!=Z&&80!=Z&&65!=Z&&17!=Z&&68!=Z||(Z=0,x.key1=0,x.p1=null),0==Z?x=null:(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1)}else{var Ce=131;x.okey1=131;for(var Me=0;Me<8;){var Pe=Me++;if(0!=(Ce&1<<Pe)){var ke,Te,Oe,Ae,Ee=null;if(0==Pe)null==dr.zpp_pool?ke=new dr:(ke=dr.zpp_pool,dr.zpp_pool=ke.next,ke.next=null),ke.forced=!1,ke.x=n,ke.y=r,Ee=ke,(p||h)&&(Ee.forced=!0);else if(2==Pe)null==dr.zpp_pool?Te=new dr:(Te=dr.zpp_pool,dr.zpp_pool=Te.next,Te.next=null),Te.forced=!1,Te.x=o,Te.y=r,Ee=Te,(u||h)&&(Ee.forced=!0);else if(4==Pe)null==dr.zpp_pool?Oe=new dr:(Oe=dr.zpp_pool,dr.zpp_pool=Oe.next,Oe.next=null),Oe.forced=!1,Oe.x=o,Oe.y=a,Ee=Oe,(u||c)&&(Ee.forced=!0);else if(6==Pe)null==dr.zpp_pool?Ae=new dr:(Ae=dr.zpp_pool,dr.zpp_pool=Ae.next,Ae.next=null),Ae.forced=!1,Ae.x=n,Ae.y=a,Ee=Ae,(p||c)&&(Ee.forced=!0);else if(1==Pe){if(null==(Ee=i.list[(l<<1)*i.width+s])){var Ge,Ie=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?Ge=new dr:(Ge=dr.zpp_pool,dr.zpp_pool=Ge.next,Ge.next=null),Ge.forced=!1,Ge.x=Ie,Ge.y=r,Ee=Ge,i.list[(l<<1)*i.width+s]=Ee}else{var Be,Le=Ee.x,De=Ee.y;null==dr.zpp_pool?Be=new dr:(Be=dr.zpp_pool,dr.zpp_pool=Be.next,Be.next=null),Be.forced=!1,Be.x=Le,Be.y=De,Ee=Be}h&&(Ee.forced=!0),Ee.x!=n&&Ee.x!=o||(Ee.x==n&&0!=(1&Ce)||Ee.x==o&&0!=(4&Ce))&&(Ce^=2)}else if(5==Pe){if(null==(Ee=i.list[(2+(l<<1))*i.width+s])){var Re,Fe=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?Re=new dr:(Re=dr.zpp_pool,dr.zpp_pool=Re.next,Re.next=null),Re.forced=!1,Re.x=Fe,Re.y=a,Ee=Re,i.list[(2+(l<<1))*i.width+s]=Ee}else{var je,Ne=Ee.x,Ue=Ee.y;null==dr.zpp_pool?je=new dr:(je=dr.zpp_pool,dr.zpp_pool=je.next,je.next=null),je.forced=!1,je.x=Ne,je.y=Ue,Ee=je}c&&(Ee.forced=!0),Ee.x!=n&&Ee.x!=o||(Ee.x==n&&0!=(64&Ce)||Ee.x==o&&0!=(16&Ce))&&(Ce^=32)}else if(3==Pe){if(null==(Ee=i.list[(1+(l<<1))*i.width+(s+1)])){var Ve,He=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?Ve=new dr:(Ve=dr.zpp_pool,dr.zpp_pool=Ve.next,Ve.next=null),Ve.forced=!1,Ve.x=o,Ve.y=He,Ee=Ve,i.list[(1+(l<<1))*i.width+(s+1)]=Ee}else{var We,Xe=Ee.x,qe=Ee.y;null==dr.zpp_pool?We=new dr:(We=dr.zpp_pool,dr.zpp_pool=We.next,We.next=null),We.forced=!1,We.x=Xe,We.y=qe,Ee=We}u&&(Ee.forced=!0),Ee.y!=r&&Ee.y!=a||(Ee.y==r&&0!=(4&Ce)||Ee.y==a&&0!=(16&Ce))&&(Ce^=8)}else{if(null==(Ee=i.list[(1+(l<<1))*i.width+s])){var Ye,Ke=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?Ye=new dr:(Ye=dr.zpp_pool,dr.zpp_pool=Ye.next,Ye.next=null),Ye.forced=!1,Ye.x=n,Ye.y=Ke,Ee=Ye,i.list[(1+(l<<1))*i.width+s]=Ee}else{var Ze,Je=Ee.x,Qe=Ee.y;null==dr.zpp_pool?Ze=new dr:(Ze=dr.zpp_pool,dr.zpp_pool=Ze.next,Ze.next=null),Ze.forced=!1,Ze.x=Je,Ze.y=Qe,Ee=Ze}p&&(Ee.forced=!0),Ee.y!=r&&Ee.y!=a||(Ee.y==r&&0!=(1&Ce)||Ee.y==a&&0!=(64&Ce))&&(Ce^=128)}var $e=Ee;null==x.p1?x.p1=$e.prev=$e.next=$e:($e.prev=x.p1,$e.next=x.p1.next,x.p1.next.prev=$e,x.p1.next=$e),x.p1=$e}}if(x.p1=x.p1.next,1!=(x.key1=Ce)&&4!=Ce&&16!=Ce&&64!=Ce&&3!=Ce&&12!=Ce&&48!=Ce&&192!=Ce&&129!=Ce&&6!=Ce&&24!=Ce&&96!=Ce&&5!=Ce&&20!=Ce&&80!=Ce&&65!=Ce&&17!=Ce&&68!=Ce||(Ce=0,x.key1=0,x.p1=null),0!=Ce){var et=56;x.okey2=56;for(var tt=0;tt<8;){var it=tt++;if(0!=(et&1<<it)){var nt,rt,ot,at,st=null;if(0==it)null==dr.zpp_pool?nt=new dr:(nt=dr.zpp_pool,dr.zpp_pool=nt.next,nt.next=null),nt.forced=!1,nt.x=n,nt.y=r,st=nt,(p||h)&&(st.forced=!0);else if(2==it)null==dr.zpp_pool?rt=new dr:(rt=dr.zpp_pool,dr.zpp_pool=rt.next,rt.next=null),rt.forced=!1,rt.x=o,rt.y=r,st=rt,(u||h)&&(st.forced=!0);else if(4==it)null==dr.zpp_pool?ot=new dr:(ot=dr.zpp_pool,dr.zpp_pool=ot.next,ot.next=null),ot.forced=!1,ot.x=o,ot.y=a,st=ot,(u||c)&&(st.forced=!0);else if(6==it)null==dr.zpp_pool?at=new dr:(at=dr.zpp_pool,dr.zpp_pool=at.next,at.next=null),at.forced=!1,at.x=n,at.y=a,st=at,(p||c)&&(st.forced=!0);else if(1==it){if(null==(st=i.list[(l<<1)*i.width+s])){var lt,pt=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?lt=new dr:(lt=dr.zpp_pool,dr.zpp_pool=lt.next,lt.next=null),lt.forced=!1,lt.x=pt,lt.y=r,st=lt,i.list[(l<<1)*i.width+s]=st}else{var ht,ut=st.x,ct=st.y;null==dr.zpp_pool?ht=new dr:(ht=dr.zpp_pool,dr.zpp_pool=ht.next,ht.next=null),ht.forced=!1,ht.x=ut,ht.y=ct,st=ht}h&&(st.forced=!0),st.x!=n&&st.x!=o||(st.x==n&&0!=(1&et)||st.x==o&&0!=(4&et))&&(et^=2)}else if(5==it){if(null==(st=i.list[(2+(l<<1))*i.width+s])){var dt,_t=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?dt=new dr:(dt=dr.zpp_pool,dr.zpp_pool=dt.next,dt.next=null),dt.forced=!1,dt.x=_t,dt.y=a,st=dt,i.list[(2+(l<<1))*i.width+s]=st}else{var yt,mt=st.x,ft=st.y;null==dr.zpp_pool?yt=new dr:(yt=dr.zpp_pool,dr.zpp_pool=yt.next,yt.next=null),yt.forced=!1,yt.x=mt,yt.y=ft,st=yt}c&&(st.forced=!0),st.x!=n&&st.x!=o||(st.x==n&&0!=(64&et)||st.x==o&&0!=(16&et))&&(et^=32)}else if(3==it){if(null==(st=i.list[(1+(l<<1))*i.width+(s+1)])){var xt,vt=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?xt=new dr:(xt=dr.zpp_pool,dr.zpp_pool=xt.next,xt.next=null),xt.forced=!1,xt.x=o,xt.y=vt,st=xt,i.list[(1+(l<<1))*i.width+(s+1)]=st}else{var zt,gt=st.x,bt=st.y;null==dr.zpp_pool?zt=new dr:(zt=dr.zpp_pool,dr.zpp_pool=zt.next,zt.next=null),zt.forced=!1,zt.x=gt,zt.y=bt,st=zt}u&&(st.forced=!0),st.y!=r&&st.y!=a||(st.y==r&&0!=(4&et)||st.y==a&&0!=(16&et))&&(et^=8)}else{if(null==(st=i.list[(1+(l<<1))*i.width+s])){var wt,St=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?wt=new dr:(wt=dr.zpp_pool,dr.zpp_pool=wt.next,wt.next=null),wt.forced=!1,wt.x=n,wt.y=St,st=wt,i.list[(1+(l<<1))*i.width+s]=st}else{var Ct,Mt=st.x,Pt=st.y;null==dr.zpp_pool?Ct=new dr:(Ct=dr.zpp_pool,dr.zpp_pool=Ct.next,Ct.next=null),Ct.forced=!1,Ct.x=Mt,Ct.y=Pt,st=Ct}p&&(st.forced=!0),st.y!=r&&st.y!=a||(st.y==r&&0!=(1&et)||st.y==a&&0!=(64&et))&&(et^=128)}var kt=st;null==x.p2?x.p2=kt.prev=kt.next=kt:(kt.prev=x.p2,kt.next=x.p2.next,x.p2.next.prev=kt,x.p2.next=kt),x.p2=kt}}x.p2=x.p2.next,1!=(x.key2=et)&&4!=et&&16!=et&&64!=et&&3!=et&&12!=et&&48!=et&&192!=et&&129!=et&&6!=et&&24!=et&&96!=et&&5!=et&&20!=et&&80!=et&&65!=et&&17!=et&&68!=et||(et=0,x.key2=0,x.p2=null),0==et?(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1):(x.pr=x.p2,x.okeyr=x.okey2,x.keyr=x.key2)}else{var Tt=56;x.okey1=56;for(var Ot=0;Ot<8;){var At=Ot++;if(0!=(Tt&1<<At)){var Et,Gt,It,Bt,Lt=null;if(0==At)null==dr.zpp_pool?Et=new dr:(Et=dr.zpp_pool,dr.zpp_pool=Et.next,Et.next=null),Et.forced=!1,Et.x=n,Et.y=r,Lt=Et,(p||h)&&(Lt.forced=!0);else if(2==At)null==dr.zpp_pool?Gt=new dr:(Gt=dr.zpp_pool,dr.zpp_pool=Gt.next,Gt.next=null),Gt.forced=!1,Gt.x=o,Gt.y=r,Lt=Gt,(u||h)&&(Lt.forced=!0);else if(4==At)null==dr.zpp_pool?It=new dr:(It=dr.zpp_pool,dr.zpp_pool=It.next,It.next=null),It.forced=!1,It.x=o,It.y=a,Lt=It,(u||c)&&(Lt.forced=!0);else if(6==At)null==dr.zpp_pool?Bt=new dr:(Bt=dr.zpp_pool,dr.zpp_pool=Bt.next,Bt.next=null),Bt.forced=!1,Bt.x=n,Bt.y=a,Lt=Bt,(p||c)&&(Lt.forced=!0);else if(1==At){if(null==(Lt=i.list[(l<<1)*i.width+s])){var Dt,Rt=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?Dt=new dr:(Dt=dr.zpp_pool,dr.zpp_pool=Dt.next,Dt.next=null),Dt.forced=!1,Dt.x=Rt,Dt.y=r,Lt=Dt,i.list[(l<<1)*i.width+s]=Lt}else{var Ft,jt=Lt.x,Nt=Lt.y;null==dr.zpp_pool?Ft=new dr:(Ft=dr.zpp_pool,dr.zpp_pool=Ft.next,Ft.next=null),Ft.forced=!1,Ft.x=jt,Ft.y=Nt,Lt=Ft}h&&(Lt.forced=!0),Lt.x!=n&&Lt.x!=o||(Lt.x==n&&0!=(1&Tt)||Lt.x==o&&0!=(4&Tt))&&(Tt^=2)}else if(5==At){if(null==(Lt=i.list[(2+(l<<1))*i.width+s])){var Ut,Vt=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?Ut=new dr:(Ut=dr.zpp_pool,dr.zpp_pool=Ut.next,Ut.next=null),Ut.forced=!1,Ut.x=Vt,Ut.y=a,Lt=Ut,i.list[(2+(l<<1))*i.width+s]=Lt}else{var Ht,Wt=Lt.x,Xt=Lt.y;null==dr.zpp_pool?Ht=new dr:(Ht=dr.zpp_pool,dr.zpp_pool=Ht.next,Ht.next=null),Ht.forced=!1,Ht.x=Wt,Ht.y=Xt,Lt=Ht}c&&(Lt.forced=!0),Lt.x!=n&&Lt.x!=o||(Lt.x==n&&0!=(64&Tt)||Lt.x==o&&0!=(16&Tt))&&(Tt^=32)}else if(3==At){if(null==(Lt=i.list[(1+(l<<1))*i.width+(s+1)])){var qt,Yt=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?qt=new dr:(qt=dr.zpp_pool,dr.zpp_pool=qt.next,qt.next=null),qt.forced=!1,qt.x=o,qt.y=Yt,Lt=qt,i.list[(1+(l<<1))*i.width+(s+1)]=Lt}else{var Kt,Zt=Lt.x,Jt=Lt.y;null==dr.zpp_pool?Kt=new dr:(Kt=dr.zpp_pool,dr.zpp_pool=Kt.next,Kt.next=null),Kt.forced=!1,Kt.x=Zt,Kt.y=Jt,Lt=Kt}u&&(Lt.forced=!0),Lt.y!=r&&Lt.y!=a||(Lt.y==r&&0!=(4&Tt)||Lt.y==a&&0!=(16&Tt))&&(Tt^=8)}else{if(null==(Lt=i.list[(1+(l<<1))*i.width+s])){var Qt,$t=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?Qt=new dr:(Qt=dr.zpp_pool,dr.zpp_pool=Qt.next,Qt.next=null),Qt.forced=!1,Qt.x=n,Qt.y=$t,Lt=Qt,i.list[(1+(l<<1))*i.width+s]=Lt}else{var ei,ti=Lt.x,ii=Lt.y;null==dr.zpp_pool?ei=new dr:(ei=dr.zpp_pool,dr.zpp_pool=ei.next,ei.next=null),ei.forced=!1,ei.x=ti,ei.y=ii,Lt=ei}p&&(Lt.forced=!0),Lt.y!=r&&Lt.y!=a||(Lt.y==r&&0!=(1&Tt)||Lt.y==a&&0!=(64&Tt))&&(Tt^=128)}var ni=Lt;null==x.p1?x.p1=ni.prev=ni.next=ni:(ni.prev=x.p1,ni.next=x.p1.next,x.p1.next.prev=ni,x.p1.next=ni),x.p1=ni}}x.p1=x.p1.next,1!=(x.key1=Tt)&&4!=Tt&&16!=Tt&&64!=Tt&&3!=Tt&&12!=Tt&&48!=Tt&&192!=Tt&&129!=Tt&&6!=Tt&&24!=Tt&&96!=Tt&&5!=Tt&&20!=Tt&&80!=Tt&&65!=Tt&&17!=Tt&&68!=Tt||(Tt=0,x.key1=0,x.p1=null),0==Tt?x=null:(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1)}}else if(K){var ri=238;x.okey1=238;for(var oi=0;oi<8;){var ai=oi++;if(0!=(ri&1<<ai)){var si,li,pi,hi,ui=null;if(0==ai)null==dr.zpp_pool?si=new dr:(si=dr.zpp_pool,dr.zpp_pool=si.next,si.next=null),si.forced=!1,si.x=n,si.y=r,ui=si,(p||h)&&(ui.forced=!0);else if(2==ai)null==dr.zpp_pool?li=new dr:(li=dr.zpp_pool,dr.zpp_pool=li.next,li.next=null),li.forced=!1,li.x=o,li.y=r,ui=li,(u||h)&&(ui.forced=!0);else if(4==ai)null==dr.zpp_pool?pi=new dr:(pi=dr.zpp_pool,dr.zpp_pool=pi.next,pi.next=null),pi.forced=!1,pi.x=o,pi.y=a,ui=pi,(u||c)&&(ui.forced=!0);else if(6==ai)null==dr.zpp_pool?hi=new dr:(hi=dr.zpp_pool,dr.zpp_pool=hi.next,hi.next=null),hi.forced=!1,hi.x=n,hi.y=a,ui=hi,(p||c)&&(ui.forced=!0);else if(1==ai){if(null==(ui=i.list[(l<<1)*i.width+s])){var ci,di=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?ci=new dr:(ci=dr.zpp_pool,dr.zpp_pool=ci.next,ci.next=null),ci.forced=!1,ci.x=di,ci.y=r,ui=ci,i.list[(l<<1)*i.width+s]=ui}else{var _i,yi=ui.x,mi=ui.y;null==dr.zpp_pool?_i=new dr:(_i=dr.zpp_pool,dr.zpp_pool=_i.next,_i.next=null),_i.forced=!1,_i.x=yi,_i.y=mi,ui=_i}h&&(ui.forced=!0),ui.x!=n&&ui.x!=o||(ui.x==n&&0!=(1&ri)||ui.x==o&&0!=(4&ri))&&(ri^=2)}else if(5==ai){if(null==(ui=i.list[(2+(l<<1))*i.width+s])){var fi,xi=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?fi=new dr:(fi=dr.zpp_pool,dr.zpp_pool=fi.next,fi.next=null),fi.forced=!1,fi.x=xi,fi.y=a,ui=fi,i.list[(2+(l<<1))*i.width+s]=ui}else{var vi,zi=ui.x,gi=ui.y;null==dr.zpp_pool?vi=new dr:(vi=dr.zpp_pool,dr.zpp_pool=vi.next,vi.next=null),vi.forced=!1,vi.x=zi,vi.y=gi,ui=vi}c&&(ui.forced=!0),ui.x!=n&&ui.x!=o||(ui.x==n&&0!=(64&ri)||ui.x==o&&0!=(16&ri))&&(ri^=32)}else if(3==ai){if(null==(ui=i.list[(1+(l<<1))*i.width+(s+1)])){var bi,wi=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?bi=new dr:(bi=dr.zpp_pool,dr.zpp_pool=bi.next,bi.next=null),bi.forced=!1,bi.x=o,bi.y=wi,ui=bi,i.list[(1+(l<<1))*i.width+(s+1)]=ui}else{var Si,Ci=ui.x,Mi=ui.y;null==dr.zpp_pool?Si=new dr:(Si=dr.zpp_pool,dr.zpp_pool=Si.next,Si.next=null),Si.forced=!1,Si.x=Ci,Si.y=Mi,ui=Si}u&&(ui.forced=!0),ui.y!=r&&ui.y!=a||(ui.y==r&&0!=(4&ri)||ui.y==a&&0!=(16&ri))&&(ri^=8)}else{if(null==(ui=i.list[(1+(l<<1))*i.width+s])){var Pi,ki=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?Pi=new dr:(Pi=dr.zpp_pool,dr.zpp_pool=Pi.next,Pi.next=null),Pi.forced=!1,Pi.x=n,Pi.y=ki,ui=Pi,i.list[(1+(l<<1))*i.width+s]=ui}else{var Ti,Oi=ui.x,Ai=ui.y;null==dr.zpp_pool?Ti=new dr:(Ti=dr.zpp_pool,dr.zpp_pool=Ti.next,Ti.next=null),Ti.forced=!1,Ti.x=Oi,Ti.y=Ai,ui=Ti}p&&(ui.forced=!0),ui.y!=r&&ui.y!=a||(ui.y==r&&0!=(1&ri)||ui.y==a&&0!=(64&ri))&&(ri^=128)}var Ei=ui;null==x.p1?x.p1=Ei.prev=Ei.next=Ei:(Ei.prev=x.p1,Ei.next=x.p1.next,x.p1.next.prev=Ei,x.p1.next=Ei),x.p1=Ei}}x.p1=x.p1.next,1!=(x.key1=ri)&&4!=ri&&16!=ri&&64!=ri&&3!=ri&&12!=ri&&48!=ri&&192!=ri&&129!=ri&&6!=ri&&24!=ri&&96!=ri&&5!=ri&&20!=ri&&80!=ri&&65!=ri&&17!=ri&&68!=ri||(ri=0,x.key1=0,x.p1=null),0==ri?x=null:(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1)}else{var Gi=224;x.okey1=224;for(var Ii=0;Ii<8;){var Bi=Ii++;if(0!=(Gi&1<<Bi)){var Li,Di,Ri,Fi,ji=null;if(0==Bi)null==dr.zpp_pool?Li=new dr:(Li=dr.zpp_pool,dr.zpp_pool=Li.next,Li.next=null),Li.forced=!1,Li.x=n,Li.y=r,ji=Li,(p||h)&&(ji.forced=!0);else if(2==Bi)null==dr.zpp_pool?Di=new dr:(Di=dr.zpp_pool,dr.zpp_pool=Di.next,Di.next=null),Di.forced=!1,Di.x=o,Di.y=r,ji=Di,(u||h)&&(ji.forced=!0);else if(4==Bi)null==dr.zpp_pool?Ri=new dr:(Ri=dr.zpp_pool,dr.zpp_pool=Ri.next,Ri.next=null),Ri.forced=!1,Ri.x=o,Ri.y=a,ji=Ri,(u||c)&&(ji.forced=!0);else if(6==Bi)null==dr.zpp_pool?Fi=new dr:(Fi=dr.zpp_pool,dr.zpp_pool=Fi.next,Fi.next=null),Fi.forced=!1,Fi.x=n,Fi.y=a,ji=Fi,(p||c)&&(ji.forced=!0);else if(1==Bi){if(null==(ji=i.list[(l<<1)*i.width+s])){var Ni,Ui=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?Ni=new dr:(Ni=dr.zpp_pool,dr.zpp_pool=Ni.next,Ni.next=null),Ni.forced=!1,Ni.x=Ui,Ni.y=r,ji=Ni,i.list[(l<<1)*i.width+s]=ji}else{var Vi,Hi=ji.x,Wi=ji.y;null==dr.zpp_pool?Vi=new dr:(Vi=dr.zpp_pool,dr.zpp_pool=Vi.next,Vi.next=null),Vi.forced=!1,Vi.x=Hi,Vi.y=Wi,ji=Vi}h&&(ji.forced=!0),ji.x!=n&&ji.x!=o||(ji.x==n&&0!=(1&Gi)||ji.x==o&&0!=(4&Gi))&&(Gi^=2)}else if(5==Bi){if(null==(ji=i.list[(2+(l<<1))*i.width+s])){var Xi,qi=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?Xi=new dr:(Xi=dr.zpp_pool,dr.zpp_pool=Xi.next,Xi.next=null),Xi.forced=!1,Xi.x=qi,Xi.y=a,ji=Xi,i.list[(2+(l<<1))*i.width+s]=ji}else{var Yi,Ki=ji.x,Zi=ji.y;null==dr.zpp_pool?Yi=new dr:(Yi=dr.zpp_pool,dr.zpp_pool=Yi.next,Yi.next=null),Yi.forced=!1,Yi.x=Ki,Yi.y=Zi,ji=Yi}c&&(ji.forced=!0),ji.x!=n&&ji.x!=o||(ji.x==n&&0!=(64&Gi)||ji.x==o&&0!=(16&Gi))&&(Gi^=32)}else if(3==Bi){if(null==(ji=i.list[(1+(l<<1))*i.width+(s+1)])){var Ji,Qi=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?Ji=new dr:(Ji=dr.zpp_pool,dr.zpp_pool=Ji.next,Ji.next=null),Ji.forced=!1,Ji.x=o,Ji.y=Qi,ji=Ji,i.list[(1+(l<<1))*i.width+(s+1)]=ji}else{var $i,en=ji.x,tn=ji.y;null==dr.zpp_pool?$i=new dr:($i=dr.zpp_pool,dr.zpp_pool=$i.next,$i.next=null),$i.forced=!1,$i.x=en,$i.y=tn,ji=$i}u&&(ji.forced=!0),ji.y!=r&&ji.y!=a||(ji.y==r&&0!=(4&Gi)||ji.y==a&&0!=(16&Gi))&&(Gi^=8)}else{if(null==(ji=i.list[(1+(l<<1))*i.width+s])){var nn,rn=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?nn=new dr:(nn=dr.zpp_pool,dr.zpp_pool=nn.next,nn.next=null),nn.forced=!1,nn.x=n,nn.y=rn,ji=nn,i.list[(1+(l<<1))*i.width+s]=ji}else{var on,an=ji.x,sn=ji.y;null==dr.zpp_pool?on=new dr:(on=dr.zpp_pool,dr.zpp_pool=on.next,on.next=null),on.forced=!1,on.x=an,on.y=sn,ji=on}p&&(ji.forced=!0),ji.y!=r&&ji.y!=a||(ji.y==r&&0!=(1&Gi)||ji.y==a&&0!=(64&Gi))&&(Gi^=128)}var ln=ji;null==x.p1?x.p1=ln.prev=ln.next=ln:(ln.prev=x.p1,ln.next=x.p1.next,x.p1.next.prev=ln,x.p1.next=ln),x.p1=ln}}if(x.p1=x.p1.next,1!=(x.key1=Gi)&&4!=Gi&&16!=Gi&&64!=Gi&&3!=Gi&&12!=Gi&&48!=Gi&&192!=Gi&&129!=Gi&&6!=Gi&&24!=Gi&&96!=Gi&&5!=Gi&&20!=Gi&&80!=Gi&&65!=Gi&&17!=Gi&&68!=Gi||(Gi=0,x.key1=0,x.p1=null),0!=Gi){var pn=14;x.okey2=14;for(var hn=0;hn<8;){var un=hn++;if(0!=(pn&1<<un)){var cn,dn,_n,yn,mn=null;if(0==un)null==dr.zpp_pool?cn=new dr:(cn=dr.zpp_pool,dr.zpp_pool=cn.next,cn.next=null),cn.forced=!1,cn.x=n,cn.y=r,mn=cn,(p||h)&&(mn.forced=!0);else if(2==un)null==dr.zpp_pool?dn=new dr:(dn=dr.zpp_pool,dr.zpp_pool=dn.next,dn.next=null),dn.forced=!1,dn.x=o,dn.y=r,mn=dn,(u||h)&&(mn.forced=!0);else if(4==un)null==dr.zpp_pool?_n=new dr:(_n=dr.zpp_pool,dr.zpp_pool=_n.next,_n.next=null),_n.forced=!1,_n.x=o,_n.y=a,mn=_n,(u||c)&&(mn.forced=!0);else if(6==un)null==dr.zpp_pool?yn=new dr:(yn=dr.zpp_pool,dr.zpp_pool=yn.next,yn.next=null),yn.forced=!1,yn.x=n,yn.y=a,mn=yn,(p||c)&&(mn.forced=!0);else if(1==un){if(null==(mn=i.list[(l<<1)*i.width+s])){var fn,xn=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?fn=new dr:(fn=dr.zpp_pool,dr.zpp_pool=fn.next,fn.next=null),fn.forced=!1,fn.x=xn,fn.y=r,mn=fn,i.list[(l<<1)*i.width+s]=mn}else{var vn,zn=mn.x,gn=mn.y;null==dr.zpp_pool?vn=new dr:(vn=dr.zpp_pool,dr.zpp_pool=vn.next,vn.next=null),vn.forced=!1,vn.x=zn,vn.y=gn,mn=vn}h&&(mn.forced=!0),mn.x!=n&&mn.x!=o||(mn.x==n&&0!=(1&pn)||mn.x==o&&0!=(4&pn))&&(pn^=2)}else if(5==un){if(null==(mn=i.list[(2+(l<<1))*i.width+s])){var bn,wn=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?bn=new dr:(bn=dr.zpp_pool,dr.zpp_pool=bn.next,bn.next=null),bn.forced=!1,bn.x=wn,bn.y=a,mn=bn,i.list[(2+(l<<1))*i.width+s]=mn}else{var Sn,Cn=mn.x,Mn=mn.y;null==dr.zpp_pool?Sn=new dr:(Sn=dr.zpp_pool,dr.zpp_pool=Sn.next,Sn.next=null),Sn.forced=!1,Sn.x=Cn,Sn.y=Mn,mn=Sn}c&&(mn.forced=!0),mn.x!=n&&mn.x!=o||(mn.x==n&&0!=(64&pn)||mn.x==o&&0!=(16&pn))&&(pn^=32)}else if(3==un){if(null==(mn=i.list[(1+(l<<1))*i.width+(s+1)])){var Pn,kn=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?Pn=new dr:(Pn=dr.zpp_pool,dr.zpp_pool=Pn.next,Pn.next=null),Pn.forced=!1,Pn.x=o,Pn.y=kn,mn=Pn,i.list[(1+(l<<1))*i.width+(s+1)]=mn}else{var Tn,On=mn.x,An=mn.y;null==dr.zpp_pool?Tn=new dr:(Tn=dr.zpp_pool,dr.zpp_pool=Tn.next,Tn.next=null),Tn.forced=!1,Tn.x=On,Tn.y=An,mn=Tn}u&&(mn.forced=!0),mn.y!=r&&mn.y!=a||(mn.y==r&&0!=(4&pn)||mn.y==a&&0!=(16&pn))&&(pn^=8)}else{if(null==(mn=i.list[(1+(l<<1))*i.width+s])){var En,Gn=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?En=new dr:(En=dr.zpp_pool,dr.zpp_pool=En.next,En.next=null),En.forced=!1,En.x=n,En.y=Gn,mn=En,i.list[(1+(l<<1))*i.width+s]=mn}else{var In,Bn=mn.x,Ln=mn.y;null==dr.zpp_pool?In=new dr:(In=dr.zpp_pool,dr.zpp_pool=In.next,In.next=null),In.forced=!1,In.x=Bn,In.y=Ln,mn=In}p&&(mn.forced=!0),mn.y!=r&&mn.y!=a||(mn.y==r&&0!=(1&pn)||mn.y==a&&0!=(64&pn))&&(pn^=128)}var Dn=mn;null==x.p2?x.p2=Dn.prev=Dn.next=Dn:(Dn.prev=x.p2,Dn.next=x.p2.next,x.p2.next.prev=Dn,x.p2.next=Dn),x.p2=Dn}}x.p2=x.p2.next,1!=(x.key2=pn)&&4!=pn&&16!=pn&&64!=pn&&3!=pn&&12!=pn&&48!=pn&&192!=pn&&129!=pn&&6!=pn&&24!=pn&&96!=pn&&5!=pn&&20!=pn&&80!=pn&&65!=pn&&17!=pn&&68!=pn||(pn=0,x.key2=0,x.p2=null),0==pn?(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1):(x.pr=x.p2,x.okeyr=x.okey2,x.keyr=x.key2)}else{var Rn=14;x.okey1=14;for(var Fn=0;Fn<8;){var jn=Fn++;if(0!=(Rn&1<<jn)){var Nn,Un,Vn,Hn,Wn=null;if(0==jn)null==dr.zpp_pool?Nn=new dr:(Nn=dr.zpp_pool,dr.zpp_pool=Nn.next,Nn.next=null),Nn.forced=!1,Nn.x=n,Nn.y=r,Wn=Nn,(p||h)&&(Wn.forced=!0);else if(2==jn)null==dr.zpp_pool?Un=new dr:(Un=dr.zpp_pool,dr.zpp_pool=Un.next,Un.next=null),Un.forced=!1,Un.x=o,Un.y=r,Wn=Un,(u||h)&&(Wn.forced=!0);else if(4==jn)null==dr.zpp_pool?Vn=new dr:(Vn=dr.zpp_pool,dr.zpp_pool=Vn.next,Vn.next=null),Vn.forced=!1,Vn.x=o,Vn.y=a,Wn=Vn,(u||c)&&(Wn.forced=!0);else if(6==jn)null==dr.zpp_pool?Hn=new dr:(Hn=dr.zpp_pool,dr.zpp_pool=Hn.next,Hn.next=null),Hn.forced=!1,Hn.x=n,Hn.y=a,Wn=Hn,(p||c)&&(Wn.forced=!0);else if(1==jn){if(null==(Wn=i.list[(l<<1)*i.width+s])){var Xn,qn=this.xlerp(n,o,r,y,m,e,d);null==dr.zpp_pool?Xn=new dr:(Xn=dr.zpp_pool,dr.zpp_pool=Xn.next,Xn.next=null),Xn.forced=!1,Xn.x=qn,Xn.y=r,Wn=Xn,i.list[(l<<1)*i.width+s]=Wn}else{var Yn,Kn=Wn.x,Zn=Wn.y;null==dr.zpp_pool?Yn=new dr:(Yn=dr.zpp_pool,dr.zpp_pool=Yn.next,Yn.next=null),Yn.forced=!1,Yn.x=Kn,Yn.y=Zn,Wn=Yn}h&&(Wn.forced=!0),Wn.x!=n&&Wn.x!=o||(Wn.x==n&&0!=(1&Rn)||Wn.x==o&&0!=(4&Rn))&&(Rn^=2)}else if(5==jn){if(null==(Wn=i.list[(2+(l<<1))*i.width+s])){var Jn,Qn=this.xlerp(n,o,a,v,f,e,d);null==dr.zpp_pool?Jn=new dr:(Jn=dr.zpp_pool,dr.zpp_pool=Jn.next,Jn.next=null),Jn.forced=!1,Jn.x=Qn,Jn.y=a,Wn=Jn,i.list[(2+(l<<1))*i.width+s]=Wn}else{var $n,er=Wn.x,tr=Wn.y;null==dr.zpp_pool?$n=new dr:($n=dr.zpp_pool,dr.zpp_pool=$n.next,$n.next=null),$n.forced=!1,$n.x=er,$n.y=tr,Wn=$n}c&&(Wn.forced=!0),Wn.x!=n&&Wn.x!=o||(Wn.x==n&&0!=(64&Rn)||Wn.x==o&&0!=(16&Rn))&&(Rn^=32)}else if(3==jn){if(null==(Wn=i.list[(1+(l<<1))*i.width+(s+1)])){var ir,nr=this.ylerp(r,a,o,m,f,e,d);null==dr.zpp_pool?ir=new dr:(ir=dr.zpp_pool,dr.zpp_pool=ir.next,ir.next=null),ir.forced=!1,ir.x=o,ir.y=nr,Wn=ir,i.list[(1+(l<<1))*i.width+(s+1)]=Wn}else{var rr,or=Wn.x,ar=Wn.y;null==dr.zpp_pool?rr=new dr:(rr=dr.zpp_pool,dr.zpp_pool=rr.next,rr.next=null),rr.forced=!1,rr.x=or,rr.y=ar,Wn=rr}u&&(Wn.forced=!0),Wn.y!=r&&Wn.y!=a||(Wn.y==r&&0!=(4&Rn)||Wn.y==a&&0!=(16&Rn))&&(Rn^=8)}else{if(null==(Wn=i.list[(1+(l<<1))*i.width+s])){var sr,lr=this.ylerp(r,a,n,y,v,e,d);null==dr.zpp_pool?sr=new dr:(sr=dr.zpp_pool,dr.zpp_pool=sr.next,sr.next=null),sr.forced=!1,sr.x=n,sr.y=lr,Wn=sr,i.list[(1+(l<<1))*i.width+s]=Wn}else{var pr,hr=Wn.x,ur=Wn.y;null==dr.zpp_pool?pr=new dr:(pr=dr.zpp_pool,dr.zpp_pool=pr.next,pr.next=null),pr.forced=!1,pr.x=hr,pr.y=ur,Wn=pr}p&&(Wn.forced=!0),Wn.y!=r&&Wn.y!=a||(Wn.y==r&&0!=(1&Rn)||Wn.y==a&&0!=(64&Rn))&&(Rn^=128)}var cr=Wn;null==x.p1?x.p1=cr.prev=cr.next=cr:(cr.prev=x.p1,cr.next=x.p1.next,x.p1.next.prev=cr,x.p1.next=cr),x.p1=cr}}x.p1=x.p1.next,1!=(x.key1=Rn)&&4!=Rn&&16!=Rn&&64!=Rn&&3!=Rn&&12!=Rn&&48!=Rn&&192!=Rn&&129!=Rn&&6!=Rn&&24!=Rn&&96!=Rn&&5!=Rn&&20!=Rn&&80!=Rn&&65!=Rn&&17!=Rn&&68!=Rn||(Rn=0,x.key1=0,x.p1=null),0==Rn?x=null:(x.pr=x.p1,x.okeyr=x.okey1,x.keyr=x.key1)}}}return x},yr.prototype.lerp=function(e,t,i,n){if(0==i)return e;if(0==n)return t;var r=i-n,o=r*r<Qs.epsilon*Qs.epsilon?.5:i/r;return o<0?o=0:1<o&&(o=1),e+o*(t-e)},yr.prototype.xlerp=function(e,t,i,n,r,o,a){var s;if(0==n)s=e;else if(0==r)s=t;else{var l=n-r,p=l*l<Qs.epsilon*Qs.epsilon?.5:n/l;p<0?p=0:1<p&&(p=1),s=e+p*(t-e)}for(;0!=a--&&e<s&&s<t;){var h=o(s,i);if(0==h)break;if(n*h<0?(t=s,r=h):(e=s,n=h),0==n)s=e;else if(0==r)s=t;else{var u=n-r,c=u*u<Qs.epsilon*Qs.epsilon?.5:n/u;c<0?c=0:1<c&&(c=1),s=e+c*(t-e)}}return s},yr.prototype.ylerp=function(e,t,i,n,r,o,a){var s;if(0==n)s=e;else if(0==r)s=t;else{var l=n-r,p=l*l<Qs.epsilon*Qs.epsilon?.5:n/l;p<0?p=0:1<p&&(p=1),s=e+p*(t-e)}for(;0!=a--&&e<s&&s<t;){var h=o(i,s);if(0==h)break;if(n*h<0?(t=s,r=h):(e=s,n=h),0==n)s=e;else if(0==r)s=t;else{var u=n-r,c=u*u<Qs.epsilon*Qs.epsilon?.5:n/u;c<0?c=0:1<c&&(c=1),s=e+c*(t-e)}}return s},yr.prototype.__class__=yr;var Pt=zpp_nape.geom.ZPP_Mat23=function(){this.next=null,this._invalidate=null,this.ty=0,this.tx=0,this.d=0,this.c=0,this.b=0,this.a=0,this.outer=null};Pt.__name__=["zpp_nape","geom","ZPP_Mat23"],Pt.get=function(){var e;return null==Pt.zpp_pool?e=new Pt:(e=Pt.zpp_pool,Pt.zpp_pool=e.next,e.next=null),e},Pt.identity=function(){var e=Pt.get();return e.setas(1,0,0,1,0,0),e},Pt.prototype.outer=null,Pt.prototype.wrapper=function(){if(null==this.outer){this.outer=new ne;var e=this.outer.zpp_inner;e.next=Pt.zpp_pool,Pt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Pt.prototype.a=null,Pt.prototype.b=null,Pt.prototype.c=null,Pt.prototype.d=null,Pt.prototype.tx=null,Pt.prototype.ty=null,Pt.prototype._invalidate=null,Pt.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate()},Pt.prototype.set=function(e){this.setas(e.a,e.b,e.c,e.d,e.tx,e.ty)},Pt.prototype.setas=function(e,t,i,n,r,o){this.tx=r,this.ty=o,this.a=e,this.b=t,this.c=i,this.d=n},Pt.prototype.next=null,Pt.prototype.free=function(){},Pt.prototype.alloc=function(){},Pt.prototype.__class__=Pt;var kt=zpp_nape.geom.ZPP_MatMN=function(e,t){this.x=null,this.n=0,this.m=0,this.outer=null,this.m=e,this.n=t,this.x=[];for(var i=0,n=e*t;i<n;)++i,this.x.push(0)};kt.__name__=["zpp_nape","geom","ZPP_MatMN"],kt.prototype.outer=null,kt.prototype.m=null,kt.prototype.n=null,kt.prototype.x=null,kt.prototype.__class__=kt;var Tt=zpp_nape.geom.ZPP_Monotone=function(){};Tt.__name__=["zpp_nape","geom","ZPP_Monotone"],Tt.bisector=function(e){var t,i,n=e.prev,r=e.next;t=e.x-n.x,i=e.y-n.y;var o,a,s;o=r.x-e.x,a=r.y-e.y,null==el.zpp_pool?s=new el:(s=el.zpp_pool,el.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=-i-a,s.y=t+o;var l=s,p=1/Math.sqrt(l.x*l.x+l.y*l.y);return l.x*=p,l.y*=p,a*t-o*i<0&&(l.x=-l.x,l.y=-l.y),l},Tt.below=function(e,t){if(e.y<t.y)return!0;if(e.y>t.y)return!1;if(e.x<t.x)return!0;if(e.x>t.x)return!1;var i=Tt.bisector(e),n=Tt.bisector(t);i.x+=e.x,i.y+=e.y,n.x+=t.x,n.y+=t.y;var r=i.x<n.x||i.x==n.x&&i.y<n.y;return null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i,null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n._isimmutable=null,n._validate=null,n._invalidate=null,n.next=el.zpp_pool,el.zpp_pool=n,r},Tt.above=function(e,t){return Tt.below(t,e)},Tt.left_vertex=function(e){var t=e.prev;return t.y>e.y||t.y==e.y&&e.next.y<e.y},Tt.isMonotone=function(e){var t=e,i=e,n=e.next;if(null!=n)for(var r=n;;){var o=r;if(o.y<t.y&&(t=o),o.y>i.y&&(i=o),(r=r.next)==e)break}var a=!0,s=t;if(i!=t.next){var l=t.next,p=i;if(null!=l)for(var h=l;;){var u=h;if(u.y<s.y){a=!1;break}if(s=u,(h=h.next)==p)break}}if(!a)return!1;if(i!=(s=t).prev){var c=t.prev,d=i;if(null!=c)for(var _=c;;){var y=_;if(y.y<s.y){a=!1;break}if(s=y,(_=_.prev)==d)break}}return a},Tt.sharedPPoly=null,Tt.getShared=function(){return null==Tt.sharedPPoly&&(Tt.sharedPPoly=new At),Tt.sharedPPoly},Tt.decompose=function(e,t){if(null==t?t=new At(e):t.init(e),null==t.vertices)return t;null==Tt.queue&&(Tt.queue=new gi);var i=t.vertices,n=t.vertices;if(null!=i)for(var r=i;;){var o=r;Tt.queue.add(o);var a,s;a=o.next.x-o.x,s=o.next.y-o.y;var l;l=o.prev.x-o.x;var p=0<(o.prev.y-o.y)*a-l*s;if(o.type=Tt.below(o.prev,o)?Tt.below(o.next,o)?p?0:3:4:Tt.below(o,o.next)?p?1:2:4,(r=r.next)==n)break}var h=Tt.queue;if(null!=h.head&&null!=h.head.next){for(var u,c,d,_=h.head,y=null,m=null,f=null,x=null,v=1;;){for(u=0,m=_,y=_=null;null!=m;){for(++u,f=m,c=0,d=v;null!=f&&c<v;)++c,f=f.next;for(;0<c||0<d&&null!=f;)0==c?(f=(x=f).next,--d):0==d||null==f?(m=(x=m).next,--c):Tt.above(m.elt,f.elt)?(m=(x=m).next,--c):(f=(x=f).next,--d),null!=y?y.next=x:_=x,y=x;m=f}if(y.next=null,v<<=1,!(1<u))break}h.head=_,h.modified=!0,h.pushmod=!0}for(null==Tt.edges&&(null==Vn.zpp_pool?Tt.edges=new Vn:(Tt.edges=Vn.zpp_pool,Vn.zpp_pool=Tt.edges.next,Tt.edges.next=null),Tt.edges.lt=Ot.edge_lt,Tt.edges.swapped=Ot.edge_swap);null!=Tt.queue.head;){var z=Tt.queue.pop_unsafe();switch(z.type){case 0:(z.helper=z).node=Tt.edges.insert(z);break;case 1:var g=z.prev;2==g.helper.type&&t.add_diagonal(z,g.helper),Tt.edges.remove_node(g.node);break;case 2:var b=z.prev;2==b.helper.type&&t.add_diagonal(z,b.helper),Tt.edges.remove_node(b.node);var w=null;if(!Tt.edges.empty()){for(var S=Tt.edges.parent;null!=S.prev;)S=S.prev;for(;null!=S;){var C=S.data;if(!Ot.vert_lt(C,z)){w=C;break}if(null!=S.next)for(S=S.next;null!=S.prev;)S=S.prev;else{for(;null!=S.parent&&S==S.parent.next;)S=S.parent;S=S.parent}}}var M=w;null!=M&&(2==M.helper.type&&t.add_diagonal(z,M.helper),M.helper=z);break;case 3:var P=null;if(!Tt.edges.empty()){for(var k=Tt.edges.parent;null!=k.prev;)k=k.prev;for(;null!=k;){var T=k.data;if(!Ot.vert_lt(T,z)){P=T;break}if(null!=k.next)for(k=k.next;null!=k.prev;)k=k.prev;else{for(;null!=k.parent&&k==k.parent.next;)k=k.parent;k=k.parent}}}var O=P;null!=O&&(t.add_diagonal(z,O.helper),O.helper=z),z.node=Tt.edges.insert(z),z.helper=z;break;case 4:var A=z.prev;if(Tt.left_vertex(z))2==A.helper.type&&t.add_diagonal(z,A.helper),Tt.edges.remove_node(A.node),z.node=Tt.edges.insert(z),z.helper=z;else{var E=null;if(!Tt.edges.empty()){for(var G=Tt.edges.parent;null!=G.prev;)G=G.prev;for(;null!=G;){var I=G.data;if(!Ot.vert_lt(I,z)){E=I;break}if(null!=G.next)for(G=G.next;null!=G.prev;)G=G.prev;else{for(;null!=G.parent&&G==G.parent.next;)G=G.parent;G=G.parent}}}var B=E;2==B.helper.type&&t.add_diagonal(z,B.helper),B.helper=z}}}return t},Tt.prototype.__class__=Tt;var Ot=zpp_nape.geom.ZPP_PartitionVertex=function(){this.node=null,this.prev=null,this.next=null,this.rightchain=!1,this.helper=null,this.type=0,this.diagonals=null,this.forced=!1,this.y=0,this.x=0,this.mag=0,this.id=0,this.id=Ot.nextId++,this.diagonals=new gi};Ot.__name__=["zpp_nape","geom","ZPP_PartitionVertex"],Ot.get=function(e){var t;return null==Ot.zpp_pool?t=new Ot:(t=Ot.zpp_pool,Ot.zpp_pool=t.next,t.next=null),t.x=e.x,t.y=e.y,t},Ot.rightdistance=function(e,t){var i,n,r=e.next.y>e.y;i=e.next.x-e.x,n=e.next.y-e.y;var o;return o=t.x-e.x,(r?-1:1)*((t.y-e.y)*i-o*n)},Ot.vert_lt=function(e,t){if(t==e||t==e.next)return!0;if(e.y==e.next.y){var i=e.x,n=e.next.x;return(i<n?i:n)<=t.x}return Ot.rightdistance(e,t)<=0},Ot.edge_swap=function(e,t){var i=e.node;e.node=t.node,t.node=i},Ot.edge_lt=function(e,t){if(e==t&&e.next==t.next)return!1;if(e==t.next)return!Ot.vert_lt(e,t);if(t==e.next)return Ot.vert_lt(t,e);if(e.y==e.next.y){if(t.y==t.next.y){var i=e.x,n=e.next.x,r=n<i?i:n,o=t.x,a=t.next.x;return(a<o?o:a)<r}return 0<Ot.rightdistance(t,e)||0<Ot.rightdistance(t,e.next)}var s=Ot.rightdistance(e,t),l=Ot.rightdistance(e,t.next);if(0==s&&0==l){var p=e.x,h=e.next.x,u=h<p?p:h,c=t.x,d=t.next.x;return(d<c?c:d)<u}if(0<=s*l)return s<0||l<0;var _=Ot.rightdistance(t,e),y=Ot.rightdistance(t,e.next);return 0<=_*y&&(0<_||0<y)},Ot.prototype.id=null,Ot.prototype.mag=null,Ot.prototype.x=null,Ot.prototype.y=null,Ot.prototype.forced=null,Ot.prototype.diagonals=null,Ot.prototype.type=null,Ot.prototype.helper=null,Ot.prototype.rightchain=null,Ot.prototype.next=null,Ot.prototype.prev=null,Ot.prototype.alloc=function(){},Ot.prototype.free=function(){this.helper=null},Ot.prototype.copy=function(){var e;return null==Ot.zpp_pool?e=new Ot:(e=Ot.zpp_pool,Ot.zpp_pool=e.next,e.next=null),e.x=this.x,e.y=this.y,e.forced=this.forced,e},Ot.prototype.sort=function(){var e=0,t=0,i=0;e=this.prev.x-this.x,t=this.prev.y-this.y,i=this.next.x-this.x;var n=(this.next.y-this.y)*e-i*t,r=0<n?-1:0==n?0:1,o=this.diagonals;if(null!=o.head&&null!=o.head.next){for(var a,s,l,p=o.head,h=null,u=null,c=null,d=null,_=1;;){for(a=0,u=p,h=p=null;null!=u;){for(++a,c=u,s=0,l=_;null!=c&&s<_;)++s,c=c.next;for(;0<s||0<l&&null!=c;){if(0==s)c=(d=c).next,--l;else if(0==l||null==c)u=(d=u).next,--s;else{var y;if(1==r){e=u.elt.x-this.x,t=u.elt.y-this.y,i=c.elt.x-this.x;var m=(c.elt.y-this.y)*e-i*t;y=1==(0<m?-1:0==m?0:1)}else{e=this.prev.x-this.x,t=this.prev.y-this.y,i=u.elt.x-this.x;var f=(u.elt.y-this.y)*e-i*t,x=0<f?-1:0==f?0:1;e=this.prev.x-this.x,t=this.prev.y-this.y,i=c.elt.x-this.x;var v=(c.elt.y-this.y)*e-i*t,z=0<v?-1:0==v?0:1;if(x*z==1||x*z==0&&(1==x||1==z)){e=u.elt.x-this.x,t=u.elt.y-this.y,i=c.elt.x-this.x;var g=(c.elt.y-this.y)*e-i*t;y=1==(0<g?-1:0==g?0:1)}else if(-1==x||-1==z)y=-1==z;else if(0==x&&0==z){e=this.x-this.prev.x,t=this.y-this.prev.y;var b=e*(i=u.elt.x-this.x)+t*(u.elt.y-this.y),w=e*(i=c.elt.x-this.x)+t*(c.elt.y-this.y);y=b<0&&0<w||!(w<0&&0<b)}else y=!0}y?(u=(d=u).next,--s):(c=(d=c).next,--l)}null!=h?h.next=d:p=d,h=d}u=c}if(h.next=null,_<<=1,!(1<a))break}o.head=p,o.modified=!0,o.pushmod=!0}},Ot.prototype.node=null,Ot.prototype.__class__=Ot;var At=zpp_nape.geom.ZPP_PartitionedPoly=function(e){this.next=null,this.vertices=null,this.init(e)};At.__name__=["zpp_nape","geom","ZPP_PartitionedPoly"],At.sharedPPList=null,At.getSharedPP=function(){return null==At.sharedPPList&&(At.sharedPPList=new wi),At.sharedPPList},At.sharedGVList=null,At.getShared=function(){return null==At.sharedGVList&&(At.sharedGVList=new Si),At.sharedGVList},At.prototype.vertices=null,At.prototype.eq=function(e,t){var i,n,r=e.x,o=e.y;return(i=r-t.x)*i+(n=o-t.y)*n<Qs.epsilon*Qs.epsilon},At.prototype.next=null,At.prototype.alloc=function(){},At.prototype.free=function(){},At.prototype.init=function(e){if(null!=e){var t=0;if(null!=e)for(var i=e;;){var n=i;if(t+=n.x*(n.next.y-n.prev.y),(i=i.next)==e)break}for(var r=0<.5*t,o=e;;){var a;if(r){var s;null==Ot.zpp_pool?s=new Ot:(s=Ot.zpp_pool,Ot.zpp_pool=s.next,s.next=null),s.x=o.x,s.y=o.y;var l=s;null==this.vertices?this.vertices=l.prev=l.next=l:(l.prev=this.vertices,l.next=this.vertices.next,this.vertices.next.prev=l,this.vertices.next=l),a=l}else{var p;null==Ot.zpp_pool?p=new Ot:(p=Ot.zpp_pool,Ot.zpp_pool=p.next,p.next=null),p.x=o.x,p.y=o.y;var h=p;null==this.vertices?this.vertices=h.prev=h.next=h:(h.next=this.vertices,h.prev=this.vertices.prev,this.vertices.prev.next=h,this.vertices.prev=h),a=h}if(this.vertices=a,this.vertices.forced=o.forced,(o=o.next)==e)break}this.remove_collinear_vertices()}},At.prototype.remove_collinear_vertices=function(){for(var e,t=this.vertices,i=!0;i||t!=this.vertices;)if(i=!1,this.eq(t,t.next)){if(t==this.vertices&&(this.vertices=t.next,i=!0),t.forced&&(t.next.forced=!0),null!=t&&t.prev==t){t.next=t.prev=null;var n=t;n.helper=null,n.next=Ot.zpp_pool,Ot.zpp_pool=n,t=t=null}else{var r=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var o=t;o.helper=null,o.next=Ot.zpp_pool,Ot.zpp_pool=o,t=null,t=r}if(null==t){this.vertices=null;break}}else t=t.next;if(null==this.vertices)return!0;for(;;){for(e=!1,t=this.vertices,i=!0;i||t!=this.vertices;){i=!1;var a,s,l=t.prev;a=t.x-l.x,s=t.y-l.y;var p;p=t.next.x-t.x;var h=(t.next.y-t.y)*a-p*s;if(h*h>=Qs.epsilon*Qs.epsilon)t=t.next;else{if(t==this.vertices&&(this.vertices=t.next,i=!0),null!=t&&t.prev==t){t.next=t.prev=null;var u=t;u.helper=null,u.next=Ot.zpp_pool,Ot.zpp_pool=u,t=t=null}else{var c=t.next;t.prev.next=t.next,t.next.prev=t.prev,t.next=t.prev=null;var d=t;d.helper=null,d.next=Ot.zpp_pool,Ot.zpp_pool=d,t=null,t=c}if(e=!0,null==t){e=!1,this.vertices=null;break}}}if(!e)break}return null==this.vertices},At.prototype.add_diagonal=function(e,t){e.diagonals.add(t),t.diagonals.add(e),e.forced=t.forced=!0},At.prototype.extract_partitions=function(e){if(null==e&&(e=new wi),null!=this.vertices){var t=this.vertices,i=this.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);for(this.pull_partitions(this.vertices,e);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=Ot.zpp_pool,Ot.zpp_pool=o,r=this.vertices=null}else{var a=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null,s.next=Ot.zpp_pool,Ot.zpp_pool=s,this.vertices=null,r=a}this.vertices=r}for(var l=null,p=e.head;null!=p;)p.elt.remove_collinear_vertices()?e.erase(l):p=(l=p).next}return e},At.prototype.pull_partitions=function(e,t){var i;null==At.zpp_pool?i=new At:(i=At.zpp_pool,At.zpp_pool=i.next,i.next=null);for(var n=e;;){var r;null==Ot.zpp_pool?r=new Ot:(r=Ot.zpp_pool,Ot.zpp_pool=r.next,r.next=null),r.x=n.x,r.y=n.y,r.forced=n.forced;var o=r;if(null==i.vertices?i.vertices=o.prev=o.next=o:(o.prev=i.vertices,o.next=i.vertices.next,i.vertices.next.prev=o,i.vertices.next=o),i.vertices=o,i.vertices.forced=n.forced,null!=n.diagonals.head){var a=n.diagonals,s=a.head.elt;if(a.pop(),s==e)break;n=this.pull_partitions(n,t)}else n=n.next;if(n==e)break}var l=0,p=i.vertices,h=i.vertices;if(null!=p)for(var u=p;;){var c=u;if(l+=c.x*(c.next.y-c.prev.y),(u=u.next)==h)break}return.5*l!=0&&t.add(i),n},At.prototype.extract=function(e){if(null==e&&(e=new Si),null!=this.vertices){var t=this.vertices,i=this.vertices;if(null!=t)for(var n=t;n.sort(),(n=n.next)!=i;);for(this.pull(this.vertices,e);null!=this.vertices;){var r;if(null!=this.vertices&&this.vertices.prev==this.vertices){this.vertices.next=this.vertices.prev=null;var o=this.vertices;o.helper=null,o.next=Ot.zpp_pool,Ot.zpp_pool=o,r=this.vertices=null}else{var a=this.vertices.next;this.vertices.prev.next=this.vertices.next,this.vertices.next.prev=this.vertices.prev,this.vertices.next=this.vertices.prev=null;var s=this.vertices;s.helper=null,s.next=Ot.zpp_pool,Ot.zpp_pool=s,this.vertices=null,r=a}this.vertices=r}}return e},At.prototype.pull=function(e,t){for(var i=null,n=e;;){var r,o=n.x,a=n.y;null==dr.zpp_pool?r=new dr:(r=dr.zpp_pool,dr.zpp_pool=r.next,r.next=null),r.forced=!1,r.x=o,r.y=a;var s=r;if(null==i?i=s.prev=s.next=s:(s.prev=i,s.next=i.next,i.next.prev=s,i.next=s),(i=s).forced=n.forced,null!=n.diagonals.head){var l=n.diagonals,p=l.head.elt;if(l.pop(),p==e)break;n=this.pull(n,t)}else n=n.next;if(n==e)break}var h=0,u=i;if(null!=i)for(var c=i;;){var d=c;if(h+=d.x*(d.next.y-d.prev.y),(c=c.next)==u)break}var _=.5*h;if(_*_>=Qs.epsilon*Qs.epsilon){for(var y=i,m=!0;m||y!=i;){m=!1;var f,x,v=y.x,z=y.y;if((f=v-y.next.x)*f+(x=z-y.next.y)*x<Qs.epsilon*Qs.epsilon){if(y==i&&(i=y.next,m=!0),y.forced&&(y.next.forced=!0),null!=y&&y.prev==y)y.next=y.prev=null,y=y=null;else{var g=y.next;y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null,y=null,y=g}if(null==y){i=null;break}}else y=y.next}if(null!=i)for(var b;;){for(y=i,m=!(b=!1);m||y!=i;){m=!1;var w,S,C=y.prev;w=y.x-C.x,S=y.y-C.y;var M;M=y.next.x-y.x;var P=(y.next.y-y.y)*w-M*S;if(P*P>=Qs.epsilon*Qs.epsilon)y=y.next;else{if(y==i&&(i=y.next,m=!0),null!=y&&y.prev==y)y.next=y.prev=null,y=y=null;else{var k=y.next;y.prev.next=y.next,y.next.prev=y.prev,y.next=y.prev=null,y=null,y=k}if(b=!0,null==y){b=!1,i=null;break}}}if(!b)break}null!=i&&t.add(i)}return n},At.prototype.__class__=At;var Et=zpp_nape.geom.ZPP_Ray=function(){var e,t;if(this.zip_dir=!1,this.absnormaly=0,this.absnormalx=0,this.normaly=0,this.normalx=0,this.idiry=0,this.idirx=0,this.diry=0,this.dirx=0,this.originy=0,this.originx=0,this.userData=null,this.maxdist=0,this.direction=null,(this.origin=null)==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var i;null==el.zpp_pool?i=new el:(i=el.zpp_pool,el.zpp_pool=i.next,i.next=null),i.weak=!1,i._immutable=!1,i.x=0,i.y=0,e.zpp_inner=i,e.zpp_inner.outer=e}else{var n,r=e.zpp_inner;if(null!=r._validate&&r._validate(),0==e.zpp_inner.x){var o=e.zpp_inner;null!=o._validate&&o._validate(),n=0==e.zpp_inner.y}else n=!1;if(!n){e.zpp_inner.x=0,e.zpp_inner.y=0;var a=e.zpp_inner;null!=a._invalidate&&a._invalidate(a)}}if(e.zpp_inner.weak=!1,this.origin=e,this.origin.zpp_inner._invalidate=$(this,this.origin_invalidate),null==jn.poolVec2?t=new ht:(t=jn.poolVec2,jn.poolVec2=t.zpp_pool,t.zpp_pool=null),null==t.zpp_inner){var s;null==el.zpp_pool?s=new el:(s=el.zpp_pool,el.zpp_pool=s.next,s.next=null),s.weak=!1,s._immutable=!1,s.x=0,s.y=0,t.zpp_inner=s,t.zpp_inner.outer=t}else{var l,p=t.zpp_inner;if(null!=p._validate&&p._validate(),0==t.zpp_inner.x){var h=t.zpp_inner;null!=h._validate&&h._validate(),l=0==t.zpp_inner.y}else l=!1;if(!l){t.zpp_inner.x=0,t.zpp_inner.y=0;var u=t.zpp_inner;null!=u._invalidate&&u._invalidate(u)}}t.zpp_inner.weak=!1,this.direction=t,this.direction.zpp_inner._invalidate=$(this,this.direction_invalidate),this.originx=0,this.originy=0,this.dirx=0,this.diry=0,this.zip_dir=!1};Et.__name__=["zpp_nape","geom","ZPP_Ray"],Et.prototype.origin=null,Et.prototype.direction=null,Et.prototype.maxdist=null,Et.prototype.userData=null,Et.prototype.originx=null,Et.prototype.originy=null,Et.prototype.dirx=null,Et.prototype.diry=null,Et.prototype.idirx=null,Et.prototype.idiry=null,Et.prototype.normalx=null,Et.prototype.normaly=null,Et.prototype.absnormalx=null,Et.prototype.absnormaly=null,Et.prototype.origin_invalidate=function(e){this.originx=e.x,this.originy=e.y},Et.prototype.direction_invalidate=function(e){this.dirx=e.x,this.diry=e.y,this.zip_dir=!0},Et.prototype.zip_dir=null,Et.prototype.invalidate_dir=function(){this.zip_dir=!0},Et.prototype.validate_dir=function(){if(this.zip_dir){this.zip_dir=!1;var e=1/Math.sqrt(this.dirx*this.dirx+this.diry*this.diry);this.dirx*=e,this.diry*=e,this.idirx=1/this.dirx,this.idiry=1/this.diry,this.normalx=-this.diry,this.normaly=this.dirx;var t=this.normalx;this.absnormalx=t<0?-t:t;var i=this.normaly;this.absnormaly=i<0?-i:i}},Et.prototype.rayAABB=function(){var e,t=this.originx,i=t,n=this.originy,r=n;if(this.maxdist>=1/0?(0<this.dirx?i=1/0:this.dirx<0&&(i=-1/0),0<this.diry?r=1/0:this.diry<0&&(r=-1/0)):(i+=this.maxdist*this.dirx,r+=this.maxdist*this.diry),i<t){var o=t;t=i,i=o}if(r<n){var a=n;n=r,r=a}return null==Ao.zpp_pool?e=new Ao:(e=Ao.zpp_pool,Ao.zpp_pool=e.next,e.next=null),e.minx=t,e.miny=n,e.maxx=i,e.maxy=r,e},Et.prototype.aabbtest=function(e){var t=this.normalx*(this.originx-.5*(e.minx+e.maxx))+this.normaly*(this.originy-.5*(e.miny+e.maxy));return(t<0?-t:t)<.5*this.absnormalx*(e.maxx-e.minx)+.5*this.absnormaly*(e.maxy-e.miny)},Et.prototype.aabbsect=function(e){var t=this.originx>=e.minx&&this.originx<=e.maxx,i=this.originy>=e.miny&&this.originy<=e.maxy;if(t&&i)return 0;for(var n=-1;!(0<=this.dirx&&this.originx>=e.maxx||this.dirx<=0&&this.originx<=e.minx||0<=this.diry&&this.originy>=e.maxy||this.diry<=0&&this.originy<=e.miny);){if(0<this.dirx){var r=(e.minx-this.originx)*this.idirx;if(0<=r&&r<=this.maxdist){var o=this.originy+r*this.diry;if(o>=e.miny&&o<=e.maxy){n=r;break}}}else if(this.dirx<0){var a=(e.maxx-this.originx)*this.idirx;if(0<=a&&a<=this.maxdist){var s=this.originy+a*this.diry;if(s>=e.miny&&s<=e.maxy){n=a;break}}}if(0<this.diry){var l=(e.miny-this.originy)*this.idiry;if(0<=l&&l<=this.maxdist){var p=this.originx+l*this.dirx;if(p>=e.minx&&p<=e.maxx){n=l;break}}}else if(this.diry<0){var h=(e.maxy-this.originy)*this.idiry;if(0<=h&&h<=this.maxdist){var u=this.originx+h*this.dirx;if(u>=e.minx&&u<=e.maxx){n=h;break}}}break}return n},Et.prototype.circlesect=function(e,t,i){if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var n=e.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var l=o;r+=s.x*(l.y-a.y);var p=l.y*s.x-l.x*s.y;n.localCOMx+=(s.x+l.x)*p,n.localCOMy+=(s.y+l.y)*p,a=s,s=l,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var c=o=o.next;r+=h.x*(c.y-a.y);var d=c.y*h.x-c.x*h.y;n.localCOMx+=(h.x+c.x)*d,n.localCOMy+=(h.y+c.y)*d;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var y=e.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var m,f;m=this.originx-e.worldCOMx,f=this.originy-e.worldCOMy;var x=this.dirx*this.dirx+this.diry*this.diry,v=2*(m*this.dirx+f*this.diry),z=m*m+f*f-e.radius*e.radius,g=v*v-4*x*z;if(0==g){var b=-v/2*x;if((!t||0<z)&&0<b&&b<i&&b<=this.maxdist){var w=0,S=0;w=this.originx,S=this.originy,w+=this.dirx*b,S+=this.diry*b,w-=e.worldCOMx,S-=e.worldCOMy;var C,M=1/Math.sqrt(w*w+S*S);if(w*=M,S*=M,z<=0&&(w=-w,S=-S),null==jn.poolVec2?C=new ht:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==el.zpp_pool?P=new el:(P=el.zpp_pool,el.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=w,P.y=S,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==w){var O=C.zpp_inner;null!=O._validate&&O._validate(),k=C.zpp_inner.y==S}else k=!1;if(!k){C.zpp_inner.x=w,C.zpp_inner.y=S;var A=C.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}return C.zpp_inner.weak=!1,bt.getRay(C,b,z<=0,e.outer)}return null}var E=(-v-(g=Math.sqrt(g)))*(x=1/(2*x)),G=(-v+g)*x;if(0<E){if(E<i&&E<=this.maxdist){var I=0,B=0;I=this.originx,B=this.originy,I+=this.dirx*E,B+=this.diry*E,I-=e.worldCOMx,B-=e.worldCOMy;var L,D=1/Math.sqrt(I*I+B*B);if(I*=D,B*=D,null==jn.poolVec2?L=new ht:(L=jn.poolVec2,jn.poolVec2=L.zpp_pool,L.zpp_pool=null),null==L.zpp_inner){var R;null==el.zpp_pool?R=new el:(R=el.zpp_pool,el.zpp_pool=R.next,R.next=null),R.weak=!1,R._immutable=!1,R.x=I,R.y=B,L.zpp_inner=R,L.zpp_inner.outer=L}else{var F,j=L.zpp_inner;if(null!=j._validate&&j._validate(),L.zpp_inner.x==I){var N=L.zpp_inner;null!=N._validate&&N._validate(),F=L.zpp_inner.y==B}else F=!1;if(!F){L.zpp_inner.x=I,L.zpp_inner.y=B;var U=L.zpp_inner;null!=U._invalidate&&U._invalidate(U)}}return L.zpp_inner.weak=!1,bt.getRay(L,E,!1,e.outer)}return null}if(0<G&&t){if(G<i&&G<=this.maxdist){var V=0,H=0;V=this.originx,H=this.originy,V+=this.dirx*G,H+=this.diry*G,V-=e.worldCOMx,H-=e.worldCOMy;var W,X=1/Math.sqrt(V*V+H*H);if(V=-(V*=X),H=-(H*=X),null==jn.poolVec2?W=new ht:(W=jn.poolVec2,jn.poolVec2=W.zpp_pool,W.zpp_pool=null),null==W.zpp_inner){var q;null==el.zpp_pool?q=new el:(q=el.zpp_pool,el.zpp_pool=q.next,q.next=null),q.weak=!1,q._immutable=!1,q.x=V,q.y=H,W.zpp_inner=q,W.zpp_inner.outer=W}else{var Y,K=W.zpp_inner;if(null!=K._validate&&K._validate(),W.zpp_inner.x==V){var Z=W.zpp_inner;null!=Z._validate&&Z._validate(),Y=W.zpp_inner.y==H}else Y=!1;if(!Y){W.zpp_inner.x=V,W.zpp_inner.y=H;var J=W.zpp_inner;null!=J._invalidate&&J._invalidate(J)}}return W.zpp_inner.weak=!1,bt.getRay(W,G,!0,e.outer)}return null}return null},Et.prototype.circlesect2=function(e,t,i){if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var n=e.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var l=o;r+=s.x*(l.y-a.y);var p=l.y*s.x-l.x*s.y;n.localCOMx+=(s.x+l.x)*p,n.localCOMy+=(s.y+l.y)*p,a=s,s=l,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var c=o=o.next;r+=h.x*(c.y-a.y);var d=c.y*h.x-c.x*h.y;n.localCOMx+=(h.x+c.x)*d,n.localCOMy+=(h.y+c.y)*d;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var y=e.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var m,f;m=this.originx-e.worldCOMx,f=this.originy-e.worldCOMy;var x=this.dirx*this.dirx+this.diry*this.diry,v=2*(m*this.dirx+f*this.diry),z=m*m+f*f-e.radius*e.radius,g=v*v-4*x*z;if(0==g){var b=-v/2*x;if((!t||0<z)&&0<b&&b<=this.maxdist){var w=0,S=0;w=this.originx,S=this.originy,w+=this.dirx*b,S+=this.diry*b,w-=e.worldCOMx,S-=e.worldCOMy;var C,M=1/Math.sqrt(w*w+S*S);if(w*=M,S*=M,z<=0&&(w=-w,S=-S),null==jn.poolVec2?C=new ht:(C=jn.poolVec2,jn.poolVec2=C.zpp_pool,C.zpp_pool=null),null==C.zpp_inner){var P;null==el.zpp_pool?P=new el:(P=el.zpp_pool,el.zpp_pool=P.next,P.next=null),P.weak=!1,P._immutable=!1,P.x=w,P.y=S,C.zpp_inner=P,C.zpp_inner.outer=C}else{var k,T=C.zpp_inner;if(null!=T._validate&&T._validate(),C.zpp_inner.x==w){var O=C.zpp_inner;null!=O._validate&&O._validate(),k=C.zpp_inner.y==S}else k=!1;if(!k){C.zpp_inner.x=w,C.zpp_inner.y=S;var A=C.zpp_inner;null!=A._invalidate&&A._invalidate(A)}}C.zpp_inner.weak=!1;for(var E=bt.getRay(C,b,z<=0,e.outer),G=null,I=i.zpp_inner.inner.head;null!=I&&!(E.zpp_inner.toiDistance<I.elt.zpp_inner.toiDistance);)I=(G=I).next;var B,L=i.zpp_inner.inner;null==yn.zpp_pool?B=new yn:(B=yn.zpp_pool,yn.zpp_pool=B.next,B.next=null),B.elt=E;var D=B;null==G?(D.next=L.head,L.head=D):(D.next=G.next,G.next=D),L.pushmod=L.modified=!0,L.length++}}else{var R=(-v-(g=Math.sqrt(g)))*(x=1/(2*x)),F=(-v+g)*x;if(0<R&&R<=this.maxdist){var j=0,N=0;j=this.originx,N=this.originy,j+=this.dirx*R,N+=this.diry*R,j-=e.worldCOMx,N-=e.worldCOMy;var U,V=1/Math.sqrt(j*j+N*N);if(j*=V,N*=V,null==jn.poolVec2?U=new ht:(U=jn.poolVec2,jn.poolVec2=U.zpp_pool,U.zpp_pool=null),null==U.zpp_inner){var H;null==el.zpp_pool?H=new el:(H=el.zpp_pool,el.zpp_pool=H.next,H.next=null),H.weak=!1,H._immutable=!1,H.x=j,H.y=N,U.zpp_inner=H,U.zpp_inner.outer=U}else{var W,X=U.zpp_inner;if(null!=X._validate&&X._validate(),U.zpp_inner.x==j){var q=U.zpp_inner;null!=q._validate&&q._validate(),W=U.zpp_inner.y==N}else W=!1;if(!W){U.zpp_inner.x=j,U.zpp_inner.y=N;var Y=U.zpp_inner;null!=Y._invalidate&&Y._invalidate(Y)}}U.zpp_inner.weak=!1;for(var K=bt.getRay(U,R,!1,e.outer),Z=null,J=i.zpp_inner.inner.head;null!=J&&!(K.zpp_inner.toiDistance<J.elt.zpp_inner.toiDistance);)J=(Z=J).next;var Q,$=i.zpp_inner.inner;null==yn.zpp_pool?Q=new yn:(Q=yn.zpp_pool,yn.zpp_pool=Q.next,Q.next=null),Q.elt=K;var ee=Q;null==Z?(ee.next=$.head,$.head=ee):(ee.next=Z.next,Z.next=ee),$.pushmod=$.modified=!0,$.length++}if(0<F&&F<=this.maxdist&&t){var te=0,ie=0;te=this.originx,ie=this.originy,te+=this.dirx*F,ie+=this.diry*F,te-=e.worldCOMx,ie-=e.worldCOMy;var ne,re=1/Math.sqrt(te*te+ie*ie);if(te=-(te*=re),ie=-(ie*=re),null==jn.poolVec2?ne=new ht:(ne=jn.poolVec2,jn.poolVec2=ne.zpp_pool,ne.zpp_pool=null),null==ne.zpp_inner){var oe;null==el.zpp_pool?oe=new el:(oe=el.zpp_pool,el.zpp_pool=oe.next,oe.next=null),oe.weak=!1,oe._immutable=!1,oe.x=te,oe.y=ie,ne.zpp_inner=oe,ne.zpp_inner.outer=ne}else{var ae,se=ne.zpp_inner;if(null!=se._validate&&se._validate(),ne.zpp_inner.x==te){var le=ne.zpp_inner;null!=le._validate&&le._validate(),ae=ne.zpp_inner.y==ie}else ae=!1;if(!ae){ne.zpp_inner.x=te,ne.zpp_inner.y=ie;var pe=ne.zpp_inner;null!=pe._invalidate&&pe._invalidate(pe)}}ne.zpp_inner.weak=!1;for(var he=bt.getRay(ne,F,!0,e.outer),ue=null,ce=i.zpp_inner.inner.head;null!=ce&&!(he.zpp_inner.toiDistance<ce.elt.zpp_inner.toiDistance);)ce=(ue=ce).next;var de,_e=i.zpp_inner.inner;null==yn.zpp_pool?de=new yn:(de=yn.zpp_pool,yn.zpp_pool=de.next,de.next=null),de.elt=he;var ye=de;null==ue?(ye.next=_e.head,_e.head=ye):(ye.next=ue.next,ue.next=ye),_e.pushmod=_e.modified=!0,_e.length++}}},Et.prototype.polysect=function(e,t,i){for(var n=i,r=null,o=e.edges.head,a=e.gverts.next,s=a,l=a.next;null!=l;){var p=l,h=o.elt;if(t||h.gnormx*this.dirx+h.gnormy*this.diry<0){var u,c;u=p.x-s.x,c=p.y-s.y;var d,_;d=s.x-this.originx,_=s.y-this.originy;var y=c*this.dirx-u*this.diry;if(y*y>Qs.epsilon){var m=(c*d-u*_)*(y=1/y);if(0<m&&m<n&&m<=this.maxdist){var f=(this.diry*d-this.dirx*_)*y;f>-Qs.epsilon&&f<1+Qs.epsilon&&(n=m,r=o.elt)}}}o=o.next,s=p,l=(a=l).next}for(;;){var x=l=e.gverts.next,v=o.elt;if(t||v.gnormx*this.dirx+v.gnormy*this.diry<0){var z,g;z=x.x-s.x,g=x.y-s.y;var b,w;b=s.x-this.originx,w=s.y-this.originy;var S=g*this.dirx-z*this.diry;if(S*S>Qs.epsilon){var C=(g*b-z*w)*(S=1/S);if(0<C&&C<n&&C<=this.maxdist){var M=(this.diry*b-this.dirx*w)*S;M>-Qs.epsilon&&M<1+Qs.epsilon&&(n=C,r=o.elt)}}}o=o.next;break}if(null!=r){var P=0,k=0;P=r.gnormx,k=r.gnormy;var T,O=0<P*this.dirx+k*this.diry;if(O&&(P=-P,k=-k),null==jn.poolVec2?T=new ht:(T=jn.poolVec2,jn.poolVec2=T.zpp_pool,T.zpp_pool=null),null==T.zpp_inner){var A;null==el.zpp_pool?A=new el:(A=el.zpp_pool,el.zpp_pool=A.next,A.next=null),A.weak=!1,A._immutable=!1,A.x=P,A.y=k,T.zpp_inner=A,T.zpp_inner.outer=T}else{var E,G=T.zpp_inner;if(null!=G._validate&&G._validate(),T.zpp_inner.x==P){var I=T.zpp_inner;null!=I._validate&&I._validate(),E=T.zpp_inner.y==k}else E=!1;if(!E){T.zpp_inner.x=P,T.zpp_inner.y=k;var B=T.zpp_inner;null!=B._invalidate&&B._invalidate(B)}}return T.zpp_inner.weak=!1,bt.getRay(T,n,O,e.outer)}return null},Et.prototype.polysect2=function(e,t,i){for(var n=1/0,r=-1,o=null,a=null,s=e.edges.head,l=e.gverts.next,p=l,h=l.next;null!=h;){var u=h,c=s.elt;if(t||c.gnormx*this.dirx+c.gnormy*this.diry<0){var d,_;d=u.x-p.x,_=u.y-p.y;var y,m;y=p.x-this.originx,m=p.y-this.originy;var f=_*this.dirx-d*this.diry;if(f*f>Qs.epsilon){var x=(_*y-d*m)*(f=1/f);if(0<x&&x<=this.maxdist&&(x<n||r<x)){var v=(this.diry*y-this.dirx*m)*f;v>-Qs.epsilon&&v<1+Qs.epsilon&&(x<n&&(n=x,o=s.elt),r<x&&(r=x,a=s.elt))}}}s=s.next,p=u,h=(l=h).next}for(;;){var z=h=e.gverts.next,g=s.elt;if(t||g.gnormx*this.dirx+g.gnormy*this.diry<0){var b,w;b=z.x-p.x,w=z.y-p.y;var S,C;S=p.x-this.originx,C=p.y-this.originy;var M=w*this.dirx-b*this.diry;if(M*M>Qs.epsilon){var P=(w*S-b*C)*(M=1/M);if(0<P&&P<=this.maxdist&&(P<n||r<P)){var k=(this.diry*S-this.dirx*C)*M;k>-Qs.epsilon&&k<1+Qs.epsilon&&(P<n&&(n=P,o=s.elt),r<P&&(r=P,a=s.elt))}}}s=s.next;break}if(null!=o){var T=0,O=0;T=o.gnormx,O=o.gnormy;var A,E=0<T*this.dirx+O*this.diry;if(E&&(T=-T,O=-O),null==jn.poolVec2?A=new ht:(A=jn.poolVec2,jn.poolVec2=A.zpp_pool,A.zpp_pool=null),null==A.zpp_inner){var G;null==el.zpp_pool?G=new el:(G=el.zpp_pool,el.zpp_pool=G.next,G.next=null),G.weak=!1,G._immutable=!1,G.x=T,G.y=O,A.zpp_inner=G,A.zpp_inner.outer=A}else{var I,B=A.zpp_inner;if(null!=B._validate&&B._validate(),A.zpp_inner.x==T){var L=A.zpp_inner;null!=L._validate&&L._validate(),I=A.zpp_inner.y==O}else I=!1;if(!I){A.zpp_inner.x=T,A.zpp_inner.y=O;var D=A.zpp_inner;null!=D._invalidate&&D._invalidate(D)}}A.zpp_inner.weak=!1;for(var R=bt.getRay(A,n,E,e.outer),F=null,j=i.zpp_inner.inner.head;null!=j&&!(R.zpp_inner.toiDistance<j.elt.zpp_inner.toiDistance);)j=(F=j).next;var N,U=i.zpp_inner.inner;null==yn.zpp_pool?N=new yn:(N=yn.zpp_pool,yn.zpp_pool=N.next,N.next=null),N.elt=R;var V=N;null==F?(V.next=U.head,U.head=V):(V.next=F.next,F.next=V),U.pushmod=U.modified=!0,U.length++}if(null!=a&&o!=a){var H=0,W=0;H=a.gnormx,W=a.gnormy;var X,q=0<H*this.dirx+W*this.diry;if(q&&(H=-H,W=-W),null==jn.poolVec2?X=new ht:(X=jn.poolVec2,jn.poolVec2=X.zpp_pool,X.zpp_pool=null),null==X.zpp_inner){var Y;null==el.zpp_pool?Y=new el:(Y=el.zpp_pool,el.zpp_pool=Y.next,Y.next=null),Y.weak=!1,Y._immutable=!1,Y.x=H,Y.y=W,X.zpp_inner=Y,X.zpp_inner.outer=X}else{var K,Z=X.zpp_inner;if(null!=Z._validate&&Z._validate(),X.zpp_inner.x==H){var J=X.zpp_inner;null!=J._validate&&J._validate(),K=X.zpp_inner.y==W}else K=!1;if(!K){X.zpp_inner.x=H,X.zpp_inner.y=W;var Q=X.zpp_inner;null!=Q._invalidate&&Q._invalidate(Q)}}X.zpp_inner.weak=!1;for(var $=bt.getRay(X,r,q,e.outer),ee=null,te=i.zpp_inner.inner.head;null!=te&&!($.zpp_inner.toiDistance<te.elt.zpp_inner.toiDistance);)te=(ee=te).next;var ie,ne=i.zpp_inner.inner;null==yn.zpp_pool?ie=new yn:(ie=yn.zpp_pool,yn.zpp_pool=ie.next,ie.next=null),ie.elt=$;var re=ie;null==ee?(re.next=ne.head,ne.head=re):(re.next=ee.next,ee.next=re),ne.pushmod=ne.modified=!0,ne.length++}},Et.prototype.__class__=Et;var Gt=zpp_nape.geom.ZPP_SimpleVert=function(){this.node=null,this.next=null,this.id=0,this.links=null,this.y=0,this.x=0,this.forced=!1,this.id=ke.ZPP_SimpleVert(),null==Wn.zpp_pool?this.links=new Wn:(this.links=Wn.zpp_pool,Wn.zpp_pool=this.links.next,this.links.next=null),this.links.lt=Gt.less_xy};Gt.__name__=["zpp_nape","geom","ZPP_SimpleVert"],Gt.less_xy=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x},Gt.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Gt.get=function(e,t){var i;return null==Gt.zpp_pool?i=new Gt:(i=Gt.zpp_pool,Gt.zpp_pool=i.next,i.next=null),i.x=e,i.y=t,i},Gt.prototype.forced=null,Gt.prototype.x=null,Gt.prototype.y=null,Gt.prototype.links=null,Gt.prototype.id=null,Gt.prototype.next=null,Gt.prototype.node=null,Gt.prototype.free=function(){this.links.clear(),this.node=null,this.forced=!1},Gt.prototype.alloc=function(){},Gt.prototype.__class__=Gt;var It=zpp_nape.geom.ZPP_SimpleSeg=function(){this.node=null,this.prev=null,this.next=null,this.id=0,this.vertices=null,this.right=null,this.left=null,this.id=ke.ZPP_SimpleSeg(),null==Wn.zpp_pool?this.vertices=new Wn:(this.vertices=Wn.zpp_pool,Wn.zpp_pool=this.vertices.next,this.vertices.next=null),this.vertices.lt=$(this,this.less_xy)};It.__name__=["zpp_nape","geom","ZPP_SimpleSeg"],It.get=function(e,t){var i;return null==It.zpp_pool?i=new It:(i=It.zpp_pool,It.zpp_pool=i.next,i.next=null),i.left=e,i.right=t,i.vertices.insert(e),i.vertices.insert(t),i},It.prototype.left=null,It.prototype.right=null,It.prototype.vertices=null,It.prototype.id=null,It.prototype.next=null,It.prototype.free=function(){this.left=this.right=null,this.prev=null,this.node=null,this.vertices.clear()},It.prototype.alloc=function(){},It.prototype.prev=null,It.prototype.node=null,It.prototype.less_xy=function(e,t){return e.x<t.x||e.x==t.x&&e.y<t.y},It.prototype.__class__=It;var Bt=zpp_nape.geom.ZPP_SimpleEvent=function(){this.next=null,this.node=null,this.segment2=null,this.segment=null,this.vertex=null,this.type=0};Bt.__name__=["zpp_nape","geom","ZPP_SimpleEvent"],Bt.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Bt.less_xy=function(e,t){return e.vertex.x<t.vertex.x||!(e.vertex.x>t.vertex.x)&&(e.vertex.y<t.vertex.y||!(e.vertex.y>t.vertex.y)&&e.type<t.type)},Bt.get=function(e){var t;return null==Bt.zpp_pool?t=new Bt:(t=Bt.zpp_pool,Bt.zpp_pool=t.next,t.next=null),t.vertex=e,t},Bt.prototype.type=null,Bt.prototype.vertex=null,Bt.prototype.segment=null,Bt.prototype.segment2=null,Bt.prototype.node=null,Bt.prototype.next=null,Bt.prototype.free=function(){this.vertex=null,this.segment=this.segment2=null,this.node=null},Bt.prototype.alloc=function(){},Bt.prototype.__class__=Bt;var Lt=zpp_nape.geom.ZPP_SimpleSweep=function(){this.tree=null,this.sweepx=0,null==Xn.zpp_pool?this.tree=new Xn:(this.tree=Xn.zpp_pool,Xn.zpp_pool=this.tree.next,this.tree.next=null),this.tree.lt=$(this,this.edge_lt),this.tree.swapped=$(this,this.swap_nodes)};Lt.__name__=["zpp_nape","geom","ZPP_SimpleSweep"],Lt.prototype.sweepx=null,Lt.prototype.tree=null,Lt.prototype.swap_nodes=function(e,t){var i=e.node;e.node=t.node,t.node=i},Lt.prototype.edge_lt=function(e,t){var i,n,r=0,o=0,a=0,s=0;if(e.left==t.left&&e.right==t.right)return!1;if(e.left==t.right)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.left.y:e.right.y>t.left.y:(i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.left.x-e.left.x,s=t.left.y-e.left.y,(i?o*a-r*s:s*r-a*o)<0);if(e.right==t.left)return t.left.x==t.right.x?n=t.left.y<t.right.y?t.left.y>e.left.y:t.right.y>e.left.y:(i=t.right.x<t.left.x,r=t.right.x-t.left.x,o=t.right.y-t.left.y,a=e.left.x-t.left.x,s=e.left.y-t.left.y,n=(i?o*a-r*s:s*r-a*o)<0),!n;if(e.left==t.left)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.right.y:e.right.y>t.right.y:(i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.right.x-e.left.x,s=t.right.y-e.left.y,(i?o*a-r*s:s*r-a*o)<0);if(e.right==t.right)return e.left.x==e.right.x?e.left.y<e.right.y?e.left.y>t.left.y:e.right.y>t.left.y:(i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.left.x-e.left.x,s=t.left.y-e.left.y,(i?o*a-r*s:s*r-a*o)<0);if(e.left.x==e.right.x){if(t.left.x==t.right.x)return(e.left.y<e.right.y?e.right:e.left).y>(t.left.y<t.right.y?t.right:t.left).y;i=t.right.x<t.left.x,r=t.right.x-t.left.x,o=t.right.y-t.left.y,a=e.left.x-t.left.x,s=e.left.y-t.left.y;var l=i?o*a-r*s:s*r-a*o;return i=t.right.x<t.left.x,r=t.right.x-t.left.x,o=t.right.y-t.left.y,a=e.right.x-t.left.x,s=e.right.y-t.left.y,0<=l*(i?o*a-r*s:s*r-a*o)?0<=l:this.sweepx>=e.left.x}if(t.left.x==t.right.x){i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.left.x-e.left.x,s=t.left.y-e.left.y;var p=i?o*a-r*s:s*r-a*o;return i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.right.x-e.left.x,s=t.right.y-e.left.y,0<=p*(i?o*a-r*s:s*r-a*o)?p<0:this.sweepx<t.left.x}i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.left.x-e.left.x,s=t.left.y-e.left.y;var h=(i?o*a-r*s:s*r-a*o)<0;if(i=e.right.x<e.left.x,r=e.right.x-e.left.x,o=e.right.y-e.left.y,a=t.right.x-e.left.x,s=t.right.y-e.left.y,h==(i?o*a-r*s:s*r-a*o)<0)return h;i=t.right.x<t.left.x,r=t.right.x-t.left.x,o=t.right.y-t.left.y,a=e.left.x-t.left.x,s=e.left.y-t.left.y;var u=0<=(i?o*a-r*s:s*r-a*o);return i=t.right.x<t.left.x,r=t.right.x-t.left.x,o=t.right.y-t.left.y,a=e.right.x-t.left.x,s=e.right.y-t.left.y,u==0<=(i?o*a-r*s:s*r-a*o)?u:(this.sweepx-e.left.x)/(e.right.x-e.left.x)*(e.right.y-e.left.y)+e.left.y>(this.sweepx-t.left.x)/(t.right.x-t.left.x)*(t.right.y-t.left.y)+t.left.y},Lt.prototype.clear=function(){this.tree.clear()},Lt.prototype.add=function(e){e.node=this.tree.insert(e);var t=this.tree.successor_node(e.node),i=this.tree.predecessor_node(e.node);return null!=t&&(e.next=t.data,t.data.prev=e),null!=i&&(e.prev=i.data,i.data.next=e),e},Lt.prototype.remove=function(e){var t=this.tree.successor_node(e.node),i=this.tree.predecessor_node(e.node);null!=t&&(t.data.prev=e.prev),null!=i&&(i.data.next=e.next),this.tree.remove_node(e.node),e.node=null},Lt.prototype.intersect=function(e,t){if(null==e||null==t)return!1;if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return!1;var i=(t.left.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.left.y-e.left.y),n=(t.right.x-e.left.x)*(e.right.y-e.left.y)-(e.right.x-e.left.x)*(t.right.y-e.left.y);if(0<i*n)return!1;var r=(e.left.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.left.y-t.left.y),o=(e.right.x-t.left.x)*(t.right.y-t.left.y)-(t.right.x-t.left.x)*(e.right.y-t.left.y);return!(0<r*o)},Lt.prototype.intersection=function(e,t){if(null==e||null==t)return null;if(e.left==t.left||e.left==t.right||e.right==t.left||e.right==t.right)return null;var i,n;i=e.right.x-e.left.x,n=e.right.y-e.left.y;var r,o;r=t.right.x-t.left.x;var a=(o=t.right.y-t.left.y)*i-r*n;if(0==a)return null;a=1/a;var s,l,p=(o*(s=t.left.x-e.left.x)-r*(l=t.left.y-e.left.y))*a;if(p<0||1<p)return null;var h,u,c=(n*s-i*l)*a;if(c<0||1<c)return null;if(0==c||1==c||0==p||1==p)h=0==c?t.left:1==c?t.right:0==p?e.left:e.right;else{var d,_=.5*(e.left.x+i*p+t.left.x+r*c),y=.5*(e.left.y+n*p+t.left.y+o*c);null==Gt.zpp_pool?d=new Gt:(d=Gt.zpp_pool,Gt.zpp_pool=d.next,d.next=null),d.x=_,d.y=y,h=d}null==Bt.zpp_pool?u=new Bt:(u=Bt.zpp_pool,Bt.zpp_pool=u.next,u.next=null),u.vertex=h;var m=u;return m.type=0,m.segment=e,m.segment2=t,m},Lt.prototype.__class__=Lt;var Dt=zpp_nape.geom.ZPP_Simple=function(){};Dt.__name__=["zpp_nape","geom","ZPP_Simple"],Dt.decompose=function(e,t){null==Dt.sweep&&(Dt.sweep=new Lt,Dt.inthash=new _i),null==Dt.vertices&&(null==Wn.zpp_pool?Dt.vertices=new Wn:(Dt.vertices=Wn.zpp_pool,Wn.zpp_pool=Dt.vertices.next,Dt.vertices.next=null),Dt.vertices.lt=Gt.less_xy,Dt.vertices.swapped=Gt.swap_nodes),null==Dt.queue&&(null==qn.zpp_pool?Dt.queue=new qn:(Dt.queue=qn.zpp_pool,qn.zpp_pool=Dt.queue.next,Dt.queue.next=null),Dt.queue.lt=Bt.less_xy,Dt.queue.swapped=Bt.swap_nodes);var i,n=null,r=null;if(null!=e)for(var o=e;;){var a,s=o,l=s.x,p=s.y;null==Gt.zpp_pool?a=new Gt:(a=Gt.zpp_pool,Gt.zpp_pool=a.next,a.next=null),a.x=l,a.y=p;for(var h=a,u=Dt.vertices.parent;null!=u;)if(Dt.vertices.lt(h,u.data))u=u.prev;else{if(!Dt.vertices.lt(u.data,h))break;u=u.next}var c=u;if(null!=c){var d=h;d.links.clear(),d.node=null,d.forced=!1,d.next=Gt.zpp_pool,Gt.zpp_pool=d,h=c.data}else h.node=Dt.vertices.insert(h);if(null!=r){var _;null==Bt.zpp_pool?_=new Bt:(_=Bt.zpp_pool,Bt.zpp_pool=_.next,_.next=null),_.vertex=r;var y,m=_;null==Bt.zpp_pool?y=new Bt:(y=Bt.zpp_pool,Bt.zpp_pool=y.next,y.next=null),y.vertex=h;var f,x=y;Bt.less_xy(m,x)?(m.type=1,x.type=2,f=It.get(r,h)):(m.type=2,x.type=1,f=It.get(h,r)),m.segment=x.segment=f,Dt.queue.insert(m),Dt.queue.insert(x),r.links.insert(h),h.links.insert(r)}if(r=h,null==n&&(n=h),(o=o.next)==e)break}null==Bt.zpp_pool?i=new Bt:(i=Bt.zpp_pool,Bt.zpp_pool=i.next,i.next=null),i.vertex=r;var v,z=i;null==Bt.zpp_pool?v=new Bt:(v=Bt.zpp_pool,Bt.zpp_pool=v.next,v.next=null),v.vertex=n;var g,b=v;for(Bt.less_xy(z,b)?(z.type=1,b.type=2,g=It.get(r,n)):(z.type=2,b.type=1,g=It.get(n,r)),z.segment=b.segment=g,Dt.queue.insert(z),Dt.queue.insert(b),r.links.insert(n),n.links.insert(r),null==Dt.ints&&(null==qn.zpp_pool?Dt.ints=new qn:(Dt.ints=qn.zpp_pool,qn.zpp_pool=Dt.ints.next,Dt.ints.next=null),Dt.ints.lt=Bt.less_xy);!Dt.queue.empty();){var w=Dt.queue.pop_front();if(Dt.sweep.sweepx=w.vertex.x,1==w.type){var S=w.segment;if(Dt.sweep.add(S),null!=S.next&&null!=S&&!(S.next.id<S.id?Dt.inthash.has(S.next.id,S.id):Dt.inthash.has(S.id,S.next.id))){var C=Dt.sweep.intersection(S.next,S);if(null!=C)if(C.vertex.x>=Dt.sweep.sweepx){for(var M=Dt.queue.parent;null!=M;)if(Dt.queue.lt(C,M.data))M=M.prev;else{if(!Dt.queue.lt(M.data,C))break;M=M.next}if(null==M){for(var P=Dt.ints.parent;null!=P;)if(Dt.ints.lt(C,P.data))P=P.prev;else{if(!Dt.ints.lt(P.data,C))break;P=P.next}var k=P;if(null!=k){var T=C.vertex;T.links.clear(),T.node=null,T.forced=!1,T.next=Gt.zpp_pool,Gt.zpp_pool=T,C.vertex=k.data.vertex,k.data=C,Dt.queue.insert(C)}else Dt.queue.insert(C),Dt.ints.insert(C);if(S.next.id<S.id){var O,A=S.next.id,E=S.id;null==di.zpp_pool?O=new di:(O=di.zpp_pool,di.zpp_pool=O.next,O.next=null),O.id=A,O.di=E;var G=O;G.value=!0,Dt.inthash.add(G)}else{var I,B=S.id,L=S.next.id;null==di.zpp_pool?I=new di:(I=di.zpp_pool,di.zpp_pool=I.next,I.next=null),I.id=B,I.di=L;var D=I;D.value=!0,Dt.inthash.add(D)}}else{var R=C.vertex;R.links.clear(),R.node=null,R.forced=!1,R.next=Gt.zpp_pool,Gt.zpp_pool=R,C.vertex=null,C.segment=C.segment2=null,C.node=null,C.next=Bt.zpp_pool,Bt.zpp_pool=C}}else{var F=C.vertex;F.links.clear(),F.node=null,F.forced=!1,F.next=Gt.zpp_pool,Gt.zpp_pool=F,C.vertex=null,C.segment=C.segment2=null,C.node=null,C.next=Bt.zpp_pool,Bt.zpp_pool=C}}if(null!=S&&null!=S.prev&&!(S.id<S.prev.id?Dt.inthash.has(S.id,S.prev.id):Dt.inthash.has(S.prev.id,S.id))){var j=Dt.sweep.intersection(S,S.prev);if(null!=j)if(j.vertex.x>=Dt.sweep.sweepx){for(var N=Dt.queue.parent;null!=N;)if(Dt.queue.lt(j,N.data))N=N.prev;else{if(!Dt.queue.lt(N.data,j))break;N=N.next}if(null==N){for(var U=Dt.ints.parent;null!=U;)if(Dt.ints.lt(j,U.data))U=U.prev;else{if(!Dt.ints.lt(U.data,j))break;U=U.next}var V=U;if(null!=V){var H=j.vertex;H.links.clear(),H.node=null,H.forced=!1,H.next=Gt.zpp_pool,Gt.zpp_pool=H,j.vertex=V.data.vertex,V.data=j,Dt.queue.insert(j)}else Dt.queue.insert(j),Dt.ints.insert(j);if(S.id<S.prev.id){var W,X=S.id,q=S.prev.id;null==di.zpp_pool?W=new di:(W=di.zpp_pool,di.zpp_pool=W.next,W.next=null),W.id=X,W.di=q;var Y=W;Y.value=!0,Dt.inthash.add(Y)}else{var K,Z=S.prev.id,J=S.id;null==di.zpp_pool?K=new di:(K=di.zpp_pool,di.zpp_pool=K.next,K.next=null),K.id=Z,K.di=J;var Q=K;Q.value=!0,Dt.inthash.add(Q)}}else{var $=j.vertex;$.links.clear(),$.node=null,$.forced=!1,$.next=Gt.zpp_pool,Gt.zpp_pool=$,j.vertex=null,j.segment=j.segment2=null,j.node=null,j.next=Bt.zpp_pool,Bt.zpp_pool=j}}else{var ee=j.vertex;ee.links.clear(),ee.node=null,ee.forced=!1,ee.next=Gt.zpp_pool,Gt.zpp_pool=ee,j.vertex=null,j.segment=j.segment2=null,j.node=null,j.next=Bt.zpp_pool,Bt.zpp_pool=j}}}else if(2==w.type){var te=w.segment;if(null!=te.node){var ie=te.next,ne=te.prev;if(Dt.sweep.remove(te),te.left=te.right=null,te.prev=null,te.node=null,te.vertices.clear(),te.next=It.zpp_pool,It.zpp_pool=te,null!=ie&&null!=ne&&!(ie.id<ne.id?Dt.inthash.has(ie.id,ne.id):Dt.inthash.has(ne.id,ie.id))){var re=Dt.sweep.intersection(ie,ne);if(null!=re)if(re.vertex.x>=Dt.sweep.sweepx){for(var oe=Dt.queue.parent;null!=oe;)if(Dt.queue.lt(re,oe.data))oe=oe.prev;else{if(!Dt.queue.lt(oe.data,re))break;oe=oe.next}if(null==oe){for(var ae=Dt.ints.parent;null!=ae;)if(Dt.ints.lt(re,ae.data))ae=ae.prev;else{if(!Dt.ints.lt(ae.data,re))break;ae=ae.next}var se=ae;if(null!=se){var le=re.vertex;le.links.clear(),le.node=null,le.forced=!1,le.next=Gt.zpp_pool,Gt.zpp_pool=le,re.vertex=se.data.vertex,se.data=re,Dt.queue.insert(re)}else Dt.queue.insert(re),Dt.ints.insert(re);if(ie.id<ne.id){var pe,he=ie.id,ue=ne.id;null==di.zpp_pool?pe=new di:(pe=di.zpp_pool,di.zpp_pool=pe.next,pe.next=null),pe.id=he,pe.di=ue;var ce=pe;ce.value=!0,Dt.inthash.add(ce)}else{var de,_e=ne.id,ye=ie.id;null==di.zpp_pool?de=new di:(de=di.zpp_pool,di.zpp_pool=de.next,de.next=null),de.id=_e,de.di=ye;var me=de;me.value=!0,Dt.inthash.add(me)}}else{var fe=re.vertex;fe.links.clear(),fe.node=null,fe.forced=!1,fe.next=Gt.zpp_pool,Gt.zpp_pool=fe,re.vertex=null,re.segment=re.segment2=null,re.node=null,re.next=Bt.zpp_pool,Bt.zpp_pool=re}}else{var xe=re.vertex;xe.links.clear(),xe.node=null,xe.forced=!1,xe.next=Gt.zpp_pool,Gt.zpp_pool=xe,re.vertex=null,re.segment=re.segment2=null,re.node=null,re.next=Bt.zpp_pool,Bt.zpp_pool=re}}}}else{var ve=w.vertex,ze=null==ve.node,ge=w.segment,be=w.segment2;if(be.next!=ge){var we=ge;ge=be,be=we}for(var Se=ge.vertices.parent;null!=Se;)if(ge.vertices.lt(ve,Se.data))Se=Se.prev;else{if(!ge.vertices.lt(Se.data,ve))break;Se=Se.next}for(var Ce=null==Se,Me=be.vertices.parent;null!=Me;)if(be.vertices.lt(ve,Me.data))Me=Me.prev;else{if(!be.vertices.lt(Me.data,ve))break;Me=Me.next}var Pe=null==Me;if(Ce){var ke=ge.vertices.insert(ve),Te=ve==ge.left?ve:ge.vertices.predecessor_node(ke).data,Oe=ve==ge.right?ve:ge.vertices.successor_node(ke).data;Te.links.remove(Oe),ve!=Te&&Te.links.insert(ve),Oe.links.remove(Te),ve!=Oe&&Oe.links.insert(ve),ve!=Te&&ve.links.insert(Te),ve!=Oe&&ve.links.insert(Oe)}if(Pe){var Ae=be.vertices.insert(ve),Ee=ve==be.left?ve:be.vertices.predecessor_node(Ae).data,Ge=ve==be.right?ve:be.vertices.successor_node(Ae).data;Ee.links.remove(Ge),ve!=Ee&&Ee.links.insert(ve),Ge.links.remove(Ee),ve!=Ge&&Ge.links.insert(ve),ve!=Ee&&ve.links.insert(Ee),ve!=Ge&&ve.links.insert(Ge)}if(ze&&(ve.node=Dt.vertices.insert(ve)),ve.forced=!0,ze){var Ie=ge.node,Be=be.node;Ie.data=be,(Be.data=ge).node=Be,be.node=Ie,be.next=ge.next,ge.next=be,ge.prev=be.prev,null!=(be.prev=ge).prev&&(ge.prev.next=ge),null!=be.next&&(be.next.prev=be)}if(null!=be.next&&null!=be&&!(be.next.id<be.id?Dt.inthash.has(be.next.id,be.id):Dt.inthash.has(be.id,be.next.id))){var Le=Dt.sweep.intersection(be.next,be);if(null!=Le)if(Le.vertex.x>=Dt.sweep.sweepx){for(var De=Dt.queue.parent;null!=De;)if(Dt.queue.lt(Le,De.data))De=De.prev;else{if(!Dt.queue.lt(De.data,Le))break;De=De.next}if(null==De){for(var Re=Dt.ints.parent;null!=Re;)if(Dt.ints.lt(Le,Re.data))Re=Re.prev;else{if(!Dt.ints.lt(Re.data,Le))break;Re=Re.next}var Fe=Re;if(null!=Fe){var je=Le.vertex;je.links.clear(),je.node=null,je.forced=!1,je.next=Gt.zpp_pool,Gt.zpp_pool=je,Le.vertex=Fe.data.vertex,Fe.data=Le,Dt.queue.insert(Le)}else Dt.queue.insert(Le),Dt.ints.insert(Le);if(be.next.id<be.id){var Ne,Ue=be.next.id,Ve=be.id;null==di.zpp_pool?Ne=new di:(Ne=di.zpp_pool,di.zpp_pool=Ne.next,Ne.next=null),Ne.id=Ue,Ne.di=Ve;var He=Ne;He.value=!0,Dt.inthash.add(He)}else{var We,Xe=be.id,qe=be.next.id;null==di.zpp_pool?We=new di:(We=di.zpp_pool,di.zpp_pool=We.next,We.next=null),We.id=Xe,We.di=qe;var Ye=We;Ye.value=!0,Dt.inthash.add(Ye)}}else{var Ke=Le.vertex;Ke.links.clear(),Ke.node=null,Ke.forced=!1,Ke.next=Gt.zpp_pool,Gt.zpp_pool=Ke,Le.vertex=null,Le.segment=Le.segment2=null,Le.node=null,Le.next=Bt.zpp_pool,Bt.zpp_pool=Le}}else{var Ze=Le.vertex;Ze.links.clear(),Ze.node=null,Ze.forced=!1,Ze.next=Gt.zpp_pool,Gt.zpp_pool=Ze,Le.vertex=null,Le.segment=Le.segment2=null,Le.node=null,Le.next=Bt.zpp_pool,Bt.zpp_pool=Le}}if(null!=ge&&null!=ge.prev&&!(ge.id<ge.prev.id?Dt.inthash.has(ge.id,ge.prev.id):Dt.inthash.has(ge.prev.id,ge.id))){var Je=Dt.sweep.intersection(ge,ge.prev);if(null!=Je)if(Je.vertex.x>=Dt.sweep.sweepx){for(var Qe=Dt.queue.parent;null!=Qe;)if(Dt.queue.lt(Je,Qe.data))Qe=Qe.prev;else{if(!Dt.queue.lt(Qe.data,Je))break;Qe=Qe.next}if(null==Qe){for(var $e=Dt.ints.parent;null!=$e;)if(Dt.ints.lt(Je,$e.data))$e=$e.prev;else{if(!Dt.ints.lt($e.data,Je))break;$e=$e.next}var et=$e;if(null!=et){var tt=Je.vertex;tt.links.clear(),tt.node=null,tt.forced=!1,tt.next=Gt.zpp_pool,Gt.zpp_pool=tt,Je.vertex=et.data.vertex,et.data=Je,Dt.queue.insert(Je)}else Dt.queue.insert(Je),Dt.ints.insert(Je);if(ge.id<ge.prev.id){var it,nt=ge.id,rt=ge.prev.id;null==di.zpp_pool?it=new di:(it=di.zpp_pool,di.zpp_pool=it.next,it.next=null),it.id=nt,it.di=rt;var ot=it;ot.value=!0,Dt.inthash.add(ot)}else{var at,st=ge.prev.id,lt=ge.id;null==di.zpp_pool?at=new di:(at=di.zpp_pool,di.zpp_pool=at.next,at.next=null),at.id=st,at.di=lt;var pt=at;pt.value=!0,Dt.inthash.add(pt)}}else{var ht=Je.vertex;ht.links.clear(),ht.node=null,ht.forced=!1,ht.next=Gt.zpp_pool,Gt.zpp_pool=ht,Je.vertex=null,Je.segment=Je.segment2=null,Je.node=null,Je.next=Bt.zpp_pool,Bt.zpp_pool=Je}}else{var ut=Je.vertex;ut.links.clear(),ut.node=null,ut.forced=!1,ut.next=Gt.zpp_pool,Gt.zpp_pool=ut,Je.vertex=null,Je.segment=Je.segment2=null,Je.node=null,Je.next=Bt.zpp_pool,Bt.zpp_pool=Je}}Dt.ints.remove(w)}w.vertex=null,w.segment=w.segment2=null,w.node=null,w.next=Bt.zpp_pool,Bt.zpp_pool=w}for(var ct=0,dt=Dt.inthash.table.length;ct<dt;){var _t=ct++,yt=Dt.inthash.table[_t];if(null!=yt){for(;null!=yt;){var mt=yt.hnext;yt.hnext=null;var ft=yt;ft.next=di.zpp_pool,di.zpp_pool=ft,yt=mt}Dt.inthash.table[_t]=null}}for(null==t&&(t=new Si);!Dt.vertices.empty();)Dt.clip_polygon(Dt.vertices,t);return t},Dt.clip_polygon=function(e,t){var i,n,r=null,o=e.first(),a=o,s=o.links.parent,l=null==s.prev?s.next:s.prev,p=s.data,h=l.data;i=o.x-p.x,n=o.y-p.y;var u;u=h.x-o.x,(h.y-o.y)*i-u*n<0&&(h=p);var c,d=o.x,_=o.y;null==dr.zpp_pool?c=new dr:(c=dr.zpp_pool,dr.zpp_pool=c.next,c.next=null),c.forced=!1,c.x=d,c.y=_;var y=c;for(null==r?r=y.prev=y.next=y:(y.prev=r,y.next=r.next,r.next.prev=y,r.next=y),(r=y).forced=o.forced;;){if(o.links.remove(h),h.links.remove(o),h==a){if(o.links.empty()){e.remove(o);var m=o;m.links.clear(),m.node=null,m.forced=!1,m.next=Gt.zpp_pool,Gt.zpp_pool=m}break}var f,x=h.x,v=h.y;null==dr.zpp_pool?f=new dr:(f=dr.zpp_pool,dr.zpp_pool=f.next,f.next=null),f.forced=!1,f.x=x,f.y=v;var z=f;if(null==r?r=z.prev=z.next=z:(z.prev=r,z.next=r.next,r.next.prev=z,r.next=z),(r=z).forced=h.forced,h.links.singular()){if(o.links.empty()){e.remove(o);var g=o;g.links.clear(),g.node=null,g.forced=!1,g.next=Gt.zpp_pool,Gt.zpp_pool=g}h=(o=h).links.parent.data}else{var b=null,w=0;if(!h.links.empty()){for(var S=h.links.parent;null!=S.prev;)S=S.prev;for(;null!=S;){var C=S.data;if(null==b){b=C;var M,P;M=h.x-o.x,P=h.y-o.y;var k;k=C.x-h.x,w=(C.y-h.y)*M-k*P}else{var T,O;T=h.x-o.x,O=h.y-o.y;var A;A=C.x-h.x;var E=(C.y-h.y)*T-A*O;if(0<E&&w<=0)b=C,w=E;else if(0<=w*E){var G,I;G=h.x-C.x,I=h.y-C.y;var B;B=b.x-h.x,0<(b.y-h.y)*G-B*I&&(b=C,w=E)}}if(null!=S.next)for(S=S.next;null!=S.prev;)S=S.prev;else{for(;null!=S.parent&&S==S.parent.next;)S=S.parent;S=S.parent}}}if(o.links.empty()){e.remove(o);var L=o;L.links.clear(),L.node=null,L.forced=!1,L.next=Gt.zpp_pool,Gt.zpp_pool=L}o=h,h=b}}e.remove(a),a.links.clear(),a.node=null,a.forced=!1,a.next=Gt.zpp_pool,Gt.zpp_pool=a,t.add(r)},Dt.isSimple=function(e){null==Dt.sweep&&(Dt.sweep=new Lt,Dt.inthash=new _i);var t=Dt.list_vertices;if(null==t&&(t=Dt.list_vertices=new Ci),null!=e)for(var i=e;;){var n,r=i,o=r.x,a=r.y;if(null==Gt.zpp_pool?n=new Gt:(n=Gt.zpp_pool,Gt.zpp_pool=n.next,n.next=null),n.x=o,n.y=a,t.add(n),(i=i.next)==e)break}var s=Dt.list_queue;null==s&&(s=Dt.list_queue=new Mi);var l=t.head,p=l.elt;for(l=l.next;null!=l;){var h,u=l.elt;null==Bt.zpp_pool?h=new Bt:(h=Bt.zpp_pool,Bt.zpp_pool=h.next,h.next=null),h.vertex=p;var c,d=s.add(h);null==Bt.zpp_pool?c=new Bt:(c=Bt.zpp_pool,Bt.zpp_pool=c.next,c.next=null),c.vertex=u;var _,y=s.add(c);Bt.less_xy(d,y)?(d.type=1,y.type=2,_=It.get(p,u)):(d.type=2,y.type=1,_=It.get(u,p)),d.segment=y.segment=_,p=u,l=l.next}var m,f=t.head.elt;null==Bt.zpp_pool?m=new Bt:(m=Bt.zpp_pool,Bt.zpp_pool=m.next,m.next=null),m.vertex=p;var x,v=s.add(m);null==Bt.zpp_pool?x=new Bt:(x=Bt.zpp_pool,Bt.zpp_pool=x.next,x.next=null),x.vertex=f;var z,g=s.add(x);Bt.less_xy(v,g)?(v.type=1,g.type=2,z=It.get(p,f)):(v.type=2,g.type=1,z=It.get(f,p)),v.segment=g.segment=z;var b=s;if(null!=b.head&&null!=b.head.next){for(var w,S,C,M=b.head,P=null,k=null,T=null,O=null,A=1;;){for(w=0,k=M,P=M=null;null!=k;){for(++w,T=k,S=0,C=A;null!=T&&S<A;)++S,T=T.next;for(;0<S||0<C&&null!=T;)0==S?(T=(O=T).next,--C):0==C||null==T?(k=(O=k).next,--S):Bt.less_xy(k.elt,T.elt)?(k=(O=k).next,--S):(T=(O=T).next,--C),null!=P?P.next=O:M=O,P=O;k=T}if(P.next=null,A<<=1,!(1<w))break}b.head=M,b.modified=!0,b.pushmod=!0}for(var E=!0;null!=s.head;){var G=s.pop_unsafe(),I=G.segment;if(1==G.type){if(Dt.sweep.add(I),Dt.sweep.intersect(I,I.next)||Dt.sweep.intersect(I,I.prev)){E=!1;break}}else if(2==G.type){if(Dt.sweep.intersect(I.prev,I.next)){E=!1;break}Dt.sweep.remove(I),I.left=I.right=null,I.prev=null,I.node=null,I.vertices.clear(),I.next=It.zpp_pool,It.zpp_pool=I}G.vertex=null,G.segment=G.segment2=null,G.node=null,G.next=Bt.zpp_pool,Bt.zpp_pool=G}for(;null!=s.head;){var B=s.pop_unsafe();if(2==B.type){var L=B.segment;L.left=L.right=null,L.prev=null,L.node=null,L.vertices.clear(),L.next=It.zpp_pool,It.zpp_pool=L}B.vertex=null,B.segment=B.segment2=null,B.node=null,B.next=Bt.zpp_pool,Bt.zpp_pool=B}for(Dt.sweep.clear();null!=t.head;){var D=t.pop_unsafe();D.links.clear(),D.node=null,D.forced=!1,D.next=Gt.zpp_pool,Gt.zpp_pool=D}return E},Dt.prototype.__class__=Dt;var Rt=zpp_nape.geom.ZPP_SimplifyV=function(){this.forced=!1,this.flag=!1,this.prev=null,this.next=null,this.y=0,this.x=0};Rt.__name__=["zpp_nape","geom","ZPP_SimplifyV"],Rt.get=function(e){var t;return null==Rt.zpp_pool?t=new Rt:(t=Rt.zpp_pool,Rt.zpp_pool=t.next,t.next=null),t.x=e.x,t.y=e.y,t.flag=!1,t},Rt.prototype.x=null,Rt.prototype.y=null,Rt.prototype.next=null,Rt.prototype.prev=null,Rt.prototype.flag=null,Rt.prototype.forced=null,Rt.prototype.free=function(){},Rt.prototype.alloc=function(){},Rt.prototype.__class__=Rt;var Ft=zpp_nape.geom.ZPP_SimplifyP=function(){this.max=null,this.min=null,this.next=null};Ft.__name__=["zpp_nape","geom","ZPP_SimplifyP"],Ft.get=function(e,t){var i;return null==Ft.zpp_pool?i=new Ft:(i=Ft.zpp_pool,Ft.zpp_pool=i.next,i.next=null),i.min=e,i.max=t,i},Ft.prototype.next=null,Ft.prototype.min=null,Ft.prototype.max=null,Ft.prototype.free=function(){this.min=this.max=null},Ft.prototype.alloc=function(){},Ft.prototype.__class__=Ft;var jt=zpp_nape.geom.ZPP_Simplify=function(){};jt.__name__=["zpp_nape","geom","ZPP_Simplify"],jt.lessval=function(e,t){return e.x-t.x+(e.y-t.y)},jt.less=function(e,t){return e.x-t.x+(e.y-t.y)<0},jt.distance=function(e,t,i){var n,r;n=i.x-t.x,r=i.y-t.y;var o=0,a=0;if(o=e.x-t.x,a=e.y-t.y,n*n+r*r==0)return o*o+a*a;var s=(o*n+a*r)/(n*n+r*r);if(s<=0)return o*o+a*a;if(1<=s){var l,p,h=e.x,u=e.y;return(l=h-i.x)*l+(p=u-i.y)*p}return(o-=n*s)*o+(a-=r*s)*a},jt.simplify=function(e,t){var i=null,n=null,r=null;t*=t,null==jt.stack&&(jt.stack=new bi);for(var o,a=null,s=null,l=e;;){var p;null==Rt.zpp_pool?p=new Rt:(p=Rt.zpp_pool,Rt.zpp_pool=p.next,p.next=null),p.x=l.x,p.y=l.y,p.flag=!1;var h=p;if(h.forced=l.forced,h.forced){var u;if(h.flag=!0,null!=a)null==Ft.zpp_pool?u=new Ft:(u=Ft.zpp_pool,Ft.zpp_pool=u.next,u.next=null),u.min=a,u.max=h,jt.stack.add(u);else s=h;a=h}if(null==i?i=h.prev=h.next=h:(h.prev=i,h.next=i.next,i.next.prev=h,i.next=h),i=h,null==n?r=n=h:(h.x-n.x+(h.y-n.y)<0&&(n=h),r.x-h.x+(r.y-h.y)<0&&(r=h)),(l=l.next)==e)break}if(null==jt.stack.head)if(null==s){var c,d;n.flag=r.flag=!0,null==Ft.zpp_pool?c=new Ft:(c=Ft.zpp_pool,Ft.zpp_pool=c.next,c.next=null),c.min=n,c.max=r,jt.stack.add(c),null==Ft.zpp_pool?d=new Ft:(d=Ft.zpp_pool,Ft.zpp_pool=d.next,d.next=null),d.min=r,d.max=n,jt.stack.add(d)}else{var _=n.x-s.x+(n.y-s.y);_<0&&(_=-_);var y,m,f,x,v=r.x-s.x+(r.y-s.y);if(v<0&&(v=-v),v<_)n.flag=s.flag=!0,null==Ft.zpp_pool?y=new Ft:(y=Ft.zpp_pool,Ft.zpp_pool=y.next,y.next=null),y.min=n,y.max=s,jt.stack.add(y),null==Ft.zpp_pool?m=new Ft:(m=Ft.zpp_pool,Ft.zpp_pool=m.next,m.next=null),m.min=s,m.max=n,jt.stack.add(m);else r.flag=s.flag=!0,null==Ft.zpp_pool?f=new Ft:(f=Ft.zpp_pool,Ft.zpp_pool=f.next,f.next=null),f.min=r,f.max=s,jt.stack.add(f),null==Ft.zpp_pool?x=new Ft:(x=Ft.zpp_pool,Ft.zpp_pool=x.next,x.next=null),x.min=s,x.max=r,jt.stack.add(x)}else null==Ft.zpp_pool?o=new Ft:(o=Ft.zpp_pool,Ft.zpp_pool=o.next,o.next=null),o.min=a,o.max=s,jt.stack.add(o);for(;null!=jt.stack.head;){var z=jt.stack.pop_unsafe(),g=z.min,b=z.max;z.min=z.max=null,z.next=Ft.zpp_pool,Ft.zpp_pool=z;for(var w,S,C=t,M=null,P=g.next;P!=b;){var k=jt.distance(P,g,b);C<k&&(C=k,M=P),P=P.next}if(null!=M)M.flag=!0,null==Ft.zpp_pool?w=new Ft:(w=Ft.zpp_pool,Ft.zpp_pool=w.next,w.next=null),w.min=g,w.max=M,jt.stack.add(w),null==Ft.zpp_pool?S=new Ft:(S=Ft.zpp_pool,Ft.zpp_pool=S.next,S.next=null),S.min=M,S.max=b,jt.stack.add(S)}for(var T=null;null!=i;){if(i.flag){var O,A=i.x,E=i.y;null==dr.zpp_pool?O=new dr:(O=dr.zpp_pool,dr.zpp_pool=O.next,O.next=null),O.forced=!1,O.x=A,O.y=E;var G=O;null==T?T=G.prev=G.next=G:(G.prev=T,G.next=T.next,T.next.prev=G,T.next=G),(T=G).forced=i.forced}if(null!=i&&i.prev==i){i.next=i.prev=null;var I=i;I.next=Rt.zpp_pool,Rt.zpp_pool=I,i=i=null}else{var B=i.next;i.prev.next=i.next,i.next.prev=i.prev,i.next=i.prev=null;var L=i;L.next=Rt.zpp_pool,Rt.zpp_pool=L,i=null,i=B}}return T},jt.prototype.__class__=jt;var Vt=zpp_nape.geom.ZPP_ToiEvent=function(){this.kinematic=!1,this.failed=!1,this.slipped=!1,this.axis=null,this.c2=null,this.c1=null,this.frozen2=!1,this.frozen1=!1,this.arbiter=null,this.s2=null,this.s1=null,this.toi=0,this.next=null,this.c1=new el,this.c2=new el,this.axis=new el};Vt.__name__=["zpp_nape","geom","ZPP_ToiEvent"],Vt.prototype.next=null,Vt.prototype.alloc=function(){this.failed=!1,this.s1=this.s2=null,this.arbiter=null},Vt.prototype.free=function(){},Vt.prototype.toi=null,Vt.prototype.s1=null,Vt.prototype.s2=null,Vt.prototype.arbiter=null,Vt.prototype.frozen1=null,Vt.prototype.frozen2=null,Vt.prototype.c1=null,Vt.prototype.c2=null,Vt.prototype.axis=null,Vt.prototype.slipped=null,Vt.prototype.failed=null,Vt.prototype.kinematic=null,Vt.prototype.__class__=Vt;var Ht=zpp_nape.geom.ZPP_SweepDistance=function(){};Ht.__name__=["zpp_nape","geom","ZPP_SweepDistance"],Ht.dynamicSweep=function(e,t,i,n,r){null==r&&(r=!1);var o,a,s=e.s1,l=e.s2,p=s.body,h=l.body;o=h.velx-p.velx,a=h.vely-p.vely;var u=p.angvel;u<0&&(u=-u);var c=h.angvel;c<0&&(c=-c);var d=s.sweepCoef*u+l.sweepCoef*c;if(!r&&!e.kinematic&&o*o+a*a<Qs.dynamicSweepLinearThreshold*Qs.dynamicSweepLinearThreshold&&d<Qs.dynamicSweepAngularThreshold)return e.toi=-1,void(e.failed=!0);for(var _=e.c1,y=e.c2,m=e.axis,f=i,x=0;;){var v=f*t,z=v-p.sweepTime;if(0!=z&&(p.sweepTime=v,p.posx+=p.velx*z,p.posy+=p.vely*z,0!=p.angvel)){var g=p.sweep_angvel*z;if(p.rot+=g,1e-4<g*g)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var b=g*g,w=1-.5*b,S=1-b*b/8,C=(w*p.axisx+g*p.axisy)*S;p.axisy=(w*p.axisy-g*p.axisx)*S,p.axisx=C}}if(0==s.type)s.worldCOMx=p.posx+(p.axisy*s.localCOMx-p.axisx*s.localCOMy),s.worldCOMy=p.posy+(s.localCOMx*p.axisx+s.localCOMy*p.axisy);else{for(var M=s.polygon,P=M.lverts.next,k=M.gverts.next;null!=k;){var T=k,O=P;P=P.next,T.x=p.posx+(p.axisy*O.x-p.axisx*O.y),T.y=p.posy+(O.x*p.axisx+O.y*p.axisy),k=k.next}var A=M.edges.head,E=M.gverts.next,G=E;for(E=E.next;null!=E;){var I=E,B=A.elt;A=A.next,B.gnormx=p.axisy*B.lnormx-p.axisx*B.lnormy,B.gnormy=B.lnormx*p.axisx+B.lnormy*p.axisy,B.gprojection=p.posx*B.gnormx+p.posy*B.gnormy+B.lprojection,B.tp0=G.y*B.gnormx-G.x*B.gnormy,B.tp1=I.y*B.gnormx-I.x*B.gnormy,G=I,E=E.next}var L=M.gverts.next,D=A.elt;D.gnormx=p.axisy*D.lnormx-p.axisx*D.lnormy,D.gnormy=D.lnormx*p.axisx+D.lnormy*p.axisy,D.gprojection=p.posx*D.gnormx+p.posy*D.gnormy+D.lprojection,D.tp0=G.y*D.gnormx-G.x*D.gnormy,D.tp1=L.y*D.gnormx-L.x*D.gnormy}var R=f*t,F=R-h.sweepTime;if(0!=F&&(h.sweepTime=R,h.posx+=h.velx*F,h.posy+=h.vely*F,0!=h.angvel)){var j=h.sweep_angvel*F;if(h.rot+=j,1e-4<j*j)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var N=j*j,U=1-.5*N,V=1-N*N/8,H=(U*h.axisx+j*h.axisy)*V;h.axisy=(U*h.axisy-j*h.axisx)*V,h.axisx=H}}if(0==l.type)l.worldCOMx=h.posx+(h.axisy*l.localCOMx-h.axisx*l.localCOMy),l.worldCOMy=h.posy+(l.localCOMx*h.axisx+l.localCOMy*h.axisy);else{for(var W=l.polygon,X=W.lverts.next,q=W.gverts.next;null!=q;){var Y=q,K=X;X=X.next,Y.x=h.posx+(h.axisy*K.x-h.axisx*K.y),Y.y=h.posy+(K.x*h.axisx+K.y*h.axisy),q=q.next}var Z=W.edges.head,J=W.gverts.next,Q=J;for(J=J.next;null!=J;){var $=J,ee=Z.elt;Z=Z.next,ee.gnormx=h.axisy*ee.lnormx-h.axisx*ee.lnormy,ee.gnormy=ee.lnormx*h.axisx+ee.lnormy*h.axisy,ee.gprojection=h.posx*ee.gnormx+h.posy*ee.gnormy+ee.lprojection,ee.tp0=Q.y*ee.gnormx-Q.x*ee.gnormy,ee.tp1=$.y*ee.gnormx-$.x*ee.gnormy,Q=$,J=J.next}var te=W.gverts.next,ie=Z.elt;ie.gnormx=h.axisy*ie.lnormx-h.axisx*ie.lnormy,ie.gnormy=ie.lnormx*h.axisx+ie.lnormy*h.axisy,ie.gprojection=h.posx*ie.gnormx+h.posy*ie.gnormy+ie.lprojection,ie.tp0=Q.y*ie.gnormx-Q.x*ie.gnormy,ie.tp1=te.y*ie.gnormx-te.x*ie.gnormy}var ne,re=s,oe=l,ae=_,se=y;if(0==s.type&&0==l.type){var le,pe=s.circle,he=l.circle,ue=0,ce=0;ue=he.worldCOMx-pe.worldCOMx,ce=he.worldCOMy-pe.worldCOMy;var de=Math.sqrt(ue*ue+ce*ce);if((le=de-(pe.radius+he.radius))<1e100){if(0==de)ue=1,ce=0;else{var _e=1/de;ue*=_e,ce*=_e}var ye=pe.radius;_.x=pe.worldCOMx+ue*ye,_.y=pe.worldCOMy+ce*ye;var me=-he.radius;y.x=he.worldCOMx+ue*me,y.y=he.worldCOMy+ce*me,m.x=ue,m.y=ce}ne=le}else{var fe=!1;if(0==s.type&&1==l.type)re=l,oe=s,ae=y,se=_,fe=!0;if(1==re.type&&0==oe.type){for(var xe=re.polygon,ve=oe.circle,ze=-1e100,ge=null,be=xe.edges.head;null!=be;){var we=be.elt,Se=we.gnormx*ve.worldCOMx+we.gnormy*ve.worldCOMy-we.gprojection-ve.radius;if(1e100<Se){ze=Se;break}0<Se?ze<Se&&(ze=Se,ge=we):ze<0&&ze<Se&&(ze=Se,ge=we),be=be.next}if(ze<1e100){var Ce=ge.gp0,Me=ge.gp1,Pe=ve.worldCOMy*ge.gnormx-ve.worldCOMx*ge.gnormy;if(Pe<=Ce.y*ge.gnormx-Ce.x*ge.gnormy){var ke=0,Te=0;ke=ve.worldCOMx-Ce.x,Te=ve.worldCOMy-Ce.y;var Oe=Math.sqrt(ke*ke+Te*Te);if((ze=Oe-ve.radius)<1e100){if(0==Oe)ke=1,Te=0;else{var Ae=1/Oe;ke*=Ae,Te*=Ae}ae.x=Ce.x+0*ke,ae.y=Ce.y+0*Te;var Ee=-ve.radius;se.x=ve.worldCOMx+ke*Ee,se.y=ve.worldCOMy+Te*Ee,m.x=ke,m.y=Te}}else if(Pe>=Me.y*ge.gnormx-Me.x*ge.gnormy){var Ge=0,Ie=0;Ge=ve.worldCOMx-Me.x,Ie=ve.worldCOMy-Me.y;var Be=Math.sqrt(Ge*Ge+Ie*Ie);if((ze=Be-ve.radius)<1e100){if(0==Be)Ge=1,Ie=0;else{var Le=1/Be;Ge*=Le,Ie*=Le}ae.x=Me.x+0*Ge,ae.y=Me.y+0*Ie;var De=-ve.radius;se.x=ve.worldCOMx+Ge*De,se.y=ve.worldCOMy+Ie*De,m.x=Ge,m.y=Ie}}else{var Re=-ve.radius;se.x=ve.worldCOMx+ge.gnormx*Re,se.y=ve.worldCOMy+ge.gnormy*Re;var Fe=-ze;ae.x=se.x+ge.gnormx*Fe,ae.y=se.y+ge.gnormy*Fe,m.x=ge.gnormx,m.y=ge.gnormy}}fe&&(m.x=-m.x,m.y=-m.y),ne=ze}else{for(var je=re.polygon,Ne=oe.polygon,Ue=-1e100,Ve=null,He=null,We=0,Xe=je.edges.head;null!=Xe;){for(var qe=Xe.elt,Ye=1e100,Ke=Ne.gverts.next;null!=Ke;){var Ze=Ke,Je=qe.gnormx*Ze.x+qe.gnormy*Ze.y;Je<Ye&&(Ye=Je),Ke=Ke.next}if(1e100<(Ye-=qe.gprojection)){Ue=Ye;break}0<Ye?Ue<Ye&&(Ue=Ye,Ve=qe,We=1):Ue<0&&Ue<Ye&&(Ue=Ye,Ve=qe,We=1),Xe=Xe.next}if(Ue<1e100){for(var Qe=Ne.edges.head;null!=Qe;){for(var $e=Qe.elt,et=1e100,tt=je.gverts.next;null!=tt;){var it=tt,nt=$e.gnormx*it.x+$e.gnormy*it.y;nt<et&&(et=nt),tt=tt.next}if(1e100<(et-=$e.gprojection)){Ue=et;break}0<et?Ue<et&&(Ue=et,He=$e,We=2):Ue<0&&Ue<et&&(Ue=et,He=$e,We=2),Qe=Qe.next}if(Ue<1e100){var rt,ot;if(1==We)rt=Ne,ot=Ve;else{rt=je,ot=He;var at=ae;ae=se,se=at,fe=!fe}for(var st=null,lt=1e100,pt=rt.edges.head;null!=pt;){var ht=pt.elt,ut=ot.gnormx*ht.gnormx+ot.gnormy*ht.gnormy;ut<lt&&(lt=ut,st=ht),pt=pt.next}if(fe?(m.x=-ot.gnormx,m.y=-ot.gnormy):(m.x=ot.gnormx,m.y=ot.gnormy),0<=Ue){var ct,dt,_t,yt,mt=ot.gp0,ft=ot.gp1,xt=st.gp0,vt=st.gp1,zt=1/((ct=ft.x-mt.x)*ct+(dt=ft.y-mt.y)*dt),gt=1/((_t=vt.x-xt.x)*_t+(yt=vt.y-xt.y)*yt),bt=-(ct*(mt.x-xt.x)+dt*(mt.y-xt.y))*zt,wt=-(ct*(mt.x-vt.x)+dt*(mt.y-vt.y))*zt,St=-(_t*(xt.x-mt.x)+yt*(xt.y-mt.y))*gt,Ct=-(_t*(xt.x-ft.x)+yt*(xt.y-ft.y))*gt;bt<0?bt=0:1<bt&&(bt=1),wt<0?wt=0:1<wt&&(wt=1),St<0?St=0:1<St&&(St=1),Ct<0?Ct=0:1<Ct&&(Ct=1);var Mt,Pt,kt=bt;Mt=mt.x+ct*kt,Pt=mt.y+dt*kt;var Tt,Ot,At=wt;Tt=mt.x+ct*At,Ot=mt.y+dt*At;var Et,Gt,It=St;Et=xt.x+_t*It,Gt=xt.y+yt*It;var Bt,Lt,Dt=Ct;Bt=xt.x+_t*Dt,Lt=xt.y+yt*Dt;var Rt,Ft,jt,Nt,Ut,Vt,Ht,Wt,Xt=(Rt=Mt-xt.x)*Rt+(Ft=Pt-xt.y)*Ft,qt=(jt=Tt-vt.x)*jt+(Nt=Ot-vt.y)*Nt,Yt=(Ut=Et-mt.x)*Ut+(Vt=Gt-mt.y)*Vt,Kt=(Ht=Bt-ft.x)*Ht+(Wt=Lt-ft.y)*Wt,Zt=0,Jt=0,Qt=null;Xt<qt?(Zt=Mt,Jt=Pt,Qt=xt):(Zt=Tt,Jt=Ot,Qt=vt,Xt=qt);var $t=0,ei=0,ti=null;if(Yt<Kt?($t=Et,ei=Gt,ti=mt):($t=Bt,ei=Lt,ti=ft,Yt=Kt),Xt<Yt?(ae.x=Zt,ae.y=Jt,se.x=Qt.x,se.y=Qt.y,Ue=Math.sqrt(Xt)):(se.x=$t,se.y=ei,ae.x=ti.x,ae.y=ti.y,Ue=Math.sqrt(Yt)),0!=Ue){m.x=se.x-ae.x,m.y=se.y-ae.y;var ii=1/Ue;m.x*=ii,m.y*=ii,fe&&(m.x=-m.x,m.y=-m.y)}ne=Ue}else{var ni=0,ri=0;ni=st.gp0.x,ri=st.gp0.y;var oi,ai,si=0,li=0;oi=(si=st.gp1.x)-ni,ai=(li=st.gp1.y)-ri;var pi=ot.gnormy*ni-ot.gnormx*ri,hi=ot.gnormy*si-ot.gnormx*li,ui=1/(hi-pi),ci=(-ot.tp1-pi)*ui;ci>Qs.epsilon&&(ni+=oi*ci,ri+=ai*ci);var di=(-ot.tp0-hi)*ui;di<-Qs.epsilon&&(si+=oi*di,li+=ai*di);var _i=ni*ot.gnormx+ri*ot.gnormy-ot.gprojection,yi=si*ot.gnormx+li*ot.gnormy-ot.gprojection;if(_i<yi){se.x=ni,se.y=ri;var mi=-_i;ae.x=se.x+ot.gnormx*mi,ae.y=se.y+ot.gnormy*mi,ne=_i}else{se.x=si,se.y=li;var fi=-yi;ae.x=se.x+ot.gnormx*fi,ae.y=se.y+ot.gnormy*fi,ne=yi}}}else ne=1e100}else ne=1e100}}var xi=ne+n,vi=o*m.x+a*m.y;if(xi<Qs.distanceThresholdCCD){if(r)break;var zi,gi;zi=_.x-p.posx,gi=_.y-p.posy;var bi,wi;bi=y.x-h.posx,wi=y.y-h.posy;var Si=vi-p.sweep_angvel*(m.y*zi-m.x*gi)+h.sweep_angvel*(m.y*bi-m.x*wi);if(0<Si&&(e.slipped=!0),Si<=0||xi<.5*Qs.distanceThresholdCCD)break}var Ci=(d-vi)*t;if(Ci<=0){f=-1;break}var Mi=xi/Ci;if(Mi<1e-6&&(Mi=1e-6),1<=(f+=Mi)){var Pi=(f=1)*t,ki=Pi-p.sweepTime;if(0!=ki&&(p.sweepTime=Pi,p.posx+=p.velx*ki,p.posy+=p.vely*ki,0!=p.angvel)){var Ti=p.sweep_angvel*ki;if(p.rot+=Ti,1e-4<Ti*Ti)p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot);else{var Oi=Ti*Ti,Ai=1-.5*Oi,Ei=1-Oi*Oi/8,Gi=(Ai*p.axisx+Ti*p.axisy)*Ei;p.axisy=(Ai*p.axisy-Ti*p.axisx)*Ei,p.axisx=Gi}}if(0==s.type)s.worldCOMx=p.posx+(p.axisy*s.localCOMx-p.axisx*s.localCOMy),s.worldCOMy=p.posy+(s.localCOMx*p.axisx+s.localCOMy*p.axisy);else{for(var Ii=s.polygon,Bi=Ii.lverts.next,Li=Ii.gverts.next;null!=Li;){var Di=Li,Ri=Bi;Bi=Bi.next,Di.x=p.posx+(p.axisy*Ri.x-p.axisx*Ri.y),Di.y=p.posy+(Ri.x*p.axisx+Ri.y*p.axisy),Li=Li.next}var Fi=Ii.edges.head,ji=Ii.gverts.next,Ni=ji;for(ji=ji.next;null!=ji;){var Ui=ji,Vi=Fi.elt;Fi=Fi.next,Vi.gnormx=p.axisy*Vi.lnormx-p.axisx*Vi.lnormy,Vi.gnormy=Vi.lnormx*p.axisx+Vi.lnormy*p.axisy,Vi.gprojection=p.posx*Vi.gnormx+p.posy*Vi.gnormy+Vi.lprojection,Vi.tp0=Ni.y*Vi.gnormx-Ni.x*Vi.gnormy,Vi.tp1=Ui.y*Vi.gnormx-Ui.x*Vi.gnormy,Ni=Ui,ji=ji.next}var Hi=Ii.gverts.next,Wi=Fi.elt;Wi.gnormx=p.axisy*Wi.lnormx-p.axisx*Wi.lnormy,Wi.gnormy=Wi.lnormx*p.axisx+Wi.lnormy*p.axisy,Wi.gprojection=p.posx*Wi.gnormx+p.posy*Wi.gnormy+Wi.lprojection,Wi.tp0=Ni.y*Wi.gnormx-Ni.x*Wi.gnormy,Wi.tp1=Hi.y*Wi.gnormx-Hi.x*Wi.gnormy}var Xi=f*t,qi=Xi-h.sweepTime;if(0!=qi&&(h.sweepTime=Xi,h.posx+=h.velx*qi,h.posy+=h.vely*qi,0!=h.angvel)){var Yi=h.sweep_angvel*qi;if(h.rot+=Yi,1e-4<Yi*Yi)h.axisx=Math.sin(h.rot),h.axisy=Math.cos(h.rot);else{var Ki=Yi*Yi,Zi=1-.5*Ki,Ji=1-Ki*Ki/8,Qi=(Zi*h.axisx+Yi*h.axisy)*Ji;h.axisy=(Zi*h.axisy-Yi*h.axisx)*Ji,h.axisx=Qi}}if(0==l.type)l.worldCOMx=h.posx+(h.axisy*l.localCOMx-h.axisx*l.localCOMy),l.worldCOMy=h.posy+(l.localCOMx*h.axisx+l.localCOMy*h.axisy);else{for(var $i=l.polygon,en=$i.lverts.next,tn=$i.gverts.next;null!=tn;){var nn=tn,rn=en;en=en.next,nn.x=h.posx+(h.axisy*rn.x-h.axisx*rn.y),nn.y=h.posy+(rn.x*h.axisx+rn.y*h.axisy),tn=tn.next}var on=$i.edges.head,an=$i.gverts.next,sn=an;for(an=an.next;null!=an;){var ln=an,pn=on.elt;on=on.next,pn.gnormx=h.axisy*pn.lnormx-h.axisx*pn.lnormy,pn.gnormy=pn.lnormx*h.axisx+pn.lnormy*h.axisy,pn.gprojection=h.posx*pn.gnormx+h.posy*pn.gnormy+pn.lprojection,pn.tp0=sn.y*pn.gnormx-sn.x*pn.gnormy,pn.tp1=ln.y*pn.gnormx-ln.x*pn.gnormy,sn=ln,an=an.next}var hn=$i.gverts.next,un=on.elt;un.gnormx=h.axisy*un.lnormx-h.axisx*un.lnormy,un.gnormy=un.lnormx*h.axisx+un.lnormy*h.axisy,un.gprojection=h.posx*un.gnormx+h.posy*un.gnormy+un.lprojection,un.tp0=sn.y*un.gnormx-sn.x*un.gnormy,un.tp1=hn.y*un.gnormx-hn.x*un.gnormy}var cn,dn=s,_n=l,yn=_,mn=y;if(0==s.type&&0==l.type){var fn,xn=s.circle,vn=l.circle,zn=0,gn=0;zn=vn.worldCOMx-xn.worldCOMx,gn=vn.worldCOMy-xn.worldCOMy;var bn=Math.sqrt(zn*zn+gn*gn);if((fn=bn-(xn.radius+vn.radius))<1e100){if(0==bn)zn=1,gn=0;else{var wn=1/bn;zn*=wn,gn*=wn}var Sn=xn.radius;_.x=xn.worldCOMx+zn*Sn,_.y=xn.worldCOMy+gn*Sn;var Cn=-vn.radius;y.x=vn.worldCOMx+zn*Cn,y.y=vn.worldCOMy+gn*Cn,m.x=zn,m.y=gn}cn=fn}else{var Mn=!1;if(0==s.type&&1==l.type)dn=l,_n=s,yn=y,mn=_,Mn=!0;if(1==dn.type&&0==_n.type){for(var Pn=dn.polygon,kn=_n.circle,Tn=-1e100,On=null,An=Pn.edges.head;null!=An;){var En=An.elt,Gn=En.gnormx*kn.worldCOMx+En.gnormy*kn.worldCOMy-En.gprojection-kn.radius;if(1e100<Gn){Tn=Gn;break}0<Gn?Tn<Gn&&(Tn=Gn,On=En):Tn<0&&Tn<Gn&&(Tn=Gn,On=En),An=An.next}if(Tn<1e100){var In=On.gp0,Bn=On.gp1,Ln=kn.worldCOMy*On.gnormx-kn.worldCOMx*On.gnormy;if(Ln<=In.y*On.gnormx-In.x*On.gnormy){var Dn=0,Rn=0;Dn=kn.worldCOMx-In.x,Rn=kn.worldCOMy-In.y;var Fn=Math.sqrt(Dn*Dn+Rn*Rn);if((Tn=Fn-kn.radius)<1e100){if(0==Fn)Dn=1,Rn=0;else{var jn=1/Fn;Dn*=jn,Rn*=jn}yn.x=In.x+0*Dn,yn.y=In.y+0*Rn;var Nn=-kn.radius;mn.x=kn.worldCOMx+Dn*Nn,mn.y=kn.worldCOMy+Rn*Nn,m.x=Dn,m.y=Rn}}else if(Ln>=Bn.y*On.gnormx-Bn.x*On.gnormy){var Un=0,Vn=0;Un=kn.worldCOMx-Bn.x,Vn=kn.worldCOMy-Bn.y;var Hn=Math.sqrt(Un*Un+Vn*Vn);if((Tn=Hn-kn.radius)<1e100){if(0==Hn)Un=1,Vn=0;else{var Wn=1/Hn;Un*=Wn,Vn*=Wn}yn.x=Bn.x+0*Un,yn.y=Bn.y+0*Vn;var Xn=-kn.radius;mn.x=kn.worldCOMx+Un*Xn,mn.y=kn.worldCOMy+Vn*Xn,m.x=Un,m.y=Vn}}else{var qn=-kn.radius;mn.x=kn.worldCOMx+On.gnormx*qn,mn.y=kn.worldCOMy+On.gnormy*qn;var Yn=-Tn;yn.x=mn.x+On.gnormx*Yn,yn.y=mn.y+On.gnormy*Yn,m.x=On.gnormx,m.y=On.gnormy}}Mn&&(m.x=-m.x,m.y=-m.y),cn=Tn}else{for(var Kn=dn.polygon,Zn=_n.polygon,Jn=-1e100,Qn=null,$n=null,er=0,tr=Kn.edges.head;null!=tr;){for(var ir=tr.elt,nr=1e100,rr=Zn.gverts.next;null!=rr;){var or=rr,ar=ir.gnormx*or.x+ir.gnormy*or.y;ar<nr&&(nr=ar),rr=rr.next}if(1e100<(nr-=ir.gprojection)){Jn=nr;break}0<nr?Jn<nr&&(Jn=nr,Qn=ir,er=1):Jn<0&&Jn<nr&&(Jn=nr,Qn=ir,er=1),tr=tr.next}if(Jn<1e100){for(var sr=Zn.edges.head;null!=sr;){for(var lr=sr.elt,pr=1e100,hr=Kn.gverts.next;null!=hr;){var ur=hr,cr=lr.gnormx*ur.x+lr.gnormy*ur.y;cr<pr&&(pr=cr),hr=hr.next}if(1e100<(pr-=lr.gprojection)){Jn=pr;break}0<pr?Jn<pr&&(Jn=pr,$n=lr,er=2):Jn<0&&Jn<pr&&(Jn=pr,$n=lr,er=2),sr=sr.next}if(Jn<1e100){var dr,_r;if(1==er)dr=Zn,_r=Qn;else{dr=Kn,_r=$n;var yr=yn;yn=mn,mn=yr,Mn=!Mn}for(var mr=null,fr=1e100,xr=dr.edges.head;null!=xr;){var vr=xr.elt,zr=_r.gnormx*vr.gnormx+_r.gnormy*vr.gnormy;zr<fr&&(fr=zr,mr=vr),xr=xr.next}if(Mn?(m.x=-_r.gnormx,m.y=-_r.gnormy):(m.x=_r.gnormx,m.y=_r.gnormy),0<=Jn){var gr,br,wr,Sr,Cr=_r.gp0,Mr=_r.gp1,Pr=mr.gp0,kr=mr.gp1,Tr=1/((gr=Mr.x-Cr.x)*gr+(br=Mr.y-Cr.y)*br),Or=1/((wr=kr.x-Pr.x)*wr+(Sr=kr.y-Pr.y)*Sr),Ar=-(gr*(Cr.x-Pr.x)+br*(Cr.y-Pr.y))*Tr,Er=-(gr*(Cr.x-kr.x)+br*(Cr.y-kr.y))*Tr,Gr=-(wr*(Pr.x-Cr.x)+Sr*(Pr.y-Cr.y))*Or,Ir=-(wr*(Pr.x-Mr.x)+Sr*(Pr.y-Mr.y))*Or;Ar<0?Ar=0:1<Ar&&(Ar=1),Er<0?Er=0:1<Er&&(Er=1),Gr<0?Gr=0:1<Gr&&(Gr=1),Ir<0?Ir=0:1<Ir&&(Ir=1);var Br,Lr,Dr=Ar;Br=Cr.x+gr*Dr,Lr=Cr.y+br*Dr;var Rr,Fr,jr=Er;Rr=Cr.x+gr*jr,Fr=Cr.y+br*jr;var Nr,Ur,Vr=Gr;Nr=Pr.x+wr*Vr,Ur=Pr.y+Sr*Vr;var Hr,Wr,Xr=Ir;Hr=Pr.x+wr*Xr,Wr=Pr.y+Sr*Xr;var qr,Yr,Kr,Zr,Jr,Qr,$r,eo,to=(qr=Br-Pr.x)*qr+(Yr=Lr-Pr.y)*Yr,io=(Kr=Rr-kr.x)*Kr+(Zr=Fr-kr.y)*Zr,no=(Jr=Nr-Cr.x)*Jr+(Qr=Ur-Cr.y)*Qr,ro=($r=Hr-Mr.x)*$r+(eo=Wr-Mr.y)*eo,oo=0,ao=0,so=null;to<io?(oo=Br,ao=Lr,so=Pr):(oo=Rr,ao=Fr,so=kr,to=io);var lo=0,po=0,ho=null;if(no<ro?(lo=Nr,po=Ur,ho=Cr):(lo=Hr,po=Wr,ho=Mr,no=ro),to<no?(yn.x=oo,yn.y=ao,mn.x=so.x,mn.y=so.y,Jn=Math.sqrt(to)):(mn.x=lo,mn.y=po,yn.x=ho.x,yn.y=ho.y,Jn=Math.sqrt(no)),0!=Jn){m.x=mn.x-yn.x,m.y=mn.y-yn.y;var uo=1/Jn;m.x*=uo,m.y*=uo,Mn&&(m.x=-m.x,m.y=-m.y)}cn=Jn}else{var co=0,_o=0;co=mr.gp0.x,_o=mr.gp0.y;var yo,mo,fo=0,xo=0;yo=(fo=mr.gp1.x)-co,mo=(xo=mr.gp1.y)-_o;var vo=_r.gnormy*co-_r.gnormx*_o,zo=_r.gnormy*fo-_r.gnormx*xo,go=1/(zo-vo),bo=(-_r.tp1-vo)*go;bo>Qs.epsilon&&(co+=yo*bo,_o+=mo*bo);var wo=(-_r.tp0-zo)*go;wo<-Qs.epsilon&&(fo+=yo*wo,xo+=mo*wo);var So=co*_r.gnormx+_o*_r.gnormy-_r.gprojection,Co=fo*_r.gnormx+xo*_r.gnormy-_r.gprojection;if(So<Co){mn.x=co,mn.y=_o;var Mo=-So;yn.x=mn.x+_r.gnormx*Mo,yn.y=mn.y+_r.gnormy*Mo,cn=So}else{mn.x=fo,mn.y=xo;var Po=-Co;yn.x=mn.x+_r.gnormx*Po,yn.y=mn.y+_r.gnormy*Po,cn=Co}}}else cn=1e100}else cn=1e100}}var ko=cn+n,To=o*m.x+a*m.y;if(ko<Qs.distanceThresholdCCD){if(r)break;var Oo,Ao;Oo=_.x-p.posx,Ao=_.y-p.posy;var Eo,Go;Eo=y.x-h.posx,Go=y.y-h.posy;var Io=To-p.sweep_angvel*(m.y*Oo-m.x*Ao)+h.sweep_angvel*(m.y*Eo-m.x*Go);if(0<Io&&(e.slipped=!0),Io<=0||ko<.5*Qs.distanceThresholdCCD)break}f=-1;break}if(40<=++x){n<xi&&(e.failed=!0);break}}e.toi=f},Ht.staticSweep=function(e,t,i,n){var r,o,a=e.s1,s=e.s2,l=a.body;r=-l.velx,o=-l.vely;var p=l.sweep_angvel;p<0&&(p=-p);for(var h=a.sweepCoef*p,u=e.c1,c=e.c2,d=e.axis,_=i,y=0;;){var m=_*t,f=m-l.sweepTime;if(0!=f&&(l.sweepTime=m,l.posx+=l.velx*f,l.posy+=l.vely*f,0!=l.angvel)){var x=l.sweep_angvel*f;if(l.rot+=x,1e-4<x*x)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var v=x*x,z=1-.5*v,g=1-v*v/8,b=(z*l.axisx+x*l.axisy)*g;l.axisy=(z*l.axisy-x*l.axisx)*g,l.axisx=b}}if(0==a.type)a.worldCOMx=l.posx+(l.axisy*a.localCOMx-l.axisx*a.localCOMy),a.worldCOMy=l.posy+(a.localCOMx*l.axisx+a.localCOMy*l.axisy);else{for(var w=a.polygon,S=w.lverts.next,C=w.gverts.next;null!=C;){var M=C,P=S;S=S.next,M.x=l.posx+(l.axisy*P.x-l.axisx*P.y),M.y=l.posy+(P.x*l.axisx+P.y*l.axisy),C=C.next}var k=w.edges.head,T=w.gverts.next,O=T;for(T=T.next;null!=T;){var A=T,E=k.elt;k=k.next,E.gnormx=l.axisy*E.lnormx-l.axisx*E.lnormy,E.gnormy=E.lnormx*l.axisx+E.lnormy*l.axisy,E.gprojection=l.posx*E.gnormx+l.posy*E.gnormy+E.lprojection,E.tp0=O.y*E.gnormx-O.x*E.gnormy,E.tp1=A.y*E.gnormx-A.x*E.gnormy,O=A,T=T.next}var G=w.gverts.next,I=k.elt;I.gnormx=l.axisy*I.lnormx-l.axisx*I.lnormy,I.gnormy=I.lnormx*l.axisx+I.lnormy*l.axisy,I.gprojection=l.posx*I.gnormx+l.posy*I.gnormy+I.lprojection,I.tp0=O.y*I.gnormx-O.x*I.gnormy,I.tp1=G.y*I.gnormx-G.x*I.gnormy}var B,L=a,D=s,R=u,F=c;if(0==a.type&&0==s.type){var j,N=a.circle,U=s.circle,V=0,H=0;V=U.worldCOMx-N.worldCOMx,H=U.worldCOMy-N.worldCOMy;var W=Math.sqrt(V*V+H*H);if((j=W-(N.radius+U.radius))<1e100){if(0==W)V=1,H=0;else{var X=1/W;V*=X,H*=X}var q=N.radius;u.x=N.worldCOMx+V*q,u.y=N.worldCOMy+H*q;var Y=-U.radius;c.x=U.worldCOMx+V*Y,c.y=U.worldCOMy+H*Y,d.x=V,d.y=H}B=j}else{var K=!1;if(0==a.type&&1==s.type)L=s,D=a,R=c,F=u,K=!0;if(1==L.type&&0==D.type){for(var Z=L.polygon,J=D.circle,Q=-1e100,$=null,ee=Z.edges.head;null!=ee;){var te=ee.elt,ie=te.gnormx*J.worldCOMx+te.gnormy*J.worldCOMy-te.gprojection-J.radius;if(1e100<ie){Q=ie;break}0<ie?Q<ie&&(Q=ie,$=te):Q<0&&Q<ie&&(Q=ie,$=te),ee=ee.next}if(Q<1e100){var ne=$.gp0,re=$.gp1,oe=J.worldCOMy*$.gnormx-J.worldCOMx*$.gnormy;if(oe<=ne.y*$.gnormx-ne.x*$.gnormy){var ae=0,se=0;ae=J.worldCOMx-ne.x,se=J.worldCOMy-ne.y;var le=Math.sqrt(ae*ae+se*se);if((Q=le-J.radius)<1e100){if(0==le)ae=1,se=0;else{var pe=1/le;ae*=pe,se*=pe}R.x=ne.x+0*ae,R.y=ne.y+0*se;var he=-J.radius;F.x=J.worldCOMx+ae*he,F.y=J.worldCOMy+se*he,d.x=ae,d.y=se}}else if(oe>=re.y*$.gnormx-re.x*$.gnormy){var ue=0,ce=0;ue=J.worldCOMx-re.x,ce=J.worldCOMy-re.y;var de=Math.sqrt(ue*ue+ce*ce);if((Q=de-J.radius)<1e100){if(0==de)ue=1,ce=0;else{var _e=1/de;ue*=_e,ce*=_e}R.x=re.x+0*ue,R.y=re.y+0*ce;var ye=-J.radius;F.x=J.worldCOMx+ue*ye,F.y=J.worldCOMy+ce*ye,d.x=ue,d.y=ce}}else{var me=-J.radius;F.x=J.worldCOMx+$.gnormx*me,F.y=J.worldCOMy+$.gnormy*me;var fe=-Q;R.x=F.x+$.gnormx*fe,R.y=F.y+$.gnormy*fe,d.x=$.gnormx,d.y=$.gnormy}}K&&(d.x=-d.x,d.y=-d.y),B=Q}else{for(var xe=L.polygon,ve=D.polygon,ze=-1e100,ge=null,be=null,we=0,Se=xe.edges.head;null!=Se;){for(var Ce=Se.elt,Me=1e100,Pe=ve.gverts.next;null!=Pe;){var ke=Pe,Te=Ce.gnormx*ke.x+Ce.gnormy*ke.y;Te<Me&&(Me=Te),Pe=Pe.next}if(1e100<(Me-=Ce.gprojection)){ze=Me;break}0<Me?ze<Me&&(ze=Me,ge=Ce,we=1):ze<0&&ze<Me&&(ze=Me,ge=Ce,we=1),Se=Se.next}if(ze<1e100){for(var Oe=ve.edges.head;null!=Oe;){for(var Ae=Oe.elt,Ee=1e100,Ge=xe.gverts.next;null!=Ge;){var Ie=Ge,Be=Ae.gnormx*Ie.x+Ae.gnormy*Ie.y;Be<Ee&&(Ee=Be),Ge=Ge.next}if(1e100<(Ee-=Ae.gprojection)){ze=Ee;break}0<Ee?ze<Ee&&(ze=Ee,be=Ae,we=2):ze<0&&ze<Ee&&(ze=Ee,be=Ae,we=2),Oe=Oe.next}if(ze<1e100){var Le,De;if(1==we)Le=ve,De=ge;else{Le=xe,De=be;var Re=R;R=F,F=Re,K=!K}for(var Fe=null,je=1e100,Ne=Le.edges.head;null!=Ne;){var Ue=Ne.elt,Ve=De.gnormx*Ue.gnormx+De.gnormy*Ue.gnormy;Ve<je&&(je=Ve,Fe=Ue),Ne=Ne.next}if(K?(d.x=-De.gnormx,d.y=-De.gnormy):(d.x=De.gnormx,d.y=De.gnormy),0<=ze){var He,We,Xe,qe,Ye=De.gp0,Ke=De.gp1,Ze=Fe.gp0,Je=Fe.gp1,Qe=1/((He=Ke.x-Ye.x)*He+(We=Ke.y-Ye.y)*We),$e=1/((Xe=Je.x-Ze.x)*Xe+(qe=Je.y-Ze.y)*qe),et=-(He*(Ye.x-Ze.x)+We*(Ye.y-Ze.y))*Qe,tt=-(He*(Ye.x-Je.x)+We*(Ye.y-Je.y))*Qe,it=-(Xe*(Ze.x-Ye.x)+qe*(Ze.y-Ye.y))*$e,nt=-(Xe*(Ze.x-Ke.x)+qe*(Ze.y-Ke.y))*$e;et<0?et=0:1<et&&(et=1),tt<0?tt=0:1<tt&&(tt=1),it<0?it=0:1<it&&(it=1),nt<0?nt=0:1<nt&&(nt=1);var rt,ot,at=et;rt=Ye.x+He*at,ot=Ye.y+We*at;var st,lt,pt=tt;st=Ye.x+He*pt,lt=Ye.y+We*pt;var ht,ut,ct=it;ht=Ze.x+Xe*ct,ut=Ze.y+qe*ct;var dt,_t,yt=nt;dt=Ze.x+Xe*yt,_t=Ze.y+qe*yt;var mt,ft,xt,vt,zt,gt,bt,wt,St=(mt=rt-Ze.x)*mt+(ft=ot-Ze.y)*ft,Ct=(xt=st-Je.x)*xt+(vt=lt-Je.y)*vt,Mt=(zt=ht-Ye.x)*zt+(gt=ut-Ye.y)*gt,Pt=(bt=dt-Ke.x)*bt+(wt=_t-Ke.y)*wt,kt=0,Tt=0,Ot=null;St<Ct?(kt=rt,Tt=ot,Ot=Ze):(kt=st,Tt=lt,Ot=Je,St=Ct);var At=0,Et=0,Gt=null;if(Mt<Pt?(At=ht,Et=ut,Gt=Ye):(At=dt,Et=_t,Gt=Ke,Mt=Pt),St<Mt?(R.x=kt,R.y=Tt,F.x=Ot.x,F.y=Ot.y,ze=Math.sqrt(St)):(F.x=At,F.y=Et,R.x=Gt.x,R.y=Gt.y,ze=Math.sqrt(Mt)),0!=ze){d.x=F.x-R.x,d.y=F.y-R.y;var It=1/ze;d.x*=It,d.y*=It,K&&(d.x=-d.x,d.y=-d.y)}B=ze}else{var Bt=0,Lt=0;Bt=Fe.gp0.x,Lt=Fe.gp0.y;var Dt,Rt,Ft=0,jt=0;Dt=(Ft=Fe.gp1.x)-Bt,Rt=(jt=Fe.gp1.y)-Lt;var Nt=De.gnormy*Bt-De.gnormx*Lt,Ut=De.gnormy*Ft-De.gnormx*jt,Vt=1/(Ut-Nt),Ht=(-De.tp1-Nt)*Vt;Ht>Qs.epsilon&&(Bt+=Dt*Ht,Lt+=Rt*Ht);var Wt=(-De.tp0-Ut)*Vt;Wt<-Qs.epsilon&&(Ft+=Dt*Wt,jt+=Rt*Wt);var Xt=Bt*De.gnormx+Lt*De.gnormy-De.gprojection,qt=Ft*De.gnormx+jt*De.gnormy-De.gprojection;if(Xt<qt){F.x=Bt,F.y=Lt;var Yt=-Xt;R.x=F.x+De.gnormx*Yt,R.y=F.y+De.gnormy*Yt,B=Xt}else{F.x=Ft,F.y=jt;var Kt=-qt;R.x=F.x+De.gnormx*Kt,R.y=F.y+De.gnormy*Kt,B=qt}}}else B=1e100}else B=1e100}}var Zt=B+n,Jt=r*d.x+o*d.y;if(Zt<Qs.distanceThresholdCCD){var Qt,$t;Qt=u.x-l.posx,$t=u.y-l.posy;var ei=Jt-l.sweep_angvel*(d.y*Qt-d.x*$t);if(0<ei&&(e.slipped=!0),ei<=0||Zt<.5*Qs.distanceThresholdCCD)break}var ti=(h-Jt)*t;if(ti<=0){_=-1;break}var ii=Zt/ti;if(ii<1e-6&&(ii=1e-6),1<=(_+=ii)){var ni=(_=1)*t,ri=ni-l.sweepTime;if(0!=ri&&(l.sweepTime=ni,l.posx+=l.velx*ri,l.posy+=l.vely*ri,0!=l.angvel)){var oi=l.sweep_angvel*ri;if(l.rot+=oi,1e-4<oi*oi)l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot);else{var ai=oi*oi,si=1-.5*ai,li=1-ai*ai/8,pi=(si*l.axisx+oi*l.axisy)*li;l.axisy=(si*l.axisy-oi*l.axisx)*li,l.axisx=pi}}if(0==a.type)a.worldCOMx=l.posx+(l.axisy*a.localCOMx-l.axisx*a.localCOMy),a.worldCOMy=l.posy+(a.localCOMx*l.axisx+a.localCOMy*l.axisy);else{for(var hi=a.polygon,ui=hi.lverts.next,ci=hi.gverts.next;null!=ci;){var di=ci,_i=ui;ui=ui.next,di.x=l.posx+(l.axisy*_i.x-l.axisx*_i.y),di.y=l.posy+(_i.x*l.axisx+_i.y*l.axisy),ci=ci.next}var yi=hi.edges.head,mi=hi.gverts.next,fi=mi;for(mi=mi.next;null!=mi;){var xi=mi,vi=yi.elt;yi=yi.next,vi.gnormx=l.axisy*vi.lnormx-l.axisx*vi.lnormy,vi.gnormy=vi.lnormx*l.axisx+vi.lnormy*l.axisy,vi.gprojection=l.posx*vi.gnormx+l.posy*vi.gnormy+vi.lprojection,vi.tp0=fi.y*vi.gnormx-fi.x*vi.gnormy,vi.tp1=xi.y*vi.gnormx-xi.x*vi.gnormy,fi=xi,mi=mi.next}var zi=hi.gverts.next,gi=yi.elt;gi.gnormx=l.axisy*gi.lnormx-l.axisx*gi.lnormy,gi.gnormy=gi.lnormx*l.axisx+gi.lnormy*l.axisy,gi.gprojection=l.posx*gi.gnormx+l.posy*gi.gnormy+gi.lprojection,gi.tp0=fi.y*gi.gnormx-fi.x*gi.gnormy,gi.tp1=zi.y*gi.gnormx-zi.x*gi.gnormy}var bi,wi=a,Si=s,Ci=u,Mi=c;if(0==a.type&&0==s.type){var Pi,ki=a.circle,Ti=s.circle,Oi=0,Ai=0;Oi=Ti.worldCOMx-ki.worldCOMx,Ai=Ti.worldCOMy-ki.worldCOMy;var Ei=Math.sqrt(Oi*Oi+Ai*Ai);if((Pi=Ei-(ki.radius+Ti.radius))<1e100){if(0==Ei)Oi=1,Ai=0;else{var Gi=1/Ei;Oi*=Gi,Ai*=Gi}var Ii=ki.radius;u.x=ki.worldCOMx+Oi*Ii,u.y=ki.worldCOMy+Ai*Ii;var Bi=-Ti.radius;c.x=Ti.worldCOMx+Oi*Bi,c.y=Ti.worldCOMy+Ai*Bi,d.x=Oi,d.y=Ai}bi=Pi}else{var Li=!1;if(0==a.type&&1==s.type)wi=s,Si=a,Ci=c,Mi=u,Li=!0;if(1==wi.type&&0==Si.type){for(var Di=wi.polygon,Ri=Si.circle,Fi=-1e100,ji=null,Ni=Di.edges.head;null!=Ni;){var Ui=Ni.elt,Vi=Ui.gnormx*Ri.worldCOMx+Ui.gnormy*Ri.worldCOMy-Ui.gprojection-Ri.radius;if(1e100<Vi){Fi=Vi;break}0<Vi?Fi<Vi&&(Fi=Vi,ji=Ui):Fi<0&&Fi<Vi&&(Fi=Vi,ji=Ui),Ni=Ni.next}if(Fi<1e100){var Hi=ji.gp0,Wi=ji.gp1,Xi=Ri.worldCOMy*ji.gnormx-Ri.worldCOMx*ji.gnormy;if(Xi<=Hi.y*ji.gnormx-Hi.x*ji.gnormy){var qi=0,Yi=0;qi=Ri.worldCOMx-Hi.x,Yi=Ri.worldCOMy-Hi.y;var Ki=Math.sqrt(qi*qi+Yi*Yi);if((Fi=Ki-Ri.radius)<1e100){if(0==Ki)qi=1,Yi=0;else{var Zi=1/Ki;qi*=Zi,Yi*=Zi}Ci.x=Hi.x+0*qi,Ci.y=Hi.y+0*Yi;var Ji=-Ri.radius;Mi.x=Ri.worldCOMx+qi*Ji,Mi.y=Ri.worldCOMy+Yi*Ji,d.x=qi,d.y=Yi}}else if(Xi>=Wi.y*ji.gnormx-Wi.x*ji.gnormy){var Qi=0,$i=0;Qi=Ri.worldCOMx-Wi.x,$i=Ri.worldCOMy-Wi.y;var en=Math.sqrt(Qi*Qi+$i*$i);if((Fi=en-Ri.radius)<1e100){if(0==en)Qi=1,$i=0;else{var tn=1/en;Qi*=tn,$i*=tn}Ci.x=Wi.x+0*Qi,Ci.y=Wi.y+0*$i;var nn=-Ri.radius;Mi.x=Ri.worldCOMx+Qi*nn,Mi.y=Ri.worldCOMy+$i*nn,d.x=Qi,d.y=$i}}else{var rn=-Ri.radius;Mi.x=Ri.worldCOMx+ji.gnormx*rn,Mi.y=Ri.worldCOMy+ji.gnormy*rn;var on=-Fi;Ci.x=Mi.x+ji.gnormx*on,Ci.y=Mi.y+ji.gnormy*on,d.x=ji.gnormx,d.y=ji.gnormy}}Li&&(d.x=-d.x,d.y=-d.y),bi=Fi}else{for(var an=wi.polygon,sn=Si.polygon,ln=-1e100,pn=null,hn=null,un=0,cn=an.edges.head;null!=cn;){for(var dn=cn.elt,_n=1e100,yn=sn.gverts.next;null!=yn;){var mn=yn,fn=dn.gnormx*mn.x+dn.gnormy*mn.y;fn<_n&&(_n=fn),yn=yn.next}if(1e100<(_n-=dn.gprojection)){ln=_n;break}0<_n?ln<_n&&(ln=_n,pn=dn,un=1):ln<0&&ln<_n&&(ln=_n,pn=dn,un=1),cn=cn.next}if(ln<1e100){for(var xn=sn.edges.head;null!=xn;){for(var vn=xn.elt,zn=1e100,gn=an.gverts.next;null!=gn;){var bn=gn,wn=vn.gnormx*bn.x+vn.gnormy*bn.y;wn<zn&&(zn=wn),gn=gn.next}if(1e100<(zn-=vn.gprojection)){ln=zn;break}0<zn?ln<zn&&(ln=zn,hn=vn,un=2):ln<0&&ln<zn&&(ln=zn,hn=vn,un=2),xn=xn.next}if(ln<1e100){var Sn,Cn;if(1==un)Sn=sn,Cn=pn;else{Sn=an,Cn=hn;var Mn=Ci;Ci=Mi,Mi=Mn,Li=!Li}for(var Pn=null,kn=1e100,Tn=Sn.edges.head;null!=Tn;){var On=Tn.elt,An=Cn.gnormx*On.gnormx+Cn.gnormy*On.gnormy;An<kn&&(kn=An,Pn=On),Tn=Tn.next}if(Li?(d.x=-Cn.gnormx,d.y=-Cn.gnormy):(d.x=Cn.gnormx,d.y=Cn.gnormy),0<=ln){var En,Gn,In,Bn,Ln=Cn.gp0,Dn=Cn.gp1,Rn=Pn.gp0,Fn=Pn.gp1,jn=1/((En=Dn.x-Ln.x)*En+(Gn=Dn.y-Ln.y)*Gn),Nn=1/((In=Fn.x-Rn.x)*In+(Bn=Fn.y-Rn.y)*Bn),Un=-(En*(Ln.x-Rn.x)+Gn*(Ln.y-Rn.y))*jn,Vn=-(En*(Ln.x-Fn.x)+Gn*(Ln.y-Fn.y))*jn,Hn=-(In*(Rn.x-Ln.x)+Bn*(Rn.y-Ln.y))*Nn,Wn=-(In*(Rn.x-Dn.x)+Bn*(Rn.y-Dn.y))*Nn;Un<0?Un=0:1<Un&&(Un=1),Vn<0?Vn=0:1<Vn&&(Vn=1),Hn<0?Hn=0:1<Hn&&(Hn=1),Wn<0?Wn=0:1<Wn&&(Wn=1);var Xn,qn,Yn=Un;Xn=Ln.x+En*Yn,qn=Ln.y+Gn*Yn;var Kn,Zn,Jn=Vn;Kn=Ln.x+En*Jn,Zn=Ln.y+Gn*Jn;var Qn,$n,er=Hn;Qn=Rn.x+In*er,$n=Rn.y+Bn*er;var tr,ir,nr=Wn;tr=Rn.x+In*nr,ir=Rn.y+Bn*nr;var rr,or,ar,sr,lr,pr,hr,ur,cr=(rr=Xn-Rn.x)*rr+(or=qn-Rn.y)*or,dr=(ar=Kn-Fn.x)*ar+(sr=Zn-Fn.y)*sr,_r=(lr=Qn-Ln.x)*lr+(pr=$n-Ln.y)*pr,yr=(hr=tr-Dn.x)*hr+(ur=ir-Dn.y)*ur,mr=0,fr=0,xr=null;cr<dr?(mr=Xn,fr=qn,xr=Rn):(mr=Kn,fr=Zn,xr=Fn,cr=dr);var vr=0,zr=0,gr=null;if(_r<yr?(vr=Qn,zr=$n,gr=Ln):(vr=tr,zr=ir,gr=Dn,_r=yr),cr<_r?(Ci.x=mr,Ci.y=fr,Mi.x=xr.x,Mi.y=xr.y,ln=Math.sqrt(cr)):(Mi.x=vr,Mi.y=zr,Ci.x=gr.x,Ci.y=gr.y,ln=Math.sqrt(_r)),0!=ln){d.x=Mi.x-Ci.x,d.y=Mi.y-Ci.y;var br=1/ln;d.x*=br,d.y*=br,Li&&(d.x=-d.x,d.y=-d.y)}bi=ln}else{var wr=0,Sr=0;wr=Pn.gp0.x,Sr=Pn.gp0.y;var Cr,Mr,Pr=0,kr=0;Cr=(Pr=Pn.gp1.x)-wr,Mr=(kr=Pn.gp1.y)-Sr;var Tr=Cn.gnormy*wr-Cn.gnormx*Sr,Or=Cn.gnormy*Pr-Cn.gnormx*kr,Ar=1/(Or-Tr),Er=(-Cn.tp1-Tr)*Ar;Er>Qs.epsilon&&(wr+=Cr*Er,Sr+=Mr*Er);var Gr=(-Cn.tp0-Or)*Ar;Gr<-Qs.epsilon&&(Pr+=Cr*Gr,kr+=Mr*Gr);var Ir=wr*Cn.gnormx+Sr*Cn.gnormy-Cn.gprojection,Br=Pr*Cn.gnormx+kr*Cn.gnormy-Cn.gprojection;if(Ir<Br){Mi.x=wr,Mi.y=Sr;var Lr=-Ir;Ci.x=Mi.x+Cn.gnormx*Lr,Ci.y=Mi.y+Cn.gnormy*Lr,bi=Ir}else{Mi.x=Pr,Mi.y=kr;var Dr=-Br;Ci.x=Mi.x+Cn.gnormx*Dr,Ci.y=Mi.y+Cn.gnormy*Dr,bi=Br}}}else bi=1e100}else bi=1e100}}var Rr=bi+n,Fr=r*d.x+o*d.y;if(Rr<Qs.distanceThresholdCCD){var jr,Nr;jr=u.x-l.posx,Nr=u.y-l.posy;var Ur=Fr-l.sweep_angvel*(d.y*jr-d.x*Nr);if(0<Ur&&(e.slipped=!0),Ur<=0||Rr<.5*Qs.distanceThresholdCCD)break}_=-1;break}if(40<=++y){n<Zt&&(e.failed=!0);break}}e.toi=_},Ht.distanceBody=function(e,t,i,n){var r,o,a;null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,null==el.zpp_pool?o=new el:(o=el.zpp_pool,el.zpp_pool=o.next,o.next=null),o.weak=!1,null==el.zpp_pool?a=new el:(a=el.zpp_pool,el.zpp_pool=a.next,a.next=null),a.weak=!1;for(var s=1e100,l=e.shapes.head;null!=l;){for(var p=l.elt,h=t.shapes.head;null!=h;){var u,c=h.elt,d=p,_=c,y=r,m=o;if(0==p.type&&0==c.type){var f,x=p.circle,v=c.circle,z=0,g=0;z=v.worldCOMx-x.worldCOMx,g=v.worldCOMy-x.worldCOMy;var b=Math.sqrt(z*z+g*g);if((f=b-(x.radius+v.radius))<s){if(0==b)z=1,g=0;else{var w=1/b;z*=w,g*=w}var S=x.radius;y.x=x.worldCOMx+z*S,y.y=x.worldCOMy+g*S;var C=-v.radius;m.x=v.worldCOMx+z*C,m.y=v.worldCOMy+g*C,a.x=z,a.y=g}u=f}else{var M=!1;if(0==p.type&&1==c.type){d=c,_=p;var P=y;y=m,m=P,M=!0}if(1==d.type&&0==_.type){for(var k=d.polygon,T=_.circle,O=-1e100,A=null,E=k.edges.head;null!=E;){var G=E.elt,I=G.gnormx*T.worldCOMx+G.gnormy*T.worldCOMy-G.gprojection-T.radius;if(s<I){O=I;break}0<I?O<I&&(O=I,A=G):O<0&&O<I&&(O=I,A=G),E=E.next}if(O<s){var B=A.gp0,L=A.gp1,D=T.worldCOMy*A.gnormx-T.worldCOMx*A.gnormy;if(D<=B.y*A.gnormx-B.x*A.gnormy){var R=0,F=0;R=T.worldCOMx-B.x,F=T.worldCOMy-B.y;var j=Math.sqrt(R*R+F*F);if((O=j-T.radius)<s){if(0==j)R=1,F=0;else{var N=1/j;R*=N,F*=N}y.x=B.x+0*R,y.y=B.y+0*F;var U=-T.radius;m.x=T.worldCOMx+R*U,m.y=T.worldCOMy+F*U,a.x=R,a.y=F}}else if(D>=L.y*A.gnormx-L.x*A.gnormy){var V=0,H=0;V=T.worldCOMx-L.x,H=T.worldCOMy-L.y;var W=Math.sqrt(V*V+H*H);if((O=W-T.radius)<s){if(0==W)V=1,H=0;else{var X=1/W;V*=X,H*=X}y.x=L.x+0*V,y.y=L.y+0*H;var q=-T.radius;m.x=T.worldCOMx+V*q,m.y=T.worldCOMy+H*q,a.x=V,a.y=H}}else{var Y=-T.radius;m.x=T.worldCOMx+A.gnormx*Y,m.y=T.worldCOMy+A.gnormy*Y;var K=-O;y.x=m.x+A.gnormx*K,y.y=m.y+A.gnormy*K,a.x=A.gnormx,a.y=A.gnormy}}M&&(a.x=-a.x,a.y=-a.y),u=O}else{for(var Z=d.polygon,J=_.polygon,Q=-1e100,$=null,ee=null,te=0,ie=Z.edges.head;null!=ie;){for(var ne=ie.elt,re=1e100,oe=J.gverts.next;null!=oe;){var ae=oe,se=ne.gnormx*ae.x+ne.gnormy*ae.y;se<re&&(re=se),oe=oe.next}if(s<(re-=ne.gprojection)){Q=re;break}0<re?Q<re&&(Q=re,$=ne,te=1):Q<0&&Q<re&&(Q=re,$=ne,te=1),ie=ie.next}if(Q<s){for(var le=J.edges.head;null!=le;){for(var pe=le.elt,he=1e100,ue=Z.gverts.next;null!=ue;){var ce=ue,de=pe.gnormx*ce.x+pe.gnormy*ce.y;de<he&&(he=de),ue=ue.next}if(s<(he-=pe.gprojection)){Q=he;break}0<he?Q<he&&(Q=he,ee=pe,te=2):Q<0&&Q<he&&(Q=he,ee=pe,te=2),le=le.next}if(Q<s){var _e,ye;if(1==te)_e=J,ye=$;else{_e=Z,ye=ee;var me=y;y=m,m=me,M=!M}for(var fe=null,xe=1e100,ve=_e.edges.head;null!=ve;){var ze=ve.elt,ge=ye.gnormx*ze.gnormx+ye.gnormy*ze.gnormy;ge<xe&&(xe=ge,fe=ze),ve=ve.next}if(M?(a.x=-ye.gnormx,a.y=-ye.gnormy):(a.x=ye.gnormx,a.y=ye.gnormy),0<=Q){var be,we,Se,Ce,Me=ye.gp0,Pe=ye.gp1,ke=fe.gp0,Te=fe.gp1,Oe=1/((be=Pe.x-Me.x)*be+(we=Pe.y-Me.y)*we),Ae=1/((Se=Te.x-ke.x)*Se+(Ce=Te.y-ke.y)*Ce),Ee=-(be*(Me.x-ke.x)+we*(Me.y-ke.y))*Oe,Ge=-(be*(Me.x-Te.x)+we*(Me.y-Te.y))*Oe,Ie=-(Se*(ke.x-Me.x)+Ce*(ke.y-Me.y))*Ae,Be=-(Se*(ke.x-Pe.x)+Ce*(ke.y-Pe.y))*Ae;Ee<0?Ee=0:1<Ee&&(Ee=1),Ge<0?Ge=0:1<Ge&&(Ge=1),Ie<0?Ie=0:1<Ie&&(Ie=1),Be<0?Be=0:1<Be&&(Be=1);var Le,De,Re=Ee;Le=Me.x+be*Re,De=Me.y+we*Re;var Fe,je,Ne=Ge;Fe=Me.x+be*Ne,je=Me.y+we*Ne;var Ue,Ve,He=Ie;Ue=ke.x+Se*He,Ve=ke.y+Ce*He;var We,Xe,qe=Be;We=ke.x+Se*qe,Xe=ke.y+Ce*qe;var Ye,Ke,Ze,Je,Qe,$e,et,tt,it=(Ye=Le-ke.x)*Ye+(Ke=De-ke.y)*Ke,nt=(Ze=Fe-Te.x)*Ze+(Je=je-Te.y)*Je,rt=(Qe=Ue-Me.x)*Qe+($e=Ve-Me.y)*$e,ot=(et=We-Pe.x)*et+(tt=Xe-Pe.y)*tt,at=0,st=0,lt=null;it<nt?(at=Le,st=De,lt=ke):(at=Fe,st=je,lt=Te,it=nt);var pt=0,ht=0,ut=null;if(rt<ot?(pt=Ue,ht=Ve,ut=Me):(pt=We,ht=Xe,ut=Pe,rt=ot),it<rt?(y.x=at,y.y=st,m.x=lt.x,m.y=lt.y,Q=Math.sqrt(it)):(m.x=pt,m.y=ht,y.x=ut.x,y.y=ut.y,Q=Math.sqrt(rt)),0!=Q){a.x=m.x-y.x,a.y=m.y-y.y;var ct=1/Q;a.x*=ct,a.y*=ct,M&&(a.x=-a.x,a.y=-a.y)}u=Q}else{var dt=0,_t=0;dt=fe.gp0.x,_t=fe.gp0.y;var yt,mt,ft=0,xt=0;yt=(ft=fe.gp1.x)-dt,mt=(xt=fe.gp1.y)-_t;var vt=ye.gnormy*dt-ye.gnormx*_t,zt=ye.gnormy*ft-ye.gnormx*xt,gt=1/(zt-vt),bt=(-ye.tp1-vt)*gt;bt>Qs.epsilon&&(dt+=yt*bt,_t+=mt*bt);var wt=(-ye.tp0-zt)*gt;wt<-Qs.epsilon&&(ft+=yt*wt,xt+=mt*wt);var St=dt*ye.gnormx+_t*ye.gnormy-ye.gprojection,Ct=ft*ye.gnormx+xt*ye.gnormy-ye.gprojection;if(St<Ct){m.x=dt,m.y=_t;var Mt=-St;y.x=m.x+ye.gnormx*Mt,y.y=m.y+ye.gnormy*Mt,u=St}else{m.x=ft,m.y=xt;var Pt=-Ct;y.x=m.x+ye.gnormx*Pt,y.y=m.y+ye.gnormy*Pt,u=Ct}}}else u=s}else u=s}}u<s&&(s=u,i.x=r.x,i.y=r.y,n.x=o.x,n.y=o.y),h=h.next}l=l.next}var kt=r;null!=kt.outer&&(kt.outer.zpp_inner=null,kt.outer=null),kt._isimmutable=null,kt._validate=null,kt._invalidate=null,kt.next=el.zpp_pool,el.zpp_pool=kt;var Tt=o;null!=Tt.outer&&(Tt.outer.zpp_inner=null,Tt.outer=null),Tt._isimmutable=null,Tt._validate=null,Tt._invalidate=null,Tt.next=el.zpp_pool,el.zpp_pool=Tt;var Ot=a;return null!=Ot.outer&&(Ot.outer.zpp_inner=null,Ot.outer=null),Ot._isimmutable=null,Ot._validate=null,Ot._invalidate=null,Ot.next=el.zpp_pool,el.zpp_pool=Ot,s},Ht.distance=function(e,t,i,n,r,o){if(null==o&&(o=1e100),0==e.type&&0==t.type){var a,s=e.circle,l=t.circle,p=0,h=0;p=l.worldCOMx-s.worldCOMx,h=l.worldCOMy-s.worldCOMy;var u=Math.sqrt(p*p+h*h);if((a=u-(s.radius+l.radius))<o){if(0==u)p=1,h=0;else{var c=1/u;p*=c,h*=c}var d=s.radius;i.x=s.worldCOMx+p*d,i.y=s.worldCOMy+h*d;var _=-l.radius;n.x=l.worldCOMx+p*_,n.y=l.worldCOMy+h*_,r.x=p,r.y=h}return a}var y=!1;if(0==e.type&&1==t.type){var m=e;e=t,t=m;var f=i;i=n,n=f,y=!0}if(1==e.type&&0==t.type){for(var x=e.polygon,v=t.circle,z=-1e100,g=null,b=x.edges.head;null!=b;){var w=b.elt,S=w.gnormx*v.worldCOMx+w.gnormy*v.worldCOMy-w.gprojection-v.radius;if(o<S){z=S;break}0<S?z<S&&(z=S,g=w):z<0&&z<S&&(z=S,g=w),b=b.next}if(z<o){var C=g.gp0,M=g.gp1,P=v.worldCOMy*g.gnormx-v.worldCOMx*g.gnormy;if(P<=C.y*g.gnormx-C.x*g.gnormy){var k=0,T=0;k=v.worldCOMx-C.x,T=v.worldCOMy-C.y;var O=Math.sqrt(k*k+T*T);if((z=O-v.radius)<o){if(0==O)k=1,T=0;else{var A=1/O;k*=A,T*=A}i.x=C.x+0*k,i.y=C.y+0*T;var E=-v.radius;n.x=v.worldCOMx+k*E,n.y=v.worldCOMy+T*E,r.x=k,r.y=T}}else if(P>=M.y*g.gnormx-M.x*g.gnormy){var G=0,I=0;G=v.worldCOMx-M.x,I=v.worldCOMy-M.y;var B=Math.sqrt(G*G+I*I);if((z=B-v.radius)<o){if(0==B)G=1,I=0;else{var L=1/B;G*=L,I*=L}i.x=M.x+0*G,i.y=M.y+0*I;var D=-v.radius;n.x=v.worldCOMx+G*D,n.y=v.worldCOMy+I*D,r.x=G,r.y=I}}else{var R=-v.radius;n.x=v.worldCOMx+g.gnormx*R,n.y=v.worldCOMy+g.gnormy*R;var F=-z;i.x=n.x+g.gnormx*F,i.y=n.y+g.gnormy*F,r.x=g.gnormx,r.y=g.gnormy}}return y&&(r.x=-r.x,r.y=-r.y),z}for(var j=e.polygon,N=t.polygon,U=-1e100,V=null,H=null,W=0,X=j.edges.head;null!=X;){for(var q=X.elt,Y=1e100,K=N.gverts.next;null!=K;){var Z=K,J=q.gnormx*Z.x+q.gnormy*Z.y;J<Y&&(Y=J),K=K.next}if(o<(Y-=q.gprojection)){U=Y;break}0<Y?U<Y&&(U=Y,V=q,W=1):U<0&&U<Y&&(U=Y,V=q,W=1),X=X.next}if(U<o){for(var Q=N.edges.head;null!=Q;){for(var $=Q.elt,ee=1e100,te=j.gverts.next;null!=te;){var ie=te,ne=$.gnormx*ie.x+$.gnormy*ie.y;ne<ee&&(ee=ne),te=te.next}if(o<(ee-=$.gprojection)){U=ee;break}0<ee?U<ee&&(U=ee,H=$,W=2):U<0&&U<ee&&(U=ee,H=$,W=2),Q=Q.next}if(U<o){var re,oe;if(1==W)re=N,oe=V;else{re=j,oe=H;var ae=i;i=n,n=ae,y=!y}for(var se=null,le=1e100,pe=re.edges.head;null!=pe;){var he=pe.elt,ue=oe.gnormx*he.gnormx+oe.gnormy*he.gnormy;ue<le&&(le=ue,se=he),pe=pe.next}if(y?(r.x=-oe.gnormx,r.y=-oe.gnormy):(r.x=oe.gnormx,r.y=oe.gnormy),0<=U){var ce,de,_e,ye,me=oe.gp0,fe=oe.gp1,xe=se.gp0,ve=se.gp1,ze=1/((ce=fe.x-me.x)*ce+(de=fe.y-me.y)*de),ge=1/((_e=ve.x-xe.x)*_e+(ye=ve.y-xe.y)*ye),be=-(ce*(me.x-xe.x)+de*(me.y-xe.y))*ze,we=-(ce*(me.x-ve.x)+de*(me.y-ve.y))*ze,Se=-(_e*(xe.x-me.x)+ye*(xe.y-me.y))*ge,Ce=-(_e*(xe.x-fe.x)+ye*(xe.y-fe.y))*ge;be<0?be=0:1<be&&(be=1),we<0?we=0:1<we&&(we=1),Se<0?Se=0:1<Se&&(Se=1),Ce<0?Ce=0:1<Ce&&(Ce=1);var Me,Pe,ke=be;Me=me.x+ce*ke,Pe=me.y+de*ke;var Te,Oe,Ae=we;Te=me.x+ce*Ae,Oe=me.y+de*Ae;var Ee,Ge,Ie=Se;Ee=xe.x+_e*Ie,Ge=xe.y+ye*Ie;var Be,Le,De=Ce;Be=xe.x+_e*De,Le=xe.y+ye*De;var Re,Fe,je,Ne,Ue,Ve,He,We,Xe=(Re=Me-xe.x)*Re+(Fe=Pe-xe.y)*Fe,qe=(je=Te-ve.x)*je+(Ne=Oe-ve.y)*Ne,Ye=(Ue=Ee-me.x)*Ue+(Ve=Ge-me.y)*Ve,Ke=(He=Be-fe.x)*He+(We=Le-fe.y)*We,Ze=0,Je=0,Qe=null;Xe<qe?(Ze=Me,Je=Pe,Qe=xe):(Ze=Te,Je=Oe,Qe=ve,Xe=qe);var $e=0,et=0,tt=null;if(Ye<Ke?($e=Ee,et=Ge,tt=me):($e=Be,et=Le,tt=fe,Ye=Ke),Xe<Ye?(i.x=Ze,i.y=Je,n.x=Qe.x,n.y=Qe.y,U=Math.sqrt(Xe)):(n.x=$e,n.y=et,i.x=tt.x,i.y=tt.y,U=Math.sqrt(Ye)),0!=U){r.x=n.x-i.x,r.y=n.y-i.y;var it=1/U;r.x*=it,r.y*=it,y&&(r.x=-r.x,r.y=-r.y)}return U}var nt=0,rt=0;nt=se.gp0.x,rt=se.gp0.y;var ot,at,st=0,lt=0;ot=(st=se.gp1.x)-nt,at=(lt=se.gp1.y)-rt;var pt=oe.gnormy*nt-oe.gnormx*rt,ht=oe.gnormy*st-oe.gnormx*lt,ut=1/(ht-pt),ct=(-oe.tp1-pt)*ut;ct>Qs.epsilon&&(nt+=ot*ct,rt+=at*ct);var dt=(-oe.tp0-ht)*ut;dt<-Qs.epsilon&&(st+=ot*dt,lt+=at*dt);var _t=nt*oe.gnormx+rt*oe.gnormy-oe.gprojection,yt=st*oe.gnormx+lt*oe.gnormy-oe.gprojection;if(_t<yt){n.x=nt,n.y=rt;var mt=-_t;return i.x=n.x+oe.gnormx*mt,i.y=n.y+oe.gnormy*mt,_t}n.x=st,n.y=lt;var ft=-yt;return i.x=n.x+oe.gnormx*ft,i.y=n.y+oe.gnormy*ft,yt}return o}return o},Ht.prototype.__class__=Ht;var Nt=zpp_nape.geom.ZPP_PartitionPair=function(){this.node=null,this.di=0,this.id=0,this.b=null,this.a=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null};Nt.__name__=["zpp_nape","geom","ZPP_PartitionPair"],Nt.get=function(e,t){var i;return null==Nt.zpp_pool?i=new Nt:(i=Nt.zpp_pool,Nt.zpp_pool=i.next,i.next=null),i.a=e,i.b=t,e.id<t.id?(i.id=e.id,i.di=t.id):(i.id=t.id,i.di=e.id),i},Nt.edge_swap=function(e,t){var i=e.node;e.node=t.node,t.node=i},Nt.edge_lt=function(e,t){return!(e.id>=t.id)||e.id==t.id&&e.di<t.di},Nt.prototype.next=null,Nt.prototype.elem=function(){return this},Nt.prototype.begin=function(){return this.next},Nt.prototype._inuse=null,Nt.prototype.modified=null,Nt.prototype.pushmod=null,Nt.prototype.length=null,Nt.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Nt.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Nt.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Nt.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Nt.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Nt.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Nt.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Nt.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Nt.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Nt.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Nt.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Nt.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Nt.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Nt.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Nt.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Nt.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Nt.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Nt.prototype.clear=function(){},Nt.prototype.inlined_clear=function(){},Nt.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Nt.prototype.empty=function(){return null==this.next},Nt.prototype.size=function(){return this.length},Nt.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Nt.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Nt.prototype.front=function(){return this.next},Nt.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Nt.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Nt.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Nt.prototype.free=function(){this.a=this.b=null,this.node=null},Nt.prototype.alloc=function(){},Nt.prototype.a=null,Nt.prototype.b=null,Nt.prototype.id=null,Nt.prototype.di=null,Nt.prototype.node=null,Nt.prototype.__class__=Nt;var Ut=zpp_nape.geom.ZPP_Triangular=function(){};Ut.__name__=["zpp_nape","geom","ZPP_Triangular"],Ut.lt=function(e,t){return e.y<t.y||e.y==t.y&&e.x<t.x},Ut.right_turn=function(e,t,i){var n,r;n=i.x-t.x,r=i.y-t.y;var o;return o=t.x-e.x,(t.y-e.y)*n-o*r},Ut.delaunay=function(e,t,i,n){var r,o,a,s=0,l=0,p=0;return s=i.x-t.x,l=i.y-t.y,p=t.x-e.x,0<=(t.y-e.y)*s-p*l?a=!0:(s=n.x-i.x,l=n.y-i.y,p=i.x-t.x,a=0<=(i.y-t.y)*s-p*l),a?o=!0:(s=e.x-n.x,l=e.y-n.y,p=n.x-i.x,o=0<=(n.y-i.y)*s-p*l),o?r=!0:(s=t.x-e.x,l=t.y-e.y,p=e.x-n.x,r=0<=(e.y-n.y)*s-p*l),!!r||0<t.x*(i.y*n.mag-i.mag*n.y)-i.x*(t.y*n.mag-t.mag*n.y)+n.x*(t.y*i.mag-t.mag*i.y)-(e.x*(i.y*n.mag-i.mag*n.y)-i.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*i.mag-e.mag*i.y))+(e.x*(t.y*n.mag-t.mag*n.y)-t.x*(e.y*n.mag-e.mag*n.y)+n.x*(e.y*t.mag-e.mag*t.y))-(e.x*(t.y*i.mag-t.mag*i.y)-t.x*(e.y*i.mag-e.mag*i.y)+i.x*(e.y*t.mag-e.mag*t.y))},Ut.optimise=function(e){var t,i=e.vertices,n=e.vertices;if(null!=i)for(var r=i;;){var o=r;if(o.sort(),o.mag=o.x*o.x+o.y*o.y,(r=r.next)==n)break}null==Ut.edgeSet&&(null==Hn.zpp_pool?Ut.edgeSet=new Hn:(Ut.edgeSet=Hn.zpp_pool,Hn.zpp_pool=Ut.edgeSet.next,Ut.edgeSet.next=null),Ut.edgeSet.lt=Nt.edge_lt,Ut.edgeSet.swapped=Nt.edge_swap),null==Nt.zpp_pool?t=new Nt:(t=Nt.zpp_pool,Nt.zpp_pool=t.next,t.next=null);var a=e.vertices,s=e.vertices;if(null!=a)for(var l=a;;){var p=l,h=p.next;p.diagonals.reverse();for(var u=p.diagonals.head;null!=u;){var c=u.elt;if(c.id<p.id)h=c,u=u.next;else{if(!Ut.delaunay(p,h,c,null==u.next?p.prev:u.next.elt)){var d;null==Nt.zpp_pool?d=new Nt:(d=Nt.zpp_pool,Nt.zpp_pool=d.next,d.next=null),d.a=p,d.b=c,p.id<c.id?(d.id=p.id,d.di=c.id):(d.id=c.id,d.di=p.id);var _=d;t.add(_),_.node=Ut.edgeSet.insert(_)}h=c,u=u.next}}if((l=l.next)==s)break}for(;null!=t.next;){for(var y=t.pop_unsafe(),m=y.a,f=y.b,x=m.next,v=null,z=m.diagonals.head;null!=z;){var g=z.elt;if(g==f){v=null==(z=z.next)?m.prev:z.elt;break}x=g,z=z.next}if(m.diagonals.remove(f),f.diagonals.remove(m),f==x.next)x.diagonals.add(v);else for(var b=x.diagonals.head;null!=b;){if(b.elt==f){x.diagonals.insert(b,v);break}b=b.next}if(m==v.next)v.diagonals.add(x);else for(var w=v.diagonals.head;null!=w;){if(w.elt==m){v.diagonals.insert(w,x);break}w=w.next}Ut.edgeSet.remove_node(y.node),y.a=y.b=null,y.node=null,y.next=Nt.zpp_pool,Nt.zpp_pool=y}var S=t;S.a=S.b=null,S.node=null,S.next=Nt.zpp_pool,Nt.zpp_pool=S},Ut.triangulate=function(e){var t=e.vertices,i=e.vertices,n=e.vertices.next,r=e.vertices;if(null!=n)for(var o=n;;){var a=o;if((a.y<t.y||a.y==t.y&&a.x<t.x)&&(t=a),(i.y<a.y||i.y==a.y&&i.x<a.x)&&(i=a),(o=o.next)==r)break}null==Ut.queue&&(Ut.queue=new gi);var s=i.prev,l=i.next;for(Ut.queue.add(i);s!=t||l!=t;)s==t||l!=t&&(s.y<l.y||s.y==l.y&&s.x<l.x)?(Ut.queue.add(l),l.rightchain=!1,l=l.next):(Ut.queue.add(s),s.rightchain=!0,s=s.prev);Ut.queue.add(t),null==Ut.stack&&(Ut.stack=new gi),Ut.stack.add(Ut.queue.pop_unsafe());var p=Ut.queue.pop_unsafe();for(Ut.stack.add(p);;){var h=Ut.queue.pop_unsafe();if(null==Ut.queue.head)break;if(h.rightchain!=Ut.stack.head.elt.rightchain){for(;;){var u=Ut.stack.pop_unsafe();if(null==Ut.stack.head)break;e.add_diagonal(u,h)}Ut.stack.add(p)}else{for(var c=Ut.stack.pop_unsafe();null!=Ut.stack.head;){var d,_,y=Ut.stack.head.elt;d=h.x-c.x,_=h.y-c.y;var m;m=c.x-y.x;var f=(c.y-y.y)*d-m*_;if(h.rightchain&&0<=f||!h.rightchain&&f<=0)break;e.add_diagonal(y,h),c=y,Ut.stack.pop()}Ut.stack.add(c)}Ut.stack.add(h),p=h}if(null!=Ut.stack.head)for(Ut.stack.pop();null!=Ut.stack.head;){var x=Ut.stack.pop_unsafe();if(null==Ut.stack.head)break;e.add_diagonal(i,x)}return e},Ut.prototype.__class__=Ut;var el=zpp_nape.geom.ZPP_Vec2=function(){this.y=0,this.x=0,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.weak=!1,this.outer=null,this._isimmutable=null,this._immutable=!1,this._validate=null,this._invalidate=null};el.__name__=["zpp_nape","geom","ZPP_Vec2"],el.get=function(e,t,i){var n;return null==i&&(i=!1),null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=i,n.x=e,n.y=t,n},el.prototype._invalidate=null,el.prototype._validate=null,el.prototype.validate=function(){null!=this._validate&&this._validate()},el.prototype.invalidate=function(){null!=this._invalidate&&this._invalidate(this)},el.prototype._immutable=null,el.prototype._isimmutable=null,el.prototype.immutable=function(){},el.prototype.outer=null,el.prototype.wrapper=function(){if(null==this.outer){this.outer=new ht;var e=this.outer.zpp_inner;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e._isimmutable=null,e._validate=null,e._invalidate=null,e.next=el.zpp_pool,el.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},el.prototype.weak=null,el.prototype.free=function(){null!=this.outer&&(this.outer.zpp_inner=null,this.outer=null),this._isimmutable=null,this._validate=null,this._invalidate=null},el.prototype.alloc=function(){this.weak=!1},el.prototype.next=null,el.prototype.elem=function(){return this},el.prototype.begin=function(){return this.next},el.prototype._inuse=null,el.prototype.modified=null,el.prototype.pushmod=null,el.prototype.length=null,el.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},el.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},el.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},el.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},el.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},el.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},el.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},el.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},el.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},el.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},el.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},el.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},el.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},el.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},el.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},el.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},el.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},el.prototype.clear=function(){},el.prototype.inlined_clear=function(){},el.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},el.prototype.empty=function(){return null==this.next},el.prototype.size=function(){return this.length},el.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},el.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},el.prototype.front=function(){return this.next},el.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},el.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},el.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},el.prototype.x=null,el.prototype.y=null,el.prototype.copy=function(){var e,t=this.x,i=this.y;return null==el.zpp_pool?e=new el:(e=el.zpp_pool,el.zpp_pool=e.next,e.next=null),e.weak=!1,e._immutable=!1,e.x=t,e.y=i,e},el.prototype.toString=function(){return"{ x: "+this.x+" y: "+this.y+" }"},el.prototype.__class__=el;var Wt=zpp_nape.geom.ZPP_Vec3=function(){this._validate=null,this.immutable=!1,this.z=0,this.y=0,this.x=0,this.outer=null,this.immutable=!1,this._validate=null};Wt.__name__=["zpp_nape","geom","ZPP_Vec3"],Wt.prototype.outer=null,Wt.prototype.x=null,Wt.prototype.y=null,Wt.prototype.z=null,Wt.prototype.immutable=null,Wt.prototype._validate=null,Wt.prototype.validate=function(){null!=this._validate&&this._validate()},Wt.prototype.__class__=Wt;var Xt=zpp_nape.geom.ZPP_VecMath=function(){};Xt.__name__=["zpp_nape","geom","ZPP_VecMath"],Xt.vec_dsq=function(e,t,i,n){var r,o;return(r=e-i)*r+(o=t-n)*o},Xt.vec_distance=function(e,t,i,n){var r,o;return r=e-i,o=t-n,Math.sqrt(r*r+o*o)},Xt.prototype.__class__=Xt;var qo=zpp_nape.phys.ZPP_Interactor=function(){this.wrap_cbTypes=null,this.cbSet=null,this.cbTypes=null,this.group=null,this.cbsets=null,this.icompound=null,this.ibody=null,this.ishape=null,this.userData=null,this.id=0,this.outer_i=null,this.id=ke.Interactor(),this.cbsets=new yi,this.cbTypes=new Fe};qo.__name__=["zpp_nape","phys","ZPP_Interactor"],qo.get=function(e,t){for(var i=e.id<t.id?e.id:t.id,n=e.id<t.id?t.id:e.id,r=null,o=(e.cbsets.length<t.cbsets.length?e.cbsets:t.cbsets).head;null!=o;){var a=o.elt;if(a.id==i&&a.di==n){r=a;break}o=o.next}return r},qo.int_callback=function(e,t,i){var n,r=e.int1,o=e.int2,a=t.options1,s=r.cbTypes;if(a.nonemptyintersection(s,a.includes)&&!a.nonemptyintersection(s,a.excludes)){var l=t.options2,p=o.cbTypes;n=!!l.nonemptyintersection(p,l.includes)&&!l.nonemptyintersection(p,l.excludes)}else n=!1;n?(i.int1=r,i.int2=o):(i.int1=o,i.int2=r)},qo.prototype.outer_i=null,qo.prototype.id=null,qo.prototype.userData=null,qo.prototype.ishape=null,qo.prototype.ibody=null,qo.prototype.icompound=null,qo.prototype.isShape=function(){return null!=this.ishape},qo.prototype.isBody=function(){return null!=this.ibody},qo.prototype.isCompound=function(){return null!=this.icompound},qo.prototype.__iaddedToSpace=function(){null!=this.group&&this.group.interactors.add(this);for(var e=this.cbTypes.head;null!=e;)e.elt.interactors.add(this),e=e.next;this.alloc_cbSet()},qo.prototype.__iremovedFromSpace=function(){null!=this.group&&this.group.interactors.remove(this);for(var e=this.cbTypes.head;null!=e;)e.elt.interactors.remove(this),e=e.next;this.dealloc_cbSet()},qo.prototype.wake=function(){if(null!=this.ishape){var e=this.ishape.body;null!=e&&null!=e.space&&e.space.non_inlined_wake(e)}else null!=this.ibody?null!=this.ibody.space&&this.ibody.space.non_inlined_wake(this.ibody):null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound)},qo.prototype.cbsets=null,qo.prototype.getSpace=function(){return null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space},qo.prototype.group=null,qo.prototype.cbTypes=null,qo.prototype.cbSet=null,qo.prototype.wrap_cbTypes=null,qo.prototype.setupcbTypes=function(){this.wrap_cbTypes=Tn.get(this.cbTypes),this.wrap_cbTypes.zpp_inner.adder=$(this,this.wrap_cbTypes_adder),this.wrap_cbTypes.zpp_inner.subber=$(this,this.wrap_cbTypes_subber),this.wrap_cbTypes.zpp_inner.dontremove=!0},qo.prototype.wrap_cbTypes_subber=function(e){var t=e.zpp_inner;if(this.cbTypes.has(t)){var i=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=i&&(this.dealloc_cbSet(),t.interactors.remove(this)),this.cbTypes.remove(t),null!=i&&(this.alloc_cbSet(),this.wake())}},qo.prototype.wrap_cbTypes_adder=function(e){return this.insert_cbtype(e.zpp_inner),!1},qo.prototype.insert_cbtype=function(e){if(!this.cbTypes.has(e)){var t=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=t&&(this.dealloc_cbSet(),e.interactors.add(this));for(var i=null,n=this.cbTypes.head;null!=n&&!(e.id<n.elt.id);)n=(i=n).next;var r,o=this.cbTypes;null==ji.zpp_pool?r=new ji:(r=ji.zpp_pool,ji.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;null==i?(a.next=o.head,o.head=a):(a.next=i.next,i.next=a),o.pushmod=o.modified=!0,o.length++,null!=t&&(this.alloc_cbSet(),this.wake())}},qo.prototype.alloc_cbSet=function(){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=(this.cbSet=e.cbsets.get(this.cbTypes))&&(this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),e.freshInteractorType(this))},qo.prototype.dealloc_cbSet=function(){var e=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=this.cbSet){if(this.cbSet.interactors.remove(this),e.nullInteractorType(this),0==--this.cbSet.count){e.cbsets.remove(this.cbSet);var t=this.cbSet;for(t.listeners.clear(),t.zip_listeners=!0,t.bodylisteners.clear(),t.zip_bodylisteners=!0,t.conlisteners.clear(),t.zip_conlisteners=!0;null!=t.cbTypes.head;)t.cbTypes.pop_unsafe().cbsets.remove(t);t.next=jo.zpp_pool,jo.zpp_pool=t}this.cbSet=null}},qo.prototype.setGroup=function(e){if(this.group!=e){var t=null!=(null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space);t&&null!=this.group&&this.group.interactors.remove(this),this.group=e,t&&null!=e&&e.interactors.add(this),t&&(null!=this.ishape?this.ishape.body.wake():null!=this.ibody?this.ibody.wake():this.icompound.wake())}},qo.prototype.immutable_midstep=function(e){null==this.ibody&&(null!=this.ishape?this.ishape.__immutable_midstep(e):this.icompound.__imutable_midstep(e))},qo.prototype.lookup_group=function(){for(var e=this;null!=e&&null==e.group;)e=null!=e.ishape?e.ishape.body:null!=e.icompound?e.icompound.compound:e.ibody.compound;return null==e?null:e.group},qo.prototype.copyto=function(e){e.zpp_inner_i.group=this.group;var t=this.outer_i;null==t.zpp_inner_i.wrap_cbTypes&&t.zpp_inner_i.setupcbTypes();var i=t.zpp_inner_i.wrap_cbTypes;i.zpp_inner.valmod();for(var n=Ve.get(i);;){n.zpp_inner.zpp_inner.valmod();var r=n.zpp_inner;r.zpp_inner.valmod(),r.zpp_inner.zip_length&&(r.zpp_inner.zip_length=!1,r.zpp_inner.user_length=r.zpp_inner.inner.length);var o,a=r.zpp_inner.user_length;if(n.zpp_critical=!0,n.zpp_i<a?o=!0:(n.zpp_next=Ve.zpp_pool,(Ve.zpp_pool=n).zpp_inner=null,o=!1),!o)break;n.zpp_critical=!1;var s=n.zpp_inner.at(n.zpp_i++);null==e.zpp_inner_i.wrap_cbTypes&&e.zpp_inner_i.setupcbTypes();var l=e.zpp_inner_i.wrap_cbTypes;l.zpp_inner.reverse_flag?l.push(s):l.unshift(s)}null!=this.userData&&(e.zpp_inner_i.userData=_.copy(this.userData))},qo.prototype.__class__=qo;var qt=zpp_nape.phys.ZPP_Body=function(){var e;this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_aabb=!1,this.aabb=null,this.norotate=!1,this.sinertia=0,this.iinertia=0,this.cinertia=0,this.zip_inertia=!1,this.inertia=0,this.inertiaMode=0,this.zip_gravMassScale=!1,this.gravMassScale=0,this.gravMassMode=0,this.zip_gravMass=!1,this.gravMass=0,this.nomove=!1,this.cmass=0,this.smass=0,this.imass=0,this.massMode=0,this.zip_mass=!1,this.mass=0,this.zip_axis=!1,this.axisy=0,this.axisx=0,this.rot=0,this.pre_rot=0,this.kinangvel=0,this.torque=0,this.angvel=0,this.wrapcvel=null,this.wrap_svel=null,this.svely=0,this.svelx=0,this.wrap_kinvel=null,this.kinvely=0,this.kinvelx=0,this.wrap_force=null,this.forcey=0,this.forcex=0,this.wrap_vel=null,this.vely=0,this.velx=0,this.wrap_pos=null,this.posy=0,this.posx=0,this.pre_posy=0,this.pre_posx=0,this.disableCCD=!1,this.bulletEnabled=!1,this.bullet=!1,this.sweepRadius=0,this.sweepFrozen=!1,this.sweep_angvel=0,this.sweepTime=0,this.graph_depth=0,this.component=null,this.wrap_constraints=null,this.constraints=null,this.wrap_arbiters=null,this.arbiters=null,this.space=null,this.wrap_shapes=null,this.shapes=null,this.compound=null,this.type=0,this.world=!1,this.outer=null,qo.call(this),(this.ibody=this).world=!1,this.bulletEnabled=!1,this.sweepTime=0,this.sweep_angvel=0,this.norotate=this.nomove=!1,this.disableCCD=!1,this.posx=0,this.posy=0,this.rot=0,this.axisx=0,this.axisy=1,this.svelx=0,this.svely=0,this.velx=0,this.vely=0,this.kinvelx=0,this.kinvely=0,this.forcex=0,this.forcey=0,this.torque=this.angvel=this.kinangvel=0,this.pre_posx=1/0,this.pre_posy=1/0,this.pre_rot=1/0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.zip_aabb=!0,null==Ao.zpp_pool?e=new Ao:(e=Ao.zpp_pool,Ao.zpp_pool=e.next,e.next=null),e.minx=0,e.miny=0,e.maxx=0,e.maxy=0,this.aabb=e,this.aabb._immutable=!0,this.aabb._validate=$(this,this.aabb_validate),this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.arbiters=new vi,this.constraints=new Ee,this.shapes=new mi,this.wrap_shapes=Bn.get(this.shapes),this.wrap_shapes.zpp_inner.adder=$(this,this.shapes_adder),this.wrap_shapes.zpp_inner.subber=$(this,this.shapes_subber),this.wrap_shapes.zpp_inner._invalidate=$(this,this.shapes_invalidate),this.kinematicDelaySleep=!1};qt.__name__=["zpp_nape","phys","ZPP_Body"],qt.__super__=qo,qt.prototype=Object.create(qo.prototype),qt.bodysetlt=function(e,t){return e.id<t.id},qt.__static=function(){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var e=new re(Uo.BodyType_STATIC),t=e.zpp_inner;return t.world=!0,t.wrap_shapes.zpp_inner.immutable=!0,t.smass=t.imass=t.cmass=t.mass=t.gravMass=0,t.sinertia=t.iinertia=t.cinertia=t.inertia=0,t.cbTypes.clear(),e},qt.prototype.outer=null,qt.prototype.world=null,qt.prototype.type=null,qt.prototype.isStatic=function(){return 1==this.type},qt.prototype.isDynamic=function(){return 2==this.type},qt.prototype.isKinematic=function(){return 3==this.type},qt.prototype.invalidate_type=function(){this.invalidate_mass(),this.invalidate_inertia()},qt.prototype.compound=null,qt.prototype.shapes=null,qt.prototype.wrap_shapes=null,qt.prototype.invalidate_shapes=function(){this.zip_aabb=!0,this.zip_localCOM=!0,this.zip_worldCOM=!0,this.invalidate_mass(),this.invalidate_inertia()},qt.prototype.space=null,qt.prototype.arbiters=null,qt.prototype.wrap_arbiters=null,qt.prototype.constraints=null,qt.prototype.wrap_constraints=null,qt.prototype.component=null,qt.prototype.graph_depth=null,qt.prototype.init_bodysetlist=function(){null==qt.bodyset&&(qt.bodyset=new Nn,qt.bodyset.lt=qt.bodysetlt,qt.bodystack=new fi)},qt.prototype.connectedBodies_cont=function(e){qt.bodyset.try_insert_bool(e.zpp_inner)&&(qt.bodystack.add(e.zpp_inner),e.zpp_inner.graph_depth=qt.cur_graph_depth+1)},qt.prototype.connectedBodies=function(e,t){null==qt.bodyset&&(qt.bodyset=new Nn,qt.bodyset.lt=qt.bodysetlt,qt.bodystack=new fi);var i=null==t?new ee:t;for(qt.bodystack.add(this),qt.bodyset.insert(this),this.graph_depth=0;null!=qt.bodystack.head;){var n=qt.bodystack.pop_unsafe();if(n.graph_depth!=e){qt.cur_graph_depth=n.graph_depth;for(var r=n.constraints.head;null!=r;)r.elt.outer.visitBodies($(this,this.connectedBodies_cont)),r=r.next}}var o=qt.bodyset;if(null!=o.parent){for(var a=o.parent;null!=a;)if(null!=a.prev)a=a.prev;else if(null!=a.next)a=a.next;else{var s=a.data;if(s!=this){var l=s.outer;i.zpp_inner.reverse_flag?i.push(l):i.unshift(l)}var p=a.parent;null!=p&&(a==p.prev?p.prev=null:p.next=null,a.parent=null);var h=a;h.data=null,h.lt=null,h.swapped=null,h.next=Nn.zpp_pool,Nn.zpp_pool=h,a=p}o.parent=null}return i},qt.prototype.interactingBodies=function(e,t,i){null==qt.bodyset&&(qt.bodyset=new Nn,qt.bodyset.lt=qt.bodysetlt,qt.bodystack=new fi);var n=null==i?new ee:i;for(qt.bodyset.insert(this),qt.bodystack.add(this),this.graph_depth=0;null!=qt.bodystack.head;){var r=qt.bodystack.pop_unsafe();if(r.graph_depth!=t)for(var o=r.arbiters.head;null!=o;){var a=o.elt;if(0!=(a.type&e)){var s=a.b1==r?a.b2:a.b1;qt.bodyset.try_insert_bool(s)&&(qt.bodystack.add(s),s.graph_depth=r.graph_depth+1)}o=o.next}}var l=qt.bodyset;if(null!=l.parent){for(var p=l.parent;null!=p;)if(null!=p.prev)p=p.prev;else if(null!=p.next)p=p.next;else{var h=p.data;if(h!=this){var u=h.outer;n.zpp_inner.reverse_flag?n.push(u):n.unshift(u)}var c=p.parent;null!=c&&(p==c.prev?c.prev=null:c.next=null,p.parent=null);var d=p;d.data=null,d.lt=null,d.swapped=null,d.next=Nn.zpp_pool,Nn.zpp_pool=d,p=c}l.parent=null}return n},qt.prototype.atRest=function(e){if(2!=this.type)return this.component.sleeping;var t,i=Qs.linearSleepThreshold;if(i*=i,this.velx*this.velx+this.vely*this.vely>i)t=!1;else{var n,r,o=this.posx,a=this.posy;if(.25*i*e*e<(n=o-this.pre_posx)*n+(r=a-this.pre_posy)*r)t=!1;else{var s,l,p=(s=this.aabb.maxx-this.aabb.minx)*s+(l=this.aabb.maxy-this.aabb.miny)*l,h=Qs.angularSleepThreshold;if(h*=h,4*this.angvel*this.angvel*p>h)t=!1;else{var u=this.rot-this.pre_rot;t=!(h*e*e<u*u*p)}}}return t||(this.component.waket=this.space.stamp),this.component.waket+Qs.sleepDelay<this.space.stamp},qt.prototype.refreshArbiters=function(){for(var e=this.arbiters.head;null!=e;)e.elt.invalidated=!0,e=e.next},qt.prototype.sweepTime=null,qt.prototype.sweep_angvel=null,qt.prototype.sweepFrozen=null,qt.prototype.sweepRadius=null,qt.prototype.bullet=null,qt.prototype.bulletEnabled=null,qt.prototype.disableCCD=null,qt.prototype.sweepIntegrate=function(e){var t=e-this.sweepTime;if(0!=t&&(this.sweepTime=e,this.posx+=this.velx*t,this.posy+=this.vely*t,0!=this.angvel)){var i=this.sweep_angvel*t;if(this.rot+=i,1e-4<i*i)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var n=i*i,r=1-.5*n,o=1-n*n/8,a=(r*this.axisx+i*this.axisy)*o;this.axisy=(r*this.axisy-i*this.axisx)*o,this.axisx=a}}},qt.prototype.sweepValidate=function(e){if(0==e.type)e.worldCOMx=this.posx+(this.axisy*e.localCOMx-this.axisx*e.localCOMy),e.worldCOMy=this.posy+(e.localCOMx*this.axisx+e.localCOMy*this.axisy);else{for(var t=e.polygon,i=t.lverts.next,n=t.gverts.next;null!=n;){var r=n,o=i;i=i.next,r.x=this.posx+(this.axisy*o.x-this.axisx*o.y),r.y=this.posy+(o.x*this.axisx+o.y*this.axisy),n=n.next}var a=t.edges.head,s=t.gverts.next,l=s;for(s=s.next;null!=s;){var p=s,h=a.elt;a=a.next,h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy,h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy,h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection,h.tp0=l.y*h.gnormx-l.x*h.gnormy,h.tp1=p.y*h.gnormx-p.x*h.gnormy,l=p,s=s.next}var u=t.gverts.next,c=a.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*c.lnormy,c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy,c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection,c.tp0=l.y*c.gnormx-l.x*c.gnormy,c.tp1=u.y*c.gnormx-u.x*c.gnormy}},qt.prototype.pre_posx=null,qt.prototype.pre_posy=null,qt.prototype.posx=null,qt.prototype.posy=null,qt.prototype.wrap_pos=null,qt.prototype.velx=null,qt.prototype.vely=null,qt.prototype.wrap_vel=null,qt.prototype.forcex=null,qt.prototype.forcey=null,qt.prototype.wrap_force=null,qt.prototype.kinvelx=null,qt.prototype.kinvely=null,qt.prototype.wrap_kinvel=null,qt.prototype.svelx=null,qt.prototype.svely=null,qt.prototype.wrap_svel=null,qt.prototype.invalidate_pos=function(){for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0},qt.prototype.pos_invalidate=function(e){if(this.immutable_midstep("Body::position"),this.posx!=e.x||this.posy!=e.y){this.posx=e.x,this.posy=e.y;for(var t=this.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}this.zip_worldCOM=!0,this.wake()}},qt.prototype.pos_validate=function(){this.wrap_pos.zpp_inner.x=this.posx,this.wrap_pos.zpp_inner.y=this.posy},qt.prototype.vel_invalidate=function(e){this.velx=e.x,this.vely=e.y,this.wake()},qt.prototype.vel_validate=function(){this.wrap_vel.zpp_inner.x=this.velx,this.wrap_vel.zpp_inner.y=this.vely},qt.prototype.kinvel_invalidate=function(e){this.kinvelx=e.x,this.kinvely=e.y,this.wake()},qt.prototype.kinvel_validate=function(){this.wrap_kinvel.zpp_inner.x=this.kinvelx,this.wrap_kinvel.zpp_inner.y=this.kinvely},qt.prototype.svel_invalidate=function(e){this.svelx=e.x,this.svely=e.y,this.wake()},qt.prototype.svel_validate=function(){this.wrap_svel.zpp_inner.x=this.svelx,this.wrap_svel.zpp_inner.y=this.svely},qt.prototype.force_invalidate=function(e){this.forcex=e.x,this.forcey=e.y,this.wake()},qt.prototype.force_validate=function(){this.wrap_force.zpp_inner.x=this.forcex,this.wrap_force.zpp_inner.y=this.forcey},qt.prototype.setupPosition=function(){var e,t=this.posx,i=this.posy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_pos=e,this.wrap_pos.zpp_inner._inuse=!0,this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=$(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=$(this,this.pos_validate))},qt.prototype.setupVelocity=function(){var e,t=this.velx,i=this.vely;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_vel=e,this.wrap_vel.zpp_inner._inuse=!0,this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=$(this,this.vel_invalidate),this.wrap_vel.zpp_inner._validate=$(this,this.vel_validate))},qt.prototype.setupkinvel=function(){var e,t=this.kinvelx,i=this.kinvely;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_kinvel=e,this.wrap_kinvel.zpp_inner._inuse=!0,this.world?this.wrap_kinvel.zpp_inner._immutable=!0:(this.wrap_kinvel.zpp_inner._invalidate=$(this,this.kinvel_invalidate),this.wrap_kinvel.zpp_inner._validate=$(this,this.kinvel_validate))},qt.prototype.setupsvel=function(){var e,t=this.svelx,i=this.svely;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_svel=e,this.wrap_svel.zpp_inner._inuse=!0,this.world?this.wrap_svel.zpp_inner._immutable=!0:(this.wrap_svel.zpp_inner._invalidate=$(this,this.svel_invalidate),this.wrap_svel.zpp_inner._validate=$(this,this.svel_validate))},qt.prototype.setupForce=function(){var e,t=this.forcex,i=this.forcey;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_force=e,this.wrap_force.zpp_inner._inuse=!0,this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=$(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=$(this,this.force_validate))},qt.prototype.cvel_validate=function(){this.wrapcvel.zpp_inner.x=this.velx+this.kinvelx,this.wrapcvel.zpp_inner.y=this.vely+this.kinvely,this.wrapcvel.zpp_inner.z=this.angvel+this.kinangvel},qt.prototype.wrapcvel=null,qt.prototype.setup_cvel=function(){this.wrapcvel=Z.get(),this.wrapcvel.zpp_inner.immutable=!0,this.wrapcvel.zpp_inner._validate=$(this,this.cvel_validate)},qt.prototype.angvel=null,qt.prototype.torque=null,qt.prototype.kinangvel=null,qt.prototype.pre_rot=null,qt.prototype.rot=null,qt.prototype.invalidate_rot=function(){this.zip_axis=!0;for(var e=this.shapes.head;null!=e;){var t=e.elt;1==t.type&&(t.polygon.invalidate_gverts(),t.polygon.invalidate_gaxi()),t.invalidate_worldCOM(),e=e.next}this.zip_worldCOM=!0},qt.prototype.axisx=null,qt.prototype.axisy=null,qt.prototype.zip_axis=null,qt.prototype.validate_axis=function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot))},qt.prototype.quick_validate_axis=function(){this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)},qt.prototype.delta_rot=function(e){if(this.rot+=e,1e-4<e*e)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot);else{var t=e*e,i=1-.5*t,n=1-t*t/8,r=(i*this.axisx+e*this.axisy)*n;this.axisy=(i*this.axisy-e*this.axisx)*n,this.axisx=r}},qt.prototype.kinematicDelaySleep=null,qt.prototype.mass=null,qt.prototype.zip_mass=null,qt.prototype.massMode=null,qt.prototype.imass=null,qt.prototype.smass=null,qt.prototype.cmass=null,qt.prototype.nomove=null,qt.prototype.invalidate_mass=function(){this.zip_mass=!0,this.invalidate_gravMass()},qt.prototype.validate_mass=function(){if(this.zip_mass||(this.massMode,0)){if(this.zip_mass=!1,0==this.massMode){this.cmass=0;for(var e=this.shapes.head;null!=e;){var t=e.elt;t.refmaterial.density=t.material.density,t.validate_area_inertia(),this.cmass+=t.area*t.material.density,e=e.next}}2!=this.type||this.nomove?(this.mass=1/0,this.imass=this.smass=0):(this.mass=this.cmass,this.imass=this.smass=1/this.mass)}},qt.prototype.gravMass=null,qt.prototype.zip_gravMass=null,qt.prototype.gravMassMode=null,qt.prototype.gravMassScale=null,qt.prototype.zip_gravMassScale=null,qt.prototype.invalidate_gravMass=function(){1!=this.gravMassMode&&(this.zip_gravMass=!0),2!=this.gravMassMode&&(this.zip_gravMassScale=!0),this.wake()},qt.prototype.validate_gravMass=function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),0==this.gravMassMode?(this.validate_mass(),this.gravMass=this.cmass):2==this.gravMassMode&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},qt.prototype.invalidate_gravMassScale=function(){2!=this.gravMassMode?this.zip_gravMassScale=!0:this.invalidate_gravMass()},qt.prototype.validate_gravMassScale=function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,0==this.gravMassMode?this.gravMassScale=1:1==this.gravMassMode&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},qt.prototype.inertiaMode=null,qt.prototype.inertia=null,qt.prototype.zip_inertia=null,qt.prototype.cinertia=null,qt.prototype.iinertia=null,qt.prototype.sinertia=null,qt.prototype.norotate=null,qt.prototype.invalidate_inertia=function(){this.zip_inertia=!0,this.wake()},qt.prototype.validate_inertia=function(){if(this.zip_inertia||(this.inertiaMode,0)){if(this.zip_inertia=!1,0==this.inertiaMode){this.cinertia=0;for(var e=this.shapes.head;null!=e;){var t=e.elt;t.refmaterial.density=t.material.density,t.validate_area_inertia(),this.cinertia+=t.inertia*t.area*t.material.density,e=e.next}}2!=this.type||this.norotate?(this.inertia=1/0,this.sinertia=this.iinertia=0):(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia)}},qt.prototype.invalidate_wake=function(){this.wake()},qt.prototype.aabb=null,qt.prototype.zip_aabb=null,qt.prototype.validate_aabb=function(){if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var e=this.shapes.head;null!=e;){var t=e.elt;if(t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var i=t.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var l=o;r+=s.x*(l.y-a.y);var p=l.y*s.x-l.x*s.y;n.localCOMx+=(s.x+l.x)*p,n.localCOMy+=(s.y+l.y)*p,a=s,s=l,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var c=o=o.next;r+=h.x*(c.y-a.y);var d=c.y*h.x-c.x*h.y;n.localCOMx+=(h.x+c.x)*d,n.localCOMy+=(h.y+c.y)*d;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var m=i.radius,f=i.radius;i.aabb.minx=i.worldCOMx-m,i.aabb.miny=i.worldCOMy-f,i.aabb.maxx=i.worldCOMx+m,i.aabb.maxy=i.worldCOMy+f}else{var x=t.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var v=x.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var z=x.lverts.next,g=x.gverts.next;null!=g;){var b=g,w=z;z=z.next,b.x=x.body.posx+(x.body.axisy*w.x-x.body.axisx*w.y),b.y=x.body.posy+(w.x*x.body.axisx+w.y*x.body.axisy),g=g.next}}var S=x.gverts.next;x.aabb.minx=S.x,x.aabb.miny=S.y,x.aabb.maxx=S.x,x.aabb.maxy=S.y;for(var C=x.gverts.next.next;null!=C;){var M=C;M.x<x.aabb.minx&&(x.aabb.minx=M.x),M.x>x.aabb.maxx&&(x.aabb.maxx=M.x),M.y<x.aabb.miny&&(x.aabb.miny=M.y),M.y>x.aabb.maxy&&(x.aabb.maxy=M.y),C=C.next}}var P=this.aabb,k=t.aabb;k.minx<P.minx&&(P.minx=k.minx),k.maxx>P.maxx&&(P.maxx=k.maxx),k.miny<P.miny&&(P.miny=k.miny),k.maxy>P.maxy&&(P.maxy=k.maxy),e=e.next}}},qt.prototype.invalidate_aabb=function(){this.zip_aabb=!0},qt.prototype.localCOMx=null,qt.prototype.localCOMy=null,qt.prototype.zip_localCOM=null,qt.prototype.worldCOMx=null,qt.prototype.worldCOMy=null,qt.prototype.zip_worldCOM=null,qt.prototype.wrap_localCOM=null,qt.prototype.wrap_worldCOM=null,qt.prototype.invalidate_localCOM=function(){this.zip_localCOM=!0,this.zip_worldCOM=!0},qt.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0},qt.prototype.validate_localCOM=function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var e=0,t=0,i=0,n=this.shapes.head;null!=n;){var r=n.elt;if(r.zip_localCOM){if(r.zip_localCOM=!1,1==r.type){var o=r.polygon;if(null==o.lverts.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y;else if(null==o.lverts.next.next.next)o.localCOMx=o.lverts.next.x,o.localCOMy=o.lverts.next.y,o.localCOMx+=o.lverts.next.next.x,o.localCOMy+=o.lverts.next.next.y,o.localCOMx*=.5,o.localCOMy*=.5;else{o.localCOMx=0;var a=o.localCOMy=0,s=o.lverts.next,l=s,p=s=s.next;for(s=s.next;null!=s;){var h=s;a+=p.x*(h.y-l.y);var u=h.y*p.x-h.x*p.y;o.localCOMx+=(p.x+h.x)*u,o.localCOMy+=(p.y+h.y)*u,l=p,p=h,s=s.next}var c=s=o.lverts.next;a+=p.x*(c.y-l.y);var d=c.y*p.x-c.x*p.y;o.localCOMx+=(p.x+c.x)*d,o.localCOMy+=(p.y+c.y)*d,l=p;var _=s=s.next;a+=c.x*(_.y-l.y);var y=_.y*c.x-_.x*c.y;o.localCOMx+=(c.x+_.x)*y,o.localCOMy+=(c.y+_.y)*y;var m=a=1/(3*a);o.localCOMx*=m,o.localCOMy*=m}}null!=r.wrap_localCOM&&(r.wrap_localCOM.zpp_inner.x=r.localCOMx,r.wrap_localCOM.zpp_inner.y=r.localCOMy)}r.validate_area_inertia();var f=r.area*r.material.density;e+=r.localCOMx*f,t+=r.localCOMy*f,i+=r.area*r.material.density,n=n.next}if(0!=i){var x=1/i;this.localCOMx=e*x,this.localCOMy=t*x}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy),this.zip_mass&&0==this.massMode&&(this.zip_mass=!1,this.cmass=i,2==this.type?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=1/0,this.imass=this.smass=0))}},qt.prototype.validate_worldCOM=function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot)),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},qt.prototype.getlocalCOM=function(){this.validate_localCOM()},qt.prototype.getworldCOM=function(){this.validate_worldCOM()},qt.prototype.__immutable_midstep=function(e){},qt.prototype.clear=function(){for(;null!=this.shapes.head;){var e=this.shapes.pop_unsafe();e.removedFromBody(),e.body=null}this.invalidate_shapes(),this.pre_posx=0,this.pre_posy=0,this.posx=0,this.posy=0,this.velx=0,this.vely=0,this.forcex=0,this.forcey=0,this.kinvelx=0,this.kinvely=0,this.svelx=0,this.svely=0,this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=0;for(var t=this.shapes.head;null!=t;){var i=t.elt;1==i.type&&(i.polygon.invalidate_gverts(),i.polygon.invalidate_gaxi()),i.invalidate_worldCOM(),t=t.next}this.zip_worldCOM=!0,this.zip_axis=!0;for(var n=this.shapes.head;null!=n;){var r=n.elt;1==r.type&&(r.polygon.invalidate_gverts(),r.polygon.invalidate_gaxi()),r.invalidate_worldCOM(),n=n.next}this.zip_worldCOM=!0,this.axisx=0,this.axisy=1,this.zip_axis=!1,this.massMode=0,this.gravMassMode=0,this.gravMassScale=1,this.inertiaMode=0,this.norotate=!1,this.nomove=!1},qt.prototype.aabb_validate=function(){if(this.zip_aabb){this.zip_aabb=!1,this.aabb.minx=1/0,this.aabb.miny=1/0,this.aabb.maxx=-1/0,this.aabb.maxy=-1/0;for(var e=this.shapes.head;null!=e;){var t=e.elt;if(t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var i=t.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var l=o;r+=s.x*(l.y-a.y);var p=l.y*s.x-l.x*s.y;n.localCOMx+=(s.x+l.x)*p,n.localCOMy+=(s.y+l.y)*p,a=s,s=l,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var c=o=o.next;r+=h.x*(c.y-a.y);var d=c.y*h.x-c.x*h.y;n.localCOMx+=(h.x+c.x)*d,n.localCOMy+=(h.y+c.y)*d;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var m=i.radius,f=i.radius;i.aabb.minx=i.worldCOMx-m,i.aabb.miny=i.worldCOMy-f,i.aabb.maxx=i.worldCOMx+m,i.aabb.maxy=i.worldCOMy+f}else{var x=t.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var v=x.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var z=x.lverts.next,g=x.gverts.next;null!=g;){var b=g,w=z;z=z.next,b.x=x.body.posx+(x.body.axisy*w.x-x.body.axisx*w.y),b.y=x.body.posy+(w.x*x.body.axisx+w.y*x.body.axisy),g=g.next}}var S=x.gverts.next;x.aabb.minx=S.x,x.aabb.miny=S.y,x.aabb.maxx=S.x,x.aabb.maxy=S.y;for(var C=x.gverts.next.next;null!=C;){var M=C;M.x<x.aabb.minx&&(x.aabb.minx=M.x),M.x>x.aabb.maxx&&(x.aabb.maxx=M.x),M.y<x.aabb.miny&&(x.aabb.miny=M.y),M.y>x.aabb.maxy&&(x.aabb.maxy=M.y),C=C.next}}var P=this.aabb,k=t.aabb;k.minx<P.minx&&(P.minx=k.minx),k.maxx>P.maxx&&(P.maxx=k.maxx),k.miny<P.miny&&(P.miny=k.miny),k.maxy>P.maxy&&(P.maxy=k.maxy),e=e.next}}},qt.prototype.shapes_adder=function(e){if(e.zpp_inner.body!=this){if(null!=e.zpp_inner.body&&e.zpp_inner.body.wrap_shapes.remove(e),e.zpp_inner.body=this,e.zpp_inner.addedToBody(),null!=this.space){var t=this.space,i=e.zpp_inner,n=i.body;n.world||(n.component.waket=t.stamp+(t.midstep?0:1),3==n.type&&(n.kinematicDelaySleep=!0),n.component.sleeping&&t.really_wake(n,!1)),t.bphase.insert(i),i.addedToSpace()}return 1==e.zpp_inner.type&&(e.zpp_inner.polygon.invalidate_gaxi(),e.zpp_inner.polygon.invalidate_gverts()),!0}return!1},qt.prototype.shapes_subber=function(e){null!=this.space&&this.space.removed_shape(e.zpp_inner),e.zpp_inner.body=null,e.zpp_inner.removedFromBody()},qt.prototype.shapes_invalidate=function(e){this.invalidate_shapes()},qt.prototype.addedToSpace=function(){null==oi.zpp_pool?this.component=new oi:(this.component=oi.zpp_pool,oi.zpp_pool=this.component.next,this.component.next=null),this.component.isBody=!0,(this.component.body=this).__iaddedToSpace()},qt.prototype.removedFromSpace=function(){for(;null!=this.arbiters.head;){var e=this.arbiters.pop_unsafe();if(e.cleared=!0,e.b2==this)for(var t=e.b1.arbiters,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}if(e.b1==this)for(var s=e.b2.arbiters,l=null,p=s.head;null!=p;){if(p.elt==e){var h,u;null==l?(u=(h=s.head).next,s.head=u,null==s.head&&(s.pushmod=!0)):(u=(h=l.next).next,null==(l.next=u)&&(s.pushmod=!0));var c=h;c.elt=null,c.next=Ko.zpp_pool,Ko.zpp_pool=c,s.modified=!0,s.length--,s.pushmod=!0;break}p=(l=p).next}null!=e.pair&&(e.pair.arb=null,e.pair=null),e.active=!1,this.space.f_arbiters.modified=!0}var d=this.component;d.body=null,d.constraint=null,d.next=oi.zpp_pool,oi.zpp_pool=d,this.component=null,this.__iremovedFromSpace()},qt.prototype.copy=function(){var e=(new re).zpp_inner;e.type=this.type,e.bulletEnabled=this.bulletEnabled,e.disableCCD=this.disableCCD;for(var t=this.shapes.head;null!=t;){var i=e.outer.zpp_inner.wrap_shapes,n=t.elt.outer.copy();i.zpp_inner.reverse_flag?i.push(n):i.unshift(n),t=t.next}if(e.posx=this.posx,e.posy=this.posy,e.velx=this.velx,e.vely=this.vely,e.forcex=this.forcex,e.forcey=this.forcey,e.rot=this.rot,e.angvel=this.angvel,e.torque=this.torque,e.kinvelx=this.kinvelx,e.kinvely=this.kinvely,e.kinangvel=this.kinangvel,e.svelx=this.svelx,e.svely=this.svely,this.zip_axis){e.zip_axis=!0;for(var r=e.shapes.head;null!=r;){var o=r.elt;1==o.type&&(o.polygon.invalidate_gverts(),o.polygon.invalidate_gaxi()),o.invalidate_worldCOM(),r=r.next}e.zip_worldCOM=!0}else e.axisx=this.axisx,e.axisy=this.axisy;return e.rot=this.rot,e.massMode=this.massMode,e.gravMassMode=this.gravMassMode,e.inertiaMode=this.inertiaMode,e.norotate=this.norotate,e.nomove=this.nomove,e.cmass=this.cmass,e.cinertia=this.cinertia,this.zip_mass?e.invalidate_mass():e.mass=this.mass,this.zip_gravMass?e.invalidate_gravMass():e.gravMass=this.gravMass,this.zip_gravMassScale?e.invalidate_gravMassScale():e.gravMassScale=this.gravMassScale,this.zip_inertia?e.invalidate_inertia():e.inertia=this.inertia,this.zip_aabb?e.zip_aabb=!0:(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy),this.zip_localCOM?(e.zip_localCOM=!0,e.zip_worldCOM=!0):(e.localCOMx=this.localCOMx,e.localCOMy=this.localCOMy),this.zip_worldCOM?e.zip_worldCOM=!0:(e.worldCOMx=this.worldCOMx,e.worldCOMy=this.worldCOMy),this.copyto(e.outer),e.outer},qt.prototype.__class__=qt;var Yt=zpp_nape.phys.ZPP_Compound=function(){this.space=null,this.compound=null,this.depth=0,this.wrap_compounds=null,this.wrap_constraints=null,this.wrap_bodies=null,this.compounds=null,this.constraints=null,this.bodies=null,this.outer=null,qo.call(this),(this.icompound=this).depth=1,this.bodies=new fi,this.wrap_bodies=xn.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$(this,this.bodies_subber),this.constraints=new Ee,this.wrap_constraints=fn.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$(this,this.constraints_subber),this.compounds=new xi,this.wrap_compounds=zn.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$(this,this.compounds_subber)};Yt.__name__=["zpp_nape","phys","ZPP_Compound"],Yt.__super__=qo,Yt.prototype=Object.create(qo.prototype),Yt.prototype.outer=null,Yt.prototype.bodies=null,Yt.prototype.constraints=null,Yt.prototype.compounds=null,Yt.prototype.wrap_bodies=null,Yt.prototype.wrap_constraints=null,Yt.prototype.wrap_compounds=null,Yt.prototype.depth=null,Yt.prototype.compound=null,Yt.prototype.space=null,Yt.prototype.__imutable_midstep=function(e){},Yt.prototype.addedToSpace=function(){this.__iaddedToSpace()},Yt.prototype.removedFromSpace=function(){this.__iremovedFromSpace()},Yt.prototype.breakApart=function(){for(null!=this.space&&(this.__iremovedFromSpace(),this.space.nullInteractorType(this)),null!=this.compound?this.compound.compounds.remove(this):null!=this.space&&this.space.compounds.remove(this);null!=this.bodies.head;){var e=this.bodies.pop_unsafe();null!=(e.compound=this.compound)?this.compound.bodies.add(e):null!=this.space&&this.space.bodies.add(e),null!=this.space&&this.space.freshInteractorType(e)}for(;null!=this.constraints.head;){var t=this.constraints.pop_unsafe();null!=(t.compound=this.compound)?this.compound.constraints.add(t):null!=this.space&&this.space.constraints.add(t)}for(;null!=this.compounds.head;){var i=this.compounds.pop_unsafe();null!=(i.compound=this.compound)?this.compound.compounds.add(i):null!=this.space&&this.space.compounds.add(i),null!=this.space&&this.space.freshInteractorType(i)}this.compound=null,this.space=null},Yt.prototype.bodies_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_bodies.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_bodies.remove(e),null!=(e.zpp_inner.compound=this).space&&this.space.addBody(e.zpp_inner),!0)},Yt.prototype.bodies_subber=function(e){(e.zpp_inner.compound=null)!=this.space&&this.space.remBody(e.zpp_inner)},Yt.prototype.constraints_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_constraints.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_constraints.remove(e),null!=(e.zpp_inner.compound=this).space&&this.space.addConstraint(e.zpp_inner),!0)},Yt.prototype.constraints_subber=function(e){(e.zpp_inner.compound=null)!=this.space&&this.space.remConstraint(e.zpp_inner)},Yt.prototype.compounds_adder=function(e){return e.zpp_inner.compound!=this&&(null!=e.zpp_inner.compound?e.zpp_inner.compound.wrap_compounds.remove(e):null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_compounds.remove(e),e.zpp_inner.compound=this,e.zpp_inner.depth=this.depth+1,null!=this.space&&this.space.addCompound(e.zpp_inner),!0)},Yt.prototype.compounds_subber=function(e){e.zpp_inner.compound=null,e.zpp_inner.depth=1,null!=this.space&&this.space.remCompound(e.zpp_inner)},Yt.prototype.copy=function(e,t){var i=null==e;null==e&&(e=[]),null==t&&(t=[]);for(var n=new ie,r=this.compounds.head;null!=r;){var o=r.elt.copy(e,t);if(o.zpp_inner.immutable_midstep("Compound::compound"),(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer)!=n&&(null!=(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer)&&(null==o.zpp_inner.compound?null:o.zpp_inner.compound.outer).zpp_inner.wrap_compounds.remove(o),null!=n)){var a=n.zpp_inner.wrap_compounds;a.zpp_inner.reverse_flag?a.push(o):a.unshift(o)}r=r.next}for(var s=this.bodies.head;null!=s;){var l=s.elt,p=l.outer.copy();if(e.push(rt.dict(l.id,p)),(null==p.zpp_inner.compound?null:p.zpp_inner.compound.outer)!=n&&(null!=(null==p.zpp_inner.compound?null:p.zpp_inner.compound.outer)&&(null==p.zpp_inner.compound?null:p.zpp_inner.compound.outer).zpp_inner.wrap_bodies.remove(p),null!=n)){var h=n.zpp_inner.wrap_bodies;h.zpp_inner.reverse_flag?h.push(p):h.unshift(p)}s=s.next}for(var u=this.constraints.head;null!=u;){var c=u.elt.copy(e,t);if((null==c.zpp_inner.compound?null:c.zpp_inner.compound.outer)!=n&&(null!=(null==c.zpp_inner.compound?null:c.zpp_inner.compound.outer)&&(null==c.zpp_inner.compound?null:c.zpp_inner.compound.outer).zpp_inner.wrap_constraints.remove(c),null!=n)){var d=n.zpp_inner.wrap_constraints;d.zpp_inner.reverse_flag?d.push(c):d.unshift(c)}u=u.next}if(i)for(;0<t.length;)for(var _=t.pop(),y=0;y<e.length;){var m=e[y];if(++y,m.id==_.id){_.cb(m.bc);break}}return this.copyto(n),n},Yt.prototype.__class__=Yt;var Kt=zpp_nape.phys.ZPP_FluidProperties=function(){this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.density=0,this.viscosity=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new mi,this.density=this.viscosity=1,this.wrap_gravity=null,this.gravityx=0,this.gravityy=0};Kt.__name__=["zpp_nape","phys","ZPP_FluidProperties"],Kt.prototype.next=null,Kt.prototype.userData=null,Kt.prototype.outer=null,Kt.prototype.wrapper=function(){if(null==this.outer){this.outer=new se;var e=this.outer.zpp_inner;e.outer=null,e.next=Kt.zpp_pool,Kt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Kt.prototype.free=function(){this.outer=null},Kt.prototype.alloc=function(){},Kt.prototype.shapes=null,Kt.prototype.wrap_shapes=null,Kt.prototype.feature_cons=function(){this.shapes=new mi},Kt.prototype.addShape=function(e){this.shapes.add(e)},Kt.prototype.remShape=function(e){this.shapes.remove(e)},Kt.prototype.copy=function(){var e;return null==Kt.zpp_pool?e=new Kt:(e=Kt.zpp_pool,Kt.zpp_pool=e.next,e.next=null),e.viscosity=this.viscosity,e.density=this.density,e},Kt.prototype.viscosity=null,Kt.prototype.density=null,Kt.prototype.gravityx=null,Kt.prototype.gravityy=null,Kt.prototype.wrap_gravity=null,Kt.prototype.gravity_invalidate=function(e){this.gravityx=e.x,this.gravityy=e.y,this.invalidate()},Kt.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},Kt.prototype.getgravity=function(){var e,t=this.gravityx,i=this.gravityy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gravity=e,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$(this,this.gravity_validate)},Kt.prototype.invalidate=function(){for(var e=this.shapes.head;null!=e;)e.elt.invalidate_fluidprops(),e=e.next},Kt.prototype.__class__=Kt;var Zt=zpp_nape.phys.ZPP_Material=function(){this.rollingFriction=0,this.elasticity=0,this.density=0,this.staticFriction=0,this.dynamicFriction=0,this.wrap_shapes=null,this.shapes=null,this.outer=null,this.userData=null,this.next=null,this.shapes=new mi,this.elasticity=0,this.dynamicFriction=1,this.staticFriction=2,this.density=.001,this.rollingFriction=.01};Zt.__name__=["zpp_nape","phys","ZPP_Material"],Zt.prototype.next=null,Zt.prototype.userData=null,Zt.prototype.outer=null,Zt.prototype.wrapper=function(){if(null==this.outer){this.outer=new ce;var e=this.outer.zpp_inner;e.outer=null,e.next=Zt.zpp_pool,Zt.zpp_pool=e,this.outer.zpp_inner=this}return this.outer},Zt.prototype.free=function(){this.outer=null},Zt.prototype.alloc=function(){},Zt.prototype.shapes=null,Zt.prototype.wrap_shapes=null,Zt.prototype.feature_cons=function(){this.shapes=new mi},Zt.prototype.addShape=function(e){this.shapes.add(e)},Zt.prototype.remShape=function(e){this.shapes.remove(e)},Zt.prototype.dynamicFriction=null,Zt.prototype.staticFriction=null,Zt.prototype.density=null,Zt.prototype.elasticity=null,Zt.prototype.rollingFriction=null,Zt.prototype.copy=function(){var e=new Zt;return e.dynamicFriction=this.dynamicFriction,e.staticFriction=this.staticFriction,e.density=this.density,e.elasticity=this.elasticity,e.rollingFriction=this.rollingFriction,e},Zt.prototype.set=function(e){this.dynamicFriction=e.dynamicFriction,this.staticFriction=e.staticFriction,this.density=e.density,this.elasticity=e.elasticity,this.rollingFriction=e.rollingFriction},Zt.prototype.invalidate=function(e){for(var t=this.shapes.head;null!=t;)t.elt.invalidate_material(e),t=t.next},Zt.prototype.__class__=Zt;var Jt=zpp_nape.shape.ZPP_Shape=function(e){var t;this.zip_aabb=!1,this.aabb=null,this.pairs=null,this.node=null,this.sweep=null,this.sensorEnabled=!1,this.fluidEnabled=!1,this.fluidProperties=null,this.filter=null,this.material=null,this.refmaterial=null,this.polygon=null,this.circle=null,this.sweepCoef=0,this.zip_sweepRadius=!1,this.sweepRadius=0,this.wrap_worldCOM=null,this.wrap_localCOM=null,this.zip_worldCOM=!1,this.worldCOMy=0,this.worldCOMx=0,this.zip_localCOM=!1,this.localCOMy=0,this.localCOMx=0,this.zip_angDrag=!1,this.angDrag=0,this.inertia=0,this.zip_area_inertia=!1,this.area=0,this.type=0,this.body=null,this.outer=null,qo.call(this),this.pairs=new Pi,(this.ishape=this).type=e,null==Ao.zpp_pool?t=new Ao:(t=Ao.zpp_pool,Ao.zpp_pool=t.next,t.next=null),t.minx=0,t.miny=0,t.maxx=0,t.maxy=0,this.aabb=t,this.aabb._immutable=!0,this.aabb._validate=$(this,this.aabb_validate),this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0,this.localCOMx=0,this.localCOMy=0,this.worldCOMx=0,this.worldCOMy=0,this.fluidEnabled=!1,this.sensorEnabled=!1,this.fluidProperties=null,this.body=null,this.refmaterial=new Zt,this.sweepRadius=this.sweepCoef=0};Jt.__name__=["zpp_nape","shape","ZPP_Shape"],Jt.__super__=qo,Jt.prototype=Object.create(qo.prototype),Jt.prototype.outer=null,Jt.prototype.body=null,Jt.prototype.type=null,Jt.prototype.isCircle=function(){return 0==this.type},Jt.prototype.isPolygon=function(){return 1==this.type},Jt.prototype.area=null,Jt.prototype.zip_area_inertia=null,Jt.prototype.inertia=null,Jt.prototype.angDrag=null,Jt.prototype.zip_angDrag=null,Jt.prototype.localCOMx=null,Jt.prototype.localCOMy=null,Jt.prototype.zip_localCOM=null,Jt.prototype.worldCOMx=null,Jt.prototype.worldCOMy=null,Jt.prototype.zip_worldCOM=null,Jt.prototype.wrap_localCOM=null,Jt.prototype.wrap_worldCOM=null,Jt.prototype.sweepRadius=null,Jt.prototype.zip_sweepRadius=null,Jt.prototype.sweepCoef=null,Jt.prototype.invalidate_sweepRadius=function(){this.zip_sweepRadius=!0},Jt.prototype.validate_sweepRadius=function(){this.zip_sweepRadius&&(this.zip_sweepRadius=!1,0==this.type?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},Jt.prototype.circle=null,Jt.prototype.polygon=null,Jt.prototype.refmaterial=null,Jt.prototype.material=null,Jt.prototype.filter=null,Jt.prototype.fluidProperties=null,Jt.prototype.fluidEnabled=null,Jt.prototype.sensorEnabled=null,Jt.prototype.sweep=null,Jt.prototype.node=null,Jt.prototype.pairs=null,Jt.prototype.clear=function(){0==this.type?this.circle.__clear():this.polygon.__clear()},Jt.prototype.aabb=null,Jt.prototype.zip_aabb=null,Jt.prototype.validate_aabb=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var e=this.circle;if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var t=e.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var l=n=t.lverts.next;i+=o.x*(l.y-r.y);var p=l.y*o.x-l.x*o.y;t.localCOMx+=(o.x+l.x)*p,t.localCOMy+=(o.y+l.y)*p,r=o;var h=n=n.next;i+=l.x*(h.y-r.y);var u=h.y*l.x-h.x*l.y;t.localCOMx+=(l.x+h.x)*u,t.localCOMy+=(l.y+h.y)*u;var c=i=1/(3*i);t.localCOMx*=c,t.localCOMy*=c}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var d=e.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var _=e.radius,y=e.radius;e.aabb.minx=e.worldCOMx-_,e.aabb.miny=e.worldCOMy-y,e.aabb.maxx=e.worldCOMx+_,e.aabb.maxy=e.worldCOMy+y}else{var m=this.polygon;if(m.zip_gverts&&null!=m.body){m.zip_gverts=!1,m.validate_lverts();var f=m.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var x=m.lverts.next,v=m.gverts.next;null!=v;){var z=v,g=x;x=x.next,z.x=m.body.posx+(m.body.axisy*g.x-m.body.axisx*g.y),z.y=m.body.posy+(g.x*m.body.axisx+g.y*m.body.axisy),v=v.next}}var b=m.gverts.next;m.aabb.minx=b.x,m.aabb.miny=b.y,m.aabb.maxx=b.x,m.aabb.maxy=b.y;for(var w=m.gverts.next.next;null!=w;){var S=w;S.x<m.aabb.minx&&(m.aabb.minx=S.x),S.x>m.aabb.maxx&&(m.aabb.maxx=S.x),S.y<m.aabb.miny&&(m.aabb.miny=S.y),S.y>m.aabb.maxy&&(m.aabb.maxy=S.y),w=w.next}}},Jt.prototype.force_validate_aabb=function(){if(0==this.type){var e=this.circle;e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy),e.aabb.minx=e.worldCOMx-e.radius,e.aabb.miny=e.worldCOMy-e.radius,e.aabb.maxx=e.worldCOMx+e.radius,e.aabb.maxy=e.worldCOMy+e.radius}else{var t=this.polygon,i=t.lverts.next,n=t.gverts.next,r=i;i=i.next,n.x=t.body.posx+(t.body.axisy*r.x-t.body.axisx*r.y),n.y=t.body.posy+(r.x*t.body.axisx+r.y*t.body.axisy),t.aabb.minx=n.x,t.aabb.miny=n.y,t.aabb.maxx=n.x,t.aabb.maxy=n.y;for(var o=t.gverts.next.next;null!=o;){var a=o,s=i;i=i.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),a.x<t.aabb.minx&&(t.aabb.minx=a.x),a.x>t.aabb.maxx&&(t.aabb.maxx=a.x),a.y<t.aabb.miny&&(t.aabb.miny=a.y),a.y>t.aabb.maxy&&(t.aabb.maxy=a.y),o=o.next}}},Jt.prototype.invalidate_aabb=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.validate_area_inertia=function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,0==this.type?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},Jt.prototype.validate_angDrag=function(){(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)&&(this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,0==this.type?this.circle.__validate_angDrag():this.polygon.__validate_angDrag())},Jt.prototype.validate_localCOM=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var l=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*l,e.localCOMy+=(r.y+s.y)*l,n=r;var p=i=i.next;t+=s.x*(p.y-n.y);var h=p.y*s.x-p.x*s.y;e.localCOMx+=(s.x+p.x)*h,e.localCOMy+=(s.y+p.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},Jt.prototype.validate_worldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var l=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*l,e.localCOMy+=(r.y+s.y)*l,n=r;var p=i=i.next;t+=s.x*(p.y-n.y);var h=p.y*s.x-p.x*s.y;e.localCOMx+=(s.x+p.x)*h,e.localCOMy+=(s.y+p.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var c=this.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}},Jt.prototype.getworldCOM=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var l=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*l,e.localCOMy+=(r.y+s.y)*l,n=r;var p=i=i.next;t+=s.x*(p.y-n.y);var h=p.y*s.x-p.x*s.y;e.localCOMx+=(s.x+p.x)*h,e.localCOMy+=(s.y+p.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var c=this.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy},Jt.prototype.invalidate_area_inertia=function(){if(this.zip_area_inertia=!0,null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}},Jt.prototype.invalidate_angDrag=function(){this.zip_angDrag=!0},Jt.prototype.invalidate_localCOM=function(){if(this.zip_localCOM=!0,this.invalidate_area_inertia(),0==this.type&&(this.zip_sweepRadius=!0),this.invalidate_angDrag(),this.invalidate_worldCOM(),null!=this.body){var e=this.body;e.zip_localCOM=!0,e.zip_worldCOM=!0}},Jt.prototype.invalidate_worldCOM=function(){this.zip_worldCOM=!0,this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.invalidate_material=function(e){if(0!=(e&Zt.WAKE)&&this.wake(),0!=(e&Zt.ARBITERS)&&null!=this.body&&this.body.refreshArbiters(),0!=(e&Zt.PROPS)&&null!=this.body){var t=this.body;t.zip_localCOM=!0,t.zip_worldCOM=!0,this.body.invalidate_mass(),this.body.invalidate_inertia()}0!=(e&Zt.ANGDRAG)&&this.invalidate_angDrag(),this.refmaterial.set(this.material)},Jt.prototype.invalidate_filter=function(){this.wake()},Jt.prototype.invalidate_fluidprops=function(){this.fluidEnabled&&this.wake()},Jt.prototype.aabb_validate=function(){if(this.zip_aabb&&null!=this.body)if(this.zip_aabb=!1,0==this.type){var e=this.circle;if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var t=e.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var l=n=t.lverts.next;i+=o.x*(l.y-r.y);var p=l.y*o.x-l.x*o.y;t.localCOMx+=(o.x+l.x)*p,t.localCOMy+=(o.y+l.y)*p,r=o;var h=n=n.next;i+=l.x*(h.y-r.y);var u=h.y*l.x-h.x*l.y;t.localCOMx+=(l.x+h.x)*u,t.localCOMy+=(l.y+h.y)*u;var c=i=1/(3*i);t.localCOMx*=c,t.localCOMy*=c}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var d=e.body;d.zip_axis&&(d.zip_axis=!1,d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}var _=e.radius,y=e.radius;e.aabb.minx=e.worldCOMx-_,e.aabb.miny=e.worldCOMy-y,e.aabb.maxx=e.worldCOMx+_,e.aabb.maxy=e.worldCOMy+y}else{var m=this.polygon;if(m.zip_gverts&&null!=m.body){m.zip_gverts=!1,m.validate_lverts();var f=m.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var x=m.lverts.next,v=m.gverts.next;null!=v;){var z=v,g=x;x=x.next,z.x=m.body.posx+(m.body.axisy*g.x-m.body.axisx*g.y),z.y=m.body.posy+(g.x*m.body.axisx+g.y*m.body.axisy),v=v.next}}var b=m.gverts.next;m.aabb.minx=b.x,m.aabb.miny=b.y,m.aabb.maxx=b.x,m.aabb.maxy=b.y;for(var w=m.gverts.next.next;null!=w;){var S=w;S.x<m.aabb.minx&&(m.aabb.minx=S.x),S.x>m.aabb.maxx&&(m.aabb.maxx=S.x),S.y<m.aabb.miny&&(m.aabb.miny=S.y),S.y>m.aabb.maxy&&(m.aabb.maxy=S.y),w=w.next}}},Jt.prototype.setMaterial=function(e){this.material!=e&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.wake(),null!=this.body&&this.body.refreshArbiters())},Jt.prototype.setFilter=function(e){this.filter!=e&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.wake())},Jt.prototype.setFluid=function(e){this.fluidProperties!=e&&(null!=this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=e,null!=this.body&&null!=this.body.space&&e.shapes.add(this),this.fluidEnabled&&this.wake())},Jt.prototype.__immutable_midstep=function(e){},Jt.prototype.addedToBody=function(){this.invalidate_worldCOM(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0)},Jt.prototype.removedFromBody=function(){},Jt.prototype.addedToSpace=function(){this.__iaddedToSpace(),this.material.shapes.add(this),this.filter.shapes.add(this),null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},Jt.prototype.removedFromSpace=function(){this.__iremovedFromSpace(),this.material.shapes.remove(this),this.filter.shapes.remove(this),null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this)},Jt.prototype.copy=function(){var e=null;e=0==this.type?this.circle.__copy():this.polygon.__copy(),this.zip_area_inertia?e.invalidate_area_inertia():(e.area=this.area,e.inertia=this.inertia),this.zip_sweepRadius?e.zip_sweepRadius=!0:(e.sweepRadius=this.sweepRadius,e.sweepCoef=this.sweepCoef),this.zip_angDrag?e.invalidate_angDrag():e.angDrag=this.angDrag,this.zip_aabb?(e.zip_aabb=!0,null!=e.body&&(e.body.zip_aabb=!0)):(e.aabb.minx=this.aabb.minx,e.aabb.miny=this.aabb.miny,e.aabb.maxx=this.aabb.maxx,e.aabb.maxy=this.aabb.maxy);var t=e.material;t.outer=null,t.next=Zt.zpp_pool,Zt.zpp_pool=t;var i=e.filter;return i.outer=null,i.next=ft.zpp_pool,ft.zpp_pool=i,e.material=this.material,e.filter=this.filter,null!=this.fluidProperties&&(e.fluidProperties=this.fluidProperties),e.fluidEnabled=this.fluidEnabled,e.sensorEnabled=this.sensorEnabled,null!=this.userData&&(e.userData=_.copy(this.userData)),this.copyto(e.outer),e.outer},Jt.prototype.__class__=Jt;var Qt=zpp_nape.shape.ZPP_Circle=function(){this.radius=0,this.outer_zn=null,Jt.call(this,0),(this.circle=this).zip_localCOM=!1};Qt.__name__=["zpp_nape","shape","ZPP_Circle"],Qt.__super__=Jt,Qt.prototype=Object.create(Jt.prototype),Qt.prototype.outer_zn=null,Qt.prototype.radius=null,Qt.prototype.__clear=function(){},Qt.prototype.invalidate_radius=function(){this.invalidate_area_inertia(),this.invalidate_angDrag(),this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),null!=this.body&&this.body.wake()},Qt.prototype.localCOM_validate=function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy},Qt.prototype.localCOM_invalidate=function(e){this.localCOMx=e.x,this.localCOMy=e.y,this.invalidate_localCOM(),null!=this.body&&this.body.wake()},Qt.prototype.setupLocalCOM=function(){var e,t=this.localCOMx,i=this.localCOMy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_localCOM=e,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$(this,this.localCOM_invalidate)},Qt.prototype.__validate_aabb=function(){if(this.zip_worldCOM&&null!=this.body){if(this.zip_worldCOM=!1,this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var l=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*l,e.localCOMy+=(r.y+s.y)*l,n=r;var p=i=i.next;t+=s.x*(p.y-n.y);var h=p.y*s.x-p.x*s.y;e.localCOMx+=(s.x+p.x)*h,e.localCOMy+=(s.y+p.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var c=this.body;c.zip_axis&&(c.zip_axis=!1,c.axisx=Math.sin(c.rot),c.axisy=Math.cos(c.rot)),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy)}var d=this.radius,_=this.radius;this.aabb.minx=this.worldCOMx-d,this.aabb.miny=this.worldCOMy-_,this.aabb.maxx=this.worldCOMx+d,this.aabb.maxy=this.worldCOMy+_},Qt.prototype._force_validate_aabb=function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy),this.aabb.minx=this.worldCOMx-this.radius,this.aabb.miny=this.worldCOMy-this.radius,this.aabb.maxx=this.worldCOMx+this.radius,this.aabb.maxy=this.worldCOMy+this.radius},Qt.prototype.__validate_sweepRadius=function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy),this.sweepRadius=this.sweepCoef+this.radius},Qt.prototype.__validate_area_inertia=function(){var e=this.radius*this.radius;this.area=e*Math.PI,this.inertia=.5*e+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},Qt.prototype.__validate_angDrag=function(){var e=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,t=this.radius*this.radius;this.angDrag=(e+2*t)*(this.material.dynamicFriction*Qs.fluidAngularDragFriction)+.5*Qs.fluidAngularDrag*(1+Qs.fluidVacuumDrag)*e,this.angDrag/=2*(e+.5*t)},Qt.prototype.__scale=function(e,t){var i=((e<0?-e:e)+(t<0?-t:t))/2;this.radius*=i<0?-i:i,this.invalidate_radius(),0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy&&(this.localCOMx*=e,this.localCOMy*=t,this.invalidate_localCOM())},Qt.prototype.__translate=function(e,t){this.localCOMx+=e,this.localCOMy+=t,this.invalidate_localCOM()},Qt.prototype.__rotate=function(e,t){if(0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy){var i,n;i=t*this.localCOMx-e*this.localCOMy,n=this.localCOMx*e+this.localCOMy*t,this.localCOMx=i,this.localCOMy=n,this.invalidate_localCOM()}},Qt.prototype.__transform=function(e){var t=e.zpp_inner.a*e.zpp_inner.d-e.zpp_inner.b*e.zpp_inner.c;t<0&&(t=-t),this.radius*=Math.sqrt(t);var i=e.zpp_inner.a*this.localCOMx+e.zpp_inner.b*this.localCOMy+e.zpp_inner.tx;this.localCOMy=e.zpp_inner.c*this.localCOMx+e.zpp_inner.d*this.localCOMy+e.zpp_inner.ty,this.localCOMx=i,this.invalidate_radius(),this.invalidate_localCOM()},Qt.prototype.__copy=function(){var e=new de(this.radius).zpp_inner_zn;return e.localCOMx=this.localCOMx,e.localCOMy=this.localCOMy,e.zip_localCOM=!1,e},Qt.prototype.__class__=Qt;var $t=zpp_nape.shape.ZPP_Edge=function(){this.tp1=0,this.tp0=0,this.gp1=null,this.lp1=null,this.gp0=null,this.lp0=null,this.gprojection=0,this.lprojection=0,this.length=0,this.wrap_gnorm=null,this.gnormy=0,this.gnormx=0,this.wrap_lnorm=null,this.lnormy=0,this.lnormx=0,this.outer=null,this.polygon=null,this.next=null,this.lnormx=0,this.lnormy=0,this.gnormx=0,this.gnormy=0,this.length=0,this.lprojection=0,this.gprojection=0};$t.__name__=["zpp_nape","shape","ZPP_Edge"],$t.prototype.next=null,$t.prototype.free=function(){this.polygon=null},$t.prototype.alloc=function(){},$t.prototype.polygon=null,$t.prototype.outer=null,$t.prototype.wrapper=function(){return null==this.outer&&($t.internal=!0,this.outer=new _e,$t.internal=!1,this.outer.zpp_inner=this),this.outer},$t.prototype.lnormx=null,$t.prototype.lnormy=null,$t.prototype.wrap_lnorm=null,$t.prototype.gnormx=null,$t.prototype.gnormy=null,$t.prototype.wrap_gnorm=null,$t.prototype.length=null,$t.prototype.lprojection=null,$t.prototype.gprojection=null,$t.prototype.lp0=null,$t.prototype.gp0=null,$t.prototype.lp1=null,$t.prototype.gp1=null,$t.prototype.tp0=null,$t.prototype.tp1=null,$t.prototype.lnorm_validate=function(){this.polygon.validate_laxi(),this.wrap_lnorm.zpp_inner.x=this.lnormx,this.wrap_lnorm.zpp_inner.y=this.lnormy},$t.prototype.gnorm_validate=function(){var e=this.polygon;if(e.zip_gaxi&&null!=e.body){e.zip_gaxi=!1,e.validate_laxi();var t=e.body;if(t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot)),e.zip_gverts&&null!=e.body){e.zip_gverts=!1,e.validate_lverts();var i=e.body;i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot));for(var n=e.lverts.next,r=e.gverts.next;null!=r;){var o=r,a=n;n=n.next,o.x=e.body.posx+(e.body.axisy*a.x-e.body.axisx*a.y),o.y=e.body.posy+(a.x*e.body.axisx+a.y*e.body.axisy),r=r.next}}var s=e.edges.head,l=e.gverts.next,p=l;for(l=l.next;null!=l;){var h=l,u=s.elt;s=s.next,u.gp0=p,u.gp1=h,u.gnormx=e.body.axisy*u.lnormx-e.body.axisx*u.lnormy,u.gnormy=u.lnormx*e.body.axisx+u.lnormy*e.body.axisy,u.gprojection=e.body.posx*u.gnormx+e.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy,p=h,l=l.next}var c=s.elt;c.gp0=p,c.gp1=e.gverts.next,c.gnormx=e.body.axisy*c.lnormx-e.body.axisx*c.lnormy,c.gnormy=c.lnormx*e.body.axisx+c.lnormy*e.body.axisy,c.gprojection=e.body.posx*c.gnormx+e.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy}this.wrap_gnorm.zpp_inner.x=this.gnormx,this.wrap_gnorm.zpp_inner.y=this.gnormy},$t.prototype.getlnorm=function(){var e,t=this.lnormx,i=this.lnormy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_lnorm=e,this.wrap_lnorm.zpp_inner._immutable=!0,this.wrap_lnorm.zpp_inner._validate=$(this,this.lnorm_validate)},$t.prototype.getgnorm=function(){var e,t=this.gnormx,i=this.gnormy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gnorm=e,this.wrap_gnorm.zpp_inner._immutable=!0,this.wrap_gnorm.zpp_inner._validate=$(this,this.gnorm_validate)},$t.prototype.__class__=$t;var ei=zpp_nape.shape.ZPP_Polygon=function(){this.zip_sanitation=!1,this.zip_valid=!1,this.zip_gaxi=!1,this.zip_gverts=!1,this.zip_laxi=!1,this.zip_lverts=!1,this.reverse_flag=!1,this.edgeCnt=0,this.wrap_edges=null,this.edges=null,this.wrap_gverts=null,this.gverts=null,this.wrap_lverts=null,this.lverts=null,this.outer_zn=null,Jt.call(this,1),(this.polygon=this).lverts=new el,this.gverts=new el,this.edges=new ki,this.edgeCnt=0};ei.__name__=["zpp_nape","shape","ZPP_Polygon"],ei.__super__=Jt,ei.prototype=Object.create(Jt.prototype),ei.prototype.outer_zn=null,ei.prototype.lverts=null,ei.prototype.wrap_lverts=null,ei.prototype.gverts=null,ei.prototype.wrap_gverts=null,ei.prototype.edges=null,ei.prototype.wrap_edges=null,ei.prototype.edgeCnt=null,ei.prototype.reverse_flag=null,ei.prototype.__clear=function(){},ei.prototype.lverts_pa_invalidate=function(e){this.invalidate_lverts()},ei.prototype.gverts_pa_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.lverts_post_adder=function(e){e.zpp_inner._invalidate=$(this,this.lverts_pa_invalidate);for(var t,i=null,n=null,r=this.lverts.next;null!=r&&r!=e.zpp_inner;)i=null==i?this.gverts.next:i.next,n=null==n?this.edges.head:n.next,r=r.next;null==el.zpp_pool?t=new el:(t=el.zpp_pool,el.zpp_pool=t.next,t.next=null),t.weak=!1,t._immutable=!0,t.x=0,t.y=0;var o,a,s,l=t;(this.gverts.insert(i,l),null!=this.lverts.next.next)&&(null==this.lverts.next.next.next?(null==$t.zpp_pool?o=new $t:(o=$t.zpp_pool,$t.zpp_pool=o.next,o.next=null),(o.polygon=this).edges.add(o),null==$t.zpp_pool?a=new $t:(a=$t.zpp_pool,$t.zpp_pool=a.next,a.next=null),(a.polygon=this).edges.add(a),this.edgeCnt+=2):(null==$t.zpp_pool?s=new $t:(s=$t.zpp_pool,$t.zpp_pool=s.next,s.next=null),(s.polygon=this).edges.insert(n,s),this.edgeCnt++));l._validate=$(this,this.gverts_pa_validate)},ei.prototype.lverts_subber=function(e){this.cleanup_lvert(e.zpp_inner)},ei.prototype.lverts_invalidate=function(e){this.invalidate_lverts()},ei.prototype.lverts_validate=function(){this.validate_lverts()},ei.prototype.gverts_validate=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.edges_validate=function(){this.validate_lverts()},ei.prototype.getlverts=function(){this.wrap_lverts=mn.get(this.lverts),this.wrap_lverts.zpp_inner.post_adder=$(this,this.lverts_post_adder),this.wrap_lverts.zpp_inner.subber=$(this,this.lverts_subber),this.wrap_lverts.zpp_inner._invalidate=$(this,this.lverts_invalidate),this.wrap_lverts.zpp_inner._validate=$(this,this.lverts_validate),this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},ei.prototype.getgverts=function(){this.wrap_gverts=mn.get(this.gverts,!0),this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_gverts.zpp_inner._validate=$(this,this.gverts_validate)},ei.prototype.getedges=function(){this.wrap_edges=In.get(this.edges,!0),this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag,this.wrap_edges.zpp_inner._validate=$(this,this.edges_validate)},ei.prototype.zip_lverts=null,ei.prototype.invalidate_lverts=function(){this.invalidate_laxi(),this.invalidate_area_inertia(),this.invalidate_angDrag(),this.invalidate_localCOM(),this.invalidate_gverts(),this.zip_lverts=!0,this.zip_valid=!0,this.zip_sanitation=!0,null!=this.body&&this.body.wake()},ei.prototype.zip_laxi=null,ei.prototype.invalidate_laxi=function(){this.invalidate_gaxi(),this.zip_sweepRadius=!0,this.zip_laxi=!0},ei.prototype.zip_gverts=null,ei.prototype.invalidate_gverts=function(){this.zip_aabb=!0,null!=this.body&&(this.body.zip_aabb=!0),this.zip_gverts=!0},ei.prototype.zip_gaxi=null,ei.prototype.invalidate_gaxi=function(){this.zip_gaxi=!0},ei.prototype.zip_valid=null,ei.prototype.validation=null,ei.prototype.valid=function(){if(this.zip_valid){if(this.zip_valid=!1,this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real()),this.lverts.length<3)return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new ve,Uo.internal=!1),this.validation=Uo.ValidationResult_DEGENERATE;if(this.validate_lverts(),this.validate_area_inertia(),this.area<Qs.epsilon)return null==Uo.ValidationResult_DEGENERATE&&(Uo.internal=!0,Uo.ValidationResult_DEGENERATE=new ve,Uo.internal=!1),this.validation=Uo.ValidationResult_DEGENERATE;var e=!1,t=!1,i=!0,n=this.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a,s,l=n;a=l.x-o.x,s=l.y-o.y;var p;p=o.x-r.x;var h=(o.y-r.y)*a-p*s;if(h>Qs.epsilon?t=!0:h<-Qs.epsilon&&(e=!0),t&&e){i=!1;break}r=o,o=l,n=n.next}if(i){for(var u=n=this.lverts.next;;){var c,d;c=u.x-o.x,d=u.y-o.y;var _;_=o.x-r.x;var y=(o.y-r.y)*c-_*d;if(y>Qs.epsilon?t=!0:y<-Qs.epsilon&&(e=!0),t&&e){i=!1;break}break}if(i){r=o,o=u;for(var m=n=n.next;;){var f,x;f=m.x-u.x,x=m.y-u.y;var v;v=u.x-r.x;var z=(u.y-r.y)*f-v*x;if(z>Qs.epsilon?t=!0:z<-Qs.epsilon&&(e=!0),t&&e)break;break}}}if(t&&e)return null==Uo.ValidationResult_CONCAVE&&(Uo.internal=!0,Uo.ValidationResult_CONCAVE=new ve,Uo.internal=!1),this.validation=Uo.ValidationResult_CONCAVE;var g=!0,b=!0,w=this.lverts.next,S=w;for(w=w.next;null!=w;){var C=w;if(!g){b=!1;break}var M=!0,P=this.lverts.next,k=P;for(P=P.next;null!=P;){var T=P;if(S!=k&&S!=T&&C!=k&&C!=T){var O,A;O=S.x-k.x,A=S.y-k.y;var E,G;E=C.x-S.x;var I,B,L=(G=C.y-S.y)*(I=T.x-k.x)-E*(B=T.y-k.y);if(L*L>Qs.epsilon){var D=(B*O-I*A)*(L=1/L);if(D>Qs.epsilon&&D<1-Qs.epsilon){var R=(G*O-E*A)*L;if(R>Qs.epsilon&&R<1-Qs.epsilon){M=g=!1;break}}}k=T,P=P.next}else k=T,P=P.next}if(M)for(;;){var F=this.lverts.next;if(S==k||S==F||C==k||C==F)break;var j,N;j=S.x-k.x,N=S.y-k.y;var U,V;U=C.x-S.x;var H,W,X=(V=C.y-S.y)*(H=F.x-k.x)-U*(W=F.y-k.y);if(X*X>Qs.epsilon){var q=(W*j-H*N)*(X=1/X);if(q>Qs.epsilon&&q<1-Qs.epsilon){var Y=(V*j-U*N)*X;if(Y>Qs.epsilon&&Y<1-Qs.epsilon){g=!1;break}}}break}S=C,w=w.next}if(b)for(;;){var K=this.lverts.next;if(!g)break;var Z=!0,J=this.lverts.next,Q=J;for(J=J.next;null!=J;){var $=J;if(S!=Q&&S!=$&&K!=Q&&K!=$){var ee,te;ee=S.x-Q.x,te=S.y-Q.y;var ie,ne;ie=K.x-S.x;var re,oe,ae=(ne=K.y-S.y)*(re=$.x-Q.x)-ie*(oe=$.y-Q.y);if(ae*ae>Qs.epsilon){var se=(oe*ee-re*te)*(ae=1/ae);if(se>Qs.epsilon&&se<1-Qs.epsilon){var le=(ne*ee-ie*te)*ae;if(le>Qs.epsilon&&le<1-Qs.epsilon){Z=g=!1;break}}}Q=$,J=J.next}else Q=$,J=J.next}if(Z)for(;;){var pe=this.lverts.next;if(S==Q||S==pe||K==Q||K==pe)break;var he,ue;he=S.x-Q.x,ue=S.y-Q.y;var ce,de;ce=K.x-S.x;var _e,ye,me=(de=K.y-S.y)*(_e=pe.x-Q.x)-ce*(ye=pe.y-Q.y);if(me*me>Qs.epsilon){var fe=(ye*he-_e*ue)*(me=1/me);if(fe>Qs.epsilon&&fe<1-Qs.epsilon){var xe=(de*he-ce*ue)*me;if(xe>Qs.epsilon&&xe<1-Qs.epsilon){g=!1;break}}}break}break}return g?(null==Uo.ValidationResult_VALID&&(Uo.internal=!0,Uo.ValidationResult_VALID=new ve,Uo.internal=!1),this.validation=Uo.ValidationResult_VALID):(null==Uo.ValidationResult_SELF_INTERSECTING&&(Uo.internal=!0,Uo.ValidationResult_SELF_INTERSECTING=new ve,Uo.internal=!1),this.validation=Uo.ValidationResult_SELF_INTERSECTING)}return this.validation},ei.prototype.validate_lverts=function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),this.area<0&&(this.reverse_vertices(),this.area=-this.area)))},ei.prototype.cleanup_lvert=function(e){for(var t=null,i=null,n=this.lverts.next;null!=n&&n!=e;)t=null==t?this.gverts.next:t.next,i=null==i?this.edges.head:i.next,n=n.next;var r=null==t?this.gverts.next:t.next;this.gverts.erase(t);var o=r;if(null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=el.zpp_pool,el.zpp_pool=o,2==this.edgeCnt){var a=this.edges.pop_unsafe(),s=a;s.polygon=null,s.next=$t.zpp_pool,$t.zpp_pool=s;var l=a=this.edges.pop_unsafe();l.polygon=null,l.next=$t.zpp_pool,$t.zpp_pool=l,this.edgeCnt=0}else if(0!=this.edgeCnt){var p=null==i?this.edges.head.elt:i.next.elt;this.edges.erase(i);var h=p;h.polygon=null,h.next=$t.zpp_pool,$t.zpp_pool=h,this.edgeCnt--}},ei.prototype.zip_sanitation=null,ei.prototype.splice_collinear=function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},ei.prototype.splice_collinear_real=function(){if(null!=this.lverts.next&&null!=this.lverts.next.next&&null!=this.lverts.next.next.next){for(var e=null,t=this.lverts.next;null!=t;){var i,n,r=t,o=null==t.next?this.lverts.next:t.next,a=r.x,s=r.y;(i=a-o.x)*i+(n=s-o.y)*n<Qs.epsilon*Qs.epsilon?(this.cleanup_lvert(t),t=this.lverts.erase(e)):t=(e=t).next}if(null!=this.lverts.next)for(var l;;){l=!1;for(var p=this.lverts.next;null!=p;){var h,u,c=null==p.next?this.lverts.next:p.next,d=p,_=c,y=null==c.next?this.lverts.next:c.next;h=_.x-d.x,u=_.y-d.y;var m;m=y.x-_.x;var f=(y.y-_.y)*h-m*u;f*f>=Qs.epsilon*Qs.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==p.next?null:p),l=!0),p=p.next}if(!l)break}}},ei.prototype.reverse_vertices=function(){this.lverts.reverse(),this.gverts.reverse(),this.edges.reverse(),this.edges.insert(this.edges.iterator_at(this.edgeCnt-1),this.edges.pop_unsafe()),this.reverse_flag=!this.reverse_flag,null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag),null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},ei.prototype.validate_laxi=function(){if(this.zip_laxi){this.zip_laxi=!1,this.validate_lverts();var e=this.edges.head,t=this.lverts.next,i=t;for(t=t.next;null!=t;){var n=t,r=e.elt;e=e.next,r.lp0=i,r.lp1=n;var o=0,a=0;o=i.x-n.x,a=i.y-n.y;var s=Math.sqrt(o*o+a*a),l=1/(r.length=s),p=o*=l;o=-(a*=l),a=p,r.lprojection=o*i.x+a*i.y,r.lnormx=o,r.lnormy=a,null!=r.wrap_lnorm&&(r.wrap_lnorm.zpp_inner.x=o,r.wrap_lnorm.zpp_inner.y=a),i=n,t=t.next}var h=this.lverts.next,u=e.elt;u.lp0=i,u.lp1=h;var c=0,d=0;c=i.x-h.x,d=i.y-h.y;var _=Math.sqrt(c*c+d*d),y=1/(u.length=_),m=c*=y;c=-(d*=y),d=m,u.lprojection=c*i.x+d*i.y,u.lnormx=c,u.lnormy=d,null!=u.wrap_lnorm&&(u.wrap_lnorm.zpp_inner.x=c,u.wrap_lnorm.zpp_inner.y=d)}},ei.prototype.validate_gverts=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}},ei.prototype.validate_gaxi=function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1,this.validate_laxi();var e=this.body;if(e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot)),this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var t=this.body;t.zip_axis&&(t.zip_axis=!1,t.axisx=Math.sin(t.rot),t.axisy=Math.cos(t.rot));for(var i=this.lverts.next,n=this.gverts.next;null!=n;){var r=n,o=i;i=i.next,r.x=this.body.posx+(this.body.axisy*o.x-this.body.axisx*o.y),r.y=this.body.posy+(o.x*this.body.axisx+o.y*this.body.axisy),n=n.next}}var a=this.edges.head,s=this.gverts.next,l=s;for(s=s.next;null!=s;){var p=s,h=a.elt;a=a.next,h.gp0=l,h.gp1=p,h.gnormx=this.body.axisy*h.lnormx-this.body.axisx*h.lnormy,h.gnormy=h.lnormx*this.body.axisx+h.lnormy*this.body.axisy,h.gprojection=this.body.posx*h.gnormx+this.body.posy*h.gnormy+h.lprojection,null!=h.wrap_gnorm&&(h.wrap_gnorm.zpp_inner.x=h.gnormx,h.wrap_gnorm.zpp_inner.y=h.gnormy),h.tp0=h.gp0.y*h.gnormx-h.gp0.x*h.gnormy,h.tp1=h.gp1.y*h.gnormx-h.gp1.x*h.gnormy,l=p,s=s.next}var u=a.elt;u.gp0=l,u.gp1=this.gverts.next,u.gnormx=this.body.axisy*u.lnormx-this.body.axisx*u.lnormy,u.gnormy=u.lnormx*this.body.axisx+u.lnormy*this.body.axisy,u.gprojection=this.body.posx*u.gnormx+this.body.posy*u.gnormy+u.lprojection,null!=u.wrap_gnorm&&(u.wrap_gnorm.zpp_inner.x=u.gnormx,u.wrap_gnorm.zpp_inner.y=u.gnormy),u.tp0=u.gp0.y*u.gnormx-u.gp0.x*u.gnormy,u.tp1=u.gp1.y*u.gnormx-u.gp1.x*u.gnormy}},ei.prototype.__validate_aabb=function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1,this.validate_lverts();var e=this.body;e.zip_axis&&(e.zip_axis=!1,e.axisx=Math.sin(e.rot),e.axisy=Math.cos(e.rot));for(var t=this.lverts.next,i=this.gverts.next;null!=i;){var n=i,r=t;t=t.next,n.x=this.body.posx+(this.body.axisy*r.x-this.body.axisx*r.y),n.y=this.body.posy+(r.x*this.body.axisx+r.y*this.body.axisy),i=i.next}}var o=this.gverts.next;this.aabb.minx=o.x,this.aabb.miny=o.y,this.aabb.maxx=o.x,this.aabb.maxy=o.y;for(var a=this.gverts.next.next;null!=a;){var s=a;s.x<this.aabb.minx&&(this.aabb.minx=s.x),s.x>this.aabb.maxx&&(this.aabb.maxx=s.x),s.y<this.aabb.miny&&(this.aabb.miny=s.y),s.y>this.aabb.maxy&&(this.aabb.maxy=s.y),a=a.next}},ei.prototype._force_validate_aabb=function(){var e=this.lverts.next,t=this.gverts.next,i=e;e=e.next,t.x=this.body.posx+(this.body.axisy*i.x-this.body.axisx*i.y),t.y=this.body.posy+(i.x*this.body.axisx+i.y*this.body.axisy),this.aabb.minx=t.x,this.aabb.miny=t.y,this.aabb.maxx=t.x,this.aabb.maxy=t.y;for(var n=this.gverts.next.next;null!=n;){var r=n,o=e;e=e.next,r.x=this.body.posx+(this.body.axisy*o.x-this.body.axisx*o.y),r.y=this.body.posy+(o.x*this.body.axisx+o.y*this.body.axisy),r.x<this.aabb.minx&&(this.aabb.minx=r.x),r.x>this.aabb.maxx&&(this.aabb.maxx=r.x),r.y<this.aabb.miny&&(this.aabb.miny=r.y),r.y>this.aabb.maxy&&(this.aabb.maxy=r.y),n=n.next}},ei.prototype.__validate_sweepRadius=function(){var e=0,t=0;this.validate_laxi();for(var i=this.lverts.next;null!=i;){var n=i,r=n.x*n.x+n.y*n.y;e<r&&(e=r),i=i.next}for(var o=this.edges.head;null!=o;){var a=o.elt;if(a.lprojection<t&&(t=a.lprojection)<0)break;o=o.next}t<0&&(t=0),this.sweepRadius=Math.sqrt(e),this.sweepCoef=this.sweepRadius-t},ei.prototype.__validate_area_inertia=function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.area=0,this.inertia=0;else{var e=this.area=0,t=0,i=this.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i,a=r.y*n.x-r.x*n.y;e+=a*(r.x*r.x+r.y*r.y+(r.x*n.x+r.y*n.y)+(n.x*n.x+n.y*n.y)),t+=a,this.area+=r.x*(o.y-n.y),n=r,r=o,i=i.next}var s=i=this.lverts.next,l=r.y*n.x-r.x*n.y;e+=l*(r.x*r.x+r.y*r.y+(r.x*n.x+r.y*n.y)+(n.x*n.x+n.y*n.y)),t+=l,this.area+=r.x*(s.y-n.y),n=r,i=i.next;var p=s.y*n.x-s.x*n.y;e+=p*(s.x*s.x+s.y*s.y+(s.x*n.x+s.y*n.y)+(n.x*n.x+n.y*n.y)),t+=p,this.area+=s.x*(i.y-n.y),this.inertia=e/(6*t),this.area*=.5,this.area<0&&(this.area=-this.area,this.reverse_vertices())}},ei.prototype.__validate_angDrag=function(){this.validate_area_inertia(),this.validate_laxi();for(var e=0,t=this.edges.head,i=0,n=this.lverts.next,r=n,o=n.next;null!=o;){var a=o,s=t.elt;t=t.next,i+=s.length;var l,p;l=a.x-r.x,p=a.y-r.y,e+=s.length*Qs.fluidAngularDragFriction*this.material.dynamicFriction*s.lprojection*s.lprojection;var h=-(r.y*s.lnormx-r.x*s.lnormy)/(p*s.lnormx-l*s.lnormy);if(0<h){var u=1<h?1:h,c=0,d=0;c=r.x,d=r.y;c+=l*u,d+=p*u;var _=s.lnormy*r.x-s.lnormx*r.y,y=s.lnormy*c-s.lnormx*d;e+=(y*y*y-_*_*_)/(3*(y-_))*u*s.length*Qs.fluidAngularDrag}if(h<1){var m=h<0?0:h,f=0,x=0;f=r.x,x=r.y;f+=l*m,x+=p*m;var v=s.lnormy*f-s.lnormx*x,z=s.lnormy*a.x-s.lnormx*a.y;e+=(z*z*z-v*v*v)/(3*(z-v))*Qs.fluidVacuumDrag*(1-m)*s.length*Qs.fluidAngularDrag}r=a,o=(n=o).next}for(;;){var g=o=this.lverts.next,b=t.elt;t=t.next,i+=b.length;var w,S;w=g.x-r.x,S=g.y-r.y,e+=b.length*Qs.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;var C=-(r.y*b.lnormx-r.x*b.lnormy)/(S*b.lnormx-w*b.lnormy);if(0<C){var M=1<C?1:C,P=0,k=0;P=r.x,k=r.y;P+=w*M,k+=S*M;var T=b.lnormy*r.x-b.lnormx*r.y,O=b.lnormy*P-b.lnormx*k;e+=(O*O*O-T*T*T)/(3*(O-T))*M*b.length*Qs.fluidAngularDrag}if(C<1){var A=C<0?0:C,E=0,G=0;E=r.x,G=r.y;E+=w*A,G+=S*A;var I=b.lnormy*E-b.lnormx*G,B=b.lnormy*g.x-b.lnormx*g.y;e+=(B*B*B-I*I*I)/(3*(B-I))*Qs.fluidVacuumDrag*(1-A)*b.length*Qs.fluidAngularDrag}break}this.angDrag=e/(this.inertia*i)},ei.prototype.__validate_localCOM=function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=this.lverts.next.next.x,this.localCOMy+=this.lverts.next.next.y,this.localCOMx*=.5,this.localCOMy*=.5;else{this.localCOMx=0;var e=this.localCOMy=0,t=this.lverts.next,i=t,n=t=t.next;for(t=t.next;null!=t;){var r=t;e+=n.x*(r.y-i.y);var o=r.y*n.x-r.x*n.y;this.localCOMx+=(n.x+r.x)*o,this.localCOMy+=(n.y+r.y)*o,i=n,n=r,t=t.next}var a=t=this.lverts.next;e+=n.x*(a.y-i.y);var s=a.y*n.x-a.x*n.y;this.localCOMx+=(n.x+a.x)*s,this.localCOMy+=(n.y+a.y)*s,i=n;var l=t=t.next;e+=a.x*(l.y-i.y);var p=l.y*a.x-l.x*a.y;this.localCOMx+=(a.x+l.x)*p,this.localCOMy+=(a.y+l.y)*p;var h=e=1/(3*e);this.localCOMx*=h,this.localCOMy*=h}},ei.prototype.localCOM_validate=function(){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var e=this.polygon;if(null==e.lverts.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y;else if(null==e.lverts.next.next.next)e.localCOMx=e.lverts.next.x,e.localCOMy=e.lverts.next.y,e.localCOMx+=e.lverts.next.next.x,e.localCOMy+=e.lverts.next.next.y,e.localCOMx*=.5,e.localCOMy*=.5;else{e.localCOMx=0;var t=e.localCOMy=0,i=e.lverts.next,n=i,r=i=i.next;for(i=i.next;null!=i;){var o=i;t+=r.x*(o.y-n.y);var a=o.y*r.x-o.x*r.y;e.localCOMx+=(r.x+o.x)*a,e.localCOMy+=(r.y+o.y)*a,n=r,r=o,i=i.next}var s=i=e.lverts.next;t+=r.x*(s.y-n.y);var l=s.y*r.x-s.x*r.y;e.localCOMx+=(r.x+s.x)*l,e.localCOMy+=(r.y+s.y)*l,n=r;var p=i=i.next;t+=s.x*(p.y-n.y);var h=p.y*s.x-p.x*s.y;e.localCOMx+=(s.x+p.x)*h,e.localCOMy+=(s.y+p.y)*h;var u=t=1/(3*t);e.localCOMx*=u,e.localCOMy*=u}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}},ei.prototype.localCOM_invalidate=function(e){if(this.zip_localCOM){if(this.zip_localCOM=!1,1==this.type){var t=this.polygon;if(null==t.lverts.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y;else if(null==t.lverts.next.next.next)t.localCOMx=t.lverts.next.x,t.localCOMy=t.lverts.next.y,t.localCOMx+=t.lverts.next.next.x,t.localCOMy+=t.lverts.next.next.y,t.localCOMx*=.5,t.localCOMy*=.5;else{t.localCOMx=0;var i=t.localCOMy=0,n=t.lverts.next,r=n,o=n=n.next;for(n=n.next;null!=n;){var a=n;i+=o.x*(a.y-r.y);var s=a.y*o.x-a.x*o.y;t.localCOMx+=(o.x+a.x)*s,t.localCOMy+=(o.y+a.y)*s,r=o,o=a,n=n.next}var l=n=t.lverts.next;i+=o.x*(l.y-r.y);var p=l.y*o.x-l.x*o.y;t.localCOMx+=(o.x+l.x)*p,t.localCOMy+=(o.y+l.y)*p,r=o;var h=n=n.next;i+=l.x*(h.y-r.y);var u=h.y*l.x-h.x*l.y;t.localCOMx+=(l.x+h.x)*u,t.localCOMy+=(l.y+h.y)*u;var c=i=1/(3*i);t.localCOMx*=c,t.localCOMy*=c}}null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)}var d,_;d=e.x-this.localCOMx,_=e.y-this.localCOMy;for(var y=this.lverts.next;null!=y;){var m=y;m.x+=d,m.y+=_,y=y.next}this.invalidate_lverts()},ei.prototype.setupLocalCOM=function(){var e,t=this.localCOMx,i=this.localCOMy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_localCOM=e,this.wrap_localCOM.zpp_inner._inuse=!0,this.wrap_localCOM.zpp_inner._validate=$(this,this.localCOM_validate),this.wrap_localCOM.zpp_inner._invalidate=$(this,this.localCOM_invalidate)},ei.prototype.__translate=function(e,t){for(var i=this.lverts.next;null!=i;){var n=i;n.x+=e,n.y+=t,i=i.next}this.invalidate_lverts()},ei.prototype.__scale=function(e,t){for(var i=this.lverts.next;null!=i;){var n=i;n.x*=e,n.y*=t,i=i.next}this.invalidate_lverts()},ei.prototype.__rotate=function(e,t){for(var i=this.lverts.next;null!=i;){var n,r,o=i;n=t*o.x-e*o.y,r=o.x*e+o.y*t,o.x=n,o.y=r,i=i.next}this.invalidate_lverts()},ei.prototype.__transform=function(e){for(var t=this.lverts.next;null!=t;){var i=t,n=e.zpp_inner.a*i.x+e.zpp_inner.b*i.y+e.zpp_inner.tx;i.y=e.zpp_inner.c*i.x+e.zpp_inner.d*i.y+e.zpp_inner.ty,i.x=n,t=t.next}this.invalidate_lverts()},ei.prototype.__copy=function(){var e=this.outer_zn;return null==e.zpp_inner_zn.wrap_lverts&&e.zpp_inner_zn.getlverts(),new me(e.zpp_inner_zn.wrap_lverts).zpp_inner_zn},ei.prototype.__class__=ei;var ti=zpp_nape.space.ZPP_Broadphase=function(){this.circShape=null,this.matrix=null,this.aabbShape=null,this.dynab=null,this.sweep=null,this.is_sweep=!1,this.space=null};ti.__name__=["zpp_nape","space","ZPP_Broadphase"],ti.prototype.space=null,ti.prototype.is_sweep=null,ti.prototype.sweep=null,ti.prototype.dynab=null,ti.prototype.insert=function(e){this.is_sweep?this.sweep.__insert(e):this.dynab.__insert(e)},ti.prototype.remove=function(e){this.is_sweep?this.sweep.__remove(e):this.dynab.__remove(e)},ti.prototype.sync=function(e){if(this.is_sweep){if(!this.sweep.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var l=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*l,i.localCOMy+=(a.y+s.y)*l,o=a,a=s,r=r.next}var p=r=i.lverts.next;n+=a.x*(p.y-o.y);var h=p.y*a.x-p.x*a.y;i.localCOMx+=(a.x+p.x)*h,i.localCOMy+=(a.y+p.y)*h,o=a;var u=r=r.next;n+=p.x*(u.y-o.y);var c=u.y*p.x-u.x*p.y;i.localCOMx+=(p.x+u.x)*c,i.localCOMy+=(p.y+u.y)*c;var d=n=1/(3*n);i.localCOMx*=d,i.localCOMy*=d}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var y=t.radius,m=t.radius;t.aabb.minx=t.worldCOMx-y,t.aabb.miny=t.worldCOMy-m,t.aabb.maxx=t.worldCOMx+y,t.aabb.maxy=t.worldCOMy+m}else{var f=e.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var x=f.body;x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot));for(var v=f.lverts.next,z=f.gverts.next;null!=z;){var g=z,b=v;v=v.next,g.x=f.body.posx+(f.body.axisy*b.x-f.body.axisx*b.y),g.y=f.body.posy+(b.x*f.body.axisx+b.y*f.body.axisy),z=z.next}}var w=f.gverts.next;f.aabb.minx=w.x,f.aabb.miny=w.y,f.aabb.maxx=w.x,f.aabb.maxy=w.y;for(var S=f.gverts.next.next;null!=S;){var C=S;C.x<f.aabb.minx&&(f.aabb.minx=C.x),C.x>f.aabb.maxx&&(f.aabb.maxx=C.x),C.y<f.aabb.miny&&(f.aabb.miny=C.y),C.y>f.aabb.maxy&&(f.aabb.maxy=C.y),S=S.next}}}else{var M=this.dynab,P=e.node;if(!P.synced){if(!M.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var k=e.circle;if(k.zip_worldCOM&&null!=k.body){if(k.zip_worldCOM=!1,k.zip_localCOM){if(k.zip_localCOM=!1,1==k.type){var T=k.polygon;if(null==T.lverts.next.next)T.localCOMx=T.lverts.next.x,T.localCOMy=T.lverts.next.y;else if(null==T.lverts.next.next.next)T.localCOMx=T.lverts.next.x,T.localCOMy=T.lverts.next.y,T.localCOMx+=T.lverts.next.next.x,T.localCOMy+=T.lverts.next.next.y,T.localCOMx*=.5,T.localCOMy*=.5;else{T.localCOMx=0;var O=T.localCOMy=0,A=T.lverts.next,E=A,G=A=A.next;for(A=A.next;null!=A;){var I=A;O+=G.x*(I.y-E.y);var B=I.y*G.x-I.x*G.y;T.localCOMx+=(G.x+I.x)*B,T.localCOMy+=(G.y+I.y)*B,E=G,G=I,A=A.next}var L=A=T.lverts.next;O+=G.x*(L.y-E.y);var D=L.y*G.x-L.x*G.y;T.localCOMx+=(G.x+L.x)*D,T.localCOMy+=(G.y+L.y)*D,E=G;var R=A=A.next;O+=L.x*(R.y-E.y);var F=R.y*L.x-R.x*L.y;T.localCOMx+=(L.x+R.x)*F,T.localCOMy+=(L.y+R.y)*F;var j=O=1/(3*O);T.localCOMx*=j,T.localCOMy*=j}}null!=k.wrap_localCOM&&(k.wrap_localCOM.zpp_inner.x=k.localCOMx,k.wrap_localCOM.zpp_inner.y=k.localCOMy)}var N=k.body;N.zip_axis&&(N.zip_axis=!1,N.axisx=Math.sin(N.rot),N.axisy=Math.cos(N.rot)),k.worldCOMx=k.body.posx+(k.body.axisy*k.localCOMx-k.body.axisx*k.localCOMy),k.worldCOMy=k.body.posy+(k.localCOMx*k.body.axisx+k.localCOMy*k.body.axisy)}var U=k.radius,V=k.radius;k.aabb.minx=k.worldCOMx-U,k.aabb.miny=k.worldCOMy-V,k.aabb.maxx=k.worldCOMx+U,k.aabb.maxy=k.worldCOMy+V}else{var H=e.polygon;if(H.zip_gverts&&null!=H.body){H.zip_gverts=!1,H.validate_lverts();var W=H.body;W.zip_axis&&(W.zip_axis=!1,W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot));for(var X=H.lverts.next,q=H.gverts.next;null!=q;){var Y=q,K=X;X=X.next,Y.x=H.body.posx+(H.body.axisy*K.x-H.body.axisx*K.y),Y.y=H.body.posy+(K.x*H.body.axisx+K.y*H.body.axisy),q=q.next}}var Z=H.gverts.next;H.aabb.minx=Z.x,H.aabb.miny=Z.y,H.aabb.maxx=Z.x,H.aabb.maxy=Z.y;for(var J=H.gverts.next.next;null!=J;){var Q=J;Q.x<H.aabb.minx&&(H.aabb.minx=Q.x),Q.x>H.aabb.maxx&&(H.aabb.maxx=Q.x),Q.y<H.aabb.miny&&(H.aabb.miny=Q.y),Q.y>H.aabb.maxy&&(H.aabb.maxy=Q.y),J=J.next}}var $;if(P.dyn==(1!=e.body.type&&!e.body.component.sleeping)){var ee=P.aabb,te=e.aabb;$=!(te.minx>=ee.minx&&te.miny>=ee.miny&&te.maxx<=ee.maxx&&te.maxy<=ee.maxy)}else $=!0;$&&(P.synced=!0,P.snext=M.syncs,M.syncs=P)}}},ti.prototype.broadphase=function(e,t){},ti.prototype.clear=function(){},ti.prototype.shapesUnderPoint=function(e,t,i,n){return null},ti.prototype.bodiesUnderPoint=function(e,t,i,n){return null},ti.prototype.aabbShape=null,ti.prototype.matrix=null,ti.prototype.updateAABBShape=function(e){if(null==this.aabbShape){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var t=new re(Uo.BodyType_STATIC).zpp_inner.wrap_shapes,i=this.aabbShape=new me(me.rect(e.minx,e.miny,e.maxx-e.minx,e.maxy-e.miny));t.zpp_inner.reverse_flag?t.push(i):t.unshift(i)}else{var n=this.aabbShape.zpp_inner.aabb,r=(e.maxx-e.minx)/(n.maxx-n.minx),o=(e.maxy-e.miny)/(n.maxy-n.miny);null==this.matrix&&(this.matrix=new ne);var a=this.matrix;a.zpp_inner.a=r;var s=a.zpp_inner;null!=s._invalidate&&s._invalidate();var l=this.matrix,p=this.matrix;p.zpp_inner.c=0;var h=p.zpp_inner;null!=h._invalidate&&h._invalidate(),l.zpp_inner.b=p.zpp_inner.c;var u=l.zpp_inner;null!=u._invalidate&&u._invalidate();var c=this.matrix;c.zpp_inner.d=o;var d=c.zpp_inner;null!=d._invalidate&&d._invalidate();var _=this.matrix;_.zpp_inner.tx=e.minx-r*n.minx;var y=_.zpp_inner;null!=y._invalidate&&y._invalidate();var m=this.matrix;m.zpp_inner.ty=e.miny-o*n.miny;var f=m.zpp_inner;null!=f._invalidate&&f._invalidate(),this.aabbShape.transform(this.matrix)}var x=this.aabbShape.zpp_inner;if(x.zip_aabb&&null!=x.body)if(x.zip_aabb=!1,0==x.type){var v=x.circle;if(v.zip_worldCOM&&null!=v.body){if(v.zip_worldCOM=!1,v.zip_localCOM){if(v.zip_localCOM=!1,1==v.type){var z=v.polygon;if(null==z.lverts.next.next)z.localCOMx=z.lverts.next.x,z.localCOMy=z.lverts.next.y;else if(null==z.lverts.next.next.next)z.localCOMx=z.lverts.next.x,z.localCOMy=z.lverts.next.y,z.localCOMx+=z.lverts.next.next.x,z.localCOMy+=z.lverts.next.next.y,z.localCOMx*=.5,z.localCOMy*=.5;else{z.localCOMx=0;var g=z.localCOMy=0,b=z.lverts.next,w=b,S=b=b.next;for(b=b.next;null!=b;){var C=b;g+=S.x*(C.y-w.y);var M=C.y*S.x-C.x*S.y;z.localCOMx+=(S.x+C.x)*M,z.localCOMy+=(S.y+C.y)*M,w=S,S=C,b=b.next}var P=b=z.lverts.next;g+=S.x*(P.y-w.y);var k=P.y*S.x-P.x*S.y;z.localCOMx+=(S.x+P.x)*k,z.localCOMy+=(S.y+P.y)*k,w=S;var T=b=b.next;g+=P.x*(T.y-w.y);var O=T.y*P.x-T.x*P.y;z.localCOMx+=(P.x+T.x)*O,z.localCOMy+=(P.y+T.y)*O;var A=g=1/(3*g);z.localCOMx*=A,z.localCOMy*=A}}null!=v.wrap_localCOM&&(v.wrap_localCOM.zpp_inner.x=v.localCOMx,v.wrap_localCOM.zpp_inner.y=v.localCOMy)}var E=v.body;E.zip_axis&&(E.zip_axis=!1,E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot)),v.worldCOMx=v.body.posx+(v.body.axisy*v.localCOMx-v.body.axisx*v.localCOMy),v.worldCOMy=v.body.posy+(v.localCOMx*v.body.axisx+v.localCOMy*v.body.axisy)}var G=v.radius,I=v.radius;v.aabb.minx=v.worldCOMx-G,v.aabb.miny=v.worldCOMy-I,v.aabb.maxx=v.worldCOMx+G,v.aabb.maxy=v.worldCOMy+I}else{var B=x.polygon;if(B.zip_gverts&&null!=B.body){B.zip_gverts=!1,B.validate_lverts();var L=B.body;L.zip_axis&&(L.zip_axis=!1,L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot));for(var D=B.lverts.next,R=B.gverts.next;null!=R;){var F=R,j=D;D=D.next,F.x=B.body.posx+(B.body.axisy*j.x-B.body.axisx*j.y),F.y=B.body.posy+(j.x*B.body.axisx+j.y*B.body.axisy),R=R.next}}var N=B.gverts.next;B.aabb.minx=N.x,B.aabb.miny=N.y,B.aabb.maxx=N.x,B.aabb.maxy=N.y;for(var U=B.gverts.next.next;null!=U;){var V=U;V.x<B.aabb.minx&&(B.aabb.minx=V.x),V.x>B.aabb.maxx&&(B.aabb.maxx=V.x),V.y<B.aabb.miny&&(B.aabb.miny=V.y),V.y>B.aabb.maxy&&(B.aabb.maxy=V.y),U=U.next}}var H=this.aabbShape.zpp_inner.polygon;if(H.zip_gaxi&&null!=H.body){H.zip_gaxi=!1,H.validate_laxi();var W=H.body;if(W.zip_axis&&(W.zip_axis=!1,W.axisx=Math.sin(W.rot),W.axisy=Math.cos(W.rot)),H.zip_gverts&&null!=H.body){H.zip_gverts=!1,H.validate_lverts();var X=H.body;X.zip_axis&&(X.zip_axis=!1,X.axisx=Math.sin(X.rot),X.axisy=Math.cos(X.rot));for(var q=H.lverts.next,Y=H.gverts.next;null!=Y;){var K=Y,Z=q;q=q.next,K.x=H.body.posx+(H.body.axisy*Z.x-H.body.axisx*Z.y),K.y=H.body.posy+(Z.x*H.body.axisx+Z.y*H.body.axisy),Y=Y.next}}var J=H.edges.head,Q=H.gverts.next,$=Q;for(Q=Q.next;null!=Q;){var ee=Q,te=J.elt;J=J.next,te.gp0=$,te.gp1=ee,te.gnormx=H.body.axisy*te.lnormx-H.body.axisx*te.lnormy,te.gnormy=te.lnormx*H.body.axisx+te.lnormy*H.body.axisy,te.gprojection=H.body.posx*te.gnormx+H.body.posy*te.gnormy+te.lprojection,null!=te.wrap_gnorm&&(te.wrap_gnorm.zpp_inner.x=te.gnormx,te.wrap_gnorm.zpp_inner.y=te.gnormy),te.tp0=te.gp0.y*te.gnormx-te.gp0.x*te.gnormy,te.tp1=te.gp1.y*te.gnormx-te.gp1.x*te.gnormy,$=ee,Q=Q.next}var ie=J.elt;ie.gp0=$,ie.gp1=H.gverts.next,ie.gnormx=H.body.axisy*ie.lnormx-H.body.axisx*ie.lnormy,ie.gnormy=ie.lnormx*H.body.axisx+ie.lnormy*H.body.axisy,ie.gprojection=H.body.posx*ie.gnormx+H.body.posy*ie.gnormy+ie.lprojection,null!=ie.wrap_gnorm&&(ie.wrap_gnorm.zpp_inner.x=ie.gnormx,ie.wrap_gnorm.zpp_inner.y=ie.gnormy),ie.tp0=ie.gp0.y*ie.gnormx-ie.gp0.x*ie.gnormy,ie.tp1=ie.gp1.y*ie.gnormx-ie.gp1.x*ie.gnormy}},ti.prototype.shapesInAABB=function(e,t,i,n,r){return null},ti.prototype.bodiesInAABB=function(e,t,i,n,r){return null},ti.prototype.circShape=null,ti.prototype.updateCircShape=function(e,t,i){if(null==this.circShape){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var n,r=new re(Uo.BodyType_STATIC).zpp_inner.wrap_shapes;if(null==jn.poolVec2?n=new ht:(n=jn.poolVec2,jn.poolVec2=n.zpp_pool,n.zpp_pool=null),null==n.zpp_inner){var o;null==el.zpp_pool?o=new el:(o=el.zpp_pool,el.zpp_pool=o.next,o.next=null),o.weak=!1,o._immutable=!1,o.x=e,o.y=t,n.zpp_inner=o,n.zpp_inner.outer=n}else{var a,s=n.zpp_inner;if(null!=s._validate&&s._validate(),n.zpp_inner.x==e){var l=n.zpp_inner;null!=l._validate&&l._validate(),a=n.zpp_inner.y==t}else a=!1;if(!a){n.zpp_inner.x=e,n.zpp_inner.y=t;var p=n.zpp_inner;null!=p._invalidate&&p._invalidate(p)}}n.zpp_inner.weak=!1;var h=this.circShape=new de(i,n);r.zpp_inner.reverse_flag?r.push(h):r.unshift(h)}else{var u=this.circShape.zpp_inner.circle,c=i/u.radius;null==this.matrix&&(this.matrix=new ne);var d=this.matrix,_=this.matrix;_.zpp_inner.d=c;var y=_.zpp_inner;null!=y._invalidate&&y._invalidate(),d.zpp_inner.a=_.zpp_inner.d;var m=d.zpp_inner;null!=m._invalidate&&m._invalidate();var f=this.matrix,x=this.matrix;x.zpp_inner.c=0;var v=x.zpp_inner;null!=v._invalidate&&v._invalidate(),f.zpp_inner.b=x.zpp_inner.c;var z=f.zpp_inner;null!=z._invalidate&&z._invalidate();var g=this.matrix;g.zpp_inner.tx=e-c*u.localCOMx;var b=g.zpp_inner;null!=b._invalidate&&b._invalidate();var w=this.matrix;w.zpp_inner.ty=t-c*u.localCOMy;var S=w.zpp_inner;null!=S._invalidate&&S._invalidate(),this.circShape.transform(this.matrix)}var C=this.circShape.zpp_inner;if(C.zip_aabb&&null!=C.body)if(C.zip_aabb=!1,0==C.type){var M=C.circle;if(M.zip_worldCOM&&null!=M.body){if(M.zip_worldCOM=!1,M.zip_localCOM){if(M.zip_localCOM=!1,1==M.type){var P=M.polygon;if(null==P.lverts.next.next)P.localCOMx=P.lverts.next.x,P.localCOMy=P.lverts.next.y;else if(null==P.lverts.next.next.next)P.localCOMx=P.lverts.next.x,P.localCOMy=P.lverts.next.y,P.localCOMx+=P.lverts.next.next.x,P.localCOMy+=P.lverts.next.next.y,P.localCOMx*=.5,P.localCOMy*=.5;else{P.localCOMx=0;var k=P.localCOMy=0,T=P.lverts.next,O=T,A=T=T.next;for(T=T.next;null!=T;){var E=T;k+=A.x*(E.y-O.y);var G=E.y*A.x-E.x*A.y;P.localCOMx+=(A.x+E.x)*G,P.localCOMy+=(A.y+E.y)*G,O=A,A=E,T=T.next}var I=T=P.lverts.next;k+=A.x*(I.y-O.y);var B=I.y*A.x-I.x*A.y;P.localCOMx+=(A.x+I.x)*B,P.localCOMy+=(A.y+I.y)*B,O=A;var L=T=T.next;k+=I.x*(L.y-O.y);var D=L.y*I.x-L.x*I.y;P.localCOMx+=(I.x+L.x)*D,P.localCOMy+=(I.y+L.y)*D;var R=k=1/(3*k);P.localCOMx*=R,P.localCOMy*=R}}null!=M.wrap_localCOM&&(M.wrap_localCOM.zpp_inner.x=M.localCOMx,M.wrap_localCOM.zpp_inner.y=M.localCOMy)}var F=M.body;F.zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot)),M.worldCOMx=M.body.posx+(M.body.axisy*M.localCOMx-M.body.axisx*M.localCOMy),M.worldCOMy=M.body.posy+(M.localCOMx*M.body.axisx+M.localCOMy*M.body.axisy)}var j=M.radius,N=M.radius;M.aabb.minx=M.worldCOMx-j,M.aabb.miny=M.worldCOMy-N,M.aabb.maxx=M.worldCOMx+j,M.aabb.maxy=M.worldCOMy+N}else{var U=C.polygon;if(U.zip_gverts&&null!=U.body){U.zip_gverts=!1,U.validate_lverts();var V=U.body;V.zip_axis&&(V.zip_axis=!1,V.axisx=Math.sin(V.rot),V.axisy=Math.cos(V.rot));for(var H=U.lverts.next,W=U.gverts.next;null!=W;){var X=W,q=H;H=H.next,X.x=U.body.posx+(U.body.axisy*q.x-U.body.axisx*q.y),X.y=U.body.posy+(q.x*U.body.axisx+q.y*U.body.axisy),W=W.next}}var Y=U.gverts.next;U.aabb.minx=Y.x,U.aabb.miny=Y.y,U.aabb.maxx=Y.x,U.aabb.maxy=Y.y;for(var K=U.gverts.next.next;null!=K;){var Z=K;Z.x<U.aabb.minx&&(U.aabb.minx=Z.x),Z.x>U.aabb.maxx&&(U.aabb.maxx=Z.x),Z.y<U.aabb.miny&&(U.aabb.miny=Z.y),Z.y>U.aabb.maxy&&(U.aabb.maxy=Z.y),K=K.next}}},ti.prototype.shapesInCircle=function(e,t,i,n,r,o){return null},ti.prototype.bodiesInCircle=function(e,t,i,n,r,o){return null},ti.prototype.validateShape=function(e){if(1==e.type){var t=e.polygon;if(t.zip_gaxi&&null!=t.body){t.zip_gaxi=!1,t.validate_laxi();var i=t.body;if(i.zip_axis&&(i.zip_axis=!1,i.axisx=Math.sin(i.rot),i.axisy=Math.cos(i.rot)),t.zip_gverts&&null!=t.body){t.zip_gverts=!1,t.validate_lverts();var n=t.body;n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot));for(var r=t.lverts.next,o=t.gverts.next;null!=o;){var a=o,s=r;r=r.next,a.x=t.body.posx+(t.body.axisy*s.x-t.body.axisx*s.y),a.y=t.body.posy+(s.x*t.body.axisx+s.y*t.body.axisy),o=o.next}}var l=t.edges.head,p=t.gverts.next,h=p;for(p=p.next;null!=p;){var u=p,c=l.elt;l=l.next,c.gp0=h,c.gp1=u,c.gnormx=t.body.axisy*c.lnormx-t.body.axisx*c.lnormy,c.gnormy=c.lnormx*t.body.axisx+c.lnormy*t.body.axisy,c.gprojection=t.body.posx*c.gnormx+t.body.posy*c.gnormy+c.lprojection,null!=c.wrap_gnorm&&(c.wrap_gnorm.zpp_inner.x=c.gnormx,c.wrap_gnorm.zpp_inner.y=c.gnormy),c.tp0=c.gp0.y*c.gnormx-c.gp0.x*c.gnormy,c.tp1=c.gp1.y*c.gnormx-c.gp1.x*c.gnormy,h=u,p=p.next}var d=l.elt;d.gp0=h,d.gp1=t.gverts.next,d.gnormx=t.body.axisy*d.lnormx-t.body.axisx*d.lnormy,d.gnormy=d.lnormx*t.body.axisx+d.lnormy*t.body.axisy,d.gprojection=t.body.posx*d.gnormx+t.body.posy*d.gnormy+d.lprojection,null!=d.wrap_gnorm&&(d.wrap_gnorm.zpp_inner.x=d.gnormx,d.wrap_gnorm.zpp_inner.y=d.gnormy),d.tp0=d.gp0.y*d.gnormx-d.gp0.x*d.gnormy,d.tp1=d.gp1.y*d.gnormx-d.gp1.x*d.gnormy}}if(e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var _=e.circle;if(_.zip_worldCOM&&null!=_.body){if(_.zip_worldCOM=!1,_.zip_localCOM){if(_.zip_localCOM=!1,1==_.type){var y=_.polygon;if(null==y.lverts.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y;else if(null==y.lverts.next.next.next)y.localCOMx=y.lverts.next.x,y.localCOMy=y.lverts.next.y,y.localCOMx+=y.lverts.next.next.x,y.localCOMy+=y.lverts.next.next.y,y.localCOMx*=.5,y.localCOMy*=.5;else{y.localCOMx=0;var m=y.localCOMy=0,f=y.lverts.next,x=f,v=f=f.next;for(f=f.next;null!=f;){var z=f;m+=v.x*(z.y-x.y);var g=z.y*v.x-z.x*v.y;y.localCOMx+=(v.x+z.x)*g,y.localCOMy+=(v.y+z.y)*g,x=v,v=z,f=f.next}var b=f=y.lverts.next;m+=v.x*(b.y-x.y);var w=b.y*v.x-b.x*v.y;y.localCOMx+=(v.x+b.x)*w,y.localCOMy+=(v.y+b.y)*w,x=v;var S=f=f.next;m+=b.x*(S.y-x.y);var C=S.y*b.x-S.x*b.y;y.localCOMx+=(b.x+S.x)*C,y.localCOMy+=(b.y+S.y)*C;var M=m=1/(3*m);y.localCOMx*=M,y.localCOMy*=M}}null!=_.wrap_localCOM&&(_.wrap_localCOM.zpp_inner.x=_.localCOMx,_.wrap_localCOM.zpp_inner.y=_.localCOMy)}var P=_.body;P.zip_axis&&(P.zip_axis=!1,P.axisx=Math.sin(P.rot),P.axisy=Math.cos(P.rot)),_.worldCOMx=_.body.posx+(_.body.axisy*_.localCOMx-_.body.axisx*_.localCOMy),_.worldCOMy=_.body.posy+(_.localCOMx*_.body.axisx+_.localCOMy*_.body.axisy)}var k=_.radius,T=_.radius;_.aabb.minx=_.worldCOMx-k,_.aabb.miny=_.worldCOMy-T,_.aabb.maxx=_.worldCOMx+k,_.aabb.maxy=_.worldCOMy+T}else{var O=e.polygon;if(O.zip_gverts&&null!=O.body){O.zip_gverts=!1,O.validate_lverts();var A=O.body;A.zip_axis&&(A.zip_axis=!1,A.axisx=Math.sin(A.rot),A.axisy=Math.cos(A.rot));for(var E=O.lverts.next,G=O.gverts.next;null!=G;){var I=G,B=E;E=E.next,I.x=O.body.posx+(O.body.axisy*B.x-O.body.axisx*B.y),I.y=O.body.posy+(B.x*O.body.axisx+B.y*O.body.axisy),G=G.next}}var L=O.gverts.next;O.aabb.minx=L.x,O.aabb.miny=L.y,O.aabb.maxx=L.x,O.aabb.maxy=L.y;for(var D=O.gverts.next.next;null!=D;){var R=D;R.x<O.aabb.minx&&(O.aabb.minx=R.x),R.x>O.aabb.maxx&&(O.aabb.maxx=R.x),R.y<O.aabb.miny&&(O.aabb.miny=R.y),R.y>O.aabb.maxy&&(O.aabb.maxy=R.y),D=D.next}}if(e.zip_worldCOM&&null!=e.body){if(e.zip_worldCOM=!1,e.zip_localCOM){if(e.zip_localCOM=!1,1==e.type){var F=e.polygon;if(null==F.lverts.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y;else if(null==F.lverts.next.next.next)F.localCOMx=F.lverts.next.x,F.localCOMy=F.lverts.next.y,F.localCOMx+=F.lverts.next.next.x,F.localCOMy+=F.lverts.next.next.y,F.localCOMx*=.5,F.localCOMy*=.5;else{F.localCOMx=0;var j=F.localCOMy=0,N=F.lverts.next,U=N,V=N=N.next;for(N=N.next;null!=N;){var H=N;j+=V.x*(H.y-U.y);var W=H.y*V.x-H.x*V.y;F.localCOMx+=(V.x+H.x)*W,F.localCOMy+=(V.y+H.y)*W,U=V,V=H,N=N.next}var X=N=F.lverts.next;j+=V.x*(X.y-U.y);var q=X.y*V.x-X.x*V.y;F.localCOMx+=(V.x+X.x)*q,F.localCOMy+=(V.y+X.y)*q,U=V;var Y=N=N.next;j+=X.x*(Y.y-U.y);var K=Y.y*X.x-Y.x*X.y;F.localCOMx+=(X.x+Y.x)*K,F.localCOMy+=(X.y+Y.y)*K;var Z=j=1/(3*j);F.localCOMx*=Z,F.localCOMy*=Z}}null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy)}var J=e.body;J.zip_axis&&(J.zip_axis=!1,J.axisx=Math.sin(J.rot),J.axisy=Math.cos(J.rot)),e.worldCOMx=e.body.posx+(e.body.axisy*e.localCOMx-e.body.axisx*e.localCOMy),e.worldCOMy=e.body.posy+(e.localCOMx*e.body.axisx+e.localCOMy*e.body.axisy)}},ti.prototype.shapesInShape=function(e,t,i,n){return null},ti.prototype.bodiesInShape=function(e,t,i,n){return null},ti.prototype.rayCast=function(e,t,i){return null},ti.prototype.rayMultiCast=function(e,t,i,n){return null},ti.prototype.__class__=ti;var Eo=zpp_nape.space.ZPP_AABBNode=function(){this.first_sync=!1,this.synced=!1,this.snext=null,this.moved=!1,this.mnext=null,this.next=null,this.rayt=0,this.height=0,this.child2=null,this.child1=null,this.parent=null,this.dyn=!1,this.shape=null,this.aabb=null,this.height=-1};Eo.__name__=["zpp_nape","space","ZPP_AABBNode"],Eo.prototype.aabb=null,Eo.prototype.shape=null,Eo.prototype.dyn=null,Eo.prototype.parent=null,Eo.prototype.child1=null,Eo.prototype.child2=null,Eo.prototype.height=null,Eo.prototype.rayt=null,Eo.prototype.next=null,Eo.prototype.alloc=function(){null==Ao.zpp_pool?this.aabb=new Ao:(this.aabb=Ao.zpp_pool,Ao.zpp_pool=this.aabb.next,this.aabb.next=null),this.moved=!1,this.synced=!1,this.first_sync=!1},Eo.prototype.free=function(){this.height=-1;var e=this.aabb;null!=e.outer&&(e.outer.zpp_inner=null,e.outer=null),e.wrap_min=e.wrap_max=null,e._invalidate=null,e._validate=null,e.next=Ao.zpp_pool,Ao.zpp_pool=e,this.child1=this.child2=this.parent=null,this.next=null,this.snext=null,this.mnext=null},Eo.prototype.mnext=null,Eo.prototype.moved=null,Eo.prototype.snext=null,Eo.prototype.synced=null,Eo.prototype.first_sync=null,Eo.prototype.isLeaf=function(){return null==this.child1},Eo.prototype.__class__=Eo;var nr=zpp_nape.space.ZPP_AABBPair=function(){this.next=null,this.arb=null,this.di=0,this.id=0,this.sleeping=!1,this.first=!1,this.n2=null,this.n1=null};nr.__name__=["zpp_nape","space","ZPP_AABBPair"],nr.prototype.n1=null,nr.prototype.n2=null,nr.prototype.first=null,nr.prototype.sleeping=null,nr.prototype.id=null,nr.prototype.di=null,nr.prototype.arb=null,nr.prototype.next=null,nr.prototype.alloc=function(){},nr.prototype.free=function(){this.n1=this.n2=null,this.sleeping=!1},nr.prototype.__class__=nr;var Go=zpp_nape.space.ZPP_AABBTree=function(){this.root=null};Go.__name__=["zpp_nape","space","ZPP_AABBTree"],Go.prototype.root=null,Go.prototype.clear=function(){if(null!=this.root){var e=null;for(this.root.next=e,e=this.root;null!=e;){var t=e;e=t.next,(t.next=null)==t.child1?(t.shape.node=null,t.shape.removedFromSpace(),t.shape=null):(null!=t.child1&&(t.child1.next=e,e=t.child1),null!=t.child2&&(t.child2.next=e,e=t.child2)),t.height=-1;var i=t.aabb;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i.wrap_min=i.wrap_max=null,i._invalidate=null,i._validate=null,i.next=Ao.zpp_pool,Ao.zpp_pool=i,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t}this.root=null}},Go.prototype.insertLeaf=function(e){if(null==this.root)this.root=e,this.root.parent=null;else{for(var t=e.aabb,i=this.root;null!=i.child1;){var n=i.child1,r=i.child2,o=i.aabb,a=2*(o.maxx-o.minx+(o.maxy-o.miny)),s=Go.tmpaabb,l=i.aabb;s.minx=l.minx<t.minx?l.minx:t.minx,s.miny=l.miny<t.miny?l.miny:t.miny,s.maxx=l.maxx>t.maxx?l.maxx:t.maxx,s.maxy=l.maxy>t.maxy?l.maxy:t.maxy;var p,h=Go.tmpaabb,u=2*(h.maxx-h.minx+(h.maxy-h.miny)),c=2*u,d=2*(u-a),_=Go.tmpaabb,y=n.aabb;if(_.minx=t.minx<y.minx?t.minx:y.minx,_.miny=t.miny<y.miny?t.miny:y.miny,_.maxx=t.maxx>y.maxx?t.maxx:y.maxx,_.maxy=t.maxy>y.maxy?t.maxy:y.maxy,null==n.child1){var m=Go.tmpaabb;p=2*(m.maxx-m.minx+(m.maxy-m.miny))+d}else{var f=n.aabb,x=2*(f.maxx-f.minx+(f.maxy-f.miny)),v=Go.tmpaabb;p=2*(v.maxx-v.minx+(v.maxy-v.miny))-x+d}var z,g=Go.tmpaabb,b=r.aabb;if(g.minx=t.minx<b.minx?t.minx:b.minx,g.miny=t.miny<b.miny?t.miny:b.miny,g.maxx=t.maxx>b.maxx?t.maxx:b.maxx,g.maxy=t.maxy>b.maxy?t.maxy:b.maxy,null==r.child1){var w=Go.tmpaabb;z=2*(w.maxx-w.minx+(w.maxy-w.miny))+d}else{var S=r.aabb,C=2*(S.maxx-S.minx+(S.maxy-S.miny)),M=Go.tmpaabb;z=2*(M.maxx-M.minx+(M.maxy-M.miny))-C+d}if(c<p&&c<z)break;i=p<z?n:r}var P,k=i,T=k.parent;null==Eo.zpp_pool?P=new Eo:(P=Eo.zpp_pool,Eo.zpp_pool=P.next,P.next=null),null==Ao.zpp_pool?P.aabb=new Ao:(P.aabb=Ao.zpp_pool,Ao.zpp_pool=P.aabb.next,P.aabb.next=null),P.moved=!1,P.synced=!1,P.first_sync=!1,P.parent=T;var O=P.aabb,A=k.aabb;for(O.minx=t.minx<A.minx?t.minx:A.minx,O.miny=t.miny<A.miny?t.miny:A.miny,O.maxx=t.maxx>A.maxx?t.maxx:A.maxx,O.maxy=t.maxy>A.maxy?t.maxy:A.maxy,P.height=k.height+1,null!=T?(T.child1==k?T.child1=P:T.child2=P,P.child1=k,P.child2=e,k.parent=P,e.parent=P):(P.child1=k,P.child2=e,k.parent=P,e.parent=P,this.root=P),i=e.parent;null!=i;){if(null==i.child1||i.height<2)i=i;else{var E=i.child1,G=i.child2,I=G.height-E.height;if(1<I){var B=G.child1,L=G.child2;if(G.child1=i,G.parent=i.parent,null!=(i.parent=G).parent?G.parent.child1==i?G.parent.child1=G:G.parent.child2=G:this.root=G,B.height>L.height){G.child2=B;var D=((i.child2=L).parent=i).aabb,R=E.aabb,F=L.aabb;D.minx=R.minx<F.minx?R.minx:F.minx,D.miny=R.miny<F.miny?R.miny:F.miny,D.maxx=R.maxx>F.maxx?R.maxx:F.maxx,D.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=G.aabb,N=i.aabb,U=B.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var V=E.height,H=L.height;i.height=1+(H<V?V:H);var W=i.height,X=B.height;G.height=1+(X<W?W:X)}else{G.child2=L;var q=((i.child2=B).parent=i).aabb,Y=E.aabb,K=B.aabb;q.minx=Y.minx<K.minx?Y.minx:K.minx,q.miny=Y.miny<K.miny?Y.miny:K.miny,q.maxx=Y.maxx>K.maxx?Y.maxx:K.maxx,q.maxy=Y.maxy>K.maxy?Y.maxy:K.maxy;var Z=G.aabb,J=i.aabb,Q=L.aabb;Z.minx=J.minx<Q.minx?J.minx:Q.minx,Z.miny=J.miny<Q.miny?J.miny:Q.miny,Z.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,Z.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=E.height,ee=B.height;i.height=1+(ee<$?$:ee);var te=i.height,ie=L.height;G.height=1+(ie<te?te:ie)}i=G}else if(I<-1){var ne=E.child1,re=E.child2;if(E.child1=i,E.parent=i.parent,null!=(i.parent=E).parent?E.parent.child1==i?E.parent.child1=E:E.parent.child2=E:this.root=E,ne.height>re.height){E.child2=ne;var oe=((i.child1=re).parent=i).aabb,ae=G.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var le=E.aabb,pe=i.aabb,he=ne.aabb;le.minx=pe.minx<he.minx?pe.minx:he.minx,le.miny=pe.miny<he.miny?pe.miny:he.miny,le.maxx=pe.maxx>he.maxx?pe.maxx:he.maxx,le.maxy=pe.maxy>he.maxy?pe.maxy:he.maxy;var ue=G.height,ce=re.height;i.height=1+(ce<ue?ue:ce);var de=i.height,_e=ne.height;E.height=1+(_e<de?de:_e)}else{E.child2=re;var ye=((i.child1=ne).parent=i).aabb,me=G.aabb,fe=ne.aabb;ye.minx=me.minx<fe.minx?me.minx:fe.minx,ye.miny=me.miny<fe.miny?me.miny:fe.miny,ye.maxx=me.maxx>fe.maxx?me.maxx:fe.maxx,ye.maxy=me.maxy>fe.maxy?me.maxy:fe.maxy;var xe=E.aabb,ve=i.aabb,ze=re.aabb;xe.minx=ve.minx<ze.minx?ve.minx:ze.minx,xe.miny=ve.miny<ze.miny?ve.miny:ze.miny,xe.maxx=ve.maxx>ze.maxx?ve.maxx:ze.maxx,xe.maxy=ve.maxy>ze.maxy?ve.maxy:ze.maxy;var ge=G.height,be=ne.height;i.height=1+(be<ge?ge:be);var we=i.height,Se=re.height;E.height=1+(Se<we?we:Se)}i=E}else i=i}var Ce=i.child1,Me=i.child2,Pe=Ce.height,ke=Me.height;i.height=1+(ke<Pe?Pe:ke);var Te=i.aabb,Oe=Ce.aabb,Ae=Me.aabb;Te.minx=Oe.minx<Ae.minx?Oe.minx:Ae.minx,Te.miny=Oe.miny<Ae.miny?Oe.miny:Ae.miny,Te.maxx=Oe.maxx>Ae.maxx?Oe.maxx:Ae.maxx,Te.maxy=Oe.maxy>Ae.maxy?Oe.maxy:Ae.maxy,i=i.parent}}},Go.prototype.inlined_insertLeaf=function(e){if(null==this.root)this.root=e,this.root.parent=null;else{for(var t=e.aabb,i=this.root;null!=i.child1;){var n=i.child1,r=i.child2,o=i.aabb,a=2*(o.maxx-o.minx+(o.maxy-o.miny)),s=Go.tmpaabb,l=i.aabb;s.minx=l.minx<t.minx?l.minx:t.minx,s.miny=l.miny<t.miny?l.miny:t.miny,s.maxx=l.maxx>t.maxx?l.maxx:t.maxx,s.maxy=l.maxy>t.maxy?l.maxy:t.maxy;var p,h=Go.tmpaabb,u=2*(h.maxx-h.minx+(h.maxy-h.miny)),c=2*u,d=2*(u-a),_=Go.tmpaabb,y=n.aabb;if(_.minx=t.minx<y.minx?t.minx:y.minx,_.miny=t.miny<y.miny?t.miny:y.miny,_.maxx=t.maxx>y.maxx?t.maxx:y.maxx,_.maxy=t.maxy>y.maxy?t.maxy:y.maxy,null==n.child1){var m=Go.tmpaabb;p=2*(m.maxx-m.minx+(m.maxy-m.miny))+d}else{var f=n.aabb,x=2*(f.maxx-f.minx+(f.maxy-f.miny)),v=Go.tmpaabb;p=2*(v.maxx-v.minx+(v.maxy-v.miny))-x+d}var z,g=Go.tmpaabb,b=r.aabb;if(g.minx=t.minx<b.minx?t.minx:b.minx,g.miny=t.miny<b.miny?t.miny:b.miny,g.maxx=t.maxx>b.maxx?t.maxx:b.maxx,g.maxy=t.maxy>b.maxy?t.maxy:b.maxy,null==r.child1){var w=Go.tmpaabb;z=2*(w.maxx-w.minx+(w.maxy-w.miny))+d}else{var S=r.aabb,C=2*(S.maxx-S.minx+(S.maxy-S.miny)),M=Go.tmpaabb;z=2*(M.maxx-M.minx+(M.maxy-M.miny))-C+d}if(c<p&&c<z)break;i=p<z?n:r}var P,k=i,T=k.parent;null==Eo.zpp_pool?P=new Eo:(P=Eo.zpp_pool,Eo.zpp_pool=P.next,P.next=null),null==Ao.zpp_pool?P.aabb=new Ao:(P.aabb=Ao.zpp_pool,Ao.zpp_pool=P.aabb.next,P.aabb.next=null),P.moved=!1,P.synced=!1,P.first_sync=!1,P.parent=T;var O=P.aabb,A=k.aabb;for(O.minx=t.minx<A.minx?t.minx:A.minx,O.miny=t.miny<A.miny?t.miny:A.miny,O.maxx=t.maxx>A.maxx?t.maxx:A.maxx,O.maxy=t.maxy>A.maxy?t.maxy:A.maxy,P.height=k.height+1,null!=T?(T.child1==k?T.child1=P:T.child2=P,P.child1=k,P.child2=e,k.parent=P,e.parent=P):(P.child1=k,P.child2=e,k.parent=P,e.parent=P,this.root=P),i=e.parent;null!=i;){if(null==i.child1||i.height<2)i=i;else{var E=i.child1,G=i.child2,I=G.height-E.height;if(1<I){var B=G.child1,L=G.child2;if(G.child1=i,G.parent=i.parent,null!=(i.parent=G).parent?G.parent.child1==i?G.parent.child1=G:G.parent.child2=G:this.root=G,B.height>L.height){G.child2=B;var D=((i.child2=L).parent=i).aabb,R=E.aabb,F=L.aabb;D.minx=R.minx<F.minx?R.minx:F.minx,D.miny=R.miny<F.miny?R.miny:F.miny,D.maxx=R.maxx>F.maxx?R.maxx:F.maxx,D.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=G.aabb,N=i.aabb,U=B.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var V=E.height,H=L.height;i.height=1+(H<V?V:H);var W=i.height,X=B.height;G.height=1+(X<W?W:X)}else{G.child2=L;var q=((i.child2=B).parent=i).aabb,Y=E.aabb,K=B.aabb;q.minx=Y.minx<K.minx?Y.minx:K.minx,q.miny=Y.miny<K.miny?Y.miny:K.miny,q.maxx=Y.maxx>K.maxx?Y.maxx:K.maxx,q.maxy=Y.maxy>K.maxy?Y.maxy:K.maxy;var Z=G.aabb,J=i.aabb,Q=L.aabb;Z.minx=J.minx<Q.minx?J.minx:Q.minx,Z.miny=J.miny<Q.miny?J.miny:Q.miny,Z.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,Z.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=E.height,ee=B.height;i.height=1+(ee<$?$:ee);var te=i.height,ie=L.height;G.height=1+(ie<te?te:ie)}i=G}else if(I<-1){var ne=E.child1,re=E.child2;if(E.child1=i,E.parent=i.parent,null!=(i.parent=E).parent?E.parent.child1==i?E.parent.child1=E:E.parent.child2=E:this.root=E,ne.height>re.height){E.child2=ne;var oe=((i.child1=re).parent=i).aabb,ae=G.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var le=E.aabb,pe=i.aabb,he=ne.aabb;le.minx=pe.minx<he.minx?pe.minx:he.minx,le.miny=pe.miny<he.miny?pe.miny:he.miny,le.maxx=pe.maxx>he.maxx?pe.maxx:he.maxx,le.maxy=pe.maxy>he.maxy?pe.maxy:he.maxy;var ue=G.height,ce=re.height;i.height=1+(ce<ue?ue:ce);var de=i.height,_e=ne.height;E.height=1+(_e<de?de:_e)}else{E.child2=re;var ye=((i.child1=ne).parent=i).aabb,me=G.aabb,fe=ne.aabb;ye.minx=me.minx<fe.minx?me.minx:fe.minx,ye.miny=me.miny<fe.miny?me.miny:fe.miny,ye.maxx=me.maxx>fe.maxx?me.maxx:fe.maxx,ye.maxy=me.maxy>fe.maxy?me.maxy:fe.maxy;var xe=E.aabb,ve=i.aabb,ze=re.aabb;xe.minx=ve.minx<ze.minx?ve.minx:ze.minx,xe.miny=ve.miny<ze.miny?ve.miny:ze.miny,xe.maxx=ve.maxx>ze.maxx?ve.maxx:ze.maxx,xe.maxy=ve.maxy>ze.maxy?ve.maxy:ze.maxy;var ge=G.height,be=ne.height;i.height=1+(be<ge?ge:be);var we=i.height,Se=re.height;E.height=1+(Se<we?we:Se)}i=E}else i=i}var Ce=i.child1,Me=i.child2,Pe=Ce.height,ke=Me.height;i.height=1+(ke<Pe?Pe:ke);var Te=i.aabb,Oe=Ce.aabb,Ae=Me.aabb;Te.minx=Oe.minx<Ae.minx?Oe.minx:Ae.minx,Te.miny=Oe.miny<Ae.miny?Oe.miny:Ae.miny,Te.maxx=Oe.maxx>Ae.maxx?Oe.maxx:Ae.maxx,Te.maxy=Oe.maxy>Ae.maxy?Oe.maxy:Ae.maxy,i=i.parent}}},Go.prototype.removeLeaf=function(e){if(e==this.root)this.root=null;else{var t=e.parent,i=t.parent,n=t.child1==e?t.child2:t.child1;if(null!=i){i.child1==t?i.child1=n:i.child2=n,n.parent=i,t.height=-1;var r=t.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Ao.zpp_pool,Ao.zpp_pool=r,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t;for(var o=i;null!=o;){if(null==o.child1||o.height<2)o=o;else{var a=o.child1,s=o.child2,l=s.height-a.height;if(1<l){var p=s.child1,h=s.child2;if(s.child1=o,s.parent=o.parent,null!=(o.parent=s).parent?s.parent.child1==o?s.parent.child1=s:s.parent.child2=s:this.root=s,p.height>h.height){s.child2=p;var u=((o.child2=h).parent=o).aabb,c=a.aabb,d=h.aabb;u.minx=c.minx<d.minx?c.minx:d.minx,u.miny=c.miny<d.miny?c.miny:d.miny,u.maxx=c.maxx>d.maxx?c.maxx:d.maxx,u.maxy=c.maxy>d.maxy?c.maxy:d.maxy;var _=s.aabb,y=o.aabb,m=p.aabb;_.minx=y.minx<m.minx?y.minx:m.minx,_.miny=y.miny<m.miny?y.miny:m.miny,_.maxx=y.maxx>m.maxx?y.maxx:m.maxx,_.maxy=y.maxy>m.maxy?y.maxy:m.maxy;var f=a.height,x=h.height;o.height=1+(x<f?f:x);var v=o.height,z=p.height;s.height=1+(z<v?v:z)}else{s.child2=h;var g=((o.child2=p).parent=o).aabb,b=a.aabb,w=p.aabb;g.minx=b.minx<w.minx?b.minx:w.minx,g.miny=b.miny<w.miny?b.miny:w.miny,g.maxx=b.maxx>w.maxx?b.maxx:w.maxx,g.maxy=b.maxy>w.maxy?b.maxy:w.maxy;var S=s.aabb,C=o.aabb,M=h.aabb;S.minx=C.minx<M.minx?C.minx:M.minx,S.miny=C.miny<M.miny?C.miny:M.miny,S.maxx=C.maxx>M.maxx?C.maxx:M.maxx,S.maxy=C.maxy>M.maxy?C.maxy:M.maxy;var P=a.height,k=p.height;o.height=1+(k<P?P:k);var T=o.height,O=h.height;s.height=1+(O<T?T:O)}o=s}else if(l<-1){var A=a.child1,E=a.child2;if(a.child1=o,a.parent=o.parent,null!=(o.parent=a).parent?a.parent.child1==o?a.parent.child1=a:a.parent.child2=a:this.root=a,A.height>E.height){a.child2=A;var G=((o.child1=E).parent=o).aabb,I=s.aabb,B=E.aabb;G.minx=I.minx<B.minx?I.minx:B.minx,G.miny=I.miny<B.miny?I.miny:B.miny,G.maxx=I.maxx>B.maxx?I.maxx:B.maxx,G.maxy=I.maxy>B.maxy?I.maxy:B.maxy;var L=a.aabb,D=o.aabb,R=A.aabb;L.minx=D.minx<R.minx?D.minx:R.minx,L.miny=D.miny<R.miny?D.miny:R.miny,L.maxx=D.maxx>R.maxx?D.maxx:R.maxx,L.maxy=D.maxy>R.maxy?D.maxy:R.maxy;var F=s.height,j=E.height;o.height=1+(j<F?F:j);var N=o.height,U=A.height;a.height=1+(U<N?N:U)}else{a.child2=E;var V=((o.child1=A).parent=o).aabb,H=s.aabb,W=A.aabb;V.minx=H.minx<W.minx?H.minx:W.minx,V.miny=H.miny<W.miny?H.miny:W.miny,V.maxx=H.maxx>W.maxx?H.maxx:W.maxx,V.maxy=H.maxy>W.maxy?H.maxy:W.maxy;var X=a.aabb,q=o.aabb,Y=E.aabb;X.minx=q.minx<Y.minx?q.minx:Y.minx,X.miny=q.miny<Y.miny?q.miny:Y.miny,X.maxx=q.maxx>Y.maxx?q.maxx:Y.maxx,X.maxy=q.maxy>Y.maxy?q.maxy:Y.maxy;var K=s.height,Z=A.height;o.height=1+(Z<K?K:Z);var J=o.height,Q=E.height;a.height=1+(Q<J?J:Q)}o=a}else o=o}var $=o.child1,ee=o.child2,te=o.aabb,ie=$.aabb,ne=ee.aabb;te.minx=ie.minx<ne.minx?ie.minx:ne.minx,te.miny=ie.miny<ne.miny?ie.miny:ne.miny,te.maxx=ie.maxx>ne.maxx?ie.maxx:ne.maxx,te.maxy=ie.maxy>ne.maxy?ie.maxy:ne.maxy;var re=$.height,oe=ee.height;o.height=1+(oe<re?re:oe),o=o.parent}}else{(this.root=n).parent=null,t.height=-1;var ae=t.aabb;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae.wrap_min=ae.wrap_max=null,ae._invalidate=null,ae._validate=null,ae.next=Ao.zpp_pool,Ao.zpp_pool=ae,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t}}},Go.prototype.inlined_removeLeaf=function(e){if(e!=this.root){var t=e.parent,i=t.parent,n=t.child1==e?t.child2:t.child1;if(null!=i){i.child1==t?i.child1=n:i.child2=n,n.parent=i,t.height=-1;var r=t.aabb;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Ao.zpp_pool,Ao.zpp_pool=r,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t;for(var o=i;null!=o;){if(null==o.child1||o.height<2)o=o;else{var a=o.child1,s=o.child2,l=s.height-a.height;if(1<l){var p=s.child1,h=s.child2;if(s.child1=o,s.parent=o.parent,null!=(o.parent=s).parent?s.parent.child1==o?s.parent.child1=s:s.parent.child2=s:this.root=s,p.height>h.height){s.child2=p;var u=((o.child2=h).parent=o).aabb,c=a.aabb,d=h.aabb;u.minx=c.minx<d.minx?c.minx:d.minx,u.miny=c.miny<d.miny?c.miny:d.miny,u.maxx=c.maxx>d.maxx?c.maxx:d.maxx,u.maxy=c.maxy>d.maxy?c.maxy:d.maxy;var _=s.aabb,y=o.aabb,m=p.aabb;_.minx=y.minx<m.minx?y.minx:m.minx,_.miny=y.miny<m.miny?y.miny:m.miny,_.maxx=y.maxx>m.maxx?y.maxx:m.maxx,_.maxy=y.maxy>m.maxy?y.maxy:m.maxy;var f=a.height,x=h.height;o.height=1+(x<f?f:x);var v=o.height,z=p.height;s.height=1+(z<v?v:z)}else{s.child2=h;var g=((o.child2=p).parent=o).aabb,b=a.aabb,w=p.aabb;g.minx=b.minx<w.minx?b.minx:w.minx,g.miny=b.miny<w.miny?b.miny:w.miny,g.maxx=b.maxx>w.maxx?b.maxx:w.maxx,g.maxy=b.maxy>w.maxy?b.maxy:w.maxy;var S=s.aabb,C=o.aabb,M=h.aabb;S.minx=C.minx<M.minx?C.minx:M.minx,S.miny=C.miny<M.miny?C.miny:M.miny,S.maxx=C.maxx>M.maxx?C.maxx:M.maxx,S.maxy=C.maxy>M.maxy?C.maxy:M.maxy;var P=a.height,k=p.height;o.height=1+(k<P?P:k);var T=o.height,O=h.height;s.height=1+(O<T?T:O)}o=s}else if(l<-1){var A=a.child1,E=a.child2;if(a.child1=o,a.parent=o.parent,null!=(o.parent=a).parent?a.parent.child1==o?a.parent.child1=a:a.parent.child2=a:this.root=a,A.height>E.height){a.child2=A;var G=((o.child1=E).parent=o).aabb,I=s.aabb,B=E.aabb;G.minx=I.minx<B.minx?I.minx:B.minx,G.miny=I.miny<B.miny?I.miny:B.miny,G.maxx=I.maxx>B.maxx?I.maxx:B.maxx,G.maxy=I.maxy>B.maxy?I.maxy:B.maxy;var L=a.aabb,D=o.aabb,R=A.aabb;L.minx=D.minx<R.minx?D.minx:R.minx,L.miny=D.miny<R.miny?D.miny:R.miny,L.maxx=D.maxx>R.maxx?D.maxx:R.maxx,L.maxy=D.maxy>R.maxy?D.maxy:R.maxy;var F=s.height,j=E.height;o.height=1+(j<F?F:j);var N=o.height,U=A.height;a.height=1+(U<N?N:U)}else{a.child2=E;var V=((o.child1=A).parent=o).aabb,H=s.aabb,W=A.aabb;V.minx=H.minx<W.minx?H.minx:W.minx,V.miny=H.miny<W.miny?H.miny:W.miny,V.maxx=H.maxx>W.maxx?H.maxx:W.maxx,V.maxy=H.maxy>W.maxy?H.maxy:W.maxy;var X=a.aabb,q=o.aabb,Y=E.aabb;X.minx=q.minx<Y.minx?q.minx:Y.minx,X.miny=q.miny<Y.miny?q.miny:Y.miny,X.maxx=q.maxx>Y.maxx?q.maxx:Y.maxx,X.maxy=q.maxy>Y.maxy?q.maxy:Y.maxy;var K=s.height,Z=A.height;o.height=1+(Z<K?K:Z);var J=o.height,Q=E.height;a.height=1+(Q<J?J:Q)}o=a}else o=o}var $=o.child1,ee=o.child2,te=o.aabb,ie=$.aabb,ne=ee.aabb;te.minx=ie.minx<ne.minx?ie.minx:ne.minx,te.miny=ie.miny<ne.miny?ie.miny:ne.miny,te.maxx=ie.maxx>ne.maxx?ie.maxx:ne.maxx,te.maxy=ie.maxy>ne.maxy?ie.maxy:ne.maxy;var re=$.height,oe=ee.height;o.height=1+(oe<re?re:oe),o=o.parent}}else{(this.root=n).parent=null,t.height=-1;var ae=t.aabb;null!=ae.outer&&(ae.outer.zpp_inner=null,ae.outer=null),ae.wrap_min=ae.wrap_max=null,ae._invalidate=null,ae._validate=null,ae.next=Ao.zpp_pool,Ao.zpp_pool=ae,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t}}else this.root=null},Go.prototype.balance=function(e){if(null==e.child1||e.height<2)return e;var t=e.child1,i=e.child2,n=i.height-t.height;if(1<n){var r=i.child1,o=i.child2;if(i.child1=e,i.parent=e.parent,null!=(e.parent=i).parent?i.parent.child1==e?i.parent.child1=i:i.parent.child2=i:this.root=i,r.height>o.height){i.child2=r;var a=((e.child2=o).parent=e).aabb,s=t.aabb,l=o.aabb;a.minx=s.minx<l.minx?s.minx:l.minx,a.miny=s.miny<l.miny?s.miny:l.miny,a.maxx=s.maxx>l.maxx?s.maxx:l.maxx,a.maxy=s.maxy>l.maxy?s.maxy:l.maxy;var p=i.aabb,h=e.aabb,u=r.aabb;p.minx=h.minx<u.minx?h.minx:u.minx,p.miny=h.miny<u.miny?h.miny:u.miny,p.maxx=h.maxx>u.maxx?h.maxx:u.maxx,p.maxy=h.maxy>u.maxy?h.maxy:u.maxy;var c=t.height,d=o.height;e.height=1+(d<c?c:d);var _=e.height,y=r.height;i.height=1+(y<_?_:y)}else{i.child2=o;var m=((e.child2=r).parent=e).aabb,f=t.aabb,x=r.aabb;m.minx=f.minx<x.minx?f.minx:x.minx,m.miny=f.miny<x.miny?f.miny:x.miny,m.maxx=f.maxx>x.maxx?f.maxx:x.maxx,m.maxy=f.maxy>x.maxy?f.maxy:x.maxy;var v=i.aabb,z=e.aabb,g=o.aabb;v.minx=z.minx<g.minx?z.minx:g.minx,v.miny=z.miny<g.miny?z.miny:g.miny,v.maxx=z.maxx>g.maxx?z.maxx:g.maxx,v.maxy=z.maxy>g.maxy?z.maxy:g.maxy;var b=t.height,w=r.height;e.height=1+(w<b?b:w);var S=e.height,C=o.height;i.height=1+(C<S?S:C)}return i}if(n<-1){var M=t.child1,P=t.child2;if(t.child1=e,t.parent=e.parent,null!=(e.parent=t).parent?t.parent.child1==e?t.parent.child1=t:t.parent.child2=t:this.root=t,M.height>P.height){t.child2=M;var k=((e.child1=P).parent=e).aabb,T=i.aabb,O=P.aabb;k.minx=T.minx<O.minx?T.minx:O.minx,k.miny=T.miny<O.miny?T.miny:O.miny,k.maxx=T.maxx>O.maxx?T.maxx:O.maxx,k.maxy=T.maxy>O.maxy?T.maxy:O.maxy;var A=t.aabb,E=e.aabb,G=M.aabb;A.minx=E.minx<G.minx?E.minx:G.minx,A.miny=E.miny<G.miny?E.miny:G.miny,A.maxx=E.maxx>G.maxx?E.maxx:G.maxx,A.maxy=E.maxy>G.maxy?E.maxy:G.maxy;var I=i.height,B=P.height;e.height=1+(B<I?I:B);var L=e.height,D=M.height;t.height=1+(D<L?L:D)}else{t.child2=P;var R=((e.child1=M).parent=e).aabb,F=i.aabb,j=M.aabb;R.minx=F.minx<j.minx?F.minx:j.minx,R.miny=F.miny<j.miny?F.miny:j.miny,R.maxx=F.maxx>j.maxx?F.maxx:j.maxx,R.maxy=F.maxy>j.maxy?F.maxy:j.maxy;var N=t.aabb,U=e.aabb,V=P.aabb;N.minx=U.minx<V.minx?U.minx:V.minx,N.miny=U.miny<V.miny?U.miny:V.miny,N.maxx=U.maxx>V.maxx?U.maxx:V.maxx,N.maxy=U.maxy>V.maxy?U.maxy:V.maxy;var H=i.height,W=M.height;e.height=1+(W<H?H:W);var X=e.height,q=P.height;t.height=1+(q<X?X:q)}return t}return e},Go.prototype.__class__=Go;var ii=zpp_nape.space.ZPP_DynAABBPhase=function(e){this.openlist=null,this.failed=null,this.treeStack2=null,this.treeStack=null,this.moves=null,this.syncs=null,this.pairs=null,this.dtree=null,this.stree=null,ti.call(this),this.space=e,this.is_sweep=!1,(this.dynab=this).stree=new Go,this.dtree=new Go};ii.__name__=["zpp_nape","space","ZPP_DynAABBPhase"],ii.__super__=ti,ii.prototype=Object.create(ti.prototype),ii.prototype.stree=null,ii.prototype.dtree=null,ii.prototype.pairs=null,ii.prototype.syncs=null,ii.prototype.moves=null,ii.prototype.dyn=function(e){return 1!=e.body.type&&!e.body.component.sleeping},ii.prototype.__insert=function(e){var t;null==Eo.zpp_pool?t=new Eo:(t=Eo.zpp_pool,Eo.zpp_pool=t.next,t.next=null),null==Ao.zpp_pool?t.aabb=new Ao:(t.aabb=Ao.zpp_pool,Ao.zpp_pool=t.aabb.next,t.aabb.next=null),t.moved=!1,t.synced=!1,t.first_sync=!1,((t.shape=e).node=t).synced=!0,t.first_sync=!0,t.snext=this.syncs,this.syncs=t},ii.prototype.__remove=function(e){var t=e.node;if(t.first_sync||(t.dyn?this.dtree.removeLeaf(t):this.stree.removeLeaf(t)),e.node=null,t.synced){for(var i=null,n=this.syncs;null!=n&&n!=t;)n=(i=n).snext;null==i?this.syncs=n.snext:i.snext=n.snext,n.snext=null,t.synced=!1}if(t.moved){for(var r=null,o=this.moves;null!=o&&o!=t;)o=(r=o).mnext;null==r?this.moves=o.mnext:r.mnext=o.mnext,o.mnext=null,t.moved=!1}for(var a=null,s=this.pairs;null!=s;){var l=s.next;if(s.n1!=t&&s.n2!=t)a=s,s=l;else{null==a?this.pairs=l:a.next=l,null!=s.arb&&(s.arb.pair=null),s.arb=null,s.n1.shape.pairs.remove(s),s.n2.shape.pairs.remove(s);var p=s;p.n1=p.n2=null,p.sleeping=!1,p.next=nr.zpp_pool,nr.zpp_pool=p,s=l}}for(;null!=e.pairs.head;){var h=e.pairs.pop_unsafe();h.n1==t?h.n2.shape.pairs.remove(h):h.n1.shape.pairs.remove(h),null!=h.arb&&(h.arb.pair=null),h.arb=null,h.n1=h.n2=null,h.sleeping=!1,h.next=nr.zpp_pool,nr.zpp_pool=h}t.height=-1;var u=t.aabb;null!=u.outer&&(u.outer.zpp_inner=null,u.outer=null),u.wrap_min=u.wrap_max=null,u._invalidate=null,u._validate=null,u.next=Ao.zpp_pool,Ao.zpp_pool=u,t.child1=t.child2=t.parent=null,t.next=null,t.snext=null,t.mnext=null,t.next=Eo.zpp_pool,Eo.zpp_pool=t},ii.prototype.__sync=function(e){var t=e.node;if(!t.synced){if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var i=e.circle;if(i.zip_worldCOM&&null!=i.body){if(i.zip_worldCOM=!1,i.zip_localCOM){if(i.zip_localCOM=!1,1==i.type){var n=i.polygon;if(null==n.lverts.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y;else if(null==n.lverts.next.next.next)n.localCOMx=n.lverts.next.x,n.localCOMy=n.lverts.next.y,n.localCOMx+=n.lverts.next.next.x,n.localCOMy+=n.lverts.next.next.y,n.localCOMx*=.5,n.localCOMy*=.5;else{n.localCOMx=0;var r=n.localCOMy=0,o=n.lverts.next,a=o,s=o=o.next;for(o=o.next;null!=o;){var l=o;r+=s.x*(l.y-a.y);var p=l.y*s.x-l.x*s.y;n.localCOMx+=(s.x+l.x)*p,n.localCOMy+=(s.y+l.y)*p,a=s,s=l,o=o.next}var h=o=n.lverts.next;r+=s.x*(h.y-a.y);var u=h.y*s.x-h.x*s.y;n.localCOMx+=(s.x+h.x)*u,n.localCOMy+=(s.y+h.y)*u,a=s;var c=o=o.next;r+=h.x*(c.y-a.y);var d=c.y*h.x-c.x*h.y;n.localCOMx+=(h.x+c.x)*d,n.localCOMy+=(h.y+c.y)*d;var _=r=1/(3*r);n.localCOMx*=_,n.localCOMy*=_}}null!=i.wrap_localCOM&&(i.wrap_localCOM.zpp_inner.x=i.localCOMx,i.wrap_localCOM.zpp_inner.y=i.localCOMy)}var y=i.body;y.zip_axis&&(y.zip_axis=!1,y.axisx=Math.sin(y.rot),y.axisy=Math.cos(y.rot)),i.worldCOMx=i.body.posx+(i.body.axisy*i.localCOMx-i.body.axisx*i.localCOMy),i.worldCOMy=i.body.posy+(i.localCOMx*i.body.axisx+i.localCOMy*i.body.axisy)}var m=i.radius,f=i.radius;i.aabb.minx=i.worldCOMx-m,i.aabb.miny=i.worldCOMy-f,i.aabb.maxx=i.worldCOMx+m,i.aabb.maxy=i.worldCOMy+f}else{var x=e.polygon;if(x.zip_gverts&&null!=x.body){x.zip_gverts=!1,x.validate_lverts();var v=x.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot));for(var z=x.lverts.next,g=x.gverts.next;null!=g;){var b=g,w=z;z=z.next,b.x=x.body.posx+(x.body.axisy*w.x-x.body.axisx*w.y),b.y=x.body.posy+(w.x*x.body.axisx+w.y*x.body.axisy),g=g.next}}var S=x.gverts.next;x.aabb.minx=S.x,x.aabb.miny=S.y,x.aabb.maxx=S.x,x.aabb.maxy=S.y;for(var C=x.gverts.next.next;null!=C;){var M=C;M.x<x.aabb.minx&&(x.aabb.minx=M.x),M.x>x.aabb.maxx&&(x.aabb.maxx=M.x),M.y<x.aabb.miny&&(x.aabb.miny=M.y),M.y>x.aabb.maxy&&(x.aabb.maxy=M.y),C=C.next}}var P;if(t.dyn==(1!=e.body.type&&!e.body.component.sleeping)){var k=t.aabb,T=e.aabb;P=!(T.minx>=k.minx&&T.miny>=k.miny&&T.maxx<=k.maxx&&T.maxy<=k.maxy)}else P=!0;P&&(t.synced=!0,t.snext=this.syncs,this.syncs=t)}},ii.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.syncs)if(null==this.moves){for(var e=this.syncs;null!=e;){var t=e.shape;if(e.first_sync)e.first_sync=!1;else{var i=e.dyn?this.dtree:this.stree;if(e==i.root)i.root=null;else{var n=e.parent,r=n.parent,o=n.child1==e?n.child2:n.child1;if(null!=r){r.child1==n?r.child1=o:r.child2=o,o.parent=r,n.height=-1;var a=n.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a.wrap_min=a.wrap_max=null,a._invalidate=null,a._validate=null,a.next=Ao.zpp_pool,Ao.zpp_pool=a,n.child1=n.child2=n.parent=null,n.next=null,n.snext=null,n.mnext=null,n.next=Eo.zpp_pool,Eo.zpp_pool=n;for(var s=r;null!=s;){if(null==s.child1||s.height<2)s=s;else{var l=s.child1,p=s.child2,h=p.height-l.height;if(1<h){var u=p.child1,c=p.child2;if(p.child1=s,p.parent=s.parent,null!=(s.parent=p).parent?p.parent.child1==s?p.parent.child1=p:p.parent.child2=p:i.root=p,u.height>c.height){p.child2=u;var d=((s.child2=c).parent=s).aabb,_=l.aabb,y=c.aabb;d.minx=_.minx<y.minx?_.minx:y.minx,d.miny=_.miny<y.miny?_.miny:y.miny,d.maxx=_.maxx>y.maxx?_.maxx:y.maxx,d.maxy=_.maxy>y.maxy?_.maxy:y.maxy;var m=p.aabb,f=s.aabb,x=u.aabb;m.minx=f.minx<x.minx?f.minx:x.minx,m.miny=f.miny<x.miny?f.miny:x.miny,m.maxx=f.maxx>x.maxx?f.maxx:x.maxx,m.maxy=f.maxy>x.maxy?f.maxy:x.maxy;var v=l.height,z=c.height;s.height=1+(z<v?v:z);var g=s.height,b=u.height;p.height=1+(b<g?g:b)}else{p.child2=c;var w=((s.child2=u).parent=s).aabb,S=l.aabb,C=u.aabb;w.minx=S.minx<C.minx?S.minx:C.minx,w.miny=S.miny<C.miny?S.miny:C.miny,w.maxx=S.maxx>C.maxx?S.maxx:C.maxx,w.maxy=S.maxy>C.maxy?S.maxy:C.maxy;var M=p.aabb,P=s.aabb,k=c.aabb;M.minx=P.minx<k.minx?P.minx:k.minx,M.miny=P.miny<k.miny?P.miny:k.miny,M.maxx=P.maxx>k.maxx?P.maxx:k.maxx,M.maxy=P.maxy>k.maxy?P.maxy:k.maxy;var T=l.height,O=u.height;s.height=1+(O<T?T:O);var A=s.height,E=c.height;p.height=1+(E<A?A:E)}s=p}else if(h<-1){var G=l.child1,I=l.child2;if(l.child1=s,l.parent=s.parent,null!=(s.parent=l).parent?l.parent.child1==s?l.parent.child1=l:l.parent.child2=l:i.root=l,G.height>I.height){l.child2=G;var B=((s.child1=I).parent=s).aabb,L=p.aabb,D=I.aabb;B.minx=L.minx<D.minx?L.minx:D.minx,B.miny=L.miny<D.miny?L.miny:D.miny,B.maxx=L.maxx>D.maxx?L.maxx:D.maxx,B.maxy=L.maxy>D.maxy?L.maxy:D.maxy;var R=l.aabb,F=s.aabb,j=G.aabb;R.minx=F.minx<j.minx?F.minx:j.minx,R.miny=F.miny<j.miny?F.miny:j.miny,R.maxx=F.maxx>j.maxx?F.maxx:j.maxx,R.maxy=F.maxy>j.maxy?F.maxy:j.maxy;var N=p.height,U=I.height;s.height=1+(U<N?N:U);var V=s.height,H=G.height;l.height=1+(H<V?V:H)}else{l.child2=I;var W=((s.child1=G).parent=s).aabb,X=p.aabb,q=G.aabb;W.minx=X.minx<q.minx?X.minx:q.minx,W.miny=X.miny<q.miny?X.miny:q.miny,W.maxx=X.maxx>q.maxx?X.maxx:q.maxx,W.maxy=X.maxy>q.maxy?X.maxy:q.maxy;var Y=l.aabb,K=s.aabb,Z=I.aabb;Y.minx=K.minx<Z.minx?K.minx:Z.minx,Y.miny=K.miny<Z.miny?K.miny:Z.miny,Y.maxx=K.maxx>Z.maxx?K.maxx:Z.maxx,Y.maxy=K.maxy>Z.maxy?K.maxy:Z.maxy;var J=p.height,Q=G.height;s.height=1+(Q<J?J:Q);var $=s.height,ee=I.height;l.height=1+(ee<$?$:ee)}s=l}else s=s}var te=s.child1,ie=s.child2,ne=s.aabb,re=te.aabb,oe=ie.aabb;ne.minx=re.minx<oe.minx?re.minx:oe.minx,ne.miny=re.miny<oe.miny?re.miny:oe.miny,ne.maxx=re.maxx>oe.maxx?re.maxx:oe.maxx,ne.maxy=re.maxy>oe.maxy?re.maxy:oe.maxy;var ae=te.height,se=ie.height;s.height=1+(se<ae?ae:se),s=s.parent}}else{(i.root=o).parent=null,n.height=-1;var le=n.aabb;null!=le.outer&&(le.outer.zpp_inner=null,le.outer=null),le.wrap_min=le.wrap_max=null,le._invalidate=null,le._validate=null,le.next=Ao.zpp_pool,Ao.zpp_pool=le,n.child1=n.child2=n.parent=null,n.next=null,n.snext=null,n.mnext=null,n.next=Eo.zpp_pool,Eo.zpp_pool=n}}}var pe=e.aabb;if(!this.space.continuous&&t.zip_aabb&&null!=t.body)if(t.zip_aabb=!1,0==t.type){var he=t.circle;if(he.zip_worldCOM&&null!=he.body){if(he.zip_worldCOM=!1,he.zip_localCOM){if(he.zip_localCOM=!1,1==he.type){var ue=he.polygon;if(null==ue.lverts.next.next)ue.localCOMx=ue.lverts.next.x,ue.localCOMy=ue.lverts.next.y;else if(null==ue.lverts.next.next.next)ue.localCOMx=ue.lverts.next.x,ue.localCOMy=ue.lverts.next.y,ue.localCOMx+=ue.lverts.next.next.x,ue.localCOMy+=ue.lverts.next.next.y,ue.localCOMx*=.5,ue.localCOMy*=.5;else{ue.localCOMx=0;var ce=ue.localCOMy=0,de=ue.lverts.next,_e=de,ye=de=de.next;for(de=de.next;null!=de;){var me=de;ce+=ye.x*(me.y-_e.y);var fe=me.y*ye.x-me.x*ye.y;ue.localCOMx+=(ye.x+me.x)*fe,ue.localCOMy+=(ye.y+me.y)*fe,_e=ye,ye=me,de=de.next}var xe=de=ue.lverts.next;ce+=ye.x*(xe.y-_e.y);var ve=xe.y*ye.x-xe.x*ye.y;ue.localCOMx+=(ye.x+xe.x)*ve,ue.localCOMy+=(ye.y+xe.y)*ve,_e=ye;var ze=de=de.next;ce+=xe.x*(ze.y-_e.y);var ge=ze.y*xe.x-ze.x*xe.y;ue.localCOMx+=(xe.x+ze.x)*ge,ue.localCOMy+=(xe.y+ze.y)*ge;var be=ce=1/(3*ce);ue.localCOMx*=be,ue.localCOMy*=be}}null!=he.wrap_localCOM&&(he.wrap_localCOM.zpp_inner.x=he.localCOMx,he.wrap_localCOM.zpp_inner.y=he.localCOMy)}var we=he.body;we.zip_axis&&(we.zip_axis=!1,we.axisx=Math.sin(we.rot),we.axisy=Math.cos(we.rot)),he.worldCOMx=he.body.posx+(he.body.axisy*he.localCOMx-he.body.axisx*he.localCOMy),he.worldCOMy=he.body.posy+(he.localCOMx*he.body.axisx+he.localCOMy*he.body.axisy)}var Se=he.radius,Ce=he.radius;he.aabb.minx=he.worldCOMx-Se,he.aabb.miny=he.worldCOMy-Ce,he.aabb.maxx=he.worldCOMx+Se,he.aabb.maxy=he.worldCOMy+Ce}else{var Me=t.polygon;if(Me.zip_gverts&&null!=Me.body){Me.zip_gverts=!1,Me.validate_lverts();var Pe=Me.body;Pe.zip_axis&&(Pe.zip_axis=!1,Pe.axisx=Math.sin(Pe.rot),Pe.axisy=Math.cos(Pe.rot));for(var ke=Me.lverts.next,Te=Me.gverts.next;null!=Te;){var Oe=Te,Ae=ke;ke=ke.next,Oe.x=Me.body.posx+(Me.body.axisy*Ae.x-Me.body.axisx*Ae.y),Oe.y=Me.body.posy+(Ae.x*Me.body.axisx+Ae.y*Me.body.axisy),Te=Te.next}}var Ee=Me.gverts.next;Me.aabb.minx=Ee.x,Me.aabb.miny=Ee.y,Me.aabb.maxx=Ee.x,Me.aabb.maxy=Ee.y;for(var Ge=Me.gverts.next.next;null!=Ge;){var Ie=Ge;Ie.x<Me.aabb.minx&&(Me.aabb.minx=Ie.x),Ie.x>Me.aabb.maxx&&(Me.aabb.maxx=Ie.x),Ie.y<Me.aabb.miny&&(Me.aabb.miny=Ie.y),Ie.y>Me.aabb.maxy&&(Me.aabb.maxy=Ie.y),Ge=Ge.next}}var Be=t.aabb;pe.minx=Be.minx-3,pe.miny=Be.miny-3,pe.maxx=Be.maxx+3,pe.maxy=Be.maxy+3;var Le=(e.dyn=1!=t.body.type&&!t.body.component.sleeping)?this.dtree:this.stree;if(null==Le.root)Le.root=e,Le.root.parent=null;else{for(var De=e.aabb,Re=Le.root;null!=Re.child1;){var Fe=Re.child1,je=Re.child2,Ne=Re.aabb,Ue=2*(Ne.maxx-Ne.minx+(Ne.maxy-Ne.miny)),Ve=Go.tmpaabb,He=Re.aabb;Ve.minx=He.minx<De.minx?He.minx:De.minx,Ve.miny=He.miny<De.miny?He.miny:De.miny,Ve.maxx=He.maxx>De.maxx?He.maxx:De.maxx,Ve.maxy=He.maxy>De.maxy?He.maxy:De.maxy;var We,Xe=Go.tmpaabb,qe=2*(Xe.maxx-Xe.minx+(Xe.maxy-Xe.miny)),Ye=2*qe,Ke=2*(qe-Ue),Ze=Go.tmpaabb,Je=Fe.aabb;if(Ze.minx=De.minx<Je.minx?De.minx:Je.minx,Ze.miny=De.miny<Je.miny?De.miny:Je.miny,Ze.maxx=De.maxx>Je.maxx?De.maxx:Je.maxx,Ze.maxy=De.maxy>Je.maxy?De.maxy:Je.maxy,null==Fe.child1){var Qe=Go.tmpaabb;We=2*(Qe.maxx-Qe.minx+(Qe.maxy-Qe.miny))+Ke}else{var $e=Fe.aabb,et=2*($e.maxx-$e.minx+($e.maxy-$e.miny)),tt=Go.tmpaabb;We=2*(tt.maxx-tt.minx+(tt.maxy-tt.miny))-et+Ke}var it,nt=Go.tmpaabb,rt=je.aabb;if(nt.minx=De.minx<rt.minx?De.minx:rt.minx,nt.miny=De.miny<rt.miny?De.miny:rt.miny,nt.maxx=De.maxx>rt.maxx?De.maxx:rt.maxx,nt.maxy=De.maxy>rt.maxy?De.maxy:rt.maxy,null==je.child1){var ot=Go.tmpaabb;it=2*(ot.maxx-ot.minx+(ot.maxy-ot.miny))+Ke}else{var at=je.aabb,st=2*(at.maxx-at.minx+(at.maxy-at.miny)),lt=Go.tmpaabb;it=2*(lt.maxx-lt.minx+(lt.maxy-lt.miny))-st+Ke}if(Ye<We&&Ye<it)break;Re=We<it?Fe:je}var pt,ht=Re,ut=ht.parent;null==Eo.zpp_pool?pt=new Eo:(pt=Eo.zpp_pool,Eo.zpp_pool=pt.next,pt.next=null),null==Ao.zpp_pool?pt.aabb=new Ao:(pt.aabb=Ao.zpp_pool,Ao.zpp_pool=pt.aabb.next,pt.aabb.next=null),pt.moved=!1,pt.synced=!1,pt.first_sync=!1,pt.parent=ut;var ct=pt.aabb,dt=ht.aabb;for(ct.minx=De.minx<dt.minx?De.minx:dt.minx,ct.miny=De.miny<dt.miny?De.miny:dt.miny,ct.maxx=De.maxx>dt.maxx?De.maxx:dt.maxx,ct.maxy=De.maxy>dt.maxy?De.maxy:dt.maxy,pt.height=ht.height+1,null!=ut?(ut.child1==ht?ut.child1=pt:ut.child2=pt,pt.child1=ht,pt.child2=e,ht.parent=pt,e.parent=pt):(pt.child1=ht,pt.child2=e,ht.parent=pt,e.parent=pt,Le.root=pt),Re=e.parent;null!=Re;){if(null==Re.child1||Re.height<2)Re=Re;else{var _t=Re.child1,yt=Re.child2,mt=yt.height-_t.height;if(1<mt){var ft=yt.child1,xt=yt.child2;if(yt.child1=Re,yt.parent=Re.parent,null!=(Re.parent=yt).parent?yt.parent.child1==Re?yt.parent.child1=yt:yt.parent.child2=yt:Le.root=yt,ft.height>xt.height){yt.child2=ft;var vt=((Re.child2=xt).parent=Re).aabb,zt=_t.aabb,gt=xt.aabb;vt.minx=zt.minx<gt.minx?zt.minx:gt.minx,vt.miny=zt.miny<gt.miny?zt.miny:gt.miny,vt.maxx=zt.maxx>gt.maxx?zt.maxx:gt.maxx,vt.maxy=zt.maxy>gt.maxy?zt.maxy:gt.maxy;var bt=yt.aabb,wt=Re.aabb,St=ft.aabb;bt.minx=wt.minx<St.minx?wt.minx:St.minx,bt.miny=wt.miny<St.miny?wt.miny:St.miny,bt.maxx=wt.maxx>St.maxx?wt.maxx:St.maxx,bt.maxy=wt.maxy>St.maxy?wt.maxy:St.maxy;var Ct=_t.height,Mt=xt.height;Re.height=1+(Mt<Ct?Ct:Mt);var Pt=Re.height,kt=ft.height;yt.height=1+(kt<Pt?Pt:kt)}else{yt.child2=xt;var Tt=((Re.child2=ft).parent=Re).aabb,Ot=_t.aabb,At=ft.aabb;Tt.minx=Ot.minx<At.minx?Ot.minx:At.minx,Tt.miny=Ot.miny<At.miny?Ot.miny:At.miny,Tt.maxx=Ot.maxx>At.maxx?Ot.maxx:At.maxx,Tt.maxy=Ot.maxy>At.maxy?Ot.maxy:At.maxy;var Et=yt.aabb,Gt=Re.aabb,It=xt.aabb;Et.minx=Gt.minx<It.minx?Gt.minx:It.minx,Et.miny=Gt.miny<It.miny?Gt.miny:It.miny,Et.maxx=Gt.maxx>It.maxx?Gt.maxx:It.maxx,Et.maxy=Gt.maxy>It.maxy?Gt.maxy:It.maxy;var Bt=_t.height,Lt=ft.height;Re.height=1+(Lt<Bt?Bt:Lt);var Dt=Re.height,Rt=xt.height;yt.height=1+(Rt<Dt?Dt:Rt)}Re=yt}else if(mt<-1){var Ft=_t.child1,jt=_t.child2;if(_t.child1=Re,_t.parent=Re.parent,null!=(Re.parent=_t).parent?_t.parent.child1==Re?_t.parent.child1=_t:_t.parent.child2=_t:Le.root=_t,Ft.height>jt.height){_t.child2=Ft;var Nt=((Re.child1=jt).parent=Re).aabb,Ut=yt.aabb,Vt=jt.aabb;Nt.minx=Ut.minx<Vt.minx?Ut.minx:Vt.minx,Nt.miny=Ut.miny<Vt.miny?Ut.miny:Vt.miny,Nt.maxx=Ut.maxx>Vt.maxx?Ut.maxx:Vt.maxx,Nt.maxy=Ut.maxy>Vt.maxy?Ut.maxy:Vt.maxy;var Ht=_t.aabb,Wt=Re.aabb,Xt=Ft.aabb;Ht.minx=Wt.minx<Xt.minx?Wt.minx:Xt.minx,Ht.miny=Wt.miny<Xt.miny?Wt.miny:Xt.miny,Ht.maxx=Wt.maxx>Xt.maxx?Wt.maxx:Xt.maxx,Ht.maxy=Wt.maxy>Xt.maxy?Wt.maxy:Xt.maxy;var qt=yt.height,Yt=jt.height;Re.height=1+(Yt<qt?qt:Yt);var Kt=Re.height,Zt=Ft.height;_t.height=1+(Zt<Kt?Kt:Zt)}else{_t.child2=jt;var Jt=((Re.child1=Ft).parent=Re).aabb,Qt=yt.aabb,$t=Ft.aabb;Jt.minx=Qt.minx<$t.minx?Qt.minx:$t.minx,Jt.miny=Qt.miny<$t.miny?Qt.miny:$t.miny,Jt.maxx=Qt.maxx>$t.maxx?Qt.maxx:$t.maxx,Jt.maxy=Qt.maxy>$t.maxy?Qt.maxy:$t.maxy;var ei=_t.aabb,ti=Re.aabb,ii=jt.aabb;ei.minx=ti.minx<ii.minx?ti.minx:ii.minx,ei.miny=ti.miny<ii.miny?ti.miny:ii.miny,ei.maxx=ti.maxx>ii.maxx?ti.maxx:ii.maxx,ei.maxy=ti.maxy>ii.maxy?ti.maxy:ii.maxy;var ni=yt.height,ri=Ft.height;Re.height=1+(ri<ni?ni:ri);var oi=Re.height,ai=jt.height;_t.height=1+(ai<oi?oi:ai)}Re=_t}else Re=Re}var si=Re.child1,li=Re.child2,pi=si.height,hi=li.height;Re.height=1+(hi<pi?pi:hi);var ui=Re.aabb,ci=si.aabb,di=li.aabb;ui.minx=ci.minx<di.minx?ci.minx:di.minx,ui.miny=ci.miny<di.miny?ci.miny:di.miny,ui.maxx=ci.maxx>di.maxx?ci.maxx:di.maxx,ui.maxy=ci.maxy>di.maxy?ci.maxy:di.maxy,Re=Re.parent}}e.synced=!1,e.moved=!0,e.mnext=e.snext,e.snext=null,e=e.mnext}var _i=this.syncs;this.syncs=this.moves,this.moves=_i}else for(;null!=this.syncs;){var yi=this.syncs;this.syncs=yi.snext,yi.snext=null;var mi=yi.shape;if(yi.first_sync)yi.first_sync=!1;else{var fi=yi.dyn?this.dtree:this.stree;if(yi==fi.root)fi.root=null;else{var xi=yi.parent,vi=xi.parent,zi=xi.child1==yi?xi.child2:xi.child1;if(null!=vi){vi.child1==xi?vi.child1=zi:vi.child2=zi,zi.parent=vi,xi.height=-1;var gi=xi.aabb;null!=gi.outer&&(gi.outer.zpp_inner=null,gi.outer=null),gi.wrap_min=gi.wrap_max=null,gi._invalidate=null,gi._validate=null,gi.next=Ao.zpp_pool,Ao.zpp_pool=gi,xi.child1=xi.child2=xi.parent=null,xi.next=null,xi.snext=null,xi.mnext=null,xi.next=Eo.zpp_pool,Eo.zpp_pool=xi;for(var bi=vi;null!=bi;){if(null==bi.child1||bi.height<2)bi=bi;else{var wi=bi.child1,Si=bi.child2,Ci=Si.height-wi.height;if(1<Ci){var Mi=Si.child1,Pi=Si.child2;if(Si.child1=bi,Si.parent=bi.parent,null!=(bi.parent=Si).parent?Si.parent.child1==bi?Si.parent.child1=Si:Si.parent.child2=Si:fi.root=Si,Mi.height>Pi.height){Si.child2=Mi;var ki=((bi.child2=Pi).parent=bi).aabb,Ti=wi.aabb,Oi=Pi.aabb;ki.minx=Ti.minx<Oi.minx?Ti.minx:Oi.minx,ki.miny=Ti.miny<Oi.miny?Ti.miny:Oi.miny,ki.maxx=Ti.maxx>Oi.maxx?Ti.maxx:Oi.maxx,ki.maxy=Ti.maxy>Oi.maxy?Ti.maxy:Oi.maxy;var Ai=Si.aabb,Ei=bi.aabb,Gi=Mi.aabb;Ai.minx=Ei.minx<Gi.minx?Ei.minx:Gi.minx,Ai.miny=Ei.miny<Gi.miny?Ei.miny:Gi.miny,Ai.maxx=Ei.maxx>Gi.maxx?Ei.maxx:Gi.maxx,Ai.maxy=Ei.maxy>Gi.maxy?Ei.maxy:Gi.maxy;var Ii=wi.height,Bi=Pi.height;bi.height=1+(Bi<Ii?Ii:Bi);var Li=bi.height,Di=Mi.height;Si.height=1+(Di<Li?Li:Di)}else{Si.child2=Pi;var Ri=((bi.child2=Mi).parent=bi).aabb,Fi=wi.aabb,ji=Mi.aabb;Ri.minx=Fi.minx<ji.minx?Fi.minx:ji.minx,Ri.miny=Fi.miny<ji.miny?Fi.miny:ji.miny,Ri.maxx=Fi.maxx>ji.maxx?Fi.maxx:ji.maxx,Ri.maxy=Fi.maxy>ji.maxy?Fi.maxy:ji.maxy;var Ni=Si.aabb,Ui=bi.aabb,Vi=Pi.aabb;Ni.minx=Ui.minx<Vi.minx?Ui.minx:Vi.minx,Ni.miny=Ui.miny<Vi.miny?Ui.miny:Vi.miny,Ni.maxx=Ui.maxx>Vi.maxx?Ui.maxx:Vi.maxx,Ni.maxy=Ui.maxy>Vi.maxy?Ui.maxy:Vi.maxy;var Hi=wi.height,Wi=Mi.height;bi.height=1+(Wi<Hi?Hi:Wi);var Xi=bi.height,qi=Pi.height;Si.height=1+(qi<Xi?Xi:qi)}bi=Si}else if(Ci<-1){var Yi=wi.child1,Ki=wi.child2;if(wi.child1=bi,wi.parent=bi.parent,null!=(bi.parent=wi).parent?wi.parent.child1==bi?wi.parent.child1=wi:wi.parent.child2=wi:fi.root=wi,Yi.height>Ki.height){wi.child2=Yi;var Zi=((bi.child1=Ki).parent=bi).aabb,Ji=Si.aabb,Qi=Ki.aabb;Zi.minx=Ji.minx<Qi.minx?Ji.minx:Qi.minx,Zi.miny=Ji.miny<Qi.miny?Ji.miny:Qi.miny,Zi.maxx=Ji.maxx>Qi.maxx?Ji.maxx:Qi.maxx,Zi.maxy=Ji.maxy>Qi.maxy?Ji.maxy:Qi.maxy;var $i=wi.aabb,en=bi.aabb,tn=Yi.aabb;$i.minx=en.minx<tn.minx?en.minx:tn.minx,$i.miny=en.miny<tn.miny?en.miny:tn.miny,$i.maxx=en.maxx>tn.maxx?en.maxx:tn.maxx,$i.maxy=en.maxy>tn.maxy?en.maxy:tn.maxy;var nn=Si.height,rn=Ki.height;bi.height=1+(rn<nn?nn:rn);var on=bi.height,an=Yi.height;wi.height=1+(an<on?on:an)}else{wi.child2=Ki;var sn=((bi.child1=Yi).parent=bi).aabb,ln=Si.aabb,pn=Yi.aabb;sn.minx=ln.minx<pn.minx?ln.minx:pn.minx,sn.miny=ln.miny<pn.miny?ln.miny:pn.miny,sn.maxx=ln.maxx>pn.maxx?ln.maxx:pn.maxx,sn.maxy=ln.maxy>pn.maxy?ln.maxy:pn.maxy;var hn=wi.aabb,un=bi.aabb,cn=Ki.aabb;hn.minx=un.minx<cn.minx?un.minx:cn.minx,hn.miny=un.miny<cn.miny?un.miny:cn.miny,hn.maxx=un.maxx>cn.maxx?un.maxx:cn.maxx,hn.maxy=un.maxy>cn.maxy?un.maxy:cn.maxy;var dn=Si.height,_n=Yi.height;bi.height=1+(_n<dn?dn:_n);var yn=bi.height,mn=Ki.height;wi.height=1+(mn<yn?yn:mn)}bi=wi}else bi=bi}var fn=bi.child1,xn=bi.child2,vn=bi.aabb,zn=fn.aabb,gn=xn.aabb;vn.minx=zn.minx<gn.minx?zn.minx:gn.minx,vn.miny=zn.miny<gn.miny?zn.miny:gn.miny,vn.maxx=zn.maxx>gn.maxx?zn.maxx:gn.maxx,vn.maxy=zn.maxy>gn.maxy?zn.maxy:gn.maxy;var bn=fn.height,wn=xn.height;bi.height=1+(wn<bn?bn:wn),bi=bi.parent}}else{(fi.root=zi).parent=null,xi.height=-1;var Sn=xi.aabb;null!=Sn.outer&&(Sn.outer.zpp_inner=null,Sn.outer=null),Sn.wrap_min=Sn.wrap_max=null,Sn._invalidate=null,Sn._validate=null,Sn.next=Ao.zpp_pool,Ao.zpp_pool=Sn,xi.child1=xi.child2=xi.parent=null,xi.next=null,xi.snext=null,xi.mnext=null,xi.next=Eo.zpp_pool,Eo.zpp_pool=xi}}}var Cn=yi.aabb;if(!this.space.continuous&&mi.zip_aabb&&null!=mi.body)if(mi.zip_aabb=!1,0==mi.type){var Mn=mi.circle;if(Mn.zip_worldCOM&&null!=Mn.body){if(Mn.zip_worldCOM=!1,Mn.zip_localCOM){if(Mn.zip_localCOM=!1,1==Mn.type){var Pn=Mn.polygon;if(null==Pn.lverts.next.next)Pn.localCOMx=Pn.lverts.next.x,Pn.localCOMy=Pn.lverts.next.y;else if(null==Pn.lverts.next.next.next)Pn.localCOMx=Pn.lverts.next.x,Pn.localCOMy=Pn.lverts.next.y,Pn.localCOMx+=Pn.lverts.next.next.x,Pn.localCOMy+=Pn.lverts.next.next.y,Pn.localCOMx*=.5,Pn.localCOMy*=.5;else{Pn.localCOMx=0;var kn=Pn.localCOMy=0,Tn=Pn.lverts.next,On=Tn,An=Tn=Tn.next;for(Tn=Tn.next;null!=Tn;){var En=Tn;kn+=An.x*(En.y-On.y);var Gn=En.y*An.x-En.x*An.y;Pn.localCOMx+=(An.x+En.x)*Gn,Pn.localCOMy+=(An.y+En.y)*Gn,On=An,An=En,Tn=Tn.next}var In=Tn=Pn.lverts.next;kn+=An.x*(In.y-On.y);var Bn=In.y*An.x-In.x*An.y;Pn.localCOMx+=(An.x+In.x)*Bn,Pn.localCOMy+=(An.y+In.y)*Bn,On=An;var Ln=Tn=Tn.next;kn+=In.x*(Ln.y-On.y);var Dn=Ln.y*In.x-Ln.x*In.y;Pn.localCOMx+=(In.x+Ln.x)*Dn,Pn.localCOMy+=(In.y+Ln.y)*Dn;var Rn=kn=1/(3*kn);Pn.localCOMx*=Rn,Pn.localCOMy*=Rn}}null!=Mn.wrap_localCOM&&(Mn.wrap_localCOM.zpp_inner.x=Mn.localCOMx,Mn.wrap_localCOM.zpp_inner.y=Mn.localCOMy)}var Fn=Mn.body;Fn.zip_axis&&(Fn.zip_axis=!1,Fn.axisx=Math.sin(Fn.rot),Fn.axisy=Math.cos(Fn.rot)),Mn.worldCOMx=Mn.body.posx+(Mn.body.axisy*Mn.localCOMx-Mn.body.axisx*Mn.localCOMy),Mn.worldCOMy=Mn.body.posy+(Mn.localCOMx*Mn.body.axisx+Mn.localCOMy*Mn.body.axisy)}var jn=Mn.radius,Nn=Mn.radius;Mn.aabb.minx=Mn.worldCOMx-jn,Mn.aabb.miny=Mn.worldCOMy-Nn,Mn.aabb.maxx=Mn.worldCOMx+jn,Mn.aabb.maxy=Mn.worldCOMy+Nn}else{var Un=mi.polygon;if(Un.zip_gverts&&null!=Un.body){Un.zip_gverts=!1,Un.validate_lverts();var Vn=Un.body;Vn.zip_axis&&(Vn.zip_axis=!1,Vn.axisx=Math.sin(Vn.rot),Vn.axisy=Math.cos(Vn.rot));for(var Hn=Un.lverts.next,Wn=Un.gverts.next;null!=Wn;){var Xn=Wn,qn=Hn;Hn=Hn.next,Xn.x=Un.body.posx+(Un.body.axisy*qn.x-Un.body.axisx*qn.y),Xn.y=Un.body.posy+(qn.x*Un.body.axisx+qn.y*Un.body.axisy),Wn=Wn.next}}var Yn=Un.gverts.next;Un.aabb.minx=Yn.x,Un.aabb.miny=Yn.y,Un.aabb.maxx=Yn.x,Un.aabb.maxy=Yn.y;for(var Kn=Un.gverts.next.next;null!=Kn;){var Zn=Kn;Zn.x<Un.aabb.minx&&(Un.aabb.minx=Zn.x),Zn.x>Un.aabb.maxx&&(Un.aabb.maxx=Zn.x),Zn.y<Un.aabb.miny&&(Un.aabb.miny=Zn.y),Zn.y>Un.aabb.maxy&&(Un.aabb.maxy=Zn.y),Kn=Kn.next}}var Jn=mi.aabb;Cn.minx=Jn.minx-3,Cn.miny=Jn.miny-3,Cn.maxx=Jn.maxx+3,Cn.maxy=Jn.maxy+3;var Qn=(yi.dyn=1!=mi.body.type&&!mi.body.component.sleeping)?this.dtree:this.stree;if(null==Qn.root)Qn.root=yi,Qn.root.parent=null;else{for(var $n=yi.aabb,er=Qn.root;null!=er.child1;){var tr=er.child1,ir=er.child2,nr=er.aabb,rr=2*(nr.maxx-nr.minx+(nr.maxy-nr.miny)),or=Go.tmpaabb,ar=er.aabb;or.minx=ar.minx<$n.minx?ar.minx:$n.minx,or.miny=ar.miny<$n.miny?ar.miny:$n.miny,or.maxx=ar.maxx>$n.maxx?ar.maxx:$n.maxx,or.maxy=ar.maxy>$n.maxy?ar.maxy:$n.maxy;var sr,lr=Go.tmpaabb,pr=2*(lr.maxx-lr.minx+(lr.maxy-lr.miny)),hr=2*pr,ur=2*(pr-rr),cr=Go.tmpaabb,dr=tr.aabb;if(cr.minx=$n.minx<dr.minx?$n.minx:dr.minx,cr.miny=$n.miny<dr.miny?$n.miny:dr.miny,cr.maxx=$n.maxx>dr.maxx?$n.maxx:dr.maxx,cr.maxy=$n.maxy>dr.maxy?$n.maxy:dr.maxy,null==tr.child1){var _r=Go.tmpaabb;sr=2*(_r.maxx-_r.minx+(_r.maxy-_r.miny))+ur}else{var yr=tr.aabb,mr=2*(yr.maxx-yr.minx+(yr.maxy-yr.miny)),fr=Go.tmpaabb;sr=2*(fr.maxx-fr.minx+(fr.maxy-fr.miny))-mr+ur}var xr,vr=Go.tmpaabb,zr=ir.aabb;if(vr.minx=$n.minx<zr.minx?$n.minx:zr.minx,vr.miny=$n.miny<zr.miny?$n.miny:zr.miny,vr.maxx=$n.maxx>zr.maxx?$n.maxx:zr.maxx,vr.maxy=$n.maxy>zr.maxy?$n.maxy:zr.maxy,null==ir.child1){var gr=Go.tmpaabb;xr=2*(gr.maxx-gr.minx+(gr.maxy-gr.miny))+ur}else{var br=ir.aabb,wr=2*(br.maxx-br.minx+(br.maxy-br.miny)),Sr=Go.tmpaabb;xr=2*(Sr.maxx-Sr.minx+(Sr.maxy-Sr.miny))-wr+ur}if(hr<sr&&hr<xr)break;er=sr<xr?tr:ir}var Cr,Mr=er,Pr=Mr.parent;null==Eo.zpp_pool?Cr=new Eo:(Cr=Eo.zpp_pool,Eo.zpp_pool=Cr.next,Cr.next=null),null==Ao.zpp_pool?Cr.aabb=new Ao:(Cr.aabb=Ao.zpp_pool,Ao.zpp_pool=Cr.aabb.next,Cr.aabb.next=null),Cr.moved=!1,Cr.synced=!1,Cr.first_sync=!1,Cr.parent=Pr;var kr=Cr.aabb,Tr=Mr.aabb;for(kr.minx=$n.minx<Tr.minx?$n.minx:Tr.minx,kr.miny=$n.miny<Tr.miny?$n.miny:Tr.miny,kr.maxx=$n.maxx>Tr.maxx?$n.maxx:Tr.maxx,kr.maxy=$n.maxy>Tr.maxy?$n.maxy:Tr.maxy,Cr.height=Mr.height+1,null!=Pr?(Pr.child1==Mr?Pr.child1=Cr:Pr.child2=Cr,Cr.child1=Mr,Cr.child2=yi,Mr.parent=Cr,yi.parent=Cr):(Cr.child1=Mr,Cr.child2=yi,Mr.parent=Cr,yi.parent=Cr,Qn.root=Cr),er=yi.parent;null!=er;){if(null==er.child1||er.height<2)er=er;else{var Or=er.child1,Ar=er.child2,Er=Ar.height-Or.height;if(1<Er){var Gr=Ar.child1,Ir=Ar.child2;if(Ar.child1=er,Ar.parent=er.parent,null!=(er.parent=Ar).parent?Ar.parent.child1==er?Ar.parent.child1=Ar:Ar.parent.child2=Ar:Qn.root=Ar,Gr.height>Ir.height){Ar.child2=Gr;var Br=((er.child2=Ir).parent=er).aabb,Lr=Or.aabb,Dr=Ir.aabb;Br.minx=Lr.minx<Dr.minx?Lr.minx:Dr.minx,Br.miny=Lr.miny<Dr.miny?Lr.miny:Dr.miny,Br.maxx=Lr.maxx>Dr.maxx?Lr.maxx:Dr.maxx,Br.maxy=Lr.maxy>Dr.maxy?Lr.maxy:Dr.maxy;var Rr=Ar.aabb,Fr=er.aabb,jr=Gr.aabb;Rr.minx=Fr.minx<jr.minx?Fr.minx:jr.minx,Rr.miny=Fr.miny<jr.miny?Fr.miny:jr.miny,Rr.maxx=Fr.maxx>jr.maxx?Fr.maxx:jr.maxx,Rr.maxy=Fr.maxy>jr.maxy?Fr.maxy:jr.maxy;var Nr=Or.height,Ur=Ir.height;er.height=1+(Ur<Nr?Nr:Ur);var Vr=er.height,Hr=Gr.height;Ar.height=1+(Hr<Vr?Vr:Hr)}else{Ar.child2=Ir;var Wr=((er.child2=Gr).parent=er).aabb,Xr=Or.aabb,qr=Gr.aabb;Wr.minx=Xr.minx<qr.minx?Xr.minx:qr.minx,Wr.miny=Xr.miny<qr.miny?Xr.miny:qr.miny,Wr.maxx=Xr.maxx>qr.maxx?Xr.maxx:qr.maxx,Wr.maxy=Xr.maxy>qr.maxy?Xr.maxy:qr.maxy;var Yr=Ar.aabb,Kr=er.aabb,Zr=Ir.aabb;Yr.minx=Kr.minx<Zr.minx?Kr.minx:Zr.minx,Yr.miny=Kr.miny<Zr.miny?Kr.miny:Zr.miny,Yr.maxx=Kr.maxx>Zr.maxx?Kr.maxx:Zr.maxx,Yr.maxy=Kr.maxy>Zr.maxy?Kr.maxy:Zr.maxy;var Jr=Or.height,Qr=Gr.height;er.height=1+(Qr<Jr?Jr:Qr);var $r=er.height,eo=Ir.height;Ar.height=1+(eo<$r?$r:eo)}er=Ar}else if(Er<-1){var to=Or.child1,io=Or.child2;if(Or.child1=er,Or.parent=er.parent,null!=(er.parent=Or).parent?Or.parent.child1==er?Or.parent.child1=Or:Or.parent.child2=Or:Qn.root=Or,to.height>io.height){Or.child2=to;var no=((er.child1=io).parent=er).aabb,ro=Ar.aabb,oo=io.aabb;no.minx=ro.minx<oo.minx?ro.minx:oo.minx,no.miny=ro.miny<oo.miny?ro.miny:oo.miny,no.maxx=ro.maxx>oo.maxx?ro.maxx:oo.maxx,no.maxy=ro.maxy>oo.maxy?ro.maxy:oo.maxy;var ao=Or.aabb,so=er.aabb,lo=to.aabb;ao.minx=so.minx<lo.minx?so.minx:lo.minx,ao.miny=so.miny<lo.miny?so.miny:lo.miny,ao.maxx=so.maxx>lo.maxx?so.maxx:lo.maxx,ao.maxy=so.maxy>lo.maxy?so.maxy:lo.maxy;var po=Ar.height,ho=io.height;er.height=1+(ho<po?po:ho);var uo=er.height,co=to.height;Or.height=1+(co<uo?uo:co)}else{Or.child2=io;var _o=((er.child1=to).parent=er).aabb,yo=Ar.aabb,mo=to.aabb;_o.minx=yo.minx<mo.minx?yo.minx:mo.minx,_o.miny=yo.miny<mo.miny?yo.miny:mo.miny,_o.maxx=yo.maxx>mo.maxx?yo.maxx:mo.maxx,_o.maxy=yo.maxy>mo.maxy?yo.maxy:mo.maxy;var fo=Or.aabb,xo=er.aabb,vo=io.aabb;fo.minx=xo.minx<vo.minx?xo.minx:vo.minx,fo.miny=xo.miny<vo.miny?xo.miny:vo.miny,fo.maxx=xo.maxx>vo.maxx?xo.maxx:vo.maxx,fo.maxy=xo.maxy>vo.maxy?xo.maxy:vo.maxy;var zo=Ar.height,go=to.height;er.height=1+(go<zo?zo:go);var bo=er.height,wo=io.height;Or.height=1+(wo<bo?bo:wo)}er=Or}else er=er}var So=er.child1,Co=er.child2,Mo=So.height,Po=Co.height;er.height=1+(Po<Mo?Mo:Po);var ko=er.aabb,To=So.aabb,Oo=Co.aabb;ko.minx=To.minx<Oo.minx?To.minx:Oo.minx,ko.miny=To.miny<Oo.miny?To.miny:Oo.miny,ko.maxx=To.maxx>Oo.maxx?To.maxx:Oo.maxx,ko.maxy=To.maxy>Oo.maxy?To.maxy:Oo.maxy,er=er.parent}}yi.synced=!1,yi.moved||(yi.moved=!0,yi.mnext=this.moves,this.moves=yi)}},ii.prototype.broadphase=function(e,t){for(var i=this.syncs;null!=i;){var n=i.shape;if(i.first_sync)i.first_sync=!1;else{var r=i.dyn?this.dtree:this.stree;if(i==r.root)r.root=null;else{var o=i.parent,a=o.parent,s=o.child1==i?o.child2:o.child1;if(null!=a){a.child1==o?a.child1=s:a.child2=s,s.parent=a,o.height=-1;var l=o.aabb;null!=l.outer&&(l.outer.zpp_inner=null,l.outer=null),l.wrap_min=l.wrap_max=null,l._invalidate=null,l._validate=null,l.next=Ao.zpp_pool,Ao.zpp_pool=l,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=Eo.zpp_pool,Eo.zpp_pool=o;for(var p=a;null!=p;){if(null==p.child1||p.height<2)p=p;else{var h=p.child1,u=p.child2,c=u.height-h.height;if(1<c){var d=u.child1,_=u.child2;if(u.child1=p,u.parent=p.parent,null!=(p.parent=u).parent?u.parent.child1==p?u.parent.child1=u:u.parent.child2=u:r.root=u,d.height>_.height){u.child2=d;var y=((p.child2=_).parent=p).aabb,m=h.aabb,f=_.aabb;y.minx=m.minx<f.minx?m.minx:f.minx,y.miny=m.miny<f.miny?m.miny:f.miny,y.maxx=m.maxx>f.maxx?m.maxx:f.maxx,y.maxy=m.maxy>f.maxy?m.maxy:f.maxy;var x=u.aabb,v=p.aabb,z=d.aabb;x.minx=v.minx<z.minx?v.minx:z.minx,x.miny=v.miny<z.miny?v.miny:z.miny,x.maxx=v.maxx>z.maxx?v.maxx:z.maxx,x.maxy=v.maxy>z.maxy?v.maxy:z.maxy;var g=h.height,b=_.height;p.height=1+(b<g?g:b);var w=p.height,S=d.height;u.height=1+(S<w?w:S)}else{u.child2=_;var C=((p.child2=d).parent=p).aabb,M=h.aabb,P=d.aabb;C.minx=M.minx<P.minx?M.minx:P.minx,C.miny=M.miny<P.miny?M.miny:P.miny,C.maxx=M.maxx>P.maxx?M.maxx:P.maxx,C.maxy=M.maxy>P.maxy?M.maxy:P.maxy;var k=u.aabb,T=p.aabb,O=_.aabb;k.minx=T.minx<O.minx?T.minx:O.minx,k.miny=T.miny<O.miny?T.miny:O.miny,k.maxx=T.maxx>O.maxx?T.maxx:O.maxx,k.maxy=T.maxy>O.maxy?T.maxy:O.maxy;var A=h.height,E=d.height;p.height=1+(E<A?A:E);var G=p.height,I=_.height;u.height=1+(I<G?G:I)}p=u}else if(c<-1){var B=h.child1,L=h.child2;if(h.child1=p,h.parent=p.parent,null!=(p.parent=h).parent?h.parent.child1==p?h.parent.child1=h:h.parent.child2=h:r.root=h,B.height>L.height){h.child2=B;var D=((p.child1=L).parent=p).aabb,R=u.aabb,F=L.aabb;D.minx=R.minx<F.minx?R.minx:F.minx,D.miny=R.miny<F.miny?R.miny:F.miny,D.maxx=R.maxx>F.maxx?R.maxx:F.maxx,D.maxy=R.maxy>F.maxy?R.maxy:F.maxy;var j=h.aabb,N=p.aabb,U=B.aabb;j.minx=N.minx<U.minx?N.minx:U.minx,j.miny=N.miny<U.miny?N.miny:U.miny,j.maxx=N.maxx>U.maxx?N.maxx:U.maxx,j.maxy=N.maxy>U.maxy?N.maxy:U.maxy;var V=u.height,H=L.height;p.height=1+(H<V?V:H);var W=p.height,X=B.height;h.height=1+(X<W?W:X)}else{h.child2=L;var q=((p.child1=B).parent=p).aabb,Y=u.aabb,K=B.aabb;q.minx=Y.minx<K.minx?Y.minx:K.minx,q.miny=Y.miny<K.miny?Y.miny:K.miny,q.maxx=Y.maxx>K.maxx?Y.maxx:K.maxx,q.maxy=Y.maxy>K.maxy?Y.maxy:K.maxy;var Z=h.aabb,J=p.aabb,Q=L.aabb;Z.minx=J.minx<Q.minx?J.minx:Q.minx,Z.miny=J.miny<Q.miny?J.miny:Q.miny,Z.maxx=J.maxx>Q.maxx?J.maxx:Q.maxx,Z.maxy=J.maxy>Q.maxy?J.maxy:Q.maxy;var $=u.height,ee=B.height;p.height=1+(ee<$?$:ee);var te=p.height,ie=L.height;h.height=1+(ie<te?te:ie)}p=h}else p=p}var ne=p.child1,re=p.child2,oe=p.aabb,ae=ne.aabb,se=re.aabb;oe.minx=ae.minx<se.minx?ae.minx:se.minx,oe.miny=ae.miny<se.miny?ae.miny:se.miny,oe.maxx=ae.maxx>se.maxx?ae.maxx:se.maxx,oe.maxy=ae.maxy>se.maxy?ae.maxy:se.maxy;var le=ne.height,pe=re.height;p.height=1+(pe<le?le:pe),p=p.parent}}else{(r.root=s).parent=null,o.height=-1;var he=o.aabb;null!=he.outer&&(he.outer.zpp_inner=null,he.outer=null),he.wrap_min=he.wrap_max=null,he._invalidate=null,he._validate=null,he.next=Ao.zpp_pool,Ao.zpp_pool=he,o.child1=o.child2=o.parent=null,o.next=null,o.snext=null,o.mnext=null,o.next=Eo.zpp_pool,Eo.zpp_pool=o}}}var ue=i.aabb;if(!e.continuous&&n.zip_aabb&&null!=n.body)if(n.zip_aabb=!1,0==n.type){var ce=n.circle;if(ce.zip_worldCOM&&null!=ce.body){if(ce.zip_worldCOM=!1,ce.zip_localCOM){if(ce.zip_localCOM=!1,1==ce.type){var de=ce.polygon;if(null==de.lverts.next.next)de.localCOMx=de.lverts.next.x,de.localCOMy=de.lverts.next.y;else if(null==de.lverts.next.next.next)de.localCOMx=de.lverts.next.x,de.localCOMy=de.lverts.next.y,de.localCOMx+=de.lverts.next.next.x,de.localCOMy+=de.lverts.next.next.y,de.localCOMx*=.5,de.localCOMy*=.5;else{de.localCOMx=0;var _e=de.localCOMy=0,ye=de.lverts.next,me=ye,fe=ye=ye.next;for(ye=ye.next;null!=ye;){var xe=ye;_e+=fe.x*(xe.y-me.y);var ve=xe.y*fe.x-xe.x*fe.y;de.localCOMx+=(fe.x+xe.x)*ve,de.localCOMy+=(fe.y+xe.y)*ve,me=fe,fe=xe,ye=ye.next}var ze=ye=de.lverts.next;_e+=fe.x*(ze.y-me.y);var ge=ze.y*fe.x-ze.x*fe.y;de.localCOMx+=(fe.x+ze.x)*ge,de.localCOMy+=(fe.y+ze.y)*ge,me=fe;var be=ye=ye.next;_e+=ze.x*(be.y-me.y);var we=be.y*ze.x-be.x*ze.y;de.localCOMx+=(ze.x+be.x)*we,de.localCOMy+=(ze.y+be.y)*we;var Se=_e=1/(3*_e);de.localCOMx*=Se,de.localCOMy*=Se}}null!=ce.wrap_localCOM&&(ce.wrap_localCOM.zpp_inner.x=ce.localCOMx,ce.wrap_localCOM.zpp_inner.y=ce.localCOMy)}var Ce=ce.body;Ce.zip_axis&&(Ce.zip_axis=!1,Ce.axisx=Math.sin(Ce.rot),Ce.axisy=Math.cos(Ce.rot)),ce.worldCOMx=ce.body.posx+(ce.body.axisy*ce.localCOMx-ce.body.axisx*ce.localCOMy),ce.worldCOMy=ce.body.posy+(ce.localCOMx*ce.body.axisx+ce.localCOMy*ce.body.axisy)}var Me=ce.radius,Pe=ce.radius;ce.aabb.minx=ce.worldCOMx-Me,ce.aabb.miny=ce.worldCOMy-Pe,ce.aabb.maxx=ce.worldCOMx+Me,ce.aabb.maxy=ce.worldCOMy+Pe}else{var ke=n.polygon;if(ke.zip_gverts&&null!=ke.body){ke.zip_gverts=!1,ke.validate_lverts();var Te=ke.body;Te.zip_axis&&(Te.zip_axis=!1,Te.axisx=Math.sin(Te.rot),Te.axisy=Math.cos(Te.rot));for(var Oe=ke.lverts.next,Ae=ke.gverts.next;null!=Ae;){var Ee=Ae,Ge=Oe;Oe=Oe.next,Ee.x=ke.body.posx+(ke.body.axisy*Ge.x-ke.body.axisx*Ge.y),Ee.y=ke.body.posy+(Ge.x*ke.body.axisx+Ge.y*ke.body.axisy),Ae=Ae.next}}var Ie=ke.gverts.next;ke.aabb.minx=Ie.x,ke.aabb.miny=Ie.y,ke.aabb.maxx=Ie.x,ke.aabb.maxy=Ie.y;for(var Be=ke.gverts.next.next;null!=Be;){var Le=Be;Le.x<ke.aabb.minx&&(ke.aabb.minx=Le.x),Le.x>ke.aabb.maxx&&(ke.aabb.maxx=Le.x),Le.y<ke.aabb.miny&&(ke.aabb.miny=Le.y),Le.y>ke.aabb.maxy&&(ke.aabb.maxy=Le.y),Be=Be.next}}var De=n.aabb;ue.minx=De.minx-3,ue.miny=De.miny-3,ue.maxx=De.maxx+3,ue.maxy=De.maxy+3;var Re=(i.dyn=1!=n.body.type&&!n.body.component.sleeping)?this.dtree:this.stree;if(null==Re.root)Re.root=i,Re.root.parent=null;else{for(var Fe=i.aabb,je=Re.root;null!=je.child1;){var Ne=je.child1,Ue=je.child2,Ve=je.aabb,He=2*(Ve.maxx-Ve.minx+(Ve.maxy-Ve.miny)),We=Go.tmpaabb,Xe=je.aabb;We.minx=Xe.minx<Fe.minx?Xe.minx:Fe.minx,We.miny=Xe.miny<Fe.miny?Xe.miny:Fe.miny,We.maxx=Xe.maxx>Fe.maxx?Xe.maxx:Fe.maxx,We.maxy=Xe.maxy>Fe.maxy?Xe.maxy:Fe.maxy;var qe,Ye=Go.tmpaabb,Ke=2*(Ye.maxx-Ye.minx+(Ye.maxy-Ye.miny)),Ze=2*Ke,Je=2*(Ke-He),Qe=Go.tmpaabb,$e=Ne.aabb;if(Qe.minx=Fe.minx<$e.minx?Fe.minx:$e.minx,Qe.miny=Fe.miny<$e.miny?Fe.miny:$e.miny,Qe.maxx=Fe.maxx>$e.maxx?Fe.maxx:$e.maxx,Qe.maxy=Fe.maxy>$e.maxy?Fe.maxy:$e.maxy,null==Ne.child1){var et=Go.tmpaabb;qe=2*(et.maxx-et.minx+(et.maxy-et.miny))+Je}else{var tt=Ne.aabb,it=2*(tt.maxx-tt.minx+(tt.maxy-tt.miny)),nt=Go.tmpaabb;qe=2*(nt.maxx-nt.minx+(nt.maxy-nt.miny))-it+Je}var rt,ot=Go.tmpaabb,at=Ue.aabb;if(ot.minx=Fe.minx<at.minx?Fe.minx:at.minx,ot.miny=Fe.miny<at.miny?Fe.miny:at.miny,ot.maxx=Fe.maxx>at.maxx?Fe.maxx:at.maxx,ot.maxy=Fe.maxy>at.maxy?Fe.maxy:at.maxy,null==Ue.child1){var st=Go.tmpaabb;rt=2*(st.maxx-st.minx+(st.maxy-st.miny))+Je}else{var lt=Ue.aabb,pt=2*(lt.maxx-lt.minx+(lt.maxy-lt.miny)),ht=Go.tmpaabb;rt=2*(ht.maxx-ht.minx+(ht.maxy-ht.miny))-pt+Je}if(Ze<qe&&Ze<rt)break;je=qe<rt?Ne:Ue}var ut,ct=je,dt=ct.parent;null==Eo.zpp_pool?ut=new Eo:(ut=Eo.zpp_pool,Eo.zpp_pool=ut.next,ut.next=null),null==Ao.zpp_pool?ut.aabb=new Ao:(ut.aabb=Ao.zpp_pool,Ao.zpp_pool=ut.aabb.next,ut.aabb.next=null),ut.moved=!1,ut.synced=!1,ut.first_sync=!1,ut.parent=dt;var _t=ut.aabb,yt=ct.aabb;for(_t.minx=Fe.minx<yt.minx?Fe.minx:yt.minx,_t.miny=Fe.miny<yt.miny?Fe.miny:yt.miny,_t.maxx=Fe.maxx>yt.maxx?Fe.maxx:yt.maxx,_t.maxy=Fe.maxy>yt.maxy?Fe.maxy:yt.maxy,ut.height=ct.height+1,null!=dt?(dt.child1==ct?dt.child1=ut:dt.child2=ut,ut.child1=ct,ut.child2=i,ct.parent=ut,i.parent=ut):(ut.child1=ct,ut.child2=i,ct.parent=ut,i.parent=ut,Re.root=ut),je=i.parent;null!=je;){if(null==je.child1||je.height<2)je=je;else{var mt=je.child1,ft=je.child2,xt=ft.height-mt.height;if(1<xt){var vt=ft.child1,zt=ft.child2;if(ft.child1=je,ft.parent=je.parent,null!=(je.parent=ft).parent?ft.parent.child1==je?ft.parent.child1=ft:ft.parent.child2=ft:Re.root=ft,vt.height>zt.height){ft.child2=vt;var gt=((je.child2=zt).parent=je).aabb,bt=mt.aabb,wt=zt.aabb;gt.minx=bt.minx<wt.minx?bt.minx:wt.minx,gt.miny=bt.miny<wt.miny?bt.miny:wt.miny,gt.maxx=bt.maxx>wt.maxx?bt.maxx:wt.maxx,gt.maxy=bt.maxy>wt.maxy?bt.maxy:wt.maxy;var St=ft.aabb,Ct=je.aabb,Mt=vt.aabb;St.minx=Ct.minx<Mt.minx?Ct.minx:Mt.minx,St.miny=Ct.miny<Mt.miny?Ct.miny:Mt.miny,St.maxx=Ct.maxx>Mt.maxx?Ct.maxx:Mt.maxx,St.maxy=Ct.maxy>Mt.maxy?Ct.maxy:Mt.maxy;var Pt=mt.height,kt=zt.height;je.height=1+(kt<Pt?Pt:kt);var Tt=je.height,Ot=vt.height;ft.height=1+(Ot<Tt?Tt:Ot)}else{ft.child2=zt;var At=((je.child2=vt).parent=je).aabb,Et=mt.aabb,Gt=vt.aabb;At.minx=Et.minx<Gt.minx?Et.minx:Gt.minx,At.miny=Et.miny<Gt.miny?Et.miny:Gt.miny,At.maxx=Et.maxx>Gt.maxx?Et.maxx:Gt.maxx,At.maxy=Et.maxy>Gt.maxy?Et.maxy:Gt.maxy;var It=ft.aabb,Bt=je.aabb,Lt=zt.aabb;It.minx=Bt.minx<Lt.minx?Bt.minx:Lt.minx,It.miny=Bt.miny<Lt.miny?Bt.miny:Lt.miny,It.maxx=Bt.maxx>Lt.maxx?Bt.maxx:Lt.maxx,It.maxy=Bt.maxy>Lt.maxy?Bt.maxy:Lt.maxy;var Dt=mt.height,Rt=vt.height;je.height=1+(Rt<Dt?Dt:Rt);var Ft=je.height,jt=zt.height;ft.height=1+(jt<Ft?Ft:jt)}je=ft}else if(xt<-1){var Nt=mt.child1,Ut=mt.child2;if(mt.child1=je,mt.parent=je.parent,null!=(je.parent=mt).parent?mt.parent.child1==je?mt.parent.child1=mt:mt.parent.child2=mt:Re.root=mt,Nt.height>Ut.height){mt.child2=Nt;var Vt=((je.child1=Ut).parent=je).aabb,Ht=ft.aabb,Wt=Ut.aabb;Vt.minx=Ht.minx<Wt.minx?Ht.minx:Wt.minx,Vt.miny=Ht.miny<Wt.miny?Ht.miny:Wt.miny,Vt.maxx=Ht.maxx>Wt.maxx?Ht.maxx:Wt.maxx,Vt.maxy=Ht.maxy>Wt.maxy?Ht.maxy:Wt.maxy;var Xt=mt.aabb,qt=je.aabb,Yt=Nt.aabb;Xt.minx=qt.minx<Yt.minx?qt.minx:Yt.minx,Xt.miny=qt.miny<Yt.miny?qt.miny:Yt.miny,Xt.maxx=qt.maxx>Yt.maxx?qt.maxx:Yt.maxx,Xt.maxy=qt.maxy>Yt.maxy?qt.maxy:Yt.maxy;var Kt=ft.height,Zt=Ut.height;je.height=1+(Zt<Kt?Kt:Zt);var Jt=je.height,Qt=Nt.height;mt.height=1+(Qt<Jt?Jt:Qt)}else{mt.child2=Ut;var $t=((je.child1=Nt).parent=je).aabb,ei=ft.aabb,ti=Nt.aabb;$t.minx=ei.minx<ti.minx?ei.minx:ti.minx,$t.miny=ei.miny<ti.miny?ei.miny:ti.miny,$t.maxx=ei.maxx>ti.maxx?ei.maxx:ti.maxx,$t.maxy=ei.maxy>ti.maxy?ei.maxy:ti.maxy;var ii=mt.aabb,ni=je.aabb,ri=Ut.aabb;ii.minx=ni.minx<ri.minx?ni.minx:ri.minx,ii.miny=ni.miny<ri.miny?ni.miny:ri.miny,ii.maxx=ni.maxx>ri.maxx?ni.maxx:ri.maxx,ii.maxy=ni.maxy>ri.maxy?ni.maxy:ri.maxy;var oi=ft.height,ai=Nt.height;je.height=1+(ai<oi?oi:ai);var si=je.height,li=Ut.height;mt.height=1+(li<si?si:li)}je=mt}else je=je}var pi=je.child1,hi=je.child2,ui=pi.height,ci=hi.height;je.height=1+(ci<ui?ui:ci);var di=je.aabb,_i=pi.aabb,yi=hi.aabb;di.minx=_i.minx<yi.minx?_i.minx:yi.minx,di.miny=_i.miny<yi.miny?_i.miny:yi.miny,di.maxx=_i.maxx>yi.maxx?_i.maxx:yi.maxx,di.maxy=_i.maxy>yi.maxy?_i.maxy:yi.maxy,je=je.parent}}i.synced=!1,i=i.snext}for(;null!=this.syncs;){var mi=this.syncs;if(this.syncs=mi.snext,mi.snext=null,!mi.moved){mi.moved=!1;var fi=mi.shape;if(!fi.body.component.sleeping){var xi=mi.aabb,vi=null;for(null!=this.dtree.root&&(this.dtree.root.next=vi,vi=this.dtree.root);null!=vi;){var zi=vi;if(vi=zi.next,zi.next=null,zi!=mi)if(null==zi.child1){var gi=zi.shape;if(gi.body!=fi.body&&(1!=gi.body.type||1!=fi.body.type)){var bi=zi.aabb;if(bi.miny<=xi.maxy&&xi.miny<=bi.maxy&&bi.minx<=xi.maxx&&xi.minx<=bi.maxx){var wi,Si;fi.id<gi.id?(wi=fi.id,Si=gi.id):(wi=gi.id,Si=fi.id);for(var Ci=null,Mi=(fi.pairs.length<gi.pairs.length?fi:gi).pairs.head;null!=Mi;){var Pi=Mi.elt;if(Pi.id==wi&&Pi.di==Si){Ci=Pi;break}Mi=Mi.next}if(null!=Ci){Ci.sleeping&&(Ci.sleeping=!1,Ci.next=this.pairs,(this.pairs=Ci).first=!0);continue}null==nr.zpp_pool?Ci=new nr:(Ci=nr.zpp_pool,nr.zpp_pool=Ci.next,Ci.next=null),Ci.n1=mi,Ci.n2=zi,Ci.id=wi,Ci.di=Si,Ci.next=this.pairs,(this.pairs=Ci).first=!0;var ki,Ti=fi.pairs;null==rr.zpp_pool?ki=new rr:(ki=rr.zpp_pool,rr.zpp_pool=ki.next,ki.next=null),ki.elt=Ci;var Oi=ki;Oi.next=Ti.head,Ti.head=Oi,Ti.modified=!0,Ti.length++;var Ai,Ei=gi.pairs;null==rr.zpp_pool?Ai=new rr:(Ai=rr.zpp_pool,rr.zpp_pool=Ai.next,Ai.next=null),Ai.elt=Ci;var Gi=Ai;Gi.next=Ei.head,Ei.head=Gi,Ei.modified=!0,Ei.length++}}}else{var Ii=zi.aabb;Ii.miny<=xi.maxy&&xi.miny<=Ii.maxy&&Ii.minx<=xi.maxx&&xi.minx<=Ii.maxx&&(null!=zi.child1&&(zi.child1.next=vi,vi=zi.child1),null!=zi.child2&&(zi.child2.next=vi,vi=zi.child2))}}for(null!=this.stree.root&&(this.stree.root.next=vi,vi=this.stree.root);null!=vi;){var Bi=vi;if(vi=Bi.next,Bi.next=null,Bi!=mi)if(null==Bi.child1){var Li=Bi.shape;if(Li.body!=fi.body&&(1!=Li.body.type||1!=fi.body.type)){var Di=Bi.aabb;if(Di.miny<=xi.maxy&&xi.miny<=Di.maxy&&Di.minx<=xi.maxx&&xi.minx<=Di.maxx){var Ri,Fi;fi.id<Li.id?(Ri=fi.id,Fi=Li.id):(Ri=Li.id,Fi=fi.id);for(var ji=null,Ni=(fi.pairs.length<Li.pairs.length?fi:Li).pairs.head;null!=Ni;){var Ui=Ni.elt;if(Ui.id==Ri&&Ui.di==Fi){ji=Ui;break}Ni=Ni.next}if(null!=ji){ji.sleeping&&(ji.sleeping=!1,ji.next=this.pairs,(this.pairs=ji).first=!0);continue}null==nr.zpp_pool?ji=new nr:(ji=nr.zpp_pool,nr.zpp_pool=ji.next,ji.next=null),ji.n1=mi,ji.n2=Bi,ji.id=Ri,ji.di=Fi,ji.next=this.pairs,(this.pairs=ji).first=!0;var Vi,Hi=fi.pairs;null==rr.zpp_pool?Vi=new rr:(Vi=rr.zpp_pool,rr.zpp_pool=Vi.next,Vi.next=null),Vi.elt=ji;var Wi=Vi;Wi.next=Hi.head,Hi.head=Wi,Hi.modified=!0,Hi.length++;var Xi,qi=Li.pairs;null==rr.zpp_pool?Xi=new rr:(Xi=rr.zpp_pool,rr.zpp_pool=Xi.next,Xi.next=null),Xi.elt=ji;var Yi=Xi;Yi.next=qi.head,qi.head=Yi,qi.modified=!0,qi.length++}}}else{var Ki=Bi.aabb;Ki.miny<=xi.maxy&&xi.miny<=Ki.maxy&&Ki.minx<=xi.maxx&&xi.minx<=Ki.maxx&&(null!=Bi.child1&&(Bi.child1.next=vi,vi=Bi.child1),null!=Bi.child2&&(Bi.child2.next=vi,vi=Bi.child2))}}}}}for(;null!=this.moves;){var Zi=this.moves;this.moves=Zi.mnext,Zi.mnext=null,Zi.moved=!1;var Ji=Zi.shape;if(!Ji.body.component.sleeping){var Qi=Zi.aabb,$i=null;for(null!=this.dtree.root&&(this.dtree.root.next=$i,$i=this.dtree.root);null!=$i;){var en=$i;if($i=en.next,en.next=null,en!=Zi)if(null==en.child1){var tn=en.shape;if(tn.body!=Ji.body&&(1!=tn.body.type||1!=Ji.body.type)){var nn=en.aabb;if(nn.miny<=Qi.maxy&&Qi.miny<=nn.maxy&&nn.minx<=Qi.maxx&&Qi.minx<=nn.maxx){var rn,on;Ji.id<tn.id?(rn=Ji.id,on=tn.id):(rn=tn.id,on=Ji.id);for(var an=null,sn=(Ji.pairs.length<tn.pairs.length?Ji:tn).pairs.head;null!=sn;){var ln=sn.elt;if(ln.id==rn&&ln.di==on){an=ln;break}sn=sn.next}if(null!=an){an.sleeping&&(an.sleeping=!1,an.next=this.pairs,(this.pairs=an).first=!0);continue}null==nr.zpp_pool?an=new nr:(an=nr.zpp_pool,nr.zpp_pool=an.next,an.next=null),an.n1=Zi,an.n2=en,an.id=rn,an.di=on,an.next=this.pairs,(this.pairs=an).first=!0;var pn,hn=Ji.pairs;null==rr.zpp_pool?pn=new rr:(pn=rr.zpp_pool,rr.zpp_pool=pn.next,pn.next=null),pn.elt=an;var un=pn;un.next=hn.head,hn.head=un,hn.modified=!0,hn.length++;var cn,dn=tn.pairs;null==rr.zpp_pool?cn=new rr:(cn=rr.zpp_pool,rr.zpp_pool=cn.next,cn.next=null),cn.elt=an;var _n=cn;_n.next=dn.head,dn.head=_n,dn.modified=!0,dn.length++}}}else{var yn=en.aabb;yn.miny<=Qi.maxy&&Qi.miny<=yn.maxy&&yn.minx<=Qi.maxx&&Qi.minx<=yn.maxx&&(null!=en.child1&&(en.child1.next=$i,$i=en.child1),null!=en.child2&&(en.child2.next=$i,$i=en.child2))}}for(null!=this.stree.root&&(this.stree.root.next=$i,$i=this.stree.root);null!=$i;){var mn=$i;if($i=mn.next,mn.next=null,mn!=Zi)if(null==mn.child1){var fn=mn.shape;if(fn.body!=Ji.body&&(1!=fn.body.type||1!=Ji.body.type)){var xn=mn.aabb;if(xn.miny<=Qi.maxy&&Qi.miny<=xn.maxy&&xn.minx<=Qi.maxx&&Qi.minx<=xn.maxx){var vn,zn;Ji.id<fn.id?(vn=Ji.id,zn=fn.id):(vn=fn.id,zn=Ji.id);for(var gn=null,bn=(Ji.pairs.length<fn.pairs.length?Ji:fn).pairs.head;null!=bn;){var wn=bn.elt;if(wn.id==vn&&wn.di==zn){gn=wn;break}bn=bn.next}if(null!=gn){gn.sleeping&&(gn.sleeping=!1,gn.next=this.pairs,(this.pairs=gn).first=!0);continue}null==nr.zpp_pool?gn=new nr:(gn=nr.zpp_pool,nr.zpp_pool=gn.next,gn.next=null),gn.n1=Zi,gn.n2=mn,gn.id=vn,gn.di=zn,gn.next=this.pairs,(this.pairs=gn).first=!0;var Sn,Cn=Ji.pairs;null==rr.zpp_pool?Sn=new rr:(Sn=rr.zpp_pool,rr.zpp_pool=Sn.next,Sn.next=null),Sn.elt=gn;var Mn=Sn;Mn.next=Cn.head,Cn.head=Mn,Cn.modified=!0,Cn.length++;var Pn,kn=fn.pairs;null==rr.zpp_pool?Pn=new rr:(Pn=rr.zpp_pool,rr.zpp_pool=Pn.next,Pn.next=null),Pn.elt=gn;var Tn=Pn;Tn.next=kn.head,kn.head=Tn,kn.modified=!0,kn.length++}}}else{var On=mn.aabb;On.miny<=Qi.maxy&&Qi.miny<=On.maxy&&On.minx<=Qi.maxx&&Qi.minx<=On.maxx&&(null!=mn.child1&&(mn.child1.next=$i,$i=mn.child1),null!=mn.child2&&(mn.child2.next=$i,$i=mn.child2))}}}}for(var An=null,En=this.pairs;null!=En;){var Gn;if(En.first)Gn=!1;else{var In=En.n1.aabb,Bn=En.n2.aabb;Gn=!(Bn.miny<=In.maxy&&In.miny<=Bn.maxy&&Bn.minx<=In.maxx&&In.minx<=Bn.maxx)}if(Gn){null==An?this.pairs=En.next:An.next=En.next;for(var Ln=En.n1.shape.pairs,Dn=null,Rn=Ln.head;null!=Rn;){if(Rn.elt==En){var Fn,jn;null==Dn?(jn=(Fn=Ln.head).next,Ln.head=jn,null==Ln.head&&(Ln.pushmod=!0)):(jn=(Fn=Dn.next).next,null==(Dn.next=jn)&&(Ln.pushmod=!0));var Nn=Fn;Nn.elt=null,Nn.next=rr.zpp_pool,rr.zpp_pool=Nn,Ln.modified=!0,Ln.length--,Ln.pushmod=!0;break}Rn=(Dn=Rn).next}for(var Un=En.n2.shape.pairs,Vn=null,Hn=Un.head;null!=Hn;){if(Hn.elt==En){var Wn,Xn;null==Vn?(Xn=(Wn=Un.head).next,Un.head=Xn,null==Un.head&&(Un.pushmod=!0)):(Xn=(Wn=Vn.next).next,null==(Vn.next=Xn)&&(Un.pushmod=!0));var qn=Wn;qn.elt=null,qn.next=rr.zpp_pool,rr.zpp_pool=qn,Un.modified=!0,Un.length--,Un.pushmod=!0;break}Hn=(Vn=Hn).next}var Yn=En.next;null!=En.arb&&(En.arb.pair=null),En.arb=null;var Kn=En;Kn.n1=Kn.n2=null,Kn.sleeping=!1,Kn.next=nr.zpp_pool,nr.zpp_pool=Kn,En=Yn}else{var Zn=En.n1.shape,Jn=Zn.body,Qn=En.n2.shape,$n=Qn.body;if(En.first||!Jn.component.sleeping&&1!=Jn.type||!$n.component.sleeping&&1!=$n.type){En.first=!1;var er=Zn.aabb,tr=Qn.aabb;if(tr.miny<=er.maxy&&er.miny<=tr.maxy&&tr.minx<=er.maxx&&er.minx<=tr.maxx){var ir=En.arb;En.arb=t?e.narrowPhase(Zn,Qn,2!=Jn.type||2!=$n.type,En.arb,!1):e.continuousEvent(Zn,Qn,2!=Jn.type||2!=$n.type,En.arb,!1),null==En.arb?null!=ir&&(ir.pair=null):En.arb.pair=En}En=(An=En).next}else En.sleeping=!0,null==An?this.pairs=En.next:An.next=En.next,En=En.next}}},ii.prototype.clear=function(){for(;null!=this.syncs;){var e=this.syncs.snext;this.syncs.snext=null,this.syncs.first_sync&&(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null),this.syncs=e}for(;null!=this.moves;){var t=this.moves.mnext;this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=t}for(;null!=this.pairs;){var i=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null),this.pairs.arb=null;for(var n=this.pairs.n1.shape.pairs,r=this.pairs,o=null,a=n.head;null!=a;){if(a.elt==r){var s,l;null==o?(l=(s=n.head).next,n.head=l,null==n.head&&(n.pushmod=!0)):(l=(s=o.next).next,null==(o.next=l)&&(n.pushmod=!0));var p=s;p.elt=null,p.next=rr.zpp_pool,rr.zpp_pool=p,n.modified=!0,n.length--,n.pushmod=!0;break}a=(o=a).next}for(var h=this.pairs.n2.shape.pairs,u=this.pairs,c=null,d=h.head;null!=d;){if(d.elt==u){var _,y;null==c?(y=(_=h.head).next,h.head=y,null==h.head&&(h.pushmod=!0)):(y=(_=c.next).next,null==(c.next=y)&&(h.pushmod=!0));var m=_;m.elt=null,m.next=rr.zpp_pool,rr.zpp_pool=m,h.modified=!0,h.length--,h.pushmod=!0;break}d=(c=d).next}var f=this.pairs;f.n1=f.n2=null,f.sleeping=!1,f.next=nr.zpp_pool,nr.zpp_pool=f,this.pairs=i}this.dtree.clear(),this.stree.clear()},ii.prototype.treeStack=null,ii.prototype.shapesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;var o=r,a=null==n?new fe:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),l=s.aabb;if(o.x>=l.minx&&o.x<=l.maxx&&o.y>=l.miny&&o.y<=l.maxy)if(null==s.child1){var p;if(null!=i){var h=s.shape.filter;p=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else p=!0;p&&(0==s.shape.type?$s.circleContains(s.shape.circle,o)&&a.push(s.shape.outer):$s.polyContains(s.shape.polygon,o)&&a.push(s.shape.outer))}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var u=this.treeStack.pop_unsafe(),c=u.aabb;if(o.x>=c.minx&&o.x<=c.maxx&&o.y>=c.miny&&o.y<=c.maxy)if(null==u.child1){var d;if(null!=i){var _=u.shape.filter;d=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else d=!0;d&&(0==u.shape.type?$s.circleContains(u.shape.circle,o)&&a.push(u.shape.outer):$s.polyContains(u.shape.polygon,o)&&a.push(u.shape.outer))}else null!=u.child1&&this.treeStack.add(u.child1),null!=u.child2&&this.treeStack.add(u.child2)}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=el.zpp_pool,el.zpp_pool=o,a},ii.prototype.bodiesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;var o=r,a=null==n?new ee:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),l=s.aabb;if(o.x>=l.minx&&o.x<=l.maxx&&o.y>=l.miny&&o.y<=l.maxy)if(null==s.child1){var p=s.shape.body.outer;if(!a.has(p)){var h;if(null!=i){var u=s.shape.filter;h=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else h=!0;h&&(0==s.shape.type?$s.circleContains(s.shape.circle,o)&&a.push(p):$s.polyContains(s.shape.polygon,o)&&a.push(p))}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var c=this.treeStack.pop_unsafe(),d=c.aabb;if(o.x>=d.minx&&o.x<=d.maxx&&o.y>=d.miny&&o.y<=d.maxy)if(null==c.child1){var _=c.shape.body.outer;if(!a.has(_)){var y;if(null!=i){var m=c.shape.filter;y=0!=(m.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&m.collisionGroup)}else y=!0;y&&(0==c.shape.type?$s.circleContains(c.shape.circle,o)&&a.push(_):$s.polyContains(c.shape.polygon,o)&&a.push(_))}}else null!=c.child1&&this.treeStack.add(c.child1),null!=c.child2&&this.treeStack.add(c.child2)}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=el.zpp_pool,el.zpp_pool=o,a},ii.prototype.treeStack2=null,ii.prototype.shapesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new fe:r;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),l=s.aabb;if(l.minx>=o.minx&&l.miny>=o.miny&&l.maxx<=o.maxx&&l.maxy<=o.maxy)if(null==s.child1){var p;if(null!=n){var h=s.shape.filter;p=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else p=!0;p&&a.push(s.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(s);null!=this.treeStack2.head;){var u=this.treeStack2.pop_unsafe();if(null==u.child1){var c;if(null!=n){var d=u.shape.filter;c=0!=(d.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&d.collisionGroup)}else c=!0;c&&a.push(u.shape.outer)}else null!=u.child1&&this.treeStack2.add(u.child1),null!=u.child2&&this.treeStack2.add(u.child2)}else{var _=s.aabb;if(o.miny<=_.maxy&&_.miny<=o.maxy&&o.minx<=_.maxx&&_.minx<=o.maxx)if(null==s.child1){var y;if(null!=n){var m=s.shape.filter;y=0!=(m.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&m.collisionGroup)}else y=!0;if(y)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,s.shape)&&a.push(s.shape.outer);else{var f=s.shape.aabb;f.minx>=o.minx&&f.miny>=o.miny&&f.maxx<=o.maxx&&f.maxy<=o.maxy?a.push(s.shape.outer):$s.testCollide_safe(s.shape,this.aabbShape.zpp_inner)&&a.push(s.shape.outer)}else{var x;if(i){var v=s.shape.aabb;x=v.minx>=o.minx&&v.miny>=o.miny&&v.maxx<=o.maxx&&v.maxy<=o.maxy}else x=!0;x&&a.push(s.shape.outer)}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var z=this.treeStack.pop_unsafe(),g=z.aabb;if(g.minx>=o.minx&&g.miny>=o.miny&&g.maxx<=o.maxx&&g.maxy<=o.maxy)if(null==z.child1){var b;if(null!=n){var w=z.shape.filter;b=0!=(w.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&w.collisionGroup)}else b=!0;b&&a.push(z.shape.outer)}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(z);null!=this.treeStack2.head;){var S=this.treeStack2.pop_unsafe();if(null==S.child1){var C;if(null!=n){var M=S.shape.filter;C=0!=(M.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&M.collisionGroup)}else C=!0;C&&a.push(S.shape.outer)}else null!=S.child1&&this.treeStack2.add(S.child1),null!=S.child2&&this.treeStack2.add(S.child2)}else{var P=z.aabb;if(o.miny<=P.maxy&&P.miny<=o.maxy&&o.minx<=P.maxx&&P.minx<=o.maxx)if(null==z.child1){var k;if(null!=n){var T=z.shape.filter;k=0!=(T.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&T.collisionGroup)}else k=!0;if(k)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,z.shape)&&a.push(z.shape.outer);else{var O=z.shape.aabb;O.minx>=o.minx&&O.miny>=o.miny&&O.maxx<=o.maxx&&O.maxy<=o.maxy?a.push(z.shape.outer):$s.testCollide_safe(z.shape,this.aabbShape.zpp_inner)&&a.push(z.shape.outer)}else{var A;if(i){var E=z.shape.aabb;A=E.minx>=o.minx&&E.miny>=o.miny&&E.maxx<=o.maxx&&E.maxy<=o.maxy}else A=!0;A&&a.push(z.shape.outer)}}else null!=z.child1&&this.treeStack.add(z.child1),null!=z.child2&&this.treeStack.add(z.child2)}}return a},ii.prototype.failed=null,ii.prototype.bodiesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new ee:r;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var s=this.treeStack.pop_unsafe(),l=s.aabb;if(l.minx>=o.minx&&l.miny>=o.miny&&l.maxx<=o.maxx&&l.maxy<=o.maxy)if(null==s.child1){var p;if(null!=n){var h=s.shape.filter;p=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else p=!0;if(p){var u=s.shape.body.outer;a.has(u)||a.push(u)}}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(s);null!=this.treeStack2.head;){var c=this.treeStack2.pop_unsafe();if(null==c.child1){var d;if(null!=n){var _=c.shape.filter;d=0!=(_.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&_.collisionGroup)}else d=!0;if(d){var y=c.shape.body.outer;a.has(y)||a.push(y)}}else null!=c.child1&&this.treeStack2.add(c.child1),null!=c.child2&&this.treeStack2.add(c.child2)}else{var m=s.aabb;if(o.miny<=m.maxy&&m.miny<=o.maxy&&o.minx<=m.maxx&&m.minx<=o.maxx)if(null==s.child1){var f,x=s.shape.body.outer;if(null!=n){var v=s.shape.filter;f=0!=(v.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&v.collisionGroup)}else f=!0;if(f)if(t)if(i){if(!this.failed.has(x)){var z=$s.containTest(this.aabbShape.zpp_inner,s.shape);!a.has(x)&&z?a.push(x):z||(a.remove(x),this.failed.push(x))}}else!a.has(x)&&$s.testCollide_safe(s.shape,this.aabbShape.zpp_inner)&&a.push(x);else if(i){if(!this.failed.has(x)){var g=s.shape.aabb,b=g.minx>=o.minx&&g.miny>=o.miny&&g.maxx<=o.maxx&&g.maxy<=o.maxy;!a.has(x)&&b?a.push(x):b||(a.remove(x),this.failed.push(x))}}else{var w;if(a.has(x))w=!1;else{var S=s.shape.aabb;w=S.minx>=o.minx&&S.miny>=o.miny&&S.maxx<=o.maxx&&S.maxy<=o.maxy}w&&a.push(x)}}else null!=s.child1&&this.treeStack.add(s.child1),null!=s.child2&&this.treeStack.add(s.child2)}}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var C=this.treeStack.pop_unsafe(),M=C.aabb;if(M.minx>=o.minx&&M.miny>=o.miny&&M.maxx<=o.maxx&&M.maxy<=o.maxy)if(null==C.child1){var P;if(null!=n){var k=C.shape.filter;P=0!=(k.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&k.collisionGroup)}else P=!0;if(P){var T=C.shape.body.outer;a.has(T)||a.push(T)}}else for(null==this.treeStack2&&(this.treeStack2=new Ti),this.treeStack2.add(C);null!=this.treeStack2.head;){var O=this.treeStack2.pop_unsafe();if(null==O.child1){var A;if(null!=n){var E=O.shape.filter;A=0!=(E.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&E.collisionGroup)}else A=!0;if(A){var G=O.shape.body.outer;a.has(G)||a.push(G)}}else null!=O.child1&&this.treeStack2.add(O.child1),null!=O.child2&&this.treeStack2.add(O.child2)}else{var I=C.aabb;if(o.miny<=I.maxy&&I.miny<=o.maxy&&o.minx<=I.maxx&&I.minx<=o.maxx)if(null==C.child1){var B,L=C.shape.body.outer;if(null!=n){var D=C.shape.filter;B=0!=(D.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&D.collisionGroup)}else B=!0;if(B)if(t)if(i){if(!this.failed.has(L)){var R=$s.containTest(this.aabbShape.zpp_inner,C.shape);!a.has(L)&&R?a.push(L):R||(a.remove(L),this.failed.push(L))}}else!a.has(L)&&$s.testCollide_safe(C.shape,this.aabbShape.zpp_inner)&&a.push(L);else if(i){if(!this.failed.has(L)){var F=C.shape.aabb,j=F.minx>=o.minx&&F.miny>=o.miny&&F.maxx<=o.maxx&&F.maxy<=o.maxy;!a.has(L)&&j?a.push(L):j||(a.remove(L),this.failed.push(L))}}else{var N;if(a.has(L))N=!1;else{var U=C.shape.aabb;N=U.minx>=o.minx&&U.miny>=o.miny&&U.maxx<=o.maxx&&U.maxy<=o.maxy}N&&a.push(L)}}else null!=C.child1&&this.treeStack.add(C.child1),null!=C.child2&&this.treeStack.add(C.child2)}}return this.failed.clear(),a},ii.prototype.shapesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new fe:o;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var l=this.treeStack.pop_unsafe(),p=l.aabb;if(a.miny<=p.maxy&&p.miny<=a.maxy&&a.minx<=p.maxx&&p.minx<=a.maxx)if(null==l.child1){var h;if(null!=r){var u=l.shape.filter;h=0!=(u.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&u.collisionGroup)}else h=!0;h&&(n?$s.containTest(this.circShape.zpp_inner,l.shape)&&s.push(l.shape.outer):$s.testCollide_safe(l.shape,this.circShape.zpp_inner)&&s.push(l.shape.outer))}else null!=l.child1&&this.treeStack.add(l.child1),null!=l.child2&&this.treeStack.add(l.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var c=this.treeStack.pop_unsafe(),d=c.aabb;if(a.miny<=d.maxy&&d.miny<=a.maxy&&a.minx<=d.maxx&&d.minx<=a.maxx)if(null==c.child1){var _;if(null!=r){var y=c.shape.filter;_=0!=(y.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&y.collisionGroup)}else _=!0;_&&(n?$s.containTest(this.circShape.zpp_inner,c.shape)&&s.push(c.shape.outer):$s.testCollide_safe(c.shape,this.circShape.zpp_inner)&&s.push(c.shape.outer))}else null!=c.child1&&this.treeStack.add(c.child1),null!=c.child2&&this.treeStack.add(c.child2)}return s},ii.prototype.bodiesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new ee:o;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var l=this.treeStack.pop_unsafe(),p=l.aabb;if(a.miny<=p.maxy&&p.miny<=a.maxy&&a.minx<=p.maxx&&p.minx<=a.maxx)if(null==l.child1){var h,u=l.shape.body.outer;if(null!=r){var c=l.shape.filter;h=0!=(c.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup)}else h=!0;if(h)if(n){if(!this.failed.has(u)){var d=$s.containTest(this.circShape.zpp_inner,l.shape);!s.has(u)&&d?s.push(u):d||(s.remove(u),this.failed.push(u))}}else!s.has(u)&&$s.testCollide_safe(l.shape,this.circShape.zpp_inner)&&s.push(u)}else null!=l.child1&&this.treeStack.add(l.child1),null!=l.child2&&this.treeStack.add(l.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var _=this.treeStack.pop_unsafe(),y=_.aabb;if(a.miny<=y.maxy&&y.miny<=a.maxy&&a.minx<=y.maxx&&y.minx<=a.maxx)if(null==_.child1){var m,f=_.shape.body.outer;if(null!=r){var x=_.shape.filter;m=0!=(x.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&x.collisionGroup)}else m=!0;if(m)if(n){if(!this.failed.has(f)){var v=$s.containTest(this.circShape.zpp_inner,_.shape);!s.has(f)&&v?s.push(f):v||(s.remove(f),this.failed.push(f))}}else!s.has(f)&&$s.testCollide_safe(_.shape,this.circShape.zpp_inner)&&s.push(f)}else null!=_.child1&&this.treeStack.add(_.child1),null!=_.child2&&this.treeStack.add(_.child2)}return this.failed.clear(),s},ii.prototype.shapesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new fe:n;if(null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var a=this.treeStack.pop_unsafe(),s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var l;if(null!=i){var p=a.shape.filter;l=0!=(p.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&p.collisionGroup)}else l=!0;l&&(t?$s.containTest(e,a.shape)&&o.push(a.shape.outer):$s.testCollide_safe(a.shape,e)&&o.push(a.shape.outer))}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var h=this.treeStack.pop_unsafe(),u=h.aabb;if(r.miny<=u.maxy&&u.miny<=r.maxy&&r.minx<=u.maxx&&u.minx<=r.maxx)if(null==h.child1){var c;if(null!=i){var d=h.shape.filter;c=0!=(d.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&d.collisionGroup)}else c=!0;c&&(t?$s.containTest(e,h.shape)&&o.push(h.shape.outer):$s.testCollide_safe(h.shape,e)&&o.push(h.shape.outer))}else null!=h.child1&&this.treeStack.add(h.child1),null!=h.child2&&this.treeStack.add(h.child2)}return o},ii.prototype.bodiesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new ee:n;if(null==this.failed&&(this.failed=new ee),null!=this.stree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.stree.root);null!=this.treeStack.head;){var a=this.treeStack.pop_unsafe(),s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx)if(null==a.child1){var l,p=a.shape.body.outer;if(null!=i){var h=a.shape.filter;l=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else l=!0;if(l)if(t){if(!this.failed.has(p)){var u=$s.containTest(e,a.shape);!o.has(p)&&u?o.push(p):u||(o.remove(p),this.failed.push(p))}}else!o.has(p)&&$s.testCollide_safe(a.shape,e)&&o.push(p)}else null!=a.child1&&this.treeStack.add(a.child1),null!=a.child2&&this.treeStack.add(a.child2)}if(null!=this.dtree.root)for(null==this.treeStack&&(this.treeStack=new Ti),this.treeStack.add(this.dtree.root);null!=this.treeStack.head;){var c=this.treeStack.pop_unsafe(),d=c.aabb;if(r.miny<=d.maxy&&d.miny<=r.maxy&&r.minx<=d.maxx&&d.minx<=r.maxx)if(null==c.child1){var _,y=c.shape.body.outer;if(null!=i){var m=c.shape.filter;_=0!=(m.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&m.collisionGroup)}else _=!0;if(_)if(t){if(!this.failed.has(y)){var f=$s.containTest(e,c.shape);!o.has(y)&&f?o.push(y):f||(o.remove(y),this.failed.push(y))}}else!o.has(y)&&$s.testCollide_safe(c.shape,e)&&o.push(y)}else null!=c.child1&&this.treeStack.add(c.child1),null!=c.child2&&this.treeStack.add(c.child2)}return this.failed.clear(),o},ii.prototype.openlist=null,ii.prototype.rayCast=function(e,t,i){null==this.openlist&&(this.openlist=new Ti),this.sync_broadphase(),e.validate_dir();var n=e.maxdist;if(null!=this.dtree.root&&e.aabbtest(this.dtree.root.aabb)){var r=e.aabbsect(this.dtree.root.aabb);if(0<=r&&r<n){this.dtree.root.rayt=r;for(var o=null,a=this.openlist.head;null!=a&&!(this.dtree.root.rayt<a.elt.rayt);)a=(o=a).next;var s,l=this.openlist;null==sn.zpp_pool?s=new sn:(s=sn.zpp_pool,sn.zpp_pool=s.next,s.next=null),s.elt=this.dtree.root;var p=s;null==o?(p.next=l.head,l.head=p):(p.next=o.next,o.next=p),l.pushmod=l.modified=!0,l.length++}}if(null!=this.stree.root&&e.aabbtest(this.stree.root.aabb)){var h=e.aabbsect(this.stree.root.aabb);if(0<=h&&h<n){this.stree.root.rayt=h;for(var u=null,c=this.openlist.head;null!=c&&!(this.stree.root.rayt<c.elt.rayt);)c=(u=c).next;var d,_=this.openlist;null==sn.zpp_pool?d=new sn:(d=sn.zpp_pool,sn.zpp_pool=d.next,d.next=null),d.elt=this.stree.root;var y=d;null==u?(y.next=_.head,_.head=y):(y.next=u.next,u.next=y),_.pushmod=_.modified=!0,_.length++}}for(var m=null;null!=this.openlist.head;){var f=this.openlist.pop_unsafe();if(f.rayt>=n)break;if(null==f.child1){var x,v=f.shape;if(null!=i){var z=v.filter;x=0!=(z.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&z.collisionGroup)}else x=!0;if(x){var g=0==v.type?e.circlesect(v.circle,t,n):e.aabbtest(v.aabb)?e.polysect(v.polygon,t,n):null;null!=g&&(n=g.zpp_inner.toiDistance,null!=m&&m.zpp_inner.free(),m=g)}}else{if(null!=f.child1&&e.aabbtest(f.child1.aabb)){var b=e.aabbsect(f.child1.aabb);if(0<=b&&b<n){f.child1.rayt=b;for(var w=null,S=this.openlist.head;null!=S&&!(f.child1.rayt<S.elt.rayt);)S=(w=S).next;var C,M=this.openlist;null==sn.zpp_pool?C=new sn:(C=sn.zpp_pool,sn.zpp_pool=C.next,C.next=null),C.elt=f.child1;var P=C;null==w?(P.next=M.head,M.head=P):(P.next=w.next,w.next=P),M.pushmod=M.modified=!0,M.length++}}if(null!=f.child2&&e.aabbtest(f.child2.aabb)){var k=e.aabbsect(f.child2.aabb);if(0<=k&&k<n){f.child2.rayt=k;for(var T=null,O=this.openlist.head;null!=O&&!(f.child2.rayt<O.elt.rayt);)O=(T=O).next;var A,E=this.openlist;null==sn.zpp_pool?A=new sn:(A=sn.zpp_pool,sn.zpp_pool=A.next,A.next=null),A.elt=f.child2;var G=A;null==T?(G.next=E.head,E.head=G):(G.next=T.next,T.next=G),E.pushmod=E.modified=!0,E.length++}}}}return this.openlist.clear(),m},ii.prototype.rayMultiCast=function(e,t,i,n){null==this.openlist&&(this.openlist=new Ti),this.sync_broadphase(),e.validate_dir();var r=e.maxdist>=1/0,o=null==n?new K:n;if(null!=this.dtree.root&&e.aabbtest(this.dtree.root.aabb))if(r)this.openlist.add(this.dtree.root);else{var a=e.aabbsect(this.dtree.root.aabb);0<=a&&a<e.maxdist&&this.openlist.add(this.dtree.root)}if(null!=this.stree.root&&e.aabbtest(this.stree.root.aabb))if(r)this.openlist.add(this.stree.root);else{var s=e.aabbsect(this.stree.root.aabb);0<=s&&s<e.maxdist&&this.openlist.add(this.stree.root)}for(;null!=this.openlist.head;){var l=this.openlist.pop_unsafe();if(null==l.child1){var p,h=l.shape;if(null!=i){var u=h.filter;p=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else p=!0;p&&(0==h.type?e.circlesect2(h.circle,t,o):e.aabbtest(h.aabb)&&e.polysect2(h.polygon,t,o))}else{if(null!=l.child1&&e.aabbtest(l.child1.aabb))if(r)this.openlist.add(l.child1);else{var c=e.aabbsect(l.child1.aabb);0<=c&&c<e.maxdist&&this.openlist.add(l.child1)}if(null!=l.child2&&e.aabbtest(l.child2.aabb))if(r)this.openlist.add(l.child2);else{var d=e.aabbsect(l.child2.aabb);0<=d&&d<e.maxdist&&this.openlist.add(l.child2)}}}return this.openlist.clear(),o},ii.prototype.__class__=ii;var ni=zpp_nape.space.ZPP_Island=function(){this.waket=0,this.sleep=!1,this.comps=null,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.comps=new Oi};ni.__name__=["zpp_nape","space","ZPP_Island"],ni.prototype.next=null,ni.prototype.elem=function(){return this},ni.prototype.begin=function(){return this.next},ni.prototype._inuse=null,ni.prototype.modified=null,ni.prototype.pushmod=null,ni.prototype.length=null,ni.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},ni.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ni.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},ni.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},ni.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ni.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},ni.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ni.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},ni.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},ni.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},ni.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ni.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ni.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ni.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ni.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ni.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},ni.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ni.prototype.clear=function(){},ni.prototype.inlined_clear=function(){},ni.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},ni.prototype.empty=function(){return null==this.next},ni.prototype.size=function(){return this.length},ni.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ni.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},ni.prototype.front=function(){return this.next},ni.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},ni.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},ni.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},ni.prototype.comps=null,ni.prototype.sleep=null,ni.prototype.waket=null,ni.prototype.free=function(){},ni.prototype.alloc=function(){this.waket=0},ni.prototype.__class__=ni;var oi=zpp_nape.space.ZPP_Component=function(){this.woken=!1,this.waket=0,this.sleeping=!1,this.island=null,this.constraint=null,this.body=null,this.isBody=!1,this.rank=0,this.parent=null,this.next=null,this.sleeping=!1,this.island=null,(this.parent=this).rank=0,this.woken=!1};oi.__name__=["zpp_nape","space","ZPP_Component"],oi.prototype.next=null,oi.prototype.parent=null,oi.prototype.rank=null,oi.prototype.isBody=null,oi.prototype.body=null,oi.prototype.constraint=null,oi.prototype.island=null,oi.prototype.sleeping=null,oi.prototype.waket=null,oi.prototype.woken=null,oi.prototype.free=function(){this.body=null,this.constraint=null},oi.prototype.alloc=function(){},oi.prototype.reset=function(){this.sleeping=!1,this.island=null,(this.parent=this).rank=0},oi.prototype.__class__=oi;var Yo=zpp_nape.space.ZPP_CallbackSet=function(){this.lazydel=!1,this.freed=!1,this.length=0,this.pushmod=!1,this.modified=!1,this._inuse=!1,this.next=null,this.int2=null,this.int1=null,this.di=0,this.id=0,this.arbiters=new vi};Yo.__name__=["zpp_nape","space","ZPP_CallbackSet"],Yo.get=function(e,t){var i;return null==Yo.zpp_pool?i=new Yo:(i=Yo.zpp_pool,Yo.zpp_pool=i.next,i.next=null),i.freed=!1,i.lazydel=!1,i.COLLISIONstate=1,i.COLLISIONstamp=0,i.SENSORstate=1,i.SENSORstamp=0,i.FLUIDstate=1,i.FLUIDstamp=0,e.id<t.id?(i.int1=e,i.int2=t):(i.int1=t,i.int2=e),i.id=i.int1.id,i.di=i.int2.id,i},Yo.prototype.id=null,Yo.prototype.di=null,Yo.prototype.int1=null,Yo.prototype.int2=null,Yo.prototype.arbiters=null,Yo.prototype.COLLISIONstate=null,Yo.prototype.COLLISIONstamp=null,Yo.prototype.SENSORstate=null,Yo.prototype.SENSORstamp=null,Yo.prototype.FLUIDstate=null,Yo.prototype.FLUIDstamp=null,Yo.prototype.next=null,Yo.prototype.elem=function(){return this},Yo.prototype.begin=function(){return this.next},Yo.prototype._inuse=null,Yo.prototype.modified=null,Yo.prototype.pushmod=null,Yo.prototype.length=null,Yo.prototype.setbegin=function(e){this.next=e,this.modified=!0,this.pushmod=!0},Yo.prototype.add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Yo.prototype.inlined_add=function(e){return e._inuse=!0,e.next=this.next,this.next=e,this.modified=!0,this.length++,e},Yo.prototype.addAll=function(e){for(var t=e.next;null!=t;)this.add(t),t=t.next},Yo.prototype.insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Yo.prototype.inlined_insert=function(e,t){return t._inuse=!0,null==e?(t.next=this.next,this.next=t):(t.next=e.next,e.next=t),this.pushmod=this.modified=!0,this.length++,t},Yo.prototype.pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Yo.prototype.inlined_pop=function(){var e=this.next;this.next=e.next,e._inuse=!1,null==this.next&&(this.pushmod=!0),this.modified=!0,this.length--},Yo.prototype.pop_unsafe=function(){var e=this.next;return this.pop(),e},Yo.prototype.inlined_pop_unsafe=function(){var e=this.next;return this.pop(),e},Yo.prototype.remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Yo.prototype.try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Yo.prototype.inlined_remove=function(e){for(var t=null,i=this.next;null!=i;){if(i==e){var n,r;null==t?(r=(n=this.next).next,this.next=r,null==this.next&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0)),n._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Yo.prototype.inlined_try_remove=function(e){for(var t=null,i=this.next,n=!1;null!=i;){if(i==e){var r,o;null==t?(o=(r=this.next).next,this.next=o,null==this.next&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0)),r._inuse=!1,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Yo.prototype.erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Yo.prototype.inlined_erase=function(e){var t,i;return null==e?(i=(t=this.next).next,this.next=i,null==this.next&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0)),t._inuse=!1,this.modified=!0,this.length--,this.pushmod=!0,i},Yo.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Yo.prototype.clear=function(){},Yo.prototype.inlined_clear=function(){},Yo.prototype.reverse=function(){for(var e=this.next,t=null;null!=e;){var i=e.next;e.next=t,t=this.next=e,e=i}this.modified=!0,this.pushmod=!0},Yo.prototype.empty=function(){return null==this.next},Yo.prototype.size=function(){return this.length},Yo.prototype.has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Yo.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.next;null!=i;){if(i==e){t=!0;break}i=i.next}return t},Yo.prototype.front=function(){return this.next},Yo.prototype.back=function(){for(var e=this.next,t=e;null!=t;)t=(e=t).next;return e},Yo.prototype.iterator_at=function(e){for(var t=this.next;0<e--&&null!=t;)t=t.next;return t},Yo.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t:null},Yo.prototype.freed=null,Yo.prototype.lazydel=null,Yo.prototype.free=function(){this.int1=this.int2=null,this.id=this.di=-1,this.freed=!0},Yo.prototype.alloc=function(){this.freed=!1,this.lazydel=!1,this.COLLISIONstate=1,this.COLLISIONstamp=0,this.SENSORstate=1,this.SENSORstamp=0,this.FLUIDstate=1,this.FLUIDstamp=0},Yo.prototype.add_arb=function(e){var t;t=!1;for(var i=this.arbiters.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}if(t)return!1;var n,r=this.arbiters;null==Ko.zpp_pool?n=new Ko:(n=Ko.zpp_pool,Ko.zpp_pool=n.next,n.next=null),n.elt=e;var o=n;return o.next=r.head,r.head=o,r.modified=!0,r.length++,!0},Yo.prototype.try_remove_arb=function(e){for(var t=this.arbiters,i=null,n=t.head,r=!1;null!=n;){if(n.elt==e){var o,a;null==i?(a=(o=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(o=i.next).next,null==(i.next=a)&&(t.pushmod=!0));var s=o;s.elt=null,s.next=Ko.zpp_pool,Ko.zpp_pool=s,t.modified=!0,t.length--,r=t.pushmod=!0;break}n=(i=n).next}return r},Yo.prototype.remove_arb=function(e){for(var t=this.arbiters,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}},Yo.prototype.empty_arb=function(e){var t;t=!0;for(var i=this.arbiters.head;null!=i;){if(0!=(i.elt.type&e)){t=!1;break}i=i.next}return t},Yo.prototype.really_empty=function(){return null==this.arbiters.head},Yo.prototype.sleeping=function(){var e;e=!0;for(var t=this.arbiters.head;null!=t;){if(!t.elt.sleeping){e=!1;break}t=t.next}return e},Yo.prototype.__class__=Yo;var ai=zpp_nape.space.ZPP_CbSetManager=function(e){this.space=null,(this.cbsets=null)==Yn.zpp_pool?this.cbsets=new Yn:(this.cbsets=Yn.zpp_pool,Yn.zpp_pool=this.cbsets.next,this.cbsets.next=null),this.cbsets.lt=jo.setlt,this.space=e};ai.__name__=["zpp_nape","space","ZPP_CbSetManager"],ai.prototype.cbsets=null,ai.prototype.space=null,ai.prototype.get=function(e){if(null==e.head)return null;var t;null==jo.zpp_pool?t=new jo:(t=jo.zpp_pool,jo.zpp_pool=t.next,t.next=null);var i=t.cbTypes;t.cbTypes=e;var n,r=this.cbsets.find_weak(t);if(null!=r)n=r.data;else{var o=jo.get(e);this.cbsets.insert(o),o.manager=this,n=o}t.cbTypes=i;var a=t;for(a.listeners.clear(),a.zip_listeners=!0,a.bodylisteners.clear(),a.zip_bodylisteners=!0,a.conlisteners.clear(),a.zip_conlisteners=!0;null!=a.cbTypes.head;)a.cbTypes.pop_unsafe().cbsets.remove(a);return a.next=jo.zpp_pool,jo.zpp_pool=a,n},ai.prototype.remove=function(e){for(this.cbsets.remove(e);null!=e.cbpairs.head;){var t=e.cbpairs.pop_unsafe();t.a!=t.b&&(e==t.a?t.b.cbpairs.remove(t):t.a.cbpairs.remove(t)),t.a=t.b=null,t.listeners.clear(),t.next=No.zpp_pool,No.zpp_pool=t}e.manager=null},ai.prototype.clear=function(){},ai.prototype.validate=function(){if(!this.cbsets.empty()){for(var e=this.cbsets.parent;null!=e.prev;)e=e.prev;for(;null!=e;)if(e.data.validate(),null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}},ai.prototype.pair=function(e,t){for(var i,n=null,r=(e.cbpairs.length<t.cbpairs.length?e.cbpairs:t.cbpairs).head;null!=r;){var o=r.elt;if(o.a==e&&o.b==t||o.a==t&&o.b==e){n=o;break}r=r.next}null==n&&(null==No.zpp_pool?i=new No:(i=No.zpp_pool,No.zpp_pool=i.next,i.next=null),i.zip_listeners=!0,jo.setlt(e,t)?(i.a=e,i.b=t):(i.a=t,i.b=e),n=i,e.cbpairs.add(n),t!=e&&t.cbpairs.add(n));return n.zip_listeners&&(n.zip_listeners=!1,n.__validate()),n},ai.prototype.valid_listener=function(e){return e.space==this.space},ai.prototype.__class__=ai;var si=zpp_nape.space.ZPP_Space=function(e,t){var i;this.prelisteners=null,this.precb=null,this.continuous=!1,this.toiEvents=null,this.pre_dt=0,this.convexShapeList=null,this.cbsets=null,this.callbackset_list=null,this.callbacks=null,this.wrap_listeners=null,this.listeners=null,this.islands=null,this.staticsleep=null,this.wrap_livecon=null,this.live_constraints=null,this.wrap_live=null,this.live=null,this.wrap_arbiters=null,this.s_arbiters=null,this.f_arbiters=null,this.c_arbiters_false=null,this.c_arbiters_true=null,this.sortcontacts=!1,this.time=0,this.midstep=!1,this.stamp=0,this.global_ang_drag=0,this.global_lin_drag=0,this.__static=null,this.bphase=null,this.kinematics=null,this.wrap_constraints=null,this.constraints=null,this.wrap_compounds=null,this.compounds=null,this.wrap_bodies=null,this.bodies=null,this.wrap_gravity=null,this.gravityy=0,this.gravityx=0,this.userData=null,this.outer=null,this.toiEvents=new Li,this.global_lin_drag=.015,this.global_ang_drag=.015,this.precb=new v,this.precb.zpp_inner=new nt,this.sortcontacts=!0,this.pre_dt=0,null!=t?(null==Uo.Broadphase_DYNAMIC_AABB_TREE&&(Uo.internal=!0,Uo.Broadphase_DYNAMIC_AABB_TREE=new we,Uo.internal=!1),i=t==Uo.Broadphase_DYNAMIC_AABB_TREE):i=!0,i?this.bphase=new ii(this):(null==Uo.Broadphase_SWEEP_AND_PRUNE&&(Uo.internal=!0,Uo.Broadphase_SWEEP_AND_PRUNE=new we,Uo.internal=!1),t==Uo.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new pi(this))),this.time=0,null!=e?(this.gravityx=e.x,this.gravityy=e.y):(this.gravityx=0,this.gravityy=0),this.bodies=new fi,this.wrap_bodies=xn.get(this.bodies),this.wrap_bodies.zpp_inner.adder=$(this,this.bodies_adder),this.wrap_bodies.zpp_inner.subber=$(this,this.bodies_subber),this.compounds=new xi,this.wrap_compounds=zn.get(this.compounds),this.wrap_compounds.zpp_inner.adder=$(this,this.compounds_adder),this.wrap_compounds.zpp_inner.subber=$(this,this.compounds_subber),this.kinematics=new fi,this.c_arbiters_true=new Ii,this.c_arbiters_false=new Ii,this.f_arbiters=new Ai,this.s_arbiters=new Ei,this.islands=new ni,this.live=new fi,this.wrap_live=xn.get(this.live,!0),this.staticsleep=new fi,this.constraints=new Ee,this.wrap_constraints=fn.get(this.constraints),this.wrap_constraints.zpp_inner.adder=$(this,this.constraints_adder),this.wrap_constraints.zpp_inner.subber=$(this,this.constraints_subber),this.live_constraints=new Ee,this.wrap_livecon=fn.get(this.live_constraints,!0),this.__static=qt.__static(),(this.__static.zpp_inner.space=this).callbacks=new nt,this.midstep=!1,this.listeners=new Gi,this.wrap_listeners=gn.get(this.listeners),this.wrap_listeners.zpp_inner.adder=$(this,this.listeners_adder),this.wrap_listeners.zpp_inner.subber=$(this,this.listeners_subber),this.callbackset_list=new Yo,this.mrca1=new Ge,this.mrca2=new Ge,this.prelisteners=new Te,this.cbsets=new ai(this)};si.__name__=["zpp_nape","space","ZPP_Space"],si.prototype.outer=null,si.prototype.userData=null,si.prototype.gravityx=null,si.prototype.gravityy=null,si.prototype.wrap_gravity=null,si.prototype.getgravity=function(){var e,t=this.gravityx,i=this.gravityy;if(null==jn.poolVec2?e=new ht:(e=jn.poolVec2,jn.poolVec2=e.zpp_pool,e.zpp_pool=null),null==e.zpp_inner){var n;null==el.zpp_pool?n=new el:(n=el.zpp_pool,el.zpp_pool=n.next,n.next=null),n.weak=!1,n._immutable=!1,n.x=t,n.y=i,e.zpp_inner=n,e.zpp_inner.outer=e}else{var r,o=e.zpp_inner;if(null!=o._validate&&o._validate(),e.zpp_inner.x==t){var a=e.zpp_inner;null!=a._validate&&a._validate(),r=e.zpp_inner.y==i}else r=!1;if(!r){e.zpp_inner.x=t,e.zpp_inner.y=i;var s=e.zpp_inner;null!=s._invalidate&&s._invalidate(s)}}e.zpp_inner.weak=!1,this.wrap_gravity=e,this.wrap_gravity.zpp_inner._inuse=!0,this.wrap_gravity.zpp_inner._invalidate=$(this,this.gravity_invalidate),this.wrap_gravity.zpp_inner._validate=$(this,this.gravity_validate)},si.prototype.gravity_invalidate=function(e){this.gravityx=e.x,this.gravityy=e.y;for(var t=new xi,i=this.bodies.head;null!=i;){var n=i.elt;n.world||(n.component.waket=this.stamp+(this.midstep?0:1),3==n.type&&(n.kinematicDelaySleep=!0),n.component.sleeping&&this.really_wake(n,!1)),i=i.next}for(var r=this.compounds.head;null!=r;)t.add(r.elt),r=r.next;for(;null!=t.head;){for(var o=t.pop_unsafe(),a=o.bodies.head;null!=a;){var s=a.elt;s.world||(s.component.waket=this.stamp+(this.midstep?0:1),3==s.type&&(s.kinematicDelaySleep=!0),s.component.sleeping&&this.really_wake(s,!1)),a=a.next}for(var l=o.compounds.head;null!=l;)t.add(l.elt),l=l.next}},si.prototype.gravity_validate=function(){this.wrap_gravity.zpp_inner.x=this.gravityx,this.wrap_gravity.zpp_inner.y=this.gravityy},si.prototype.bodies=null,si.prototype.wrap_bodies=null,si.prototype.compounds=null,si.prototype.wrap_compounds=null,si.prototype.constraints=null,si.prototype.wrap_constraints=null,si.prototype.kinematics=null,si.prototype.bphase=null,si.prototype.__static=null,si.prototype.global_lin_drag=null,si.prototype.global_ang_drag=null,si.prototype.stamp=null,si.prototype.midstep=null,si.prototype.time=null,si.prototype.sortcontacts=null,si.prototype.c_arbiters_true=null,si.prototype.c_arbiters_false=null,si.prototype.f_arbiters=null,si.prototype.s_arbiters=null,si.prototype.wrap_arbiters=null,si.prototype.live=null,si.prototype.wrap_live=null,si.prototype.live_constraints=null,si.prototype.wrap_livecon=null,si.prototype.staticsleep=null,si.prototype.islands=null,si.prototype.listeners=null,si.prototype.wrap_listeners=null,si.prototype.callbacks=null,si.prototype.callbackset_list=null,si.prototype.cbsets=null,si.prototype.clear=function(){for(;null!=this.listeners.head;)this.remListener(this.listeners.pop_unsafe());for(;null!=this.callbackset_list.next;){var e=this.callbackset_list.pop_unsafe();e.arbiters.clear(),e.int1=e.int2=null,e.id=e.di=-1,e.freed=!0,e.next=Yo.zpp_pool,Yo.zpp_pool=e}for(;null!=this.c_arbiters_true.head;){var t=this.c_arbiters_true.pop_unsafe();if(!t.cleared){for(var i=t.b1.arbiters,n=null,r=i.head;null!=r;){if(r.elt==t){var o,a;null==n?(a=(o=i.head).next,i.head=a,null==i.head&&(i.pushmod=!0)):(a=(o=n.next).next,null==(n.next=a)&&(i.pushmod=!0));var s=o;s.elt=null,s.next=Ko.zpp_pool,Ko.zpp_pool=s,i.modified=!0,i.length--,i.pushmod=!0;break}r=(n=r).next}for(var l=t.b2.arbiters,p=null,h=l.head;null!=h;){if(h.elt==t){var u,c;null==p?(c=(u=l.head).next,l.head=c,null==l.head&&(l.pushmod=!0)):(c=(u=p.next).next,null==(p.next=c)&&(l.pushmod=!0));var d=u;d.elt=null,d.next=Ko.zpp_pool,Ko.zpp_pool=d,l.modified=!0,l.length--,l.pushmod=!0;break}h=(p=h).next}null!=t.pair&&(t.pair.arb=null,t.pair=null)}for(t.b1=t.b2=null,t.active=!1,t.intchange=!1;null!=t.contacts.next;){var _=t.contacts,y=_.next;_.pop(),y.arbiter=null,y.next=Xo.zpp_pool,Xo.zpp_pool=y;var m=t.innards,f=m.next;m.next=f.next,f._inuse=!1,null==m.next&&(m.pushmod=!0),m.modified=!0,m.length--}t.userdef_dyn_fric=!1,t.userdef_stat_fric=!1,t.userdef_restitution=!1,t.userdef_rfric=!1,t.__ref_edge1=t.__ref_edge2=null,t.next=Wo.zpp_pool,(Wo.zpp_pool=t).pre_dt=-1}for(;null!=this.c_arbiters_false.head;){var x=this.c_arbiters_false.pop_unsafe();if(!x.cleared){for(var v=x.b1.arbiters,z=null,g=v.head;null!=g;){if(g.elt==x){var b,w;null==z?(w=(b=v.head).next,v.head=w,null==v.head&&(v.pushmod=!0)):(w=(b=z.next).next,null==(z.next=w)&&(v.pushmod=!0));var S=b;S.elt=null,S.next=Ko.zpp_pool,Ko.zpp_pool=S,v.modified=!0,v.length--,v.pushmod=!0;break}g=(z=g).next}for(var C=x.b2.arbiters,M=null,P=C.head;null!=P;){if(P.elt==x){var k,T;null==M?(T=(k=C.head).next,C.head=T,null==C.head&&(C.pushmod=!0)):(T=(k=M.next).next,null==(M.next=T)&&(C.pushmod=!0));var O=k;O.elt=null,O.next=Ko.zpp_pool,Ko.zpp_pool=O,C.modified=!0,C.length--,C.pushmod=!0;break}P=(M=P).next}null!=x.pair&&(x.pair.arb=null,x.pair=null)}for(x.b1=x.b2=null,x.active=!1,x.intchange=!1;null!=x.contacts.next;){var A=x.contacts,E=A.next;A.pop(),E.arbiter=null,E.next=Xo.zpp_pool,Xo.zpp_pool=E;var G=x.innards,I=G.next;G.next=I.next,I._inuse=!1,null==G.next&&(G.pushmod=!0),G.modified=!0,G.length--}x.userdef_dyn_fric=!1,x.userdef_stat_fric=!1,x.userdef_restitution=!1,x.userdef_rfric=!1,x.__ref_edge1=x.__ref_edge2=null,x.next=Wo.zpp_pool,(Wo.zpp_pool=x).pre_dt=-1}for(;null!=this.s_arbiters.head;){var B=this.s_arbiters.pop_unsafe();if(!B.cleared){for(var L=B.b1.arbiters,D=null,R=L.head;null!=R;){if(R.elt==B){var F,j;null==D?(j=(F=L.head).next,L.head=j,null==L.head&&(L.pushmod=!0)):(j=(F=D.next).next,null==(D.next=j)&&(L.pushmod=!0));var N=F;N.elt=null,N.next=Ko.zpp_pool,Ko.zpp_pool=N,L.modified=!0,L.length--,L.pushmod=!0;break}R=(D=R).next}for(var U=B.b2.arbiters,V=null,H=U.head;null!=H;){if(H.elt==B){var W,X;null==V?(X=(W=U.head).next,U.head=X,null==U.head&&(U.pushmod=!0)):(X=(W=V.next).next,null==(V.next=X)&&(U.pushmod=!0));var q=W;q.elt=null,q.next=Ko.zpp_pool,Ko.zpp_pool=q,U.modified=!0,U.length--,U.pushmod=!0;break}H=(V=H).next}null!=B.pair&&(B.pair.arb=null,B.pair=null)}B.b1=B.b2=null,B.active=!1,B.intchange=!1,B.next=Vo.zpp_pool,Vo.zpp_pool=B}for(;null!=this.f_arbiters.head;){var Y=this.f_arbiters.pop_unsafe();if(!Y.cleared){for(var K=Y.b1.arbiters,Z=null,J=K.head;null!=J;){if(J.elt==Y){var Q,$;null==Z?($=(Q=K.head).next,K.head=$,null==K.head&&(K.pushmod=!0)):($=(Q=Z.next).next,null==(Z.next=$)&&(K.pushmod=!0));var ee=Q;ee.elt=null,ee.next=Ko.zpp_pool,Ko.zpp_pool=ee,K.modified=!0,K.length--,K.pushmod=!0;break}J=(Z=J).next}for(var te=Y.b2.arbiters,ie=null,ne=te.head;null!=ne;){if(ne.elt==Y){var re,oe;null==ie?(oe=(re=te.head).next,te.head=oe,null==te.head&&(te.pushmod=!0)):(oe=(re=ie.next).next,null==(ie.next=oe)&&(te.pushmod=!0));var ae=re;ae.elt=null,ae.next=Ko.zpp_pool,Ko.zpp_pool=ae,te.modified=!0,te.length--,te.pushmod=!0;break}ne=(ie=ne).next}null!=Y.pair&&(Y.pair.arb=null,Y.pair=null)}Y.b1=Y.b2=null,Y.active=!1,Y.intchange=!1,Y.next=Ho.zpp_pool,(Ho.zpp_pool=Y).pre_dt=-1}for(this.bphase.clear();null!=this.bodies.head;){var se=this.bodies.pop_unsafe();if(null!=se.component){var le=se.component.island;if(null!=le){for(;null!=le.comps.head;){var pe=le.comps.pop_unsafe();pe.sleeping=!1,pe.island=null,(pe.parent=pe).rank=0}le.next=ni.zpp_pool,ni.zpp_pool=le}}se.removedFromSpace(),se.space=null}for(;null!=this.constraints.head;){var he=this.constraints.pop_unsafe();if(null!=he.component){var ue=he.component.island;if(null!=ue){for(;null!=ue.comps.head;){var ce=ue.comps.pop_unsafe();ce.sleeping=!1,ce.island=null,(ce.parent=ce).rank=0}ue.next=ni.zpp_pool,ni.zpp_pool=ue}}he.removedFromSpace(),he.space=null}this.kinematics.clear();for(var de=new xi;null!=this.compounds.head;)de.add(this.compounds.pop_unsafe());for(;null!=de.head;){var _e=de.pop_unsafe();_e.removedFromSpace(),_e.space=null;for(var ye=_e.bodies.head;null!=ye;){var me=ye.elt;if(null!=me.component){var fe=me.component.island;if(null!=fe){for(;null!=fe.comps.head;){var xe=fe.comps.pop_unsafe();xe.sleeping=!1,xe.island=null,(xe.parent=xe).rank=0}fe.next=ni.zpp_pool,ni.zpp_pool=fe}}me.removedFromSpace(),me.space=null,ye=ye.next}for(var ve=_e.constraints.head;null!=ve;){var ze=ve.elt;if(null!=ze.component){var ge=ze.component.island;if(null!=ge){for(;null!=ge.comps.head;){var be=ge.comps.pop_unsafe();be.sleeping=!1,be.island=null,(be.parent=be).rank=0}ge.next=ni.zpp_pool,ni.zpp_pool=ge}}ze.removedFromSpace(),ze.space=null,ve=ve.next}for(var we=_e.compounds.head;null!=we;)de.add(we.elt),we=we.next}this.staticsleep.clear(),this.live.clear(),this.live_constraints.clear(),this.stamp=0,this.time=0,this.mrca1.clear(),this.mrca2.clear(),this.prelisteners.clear(),this.cbsets.clear()},si.prototype.bodies_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(e),this.addBody(e.zpp_inner),!0)},si.prototype.bodies_subber=function(e){this.remBody(e.zpp_inner)},si.prototype.compounds_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.wrap_compounds.remove(e),this.addCompound(e.zpp_inner),!0)},si.prototype.compounds_subber=function(e){this.remCompound(e.zpp_inner)},si.prototype.constraints_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(e),this.addConstraint(e.zpp_inner),!0)},si.prototype.constraints_subber=function(e){this.remConstraint(e.zpp_inner)},si.prototype.listeners_adder=function(e){return e.zpp_inner.space!=this&&(null!=e.zpp_inner.space&&e.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(e),this.addListener(e.zpp_inner),!0)},si.prototype.listeners_subber=function(e){this.remListener(e.zpp_inner)},si.prototype.revoke_listener=function(e){},si.prototype.unrevoke_listener=function(e){},si.prototype.addListener=function(e){e.space=this,e.addedToSpace()},si.prototype.remListener=function(e){e.removedFromSpace(),e.space=null},si.prototype.add_callbackset=function(e){var t,i=e.int1.cbsets;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var n=t;n.next=i.head,i.head=n,i.modified=!0,i.length++;var r,o=e.int2.cbsets;null==Ni.zpp_pool?r=new Ni:(r=Ni.zpp_pool,Ni.zpp_pool=r.next,r.next=null),r.elt=e;var a=r;a.next=o.head,o.head=a,o.modified=!0,o.length++;var s=this.callbackset_list;e._inuse=!0,e.next=s.next,s.next=e,s.modified=!0,s.length++},si.prototype.remove_callbackset=function(e){e.lazydel=!0;for(var t=e.int1.cbsets,i=null,n=t.head;null!=n;){if(n.elt==e){var r,o;null==i?(o=(r=t.head).next,t.head=o,null==t.head&&(t.pushmod=!0)):(o=(r=i.next).next,null==(i.next=o)&&(t.pushmod=!0));var a=r;a.elt=null,a.next=Ni.zpp_pool,Ni.zpp_pool=a,t.modified=!0,t.length--,t.pushmod=!0;break}n=(i=n).next}for(var s=e.int2.cbsets,l=null,p=s.head;null!=p;){if(p.elt==e){var h,u;null==l?(u=(h=s.head).next,s.head=u,null==s.head&&(s.pushmod=!0)):(u=(h=l.next).next,null==(l.next=u)&&(s.pushmod=!0));var c=h;c.elt=null,c.next=Ni.zpp_pool,Ni.zpp_pool=c,s.modified=!0,s.length--,s.pushmod=!0;break}p=(l=p).next}},si.prototype.transmitType=function(e,t){e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1)),2==e.type?this.live.remove(e):3==e.type?(this.kinematics.remove(e),this.staticsleep.remove(e)):1==e.type&&this.staticsleep.remove(e),e.type=t,3==e.type&&this.kinematics.add(e),1==e.type&&this.static_validation(e),e.component.sleeping=!0,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0))},si.prototype.added_shape=function(e,t){if(null==t&&(t=!1),!t){var i=e.body;i.world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1))}this.bphase.insert(e),e.addedToSpace()},si.prototype.removed_shape=function(e,t){null==t&&(t=!1);var i=e.body;t||i.wake();for(var n=null,r=i.arbiters.head;null!=r;){var o=r.elt;if(o.ws1!=e&&o.ws2!=e)r=(n=r).next;else{if(0!=o.present){this.MRCA_chains(o.ws1,o.ws2);for(var a=this.mrca1.head;null!=a;){for(var s=a.elt,l=this.mrca2.head;null!=l;){var p=l.elt,h=s.cbSet,u=p.cbSet;h.validate(),u.validate();for(var c,d=null,_=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=_;){var y=_.elt;if(y.a==h&&y.b==u||y.a==u&&y.b==h){d=y;break}_=_.next}if(null==d)null==No.zpp_pool?c=new No:(c=No.zpp_pool,No.zpp_pool=c.next,c.next=null),c.zip_listeners=!0,jo.setlt(h,u)?(c.a=h,c.b=u):(c.a=u,c.b=h),d=c,h.cbpairs.add(d),u!=h&&u.cbpairs.add(d);if(d.zip_listeners&&(d.zip_listeners=!1,d.__validate()),null!=d.listeners.head){var m=qo.get(s,p);m.remove_arb(o),o.present--;for(var f,x=null,v=(h.cbpairs.length<u.cbpairs.length?h.cbpairs:u.cbpairs).head;null!=v;){var z=v.elt;if(z.a==h&&z.b==u||z.a==u&&z.b==h){x=z;break}v=v.next}if(null==x)null==No.zpp_pool?f=new No:(f=No.zpp_pool,No.zpp_pool=f.next,f.next=null),f.zip_listeners=!0,jo.setlt(h,u)?(f.a=h,f.b=u):(f.a=u,f.b=h),x=f,h.cbpairs.add(x),u!=h&&u.cbpairs.add(x);x.zip_listeners&&(x.zip_listeners=!1,x.__validate());for(var g=x.listeners.head;null!=g;){var b=g.elt;if(1==b.event&&0!=(b.itype&o.type)&&m.empty_arb(b.itype)){var w=this.push_callback(b);w.event=1;var S,C=m.int1,M=m.int2,P=b.options1,k=C.cbTypes;if(P.nonemptyintersection(k,P.includes)&&!P.nonemptyintersection(k,P.excludes)){var T=b.options2,O=M.cbTypes;S=!!T.nonemptyintersection(O,T.includes)&&!T.nonemptyintersection(O,T.excludes)}else S=!1;S?(w.int1=C,w.int2=M):(w.int1=M,w.int2=C),w.set=m}g=g.next}null==m.arbiters.head&&this.remove_callbackset(m),l=l.next}else l=l.next}a=a.next}}if(o.b1!=i&&2==o.b1.type){var A=o.b1;A.world||(A.component.waket=this.stamp+(this.midstep?0:1),3==A.type&&(A.kinematicDelaySleep=!0),A.component.sleeping&&this.really_wake(A,!1))}if(o.b2!=i&&2==o.b2.type){var E=o.b2;E.world||(E.component.waket=this.stamp+(this.midstep?0:1),3==E.type&&(E.kinematicDelaySleep=!0),E.component.sleeping&&this.really_wake(E,!1))}if(o.cleared=!0,null==i||o.b2==i)for(var G=o.b1.arbiters,I=null,B=G.head;null!=B;){if(B.elt==o){var L,D;null==I?(D=(L=G.head).next,G.head=D,null==G.head&&(G.pushmod=!0)):(D=(L=I.next).next,null==(I.next=D)&&(G.pushmod=!0));var R=L;R.elt=null,R.next=Ko.zpp_pool,Ko.zpp_pool=R,G.modified=!0,G.length--,G.pushmod=!0;break}B=(I=B).next}if(null==i||o.b1==i)for(var F=o.b2.arbiters,j=null,N=F.head;null!=N;){if(N.elt==o){var U,V;null==j?(V=(U=F.head).next,F.head=V,null==F.head&&(F.pushmod=!0)):(V=(U=j.next).next,null==(j.next=V)&&(F.pushmod=!0));var H=U;H.elt=null,H.next=Ko.zpp_pool,Ko.zpp_pool=H,F.modified=!0,F.length--,F.pushmod=!0;break}N=(j=N).next}null!=o.pair&&(o.pair.arb=null,o.pair=null),o.active=!1,this.f_arbiters.modified=!0,r=i.arbiters.erase(n)}}this.bphase.remove(e),e.removedFromSpace()},si.prototype.addConstraint=function(e){e.space=this,e.addedToSpace(),e.active&&(e.component.sleeping=!0,this.wake_constraint(e,!0))},si.prototype.remConstraint=function(e){e.active&&(this.wake_constraint(e,!0),this.live_constraints.remove(e)),e.removedFromSpace(),e.space=null},si.prototype.addCompound=function(e){e.space=this,e.addedToSpace();for(var t=e.bodies.head;null!=t;)this.addBody(t.elt),t=t.next;for(var i=e.constraints.head;null!=i;)this.addConstraint(i.elt),i=i.next;for(var n=e.compounds.head;null!=n;)this.addCompound(n.elt),n=n.next},si.prototype.remCompound=function(e){for(var t=e.bodies.head;null!=t;)this.remBody(t.elt),t=t.next;for(var i=e.constraints.head;null!=i;)this.remConstraint(i.elt),i=i.next;for(var n=e.compounds.head;null!=n;)this.remCompound(n.elt),n=n.next;e.removedFromSpace(),e.space=null},si.prototype.addBody=function(e,t){null==t&&(t=-1),e.space=this,e.addedToSpace(),e.component.sleeping=!0,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0));for(var i=e.shapes.head;null!=i;){var n=i.elt;this.bphase.insert(n),n.addedToSpace(),i=i.next}1==e.type?this.static_validation(e):2!=e.type&&3!=t&&this.kinematics.add(e)},si.prototype.remBody=function(e,t){null==t&&(t=-1),1==e.type?(e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.staticsleep.remove(e)):2==e.type?(e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.live.remove(e)):(3!=t&&this.kinematics.remove(e),e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!0)),this.staticsleep.remove(e));for(var i=e.shapes.head;null!=i;)this.removed_shape(i.elt,!0),i=i.next;e.removedFromSpace(),e.space=null},si.prototype.shapesUnderPoint=function(e,t,i,n){return this.bphase.shapesUnderPoint(e,t,i,n)},si.prototype.bodiesUnderPoint=function(e,t,i,n){return this.bphase.bodiesUnderPoint(e,t,i,n)},si.prototype.shapesInAABB=function(e,t,i,n,r){return this.bphase.shapesInAABB(e.zpp_inner,t,i,n,r)},si.prototype.bodiesInAABB=function(e,t,i,n,r){return this.bphase.bodiesInAABB(e.zpp_inner,t,i,n,r)},si.prototype.shapesInCircle=function(e,t,i,n,r){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=e.zpp_inner;return null!=s._validate&&s._validate(),this.bphase.shapesInCircle(a,e.zpp_inner.y,t,i,n,r)},si.prototype.bodiesInCircle=function(e,t,i,n,r){var o=e.zpp_inner;null!=o._validate&&o._validate();var a=e.zpp_inner.x,s=e.zpp_inner;return null!=s._validate&&s._validate(),this.bphase.bodiesInCircle(a,e.zpp_inner.y,t,i,n,r)},si.prototype.shapesInShape=function(e,t,i,n){return this.bphase.shapesInShape(e,t,i,n)},si.prototype.bodiesInShape=function(e,t,i,n){return this.bphase.bodiesInShape(e,t,i,n)},si.prototype.rayCast=function(e,t,i){return this.bphase.rayCast(e.zpp_inner,t,null==i?null:i.zpp_inner)},si.prototype.rayMultiCast=function(e,t,i,n){return this.bphase.rayMultiCast(e.zpp_inner,t,null==i?null:i.zpp_inner,n)},si.prototype.convexShapeList=null,si.prototype.convexCast=function(e,t,i,n){var r;if(null==Vt.zpp_pool?r=new Vt:(r=Vt.zpp_pool,Vt.zpp_pool=r.next,r.next=null),r.failed=!1,r.s1=r.s2=null,r.arbiter=null,0==e.type){var o=e.circle;if(o.zip_worldCOM&&null!=o.body){if(o.zip_worldCOM=!1,o.zip_localCOM){if(o.zip_localCOM=!1,1==o.type){var a=o.polygon;if(null==a.lverts.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y;else if(null==a.lverts.next.next.next)a.localCOMx=a.lverts.next.x,a.localCOMy=a.lverts.next.y,a.localCOMx+=a.lverts.next.next.x,a.localCOMy+=a.lverts.next.next.y,a.localCOMx*=.5,a.localCOMy*=.5;else{a.localCOMx=0;var s=a.localCOMy=0,l=a.lverts.next,p=l,h=l=l.next;for(l=l.next;null!=l;){var u=l;s+=h.x*(u.y-p.y);var c=u.y*h.x-u.x*h.y;a.localCOMx+=(h.x+u.x)*c,a.localCOMy+=(h.y+u.y)*c,p=h,h=u,l=l.next}var d=l=a.lverts.next;s+=h.x*(d.y-p.y);var _=d.y*h.x-d.x*h.y;a.localCOMx+=(h.x+d.x)*_,a.localCOMy+=(h.y+d.y)*_,p=h;var y=l=l.next;s+=d.x*(y.y-p.y);var m=y.y*d.x-y.x*d.y;a.localCOMx+=(d.x+y.x)*m,a.localCOMy+=(d.y+y.y)*m;var f=s=1/(3*s);a.localCOMx*=f,a.localCOMy*=f}}null!=o.wrap_localCOM&&(o.wrap_localCOM.zpp_inner.x=o.localCOMx,o.wrap_localCOM.zpp_inner.y=o.localCOMy)}var x=o.body;x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot)),o.worldCOMx=o.body.posx+(o.body.axisy*o.localCOMx-o.body.axisx*o.localCOMy),o.worldCOMy=o.body.posy+(o.localCOMx*o.body.axisx+o.localCOMy*o.body.axisy)}}else{var v=e.polygon;if(v.zip_gaxi&&null!=v.body){v.zip_gaxi=!1,v.validate_laxi();var z=v.body;if(z.zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot)),v.zip_gverts&&null!=v.body){v.zip_gverts=!1,v.validate_lverts();var g=v.body;g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot));for(var b=v.lverts.next,w=v.gverts.next;null!=w;){var S=w,C=b;b=b.next,S.x=v.body.posx+(v.body.axisy*C.x-v.body.axisx*C.y),S.y=v.body.posy+(C.x*v.body.axisx+C.y*v.body.axisy),w=w.next}}var M=v.edges.head,P=v.gverts.next,k=P;for(P=P.next;null!=P;){var T=P,O=M.elt;M=M.next,O.gp0=k,O.gp1=T,O.gnormx=v.body.axisy*O.lnormx-v.body.axisx*O.lnormy,O.gnormy=O.lnormx*v.body.axisx+O.lnormy*v.body.axisy,O.gprojection=v.body.posx*O.gnormx+v.body.posy*O.gnormy+O.lprojection,null!=O.wrap_gnorm&&(O.wrap_gnorm.zpp_inner.x=O.gnormx,O.wrap_gnorm.zpp_inner.y=O.gnormy),O.tp0=O.gp0.y*O.gnormx-O.gp0.x*O.gnormy,O.tp1=O.gp1.y*O.gnormx-O.gp1.x*O.gnormy,k=T,P=P.next}var A=M.elt;A.gp0=k,A.gp1=v.gverts.next,A.gnormx=v.body.axisy*A.lnormx-v.body.axisx*A.lnormy,A.gnormy=A.lnormx*v.body.axisx+A.lnormy*v.body.axisy,A.gprojection=v.body.posx*A.gnormx+v.body.posy*A.gnormy+A.lprojection,null!=A.wrap_gnorm&&(A.wrap_gnorm.zpp_inner.x=A.gnormx,A.wrap_gnorm.zpp_inner.y=A.gnormy),A.tp0=A.gp0.y*A.gnormx-A.gp0.x*A.gnormy,A.tp1=A.gp1.y*A.gnormx-A.gp1.x*A.gnormy}}var E=e.body,G=E.posx,I=E.posy;E.sweepTime=0,E.sweep_angvel=E.angvel;var B=t-E.sweepTime;if(0!=B&&(E.sweepTime=t,E.posx+=E.velx*B,E.posy+=E.vely*B,0!=E.angvel)){var L=E.sweep_angvel*B;if(E.rot+=L,1e-4<L*L)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var D=L*L,R=1-.5*D,F=1-D*D/8,j=(R*E.axisx+L*E.axisy)*F;E.axisy=(R*E.axisy-L*E.axisx)*F,E.axisx=j}}var N=E.posx,U=E.posy;e.validate_sweepRadius();var V,H=e.sweepRadius;null==Ao.zpp_pool?V=new Ao:(V=Ao.zpp_pool,Ao.zpp_pool=V.next,V.next=null),V.minx=(G<N?G:N)-H,V.maxx=(N<G?G:N)+H,V.miny=(I<U?I:U)-H,V.maxy=(U<I?I:U)+H;var W=this.convexShapeList=this.bphase.shapesInAABB(V,!1,!1,null==i?null:i.zpp_inner,this.convexShapeList),X=V;null!=X.outer&&(X.outer.zpp_inner=null,X.outer=null),X.wrap_min=X.wrap_max=null,X._invalidate=null,X._validate=null,X.next=Ao.zpp_pool,Ao.zpp_pool=X;var q=0,Y=0,K=Y=q=0,Z=0;Z=K=0;var J=null,Q=t+1;W.zpp_inner.valmod();for(var $=ut.get(W);;){$.zpp_inner.zpp_inner.valmod();var ee=$.zpp_inner;ee.zpp_inner.valmod(),ee.zpp_inner.zip_length&&(ee.zpp_inner.zip_length=!1,ee.zpp_inner.user_length=ee.zpp_inner.inner.length);var te,ie=ee.zpp_inner.user_length;if($.zpp_critical=!0,$.zpp_i<ie?te=!0:($.zpp_next=ut.zpp_pool,(ut.zpp_pool=$).zpp_inner=null,te=!1),!te)break;$.zpp_critical=!1;var ne=$.zpp_inner.at($.zpp_i++);if(ne!=e.outer&&(null!=ne.zpp_inner.body?ne.zpp_inner.body.outer:null)!=E.outer){if(r.s1=e,r.s2=ne.zpp_inner,n){ne.zpp_inner.validate_sweepRadius(),(null!=ne.zpp_inner.body?ne.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=ne.zpp_inner.body?ne.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=ne.zpp_inner.body?ne.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,Ht.dynamicSweep(r,t,0,0,!0);var re=(null!=ne.zpp_inner.body?ne.zpp_inner.body.outer:null).zpp_inner,oe=0-re.sweepTime;if(0!=oe&&(re.sweepTime=0,re.posx+=re.velx*oe,re.posy+=re.vely*oe,0!=re.angvel)){var ae=re.sweep_angvel*oe;if(re.rot+=ae,1e-4<ae*ae)re.axisx=Math.sin(re.rot),re.axisy=Math.cos(re.rot);else{var se=ae*ae,le=1-.5*se,pe=1-se*se/8,he=(le*re.axisx+ae*re.axisy)*pe;re.axisy=(le*re.axisy-ae*re.axisx)*pe,re.axisx=he}}var ue=(null!=ne.zpp_inner.body?ne.zpp_inner.body.outer:null).zpp_inner,ce=ne.zpp_inner;if(0==ce.type)ce.worldCOMx=ue.posx+(ue.axisy*ce.localCOMx-ue.axisx*ce.localCOMy),ce.worldCOMy=ue.posy+(ce.localCOMx*ue.axisx+ce.localCOMy*ue.axisy);else{for(var de=ce.polygon,_e=de.lverts.next,ye=de.gverts.next;null!=ye;){var me=ye,fe=_e;_e=_e.next,me.x=ue.posx+(ue.axisy*fe.x-ue.axisx*fe.y),me.y=ue.posy+(fe.x*ue.axisx+fe.y*ue.axisy),ye=ye.next}var xe=de.edges.head,ve=de.gverts.next,ze=ve;for(ve=ve.next;null!=ve;){var ge=ve,be=xe.elt;xe=xe.next,be.gnormx=ue.axisy*be.lnormx-ue.axisx*be.lnormy,be.gnormy=be.lnormx*ue.axisx+be.lnormy*ue.axisy,be.gprojection=ue.posx*be.gnormx+ue.posy*be.gnormy+be.lprojection,be.tp0=ze.y*be.gnormx-ze.x*be.gnormy,be.tp1=ge.y*be.gnormx-ge.x*be.gnormy,ze=ge,ve=ve.next}var we=de.gverts.next,Se=xe.elt;Se.gnormx=ue.axisy*Se.lnormx-ue.axisx*Se.lnormy,Se.gnormy=Se.lnormx*ue.axisx+Se.lnormy*ue.axisy,Se.gprojection=ue.posx*Se.gnormx+ue.posy*Se.gnormy+Se.lprojection,Se.tp0=ze.y*Se.gnormx-ze.x*Se.gnormy,Se.tp1=we.y*Se.gnormx-we.x*Se.gnormy}}else Ht.staticSweep(r,t,0,0);r.toi*=t,0<r.toi&&r.toi<Q&&(Q=r.toi,q=r.axis.x,Y=r.axis.y,K=r.c2.x,Z=r.c2.y,J=ne)}}W.clear();var Ce=r;Ce.next=Vt.zpp_pool,Vt.zpp_pool=Ce;var Me=0-E.sweepTime;if(0!=Me&&(E.sweepTime=0,E.posx+=E.velx*Me,E.posy+=E.vely*Me,0!=E.angvel)){var Pe=E.sweep_angvel*Me;if(E.rot+=Pe,1e-4<Pe*Pe)E.axisx=Math.sin(E.rot),E.axisy=Math.cos(E.rot);else{var ke=Pe*Pe,Te=1-.5*ke,Oe=1-ke*ke/8,Ae=(Te*E.axisx+Pe*E.axisy)*Oe;E.axisy=(Te*E.axisy-Pe*E.axisx)*Oe,E.axisx=Ae}}if(0==e.type)e.worldCOMx=E.posx+(E.axisy*e.localCOMx-E.axisx*e.localCOMy),e.worldCOMy=E.posy+(e.localCOMx*E.axisx+e.localCOMy*E.axisy);else{for(var Ee=e.polygon,Ge=Ee.lverts.next,Ie=Ee.gverts.next;null!=Ie;){var Be=Ie,Le=Ge;Ge=Ge.next,Be.x=E.posx+(E.axisy*Le.x-E.axisx*Le.y),Be.y=E.posy+(Le.x*E.axisx+Le.y*E.axisy),Ie=Ie.next}var De=Ee.edges.head,Re=Ee.gverts.next,Fe=Re;for(Re=Re.next;null!=Re;){var je=Re,Ne=De.elt;De=De.next,Ne.gnormx=E.axisy*Ne.lnormx-E.axisx*Ne.lnormy,Ne.gnormy=Ne.lnormx*E.axisx+Ne.lnormy*E.axisy,Ne.gprojection=E.posx*Ne.gnormx+E.posy*Ne.gnormy+Ne.lprojection,Ne.tp0=Fe.y*Ne.gnormx-Fe.x*Ne.gnormy,Ne.tp1=je.y*Ne.gnormx-je.x*Ne.gnormy,Fe=je,Re=Re.next}var Ue=Ee.gverts.next,Ve=De.elt;Ve.gnormx=E.axisy*Ve.lnormx-E.axisx*Ve.lnormy,Ve.gnormy=Ve.lnormx*E.axisx+Ve.lnormy*E.axisy,Ve.gprojection=E.posx*Ve.gnormx+E.posy*Ve.gnormy+Ve.lprojection,Ve.tp0=Fe.y*Ve.gnormx-Fe.x*Ve.gnormy,Ve.tp1=Ue.y*Ve.gnormx-Ue.x*Ve.gnormy}if(Q<=t){var He,We=-q,Xe=-Y;if(null==jn.poolVec2?He=new ht:(He=jn.poolVec2,jn.poolVec2=He.zpp_pool,He.zpp_pool=null),null==He.zpp_inner){var qe;null==el.zpp_pool?qe=new el:(qe=el.zpp_pool,el.zpp_pool=qe.next,qe.next=null),qe.weak=!1,qe._immutable=!1,qe.x=We,qe.y=Xe,He.zpp_inner=qe,He.zpp_inner.outer=He}else{var Ye,Ke=He.zpp_inner;if(null!=Ke._validate&&Ke._validate(),He.zpp_inner.x==We){var Ze=He.zpp_inner;null!=Ze._validate&&Ze._validate(),Ye=He.zpp_inner.y==Xe}else Ye=!1;if(!Ye){He.zpp_inner.x=We,He.zpp_inner.y=Xe;var Je=He.zpp_inner;null!=Je._invalidate&&Je._invalidate(Je)}}He.zpp_inner.weak=!1;var Qe,$e=He;if(null==jn.poolVec2?Qe=new ht:(Qe=jn.poolVec2,jn.poolVec2=Qe.zpp_pool,Qe.zpp_pool=null),null==Qe.zpp_inner){var et;null==el.zpp_pool?et=new el:(et=el.zpp_pool,el.zpp_pool=et.next,et.next=null),et.weak=!1,et._immutable=!1,et.x=K,et.y=Z,Qe.zpp_inner=et,Qe.zpp_inner.outer=Qe}else{var tt,it=Qe.zpp_inner;if(null!=it._validate&&it._validate(),Qe.zpp_inner.x==K){var nt=Qe.zpp_inner;null!=nt._validate&&nt._validate(),tt=Qe.zpp_inner.y==Z}else tt=!1;if(!tt){Qe.zpp_inner.x=K,Qe.zpp_inner.y=Z;var rt=Qe.zpp_inner;null!=rt._invalidate&&rt._invalidate(rt)}}return Qe.zpp_inner.weak=!1,bt.getConvex($e,Qe,Q,J)}return null},si.prototype.prepareCast=function(e){if(0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var l=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*l,i.localCOMy+=(a.y+s.y)*l,o=a,a=s,r=r.next}var p=r=i.lverts.next;n+=a.x*(p.y-o.y);var h=p.y*a.x-p.x*a.y;i.localCOMx+=(a.x+p.x)*h,i.localCOMy+=(a.y+p.y)*h,o=a;var u=r=r.next;n+=p.x*(u.y-o.y);var c=u.y*p.x-u.x*p.y;i.localCOMx+=(p.x+u.x)*c,i.localCOMy+=(p.y+u.y)*c;var d=n=1/(3*n);i.localCOMx*=d,i.localCOMy*=d}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}}else{var y=e.polygon;if(y.zip_gaxi&&null!=y.body){y.zip_gaxi=!1,y.validate_laxi();var m=y.body;if(m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot)),y.zip_gverts&&null!=y.body){y.zip_gverts=!1,y.validate_lverts();var f=y.body;f.zip_axis&&(f.zip_axis=!1,f.axisx=Math.sin(f.rot),f.axisy=Math.cos(f.rot));for(var x=y.lverts.next,v=y.gverts.next;null!=v;){var z=v,g=x;x=x.next,z.x=y.body.posx+(y.body.axisy*g.x-y.body.axisx*g.y),z.y=y.body.posy+(g.x*y.body.axisx+g.y*y.body.axisy),v=v.next}}var b=y.edges.head,w=y.gverts.next,S=w;for(w=w.next;null!=w;){var C=w,M=b.elt;b=b.next,M.gp0=S,M.gp1=C,M.gnormx=y.body.axisy*M.lnormx-y.body.axisx*M.lnormy,M.gnormy=M.lnormx*y.body.axisx+M.lnormy*y.body.axisy,M.gprojection=y.body.posx*M.gnormx+y.body.posy*M.gnormy+M.lprojection,null!=M.wrap_gnorm&&(M.wrap_gnorm.zpp_inner.x=M.gnormx,M.wrap_gnorm.zpp_inner.y=M.gnormy),M.tp0=M.gp0.y*M.gnormx-M.gp0.x*M.gnormy,M.tp1=M.gp1.y*M.gnormx-M.gp1.x*M.gnormy,S=C,w=w.next}var P=b.elt;P.gp0=S,P.gp1=y.gverts.next,P.gnormx=y.body.axisy*P.lnormx-y.body.axisx*P.lnormy,P.gnormy=P.lnormx*y.body.axisx+P.lnormy*y.body.axisy,P.gprojection=y.body.posx*P.gnormx+y.body.posy*P.gnormy+P.lprojection,null!=P.wrap_gnorm&&(P.wrap_gnorm.zpp_inner.x=P.gnormx,P.wrap_gnorm.zpp_inner.y=P.gnormy),P.tp0=P.gp0.y*P.gnormx-P.gp0.x*P.gnormy,P.tp1=P.gp1.y*P.gnormx-P.gp1.x*P.gnormy}}},si.prototype.convexMultiCast=function(e,t,i,n,r){var o;if(null==Vt.zpp_pool?o=new Vt:(o=Vt.zpp_pool,Vt.zpp_pool=o.next,o.next=null),o.failed=!1,o.s1=o.s2=null,o.arbiter=null,0==e.type){var a=e.circle;if(a.zip_worldCOM&&null!=a.body){if(a.zip_worldCOM=!1,a.zip_localCOM){if(a.zip_localCOM=!1,1==a.type){var s=a.polygon;if(null==s.lverts.next.next)s.localCOMx=s.lverts.next.x,s.localCOMy=s.lverts.next.y;else if(null==s.lverts.next.next.next)s.localCOMx=s.lverts.next.x,s.localCOMy=s.lverts.next.y,s.localCOMx+=s.lverts.next.next.x,s.localCOMy+=s.lverts.next.next.y,s.localCOMx*=.5,s.localCOMy*=.5;else{s.localCOMx=0;var l=s.localCOMy=0,p=s.lverts.next,h=p,u=p=p.next;for(p=p.next;null!=p;){var c=p;l+=u.x*(c.y-h.y);var d=c.y*u.x-c.x*u.y;s.localCOMx+=(u.x+c.x)*d,s.localCOMy+=(u.y+c.y)*d,h=u,u=c,p=p.next}var _=p=s.lverts.next;l+=u.x*(_.y-h.y);var y=_.y*u.x-_.x*u.y;s.localCOMx+=(u.x+_.x)*y,s.localCOMy+=(u.y+_.y)*y,h=u;var m=p=p.next;l+=_.x*(m.y-h.y);var f=m.y*_.x-m.x*_.y;s.localCOMx+=(_.x+m.x)*f,s.localCOMy+=(_.y+m.y)*f;var x=l=1/(3*l);s.localCOMx*=x,s.localCOMy*=x}}null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)}var v=a.body;v.zip_axis&&(v.zip_axis=!1,v.axisx=Math.sin(v.rot),v.axisy=Math.cos(v.rot)),a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy),a.worldCOMy=a.body.posy+(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy)}}else{var z=e.polygon;if(z.zip_gaxi&&null!=z.body){z.zip_gaxi=!1,z.validate_laxi();var g=z.body;if(g.zip_axis&&(g.zip_axis=!1,g.axisx=Math.sin(g.rot),g.axisy=Math.cos(g.rot)),z.zip_gverts&&null!=z.body){z.zip_gverts=!1,z.validate_lverts();var b=z.body;b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot));for(var w=z.lverts.next,S=z.gverts.next;null!=S;){var C=S,M=w;w=w.next,C.x=z.body.posx+(z.body.axisy*M.x-z.body.axisx*M.y),C.y=z.body.posy+(M.x*z.body.axisx+M.y*z.body.axisy),S=S.next}}var P=z.edges.head,k=z.gverts.next,T=k;for(k=k.next;null!=k;){var O=k,A=P.elt;P=P.next,A.gp0=T,A.gp1=O,A.gnormx=z.body.axisy*A.lnormx-z.body.axisx*A.lnormy,A.gnormy=A.lnormx*z.body.axisx+A.lnormy*z.body.axisy,A.gprojection=z.body.posx*A.gnormx+z.body.posy*A.gnormy+A.lprojection,null!=A.wrap_gnorm&&(A.wrap_gnorm.zpp_inner.x=A.gnormx,A.wrap_gnorm.zpp_inner.y=A.gnormy),A.tp0=A.gp0.y*A.gnormx-A.gp0.x*A.gnormy,A.tp1=A.gp1.y*A.gnormx-A.gp1.x*A.gnormy,T=O,k=k.next}var E=P.elt;E.gp0=T,E.gp1=z.gverts.next,E.gnormx=z.body.axisy*E.lnormx-z.body.axisx*E.lnormy,E.gnormy=E.lnormx*z.body.axisx+E.lnormy*z.body.axisy,E.gprojection=z.body.posx*E.gnormx+z.body.posy*E.gnormy+E.lprojection,null!=E.wrap_gnorm&&(E.wrap_gnorm.zpp_inner.x=E.gnormx,E.wrap_gnorm.zpp_inner.y=E.gnormy),E.tp0=E.gp0.y*E.gnormx-E.gp0.x*E.gnormy,E.tp1=E.gp1.y*E.gnormx-E.gp1.x*E.gnormy}}var G=e.body,I=G.posx,B=G.posy;G.sweepTime=0,G.sweep_angvel=G.angvel;var L=t-G.sweepTime;if(0!=L&&(G.sweepTime=t,G.posx+=G.velx*L,G.posy+=G.vely*L,0!=G.angvel)){var D=G.sweep_angvel*L;if(G.rot+=D,1e-4<D*D)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var R=D*D,F=1-.5*R,j=1-R*R/8,N=(F*G.axisx+D*G.axisy)*j;G.axisy=(F*G.axisy-D*G.axisx)*j,G.axisx=N}}var U=G.posx,V=G.posy;e.validate_sweepRadius();var H,W=e.sweepRadius;null==Ao.zpp_pool?H=new Ao:(H=Ao.zpp_pool,Ao.zpp_pool=H.next,H.next=null),H.minx=(I<U?I:U)-W,H.maxx=(U<I?I:U)+W,H.miny=(B<V?B:V)-W,H.maxy=(V<B?B:V)+W;var X=this.convexShapeList=this.bphase.shapesInAABB(H,!1,!1,null==i?null:i.zpp_inner,this.convexShapeList),q=H;null!=q.outer&&(q.outer.zpp_inner=null,q.outer=null),q.wrap_min=q.wrap_max=null,q._invalidate=null,q._validate=null,q.next=Ao.zpp_pool,Ao.zpp_pool=q;var Y=null==r?new pt:r;X.zpp_inner.valmod();for(var K=ut.get(X);;){K.zpp_inner.zpp_inner.valmod();var Z=K.zpp_inner;Z.zpp_inner.valmod(),Z.zpp_inner.zip_length&&(Z.zpp_inner.zip_length=!1,Z.zpp_inner.user_length=Z.zpp_inner.inner.length);var J,Q=Z.zpp_inner.user_length;if(K.zpp_critical=!0,K.zpp_i<Q?J=!0:(K.zpp_next=ut.zpp_pool,(ut.zpp_pool=K).zpp_inner=null,J=!1),!J)break;K.zpp_critical=!1;var $=K.zpp_inner.at(K.zpp_i++);if($!=e.outer&&(null!=$.zpp_inner.body?$.zpp_inner.body.outer:null)!=G.outer){if(o.s1=e,o.s2=$.zpp_inner,n){$.zpp_inner.validate_sweepRadius(),(null!=$.zpp_inner.body?$.zpp_inner.body.outer:null).zpp_inner.sweep_angvel=(null!=$.zpp_inner.body?$.zpp_inner.body.outer:null).zpp_inner.angvel,(null!=$.zpp_inner.body?$.zpp_inner.body.outer:null).zpp_inner.sweepTime=0,Ht.dynamicSweep(o,t,0,0,!0);var ee=(null!=$.zpp_inner.body?$.zpp_inner.body.outer:null).zpp_inner,te=0-ee.sweepTime;if(0!=te&&(ee.sweepTime=0,ee.posx+=ee.velx*te,ee.posy+=ee.vely*te,0!=ee.angvel)){var ie=ee.sweep_angvel*te;if(ee.rot+=ie,1e-4<ie*ie)ee.axisx=Math.sin(ee.rot),ee.axisy=Math.cos(ee.rot);else{var ne=ie*ie,re=1-.5*ne,oe=1-ne*ne/8,ae=(re*ee.axisx+ie*ee.axisy)*oe;ee.axisy=(re*ee.axisy-ie*ee.axisx)*oe,ee.axisx=ae}}var se=(null!=$.zpp_inner.body?$.zpp_inner.body.outer:null).zpp_inner,le=$.zpp_inner;if(0==le.type)le.worldCOMx=se.posx+(se.axisy*le.localCOMx-se.axisx*le.localCOMy),le.worldCOMy=se.posy+(le.localCOMx*se.axisx+le.localCOMy*se.axisy);else{for(var pe=le.polygon,he=pe.lverts.next,ue=pe.gverts.next;null!=ue;){var ce=ue,de=he;he=he.next,ce.x=se.posx+(se.axisy*de.x-se.axisx*de.y),ce.y=se.posy+(de.x*se.axisx+de.y*se.axisy),ue=ue.next}var _e=pe.edges.head,ye=pe.gverts.next,me=ye;for(ye=ye.next;null!=ye;){var fe=ye,xe=_e.elt;_e=_e.next,xe.gnormx=se.axisy*xe.lnormx-se.axisx*xe.lnormy,xe.gnormy=xe.lnormx*se.axisx+xe.lnormy*se.axisy,xe.gprojection=se.posx*xe.gnormx+se.posy*xe.gnormy+xe.lprojection,xe.tp0=me.y*xe.gnormx-me.x*xe.gnormy,xe.tp1=fe.y*xe.gnormx-fe.x*xe.gnormy,me=fe,ye=ye.next}var ve=pe.gverts.next,ze=_e.elt;ze.gnormx=se.axisy*ze.lnormx-se.axisx*ze.lnormy,ze.gnormy=ze.lnormx*se.axisx+ze.lnormy*se.axisy,ze.gprojection=se.posx*ze.gnormx+se.posy*ze.gnormy+ze.lprojection,ze.tp0=me.y*ze.gnormx-me.x*ze.gnormy,ze.tp1=ve.y*ze.gnormx-ve.x*ze.gnormy}}else Ht.staticSweep(o,t,0,0);if(o.toi*=t,0<o.toi){var ge,be=-o.axis.x,we=-o.axis.y;if(null==jn.poolVec2?ge=new ht:(ge=jn.poolVec2,jn.poolVec2=ge.zpp_pool,ge.zpp_pool=null),null==ge.zpp_inner){var Se;null==el.zpp_pool?Se=new el:(Se=el.zpp_pool,el.zpp_pool=Se.next,Se.next=null),Se.weak=!1,Se._immutable=!1,Se.x=be,Se.y=we,ge.zpp_inner=Se,ge.zpp_inner.outer=ge}else{var Ce,Me=ge.zpp_inner;if(null!=Me._validate&&Me._validate(),ge.zpp_inner.x==be){var Pe=ge.zpp_inner;null!=Pe._validate&&Pe._validate(),Ce=ge.zpp_inner.y==we}else Ce=!1;if(!Ce){ge.zpp_inner.x=be,ge.zpp_inner.y=we;var ke=ge.zpp_inner;null!=ke._invalidate&&ke._invalidate(ke)}}ge.zpp_inner.weak=!1;var Te,Oe=ge,Ae=o.c2.x,Ee=o.c2.y;if(null==jn.poolVec2?Te=new ht:(Te=jn.poolVec2,jn.poolVec2=Te.zpp_pool,Te.zpp_pool=null),null==Te.zpp_inner){var Ge;null==el.zpp_pool?Ge=new el:(Ge=el.zpp_pool,el.zpp_pool=Ge.next,Ge.next=null),Ge.weak=!1,Ge._immutable=!1,Ge.x=Ae,Ge.y=Ee,Te.zpp_inner=Ge,Te.zpp_inner.outer=Te}else{var Ie,Be=Te.zpp_inner;if(null!=Be._validate&&Be._validate(),Te.zpp_inner.x==Ae){var Le=Te.zpp_inner;null!=Le._validate&&Le._validate(),Ie=Te.zpp_inner.y==Ee}else Ie=!1;if(!Ie){Te.zpp_inner.x=Ae,Te.zpp_inner.y=Ee;var De=Te.zpp_inner;null!=De._invalidate&&De._invalidate(De)}}Te.zpp_inner.weak=!1;for(var Re=bt.getConvex(Oe,Te,o.toi,$),Fe=null,je=Y.zpp_inner.inner.head;null!=je&&!(Re.zpp_inner.toiDistance<je.elt.zpp_inner.toiDistance);)je=(Fe=je).next;var Ne,Ue=Y.zpp_inner.inner;null==dn.zpp_pool?Ne=new dn:(Ne=dn.zpp_pool,dn.zpp_pool=Ne.next,Ne.next=null),Ne.elt=Re;var Ve=Ne;null==Fe?(Ve.next=Ue.head,Ue.head=Ve):(Ve.next=Fe.next,Fe.next=Ve),Ue.pushmod=Ue.modified=!0,Ue.length++}}}X.clear();var He=o;He.next=Vt.zpp_pool,Vt.zpp_pool=He;var We=0-G.sweepTime;if(0!=We&&(G.sweepTime=0,G.posx+=G.velx*We,G.posy+=G.vely*We,0!=G.angvel)){var Xe=G.sweep_angvel*We;if(G.rot+=Xe,1e-4<Xe*Xe)G.axisx=Math.sin(G.rot),G.axisy=Math.cos(G.rot);else{var qe=Xe*Xe,Ye=1-.5*qe,Ke=1-qe*qe/8,Ze=(Ye*G.axisx+Xe*G.axisy)*Ke;G.axisy=(Ye*G.axisy-Xe*G.axisx)*Ke,G.axisx=Ze}}if(0==e.type)e.worldCOMx=G.posx+(G.axisy*e.localCOMx-G.axisx*e.localCOMy),e.worldCOMy=G.posy+(e.localCOMx*G.axisx+e.localCOMy*G.axisy);else{for(var Je=e.polygon,Qe=Je.lverts.next,$e=Je.gverts.next;null!=$e;){var et=$e,tt=Qe;Qe=Qe.next,et.x=G.posx+(G.axisy*tt.x-G.axisx*tt.y),et.y=G.posy+(tt.x*G.axisx+tt.y*G.axisy),$e=$e.next}var it=Je.edges.head,nt=Je.gverts.next,rt=nt;for(nt=nt.next;null!=nt;){var ot=nt,at=it.elt;it=it.next,at.gnormx=G.axisy*at.lnormx-G.axisx*at.lnormy,at.gnormy=at.lnormx*G.axisx+at.lnormy*G.axisy,at.gprojection=G.posx*at.gnormx+G.posy*at.gnormy+at.lprojection,at.tp0=rt.y*at.gnormx-rt.x*at.gnormy,at.tp1=ot.y*at.gnormx-ot.x*at.gnormy,rt=ot,nt=nt.next}var st=Je.gverts.next,lt=it.elt;lt.gnormx=G.axisy*lt.lnormx-G.axisx*lt.lnormy,lt.gnormy=lt.lnormx*G.axisx+lt.lnormy*G.axisy,lt.gprojection=G.posx*lt.gnormx+G.posy*lt.gnormy+lt.lprojection,lt.tp0=rt.y*lt.gnormx-rt.x*lt.gnormy,lt.tp1=st.y*lt.gnormx-st.x*lt.gnormy}return Y},si.prototype.push_callback=function(e){var t;return null==nt.zpp_pool?t=new nt:(t=nt.zpp_pool,nt.zpp_pool=t.next,t.next=null),this.callbacks.push(t),t.listener=e,t},si.prototype.pre_dt=null,si.prototype.step=function(e,t,i){if(this.time+=e,this.pre_dt=e,this.midstep=!0,this.stamp++,this.validation(),this.bphase.broadphase(this,!0),this.prestep(e),this.sortcontacts){var n=this.c_arbiters_false;if(null!=n.head&&null!=n.head.next){for(var r,o,a,s=n.head,l=null,p=null,h=null,u=null,c=1;;){for(r=0,p=s,l=s=null;null!=p;){for(++r,h=p,o=0,a=c;null!=h&&o<c;)++o,h=h.next;for(;0<o||0<a&&null!=h;)0==o?(h=(u=h).next,--a):0==a||null==h?(p=(u=p).next,--o):!p.elt.active||!h.elt.active||p.elt.oc1.dist<h.elt.oc1.dist?(p=(u=p).next,--o):(h=(u=h).next,--a),null!=l?l.next=u:s=u,l=u;p=h}if(l.next=null,c<<=1,!(1<r))break}n.head=s,n.modified=!0,n.pushmod=!0}}this.updateVel(e),this.warmStart(),this.iterateVel(t);for(var d=this.kinematics.head;null!=d;){var _=d.elt;_.pre_posx=_.posx,_.pre_posy=_.posy,_.pre_rot=_.rot,d=d.next}for(var y=this.live.head;null!=y;){var m=y.elt;m.pre_posx=m.posx,m.pre_posy=m.posy,m.pre_rot=m.rot,y=y.next}this.updatePos(e),this.continuous=!0,this.continuousCollisions(e),this.continuous=!1,this.iteratePos(i);for(var f=this.kinematics.head;null!=f;){var x=f.elt,v=!(x.posx==x.pre_posx&&x.posy==x.pre_posy),z=x.pre_rot!=x.rot;if(v){for(var g=x.shapes.head;null!=g;){var b=g.elt;1==b.type&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi()),b.invalidate_worldCOM(),g=g.next}x.zip_worldCOM=!0}if(z){x.zip_axis=!0;for(var w=x.shapes.head;null!=w;){var S=w.elt;1==S.type&&(S.polygon.invalidate_gverts(),S.polygon.invalidate_gaxi()),S.invalidate_worldCOM(),w=w.next}x.zip_worldCOM=!0}f=f.next}for(var C=this.live.head;null!=C;){var M=C.elt,P=!(M.posx==M.pre_posx&&M.posy==M.pre_posy),k=M.pre_rot!=M.rot;if(P){for(var T=M.shapes.head;null!=T;){var O=T.elt;1==O.type&&(O.polygon.invalidate_gverts(),O.polygon.invalidate_gaxi()),O.invalidate_worldCOM(),T=T.next}M.zip_worldCOM=!0}if(k){M.zip_axis=!0;for(var A=M.shapes.head;null!=A;){var E=A.elt;1==E.type&&(E.polygon.invalidate_gverts(),E.polygon.invalidate_gaxi()),E.invalidate_worldCOM(),A=A.next}M.zip_worldCOM=!0}C=C.next}for(var G=null,I=this.staticsleep.head;null!=I;){var B=I.elt;if(3!=B.type||0==B.velx&&0==B.vely&&0==B.angvel){if(B.kinematicDelaySleep){B.kinematicDelaySleep=!1,I=I.next;continue}B.component.sleeping=!0;var L,D,R=this.staticsleep;null==G?(D=(L=R.head).next,R.head=D,null==R.head&&(R.pushmod=!0)):(D=(L=G.next).next,null==(G.next=D)&&(R.pushmod=!0));var F=L;F.elt=null,F.next=Vi.zpp_pool,Vi.zpp_pool=F,R.modified=!0,R.length--,R.pushmod=!0,I=D}else I=(G=I).next}this.doForests(e),this.sleepArbiters(),this.midstep=!1;for(var j=null,N=this.callbackset_list.next;null!=N;){var U=N;if(null!=U.arbiters.head){var V;V=!0;for(var H=U.arbiters.head;null!=H;){if(!H.elt.sleeping){V=!1;break}H=H.next}for(var W,X=V,q=U.int1.cbSet,Y=U.int2.cbSet,K=null,Z=(q.cbpairs.length<Y.cbpairs.length?q.cbpairs:Y.cbpairs).head;null!=Z;){var J=Z.elt;if(J.a==q&&J.b==Y||J.a==Y&&J.b==q){K=J;break}Z=Z.next}if(null==K)null==No.zpp_pool?W=new No:(W=No.zpp_pool,No.zpp_pool=W.next,W.next=null),W.zip_listeners=!0,jo.setlt(q,Y)?(W.a=q,W.b=Y):(W.a=Y,W.b=q),K=W,q.cbpairs.add(K),Y!=q&&Y.cbpairs.add(K);K.zip_listeners&&(K.zip_listeners=!1,K.__validate());for(var Q=K.listeners.head;null!=Q;){var $=Q.elt;if(6==$.event&&(!X||$.allowSleepingCallbacks)&&!U.empty_arb($.itype)){var ee=this.push_callback($);ee.event=6;var te,ie=U.int1,ne=U.int2,re=$.options1,oe=ie.cbTypes;if(re.nonemptyintersection(oe,re.includes)&&!re.nonemptyintersection(oe,re.excludes)){var ae=$.options2,se=ne.cbTypes;te=!!ae.nonemptyintersection(se,ae.includes)&&!ae.nonemptyintersection(se,ae.excludes)}else te=!1;te?(ee.int1=ie,ee.int2=ne):(ee.int1=ne,ee.int2=ie),ee.set=U}Q=Q.next}N=(j=N).next}else{var le,pe,he=this.callbackset_list;null==j?(pe=(le=he.next).next,he.next=pe,null==he.next&&(he.pushmod=!0)):(pe=(le=j.next).next,null==(j.next=pe)&&(he.pushmod=!0)),le._inuse=!1,he.modified=!0,he.length--,he.pushmod=!0,N=pe,U.int1=U.int2=null,U.id=U.di=-1,U.freed=!0,U.next=Yo.zpp_pool,Yo.zpp_pool=U}}for(;!this.callbacks.empty();){var ue=this.callbacks.pop();0==ue.listener.type?ue.listener.body.handler(ue.wrapper_body()):1==ue.listener.type?ue.listener.constraint.handler(ue.wrapper_con()):2==ue.listener.type&&ue.listener.interaction.handleri(ue.wrapper_int()),ue.int1=ue.int2=null,ue.body=null,ue.constraint=null,(ue.listener=null)!=ue.wrap_arbiters&&(ue.wrap_arbiters.zpp_inner.inner=null),ue.set=null,ue.next=nt.zpp_pool,nt.zpp_pool=ue}},si.prototype.toiEvents=null,si.prototype.continuousCollisions=function(e){var t=2*Math.PI/e;this.bphase.broadphase(this,!1);for(var i=0;i<1&&null!=this.toiEvents.head;){for(var n=null,r=2,o=!1,a=null,s=null,l=this.toiEvents.head;null!=l;){var p=l.elt,h=p.s1.body,u=p.s2.body;if(h.sweepFrozen&&u.sweepFrozen){if(0==p.toi||!$s.testCollide_safe(p.s1,p.s2)){l=this.toiEvents.erase(s),p.next=Vt.zpp_pool,Vt.zpp_pool=p;continue}p.toi=0}if(p.frozen1!=h.sweepFrozen||p.frozen2!=u.sweepFrozen){if(p.kinematic){l=this.toiEvents.erase(s),p.next=Vt.zpp_pool,Vt.zpp_pool=p;continue}if(p.frozen1=h.sweepFrozen,p.frozen2=u.sweepFrozen,p.frozen1){var c=p.s1;p.s1=p.s2,p.s2=c,p.frozen1=!1,p.frozen2=!0}if(Ht.staticSweep(p,e,0,Qs.collisionSlopCCD),p.toi<0){l=this.toiEvents.erase(s),p.next=Vt.zpp_pool,Vt.zpp_pool=p;continue}}0<=p.toi&&(p.toi<r||!o&&p.kinematic)&&(r=(n=p).toi,o=p.kinematic,a=s),l=(s=l).next}if(null==n)break;this.toiEvents.erase(a),i=n.toi;var d=n.s1.body,_=n.s2.body;if(!d.sweepFrozen){var y=i*e,m=y-d.sweepTime;if(0!=m&&(d.sweepTime=y,d.posx+=d.velx*m,d.posy+=d.vely*m,0!=d.angvel)){var f=d.sweep_angvel*m;if(d.rot+=f,1e-4<f*f)d.axisx=Math.sin(d.rot),d.axisy=Math.cos(d.rot);else{var x=f*f,v=1-.5*x,z=1-x*x/8,g=(v*d.axisx+f*d.axisy)*z;d.axisy=(v*d.axisy-f*d.axisx)*z,d.axisx=g}}var b=n.s1;if(0==b.type)b.worldCOMx=d.posx+(d.axisy*b.localCOMx-d.axisx*b.localCOMy),b.worldCOMy=d.posy+(b.localCOMx*d.axisx+b.localCOMy*d.axisy);else{for(var w=b.polygon,S=w.lverts.next,C=w.gverts.next;null!=C;){var M=C,P=S;S=S.next,M.x=d.posx+(d.axisy*P.x-d.axisx*P.y),M.y=d.posy+(P.x*d.axisx+P.y*d.axisy),C=C.next}var k=w.edges.head,T=w.gverts.next,O=T;for(T=T.next;null!=T;){var A=T,E=k.elt;k=k.next,E.gnormx=d.axisy*E.lnormx-d.axisx*E.lnormy,E.gnormy=E.lnormx*d.axisx+E.lnormy*d.axisy,E.gprojection=d.posx*E.gnormx+d.posy*E.gnormy+E.lprojection,E.tp0=O.y*E.gnormx-O.x*E.gnormy,E.tp1=A.y*E.gnormx-A.x*E.gnormy,O=A,T=T.next}var G=w.gverts.next,I=k.elt;I.gnormx=d.axisy*I.lnormx-d.axisx*I.lnormy,I.gnormy=I.lnormx*d.axisx+I.lnormy*d.axisy,I.gprojection=d.posx*I.gnormx+d.posy*I.gnormy+I.lprojection,I.tp0=O.y*I.gnormx-O.x*I.gnormy,I.tp1=G.y*I.gnormx-G.x*I.gnormy}}if(!_.sweepFrozen){var B=i*e,L=B-_.sweepTime;if(0!=L&&(_.sweepTime=B,_.posx+=_.velx*L,_.posy+=_.vely*L,0!=_.angvel)){var D=_.sweep_angvel*L;if(_.rot+=D,1e-4<D*D)_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot);else{var R=D*D,F=1-.5*R,j=1-R*R/8,N=(F*_.axisx+D*_.axisy)*j;_.axisy=(F*_.axisy-D*_.axisx)*j,_.axisx=N}}var U=n.s2;if(0==U.type)U.worldCOMx=_.posx+(_.axisy*U.localCOMx-_.axisx*U.localCOMy),U.worldCOMy=_.posy+(U.localCOMx*_.axisx+U.localCOMy*_.axisy);else{for(var V=U.polygon,H=V.lverts.next,W=V.gverts.next;null!=W;){var X=W,q=H;H=H.next,X.x=_.posx+(_.axisy*q.x-_.axisx*q.y),X.y=_.posy+(q.x*_.axisx+q.y*_.axisy),W=W.next}var Y=V.edges.head,K=V.gverts.next,Z=K;for(K=K.next;null!=K;){var J=K,Q=Y.elt;Y=Y.next,Q.gnormx=_.axisy*Q.lnormx-_.axisx*Q.lnormy,Q.gnormy=Q.lnormx*_.axisx+Q.lnormy*_.axisy,Q.gprojection=_.posx*Q.gnormx+_.posy*Q.gnormy+Q.lprojection,Q.tp0=Z.y*Q.gnormx-Z.x*Q.gnormy,Q.tp1=J.y*Q.gnormx-J.x*Q.gnormy,Z=J,K=K.next}var $=V.gverts.next,ee=Y.elt;ee.gnormx=_.axisy*ee.lnormx-_.axisx*ee.lnormy,ee.gnormy=ee.lnormx*_.axisx+ee.lnormy*_.axisy,ee.gprojection=_.posx*ee.gnormx+_.posy*ee.gnormy+ee.lprojection,ee.tp0=Z.y*ee.gnormx-Z.x*ee.gnormy,ee.tp1=$.y*ee.gnormx-$.x*ee.gnormy}}var te=this.narrowPhase(n.s1,n.s2,!0,n.arbiter,!0);if(null==te)null!=n.arbiter&&null!=n.arbiter.pair&&(n.arbiter.pair.arb=null,n.arbiter.pair=null);else if(!this.presteparb(te,e,!0)&&te.type==pn.COL&&te.active&&0!=(1&te.immState)){var ie=te.colarb,ne=ie.nx*ie.c1.jnAcc-ie.ny*ie.c1.jtAcc,re=ie.ny*ie.c1.jnAcc+ie.nx*ie.c1.jtAcc,oe=ie.b1.imass;ie.b1.velx-=ne*oe,ie.b1.vely-=re*oe,ie.b1.angvel-=ie.b1.iinertia*(re*ie.c1.r1x-ne*ie.c1.r1y);var ae=ie.b2.imass;if(ie.b2.velx+=ne*ae,ie.b2.vely+=re*ae,ie.b2.angvel+=ie.b2.iinertia*(re*ie.c1.r2x-ne*ie.c1.r2y),ie.hc2){var se=ie.nx*ie.c2.jnAcc-ie.ny*ie.c2.jtAcc,le=ie.ny*ie.c2.jnAcc+ie.nx*ie.c2.jtAcc,pe=ie.b1.imass;ie.b1.velx-=se*pe,ie.b1.vely-=le*pe,ie.b1.angvel-=ie.b1.iinertia*(le*ie.c2.r1x-se*ie.c2.r1y);var he=ie.b2.imass;ie.b2.velx+=se*he,ie.b2.vely+=le*he,ie.b2.angvel+=ie.b2.iinertia*(le*ie.c2.r2x-se*ie.c2.r2y)}ie.b2.angvel+=ie.jrAcc*ie.b2.iinertia,ie.b1.angvel-=ie.jrAcc*ie.b1.iinertia;var ue,ce,de,_e,ye,me,fe=te.colarb,xe=fe.k1x+fe.b2.velx-fe.c1.r2y*fe.b2.angvel-(fe.b1.velx-fe.c1.r1y*fe.b1.angvel),ve=fe.k1y+fe.b2.vely+fe.c1.r2x*fe.b2.angvel-(fe.b1.vely+fe.c1.r1x*fe.b1.angvel);if(de=(ve*fe.nx-xe*fe.ny+fe.surfacex)*fe.c1.tMass,(_e=fe.c1.friction*fe.c1.jnAcc)<(me=(ye=fe.c1.jtAcc)-de)?me=_e:me<-_e&&(me=-_e),de=me-ye,fe.c1.jtAcc=me,ue=-fe.ny*de,ce=fe.nx*de,fe.b2.velx+=ue*fe.b2.imass,fe.b2.vely+=ce*fe.b2.imass,fe.b1.velx-=ue*fe.b1.imass,fe.b1.vely-=ce*fe.b1.imass,fe.b2.angvel+=fe.rt1b*de*fe.b2.iinertia,fe.b1.angvel-=fe.rt1a*de*fe.b1.iinertia,fe.hc2){var ze=fe.k2x+fe.b2.velx-fe.c2.r2y*fe.b2.angvel-(fe.b1.velx-fe.c2.r1y*fe.b1.angvel),ge=fe.k2y+fe.b2.vely+fe.c2.r2x*fe.b2.angvel-(fe.b1.vely+fe.c2.r1x*fe.b1.angvel);de=(ge*fe.nx-ze*fe.ny+fe.surfacex)*fe.c2.tMass,(_e=fe.c2.friction*fe.c2.jnAcc)<(me=(ye=fe.c2.jtAcc)-de)?me=_e:me<-_e&&(me=-_e),de=me-ye,fe.c2.jtAcc=me,ue=-fe.ny*de,ce=fe.nx*de,fe.b2.velx+=ue*fe.b2.imass,fe.b2.vely+=ce*fe.b2.imass,fe.b1.velx-=ue*fe.b1.imass,fe.b1.vely-=ce*fe.b1.imass,fe.b2.angvel+=fe.rt2b*de*fe.b2.iinertia,fe.b1.angvel-=fe.rt2a*de*fe.b1.iinertia,xe=fe.k1x+fe.b2.velx-fe.c1.r2y*fe.b2.angvel-(fe.b1.velx-fe.c1.r1y*fe.b1.angvel),ve=fe.k1y+fe.b2.vely+fe.c1.r2x*fe.b2.angvel-(fe.b1.vely+fe.c1.r1x*fe.b1.angvel),ze=fe.k2x+fe.b2.velx-fe.c2.r2y*fe.b2.angvel-(fe.b1.velx-fe.c2.r1y*fe.b1.angvel),ge=fe.k2y+fe.b2.vely+fe.c2.r2x*fe.b2.angvel-(fe.b1.vely+fe.c2.r1x*fe.b1.angvel);var be=fe.c1.jnAcc,we=fe.c2.jnAcc,Se=xe*fe.nx+ve*fe.ny+fe.surfacey+fe.c1.bounce-(fe.Ka*be+fe.Kb*we),Ce=ze*fe.nx+ge*fe.ny+fe.surfacey+fe.c2.bounce-(fe.Kb*be+fe.Kc*we),Me=-(fe.kMassa*Se+fe.kMassb*Ce),Pe=-(fe.kMassb*Se+fe.kMassc*Ce);0<=Me&&0<=Pe?(Se=Me-be,Ce=Pe-we,fe.c1.jnAcc=Me,fe.c2.jnAcc=Pe):0<=(Me=-fe.c1.nMass*Se)&&0<=fe.Kb*Me+Ce?(Se=Me-be,Ce=-we,fe.c1.jnAcc=Me,fe.c2.jnAcc=0):0<=(Pe=-fe.c2.nMass*Ce)&&0<=fe.Kb*Pe+Se?(Se=-be,Ce=Pe-we,fe.c1.jnAcc=0,fe.c2.jnAcc=Pe):0<=Se&&0<=Ce?(Se=-be,Ce=-we,fe.c1.jnAcc=fe.c2.jnAcc=0):Ce=Se=0,de=Se+Ce,ue=fe.nx*de,ce=fe.ny*de,fe.b2.velx+=ue*fe.b2.imass,fe.b2.vely+=ce*fe.b2.imass,fe.b1.velx-=ue*fe.b1.imass,fe.b1.vely-=ce*fe.b1.imass,fe.b2.angvel+=(fe.rn1b*Se+fe.rn2b*Ce)*fe.b2.iinertia,fe.b1.angvel-=(fe.rn1a*Se+fe.rn2a*Ce)*fe.b1.iinertia}else 0!=fe.radius&&(de=(fe.b2.angvel-fe.b1.angvel)*fe.rMass,_e=fe.rfric*fe.c1.jnAcc,ye=fe.jrAcc,fe.jrAcc-=de,fe.jrAcc>_e?fe.jrAcc=_e:fe.jrAcc<-_e&&(fe.jrAcc=-_e),de=fe.jrAcc-ye,fe.b2.angvel+=de*fe.b2.iinertia,fe.b1.angvel-=de*fe.b1.iinertia),xe=fe.k1x+fe.b2.velx-fe.c1.r2y*fe.b2.angvel-(fe.b1.velx-fe.c1.r1y*fe.b1.angvel),ve=fe.k1y+fe.b2.vely+fe.c1.r2x*fe.b2.angvel-(fe.b1.vely+fe.c1.r1x*fe.b1.angvel),de=(fe.c1.bounce+(fe.nx*xe+fe.ny*ve)+fe.surfacey)*fe.c1.nMass,(me=(ye=fe.c1.jnAcc)-de)<0&&(me=0),de=me-ye,fe.c1.jnAcc=me,ue=fe.nx*de,ce=fe.ny*de,fe.b2.velx+=ue*fe.b2.imass,fe.b2.vely+=ce*fe.b2.imass,fe.b1.velx-=ue*fe.b1.imass,fe.b1.vely-=ce*fe.b1.imass,fe.b2.angvel+=fe.rn1b*de*fe.b2.iinertia,fe.b1.angvel-=fe.rn1a*de*fe.b1.iinertia;var ke,Te,Oe,Ae,Ee,Ge,Ie=te.colarb,Be=Ie.k1x+Ie.b2.velx-Ie.c1.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c1.r1y*Ie.b1.angvel),Le=Ie.k1y+Ie.b2.vely+Ie.c1.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c1.r1x*Ie.b1.angvel);if(Oe=(Le*Ie.nx-Be*Ie.ny+Ie.surfacex)*Ie.c1.tMass,(Ae=Ie.c1.friction*Ie.c1.jnAcc)<(Ge=(Ee=Ie.c1.jtAcc)-Oe)?Ge=Ae:Ge<-Ae&&(Ge=-Ae),Oe=Ge-Ee,Ie.c1.jtAcc=Ge,ke=-Ie.ny*Oe,Te=Ie.nx*Oe,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=Ie.rt1b*Oe*Ie.b2.iinertia,Ie.b1.angvel-=Ie.rt1a*Oe*Ie.b1.iinertia,Ie.hc2){var De=Ie.k2x+Ie.b2.velx-Ie.c2.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c2.r1y*Ie.b1.angvel),Re=Ie.k2y+Ie.b2.vely+Ie.c2.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c2.r1x*Ie.b1.angvel);Oe=(Re*Ie.nx-De*Ie.ny+Ie.surfacex)*Ie.c2.tMass,(Ae=Ie.c2.friction*Ie.c2.jnAcc)<(Ge=(Ee=Ie.c2.jtAcc)-Oe)?Ge=Ae:Ge<-Ae&&(Ge=-Ae),Oe=Ge-Ee,Ie.c2.jtAcc=Ge,ke=-Ie.ny*Oe,Te=Ie.nx*Oe,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=Ie.rt2b*Oe*Ie.b2.iinertia,Ie.b1.angvel-=Ie.rt2a*Oe*Ie.b1.iinertia,Be=Ie.k1x+Ie.b2.velx-Ie.c1.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c1.r1y*Ie.b1.angvel),Le=Ie.k1y+Ie.b2.vely+Ie.c1.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c1.r1x*Ie.b1.angvel),De=Ie.k2x+Ie.b2.velx-Ie.c2.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c2.r1y*Ie.b1.angvel),Re=Ie.k2y+Ie.b2.vely+Ie.c2.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c2.r1x*Ie.b1.angvel);var Fe=Ie.c1.jnAcc,je=Ie.c2.jnAcc,Ne=Be*Ie.nx+Le*Ie.ny+Ie.surfacey+Ie.c1.bounce-(Ie.Ka*Fe+Ie.Kb*je),Ue=De*Ie.nx+Re*Ie.ny+Ie.surfacey+Ie.c2.bounce-(Ie.Kb*Fe+Ie.Kc*je),Ve=-(Ie.kMassa*Ne+Ie.kMassb*Ue),He=-(Ie.kMassb*Ne+Ie.kMassc*Ue);0<=Ve&&0<=He?(Ne=Ve-Fe,Ue=He-je,Ie.c1.jnAcc=Ve,Ie.c2.jnAcc=He):0<=(Ve=-Ie.c1.nMass*Ne)&&0<=Ie.Kb*Ve+Ue?(Ne=Ve-Fe,Ue=-je,Ie.c1.jnAcc=Ve,Ie.c2.jnAcc=0):0<=(He=-Ie.c2.nMass*Ue)&&0<=Ie.Kb*He+Ne?(Ne=-Fe,Ue=He-je,Ie.c1.jnAcc=0,Ie.c2.jnAcc=He):0<=Ne&&0<=Ue?(Ne=-Fe,Ue=-je,Ie.c1.jnAcc=Ie.c2.jnAcc=0):Ue=Ne=0,Oe=Ne+Ue,ke=Ie.nx*Oe,Te=Ie.ny*Oe,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=(Ie.rn1b*Ne+Ie.rn2b*Ue)*Ie.b2.iinertia,Ie.b1.angvel-=(Ie.rn1a*Ne+Ie.rn2a*Ue)*Ie.b1.iinertia}else 0!=Ie.radius&&(Oe=(Ie.b2.angvel-Ie.b1.angvel)*Ie.rMass,Ae=Ie.rfric*Ie.c1.jnAcc,Ee=Ie.jrAcc,Ie.jrAcc-=Oe,Ie.jrAcc>Ae?Ie.jrAcc=Ae:Ie.jrAcc<-Ae&&(Ie.jrAcc=-Ae),Oe=Ie.jrAcc-Ee,Ie.b2.angvel+=Oe*Ie.b2.iinertia,Ie.b1.angvel-=Oe*Ie.b1.iinertia),Be=Ie.k1x+Ie.b2.velx-Ie.c1.r2y*Ie.b2.angvel-(Ie.b1.velx-Ie.c1.r1y*Ie.b1.angvel),Le=Ie.k1y+Ie.b2.vely+Ie.c1.r2x*Ie.b2.angvel-(Ie.b1.vely+Ie.c1.r1x*Ie.b1.angvel),Oe=(Ie.c1.bounce+(Ie.nx*Be+Ie.ny*Le)+Ie.surfacey)*Ie.c1.nMass,(Ge=(Ee=Ie.c1.jnAcc)-Oe)<0&&(Ge=0),Oe=Ge-Ee,Ie.c1.jnAcc=Ge,ke=Ie.nx*Oe,Te=Ie.ny*Oe,Ie.b2.velx+=ke*Ie.b2.imass,Ie.b2.vely+=Te*Ie.b2.imass,Ie.b1.velx-=ke*Ie.b1.imass,Ie.b1.vely-=Te*Ie.b1.imass,Ie.b2.angvel+=Ie.rn1b*Oe*Ie.b2.iinertia,Ie.b1.angvel-=Ie.rn1a*Oe*Ie.b1.iinertia;var We,Xe,qe,Ye,Ke,Ze,Je=te.colarb,Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel);if(qe=($e*Je.nx-Qe*Je.ny+Je.surfacex)*Je.c1.tMass,(Ye=Je.c1.friction*Je.c1.jnAcc)<(Ze=(Ke=Je.c1.jtAcc)-qe)?Ze=Ye:Ze<-Ye&&(Ze=-Ye),qe=Ze-Ke,Je.c1.jtAcc=Ze,We=-Je.ny*qe,Xe=Je.nx*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=Je.rt1b*qe*Je.b2.iinertia,Je.b1.angvel-=Je.rt1a*qe*Je.b1.iinertia,Je.hc2){var et=Je.k2x+Je.b2.velx-Je.c2.r2y*Je.b2.angvel-(Je.b1.velx-Je.c2.r1y*Je.b1.angvel),tt=Je.k2y+Je.b2.vely+Je.c2.r2x*Je.b2.angvel-(Je.b1.vely+Je.c2.r1x*Je.b1.angvel);qe=(tt*Je.nx-et*Je.ny+Je.surfacex)*Je.c2.tMass,(Ye=Je.c2.friction*Je.c2.jnAcc)<(Ze=(Ke=Je.c2.jtAcc)-qe)?Ze=Ye:Ze<-Ye&&(Ze=-Ye),qe=Ze-Ke,Je.c2.jtAcc=Ze,We=-Je.ny*qe,Xe=Je.nx*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=Je.rt2b*qe*Je.b2.iinertia,Je.b1.angvel-=Je.rt2a*qe*Je.b1.iinertia,Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel),et=Je.k2x+Je.b2.velx-Je.c2.r2y*Je.b2.angvel-(Je.b1.velx-Je.c2.r1y*Je.b1.angvel),tt=Je.k2y+Je.b2.vely+Je.c2.r2x*Je.b2.angvel-(Je.b1.vely+Je.c2.r1x*Je.b1.angvel);var it=Je.c1.jnAcc,nt=Je.c2.jnAcc,rt=Qe*Je.nx+$e*Je.ny+Je.surfacey+Je.c1.bounce-(Je.Ka*it+Je.Kb*nt),ot=et*Je.nx+tt*Je.ny+Je.surfacey+Je.c2.bounce-(Je.Kb*it+Je.Kc*nt),at=-(Je.kMassa*rt+Je.kMassb*ot),st=-(Je.kMassb*rt+Je.kMassc*ot);0<=at&&0<=st?(rt=at-it,ot=st-nt,Je.c1.jnAcc=at,Je.c2.jnAcc=st):0<=(at=-Je.c1.nMass*rt)&&0<=Je.Kb*at+ot?(rt=at-it,ot=-nt,Je.c1.jnAcc=at,Je.c2.jnAcc=0):0<=(st=-Je.c2.nMass*ot)&&0<=Je.Kb*st+rt?(rt=-it,ot=st-nt,Je.c1.jnAcc=0,Je.c2.jnAcc=st):0<=rt&&0<=ot?(rt=-it,ot=-nt,Je.c1.jnAcc=Je.c2.jnAcc=0):ot=rt=0,qe=rt+ot,We=Je.nx*qe,Xe=Je.ny*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=(Je.rn1b*rt+Je.rn2b*ot)*Je.b2.iinertia,Je.b1.angvel-=(Je.rn1a*rt+Je.rn2a*ot)*Je.b1.iinertia}else 0!=Je.radius&&(qe=(Je.b2.angvel-Je.b1.angvel)*Je.rMass,Ye=Je.rfric*Je.c1.jnAcc,Ke=Je.jrAcc,Je.jrAcc-=qe,Je.jrAcc>Ye?Je.jrAcc=Ye:Je.jrAcc<-Ye&&(Je.jrAcc=-Ye),qe=Je.jrAcc-Ke,Je.b2.angvel+=qe*Je.b2.iinertia,Je.b1.angvel-=qe*Je.b1.iinertia),Qe=Je.k1x+Je.b2.velx-Je.c1.r2y*Je.b2.angvel-(Je.b1.velx-Je.c1.r1y*Je.b1.angvel),$e=Je.k1y+Je.b2.vely+Je.c1.r2x*Je.b2.angvel-(Je.b1.vely+Je.c1.r1x*Je.b1.angvel),qe=(Je.c1.bounce+(Je.nx*Qe+Je.ny*$e)+Je.surfacey)*Je.c1.nMass,(Ze=(Ke=Je.c1.jnAcc)-qe)<0&&(Ze=0),qe=Ze-Ke,Je.c1.jnAcc=Ze,We=Je.nx*qe,Xe=Je.ny*qe,Je.b2.velx+=We*Je.b2.imass,Je.b2.vely+=Xe*Je.b2.imass,Je.b1.velx-=We*Je.b1.imass,Je.b1.vely-=Xe*Je.b1.imass,Je.b2.angvel+=Je.rn1b*qe*Je.b2.iinertia,Je.b1.angvel-=Je.rn1a*qe*Je.b1.iinertia;var lt,pt,ht,ut,ct,dt,_t=te.colarb,yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),mt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel);if(ht=(mt*_t.nx-yt*_t.ny+_t.surfacex)*_t.c1.tMass,(ut=_t.c1.friction*_t.c1.jnAcc)<(dt=(ct=_t.c1.jtAcc)-ht)?dt=ut:dt<-ut&&(dt=-ut),ht=dt-ct,_t.c1.jtAcc=dt,lt=-_t.ny*ht,pt=_t.nx*ht,_t.b2.velx+=lt*_t.b2.imass,_t.b2.vely+=pt*_t.b2.imass,_t.b1.velx-=lt*_t.b1.imass,_t.b1.vely-=pt*_t.b1.imass,_t.b2.angvel+=_t.rt1b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rt1a*ht*_t.b1.iinertia,_t.hc2){var ft=_t.k2x+_t.b2.velx-_t.c2.r2y*_t.b2.angvel-(_t.b1.velx-_t.c2.r1y*_t.b1.angvel),xt=_t.k2y+_t.b2.vely+_t.c2.r2x*_t.b2.angvel-(_t.b1.vely+_t.c2.r1x*_t.b1.angvel);ht=(xt*_t.nx-ft*_t.ny+_t.surfacex)*_t.c2.tMass,(ut=_t.c2.friction*_t.c2.jnAcc)<(dt=(ct=_t.c2.jtAcc)-ht)?dt=ut:dt<-ut&&(dt=-ut),ht=dt-ct,_t.c2.jtAcc=dt,lt=-_t.ny*ht,pt=_t.nx*ht,_t.b2.velx+=lt*_t.b2.imass,_t.b2.vely+=pt*_t.b2.imass,_t.b1.velx-=lt*_t.b1.imass,_t.b1.vely-=pt*_t.b1.imass,_t.b2.angvel+=_t.rt2b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rt2a*ht*_t.b1.iinertia,yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),mt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel),ft=_t.k2x+_t.b2.velx-_t.c2.r2y*_t.b2.angvel-(_t.b1.velx-_t.c2.r1y*_t.b1.angvel),xt=_t.k2y+_t.b2.vely+_t.c2.r2x*_t.b2.angvel-(_t.b1.vely+_t.c2.r1x*_t.b1.angvel);var vt=_t.c1.jnAcc,zt=_t.c2.jnAcc,gt=yt*_t.nx+mt*_t.ny+_t.surfacey+_t.c1.bounce-(_t.Ka*vt+_t.Kb*zt),bt=ft*_t.nx+xt*_t.ny+_t.surfacey+_t.c2.bounce-(_t.Kb*vt+_t.Kc*zt),wt=-(_t.kMassa*gt+_t.kMassb*bt),St=-(_t.kMassb*gt+_t.kMassc*bt);0<=wt&&0<=St?(gt=wt-vt,bt=St-zt,_t.c1.jnAcc=wt,_t.c2.jnAcc=St):0<=(wt=-_t.c1.nMass*gt)&&0<=_t.Kb*wt+bt?(gt=wt-vt,bt=-zt,_t.c1.jnAcc=wt,_t.c2.jnAcc=0):0<=(St=-_t.c2.nMass*bt)&&0<=_t.Kb*St+gt?(gt=-vt,bt=St-zt,_t.c1.jnAcc=0,_t.c2.jnAcc=St):0<=gt&&0<=bt?(gt=-vt,bt=-zt,_t.c1.jnAcc=_t.c2.jnAcc=0):bt=gt=0,ht=gt+bt,lt=_t.nx*ht,pt=_t.ny*ht,_t.b2.velx+=lt*_t.b2.imass,_t.b2.vely+=pt*_t.b2.imass,_t.b1.velx-=lt*_t.b1.imass,_t.b1.vely-=pt*_t.b1.imass,_t.b2.angvel+=(_t.rn1b*gt+_t.rn2b*bt)*_t.b2.iinertia,_t.b1.angvel-=(_t.rn1a*gt+_t.rn2a*bt)*_t.b1.iinertia}else 0!=_t.radius&&(ht=(_t.b2.angvel-_t.b1.angvel)*_t.rMass,ut=_t.rfric*_t.c1.jnAcc,ct=_t.jrAcc,_t.jrAcc-=ht,_t.jrAcc>ut?_t.jrAcc=ut:_t.jrAcc<-ut&&(_t.jrAcc=-ut),ht=_t.jrAcc-ct,_t.b2.angvel+=ht*_t.b2.iinertia,_t.b1.angvel-=ht*_t.b1.iinertia),yt=_t.k1x+_t.b2.velx-_t.c1.r2y*_t.b2.angvel-(_t.b1.velx-_t.c1.r1y*_t.b1.angvel),mt=_t.k1y+_t.b2.vely+_t.c1.r2x*_t.b2.angvel-(_t.b1.vely+_t.c1.r1x*_t.b1.angvel),ht=(_t.c1.bounce+(_t.nx*yt+_t.ny*mt)+_t.surfacey)*_t.c1.nMass,(dt=(ct=_t.c1.jnAcc)-ht)<0&&(dt=0),ht=dt-ct,_t.c1.jnAcc=dt,lt=_t.nx*ht,pt=_t.ny*ht,_t.b2.velx+=lt*_t.b2.imass,_t.b2.vely+=pt*_t.b2.imass,_t.b1.velx-=lt*_t.b1.imass,_t.b1.vely-=pt*_t.b1.imass,_t.b2.angvel+=_t.rn1b*ht*_t.b2.iinertia,_t.b1.angvel-=_t.rn1a*ht*_t.b1.iinertia;d.sweep_angvel=d.angvel%t,_.sweep_angvel=_.angvel%t}null!=te&&te.active&&0!=(1&te.immState)&&te.type==pn.COL&&(d.sweepFrozen||3==d.type||(d.sweepFrozen=!0,n.failed?d.angvel=d.sweep_angvel=0:n.slipped?d.angvel=d.sweep_angvel*=Qs.angularCCDSlipScale:d.angvel=d.sweep_angvel),_.sweepFrozen||3==_.type||(_.sweepFrozen=!0,n.failed?_.angvel=_.sweep_angvel=0:n.slipped?_.angvel=_.sweep_angvel*=Qs.angularCCDSlipScale:_.angvel=_.sweep_angvel));var Ct=n;Ct.next=Vt.zpp_pool,Vt.zpp_pool=Ct}for(;null!=this.toiEvents.head;){var Mt=this.toiEvents.pop_unsafe();Mt.next=Vt.zpp_pool,Vt.zpp_pool=Mt}for(var Pt=this.kinematics.head;null!=Pt;){var kt=Pt.elt,Tt=e-kt.sweepTime;if(0!=Tt&&(kt.sweepTime=e,kt.posx+=kt.velx*Tt,kt.posy+=kt.vely*Tt,0!=kt.angvel)){var Ot=kt.sweep_angvel*Tt;if(kt.rot+=Ot,1e-4<Ot*Ot)kt.axisx=Math.sin(kt.rot),kt.axisy=Math.cos(kt.rot);else{var At=Ot*Ot,Et=1-.5*At,Gt=1-At*At/8,It=(Et*kt.axisx+Ot*kt.axisy)*Gt;kt.axisy=(Et*kt.axisy-Ot*kt.axisx)*Gt,kt.axisx=It}}kt.sweepTime=0,Pt=Pt.next}for(var Bt=this.live.head;null!=Bt;){var Lt=Bt.elt;if(!Lt.sweepFrozen){var Dt=e-Lt.sweepTime;if(0!=Dt&&(Lt.sweepTime=e,Lt.posx+=Lt.velx*Dt,Lt.posy+=Lt.vely*Dt,0!=Lt.angvel)){var Rt=Lt.sweep_angvel*Dt;if(Lt.rot+=Rt,1e-4<Rt*Rt)Lt.axisx=Math.sin(Lt.rot),Lt.axisy=Math.cos(Lt.rot);else{var Ft=Rt*Rt,jt=1-.5*Ft,Nt=1-Ft*Ft/8,Ut=(jt*Lt.axisx+Rt*Lt.axisy)*Nt;Lt.axisy=(jt*Lt.axisy-Rt*Lt.axisx)*Nt,Lt.axisx=Ut}}}Lt.sweepTime=0,Bt=Bt.next}},si.prototype.continuousEvent=function(e,t,i,n,r){if(e.body.sweepFrozen&&t.body.sweepFrozen)return n;if(e.body.disableCCD||t.body.disableCCD)return n;var o;if(null==n||null!=n.colarb){var a,s=e.body,l=t.body;a=!1;for(var p,h,u=s.constraints.head;null!=u;){var c=u.elt;if(c.ignore&&c.pair_exists(s.id,l.id)){a=!0;break}u=u.next}if(a)h=!1;else{for(var d=e;null!=d&&null==d.group;)d=null!=d.ishape?d.ishape.body:null!=d.icompound?d.icompound.compound:d.ibody.compound;var _,y=null==d?null:d.group;if(null==y)_=!1;else{for(var m=t;null!=m&&null==m.group;)m=null!=m.ishape?m.ishape.body:null!=m.icompound?m.icompound.compound:m.ibody.compound;var f=null==m?null:m.group;if(null==f)_=!1;else{for(var x=!1;null!=y&&null!=f;){if(y==f){x=y.ignore;break}y.depth<f.depth?f=f.group:y=y.group}_=x}}h=!_}if(h){var v;if(e.sensorEnabled||t.sensorEnabled){var z=e.filter,g=t.filter;v=0!=(z.sensorMask&g.sensorGroup)&&0!=(g.sensorMask&z.sensorGroup)}else v=!1;if(v)p=2;else{var b;if(e.fluidEnabled||t.fluidEnabled){var w=e.filter,S=t.filter;b=0!=(w.fluidMask&S.fluidGroup)&&0!=(S.fluidMask&w.fluidGroup)}else b=!1;if(!!b&&!(0==s.imass&&0==l.imass&&0==s.iinertia&&0==l.iinertia))p=0;else{var C=e.filter,M=t.filter;p=0!=(C.collisionMask&M.collisionGroup)&&0!=(M.collisionMask&C.collisionGroup)&&!(0==s.imass&&0==l.imass&&0==s.iinertia&&0==l.iinertia)?1:-1}}}else p=-1;o=p<=0}else o=!0;if(o)return n;var P=e.body,k=t.body;if(i||P.bullet||k.bullet){var T;null==Vt.zpp_pool?T=new Vt:(T=Vt.zpp_pool,Vt.zpp_pool=T.next,T.next=null),T.failed=!1,T.s1=T.s2=null,T.arbiter=null;var O=3==P.type||3==k.type;if(i&&!O)2!=e.body.type?(T.s2=e,T.s1=t):(T.s1=e,T.s2=t),T.kinematic=!1,Ht.staticSweep(T,this.pre_dt,0,Qs.collisionSlopCCD);else if(T.s1=e,T.s2=t,T.kinematic=O,T.s1.body.sweepFrozen||T.s2.body.sweepFrozen){if(T.s1.body.sweepFrozen){var A=T.s1;T.s1=T.s2,T.s2=A,T.frozen1=!1,T.frozen2=!0}Ht.staticSweep(T,this.pre_dt,0,Qs.collisionSlopCCD)}else Ht.dynamicSweep(T,this.pre_dt,0,Qs.collisionSlopCCD);if(i&&T.toi<0||T.failed){var E=T;E.next=Vt.zpp_pool,Vt.zpp_pool=E}else this.toiEvents.add(T),T.frozen1=T.s1.body.sweepFrozen,T.frozen2=T.s2.body.sweepFrozen,T.arbiter=null!=n?n.colarb:null}return n},si.prototype.bodyCbWake=function(e){if(2==e.type&&null!=e.cbSet)if(this.midstep)for(var t=e.cbSet.bodylisteners.head;null!=t;){var i=t.elt;if(2==i.event){var n=this.push_callback(i);n.event=2,n.body=e,t=t.next}else t=t.next}else e.component.woken=!0},si.prototype.bodyCbSleep=function(e){if(2==e.type&&null!=e.cbSet)for(var t=e.cbSet.bodylisteners.head;null!=t;){var i=t.elt;if(3==i.event){var n=this.push_callback(i);n.event=3,n.body=e,t=t.next}else t=t.next}},si.prototype.constraintCbWake=function(e){if(null!=e.cbSet)if(this.midstep)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(2==i.event){var n=this.push_callback(i);n.event=2,n.constraint=e,t=t.next}else t=t.next}else e.component.woken=!0},si.prototype.constraintCbSleep=function(e){if(null!=e.cbSet)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(3==i.event){var n=this.push_callback(i);n.event=3,n.constraint=e,t=t.next}else t=t.next}},si.prototype.constraintCbBreak=function(e){if(null!=e.cbSet)for(var t=e.cbSet.conlisteners.head;null!=t;){var i=t.elt;if(4==i.event){var n=this.push_callback(i);n.event=4,n.constraint=e,t=t.next}else t=t.next}},si.prototype.nullListenerType=function(e,t){for(var i=new Ge,n=e.interactors.head;null!=n;)i.add(n.elt),n=n.next;if(e!=t)for(var r=t.interactors.head;null!=r;)i.add(r.elt),r=r.next;for(;null!=i.head;){var o=i.pop_unsafe();if(null!=o.icompound){for(var a=o.icompound,s=a.bodies.head;null!=s;)i.add(s.elt),s=s.next;for(var l=a.compounds.head;null!=l;)i.add(l.elt),l=l.next}else for(var p=null!=o.ibody?o.ibody:o.ishape.body,h=null!=o.ishape?o.ishape:null,u=p.arbiters.head;null!=u;){var c=u.elt;if(0!=c.present)if(null==h||c.ws1==h||c.ws2==h){this.MRCA_chains(c.ws1,c.ws2);for(var d=this.mrca1.head;null!=d;){var _=d.elt;if(_.cbSet==e||_.cbSet==t){for(var y=this.mrca2.head;null!=y;){var m=y.elt;if(_.cbSet==e&&m.cbSet!=t||_.cbSet==t&&m.cbSet!=e)y=y.next;else{var f=qo.get(_,m);if(null!=f){for(;null!=f.arbiters.head;)f.arbiters.pop_unsafe().present--;this.remove_callbackset(f)}y=y.next}}d=d.next}else d=d.next}u=u.next}else u=u.next;else u=u.next}}},si.prototype.nullInteractorType=function(e,t){if(null==t&&(t=e),null!=e.icompound){for(var i=e.icompound,n=i.bodies.head;null!=n;)this.nullInteractorType(n.elt,t),n=n.next;for(var r=i.compounds.head;null!=r;)this.nullInteractorType(r.elt,t),r=r.next}else for(var o=null!=e.ibody?e.ibody:e.ishape.body,a=null!=e.ishape?e.ishape:null,s=o.arbiters.head;null!=s;){var l=s.elt;if(0!=l.present)if(null==a||l.ws1==a||l.ws2==a){this.MRCA_chains(l.ws1,l.ws2);for(var p=this.mrca1.head;null!=p;){for(var h=p.elt,u=this.mrca2.head;null!=u;){var c=u.elt;if(h==t||c==t){var d=qo.get(h,c);null!=d&&(l.present--,d.remove_arb(l),null==d.arbiters.head&&this.remove_callbackset(d)),u=u.next}else u=u.next}p=p.next}s=s.next}else s=s.next;else s=s.next}},si.prototype.freshListenerType=function(e,t){for(var i=new Ge,n=e.interactors.head;null!=n;)i.add(n.elt),n=n.next;if(e!=t)for(var r=t.interactors.head;null!=r;)i.add(r.elt),r=r.next;for(;null!=i.head;){var o=i.pop_unsafe();if(null!=o.icompound){for(var a=o.icompound,s=a.bodies.head;null!=s;)i.add(s.elt),s=s.next;for(var l=a.compounds.head;null!=l;)i.add(l.elt),l=l.next}else for(var p=null!=o.ibody?o.ibody:o.ishape.body,h=null!=o.ishape?o.ishape:null,u=p.arbiters.head;null!=u;){var c=u.elt;if(c.presentable)if(null==h||c.ws1==h||c.ws2==h){this.MRCA_chains(c.ws1,c.ws2);for(var d=this.mrca1.head;null!=d;){var _=d.elt;if(_.cbSet==e||_.cbSet==t){for(var y=this.mrca2.head;null!=y;){var m=y.elt;if(_.cbSet==e&&m.cbSet!=t||_.cbSet==t&&m.cbSet!=e)y=y.next;else{var f,x,v=qo.get(_,m);null==v&&(v=Yo.get(_,m),this.add_callbackset(v)),x=!1;for(var z=v.arbiters.head;null!=z;){if(z.elt==c){x=!0;break}z=z.next}if(x)f=!1;else{var g,b=v.arbiters;null==Ko.zpp_pool?g=new Ko:(g=Ko.zpp_pool,Ko.zpp_pool=g.next,g.next=null),g.elt=c;var w=g;w.next=b.head,b.head=w,b.modified=!0,b.length++,f=!0}f&&c.present++,y=y.next}}d=d.next}else d=d.next}u=u.next}else u=u.next;else u=u.next}}},si.prototype.freshInteractorType=function(e,t){if(null==t&&(t=e),null!=e.icompound){for(var i=e.icompound,n=i.bodies.head;null!=n;)this.freshInteractorType(n.elt,t),n=n.next;for(var r=i.compounds.head;null!=r;)this.freshInteractorType(r.elt,t),r=r.next}else for(var o=null!=e.ibody?e.ibody:e.ishape.body,a=null!=e.ishape?e.ishape:null,s=o.arbiters.head;null!=s;){var l=s.elt;if(l.presentable)if(null==a||l.ws1==a||l.ws2==a){this.MRCA_chains(l.ws1,l.ws2);for(var p=this.mrca1.head;null!=p;){for(var h=p.elt,u=this.mrca2.head;null!=u;){var c=u.elt;if(h==t||c==t){var d=h.cbSet,_=c.cbSet;d.validate(),_.validate();for(var y,m=null,f=(d.cbpairs.length<_.cbpairs.length?d.cbpairs:_.cbpairs).head;null!=f;){var x=f.elt;if(x.a==d&&x.b==_||x.a==_&&x.b==d){m=x;break}f=f.next}if(null==m)null==No.zpp_pool?y=new No:(y=No.zpp_pool,No.zpp_pool=y.next,y.next=null),y.zip_listeners=!0,jo.setlt(d,_)?(y.a=d,y.b=_):(y.a=_,y.b=d),m=y,d.cbpairs.add(m),_!=d&&_.cbpairs.add(m);if(m.zip_listeners&&(m.zip_listeners=!1,m.__validate()),null!=m.listeners.head){var v,z,g=qo.get(h,c);null==g&&(g=Yo.get(h,c),this.add_callbackset(g)),z=!1;for(var b=g.arbiters.head;null!=b;){if(b.elt==l){z=!0;break}b=b.next}if(z)v=!1;else{var w,S=g.arbiters;null==Ko.zpp_pool?w=new Ko:(w=Ko.zpp_pool,Ko.zpp_pool=w.next,w.next=null),w.elt=l;var C=w;C.next=S.head,S.head=C,S.modified=!0,S.length++,v=!0}v&&l.present++}u=u.next}else u=u.next}p=p.next}s=s.next}else s=s.next;else s=s.next}},si.prototype.wakeCompound=function(e){for(var t=e.bodies.head;null!=t;){var i=t.elt;i.world||(i.component.waket=this.stamp+(this.midstep?0:1),3==i.type&&(i.kinematicDelaySleep=!0),i.component.sleeping&&this.really_wake(i,!1)),t=t.next}for(var n=e.constraints.head;null!=n;)this.wake_constraint(n.elt),n=n.next;for(var r=e.compounds.head;null!=r;)this.wakeCompound(r.elt),r=r.next},si.prototype.wakeIsland=function(e){for(;null!=e.comps.head;){var t=e.comps.pop_unsafe();if(t.waket=this.stamp+(this.midstep?0:1),t.isBody){var i=t.body;this.live.add(i);for(var n=i.arbiters.head;null!=n;){var r=n.elt;if(r.sleeping)if(r.sleeping=!1,r.up_stamp+=this.stamp-r.sleep_stamp,r.type==pn.COL){var o=r.colarb;if(o.stat){var a,s=this.c_arbiters_true;null==ea.zpp_pool?a=new ea:(a=ea.zpp_pool,ea.zpp_pool=a.next,a.next=null),a.elt=o;var l=a;l.next=s.head,s.head=l,s.modified=!0,s.length++}else{var p,h=this.c_arbiters_false;null==ea.zpp_pool?p=new ea:(p=ea.zpp_pool,ea.zpp_pool=p.next,p.next=null),p.elt=o;var u=p;u.next=h.head,h.head=u,h.modified=!0,h.length++}}else if(r.type==pn.FLUID){var c,d=this.f_arbiters,_=r.fluidarb;null==Qo.zpp_pool?c=new Qo:(c=Qo.zpp_pool,Qo.zpp_pool=c.next,c.next=null),c.elt=_;var y=c;y.next=d.head,d.head=y,d.modified=!0,d.length++}else{var m,f=this.s_arbiters,x=r.sensorarb;null==$o.zpp_pool?m=new $o:(m=$o.zpp_pool,$o.zpp_pool=m.next,m.next=null),m.elt=x;var v=m;v.next=f.head,f.head=v,f.modified=!0,f.length++}n=n.next}if(this.bodyCbWake(i),t.sleeping=!1,t.island=null,(t.parent=t).rank=0,1!=i.type)for(var z=i.shapes.head;null!=z;){var g=z.elt;null!=g.node&&this.bphase.sync(g),z=z.next}}else{var b,w=t.constraint,S=this.live_constraints;null==Hi.zpp_pool?b=new Hi:(b=Hi.zpp_pool,Hi.zpp_pool=b.next,b.next=null),b.elt=w;var C=b;C.next=S.head,S.head=C,S.modified=!0,S.length++,this.constraintCbWake(w),t.sleeping=!1,t.island=null,(t.parent=t).rank=0}}e.next=ni.zpp_pool,ni.zpp_pool=e},si.prototype.non_inlined_wake=function(e,t){null==t&&(t=!1),e.world||(e.component.waket=this.stamp+(this.midstep?0:1),3==e.type&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,t))},si.prototype.really_wake=function(e,t){if(null==t&&(t=!1),null==e.component.island){if(e.component.sleeping=!1,3==e.type||1==e.type){var i,n=this.staticsleep;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=e;var r=i;r.next=n.head,n.head=r,n.modified=!0,n.length++}else{var o,a=this.live;null==Vi.zpp_pool?o=new Vi:(o=Vi.zpp_pool,Vi.zpp_pool=o.next,o.next=null),o.elt=e;var s=o;s.next=a.head,a.head=s,a.modified=!0,a.length++}for(var l=e.constraints.head;null!=l;){var p=l.elt;p.space==this&&this.wake_constraint(p),l=l.next}for(var h=e.arbiters.head;null!=h;){var u=h.elt;if(u.sleeping)if(u.sleeping=!1,u.up_stamp+=this.stamp+(this.midstep?0:1)-u.sleep_stamp,u.type==pn.COL){var c=u.colarb;if(c.stat){var d,_=this.c_arbiters_true;null==ea.zpp_pool?d=new ea:(d=ea.zpp_pool,ea.zpp_pool=d.next,d.next=null),d.elt=c;var y=d;y.next=_.head,_.head=y,_.modified=!0,_.length++}else{var m,f=this.c_arbiters_false;null==ea.zpp_pool?m=new ea:(m=ea.zpp_pool,ea.zpp_pool=m.next,m.next=null),m.elt=c;var x=m;x.next=f.head,f.head=x,f.modified=!0,f.length++}}else if(u.type==pn.FLUID){var v,z=this.f_arbiters,g=u.fluidarb;null==Qo.zpp_pool?v=new Qo:(v=Qo.zpp_pool,Qo.zpp_pool=v.next,v.next=null),v.elt=g;var b=v;b.next=z.head,z.head=b,z.modified=!0,z.length++}else{var w,S=this.s_arbiters,C=u.sensorarb;null==$o.zpp_pool?w=new $o:(w=$o.zpp_pool,$o.zpp_pool=w.next,w.next=null),w.elt=C;var M=w;M.next=S.head,S.head=M,S.modified=!0,S.length++}if(u.type!=pn.SENSOR&&!u.cleared&&u.up_stamp>=this.stamp&&0!=(1&u.immState)){if(2==u.b1.type&&u.b1.component.sleeping){var P=u.b1;P.world||(P.component.waket=this.stamp+(this.midstep?0:1),3==P.type&&(P.kinematicDelaySleep=!0),P.component.sleeping&&this.really_wake(P,!1))}if(2==u.b2.type&&u.b2.component.sleeping){var k=u.b2;k.world||(k.component.waket=this.stamp+(this.midstep?0:1),3==k.type&&(k.kinematicDelaySleep=!0),k.component.sleeping&&this.really_wake(k,!1))}}h=h.next}if(t||2!=e.type||this.bodyCbWake(e),!t&&!this.bphase.is_sweep&&1!=e.type)for(var T=e.shapes.head;null!=T;){var O=T.elt;null!=O.node&&this.bphase.sync(O),T=T.next}}else this.wakeIsland(e.component.island)},si.prototype.wake_constraint=function(e,t){if(null==t&&(t=!1),e.active){if(e.component.waket=this.stamp+(this.midstep?0:1),e.component.sleeping){if(null==e.component.island){e.component.sleeping=!1;var i,n=this.live_constraints;null==Hi.zpp_pool?i=new Hi:(i=Hi.zpp_pool,Hi.zpp_pool=i.next,i.next=null),i.elt=e;var r=i;r.next=n.head,n.head=r,n.modified=!0,n.length++,e.wake_connected(),t||this.constraintCbWake(e)}else this.wakeIsland(e.component.island);return!0}return!1}return!1},si.prototype.doForests=function(e){for(var t=this.c_arbiters_false.head;null!=t;){var i=t.elt;if(!i.cleared&&i.up_stamp==this.stamp&&0!=(1&i.immState)&&2==i.b1.type&&2==i.b2.type){var n,r;if(i.b1.component==i.b1.component.parent)n=i.b1.component;else{for(var o=i.b1.component,a=null;o!=o.parent;){var s=o.parent;o.parent=a,a=o,o=s}for(;null!=a;){var l=a.parent;a.parent=o,a=l}n=o}if(i.b2.component==i.b2.component.parent)r=i.b2.component;else{for(var p=i.b2.component,h=null;p!=p.parent;){var u=p.parent;p.parent=h,h=p,p=u}for(;null!=h;){var c=h.parent;h.parent=p,h=c}r=p}n!=r&&(n.rank<r.rank?n.parent=r:n.rank>r.rank?r.parent=n:(r.parent=n).rank++)}t=t.next}for(var d=this.f_arbiters.head;null!=d;){var _=d.elt;if(!_.cleared&&_.up_stamp==this.stamp&&0!=(1&_.immState)&&2==_.b1.type&&2==_.b2.type){var y,m;if(_.b1.component==_.b1.component.parent)y=_.b1.component;else{for(var f=_.b1.component,x=null;f!=f.parent;){var v=f.parent;f.parent=x,x=f,f=v}for(;null!=x;){var z=x.parent;x.parent=f,x=z}y=f}if(_.b2.component==_.b2.component.parent)m=_.b2.component;else{for(var g=_.b2.component,b=null;g!=g.parent;){var w=g.parent;g.parent=b,b=g,g=w}for(;null!=b;){var S=b.parent;b.parent=g,b=S}m=g}y!=m&&(y.rank<m.rank?y.parent=m:y.rank>m.rank?m.parent=y:(m.parent=y).rank++)}d=d.next}for(var C=this.live_constraints.head;null!=C;)C.elt.forest(),C=C.next;for(;null!=this.live.head;){var M=this.live,P=M.head.elt;M.pop();var k,T=P.component;if(T==T.parent)k=T;else{for(var O=T,A=null;O!=O.parent;){var E=O.parent;O.parent=A,A=O,O=E}for(;null!=A;){var G=A.parent;A.parent=O,A=G}k=O}if(null==k.island){null==ni.zpp_pool?k.island=new ni:(k.island=ni.zpp_pool,ni.zpp_pool=k.island.next,k.island.next=null),k.island.waket=0;var I=this.islands,B=k.island;B._inuse=!0,B.next=I.next,I.next=B,I.modified=!0,I.length++,k.island.sleep=!0}T.island=k.island;var L,D=T.island.comps;null==ln.zpp_pool?L=new ln:(L=ln.zpp_pool,ln.zpp_pool=L.next,L.next=null),L.elt=T;var R=L;R.next=D.head,D.head=R,D.modified=!0,D.length++;var F=P.atRest(e);T.island.sleep=T.island.sleep&&F,T.waket>T.island.waket&&(T.island.waket=T.waket)}for(;null!=this.live_constraints.head;){var j=this.live_constraints,N=j.head.elt;j.pop();var U,V=N.component;if(V==V.parent)U=V;else{for(var H=V,W=null;H!=H.parent;){var X=H.parent;H.parent=W,W=H,H=X}for(;null!=W;){var q=W.parent;W.parent=H,W=q}U=H}V.island=U.island;var Y,K=V.island.comps;null==ln.zpp_pool?Y=new ln:(Y=ln.zpp_pool,ln.zpp_pool=Y.next,Y.next=null),Y.elt=V;var Z=Y;Z.next=K.head,K.head=Z,K.modified=!0,K.length++,V.waket>V.island.waket&&(V.island.waket=V.waket)}for(;null!=this.islands.next;){var J=this.islands,Q=J.next;if(J.pop(),Q.sleep)for(var $=Q.comps.head;null!=$;){var ee=$.elt;if(ee.isBody){var te=ee.body;te.velx=0,te.vely=0,te.angvel=0,ee.sleeping=!0;for(var ie=te.shapes.head;null!=ie;)this.bphase.sync(ie.elt),ie=ie.next;this.bodyCbSleep(te)}else this.constraintCbSleep(ee.constraint),ee.sleeping=!0;$=$.next}else{for(;null!=Q.comps.head;){var ne=Q.comps,re=ne.head.elt;if(ne.pop(),re.waket=Q.waket,re.isBody){var oe,ae=this.live,se=re.body;null==Vi.zpp_pool?oe=new Vi:(oe=Vi.zpp_pool,Vi.zpp_pool=oe.next,oe.next=null),oe.elt=se;var le=oe;le.next=ae.head,ae.head=le,ae.modified=!0,ae.length++}else{var pe,he=this.live_constraints,ue=re.constraint;null==Hi.zpp_pool?pe=new Hi:(pe=Hi.zpp_pool,Hi.zpp_pool=pe.next,pe.next=null),pe.elt=ue;var ce=pe;ce.next=he.head,he.head=ce,he.modified=!0,he.length++}re.sleeping=!1,re.island=null,(re.parent=re).rank=0}Q.next=ni.zpp_pool,ni.zpp_pool=Q}}},si.prototype.sleepArbiters=function(){var e=null,t=this.c_arbiters_true,i=t.head,n=null!=this.c_arbiters_false;for(n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null);null!=i;){var r=i.elt;if(r.b1.component.sleeping&&r.b2.component.sleeping){var o,a;r.sleep_stamp=this.stamp,r.sleeping=!0,null==e?(a=(o=t.head).next,t.head=a,null==t.head&&(t.pushmod=!0)):(a=(o=e.next).next,null==(e.next=a)&&(t.pushmod=!0));var s=o;s.elt=null,s.next=ea.zpp_pool,ea.zpp_pool=s,t.modified=!0,t.length--,t.pushmod=!0,i=a,n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null)}else i=(e=i).next,n&&null==i&&(n=!1,i=this.c_arbiters_false.head,t=this.c_arbiters_false,e=null)}for(var l=null,p=this.f_arbiters,h=p.head;null!=h;){var u=h.elt;if(u.b1.component.sleeping&&u.b2.component.sleeping){var c,d;u.sleep_stamp=this.stamp,u.sleeping=!0,null==l?(d=(c=p.head).next,p.head=d,null==p.head&&(p.pushmod=!0)):(d=(c=l.next).next,null==(l.next=d)&&(p.pushmod=!0));var _=c;_.elt=null,_.next=Qo.zpp_pool,Qo.zpp_pool=_,p.modified=!0,p.length--,p.pushmod=!0,h=d}else h=(l=h).next}for(var y=null,m=this.s_arbiters,f=m.head;null!=f;){var x=f.elt;if(x.b1.component.sleeping&&x.b2.component.sleeping){var v,z;x.sleep_stamp=this.stamp,x.sleeping=!0,null==y?(z=(v=m.head).next,m.head=z,null==m.head&&(m.pushmod=!0)):(z=(v=y.next).next,null==(y.next=z)&&(m.pushmod=!0));var g=v;g.elt=null,g.next=$o.zpp_pool,$o.zpp_pool=g,m.modified=!0,m.length--,m.pushmod=!0,f=z}else f=(y=f).next}},si.prototype.static_validation=function(e){if(null!=e.shapes.head&&e.zip_aabb){e.zip_aabb=!1,e.aabb.minx=1/0,e.aabb.miny=1/0,e.aabb.maxx=-1/0,e.aabb.maxy=-1/0;for(var t=e.shapes.head;null!=t;){var i=t.elt;if(i.zip_aabb&&null!=i.body)if(i.zip_aabb=!1,0==i.type){var n=i.circle;if(n.zip_worldCOM&&null!=n.body){if(n.zip_worldCOM=!1,n.zip_localCOM){if(n.zip_localCOM=!1,1==n.type){var r=n.polygon;if(null==r.lverts.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y;else if(null==r.lverts.next.next.next)r.localCOMx=r.lverts.next.x,r.localCOMy=r.lverts.next.y,r.localCOMx+=r.lverts.next.next.x,r.localCOMy+=r.lverts.next.next.y,r.localCOMx*=.5,r.localCOMy*=.5;else{r.localCOMx=0;var o=r.localCOMy=0,a=r.lverts.next,s=a,l=a=a.next;for(a=a.next;null!=a;){var p=a;o+=l.x*(p.y-s.y);var h=p.y*l.x-p.x*l.y;r.localCOMx+=(l.x+p.x)*h,r.localCOMy+=(l.y+p.y)*h,s=l,l=p,a=a.next}var u=a=r.lverts.next;o+=l.x*(u.y-s.y);var c=u.y*l.x-u.x*l.y;r.localCOMx+=(l.x+u.x)*c,r.localCOMy+=(l.y+u.y)*c,s=l;var d=a=a.next;o+=u.x*(d.y-s.y);var _=d.y*u.x-d.x*u.y;r.localCOMx+=(u.x+d.x)*_,r.localCOMy+=(u.y+d.y)*_;var y=o=1/(3*o);r.localCOMx*=y,r.localCOMy*=y}}null!=n.wrap_localCOM&&(n.wrap_localCOM.zpp_inner.x=n.localCOMx,n.wrap_localCOM.zpp_inner.y=n.localCOMy)}var m=n.body;m.zip_axis&&(m.zip_axis=!1,m.axisx=Math.sin(m.rot),m.axisy=Math.cos(m.rot)),n.worldCOMx=n.body.posx+(n.body.axisy*n.localCOMx-n.body.axisx*n.localCOMy),n.worldCOMy=n.body.posy+(n.localCOMx*n.body.axisx+n.localCOMy*n.body.axisy)}var f=n.radius,x=n.radius;n.aabb.minx=n.worldCOMx-f,n.aabb.miny=n.worldCOMy-x,n.aabb.maxx=n.worldCOMx+f,n.aabb.maxy=n.worldCOMy+x}else{var v=i.polygon;if(v.zip_gverts&&null!=v.body){v.zip_gverts=!1,v.validate_lverts();var z=v.body;z.zip_axis&&(z.zip_axis=!1,z.axisx=Math.sin(z.rot),z.axisy=Math.cos(z.rot));for(var g=v.lverts.next,b=v.gverts.next;null!=b;){var w=b,S=g;g=g.next,w.x=v.body.posx+(v.body.axisy*S.x-v.body.axisx*S.y),w.y=v.body.posy+(S.x*v.body.axisx+S.y*v.body.axisy),b=b.next}}var C=v.gverts.next;v.aabb.minx=C.x,v.aabb.miny=C.y,v.aabb.maxx=C.x,v.aabb.maxy=C.y;for(var M=v.gverts.next.next;null!=M;){var P=M;P.x<v.aabb.minx&&(v.aabb.minx=P.x),P.x>v.aabb.maxx&&(v.aabb.maxx=P.x),P.y<v.aabb.miny&&(v.aabb.miny=P.y),P.y>v.aabb.maxy&&(v.aabb.maxy=P.y),M=M.next}}var k=e.aabb,T=i.aabb;T.minx<k.minx&&(k.minx=T.minx),T.maxx>k.maxx&&(k.maxx=T.maxx),T.miny<k.miny&&(k.miny=T.miny),T.maxy>k.maxy&&(k.maxy=T.maxy),t=t.next}}e.validate_mass(),e.validate_inertia();for(var O=e.shapes.head;null!=O;){var A=O.elt;if(1==A.type){var E=A.polygon;E.zip_sanitation&&(E.zip_sanitation=!1,E.splice_collinear_real());var G=A.polygon;if(G.zip_gaxi&&null!=G.body){G.zip_gaxi=!1,G.validate_laxi();var I=G.body;if(I.zip_axis&&(I.zip_axis=!1,I.axisx=Math.sin(I.rot),I.axisy=Math.cos(I.rot)),G.zip_gverts&&null!=G.body){G.zip_gverts=!1,G.validate_lverts();var B=G.body;B.zip_axis&&(B.zip_axis=!1,B.axisx=Math.sin(B.rot),B.axisy=Math.cos(B.rot));for(var L=G.lverts.next,D=G.gverts.next;null!=D;){var R=D,F=L;L=L.next,R.x=G.body.posx+(G.body.axisy*F.x-G.body.axisx*F.y),R.y=G.body.posy+(F.x*G.body.axisx+F.y*G.body.axisy),D=D.next}}var j=G.edges.head,N=G.gverts.next,U=N;for(N=N.next;null!=N;){var V=N,H=j.elt;j=j.next,H.gp0=U,H.gp1=V,H.gnormx=G.body.axisy*H.lnormx-G.body.axisx*H.lnormy,H.gnormy=H.lnormx*G.body.axisx+H.lnormy*G.body.axisy,H.gprojection=G.body.posx*H.gnormx+G.body.posy*H.gnormy+H.lprojection,null!=H.wrap_gnorm&&(H.wrap_gnorm.zpp_inner.x=H.gnormx,H.wrap_gnorm.zpp_inner.y=H.gnormy),H.tp0=H.gp0.y*H.gnormx-H.gp0.x*H.gnormy,H.tp1=H.gp1.y*H.gnormx-H.gp1.x*H.gnormy,U=V,N=N.next}var W=j.elt;W.gp0=U,W.gp1=G.gverts.next,W.gnormx=G.body.axisy*W.lnormx-G.body.axisx*W.lnormy,W.gnormy=W.lnormx*G.body.axisx+W.lnormy*G.body.axisy,W.gprojection=G.body.posx*W.gnormx+G.body.posy*W.gnormy+W.lprojection,null!=W.wrap_gnorm&&(W.wrap_gnorm.zpp_inner.x=W.gnormx,W.wrap_gnorm.zpp_inner.y=W.gnormy),W.tp0=W.gp0.y*W.gnormx-W.gp0.x*W.gnormy,W.tp1=W.gp1.y*W.gnormx-W.gp1.x*W.gnormy}}O=O.next}e.sweepFrozen=!0},si.prototype.validation=function(){var e=this.cbsets;if(!e.cbsets.empty()){for(var t=e.cbsets.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(t.data.validate(),null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}for(var i=this.live.head;null!=i;){var n=i.elt;n.sweepRadius=0;for(var r=n.shapes.head;null!=r;){var o=r.elt;if(1==o.type){var a=o.polygon;a.zip_sanitation&&(a.zip_sanitation=!1,a.splice_collinear_real());var s=o.polygon;if(s.zip_gaxi&&null!=s.body){s.zip_gaxi=!1,s.validate_laxi();var l=s.body;if(l.zip_axis&&(l.zip_axis=!1,l.axisx=Math.sin(l.rot),l.axisy=Math.cos(l.rot)),s.zip_gverts&&null!=s.body){s.zip_gverts=!1,s.validate_lverts();var p=s.body;p.zip_axis&&(p.zip_axis=!1,p.axisx=Math.sin(p.rot),p.axisy=Math.cos(p.rot));for(var h=s.lverts.next,u=s.gverts.next;null!=u;){var c=u,d=h;h=h.next,c.x=s.body.posx+(s.body.axisy*d.x-s.body.axisx*d.y),c.y=s.body.posy+(d.x*s.body.axisx+d.y*s.body.axisy),u=u.next}}var _=s.edges.head,y=s.gverts.next,m=y;for(y=y.next;null!=y;){var f=y,x=_.elt;_=_.next,x.gp0=m,x.gp1=f,x.gnormx=s.body.axisy*x.lnormx-s.body.axisx*x.lnormy,x.gnormy=x.lnormx*s.body.axisx+x.lnormy*s.body.axisy,x.gprojection=s.body.posx*x.gnormx+s.body.posy*x.gnormy+x.lprojection,null!=x.wrap_gnorm&&(x.wrap_gnorm.zpp_inner.x=x.gnormx,x.wrap_gnorm.zpp_inner.y=x.gnormy),x.tp0=x.gp0.y*x.gnormx-x.gp0.x*x.gnormy,x.tp1=x.gp1.y*x.gnormx-x.gp1.x*x.gnormy,m=f,y=y.next}var v=_.elt;v.gp0=m,v.gp1=s.gverts.next,v.gnormx=s.body.axisy*v.lnormx-s.body.axisx*v.lnormy,v.gnormy=v.lnormx*s.body.axisx+v.lnormy*s.body.axisy,v.gprojection=s.body.posx*v.gnormx+s.body.posy*v.gnormy+v.lprojection,null!=v.wrap_gnorm&&(v.wrap_gnorm.zpp_inner.x=v.gnormx,v.wrap_gnorm.zpp_inner.y=v.gnormy),v.tp0=v.gp0.y*v.gnormx-v.gp0.x*v.gnormy,v.tp1=v.gp1.y*v.gnormx-v.gp1.x*v.gnormy}}o.validate_sweepRadius(),o.sweepRadius>n.sweepRadius&&(n.sweepRadius=o.sweepRadius),r=r.next}if(n.validate_mass(),n.validate_inertia(),null!=n.shapes.head){if(n.zip_aabb){n.zip_aabb=!1,n.aabb.minx=1/0,n.aabb.miny=1/0,n.aabb.maxx=-1/0,n.aabb.maxy=-1/0;for(var z=n.shapes.head;null!=z;){var g=z.elt;if(g.zip_aabb&&null!=g.body)if(g.zip_aabb=!1,0==g.type){var b=g.circle;if(b.zip_worldCOM&&null!=b.body){if(b.zip_worldCOM=!1,b.zip_localCOM){if(b.zip_localCOM=!1,1==b.type){var w=b.polygon;if(null==w.lverts.next.next)w.localCOMx=w.lverts.next.x,w.localCOMy=w.lverts.next.y;else if(null==w.lverts.next.next.next)w.localCOMx=w.lverts.next.x,w.localCOMy=w.lverts.next.y,w.localCOMx+=w.lverts.next.next.x,w.localCOMy+=w.lverts.next.next.y,w.localCOMx*=.5,w.localCOMy*=.5;else{w.localCOMx=0;var S=w.localCOMy=0,C=w.lverts.next,M=C,P=C=C.next;for(C=C.next;null!=C;){var k=C;S+=P.x*(k.y-M.y);var T=k.y*P.x-k.x*P.y;w.localCOMx+=(P.x+k.x)*T,w.localCOMy+=(P.y+k.y)*T,M=P,P=k,C=C.next}var O=C=w.lverts.next;S+=P.x*(O.y-M.y);var A=O.y*P.x-O.x*P.y;w.localCOMx+=(P.x+O.x)*A,w.localCOMy+=(P.y+O.y)*A,M=P;var E=C=C.next;S+=O.x*(E.y-M.y);var G=E.y*O.x-E.x*O.y;w.localCOMx+=(O.x+E.x)*G,w.localCOMy+=(O.y+E.y)*G;var I=S=1/(3*S);w.localCOMx*=I,w.localCOMy*=I}}null!=b.wrap_localCOM&&(b.wrap_localCOM.zpp_inner.x=b.localCOMx,b.wrap_localCOM.zpp_inner.y=b.localCOMy)}var B=b.body;B.zip_axis&&(B.zip_axis=!1,B.axisx=Math.sin(B.rot),B.axisy=Math.cos(B.rot)),b.worldCOMx=b.body.posx+(b.body.axisy*b.localCOMx-b.body.axisx*b.localCOMy),b.worldCOMy=b.body.posy+(b.localCOMx*b.body.axisx+b.localCOMy*b.body.axisy)}var L=b.radius,D=b.radius;b.aabb.minx=b.worldCOMx-L,b.aabb.miny=b.worldCOMy-D,b.aabb.maxx=b.worldCOMx+L,b.aabb.maxy=b.worldCOMy+D}else{var R=g.polygon;if(R.zip_gverts&&null!=R.body){R.zip_gverts=!1,R.validate_lverts();var F=R.body;F.zip_axis&&(F.zip_axis=!1,F.axisx=Math.sin(F.rot),F.axisy=Math.cos(F.rot));for(var j=R.lverts.next,N=R.gverts.next;null!=N;){var U=N,V=j;j=j.next,U.x=R.body.posx+(R.body.axisy*V.x-R.body.axisx*V.y),U.y=R.body.posy+(V.x*R.body.axisx+V.y*R.body.axisy),N=N.next}}var H=R.gverts.next;R.aabb.minx=H.x,R.aabb.miny=H.y,R.aabb.maxx=H.x,R.aabb.maxy=H.y;for(var W=R.gverts.next.next;null!=W;){var X=W;X.x<R.aabb.minx&&(R.aabb.minx=X.x),X.x>R.aabb.maxx&&(R.aabb.maxx=X.x),X.y<R.aabb.miny&&(R.aabb.miny=X.y),X.y>R.aabb.maxy&&(R.aabb.maxy=X.y),W=W.next}}var q=n.aabb,Y=g.aabb;Y.minx<q.minx&&(q.minx=Y.minx),Y.maxx>q.maxx&&(q.maxx=Y.maxx),Y.miny<q.miny&&(q.miny=Y.miny),Y.maxy>q.maxy&&(q.maxy=Y.maxy),z=z.next}}n.validate_worldCOM()}if(n.validate_gravMass(),n.zip_axis&&(n.zip_axis=!1,n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot)),n.component.woken&&null!=n.cbSet)for(var K=n.cbSet.bodylisteners.head;null!=K;){var Z=K.elt;if(2==Z.event){var J=this.push_callback(Z);J.event=2,J.body=n,K=K.next}else K=K.next}n.component.woken=!1;for(var Q=n.shapes.head;null!=Q;)this.bphase.sync(Q.elt),Q=Q.next;i=i.next}for(var $=this.kinematics.head;null!=$;){var ee=$.elt;ee.sweepRadius=0;for(var te=ee.shapes.head;null!=te;){var ie=te.elt;if(1==ie.type){var ne=ie.polygon;ne.zip_sanitation&&(ne.zip_sanitation=!1,ne.splice_collinear_real());var re=ie.polygon;if(re.zip_gaxi&&null!=re.body){re.zip_gaxi=!1,re.validate_laxi();var oe=re.body;if(oe.zip_axis&&(oe.zip_axis=!1,oe.axisx=Math.sin(oe.rot),oe.axisy=Math.cos(oe.rot)),re.zip_gverts&&null!=re.body){re.zip_gverts=!1,re.validate_lverts();var ae=re.body;ae.zip_axis&&(ae.zip_axis=!1,ae.axisx=Math.sin(ae.rot),ae.axisy=Math.cos(ae.rot));for(var se=re.lverts.next,le=re.gverts.next;null!=le;){var pe=le,he=se;se=se.next,pe.x=re.body.posx+(re.body.axisy*he.x-re.body.axisx*he.y),pe.y=re.body.posy+(he.x*re.body.axisx+he.y*re.body.axisy),le=le.next}}var ue=re.edges.head,ce=re.gverts.next,de=ce;for(ce=ce.next;null!=ce;){var _e=ce,ye=ue.elt;ue=ue.next,ye.gp0=de,ye.gp1=_e,ye.gnormx=re.body.axisy*ye.lnormx-re.body.axisx*ye.lnormy,ye.gnormy=ye.lnormx*re.body.axisx+ye.lnormy*re.body.axisy,ye.gprojection=re.body.posx*ye.gnormx+re.body.posy*ye.gnormy+ye.lprojection,null!=ye.wrap_gnorm&&(ye.wrap_gnorm.zpp_inner.x=ye.gnormx,ye.wrap_gnorm.zpp_inner.y=ye.gnormy),ye.tp0=ye.gp0.y*ye.gnormx-ye.gp0.x*ye.gnormy,ye.tp1=ye.gp1.y*ye.gnormx-ye.gp1.x*ye.gnormy,de=_e,ce=ce.next}var me=ue.elt;me.gp0=de,me.gp1=re.gverts.next,me.gnormx=re.body.axisy*me.lnormx-re.body.axisx*me.lnormy,me.gnormy=me.lnormx*re.body.axisx+me.lnormy*re.body.axisy,me.gprojection=re.body.posx*me.gnormx+re.body.posy*me.gnormy+me.lprojection,null!=me.wrap_gnorm&&(me.wrap_gnorm.zpp_inner.x=me.gnormx,me.wrap_gnorm.zpp_inner.y=me.gnormy),me.tp0=me.gp0.y*me.gnormx-me.gp0.x*me.gnormy,me.tp1=me.gp1.y*me.gnormx-me.gp1.x*me.gnormy}}ie.validate_sweepRadius(),ie.sweepRadius>ee.sweepRadius&&(ee.sweepRadius=ie.sweepRadius),te=te.next}if(ee.validate_mass(),ee.validate_inertia(),null!=ee.shapes.head){if(ee.zip_aabb){ee.zip_aabb=!1,ee.aabb.minx=1/0,ee.aabb.miny=1/0,ee.aabb.maxx=-1/0,ee.aabb.maxy=-1/0;for(var fe=ee.shapes.head;null!=fe;){var xe=fe.elt;if(xe.zip_aabb&&null!=xe.body)if(xe.zip_aabb=!1,0==xe.type){var ve=xe.circle;if(ve.zip_worldCOM&&null!=ve.body){if(ve.zip_worldCOM=!1,ve.zip_localCOM){if(ve.zip_localCOM=!1,1==ve.type){var ze=ve.polygon;if(null==ze.lverts.next.next)ze.localCOMx=ze.lverts.next.x,ze.localCOMy=ze.lverts.next.y;else if(null==ze.lverts.next.next.next)ze.localCOMx=ze.lverts.next.x,ze.localCOMy=ze.lverts.next.y,ze.localCOMx+=ze.lverts.next.next.x,ze.localCOMy+=ze.lverts.next.next.y,ze.localCOMx*=.5,ze.localCOMy*=.5;else{ze.localCOMx=0;var ge=ze.localCOMy=0,be=ze.lverts.next,we=be,Se=be=be.next;for(be=be.next;null!=be;){var Ce=be;ge+=Se.x*(Ce.y-we.y);var Me=Ce.y*Se.x-Ce.x*Se.y;ze.localCOMx+=(Se.x+Ce.x)*Me,ze.localCOMy+=(Se.y+Ce.y)*Me,we=Se,Se=Ce,be=be.next}var Pe=be=ze.lverts.next;ge+=Se.x*(Pe.y-we.y);var ke=Pe.y*Se.x-Pe.x*Se.y;ze.localCOMx+=(Se.x+Pe.x)*ke,ze.localCOMy+=(Se.y+Pe.y)*ke,we=Se;var Te=be=be.next;ge+=Pe.x*(Te.y-we.y);var Oe=Te.y*Pe.x-Te.x*Pe.y;ze.localCOMx+=(Pe.x+Te.x)*Oe,ze.localCOMy+=(Pe.y+Te.y)*Oe;var Ae=ge=1/(3*ge);ze.localCOMx*=Ae,ze.localCOMy*=Ae}}null!=ve.wrap_localCOM&&(ve.wrap_localCOM.zpp_inner.x=ve.localCOMx,ve.wrap_localCOM.zpp_inner.y=ve.localCOMy)}var Ee=ve.body;Ee.zip_axis&&(Ee.zip_axis=!1,Ee.axisx=Math.sin(Ee.rot),Ee.axisy=Math.cos(Ee.rot)),ve.worldCOMx=ve.body.posx+(ve.body.axisy*ve.localCOMx-ve.body.axisx*ve.localCOMy),ve.worldCOMy=ve.body.posy+(ve.localCOMx*ve.body.axisx+ve.localCOMy*ve.body.axisy)}var Ge=ve.radius,Ie=ve.radius;ve.aabb.minx=ve.worldCOMx-Ge,ve.aabb.miny=ve.worldCOMy-Ie,ve.aabb.maxx=ve.worldCOMx+Ge,ve.aabb.maxy=ve.worldCOMy+Ie}else{var Be=xe.polygon;if(Be.zip_gverts&&null!=Be.body){Be.zip_gverts=!1,Be.validate_lverts();var Le=Be.body;Le.zip_axis&&(Le.zip_axis=!1,Le.axisx=Math.sin(Le.rot),Le.axisy=Math.cos(Le.rot));for(var De=Be.lverts.next,Re=Be.gverts.next;null!=Re;){var Fe=Re,je=De;De=De.next,Fe.x=Be.body.posx+(Be.body.axisy*je.x-Be.body.axisx*je.y),Fe.y=Be.body.posy+(je.x*Be.body.axisx+je.y*Be.body.axisy),Re=Re.next}}var Ne=Be.gverts.next;Be.aabb.minx=Ne.x,Be.aabb.miny=Ne.y,Be.aabb.maxx=Ne.x,Be.aabb.maxy=Ne.y;for(var Ue=Be.gverts.next.next;null!=Ue;){var Ve=Ue;Ve.x<Be.aabb.minx&&(Be.aabb.minx=Ve.x),Ve.x>Be.aabb.maxx&&(Be.aabb.maxx=Ve.x),Ve.y<Be.aabb.miny&&(Be.aabb.miny=Ve.y),Ve.y>Be.aabb.maxy&&(Be.aabb.maxy=Ve.y),Ue=Ue.next}}var He=ee.aabb,We=xe.aabb;We.minx<He.minx&&(He.minx=We.minx),We.maxx>He.maxx&&(He.maxx=We.maxx),We.miny<He.miny&&(He.miny=We.miny),We.maxy>He.maxy&&(He.maxy=We.maxy),fe=fe.next}}ee.validate_worldCOM()}ee.validate_gravMass(),ee.zip_axis&&(ee.zip_axis=!1,ee.axisx=Math.sin(ee.rot),ee.axisy=Math.cos(ee.rot));for(var Xe=ee.shapes.head;null!=Xe;)this.bphase.sync(Xe.elt),Xe=Xe.next;$=$.next}for(var qe=this.live_constraints.head;null!=qe;){var Ye=qe.elt;if(Ye.active){if(Ye.component.woken&&null!=Ye.cbSet)for(var Ke=Ye.cbSet.conlisteners.head;null!=Ke;){var Ze=Ke.elt;if(2==Ze.event){var Je=this.push_callback(Ze);Je.event=2,Je.constraint=Ye,Ke=Ke.next}else Ke=Ke.next}Ye.component.woken=!1}qe=qe.next}},si.prototype.updateVel=function(e){for(var t=1-e*this.global_lin_drag,i=1-e*this.global_ang_drag,n=this.live.head;null!=n;){var r=n.elt;if(0!=r.smass){var o=e*r.imass;r.velx=t*r.velx+(r.forcex+this.gravityx*r.gravMass)*o,r.vely=t*r.vely+(r.forcey+this.gravityy*r.gravMass)*o}if(0!=r.sinertia){var a,s;a=r.worldCOMx-r.posx,s=r.worldCOMy-r.posy,r.angvel=i*r.angvel+(r.torque+(this.gravityy*a-this.gravityx*s)*r.gravMass)*e*r.iinertia}n=n.next}},si.prototype.updatePos=function(e){for(var t=2*Math.PI/e,i=this.live.head;null!=i;){var n=i.elt;n.pre_posx=n.posx,n.pre_posy=n.posy,n.pre_rot=n.rot,n.sweepTime=0,n.sweep_angvel=n.angvel%t;var r=e-n.sweepTime;if(0!=r&&(n.sweepTime=e,n.posx+=n.velx*r,n.posy+=n.vely*r,0!=n.angvel)){var o=n.sweep_angvel*r;if(n.rot+=o,1e-4<o*o)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var a=o*o,s=1-.5*a,l=1-a*a/8,p=(s*n.axisx+o*n.axisy)*l;n.axisy=(s*n.axisy-o*n.axisx)*l,n.axisx=p}}if(n.disableCCD)n.sweepFrozen=!0,n.bullet=!1;else{var h=Qs.staticCCDLinearThreshold*n.sweepRadius,u=Qs.staticCCDAngularThreshold;if((n.velx*n.velx+n.vely*n.vely)*e*e>h*h||n.angvel*n.angvel*e*e>u*u||3==n.type){var c=n.sweep_angvel;c<0&&(c=-c);for(var d=1/c,_=n.shapes.head;null!=_;){var y=_.elt,m=y.aabb,f=m.minx,x=m.miny,v=m.maxx,z=m.maxy,g=c*e*y.sweepCoef*.008333333333333333|0;8<g&&(g=8);var b=c*e/g,w=e-n.sweepTime;if(0!=w&&(n.sweepTime=e,n.posx+=n.velx*w,n.posy+=n.vely*w,0!=n.angvel)){var S=n.sweep_angvel*w;if(n.rot+=S,1e-4<S*S)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var C=S*S,M=1-.5*C,P=1-C*C/8,k=(M*n.axisx+S*n.axisy)*P;n.axisy=(M*n.axisy-S*n.axisx)*P,n.axisx=k}}if(0==y.type){var T=y.circle;T.worldCOMx=T.body.posx+(T.body.axisy*T.localCOMx-T.body.axisx*T.localCOMy),T.worldCOMy=T.body.posy+(T.localCOMx*T.body.axisx+T.localCOMy*T.body.axisy),T.aabb.minx=T.worldCOMx-T.radius,T.aabb.miny=T.worldCOMy-T.radius,T.aabb.maxx=T.worldCOMx+T.radius,T.aabb.maxy=T.worldCOMy+T.radius}else{var O=y.polygon,A=O.lverts.next,E=O.gverts.next,G=A;A=A.next,E.x=O.body.posx+(O.body.axisy*G.x-O.body.axisx*G.y),E.y=O.body.posy+(G.x*O.body.axisx+G.y*O.body.axisy),O.aabb.minx=E.x,O.aabb.miny=E.y,O.aabb.maxx=E.x,O.aabb.maxy=E.y;for(var I=O.gverts.next.next;null!=I;){var B=I,L=A;A=A.next,B.x=O.body.posx+(O.body.axisy*L.x-O.body.axisx*L.y),B.y=O.body.posy+(L.x*O.body.axisx+L.y*O.body.axisy),B.x<O.aabb.minx&&(O.aabb.minx=B.x),B.x>O.aabb.maxx&&(O.aabb.maxx=B.x),B.y<O.aabb.miny&&(O.aabb.miny=B.y),B.y>O.aabb.maxy&&(O.aabb.maxy=B.y),I=I.next}}f<m.minx?m.minx=f:f=m.minx,x<m.miny?m.miny=x:x=m.miny,v>m.maxx?m.maxx=v:v=m.maxx,z>m.maxy?m.maxy=z:z=m.maxy;for(var D=1,R=g;D<R;){var F=b*D++*d,j=F-n.sweepTime;if(0!=j&&(n.sweepTime=F,n.posx+=n.velx*j,n.posy+=n.vely*j,0!=n.angvel)){var N=n.sweep_angvel*j;if(n.rot+=N,1e-4<N*N)n.axisx=Math.sin(n.rot),n.axisy=Math.cos(n.rot);else{var U=N*N,V=1-.5*U,H=1-U*U/8,W=(V*n.axisx+N*n.axisy)*H;n.axisy=(V*n.axisy-N*n.axisx)*H,n.axisx=W}}if(0==y.type){var X=y.circle;X.worldCOMx=X.body.posx+(X.body.axisy*X.localCOMx-X.body.axisx*X.localCOMy),X.worldCOMy=X.body.posy+(X.localCOMx*X.body.axisx+X.localCOMy*X.body.axisy),X.aabb.minx=X.worldCOMx-X.radius,X.aabb.miny=X.worldCOMy-X.radius,X.aabb.maxx=X.worldCOMx+X.radius,X.aabb.maxy=X.worldCOMy+X.radius}else{var q=y.polygon,Y=q.lverts.next,K=q.gverts.next,Z=Y;Y=Y.next,K.x=q.body.posx+(q.body.axisy*Z.x-q.body.axisx*Z.y),K.y=q.body.posy+(Z.x*q.body.axisx+Z.y*q.body.axisy),q.aabb.minx=K.x,q.aabb.miny=K.y,q.aabb.maxx=K.x,q.aabb.maxy=K.y;for(var J=q.gverts.next.next;null!=J;){var Q=J,$=Y;Y=Y.next,Q.x=q.body.posx+(q.body.axisy*$.x-q.body.axisx*$.y),Q.y=q.body.posy+($.x*q.body.axisx+$.y*q.body.axisy),Q.x<q.aabb.minx&&(q.aabb.minx=Q.x),Q.x>q.aabb.maxx&&(q.aabb.maxx=Q.x),Q.y<q.aabb.miny&&(q.aabb.miny=Q.y),Q.y>q.aabb.maxy&&(q.aabb.maxy=Q.y),J=J.next}}f<m.minx?m.minx=f:f=m.minx,x<m.miny?m.miny=x:x=m.miny,v>m.maxx?m.maxx=v:v=m.maxx,z>m.maxy?m.maxy=z:z=m.maxy}this.bphase.sync(y),_=_.next}if(n.sweepFrozen=!1,2==n.type&&n.bulletEnabled){var ee=Qs.bulletCCDLinearThreshold*n.sweepRadius,te=Qs.bulletCCDAngularThreshold;((n.velx*n.velx+n.vely*n.vely)*e*e>ee*ee||n.angvel*n.angvel*e*e>te*te)&&(n.bullet=!0)}}else n.sweepFrozen=!0,n.bullet=!1}i=i.next}for(var ie=this.kinematics.head;null!=ie;){var ne=ie.elt;ne.pre_posx=ne.posx,ne.pre_posy=ne.posy,ne.pre_rot=ne.rot,ne.sweepTime=0,ne.sweep_angvel=ne.angvel%t;var re=e-ne.sweepTime;if(0!=re&&(ne.sweepTime=e,ne.posx+=ne.velx*re,ne.posy+=ne.vely*re,0!=ne.angvel)){var oe=ne.sweep_angvel*re;if(ne.rot+=oe,1e-4<oe*oe)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var ae=oe*oe,se=1-.5*ae,le=1-ae*ae/8,pe=(se*ne.axisx+oe*ne.axisy)*le;ne.axisy=(se*ne.axisy-oe*ne.axisx)*le,ne.axisx=pe}}if(ne.disableCCD)ne.sweepFrozen=!0,ne.bullet=!1;else{var he=Qs.staticCCDLinearThreshold*ne.sweepRadius,ue=Qs.staticCCDAngularThreshold;if((ne.velx*ne.velx+ne.vely*ne.vely)*e*e>he*he||ne.angvel*ne.angvel*e*e>ue*ue||3==ne.type){var ce=ne.sweep_angvel;ce<0&&(ce=-ce);for(var de=1/ce,_e=ne.shapes.head;null!=_e;){var ye=_e.elt,me=ye.aabb,fe=me.minx,xe=me.miny,ve=me.maxx,ze=me.maxy,ge=ce*e*ye.sweepCoef*.008333333333333333|0;8<ge&&(ge=8);var be=ce*e/ge,we=e-ne.sweepTime;if(0!=we&&(ne.sweepTime=e,ne.posx+=ne.velx*we,ne.posy+=ne.vely*we,0!=ne.angvel)){var Se=ne.sweep_angvel*we;if(ne.rot+=Se,1e-4<Se*Se)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var Ce=Se*Se,Me=1-.5*Ce,Pe=1-Ce*Ce/8,ke=(Me*ne.axisx+Se*ne.axisy)*Pe;ne.axisy=(Me*ne.axisy-Se*ne.axisx)*Pe,ne.axisx=ke}}if(0==ye.type){var Te=ye.circle;Te.worldCOMx=Te.body.posx+(Te.body.axisy*Te.localCOMx-Te.body.axisx*Te.localCOMy),Te.worldCOMy=Te.body.posy+(Te.localCOMx*Te.body.axisx+Te.localCOMy*Te.body.axisy),Te.aabb.minx=Te.worldCOMx-Te.radius,Te.aabb.miny=Te.worldCOMy-Te.radius,Te.aabb.maxx=Te.worldCOMx+Te.radius,Te.aabb.maxy=Te.worldCOMy+Te.radius}else{var Oe=ye.polygon,Ae=Oe.lverts.next,Ee=Oe.gverts.next,Ge=Ae;Ae=Ae.next,Ee.x=Oe.body.posx+(Oe.body.axisy*Ge.x-Oe.body.axisx*Ge.y),Ee.y=Oe.body.posy+(Ge.x*Oe.body.axisx+Ge.y*Oe.body.axisy),Oe.aabb.minx=Ee.x,Oe.aabb.miny=Ee.y,Oe.aabb.maxx=Ee.x,Oe.aabb.maxy=Ee.y;for(var Ie=Oe.gverts.next.next;null!=Ie;){var Be=Ie,Le=Ae;Ae=Ae.next,Be.x=Oe.body.posx+(Oe.body.axisy*Le.x-Oe.body.axisx*Le.y),Be.y=Oe.body.posy+(Le.x*Oe.body.axisx+Le.y*Oe.body.axisy),Be.x<Oe.aabb.minx&&(Oe.aabb.minx=Be.x),Be.x>Oe.aabb.maxx&&(Oe.aabb.maxx=Be.x),Be.y<Oe.aabb.miny&&(Oe.aabb.miny=Be.y),Be.y>Oe.aabb.maxy&&(Oe.aabb.maxy=Be.y),Ie=Ie.next}}fe<me.minx?me.minx=fe:fe=me.minx,xe<me.miny?me.miny=xe:xe=me.miny,ve>me.maxx?me.maxx=ve:ve=me.maxx,ze>me.maxy?me.maxy=ze:ze=me.maxy;for(var De=1,Re=ge;De<Re;){var Fe=be*De++*de,je=Fe-ne.sweepTime;if(0!=je&&(ne.sweepTime=Fe,ne.posx+=ne.velx*je,ne.posy+=ne.vely*je,0!=ne.angvel)){var Ne=ne.sweep_angvel*je;if(ne.rot+=Ne,1e-4<Ne*Ne)ne.axisx=Math.sin(ne.rot),ne.axisy=Math.cos(ne.rot);else{var Ue=Ne*Ne,Ve=1-.5*Ue,He=1-Ue*Ue/8,We=(Ve*ne.axisx+Ne*ne.axisy)*He;ne.axisy=(Ve*ne.axisy-Ne*ne.axisx)*He,ne.axisx=We}}if(0==ye.type){var Xe=ye.circle;Xe.worldCOMx=Xe.body.posx+(Xe.body.axisy*Xe.localCOMx-Xe.body.axisx*Xe.localCOMy),Xe.worldCOMy=Xe.body.posy+(Xe.localCOMx*Xe.body.axisx+Xe.localCOMy*Xe.body.axisy),Xe.aabb.minx=Xe.worldCOMx-Xe.radius,Xe.aabb.miny=Xe.worldCOMy-Xe.radius,Xe.aabb.maxx=Xe.worldCOMx+Xe.radius,Xe.aabb.maxy=Xe.worldCOMy+Xe.radius}else{var qe=ye.polygon,Ye=qe.lverts.next,Ke=qe.gverts.next,Ze=Ye;Ye=Ye.next,Ke.x=qe.body.posx+(qe.body.axisy*Ze.x-qe.body.axisx*Ze.y),Ke.y=qe.body.posy+(Ze.x*qe.body.axisx+Ze.y*qe.body.axisy),qe.aabb.minx=Ke.x,qe.aabb.miny=Ke.y,qe.aabb.maxx=Ke.x,qe.aabb.maxy=Ke.y;for(var Je=qe.gverts.next.next;null!=Je;){var Qe=Je,$e=Ye;Ye=Ye.next,Qe.x=qe.body.posx+(qe.body.axisy*$e.x-qe.body.axisx*$e.y),Qe.y=qe.body.posy+($e.x*qe.body.axisx+$e.y*qe.body.axisy),Qe.x<qe.aabb.minx&&(qe.aabb.minx=Qe.x),Qe.x>qe.aabb.maxx&&(qe.aabb.maxx=Qe.x),Qe.y<qe.aabb.miny&&(qe.aabb.miny=Qe.y),Qe.y>qe.aabb.maxy&&(qe.aabb.maxy=Qe.y),Je=Je.next}}fe<me.minx?me.minx=fe:fe=me.minx,xe<me.miny?me.miny=xe:xe=me.miny,ve>me.maxx?me.maxx=ve:ve=me.maxx,ze>me.maxy?me.maxy=ze:ze=me.maxy}this.bphase.sync(ye),_e=_e.next}if(ne.sweepFrozen=!1,2==ne.type&&ne.bulletEnabled){var et=Qs.bulletCCDLinearThreshold*ne.sweepRadius,tt=Qs.bulletCCDAngularThreshold;((ne.velx*ne.velx+ne.vely*ne.vely)*e*e>et*et||ne.angvel*ne.angvel*e*e>tt*tt)&&(ne.bullet=!0)}}else ne.sweepFrozen=!0,ne.bullet=!1}ie=ie.next}},si.prototype.continuous=null,si.prototype.presteparb=function(e,t,i){null==i&&(i=!1);if(!e.cleared&&e.b1.component.sleeping&&e.b2.component.sleeping)return e.sleep_stamp=this.stamp,e.sleeping=!0;if(!e.cleared||0!=e.present||e.intchange){var n=!i&&e.up_stamp==this.stamp-1&&!e.cleared&&!e.intchange,r=e.fresh&&!e.cleared&&!e.intchange;if(n&&(e.endGenerated=this.stamp),r||n||e.cleared||e.intchange){for(var o=e.ws1,a=e.ws2,s=this.mrca1;null!=s.head;){var l=s.head;s.head=l.next,l.elt=null,l.next=Jo.zpp_pool,Jo.zpp_pool=l,null==s.head&&(s.pushmod=!0),s.modified=!0,s.length--}s.pushmod=!0;for(var p=this.mrca2;null!=p.head;){var h=p.head;p.head=h.next,h.elt=null,h.next=Jo.zpp_pool,Jo.zpp_pool=h,null==p.head&&(p.pushmod=!0),p.modified=!0,p.length--}if(p.pushmod=!0,null!=o.cbSet){var u,c=this.mrca1;null==Jo.zpp_pool?u=new Jo:(u=Jo.zpp_pool,Jo.zpp_pool=u.next,u.next=null),u.elt=o;var d=u;d.next=c.head,c.head=d,c.modified=!0,c.length++}if(null!=o.body.cbSet){var _,y=this.mrca1,m=o.body;null==Jo.zpp_pool?_=new Jo:(_=Jo.zpp_pool,Jo.zpp_pool=_.next,_.next=null),_.elt=m;var f=_;f.next=y.head,y.head=f,y.modified=!0,y.length++}if(null!=a.cbSet){var x,v=this.mrca2;null==Jo.zpp_pool?x=new Jo:(x=Jo.zpp_pool,Jo.zpp_pool=x.next,x.next=null),x.elt=a;var z=x;z.next=v.head,v.head=z,v.modified=!0,v.length++}if(null!=a.body.cbSet){var g,b=this.mrca2,w=a.body;null==Jo.zpp_pool?g=new Jo:(g=Jo.zpp_pool,Jo.zpp_pool=g.next,g.next=null),g.elt=w;var S=g;S.next=b.head,b.head=S,b.modified=!0,b.length++}for(var C=o.body.compound,M=a.body.compound;C!=M;)if((null==C?0:C.depth)<(null==M?0:M.depth)){if(null!=M.cbSet){var P,k=this.mrca2;null==Jo.zpp_pool?P=new Jo:(P=Jo.zpp_pool,Jo.zpp_pool=P.next,P.next=null),P.elt=M;var T=P;T.next=k.head,k.head=T,k.modified=!0,k.length++}M=M.compound}else{if(null!=C.cbSet){var O,A=this.mrca1;null==Jo.zpp_pool?O=new Jo:(O=Jo.zpp_pool,Jo.zpp_pool=O.next,O.next=null),O.elt=C;var E=O;E.next=A.head,A.head=E,A.modified=!0,A.length++}C=C.compound}for(var G=this.mrca1.head;null!=G;){for(var I=G.elt,B=this.mrca2.head;null!=B;){for(var L,D=B.elt,R=I.cbSet,F=D.cbSet,j=null,N=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=N;){var U=N.elt;if(U.a==R&&U.b==F||U.a==F&&U.b==R){j=U;break}N=N.next}if(null==j)null==No.zpp_pool?L=new No:(L=No.zpp_pool,No.zpp_pool=L.next,L.next=null),L.zip_listeners=!0,jo.setlt(R,F)?(L.a=R,L.b=F):(L.a=F,L.b=R),j=L,R.cbpairs.add(j),F!=R&&F.cbpairs.add(j);if(j.zip_listeners&&(j.zip_listeners=!1,j.__validate()),null!=j.listeners.head){var V=qo.get(I,D);if(r||e.intchange){null==V&&(V=Yo.get(I,D),this.add_callbackset(V));for(var H,W=null,X=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=X;){var q=X.elt;if(q.a==R&&q.b==F||q.a==F&&q.b==R){W=q;break}X=X.next}if(null==W)null==No.zpp_pool?H=new No:(H=No.zpp_pool,No.zpp_pool=H.next,H.next=null),H.zip_listeners=!0,jo.setlt(R,F)?(H.a=R,H.b=F):(H.a=F,H.b=R),W=H,R.cbpairs.add(W),F!=R&&F.cbpairs.add(W);W.zip_listeners&&(W.zip_listeners=!1,W.__validate());for(var Y,K,Z=W.listeners.head;null!=Z;){var J=Z.elt;if(0==J.event&&0!=(J.itype&e.type)&&V.empty_arb(J.itype)){var Q=this.push_callback(J);Q.event=0;var $,ee=V.int1,te=V.int2,ie=J.options1,ne=ee.cbTypes;if(ie.nonemptyintersection(ne,ie.includes)&&!ie.nonemptyintersection(ne,ie.excludes)){var re=J.options2,oe=te.cbTypes;$=!!re.nonemptyintersection(oe,re.includes)&&!re.nonemptyintersection(oe,re.excludes)}else $=!1;$?(Q.int1=ee,Q.int2=te):(Q.int1=te,Q.int2=ee),Q.set=V}Z=Z.next}K=!1;for(var ae=V.arbiters.head;null!=ae;){if(ae.elt==e){K=!0;break}ae=ae.next}if(K)Y=!1;else{var se,le=V.arbiters;null==Ko.zpp_pool?se=new Ko:(se=Ko.zpp_pool,Ko.zpp_pool=se.next,se.next=null),se.elt=e;var pe=se;pe.next=le.head,le.head=pe,le.modified=!0,le.length++,Y=!0}Y&&e.present++}else{e.present--,V.remove_arb(e);for(var he,ue=null,ce=(R.cbpairs.length<F.cbpairs.length?R.cbpairs:F.cbpairs).head;null!=ce;){var de=ce.elt;if(de.a==R&&de.b==F||de.a==F&&de.b==R){ue=de;break}ce=ce.next}if(null==ue)null==No.zpp_pool?he=new No:(he=No.zpp_pool,No.zpp_pool=he.next,he.next=null),he.zip_listeners=!0,jo.setlt(R,F)?(he.a=R,he.b=F):(he.a=F,he.b=R),ue=he,R.cbpairs.add(ue),F!=R&&F.cbpairs.add(ue);ue.zip_listeners&&(ue.zip_listeners=!1,ue.__validate());for(var _e=ue.listeners.head;null!=_e;){var ye=_e.elt;if(1==ye.event&&0!=(ye.itype&e.type)&&V.empty_arb(ye.itype)){var me=this.push_callback(ye);me.event=1;var fe,xe=V.int1,ve=V.int2,ze=ye.options1,ge=xe.cbTypes;if(ze.nonemptyintersection(ge,ze.includes)&&!ze.nonemptyintersection(ge,ze.excludes)){var be=ye.options2,we=ve.cbTypes;fe=!!be.nonemptyintersection(we,be.includes)&&!be.nonemptyintersection(we,be.excludes)}else fe=!1;fe?(me.int1=xe,me.int2=ve):(me.int1=ve,me.int2=xe),me.set=V}_e=_e.next}null==V.arbiters.head&&this.remove_callbackset(V)}B=B.next}else B=B.next}G=G.next}}e.fresh=!1,e.intchange=!1}if(e.cleared||e.up_stamp+(e.type==pn.COL?Qs.arbiterExpirationDelay:0)<this.stamp){if(e.type==pn.SENSOR){var Se=e.sensorarb;if(!Se.cleared){for(var Ce=Se.b1.arbiters,Me=null,Pe=Ce.head;null!=Pe;){if(Pe.elt==Se){var ke,Te;null==Me?(Te=(ke=Ce.head).next,Ce.head=Te,null==Ce.head&&(Ce.pushmod=!0)):(Te=(ke=Me.next).next,null==(Me.next=Te)&&(Ce.pushmod=!0));var Oe=ke;Oe.elt=null,Oe.next=Ko.zpp_pool,Ko.zpp_pool=Oe,Ce.modified=!0,Ce.length--,Ce.pushmod=!0;break}Pe=(Me=Pe).next}for(var Ae=Se.b2.arbiters,Ee=null,Ge=Ae.head;null!=Ge;){if(Ge.elt==Se){var Ie,Be;null==Ee?(Be=(Ie=Ae.head).next,Ae.head=Be,null==Ae.head&&(Ae.pushmod=!0)):(Be=(Ie=Ee.next).next,null==(Ee.next=Be)&&(Ae.pushmod=!0));var Le=Ie;Le.elt=null,Le.next=Ko.zpp_pool,Ko.zpp_pool=Le,Ae.modified=!0,Ae.length--,Ae.pushmod=!0;break}Ge=(Ee=Ge).next}null!=Se.pair&&(Se.pair.arb=null,Se.pair=null)}Se.b1=Se.b2=null,Se.active=!1,Se.intchange=!1,Se.next=Vo.zpp_pool,Vo.zpp_pool=Se}else if(e.type==pn.FLUID){var De=e.fluidarb;if(!De.cleared){for(var Re=De.b1.arbiters,Fe=null,je=Re.head;null!=je;){if(je.elt==De){var Ne,Ue;null==Fe?(Ue=(Ne=Re.head).next,Re.head=Ue,null==Re.head&&(Re.pushmod=!0)):(Ue=(Ne=Fe.next).next,null==(Fe.next=Ue)&&(Re.pushmod=!0));var Ve=Ne;Ve.elt=null,Ve.next=Ko.zpp_pool,Ko.zpp_pool=Ve,Re.modified=!0,Re.length--,Re.pushmod=!0;break}je=(Fe=je).next}for(var He=De.b2.arbiters,We=null,Xe=He.head;null!=Xe;){if(Xe.elt==De){var qe,Ye;null==We?(Ye=(qe=He.head).next,He.head=Ye,null==He.head&&(He.pushmod=!0)):(Ye=(qe=We.next).next,null==(We.next=Ye)&&(He.pushmod=!0));var Ke=qe;Ke.elt=null,Ke.next=Ko.zpp_pool,Ko.zpp_pool=Ke,He.modified=!0,He.length--,He.pushmod=!0;break}Xe=(We=Xe).next}null!=De.pair&&(De.pair.arb=null,De.pair=null)}De.b1=De.b2=null,De.active=!1,De.intchange=!1,De.next=Ho.zpp_pool,(Ho.zpp_pool=De).pre_dt=-1}else{var Ze=e.colarb;if(!Ze.cleared){for(var Je=Ze.b1.arbiters,Qe=null,$e=Je.head;null!=$e;){if($e.elt==Ze){var et,tt;null==Qe?(tt=(et=Je.head).next,Je.head=tt,null==Je.head&&(Je.pushmod=!0)):(tt=(et=Qe.next).next,null==(Qe.next=tt)&&(Je.pushmod=!0));var it=et;it.elt=null,it.next=Ko.zpp_pool,Ko.zpp_pool=it,Je.modified=!0,Je.length--,Je.pushmod=!0;break}$e=(Qe=$e).next}for(var nt=Ze.b2.arbiters,rt=null,ot=nt.head;null!=ot;){if(ot.elt==Ze){var at,st;null==rt?(st=(at=nt.head).next,nt.head=st,null==nt.head&&(nt.pushmod=!0)):(st=(at=rt.next).next,null==(rt.next=st)&&(nt.pushmod=!0));var lt=at;lt.elt=null,lt.next=Ko.zpp_pool,Ko.zpp_pool=lt,nt.modified=!0,nt.length--,nt.pushmod=!0;break}ot=(rt=ot).next}null!=Ze.pair&&(Ze.pair.arb=null,Ze.pair=null)}for(Ze.b1=Ze.b2=null,Ze.active=!1,Ze.intchange=!1;null!=Ze.contacts.next;){var pt=Ze.contacts,ht=pt.next;pt.pop(),ht.arbiter=null,ht.next=Xo.zpp_pool,Xo.zpp_pool=ht;var ut=Ze.innards,ct=ut.next;ut.next=ct.next,ct._inuse=!1,null==ut.next&&(ut.pushmod=!0),ut.modified=!0,ut.length--}Ze.userdef_dyn_fric=!1,Ze.userdef_stat_fric=!1,Ze.userdef_restitution=!1,Ze.userdef_rfric=!1,Ze.__ref_edge1=Ze.__ref_edge2=null,Ze.next=Wo.zpp_pool,(Wo.zpp_pool=Ze).pre_dt=-1}return!0}var dt=e.active;if(e.active=e.presentable=e.up_stamp==this.stamp,0!=(1&e.immState)){if(e.active&&e.type!=pn.SENSOR)if(null!=e.colarb){var _t=e.colarb;_t.invalidated&&(_t.invalidated=!1,_t.userdef_restitution||(_t.s1.material.elasticity<=-1/0||_t.s2.material.elasticity<=-1/0?_t.restitution=0:_t.s1.material.elasticity>=1/0||_t.s2.material.elasticity>=1/0?_t.restitution=1:_t.restitution=(_t.s1.material.elasticity+_t.s2.material.elasticity)/2,_t.restitution<0&&(_t.restitution=0),1<_t.restitution&&(_t.restitution=1)),_t.userdef_dyn_fric||(_t.dyn_fric=Math.sqrt(_t.s1.material.dynamicFriction*_t.s2.material.dynamicFriction)),_t.userdef_stat_fric||(_t.stat_fric=Math.sqrt(_t.s1.material.staticFriction*_t.s2.material.staticFriction)),_t.userdef_rfric||(_t.rfric=Math.sqrt(_t.s1.material.rollingFriction*_t.s2.material.rollingFriction))),-1==_t.pre_dt&&(_t.pre_dt=t);var yt=t/_t.pre_dt;_t.pre_dt=t;var mt=_t.b1.smass+_t.b2.smass,ft=!(_t.hc2=!1);_t.biasCoef=2!=_t.b1.type||2!=_t.b2.type?_t.continuous?Qs.contactContinuousStaticBiasCoef:Qs.contactStaticBiasCoef:_t.continuous?Qs.contactContinuousBiasCoef:Qs.contactBiasCoef,_t.continuous=!1;for(var xt=null,vt=null,zt=_t.innards.next,gt=_t.contacts.next;null!=gt;){var bt=gt;if(bt.stamp+Qs.arbiterExpirationDelay<_t.stamp){var wt,St,Ct=_t.contacts;null==xt?(St=(wt=Ct.next).next,Ct.next=St,null==Ct.next&&(Ct.pushmod=!0)):(St=(wt=xt.next).next,null==(xt.next=St)&&(Ct.pushmod=!0)),wt._inuse=!1,Ct.modified=!0,Ct.length--,Ct.pushmod=!0,gt=St;var Mt,Pt,kt=_t.innards;null==vt?(Pt=(Mt=kt.next).next,kt.next=Pt,null==kt.next&&(kt.pushmod=!0)):(Pt=(Mt=vt.next).next,null==(vt.next=Pt)&&(kt.pushmod=!0)),Mt._inuse=!1,kt.modified=!0,kt.length--,kt.pushmod=!0,zt=Pt,bt.arbiter=null,bt.next=Xo.zpp_pool,Xo.zpp_pool=bt}else{var Tt=bt.inner,Ot=bt.active;if(bt.active=bt.stamp==_t.stamp,bt.active){ft?(ft=!1,_t.c1=Tt,_t.oc1=bt):(_t.hc2=!0,_t.c2=Tt,_t.oc2=bt),Tt.r2x=bt.px-_t.b2.posx,Tt.r2y=bt.py-_t.b2.posy,Tt.r1x=bt.px-_t.b1.posx,Tt.r1y=bt.py-_t.b1.posy;var At=Tt.r2x*_t.nx+Tt.r2y*_t.ny,Et=mt+_t.b2.sinertia*(At*At),Gt=Tt.r1x*_t.nx+Tt.r1y*_t.ny;Et+=_t.b1.sinertia*(Gt*Gt),Tt.tMass=Et<Qs.epsilon*Qs.epsilon?0:1/Et;var It=_t.ny*Tt.r2x-_t.nx*Tt.r2y,Bt=mt+_t.b2.sinertia*(It*It),Lt=_t.ny*Tt.r1x-_t.nx*Tt.r1y;Bt+=_t.b1.sinertia*(Lt*Lt),Tt.nMass=Bt<Qs.epsilon*Qs.epsilon?0:1/Bt;var Dt=0,Rt=0,Ft=_t.b2.angvel+_t.b2.kinangvel;Dt=_t.b2.velx+_t.b2.kinvelx-Tt.r2y*Ft,Rt=_t.b2.vely+_t.b2.kinvely+Tt.r2x*Ft,Ft=_t.b1.angvel+_t.b1.kinangvel,Dt-=_t.b1.velx+_t.b1.kinvelx-Tt.r1y*Ft,Rt-=_t.b1.vely+_t.b1.kinvely+Tt.r1x*Ft;var jt=_t.nx*Dt+_t.ny*Rt;bt.elasticity=_t.restitution,Tt.bounce=jt*bt.elasticity,Tt.bounce>-Qs.elasticThreshold&&(Tt.bounce=0),jt=Rt*_t.nx-Dt*_t.ny;var Nt=Qs.staticFrictionThreshold;Tt.friction=Nt*Nt<jt*jt?_t.dyn_fric:_t.stat_fric,Tt.jnAcc*=yt,Tt.jtAcc*=yt}Ot!=bt.active&&(_t.contacts.modified=!0),xt=gt,zt=(vt=zt).next,gt=gt.next}}if(_t.hc2){if(_t.hpc2=!0,_t.oc1.posOnly){var Ut=_t.c1;_t.c1=_t.c2,_t.c2=Ut;var Vt=_t.oc1;_t.oc1=_t.oc2,_t.oc2=Vt,_t.hc2=!1}else _t.oc2.posOnly&&(_t.hc2=!1);_t.oc1.posOnly&&(ft=!0)}else _t.hpc2=!1;if(_t.jrAcc*=yt,ft||(_t.rn1a=_t.ny*_t.c1.r1x-_t.nx*_t.c1.r1y,_t.rt1a=_t.c1.r1x*_t.nx+_t.c1.r1y*_t.ny,_t.rn1b=_t.ny*_t.c1.r2x-_t.nx*_t.c1.r2y,_t.rt1b=_t.c1.r2x*_t.nx+_t.c1.r2y*_t.ny,_t.k1x=_t.b2.kinvelx-_t.c1.r2y*_t.b2.kinangvel-(_t.b1.kinvelx-_t.c1.r1y*_t.b1.kinangvel),_t.k1y=_t.b2.kinvely+_t.c1.r2x*_t.b2.kinangvel-(_t.b1.kinvely+_t.c1.r1x*_t.b1.kinangvel)),_t.hc2)if(_t.rn2a=_t.ny*_t.c2.r1x-_t.nx*_t.c2.r1y,_t.rt2a=_t.c2.r1x*_t.nx+_t.c2.r1y*_t.ny,_t.rn2b=_t.ny*_t.c2.r2x-_t.nx*_t.c2.r2y,_t.rt2b=_t.c2.r2x*_t.nx+_t.c2.r2y*_t.ny,_t.k2x=_t.b2.kinvelx-_t.c2.r2y*_t.b2.kinangvel-(_t.b1.kinvelx-_t.c2.r1y*_t.b1.kinangvel),_t.k2y=_t.b2.kinvely+_t.c2.r2x*_t.b2.kinangvel-(_t.b1.kinvely+_t.c2.r1x*_t.b1.kinangvel),_t.kMassa=mt+_t.b1.sinertia*_t.rn1a*_t.rn1a+_t.b2.sinertia*_t.rn1b*_t.rn1b,_t.kMassb=mt+_t.b1.sinertia*_t.rn1a*_t.rn2a+_t.b2.sinertia*_t.rn1b*_t.rn2b,_t.kMassc=mt+_t.b1.sinertia*_t.rn2a*_t.rn2a+_t.b2.sinertia*_t.rn2b*_t.rn2b,_t.kMassa*_t.kMassa+2*_t.kMassb*_t.kMassb+_t.kMassc*_t.kMassc<Qs.illConditionedThreshold*(_t.kMassa*_t.kMassc-_t.kMassb*_t.kMassb)){_t.Ka=_t.kMassa,_t.Kb=_t.kMassb,_t.Kc=_t.kMassc;var Ht=_t.kMassa*_t.kMassc-_t.kMassb*_t.kMassb;if(Ht!=Ht)_t.kMassa=_t.kMassb=_t.kMassc=0;else if(0==Ht)0!=_t.kMassa?_t.kMassa=1/_t.kMassa:_t.kMassa=0,0!=_t.kMassc?_t.kMassc=1/_t.kMassc:_t.kMassc=0,_t.kMassb=0;else{Ht=1/Ht;var Wt=_t.kMassc*Ht;_t.kMassc=_t.kMassa*Ht,_t.kMassa=Wt,_t.kMassb*=-Ht}}else{if(_t.hc2=!1,_t.oc2.dist<_t.oc1.dist){var Xt=_t.c1;_t.c1=_t.c2,_t.c2=Xt}_t.oc2.active=!1,_t.contacts.modified=!0}_t.surfacex=_t.b2.svelx,_t.surfacey=_t.b2.svely,_t.surfacex+=_t.b1.svelx,_t.surfacey+=_t.b1.svely,_t.surfacex=-_t.surfacex,_t.surfacey=-_t.surfacey,_t.rMass=_t.b1.sinertia+_t.b2.sinertia,0!=_t.rMass&&(_t.rMass=1/_t.rMass),ft&&(e.active=!1)}else{var qt=e.fluidarb;-1==qt.pre_dt&&(qt.pre_dt=t);var Yt=t/qt.pre_dt;qt.pre_dt=t,qt.r1x=qt.centroidx-qt.b1.posx,qt.r1y=qt.centroidy-qt.b1.posy,qt.r2x=qt.centroidx-qt.b2.posx,qt.r2y=qt.centroidy-qt.b2.posy;var Kt=0,Zt=0;qt.ws1.fluidEnabled&&null!=qt.ws1.fluidProperties.wrap_gravity?(Kt=qt.ws1.fluidProperties.gravityx,Zt=qt.ws1.fluidProperties.gravityy):(Kt=this.gravityx,Zt=this.gravityy);var Jt=0,Qt=0;qt.ws2.fluidEnabled&&null!=qt.ws2.fluidProperties.wrap_gravity?(Jt=qt.ws2.fluidProperties.gravityx,Qt=qt.ws2.fluidProperties.gravityy):(Jt=this.gravityx,Qt=this.gravityy);var $t=0,ei=0;if(qt.ws1.fluidEnabled&&qt.ws2.fluidEnabled){var ti=qt.overlap*qt.ws1.fluidProperties.density,ii=qt.overlap*qt.ws2.fluidProperties.density;if(ii<ti){var ni=ti+ii;$t-=Kt*ni,ei-=Zt*ni}else if(ti<ii){var ri=ti+ii;$t+=Jt*ri,ei+=Qt*ri}else{var oi=0,ai=0;if(oi=Kt+Jt,ai=Zt+Qt,oi*=.5,ai*=.5,qt.ws1.worldCOMx*oi+qt.ws1.worldCOMy*ai>qt.ws2.worldCOMx*oi+qt.ws2.worldCOMy*ai){var si=ti+ii;$t-=oi*si,ei-=ai*si}else{var li=ti+ii;$t+=oi*li,ei+=ai*li}}}else if(qt.ws1.fluidEnabled){var pi=qt.overlap*qt.ws1.fluidProperties.density;$t-=Kt*pi,ei-=Zt*pi}else if(qt.ws2.fluidEnabled){var hi=qt.overlap*qt.ws2.fluidProperties.density;$t+=Jt*hi,ei+=Qt*hi}if($t*=t,ei*=t,qt.buoyx=$t,qt.buoyy=ei,2==qt.b1.type){var ui=qt.b1.imass;qt.b1.velx-=$t*ui,qt.b1.vely-=ei*ui,qt.b1.angvel-=(ei*qt.r1x-$t*qt.r1y)*qt.b1.iinertia}if(2==qt.b2.type){var ci=qt.b2.imass;qt.b2.velx+=$t*ci,qt.b2.vely+=ei*ci,qt.b2.angvel+=(ei*qt.r2x-$t*qt.r2y)*qt.b2.iinertia}if(qt.ws1.fluidEnabled&&0!=qt.ws1.fluidProperties.viscosity||qt.ws2.fluidEnabled&&0!=qt.ws2.fluidProperties.viscosity){qt.nodrag=!1;var di=0;if(qt.ws1.fluidEnabled&&(qt.ws2.validate_angDrag(),di=qt.ws1.fluidProperties.viscosity*qt.ws2.angDrag*qt.overlap/qt.ws2.area),qt.ws2.fluidEnabled&&(qt.ws1.validate_angDrag(),di+=qt.ws2.fluidProperties.viscosity*qt.ws1.angDrag*qt.overlap/qt.ws1.area),0!=di){var _i=qt.b1.sinertia+qt.b2.sinertia;qt.wMass=0!=_i?1/_i:0,di*=4e-4;var yi=2*Math.PI*di;qt.agamma=1/(t*yi*(2+yi*t));var mi=1/(1+qt.agamma);qt.agamma*=mi,qt.wMass*=mi}else qt.wMass=0,qt.agamma=0;var fi=qt.b2.velx+qt.b2.kinvelx-qt.r2y*(qt.b2.angvel+qt.b2.kinangvel)-(qt.b1.velx+qt.b1.kinvelx-qt.r1y*(qt.b2.angvel+qt.b2.kinangvel)),xi=qt.b2.vely+qt.b2.kinvely+qt.r2x*(qt.b2.angvel+qt.b2.kinangvel)-(qt.b1.vely+qt.b1.kinvely+qt.r1x*(qt.b1.angvel+qt.b1.kinangvel));if(!(fi*fi+xi*xi<Qs.epsilon*Qs.epsilon)){var vi=1/Math.sqrt(fi*fi+xi*xi);fi*=vi,xi*=vi,qt.nx=fi,qt.ny=xi}var zi=0;if(qt.ws1.fluidEnabled){var gi=-qt.ws1.fluidProperties.viscosity*qt.overlap/qt.ws2.area;if(0==qt.ws2.type)zi=0-gi*qt.ws2.circle.radius*Qs.fluidLinearDrag/(2*qt.ws2.circle.radius*Math.PI);else{for(var bi=0,wi=0,Si=qt.ws2.polygon.edges.head;null!=Si;){var Ci=Si.elt;bi+=Ci.length;var Mi=gi*Ci.length*(Ci.gnormx*qt.nx+Ci.gnormy*qt.ny);0<Mi&&(Mi=Mi*=-Qs.fluidVacuumDrag),wi-=.5*Mi*Qs.fluidLinearDrag,Si=Si.next}zi=wi/bi}}if(qt.ws2.fluidEnabled){var Pi=-qt.ws2.fluidProperties.viscosity*qt.overlap/qt.ws1.area;if(0==qt.ws1.type)zi-=Pi*qt.ws1.circle.radius*Qs.fluidLinearDrag/(2*qt.ws1.circle.radius*Math.PI);else{for(var ki=0,Ti=0,Oi=qt.ws1.polygon.edges.head;null!=Oi;){var Ai=Oi.elt;ki+=Ai.length;var Ei=Pi*Ai.length*(Ai.gnormx*qt.nx+Ai.gnormy*qt.ny);0<Ei&&(Ei=Ei*=-Qs.fluidVacuumDrag),Ti-=.5*Ei*Qs.fluidLinearDrag,Oi=Oi.next}zi+=Ti/ki}}if(0!=zi){var Gi=qt.b1.smass+qt.b2.smass,Ii=0,Bi=0,Li=0;if(Li=Ii=Gi,(Bi=0)!=qt.b1.sinertia){var Di=qt.r1x*qt.b1.sinertia,Ri=qt.r1y*qt.b1.sinertia;Ii=Gi+Ri*qt.r1y,Bi+=-Ri*qt.r1x,Li=Gi+Di*qt.r1x}if(0!=qt.b2.sinertia){var Fi=qt.r2x*qt.b2.sinertia,ji=qt.r2y*qt.b2.sinertia;Ii+=ji*qt.r2y,Bi+=-ji*qt.r2x,Li+=Fi*qt.r2x}var Ni=Ii*Li-Bi*Bi;if(Ni!=Ni)Ii=Bi=Li=0;else if(0==Ni)Ii=0!=Ii?1/Ii:0,Li=0!=Li?1/Li:0,Bi=0;else{var Ui=Li*(Ni=1/Ni);Li=Ii*Ni,Ii=Ui,Bi*=-Ni}qt.vMassa=Ii,qt.vMassb=Bi,qt.vMassc=Li;var Vi=2*Math.PI*zi;qt.lgamma=1/(t*Vi*(2+Vi*t));var Hi=1/(1+qt.lgamma);qt.lgamma*=Hi,qt.vMassa*=Hi,qt.vMassb*=Hi,qt.vMassc*=Hi}else qt.vMassa=0,qt.vMassb=0,qt.vMassc=0,qt.lgamma=0}else qt.nodrag=!0,qt.dampx=0,qt.dampy=0,qt.adamp=0;qt.dampx*=Yt,qt.dampy*=Yt,qt.adamp*=Yt}}else if(null!=e.colarb){var Wi=e.colarb,Xi=!0,qi=null,Yi=null,Ki=Wi.innards.next;Wi.hc2=!1;for(var Zi=Wi.contacts.next;null!=Zi;){var Ji=Zi;if(Ji.stamp+Qs.arbiterExpirationDelay<Wi.stamp){var Qi,$i,en=Wi.contacts;null==qi?($i=(Qi=en.next).next,en.next=$i,null==en.next&&(en.pushmod=!0)):($i=(Qi=qi.next).next,null==(qi.next=$i)&&(en.pushmod=!0)),Qi._inuse=!1,en.modified=!0,en.length--,en.pushmod=!0,Zi=$i;var tn,nn,rn=Wi.innards;null==Yi?(nn=(tn=rn.next).next,rn.next=nn,null==rn.next&&(rn.pushmod=!0)):(nn=(tn=Yi.next).next,null==(Yi.next=nn)&&(rn.pushmod=!0)),tn._inuse=!1,rn.modified=!0,rn.length--,rn.pushmod=!0,Ki=nn,Ji.arbiter=null,Ji.next=Xo.zpp_pool,Xo.zpp_pool=Ji}else{var on=Ji.inner,an=Ji.active;Ji.active=Ji.stamp==Wi.stamp,Ji.active&&(Xi?(Xi=!1,Wi.c1=on,Wi.oc1=Ji):(Wi.hc2=!0,Wi.c2=on,Wi.oc2=Ji)),an!=Ji.active&&(Wi.contacts.modified=!0),qi=Zi,Ki=(Yi=Ki).next,Zi=Zi.next}}if(Wi.hc2){if(Wi.hpc2=!0,Wi.oc1.posOnly){var sn=Wi.c1;Wi.c1=Wi.c2,Wi.c2=sn;var ln=Wi.oc1;Wi.oc1=Wi.oc2,Wi.oc2=ln,Wi.hc2=!1}else Wi.oc2.posOnly&&(Wi.hc2=!1);Wi.oc1.posOnly&&(Xi=!0)}else Wi.hpc2=!1;Xi&&(e.active=!1)}return dt!=e.active&&(e.b1.arbiters.modified=!0,e.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=!0,this.s_arbiters.modified=this.f_arbiters.modified=!0),!1},si.prototype.prestep=function(e){for(var t=null,i=this.live_constraints.head;null!=i;){var n=i.elt;n.preStep(e)?(i=this.live_constraints.erase(t),n.broken(),this.constraintCbBreak(n),n.removeOnBreak?(n.component.sleeping=!0,this.midstep=!1,null!=n.compound?n.compound.wrap_constraints.remove(n.outer):this.wrap_constraints.remove(n.outer),this.midstep=!0):n.active=!1,n.clearcache()):i=(t=i).next}var r=null,o=this.c_arbiters_true,a=o.head,s=null!=this.c_arbiters_false;for(s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null);null!=a;)if(this.presteparb(a.elt,e)){var l,p;null==r?(p=(l=o.head).next,o.head=p,null==o.head&&(o.pushmod=!0)):(p=(l=r.next).next,null==(r.next=p)&&(o.pushmod=!0));var h=l;h.elt=null,h.next=ea.zpp_pool,ea.zpp_pool=h,o.modified=!0,o.length--,o.pushmod=!0,a=p,s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null)}else a=(r=a).next,s&&null==a&&(s=!1,a=this.c_arbiters_false.head,o=this.c_arbiters_false,r=null);for(var u=null,c=this.f_arbiters,d=c.head;null!=d;)if(this.presteparb(d.elt,e)){var _,y;null==u?(y=(_=c.head).next,c.head=y,null==c.head&&(c.pushmod=!0)):(y=(_=u.next).next,null==(u.next=y)&&(c.pushmod=!0));var m=_;m.elt=null,m.next=Qo.zpp_pool,Qo.zpp_pool=m,c.modified=!0,c.length--,c.pushmod=!0,d=y}else d=(u=d).next;for(var f=null,x=this.s_arbiters,v=x.head;null!=v;)if(this.presteparb(v.elt,e)){var z,g;null==f?(g=(z=x.head).next,x.head=g,null==x.head&&(x.pushmod=!0)):(g=(z=f.next).next,null==(f.next=g)&&(x.pushmod=!0));var b=z;b.elt=null,b.next=$o.zpp_pool,$o.zpp_pool=b,x.modified=!0,x.length--,x.pushmod=!0,v=g}else v=(f=v).next},si.prototype.warmStart=function(){for(var e=this.f_arbiters.head;null!=e;){var t=e.elt;if(t.active&&0!=(1&t.immState)){var i=t.b1.imass;t.b1.velx-=t.dampx*i,t.b1.vely-=t.dampy*i;var n=t.b2.imass;t.b2.velx+=t.dampx*n,t.b2.vely+=t.dampy*n,t.b1.angvel-=t.b1.iinertia*(t.dampy*t.r1x-t.dampx*t.r1y),t.b2.angvel+=t.b2.iinertia*(t.dampy*t.r2x-t.dampx*t.r2y),t.b1.angvel-=t.adamp*t.b1.iinertia,t.b2.angvel+=t.adamp*t.b2.iinertia}e=e.next}var r=this.c_arbiters_false.head,o=!0;for(null==r&&(r=this.c_arbiters_true.head,o=!1);null!=r;){var a=r.elt;if(a.active&&0!=(1&a.immState)){var s=a.nx*a.c1.jnAcc-a.ny*a.c1.jtAcc,l=a.ny*a.c1.jnAcc+a.nx*a.c1.jtAcc,p=a.b1.imass;a.b1.velx-=s*p,a.b1.vely-=l*p,a.b1.angvel-=a.b1.iinertia*(l*a.c1.r1x-s*a.c1.r1y);var h=a.b2.imass;if(a.b2.velx+=s*h,a.b2.vely+=l*h,a.b2.angvel+=a.b2.iinertia*(l*a.c1.r2x-s*a.c1.r2y),a.hc2){var u=a.nx*a.c2.jnAcc-a.ny*a.c2.jtAcc,c=a.ny*a.c2.jnAcc+a.nx*a.c2.jtAcc,d=a.b1.imass;a.b1.velx-=u*d,a.b1.vely-=c*d,a.b1.angvel-=a.b1.iinertia*(c*a.c2.r1x-u*a.c2.r1y);var _=a.b2.imass;a.b2.velx+=u*_,a.b2.vely+=c*_,a.b2.angvel+=a.b2.iinertia*(c*a.c2.r2x-u*a.c2.r2y)}a.b2.angvel+=a.jrAcc*a.b2.iinertia,a.b1.angvel-=a.jrAcc*a.b1.iinertia}r=r.next,o&&null==r&&(r=this.c_arbiters_true.head,o=!1)}for(var y=this.live_constraints.head;null!=y;)y.elt.warmStart(),y=y.next},si.prototype.iterateVel=function(e){for(var t=0;t<e;){++t;for(var i=this.f_arbiters.head;null!=i;){var n=i.elt;if(n.active&&0!=(1&n.immState)&&!n.nodrag){var r=n.b1.angvel+n.b1.kinangvel,o=n.b2.angvel+n.b2.kinangvel,a=n.b1.velx+n.b1.kinvelx-n.r1y*r-(n.b2.velx+n.b2.kinvelx-n.r2y*o),s=n.b1.vely+n.b1.kinvely+n.r1x*r-(n.b2.vely+n.b2.kinvely+n.r2x*o),l=n.vMassa*a+n.vMassb*s;s=n.vMassb*a+n.vMassc*s,a=l;var p=n.lgamma;a-=n.dampx*p,s-=n.dampy*p,n.dampx+=a,n.dampy+=s;var h=n.b1.imass;n.b1.velx-=a*h,n.b1.vely-=s*h;var u=n.b2.imass;n.b2.velx+=a*u,n.b2.vely+=s*u,n.b1.angvel-=n.b1.iinertia*(s*n.r1x-a*n.r1y),n.b2.angvel+=n.b2.iinertia*(s*n.r2x-a*n.r2y);var c=(r-o)*n.wMass-n.adamp*n.agamma;n.adamp+=c,n.b1.angvel-=c*n.b1.iinertia,n.b2.angvel+=c*n.b2.iinertia}i=i.next}for(var d=null,_=this.live_constraints.head;null!=_;){var y=_.elt;y.applyImpulseVel()?(_=this.live_constraints.erase(d),y.broken(),this.constraintCbBreak(y),y.removeOnBreak?(y.component.sleeping=!0,this.midstep=!1,null!=y.compound?y.compound.wrap_constraints.remove(y.outer):this.wrap_constraints.remove(y.outer),this.midstep=!0):y.active=!1,y.clearcache()):_=(d=_).next}var m=this.c_arbiters_false.head,f=!0;for(null==m&&(m=this.c_arbiters_true.head,f=!1);null!=m;){var x=m.elt;if(x.active&&0!=(1&x.immState)){var v,z,g,b,w,S,C=x.k1x+x.b2.velx-x.c1.r2y*x.b2.angvel-(x.b1.velx-x.c1.r1y*x.b1.angvel),M=x.k1y+x.b2.vely+x.c1.r2x*x.b2.angvel-(x.b1.vely+x.c1.r1x*x.b1.angvel);if(g=(M*x.nx-C*x.ny+x.surfacex)*x.c1.tMass,(b=x.c1.friction*x.c1.jnAcc)<(S=(w=x.c1.jtAcc)-g)?S=b:S<-b&&(S=-b),g=S-w,x.c1.jtAcc=S,v=-x.ny*g,z=x.nx*g,x.b2.velx+=v*x.b2.imass,x.b2.vely+=z*x.b2.imass,x.b1.velx-=v*x.b1.imass,x.b1.vely-=z*x.b1.imass,x.b2.angvel+=x.rt1b*g*x.b2.iinertia,x.b1.angvel-=x.rt1a*g*x.b1.iinertia,x.hc2){var P=x.k2x+x.b2.velx-x.c2.r2y*x.b2.angvel-(x.b1.velx-x.c2.r1y*x.b1.angvel),k=x.k2y+x.b2.vely+x.c2.r2x*x.b2.angvel-(x.b1.vely+x.c2.r1x*x.b1.angvel);g=(k*x.nx-P*x.ny+x.surfacex)*x.c2.tMass,(b=x.c2.friction*x.c2.jnAcc)<(S=(w=x.c2.jtAcc)-g)?S=b:S<-b&&(S=-b),g=S-w,x.c2.jtAcc=S,v=-x.ny*g,z=x.nx*g,x.b2.velx+=v*x.b2.imass,x.b2.vely+=z*x.b2.imass,x.b1.velx-=v*x.b1.imass,x.b1.vely-=z*x.b1.imass,x.b2.angvel+=x.rt2b*g*x.b2.iinertia,x.b1.angvel-=x.rt2a*g*x.b1.iinertia,C=x.k1x+x.b2.velx-x.c1.r2y*x.b2.angvel-(x.b1.velx-x.c1.r1y*x.b1.angvel),M=x.k1y+x.b2.vely+x.c1.r2x*x.b2.angvel-(x.b1.vely+x.c1.r1x*x.b1.angvel),P=x.k2x+x.b2.velx-x.c2.r2y*x.b2.angvel-(x.b1.velx-x.c2.r1y*x.b1.angvel),k=x.k2y+x.b2.vely+x.c2.r2x*x.b2.angvel-(x.b1.vely+x.c2.r1x*x.b1.angvel);var T=x.c1.jnAcc,O=x.c2.jnAcc,A=C*x.nx+M*x.ny+x.surfacey+x.c1.bounce-(x.Ka*T+x.Kb*O),E=P*x.nx+k*x.ny+x.surfacey+x.c2.bounce-(x.Kb*T+x.Kc*O),G=-(x.kMassa*A+x.kMassb*E),I=-(x.kMassb*A+x.kMassc*E);0<=G&&0<=I?(A=G-T,E=I-O,x.c1.jnAcc=G,x.c2.jnAcc=I):0<=(G=-x.c1.nMass*A)&&0<=x.Kb*G+E?(A=G-T,E=-O,x.c1.jnAcc=G,x.c2.jnAcc=0):0<=(I=-x.c2.nMass*E)&&0<=x.Kb*I+A?(A=-T,E=I-O,x.c1.jnAcc=0,x.c2.jnAcc=I):0<=A&&0<=E?(A=-T,E=-O,x.c1.jnAcc=x.c2.jnAcc=0):E=A=0,g=A+E,v=x.nx*g,z=x.ny*g,x.b2.velx+=v*x.b2.imass,x.b2.vely+=z*x.b2.imass,x.b1.velx-=v*x.b1.imass,x.b1.vely-=z*x.b1.imass,x.b2.angvel+=(x.rn1b*A+x.rn2b*E)*x.b2.iinertia,x.b1.angvel-=(x.rn1a*A+x.rn2a*E)*x.b1.iinertia}else 0!=x.radius&&(g=(x.b2.angvel-x.b1.angvel)*x.rMass,b=x.rfric*x.c1.jnAcc,w=x.jrAcc,x.jrAcc-=g,x.jrAcc>b?x.jrAcc=b:x.jrAcc<-b&&(x.jrAcc=-b),g=x.jrAcc-w,x.b2.angvel+=g*x.b2.iinertia,x.b1.angvel-=g*x.b1.iinertia),C=x.k1x+x.b2.velx-x.c1.r2y*x.b2.angvel-(x.b1.velx-x.c1.r1y*x.b1.angvel),M=x.k1y+x.b2.vely+x.c1.r2x*x.b2.angvel-(x.b1.vely+x.c1.r1x*x.b1.angvel),g=(x.c1.bounce+(x.nx*C+x.ny*M)+x.surfacey)*x.c1.nMass,(S=(w=x.c1.jnAcc)-g)<0&&(S=0),g=S-w,x.c1.jnAcc=S,v=x.nx*g,z=x.ny*g,x.b2.velx+=v*x.b2.imass,x.b2.vely+=z*x.b2.imass,x.b1.velx-=v*x.b1.imass,x.b1.vely-=z*x.b1.imass,x.b2.angvel+=x.rn1b*g*x.b2.iinertia,x.b1.angvel-=x.rn1a*g*x.b1.iinertia}m=m.next,f&&null==m&&(m=this.c_arbiters_true.head,f=!1)}}},si.prototype.iteratePos=function(e){for(var t=0;t<e;){++t;for(var i=null,n=this.live_constraints.head;null!=n;){var r=n.elt;!r.__velocity&&r.stiff&&r.applyImpulsePos()?(n=this.live_constraints.erase(i),r.broken(),this.constraintCbBreak(r),r.removeOnBreak?(r.component.sleeping=!0,this.midstep=!1,null!=r.compound?r.compound.wrap_constraints.remove(r.outer):this.wrap_constraints.remove(r.outer),this.midstep=!0):r.active=!1,r.clearcache()):n=(i=n).next}var o=this.c_arbiters_false.head,a=!0;for(null==o&&(o=this.c_arbiters_true.head,a=!1);null!=o;){var s=o.elt;if(s.active&&0!=(1&s.immState))if(2==s.ptype){var l=s.c1,p=0,h=0;p=s.b2.axisy*l.lr2x-s.b2.axisx*l.lr2y,h=l.lr2x*s.b2.axisx+l.lr2y*s.b2.axisy,p+=s.b2.posx,h+=s.b2.posy;var u=0,c=0;u=s.b1.axisy*l.lr1x-s.b1.axisx*l.lr1y,c=l.lr1x*s.b1.axisx+l.lr1y*s.b1.axisy;var d=0,_=0;d=p-(u+=s.b1.posx),_=h-(c+=s.b1.posy);var y=Math.sqrt(d*d+_*_),m=s.radius-Qs.collisionSlop,f=y-m;if(d*s.nx+_*s.ny<0&&(d=-d,_=-_,f-=s.radius),f<0)if(y<Qs.epsilon)0!=s.b1.smass?s.b1.posx+=10*Qs.epsilon:s.b2.posx+=10*Qs.epsilon;else{var x=1/y;d*=x;var v=.5*(u+p),z=.5*(c+h),g=y-m,b=(_*=x)*(u=v-s.b1.posx)-d*(c=z-s.b1.posy),w=_*(p=v-s.b2.posx)-d*(h=z-s.b2.posy),S=s.b2.smass+w*w*s.b2.sinertia+s.b1.smass+b*b*s.b1.sinertia;if(0!=S){var C,M,P=-s.biasCoef*g/S;C=d*P,M=_*P;var k=s.b1.imass;s.b1.posx-=C*k,s.b1.posy-=M*k;var T=s.b1,O=-b*s.b1.iinertia*P;if(T.rot+=O,1e-4<O*O)T.axisx=Math.sin(T.rot),T.axisy=Math.cos(T.rot);else{var A=O*O,E=1-.5*A,G=1-A*A/8,I=(E*T.axisx+O*T.axisy)*G;T.axisy=(E*T.axisy-O*T.axisx)*G,T.axisx=I}var B=s.b2.imass;s.b2.posx+=C*B,s.b2.posy+=M*B;var L=s.b2,D=w*s.b2.iinertia*P;if(L.rot+=D,1e-4<D*D)L.axisx=Math.sin(L.rot),L.axisy=Math.cos(L.rot);else{var R=D*D,F=1-.5*R,j=1-R*R/8,N=(F*L.axisx+D*L.axisy)*j;L.axisy=(F*L.axisy-D*L.axisx)*j,L.axisx=N}}}}else{var U,V=0,H=0,W=0,X=0,q=0,Y=0;0==s.ptype?(V=s.b1.axisy*s.lnormx-s.b1.axisx*s.lnormy,H=s.lnormx*s.b1.axisx+s.lnormy*s.b1.axisy,U=s.lproj+(V*s.b1.posx+H*s.b1.posy),W=s.b2.axisy*s.c1.lr1x-s.b2.axisx*s.c1.lr1y,X=s.c1.lr1x*s.b2.axisx+s.c1.lr1y*s.b2.axisy,W+=s.b2.posx,X+=s.b2.posy,s.hpc2&&(q=s.b2.axisy*s.c2.lr1x-s.b2.axisx*s.c2.lr1y,Y=s.c2.lr1x*s.b2.axisx+s.c2.lr1y*s.b2.axisy,q+=s.b2.posx,Y+=s.b2.posy)):(V=s.b2.axisy*s.lnormx-s.b2.axisx*s.lnormy,H=s.lnormx*s.b2.axisx+s.lnormy*s.b2.axisy,U=s.lproj+(V*s.b2.posx+H*s.b2.posy),W=s.b1.axisy*s.c1.lr1x-s.b1.axisx*s.c1.lr1y,X=s.c1.lr1x*s.b1.axisx+s.c1.lr1y*s.b1.axisy,W+=s.b1.posx,X+=s.b1.posy,s.hpc2&&(q=s.b1.axisy*s.c2.lr1x-s.b1.axisx*s.c2.lr1y,Y=s.c2.lr1x*s.b1.axisx+s.c2.lr1y*s.b1.axisy,q+=s.b1.posx,Y+=s.b1.posy));var K=W*V+X*H-U-s.radius;K+=Qs.collisionSlop;var Z=0;if(s.hpc2&&(Z=q*V+Y*H-U-s.radius,Z+=Qs.collisionSlop),K<0||Z<0){s.rev&&(V=-V,H=-H);var J,Q;J=W-s.b1.posx,Q=X-s.b1.posy;var $,ee;$=W-s.b2.posx,ee=X-s.b2.posy;if(s.hpc2){var te=H*J-V*Q,ie=H*$-V*ee,ne=H*(q-s.b1.posx)-V*(Y-s.b1.posy),re=H*(q-s.b2.posx)-V*(Y-s.b2.posy),oe=s.b1.smass+s.b2.smass;s.kMassa=oe+s.b1.sinertia*te*te+s.b2.sinertia*ie*ie,s.kMassb=oe+s.b1.sinertia*te*ne+s.b2.sinertia*ie*re,s.kMassc=oe+s.b1.sinertia*ne*ne+s.b2.sinertia*re*re;var ae,se,le;ae=s.kMassa,se=s.kMassb,le=s.kMassc;for(var pe=K*s.biasCoef,he=Z*s.biasCoef;;){var ue=0,ce=0;ue=-(ue=pe),ce=-(ce=he);var de=s.kMassa*s.kMassc-s.kMassb*s.kMassb;if(de!=de)ue=ce=0;else if(0==de)0!=s.kMassa?ue/=s.kMassa:ue=0,0!=s.kMassc?ce/=s.kMassc:ce=0;else{var _e=(de=1/de)*(s.kMassc*ue-s.kMassb*ce);ce=de*(s.kMassa*ce-s.kMassb*ue),ue=_e}if(0<=ue&&0<=ce){var ye=(ue+ce)*s.b1.imass;s.b1.posx-=V*ye,s.b1.posy-=H*ye;var me=s.b1,fe=-s.b1.iinertia*(te*ue+ne*ce);if(me.rot+=fe,1e-4<fe*fe)me.axisx=Math.sin(me.rot),me.axisy=Math.cos(me.rot);else{var xe=fe*fe,ve=1-.5*xe,ze=1-xe*xe/8,ge=(ve*me.axisx+fe*me.axisy)*ze;me.axisy=(ve*me.axisy-fe*me.axisx)*ze,me.axisx=ge}var be=(ue+ce)*s.b2.imass;s.b2.posx+=V*be,s.b2.posy+=H*be;var we=s.b2,Se=s.b2.iinertia*(ie*ue+re*ce);if(we.rot+=Se,1e-4<Se*Se)we.axisx=Math.sin(we.rot),we.axisy=Math.cos(we.rot);else{var Ce=Se*Se,Me=1-.5*Ce,Pe=1-Ce*Ce/8,ke=(Me*we.axisx+Se*we.axisy)*Pe;we.axisy=(Me*we.axisy-Se*we.axisx)*Pe,we.axisx=ke}break}if((ce=0)<=(ue=-pe/ae)&&0<=se*ue+he){var Te=(ue+ce)*s.b1.imass;s.b1.posx-=V*Te,s.b1.posy-=H*Te;var Oe=s.b1,Ae=-s.b1.iinertia*(te*ue+ne*ce);if(Oe.rot+=Ae,1e-4<Ae*Ae)Oe.axisx=Math.sin(Oe.rot),Oe.axisy=Math.cos(Oe.rot);else{var Ee=Ae*Ae,Ge=1-.5*Ee,Ie=1-Ee*Ee/8,Be=(Ge*Oe.axisx+Ae*Oe.axisy)*Ie;Oe.axisy=(Ge*Oe.axisy-Ae*Oe.axisx)*Ie,Oe.axisx=Be}var Le=(ue+ce)*s.b2.imass;s.b2.posx+=V*Le,s.b2.posy+=H*Le;var De=s.b2,Re=s.b2.iinertia*(ie*ue+re*ce);if(De.rot+=Re,1e-4<Re*Re)De.axisx=Math.sin(De.rot),De.axisy=Math.cos(De.rot);else{var Fe=Re*Re,je=1-.5*Fe,Ne=1-Fe*Fe/8,Ue=(je*De.axisx+Re*De.axisy)*Ne;De.axisy=(je*De.axisy-Re*De.axisx)*Ne,De.axisx=Ue}break}if((ue=0)<=(ce=-he/le)&&0<=se*ce+pe){var Ve=(ue+ce)*s.b1.imass;s.b1.posx-=V*Ve,s.b1.posy-=H*Ve;var He=s.b1,We=-s.b1.iinertia*(te*ue+ne*ce);if(He.rot+=We,1e-4<We*We)He.axisx=Math.sin(He.rot),He.axisy=Math.cos(He.rot);else{var Xe=We*We,qe=1-.5*Xe,Ye=1-Xe*Xe/8,Ke=(qe*He.axisx+We*He.axisy)*Ye;He.axisy=(qe*He.axisy-We*He.axisx)*Ye,He.axisx=Ke}var Ze=(ue+ce)*s.b2.imass;s.b2.posx+=V*Ze,s.b2.posy+=H*Ze;var Je=s.b2,Qe=s.b2.iinertia*(ie*ue+re*ce);if(Je.rot+=Qe,1e-4<Qe*Qe)Je.axisx=Math.sin(Je.rot),Je.axisy=Math.cos(Je.rot);else{var $e=Qe*Qe,et=1-.5*$e,tt=1-$e*$e/8,it=(et*Je.axisx+Qe*Je.axisy)*tt;Je.axisy=(et*Je.axisy-Qe*Je.axisx)*tt,Je.axisx=it}break}break}}else{var nt=H*J-V*Q,rt=H*$-V*ee,ot=s.b2.smass+rt*rt*s.b2.sinertia+s.b1.smass+nt*nt*s.b1.sinertia;if(0!=ot){var at,st,lt=-s.biasCoef*K/ot;at=V*lt,st=H*lt;var pt=s.b1.imass;s.b1.posx-=at*pt,s.b1.posy-=st*pt;var ht=s.b1,ut=-nt*s.b1.iinertia*lt;if(ht.rot+=ut,1e-4<ut*ut)ht.axisx=Math.sin(ht.rot),ht.axisy=Math.cos(ht.rot);else{var ct=ut*ut,dt=1-.5*ct,_t=1-ct*ct/8,yt=(dt*ht.axisx+ut*ht.axisy)*_t;ht.axisy=(dt*ht.axisy-ut*ht.axisx)*_t,ht.axisx=yt}var mt=s.b2.imass;s.b2.posx+=at*mt,s.b2.posy+=st*mt;var ft=s.b2,xt=rt*s.b2.iinertia*lt;if(ft.rot+=xt,1e-4<xt*xt)ft.axisx=Math.sin(ft.rot),ft.axisy=Math.cos(ft.rot);else{var vt=xt*xt,zt=1-.5*vt,gt=1-vt*vt/8,bt=(zt*ft.axisx+xt*ft.axisy)*gt;ft.axisy=(zt*ft.axisy-xt*ft.axisx)*gt,ft.axisx=bt}}}}}o=o.next,a&&null==o&&(o=this.c_arbiters_true.head,a=!1)}}},si.prototype.group_ignore=function(e,t){for(var i=e;null!=i&&null==i.group;)i=null!=i.ishape?i.ishape.body:null!=i.icompound?i.icompound.compound:i.ibody.compound;var n=null==i?null:i.group;if(null==n)return!1;for(var r=t;null!=r&&null==r.group;)r=null!=r.ishape?r.ishape.body:null!=r.icompound?r.icompound.compound:r.ibody.compound;var o=null==r?null:r.group;if(null==o)return!1;for(var a=!1;null!=n&&null!=o;){if(n==o){a=n.ignore;break}n.depth<o.depth?o=o.group:n=n.group}return a},si.prototype.interactionType=function(e,t,i,n){var r;r=!1;for(var o,a=i.constraints.head;null!=a;){var s=a.elt;if(s.ignore&&s.pair_exists(i.id,n.id)){r=!0;break}a=a.next}if(r)o=!1;else{for(var l=e;null!=l&&null==l.group;)l=null!=l.ishape?l.ishape.body:null!=l.icompound?l.icompound.compound:l.ibody.compound;var p,h=null==l?null:l.group;if(null==h)p=!1;else{for(var u=t;null!=u&&null==u.group;)u=null!=u.ishape?u.ishape.body:null!=u.icompound?u.icompound.compound:u.ibody.compound;var c=null==u?null:u.group;if(null==c)p=!1;else{for(var d=!1;null!=h&&null!=c;){if(h==c){d=h.ignore;break}h.depth<c.depth?c=c.group:h=h.group}p=d}}o=!p}if(o){var _,y;if(e.sensorEnabled||t.sensorEnabled){var m=e.filter,f=t.filter;_=0!=(m.sensorMask&f.sensorGroup)&&0!=(f.sensorMask&m.sensorGroup)}else _=!1;if(_)return 2;if(e.fluidEnabled||t.fluidEnabled){var x=e.filter,v=t.filter;y=0!=(x.fluidMask&v.fluidGroup)&&0!=(v.fluidMask&x.fluidGroup)}else y=!1;if(!!y&&!(0==i.imass&&0==n.imass&&0==i.iinertia&&0==n.iinertia))return 0;var z=e.filter,g=t.filter;return 0!=(z.collisionMask&g.collisionGroup)&&0!=(g.collisionMask&z.collisionGroup)&&!(0==i.imass&&0==n.imass&&0==i.iinertia&&0==n.iinertia)?1:-1}return-1},si.prototype.precb=null,si.prototype.prelisteners=null,si.prototype.narrowPhase=function(e,t,i,n,r){var o,a=null,s=e.body,l=t.body;o=!1;for(var p,h,u=s.constraints.head;null!=u;){var c=u.elt;if(c.ignore&&c.pair_exists(s.id,l.id)){o=!0;break}u=u.next}if(o)h=!1;else{for(var d=e;null!=d&&null==d.group;)d=null!=d.ishape?d.ishape.body:null!=d.icompound?d.icompound.compound:d.ibody.compound;var _,y=null==d?null:d.group;if(null==y)_=!1;else{for(var m=t;null!=m&&null==m.group;)m=null!=m.ishape?m.ishape.body:null!=m.icompound?m.icompound.compound:m.ibody.compound;var f=null==m?null:m.group;if(null==f)_=!1;else{for(var x=!1;null!=y&&null!=f;){if(y==f){x=y.ignore;break}y.depth<f.depth?f=f.group:y=y.group}_=x}}h=!_}if(h){var v;if(e.sensorEnabled||t.sensorEnabled){var z=e.filter,g=t.filter;v=0!=(z.sensorMask&g.sensorGroup)&&0!=(g.sensorMask&z.sensorGroup)}else v=!1;if(v)p=2;else{var b;if(e.fluidEnabled||t.fluidEnabled){var w=e.filter,S=t.filter;b=0!=(w.fluidMask&S.fluidGroup)&&0!=(S.fluidMask&w.fluidGroup)}else b=!1;if(!!b&&!(0==s.imass&&0==l.imass&&0==s.iinertia&&0==l.iinertia))p=0;else{var C=e.filter,M=t.filter;p=0!=(C.collisionMask&M.collisionGroup)&&0!=(M.collisionMask&C.collisionGroup)&&!(0==s.imass&&0==l.imass&&0==s.iinertia&&0==l.iinertia)?1:-1}}}else p=-1;if(-1!=p){var P,k;e.type>t.type?(P=t,k=e):e.type==t.type?e.id<t.id?(P=e,k=t):(k=e,P=t):(P=e,k=t);var T=P==t;if(0==p){var O;if(null==n){for(var A=null,E=(s.arbiters.length<l.arbiters.length?s:l).arbiters.head;null!=E;){var G=E.elt;if(G.id==P.id&&G.di==k.id){A=G;break}E=E.next}O=A}else O=n;var I,B=null==O,L=!1;if(B)null==Ho.zpp_pool?I=new Ho:(I=Ho.zpp_pool,Ho.zpp_pool=I.next,I.next=null);else if(null==O.fluidarb){O.cleared=!0;for(var D=O.b1.arbiters,R=null,F=D.head;null!=F;){if(F.elt==O){var j,N;null==R?(N=(j=D.head).next,D.head=N,null==D.head&&(D.pushmod=!0)):(N=(j=R.next).next,null==(R.next=N)&&(D.pushmod=!0));var U=j;U.elt=null,U.next=Ko.zpp_pool,Ko.zpp_pool=U,D.modified=!0,D.length--,D.pushmod=!0;break}F=(R=F).next}for(var V=O.b2.arbiters,H=null,W=V.head;null!=W;){if(W.elt==O){var X,q;null==H?(q=(X=V.head).next,V.head=q,null==V.head&&(V.pushmod=!0)):(q=(X=H.next).next,null==(H.next=q)&&(V.pushmod=!0));var Y=X;Y.elt=null,Y.next=Ko.zpp_pool,Ko.zpp_pool=Y,V.modified=!0,V.length--,V.pushmod=!0;break}W=(H=W).next}null!=O.pair&&(O.pair.arb=null,O.pair=null),O.active=!1,this.f_arbiters.modified=!0,null==Ho.zpp_pool?I=new Ho:(I=Ho.zpp_pool,Ho.zpp_pool=I.next,I.next=null),L=B=I.intchange=!0}else I=O.fluidarb;if(B||I.stamp!=this.stamp||r)if(I.stamp=this.stamp,$s.flowCollide(P,k,I)){if(B){var K=P.id,Z=k.id;I.b1=e.body,I.ws1=e,I.b2=t.body,I.ws2=t,I.id=K,I.di=Z;var J,Q=I.b1.arbiters;null==Ko.zpp_pool?J=new Ko:(J=Ko.zpp_pool,Ko.zpp_pool=J.next,J.next=null),J.elt=I;var $=J;$.next=Q.head,Q.head=$,Q.modified=!0,Q.length++;var ee,te=I.b2.arbiters;null==Ko.zpp_pool?ee=new Ko:(ee=Ko.zpp_pool,Ko.zpp_pool=ee.next,ee.next=null),ee.elt=I;var ie=ee;ie.next=te.head,te.head=ie,te.modified=!0,te.length++,I.active=!0,I.present=0,I.cleared=!1,I.sleeping=!1,I.fresh=!1,I.presentable=!1,I.nx=0,I.ny=1,I.dampx=0,I.dampy=0,I.adamp=0;var ne,re=this.f_arbiters;null==Qo.zpp_pool?ne=new Qo:(ne=Qo.zpp_pool,Qo.zpp_pool=ne.next,ne.next=null),ne.elt=I;var oe=ne;oe.next=re.head,re.head=oe,re.modified=!0,re.length++,I.fresh=!L}else I.fresh=I.up_stamp<this.stamp-1||I.endGenerated==this.stamp&&r;if(I.up_stamp=I.stamp,I.fresh||0==(4&I.immState)){for(var ae=!(I.immState=1),se=I.ws1.id>I.ws2.id?I.ws2:I.ws1,le=I.ws1.id>I.ws2.id?I.ws1:I.ws2,pe=this.mrca1;null!=pe.head;){var he=pe.head;pe.head=he.next,he.elt=null,he.next=Jo.zpp_pool,Jo.zpp_pool=he,null==pe.head&&(pe.pushmod=!0),pe.modified=!0,pe.length--}pe.pushmod=!0;for(var ue=this.mrca2;null!=ue.head;){var ce=ue.head;ue.head=ce.next,ce.elt=null,ce.next=Jo.zpp_pool,Jo.zpp_pool=ce,null==ue.head&&(ue.pushmod=!0),ue.modified=!0,ue.length--}if(ue.pushmod=!0,null!=se.cbSet){var de,_e=this.mrca1;null==Jo.zpp_pool?de=new Jo:(de=Jo.zpp_pool,Jo.zpp_pool=de.next,de.next=null),de.elt=se;var ye=de;ye.next=_e.head,_e.head=ye,_e.modified=!0,_e.length++}if(null!=se.body.cbSet){var me,fe=this.mrca1,xe=se.body;null==Jo.zpp_pool?me=new Jo:(me=Jo.zpp_pool,Jo.zpp_pool=me.next,me.next=null),me.elt=xe;var ve=me;ve.next=fe.head,fe.head=ve,fe.modified=!0,fe.length++}if(null!=le.cbSet){var ze,ge=this.mrca2;null==Jo.zpp_pool?ze=new Jo:(ze=Jo.zpp_pool,Jo.zpp_pool=ze.next,ze.next=null),ze.elt=le;var be=ze;be.next=ge.head,ge.head=be,ge.modified=!0,ge.length++}if(null!=le.body.cbSet){var we,Se=this.mrca2,Ce=le.body;null==Jo.zpp_pool?we=new Jo:(we=Jo.zpp_pool,Jo.zpp_pool=we.next,we.next=null),we.elt=Ce;var Me=we;Me.next=Se.head,Se.head=Me,Se.modified=!0,Se.length++}for(var Pe=se.body.compound,ke=le.body.compound;Pe!=ke;)if((null==Pe?0:Pe.depth)<(null==ke?0:ke.depth)){if(null!=ke.cbSet){var Te,Oe=this.mrca2;null==Jo.zpp_pool?Te=new Jo:(Te=Jo.zpp_pool,Jo.zpp_pool=Te.next,Te.next=null),Te.elt=ke;var Ae=Te;Ae.next=Oe.head,Oe.head=Ae,Oe.modified=!0,Oe.length++}ke=ke.compound}else{if(null!=Pe.cbSet){var Ee,Ge=this.mrca1;null==Jo.zpp_pool?Ee=new Jo:(Ee=Jo.zpp_pool,Jo.zpp_pool=Ee.next,Ee.next=null),Ee.elt=Pe;var Ie=Ee;Ie.next=Ge.head,Ge.head=Ie,Ge.modified=!0,Ge.length++}Pe=Pe.compound}for(var Be=this.mrca1.head;null!=Be;){for(var Le=Be.elt,De=this.mrca2.head;null!=De;){for(var Re,Fe=De.elt,je=Le.cbSet,Ne=Fe.cbSet,Ue=null,Ve=(je.cbpairs.length<Ne.cbpairs.length?je.cbpairs:Ne.cbpairs).head;null!=Ve;){var He=Ve.elt;if(He.a==je&&He.b==Ne||He.a==Ne&&He.b==je){Ue=He;break}Ve=Ve.next}if(null==Ue)null==No.zpp_pool?Re=new No:(Re=No.zpp_pool,No.zpp_pool=Re.next,Re.next=null),Re.zip_listeners=!0,jo.setlt(je,Ne)?(Re.a=je,Re.b=Ne):(Re.a=Ne,Re.b=je),Ue=Re,je.cbpairs.add(Ue),Ne!=je&&Ne.cbpairs.add(Ue);if(Ue.zip_listeners&&(Ue.zip_listeners=!1,Ue.__validate()),null!=Ue.listeners.head){for(var We=null,Xe=null,qe=this.prelisteners;null!=qe.head;){var Ye=qe.head;qe.head=Ye.next,Ye.elt=null,Ye.next=Zo.zpp_pool,Zo.zpp_pool=Ye,null==qe.head&&(qe.pushmod=!0),qe.modified=!0,qe.length--}qe.pushmod=!0;for(var Ke,Ze=null,Je=null,Qe=(je.cbpairs.length<Ne.cbpairs.length?je.cbpairs:Ne.cbpairs).head;null!=Qe;){var $e=Qe.elt;if($e.a==je&&$e.b==Ne||$e.a==Ne&&$e.b==je){Je=$e;break}Qe=Qe.next}if(null==Je)null==No.zpp_pool?Ke=new No:(Ke=No.zpp_pool,No.zpp_pool=Ke.next,Ke.next=null),Ke.zip_listeners=!0,jo.setlt(je,Ne)?(Ke.a=je,Ke.b=Ne):(Ke.a=Ne,Ke.b=je),Je=Ke,je.cbpairs.add(Je),Ne!=je&&Ne.cbpairs.add(Je);Je.zip_listeners&&(Je.zip_listeners=!1,Je.__validate());for(var et=Je.listeners.head;null!=et;){var tt=et.elt;if(5==tt.event&&0!=(4&tt.itype)){var it,nt=this.prelisteners;null==Zo.zpp_pool?it=new Zo:(it=Zo.zpp_pool,Zo.zpp_pool=it.next,it.next=null),it.elt=tt;var rt=it;null==Ze?(rt.next=nt.head,nt.head=rt):(rt.next=Ze.next,Ze.next=rt),nt.pushmod=nt.modified=!0,nt.length++,Ze=rt,ae=!!ae||!tt.pure}et=et.next}if(null!=this.prelisteners.head){if(null==(We=qo.get(Le,Fe))&&(Xe=Yo.get(Le,Fe),this.add_callbackset(Xe)),null==We||(We.FLUIDstamp!=this.stamp||r)&&0==(4&We.FLUIDstate)){if(null!=Xe&&(We=Xe),null!=We)for(var ot=this.prelisteners.head;null!=ot;)7==ot.elt.itype&&(We.COLLISIONstamp=this.stamp,We.SENSORstamp=this.stamp),We.FLUIDstamp=this.stamp,ot=ot.next;var at=I.active;I.active=!0,this.precb.zpp_inner.pre_arbiter=I,this.precb.zpp_inner.set=We;for(var st=this.prelisteners.head;null!=st;){var lt=st.elt;this.precb.zpp_inner.listener=lt;var pt,ht=this.precb.zpp_inner,ut=We.int1,ct=We.int2,dt=lt.options1,_t=ut.cbTypes;if(dt.nonemptyintersection(_t,dt.includes)&&!dt.nonemptyintersection(_t,dt.excludes)){var yt=lt.options2,mt=ct.cbTypes;pt=!!yt.nonemptyintersection(mt,yt.includes)&&!yt.nonemptyintersection(mt,yt.excludes)}else pt=!1;pt?(ht.int1=ut,ht.int2=ct):(ht.int1=ct,ht.int2=ut),this.precb.zpp_inner.pre_swapped=Le!=this.precb.zpp_inner.int1;var ft,xt=lt.handlerp(this.precb);if(null!=xt)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),xt==Uo.PreFlag_ACCEPT?ft=5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),xt==Uo.PreFlag_ACCEPT_ONCE?ft=1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),ft=xt==Uo.PreFlag_IGNORE?6:2)),I.immState=ft;st=st.next}if(I.active=at,null!=We)for(var vt=this.prelisteners.head;null!=vt;)7==vt.elt.itype&&(We.COLLISIONstate=I.immState,We.SENSORstate=I.immState),We.FLUIDstate=I.immState,vt=vt.next}else null==We?0==(4&I.immState)&&(I.immState=1):I.immState=We.FLUIDstate;De=De.next}else De=De.next}else De=De.next}Be=Be.next}if(ae&&0==(4&I.immState)){if(2==I.b1.type){var zt=I.b1;zt.world||(zt.component.waket=this.stamp+(this.midstep?0:1),3==zt.type&&(zt.kinematicDelaySleep=!0),zt.component.sleeping&&this.really_wake(zt,!1))}if(2==I.b1.type){var gt=I.b2;gt.world||(gt.component.waket=this.stamp+(this.midstep?0:1),3==gt.type&&(gt.kinematicDelaySleep=!0),gt.component.sleeping&&this.really_wake(gt,!1))}}}if(0!=(1&I.immState)){if(2==I.b1.type&&I.b1.component.sleeping){var bt=I.b1;bt.world||(bt.component.waket=this.stamp+(this.midstep?0:1),3==bt.type&&(bt.kinematicDelaySleep=!0),bt.component.sleeping&&this.really_wake(bt,!1))}if(2==I.b2.type&&I.b2.component.sleeping){var wt=I.b2;wt.world||(wt.component.waket=this.stamp+(this.midstep?0:1),3==wt.type&&(wt.kinematicDelaySleep=!0),wt.component.sleeping&&this.really_wake(wt,!1))}}if(I.sleeping){I.sleeping=!1;var St,Ct=this.f_arbiters;null==Qo.zpp_pool?St=new Qo:(St=Qo.zpp_pool,Qo.zpp_pool=St.next,St.next=null),St.elt=I;var Mt=St;Mt.next=Ct.head,Ct.head=Mt,Ct.modified=!0,Ct.length++}a=I}else if(B){var Pt=I;Pt.next=Ho.zpp_pool,Ho.zpp_pool=Pt,a=null}else a=I;else a=I}else if(1==p){var kt,Tt=i?this.c_arbiters_true:this.c_arbiters_false;if(null==n){for(var Ot=null,At=(s.arbiters.length<l.arbiters.length?s:l).arbiters.head;null!=At;){var Et=At.elt;if(Et.id==P.id&&Et.di==k.id){Ot=Et;break}At=At.next}kt=Ot}else kt=n;var Gt,It=null==kt,Bt=!1;if(It)null==Wo.zpp_pool?Gt=new Wo:(Gt=Wo.zpp_pool,Wo.zpp_pool=Gt.next,Gt.next=null),Gt.stat=i;else if(null==kt.colarb){kt.cleared=!0;for(var Lt=kt.b1.arbiters,Dt=null,Rt=Lt.head;null!=Rt;){if(Rt.elt==kt){var Ft,jt;null==Dt?(jt=(Ft=Lt.head).next,Lt.head=jt,null==Lt.head&&(Lt.pushmod=!0)):(jt=(Ft=Dt.next).next,null==(Dt.next=jt)&&(Lt.pushmod=!0));var Nt=Ft;Nt.elt=null,Nt.next=Ko.zpp_pool,Ko.zpp_pool=Nt,Lt.modified=!0,Lt.length--,Lt.pushmod=!0;break}Rt=(Dt=Rt).next}for(var Ut=kt.b2.arbiters,Vt=null,Ht=Ut.head;null!=Ht;){if(Ht.elt==kt){var Wt,Xt;null==Vt?(Xt=(Wt=Ut.head).next,Ut.head=Xt,null==Ut.head&&(Ut.pushmod=!0)):(Xt=(Wt=Vt.next).next,null==(Vt.next=Xt)&&(Ut.pushmod=!0));var qt=Wt;qt.elt=null,qt.next=Ko.zpp_pool,Ko.zpp_pool=qt,Ut.modified=!0,Ut.length--,Ut.pushmod=!0;break}Ht=(Vt=Ht).next}null!=kt.pair&&(kt.pair.arb=null,kt.pair=null),kt.active=!1,this.f_arbiters.modified=!0,null==Wo.zpp_pool?Gt=new Wo:(Gt=Wo.zpp_pool,Wo.zpp_pool=Gt.next,Gt.next=null),Gt.intchange=!0,Gt.stat=i,Bt=It=!0}else T=P!=(Gt=kt.colarb).s1,Gt.stat!=i&&(Gt.stat=i,Gt.sleeping||((i?this.c_arbiters_false:this.c_arbiters_true).remove(Gt),Tt.add(Gt)));if(It||Gt.stamp!=this.stamp||r)if(Gt.stamp=this.stamp,$s.contactCollide(P,k,Gt,T)){if(It){var Yt=P.id,Kt=k.id;Gt.b1=e.body,Gt.ws1=e,Gt.b2=t.body,Gt.ws2=t,Gt.id=Yt,Gt.di=Kt;var Zt,Jt=Gt.b1.arbiters;null==Ko.zpp_pool?Zt=new Ko:(Zt=Ko.zpp_pool,Ko.zpp_pool=Zt.next,Zt.next=null),Zt.elt=Gt;var Qt=Zt;Qt.next=Jt.head,Jt.head=Qt,Jt.modified=!0,Jt.length++;var $t,ei=Gt.b2.arbiters;null==Ko.zpp_pool?$t=new Ko:($t=Ko.zpp_pool,Ko.zpp_pool=$t.next,$t.next=null),$t.elt=Gt;var ti,ii=$t;ii.next=ei.head,ei.head=ii,ei.modified=!0,ei.length++,Gt.active=!0,Gt.present=0,Gt.cleared=!1,Gt.sleeping=!1,Gt.fresh=!1,Gt.presentable=!1,Gt.s1=e,Gt.s2=t,Gt.userdef_restitution||(Gt.s1.material.elasticity<=-1/0||Gt.s2.material.elasticity<=-1/0?Gt.restitution=0:Gt.s1.material.elasticity>=1/0||Gt.s2.material.elasticity>=1/0?Gt.restitution=1:Gt.restitution=(Gt.s1.material.elasticity+Gt.s2.material.elasticity)/2,Gt.restitution<0&&(Gt.restitution=0),1<Gt.restitution&&(Gt.restitution=1)),Gt.userdef_dyn_fric||(Gt.dyn_fric=Math.sqrt(Gt.s1.material.dynamicFriction*Gt.s2.material.dynamicFriction)),Gt.userdef_stat_fric||(Gt.stat_fric=Math.sqrt(Gt.s1.material.staticFriction*Gt.s2.material.staticFriction)),Gt.userdef_rfric||(Gt.rfric=Math.sqrt(Gt.s1.material.rollingFriction*Gt.s2.material.rollingFriction)),null==ea.zpp_pool?ti=new ea:(ti=ea.zpp_pool,ea.zpp_pool=ti.next,ti.next=null),ti.elt=Gt;var ni=ti;ni.next=Tt.head,Tt.head=ni,Tt.modified=!0,Tt.length++,Gt.fresh=!Bt}else Gt.fresh=Gt.up_stamp<this.stamp-1||Gt.endGenerated==this.stamp&&r;if(Gt.up_stamp=Gt.stamp,Gt.fresh||0==(4&Gt.immState)){for(var ri=!(Gt.immState=1),oi=Gt.ws1.id>Gt.ws2.id?Gt.ws2:Gt.ws1,ai=Gt.ws1.id>Gt.ws2.id?Gt.ws1:Gt.ws2,si=this.mrca1;null!=si.head;){var li=si.head;si.head=li.next,li.elt=null,li.next=Jo.zpp_pool,Jo.zpp_pool=li,null==si.head&&(si.pushmod=!0),si.modified=!0,si.length--}si.pushmod=!0;for(var pi=this.mrca2;null!=pi.head;){var hi=pi.head;pi.head=hi.next,hi.elt=null,hi.next=Jo.zpp_pool,Jo.zpp_pool=hi,null==pi.head&&(pi.pushmod=!0),pi.modified=!0,pi.length--}if(pi.pushmod=!0,null!=oi.cbSet){var ui,ci=this.mrca1;null==Jo.zpp_pool?ui=new Jo:(ui=Jo.zpp_pool,Jo.zpp_pool=ui.next,ui.next=null),ui.elt=oi;var di=ui;di.next=ci.head,ci.head=di,ci.modified=!0,ci.length++}if(null!=oi.body.cbSet){var _i,yi=this.mrca1,mi=oi.body;null==Jo.zpp_pool?_i=new Jo:(_i=Jo.zpp_pool,Jo.zpp_pool=_i.next,_i.next=null),_i.elt=mi;var fi=_i;fi.next=yi.head,yi.head=fi,yi.modified=!0,yi.length++}if(null!=ai.cbSet){var xi,vi=this.mrca2;null==Jo.zpp_pool?xi=new Jo:(xi=Jo.zpp_pool,Jo.zpp_pool=xi.next,xi.next=null),xi.elt=ai;var zi=xi;zi.next=vi.head,vi.head=zi,vi.modified=!0,vi.length++}if(null!=ai.body.cbSet){var gi,bi=this.mrca2,wi=ai.body;null==Jo.zpp_pool?gi=new Jo:(gi=Jo.zpp_pool,Jo.zpp_pool=gi.next,gi.next=null),gi.elt=wi;var Si=gi;Si.next=bi.head,bi.head=Si,bi.modified=!0,bi.length++}for(var Ci=oi.body.compound,Mi=ai.body.compound;Ci!=Mi;)if((null==Ci?0:Ci.depth)<(null==Mi?0:Mi.depth)){if(null!=Mi.cbSet){var Pi,ki=this.mrca2;null==Jo.zpp_pool?Pi=new Jo:(Pi=Jo.zpp_pool,Jo.zpp_pool=Pi.next,Pi.next=null),Pi.elt=Mi;var Ti=Pi;Ti.next=ki.head,ki.head=Ti,ki.modified=!0,ki.length++}Mi=Mi.compound}else{if(null!=Ci.cbSet){var Oi,Ai=this.mrca1;null==Jo.zpp_pool?Oi=new Jo:(Oi=Jo.zpp_pool,Jo.zpp_pool=Oi.next,Oi.next=null),Oi.elt=Ci;var Ei=Oi;Ei.next=Ai.head,Ai.head=Ei,Ai.modified=!0,Ai.length++}Ci=Ci.compound}for(var Gi=this.mrca1.head;null!=Gi;){for(var Ii=Gi.elt,Bi=this.mrca2.head;null!=Bi;){for(var Li,Di=Bi.elt,Ri=Ii.cbSet,Fi=Di.cbSet,ji=null,Ni=(Ri.cbpairs.length<Fi.cbpairs.length?Ri.cbpairs:Fi.cbpairs).head;null!=Ni;){var Ui=Ni.elt;if(Ui.a==Ri&&Ui.b==Fi||Ui.a==Fi&&Ui.b==Ri){ji=Ui;break}Ni=Ni.next}if(null==ji)null==No.zpp_pool?Li=new No:(Li=No.zpp_pool,No.zpp_pool=Li.next,Li.next=null),Li.zip_listeners=!0,jo.setlt(Ri,Fi)?(Li.a=Ri,Li.b=Fi):(Li.a=Fi,Li.b=Ri),ji=Li,Ri.cbpairs.add(ji),Fi!=Ri&&Fi.cbpairs.add(ji);if(ji.zip_listeners&&(ji.zip_listeners=!1,ji.__validate()),null!=ji.listeners.head){for(var Vi=null,Hi=null,Wi=this.prelisteners;null!=Wi.head;){var Xi=Wi.head;Wi.head=Xi.next,Xi.elt=null,Xi.next=Zo.zpp_pool,Zo.zpp_pool=Xi,null==Wi.head&&(Wi.pushmod=!0),Wi.modified=!0,Wi.length--}Wi.pushmod=!0;for(var qi,Yi=null,Ki=null,Zi=(Ri.cbpairs.length<Fi.cbpairs.length?Ri.cbpairs:Fi.cbpairs).head;null!=Zi;){var Ji=Zi.elt;if(Ji.a==Ri&&Ji.b==Fi||Ji.a==Fi&&Ji.b==Ri){Ki=Ji;break}Zi=Zi.next}if(null==Ki)null==No.zpp_pool?qi=new No:(qi=No.zpp_pool,No.zpp_pool=qi.next,qi.next=null),qi.zip_listeners=!0,jo.setlt(Ri,Fi)?(qi.a=Ri,qi.b=Fi):(qi.a=Fi,qi.b=Ri),Ki=qi,Ri.cbpairs.add(Ki),Fi!=Ri&&Fi.cbpairs.add(Ki);Ki.zip_listeners&&(Ki.zip_listeners=!1,Ki.__validate());for(var Qi=Ki.listeners.head;null!=Qi;){var $i=Qi.elt;if(5==$i.event&&0!=(1&$i.itype)){var en,tn=this.prelisteners;null==Zo.zpp_pool?en=new Zo:(en=Zo.zpp_pool,Zo.zpp_pool=en.next,en.next=null),en.elt=$i;var nn=en;null==Yi?(nn.next=tn.head,tn.head=nn):(nn.next=Yi.next,Yi.next=nn),tn.pushmod=tn.modified=!0,tn.length++,Yi=nn,ri=!!ri||!$i.pure}Qi=Qi.next}if(null!=this.prelisteners.head){if(null==(Vi=qo.get(Ii,Di))&&(Hi=Yo.get(Ii,Di),this.add_callbackset(Hi)),null==Vi||(Vi.COLLISIONstamp!=this.stamp||r)&&0==(4&Vi.COLLISIONstate)){if(null!=Hi&&(Vi=Hi),null!=Vi)for(var rn=this.prelisteners.head;null!=rn;)7==rn.elt.itype?(Vi.COLLISIONstamp=this.stamp,Vi.SENSORstamp=this.stamp,Vi.FLUIDstamp=this.stamp):Vi.COLLISIONstamp=this.stamp,rn=rn.next;var on=Gt.active,an=Gt.active=!0,sn=null,ln=null,pn=Gt.innards.next;Gt.hc2=!1;for(var hn=Gt.contacts.next;null!=hn;){var un=hn;if(un.stamp+Qs.arbiterExpirationDelay<Gt.stamp){var cn,dn,_n=Gt.contacts;null==sn?(dn=(cn=_n.next).next,_n.next=dn,null==_n.next&&(_n.pushmod=!0)):(dn=(cn=sn.next).next,null==(sn.next=dn)&&(_n.pushmod=!0)),cn._inuse=!1,_n.modified=!0,_n.length--,_n.pushmod=!0,hn=dn;var yn,mn,fn=Gt.innards;null==ln?(mn=(yn=fn.next).next,fn.next=mn,null==fn.next&&(fn.pushmod=!0)):(mn=(yn=ln.next).next,null==(ln.next=mn)&&(fn.pushmod=!0)),yn._inuse=!1,fn.modified=!0,fn.length--,fn.pushmod=!0,pn=mn,un.arbiter=null,un.next=Xo.zpp_pool,Xo.zpp_pool=un}else{var xn=un.inner,vn=un.active;un.active=un.stamp==Gt.stamp,un.active&&(an?(an=!1,Gt.c1=xn,Gt.oc1=un):(Gt.hc2=!0,Gt.c2=xn,Gt.oc2=un)),vn!=un.active&&(Gt.contacts.modified=!0),sn=hn,pn=(ln=pn).next,hn=hn.next}}if(Gt.hc2)if(Gt.hpc2=!0,Gt.oc1.posOnly){var zn=Gt.c1;Gt.c1=Gt.c2,Gt.c2=zn;var gn=Gt.oc1;Gt.oc1=Gt.oc2,Gt.oc2=gn,Gt.hc2=!1}else Gt.oc2.posOnly&&(Gt.hc2=!1);else Gt.hpc2=!1;this.precb.zpp_inner.pre_arbiter=Gt,this.precb.zpp_inner.set=Vi;for(var bn=this.prelisteners.head;null!=bn;){var wn=bn.elt;this.precb.zpp_inner.listener=wn;var Sn,Cn=this.precb.zpp_inner,Mn=Vi.int1,Pn=Vi.int2,kn=wn.options1,Tn=Mn.cbTypes;if(kn.nonemptyintersection(Tn,kn.includes)&&!kn.nonemptyintersection(Tn,kn.excludes)){var On=wn.options2,An=Pn.cbTypes;Sn=!!On.nonemptyintersection(An,On.includes)&&!On.nonemptyintersection(An,On.excludes)}else Sn=!1;Sn?(Cn.int1=Mn,Cn.int2=Pn):(Cn.int1=Pn,Cn.int2=Mn),this.precb.zpp_inner.pre_swapped=Ii!=this.precb.zpp_inner.int1;var En,Gn=wn.handlerp(this.precb);if(null!=Gn)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Gn==Uo.PreFlag_ACCEPT?En=5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Gn==Uo.PreFlag_ACCEPT_ONCE?En=1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),En=Gn==Uo.PreFlag_IGNORE?6:2)),Gt.immState=En;bn=bn.next}if(Gt.active=on,null!=Vi)for(var In=this.prelisteners.head;null!=In;)7==In.elt.itype?(Vi.COLLISIONstate=Gt.immState,Vi.SENSORstate=Gt.immState,Vi.FLUIDstate=Gt.immState):Vi.COLLISIONstate=Gt.immState,In=In.next}else null==Vi?0==(4&Gt.immState)&&(Gt.immState=1):Gt.immState=Vi.COLLISIONstate;Bi=Bi.next}else Bi=Bi.next}else Bi=Bi.next}Gi=Gi.next}if(ri&&0==(4&Gt.immState)){if(2==Gt.b1.type){var Bn=Gt.b1;Bn.world||(Bn.component.waket=this.stamp+(this.midstep?0:1),3==Bn.type&&(Bn.kinematicDelaySleep=!0),Bn.component.sleeping&&this.really_wake(Bn,!1))}if(2==Gt.b1.type){var Ln=Gt.b2;Ln.world||(Ln.component.waket=this.stamp+(this.midstep?0:1),3==Ln.type&&(Ln.kinematicDelaySleep=!0),Ln.component.sleeping&&this.really_wake(Ln,!1))}}}if(0!=(1&Gt.immState)){if(2==Gt.b1.type&&Gt.b1.component.sleeping){var Dn=Gt.b1;Dn.world||(Dn.component.waket=this.stamp+(this.midstep?0:1),3==Dn.type&&(Dn.kinematicDelaySleep=!0),Dn.component.sleeping&&this.really_wake(Dn,!1))}if(2==Gt.b2.type&&Gt.b2.component.sleeping){var Rn=Gt.b2;Rn.world||(Rn.component.waket=this.stamp+(this.midstep?0:1),3==Rn.type&&(Rn.kinematicDelaySleep=!0),Rn.component.sleeping&&this.really_wake(Rn,!1))}}if(Gt.sleeping){var Fn;Gt.sleeping=!1,null==ea.zpp_pool?Fn=new ea:(Fn=ea.zpp_pool,ea.zpp_pool=Fn.next,Fn.next=null),Fn.elt=Gt;var jn=Fn;jn.next=Tt.head,Tt.head=jn,Tt.modified=!0,Tt.length++}a=Gt}else if(It){var Nn=Gt;Nn.userdef_dyn_fric=!1,Nn.userdef_stat_fric=!1,Nn.userdef_restitution=!1,Nn.userdef_rfric=!1,Nn.__ref_edge1=Nn.__ref_edge2=null,Nn.next=Wo.zpp_pool,Wo.zpp_pool=Nn,a=null}else a=Gt;else a=Gt}else{var Un;if(null==n){for(var Vn=null,Hn=(s.arbiters.length<l.arbiters.length?s:l).arbiters.head;null!=Hn;){var Wn=Hn.elt;if(Wn.id==P.id&&Wn.di==k.id){Vn=Wn;break}Hn=Hn.next}Un=Vn}else Un=n;var Xn,qn=null==Un,Yn=!1;if(qn)null==Vo.zpp_pool?Xn=new Vo:(Xn=Vo.zpp_pool,Vo.zpp_pool=Xn.next,Xn.next=null);else if(null==Un.sensorarb){Un.cleared=!0;for(var Kn=Un.b1.arbiters,Zn=null,Jn=Kn.head;null!=Jn;){if(Jn.elt==Un){var Qn,$n;null==Zn?($n=(Qn=Kn.head).next,Kn.head=$n,null==Kn.head&&(Kn.pushmod=!0)):($n=(Qn=Zn.next).next,null==(Zn.next=$n)&&(Kn.pushmod=!0));var er=Qn;er.elt=null,er.next=Ko.zpp_pool,Ko.zpp_pool=er,Kn.modified=!0,Kn.length--,Kn.pushmod=!0;break}Jn=(Zn=Jn).next}for(var tr=Un.b2.arbiters,ir=null,nr=tr.head;null!=nr;){if(nr.elt==Un){var rr,or;null==ir?(or=(rr=tr.head).next,tr.head=or,null==tr.head&&(tr.pushmod=!0)):(or=(rr=ir.next).next,null==(ir.next=or)&&(tr.pushmod=!0));var ar=rr;ar.elt=null,ar.next=Ko.zpp_pool,Ko.zpp_pool=ar,tr.modified=!0,tr.length--,tr.pushmod=!0;break}nr=(ir=nr).next}null!=Un.pair&&(Un.pair.arb=null,Un.pair=null),Un.active=!1,this.f_arbiters.modified=!0,null==Vo.zpp_pool?Xn=new Vo:(Xn=Vo.zpp_pool,Vo.zpp_pool=Xn.next,Xn.next=null),Yn=qn=Xn.intchange=!0}else Xn=Un.sensorarb;if(qn||Xn.stamp!=this.stamp||r)if(Xn.stamp=this.stamp,$s.testCollide(P,k)){if(qn){var sr=P.id,lr=k.id;Xn.b1=e.body,Xn.ws1=e,Xn.b2=t.body,Xn.ws2=t,Xn.id=sr,Xn.di=lr;var pr,hr=Xn.b1.arbiters;null==Ko.zpp_pool?pr=new Ko:(pr=Ko.zpp_pool,Ko.zpp_pool=pr.next,pr.next=null),pr.elt=Xn;var ur=pr;ur.next=hr.head,hr.head=ur,hr.modified=!0,hr.length++;var cr,dr=Xn.b2.arbiters;null==Ko.zpp_pool?cr=new Ko:(cr=Ko.zpp_pool,Ko.zpp_pool=cr.next,cr.next=null),cr.elt=Xn;var _r=cr;_r.next=dr.head,dr.head=_r,dr.modified=!0,dr.length++,Xn.active=!0,Xn.present=0,Xn.cleared=!1,Xn.sleeping=!1,Xn.fresh=!1,Xn.presentable=!1;var yr,mr=this.s_arbiters;null==$o.zpp_pool?yr=new $o:(yr=$o.zpp_pool,$o.zpp_pool=yr.next,yr.next=null),yr.elt=Xn;var fr=yr;fr.next=mr.head,mr.head=fr,mr.modified=!0,mr.length++,Xn.fresh=!Yn}else Xn.fresh=Xn.up_stamp<this.stamp-1||Xn.endGenerated==this.stamp&&r;if(Xn.up_stamp=Xn.stamp,Xn.fresh||0==(4&Xn.immState)){for(var xr=!(Xn.immState=1),vr=Xn.ws1.id>Xn.ws2.id?Xn.ws2:Xn.ws1,zr=Xn.ws1.id>Xn.ws2.id?Xn.ws1:Xn.ws2,gr=this.mrca1;null!=gr.head;){var br=gr.head;gr.head=br.next,br.elt=null,br.next=Jo.zpp_pool,Jo.zpp_pool=br,null==gr.head&&(gr.pushmod=!0),gr.modified=!0,gr.length--}gr.pushmod=!0;for(var wr=this.mrca2;null!=wr.head;){var Sr=wr.head;wr.head=Sr.next,Sr.elt=null,Sr.next=Jo.zpp_pool,Jo.zpp_pool=Sr,null==wr.head&&(wr.pushmod=!0),wr.modified=!0,wr.length--}if(wr.pushmod=!0,null!=vr.cbSet){var Cr,Mr=this.mrca1;null==Jo.zpp_pool?Cr=new Jo:(Cr=Jo.zpp_pool,Jo.zpp_pool=Cr.next,Cr.next=null),Cr.elt=vr;var Pr=Cr;Pr.next=Mr.head,Mr.head=Pr,Mr.modified=!0,Mr.length++}if(null!=vr.body.cbSet){var kr,Tr=this.mrca1,Or=vr.body;null==Jo.zpp_pool?kr=new Jo:(kr=Jo.zpp_pool,Jo.zpp_pool=kr.next,kr.next=null),kr.elt=Or;var Ar=kr;Ar.next=Tr.head,Tr.head=Ar,Tr.modified=!0,Tr.length++}if(null!=zr.cbSet){var Er,Gr=this.mrca2;null==Jo.zpp_pool?Er=new Jo:(Er=Jo.zpp_pool,Jo.zpp_pool=Er.next,Er.next=null),Er.elt=zr;var Ir=Er;Ir.next=Gr.head,Gr.head=Ir,Gr.modified=!0,Gr.length++}if(null!=zr.body.cbSet){var Br,Lr=this.mrca2,Dr=zr.body;null==Jo.zpp_pool?Br=new Jo:(Br=Jo.zpp_pool,Jo.zpp_pool=Br.next,Br.next=null),Br.elt=Dr;var Rr=Br;Rr.next=Lr.head,Lr.head=Rr,Lr.modified=!0,Lr.length++}for(var Fr=vr.body.compound,jr=zr.body.compound;Fr!=jr;)if((null==Fr?0:Fr.depth)<(null==jr?0:jr.depth)){if(null!=jr.cbSet){var Nr,Ur=this.mrca2;null==Jo.zpp_pool?Nr=new Jo:(Nr=Jo.zpp_pool,Jo.zpp_pool=Nr.next,Nr.next=null),Nr.elt=jr;var Vr=Nr;Vr.next=Ur.head,Ur.head=Vr,Ur.modified=!0,Ur.length++}jr=jr.compound}else{if(null!=Fr.cbSet){var Hr,Wr=this.mrca1;null==Jo.zpp_pool?Hr=new Jo:(Hr=Jo.zpp_pool,Jo.zpp_pool=Hr.next,Hr.next=null),Hr.elt=Fr;var Xr=Hr;Xr.next=Wr.head,Wr.head=Xr,Wr.modified=!0,Wr.length++}Fr=Fr.compound}for(var qr=this.mrca1.head;null!=qr;){for(var Yr=qr.elt,Kr=this.mrca2.head;null!=Kr;){for(var Zr,Jr=Kr.elt,Qr=Yr.cbSet,$r=Jr.cbSet,eo=null,to=(Qr.cbpairs.length<$r.cbpairs.length?Qr.cbpairs:$r.cbpairs).head;null!=to;){var io=to.elt;if(io.a==Qr&&io.b==$r||io.a==$r&&io.b==Qr){eo=io;break}to=to.next}if(null==eo)null==No.zpp_pool?Zr=new No:(Zr=No.zpp_pool,No.zpp_pool=Zr.next,Zr.next=null),Zr.zip_listeners=!0,jo.setlt(Qr,$r)?(Zr.a=Qr,Zr.b=$r):(Zr.a=$r,Zr.b=Qr),eo=Zr,Qr.cbpairs.add(eo),$r!=Qr&&$r.cbpairs.add(eo);if(eo.zip_listeners&&(eo.zip_listeners=!1,eo.__validate()),null!=eo.listeners.head){for(var no=null,ro=null,oo=this.prelisteners;null!=oo.head;){var ao=oo.head;oo.head=ao.next,ao.elt=null,ao.next=Zo.zpp_pool,Zo.zpp_pool=ao,null==oo.head&&(oo.pushmod=!0),oo.modified=!0,oo.length--}oo.pushmod=!0;for(var so,lo=null,po=null,ho=(Qr.cbpairs.length<$r.cbpairs.length?Qr.cbpairs:$r.cbpairs).head;null!=ho;){var uo=ho.elt;if(uo.a==Qr&&uo.b==$r||uo.a==$r&&uo.b==Qr){po=uo;break}ho=ho.next}if(null==po)null==No.zpp_pool?so=new No:(so=No.zpp_pool,No.zpp_pool=so.next,so.next=null),so.zip_listeners=!0,jo.setlt(Qr,$r)?(so.a=Qr,so.b=$r):(so.a=$r,so.b=Qr),po=so,Qr.cbpairs.add(po),$r!=Qr&&$r.cbpairs.add(po);po.zip_listeners&&(po.zip_listeners=!1,po.__validate());for(var co=po.listeners.head;null!=co;){var _o=co.elt;if(5==_o.event&&0!=(2&_o.itype)){var yo,mo=this.prelisteners;null==Zo.zpp_pool?yo=new Zo:(yo=Zo.zpp_pool,Zo.zpp_pool=yo.next,yo.next=null),yo.elt=_o;var fo=yo;null==lo?(fo.next=mo.head,mo.head=fo):(fo.next=lo.next,lo.next=fo),mo.pushmod=mo.modified=!0,mo.length++,lo=fo,xr=!!xr||!_o.pure}co=co.next}if(null!=this.prelisteners.head){if(null==(no=qo.get(Yr,Jr))&&(ro=Yo.get(Yr,Jr),this.add_callbackset(ro)),null==no||(no.SENSORstamp!=this.stamp||r)&&0==(4&no.SENSORstate)){if(null!=ro&&(no=ro),null!=no)for(var xo=this.prelisteners.head;null!=xo;)7==xo.elt.itype?(no.COLLISIONstamp=this.stamp,no.SENSORstamp=this.stamp,no.FLUIDstamp=this.stamp):no.SENSORstamp=this.stamp,xo=xo.next;var vo=Xn.active;Xn.active=!0,this.precb.zpp_inner.pre_arbiter=Xn,this.precb.zpp_inner.set=no;for(var zo=this.prelisteners.head;null!=zo;){var go=zo.elt;this.precb.zpp_inner.listener=go;var bo,wo=this.precb.zpp_inner,So=no.int1,Co=no.int2,Mo=go.options1,Po=So.cbTypes;if(Mo.nonemptyintersection(Po,Mo.includes)&&!Mo.nonemptyintersection(Po,Mo.excludes)){var ko=go.options2,To=Co.cbTypes;bo=!!ko.nonemptyintersection(To,ko.includes)&&!ko.nonemptyintersection(To,ko.excludes)}else bo=!1;bo?(wo.int1=So,wo.int2=Co):(wo.int1=Co,wo.int2=So),this.precb.zpp_inner.pre_swapped=Yr!=this.precb.zpp_inner.int1;var Oo,Ao=go.handlerp(this.precb);if(null!=Ao)null==Uo.PreFlag_ACCEPT&&(Uo.internal=!0,Uo.PreFlag_ACCEPT=new Fo,Uo.internal=!1),Ao==Uo.PreFlag_ACCEPT?Oo=5:(null==Uo.PreFlag_ACCEPT_ONCE&&(Uo.internal=!0,Uo.PreFlag_ACCEPT_ONCE=new Fo,Uo.internal=!1),Ao==Uo.PreFlag_ACCEPT_ONCE?Oo=1:(null==Uo.PreFlag_IGNORE&&(Uo.internal=!0,Uo.PreFlag_IGNORE=new Fo,Uo.internal=!1),Oo=Ao==Uo.PreFlag_IGNORE?6:2)),Xn.immState=Oo;zo=zo.next}if(Xn.active=vo,null!=no)for(var Eo=this.prelisteners.head;null!=Eo;)7==Eo.elt.itype?(no.COLLISIONstate=Xn.immState,no.SENSORstate=Xn.immState,no.FLUIDstate=Xn.immState):no.SENSORstate=Xn.immState,Eo=Eo.next}else null==no?0==(4&Xn.immState)&&(Xn.immState=1):Xn.immState=no.SENSORstate;Kr=Kr.next}else Kr=Kr.next}else Kr=Kr.next}qr=qr.next}if(xr&&0==(4&Xn.immState)){if(1!=Xn.b1.type){var Go=Xn.b1;Go.world||(Go.component.waket=this.stamp+(this.midstep?0:1),3==Go.type&&(Go.kinematicDelaySleep=!0),Go.component.sleeping&&this.really_wake(Go,!1))}if(1!=Xn.b2.type){var Io=Xn.b2;Io.world||(Io.component.waket=this.stamp+(this.midstep?0:1),3==Io.type&&(Io.kinematicDelaySleep=!0),Io.component.sleeping&&this.really_wake(Io,!1))}}}if(Xn.sleeping){Xn.sleeping=!1;var Bo,Lo=this.s_arbiters;null==$o.zpp_pool?Bo=new $o:(Bo=$o.zpp_pool,$o.zpp_pool=Bo.next,Bo.next=null),Bo.elt=Xn;var Do=Bo;Do.next=Lo.head,Lo.head=Do,Lo.modified=!0,Lo.length++}a=Xn}else if(qn){var Ro=Xn;Ro.next=Vo.zpp_pool,Vo.zpp_pool=Ro,a=null}else a=Xn;else a=Xn}}return a},si.prototype.mrca1=null,si.prototype.mrca2=null,si.prototype.MRCA_chains=function(e,t){for(var i=this.mrca1;null!=i.head;){var n=i.head;i.head=n.next,n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,null==i.head&&(i.pushmod=!0),i.modified=!0,i.length--}i.pushmod=!0;for(var r=this.mrca2;null!=r.head;){var o=r.head;r.head=o.next,o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,null==r.head&&(r.pushmod=!0),r.modified=!0,r.length--}if(r.pushmod=!0,null!=e.cbSet){var a,s=this.mrca1;null==Jo.zpp_pool?a=new Jo:(a=Jo.zpp_pool,Jo.zpp_pool=a.next,a.next=null),a.elt=e;var l=a;l.next=s.head,s.head=l,s.modified=!0,s.length++}if(null!=e.body.cbSet){var p,h=this.mrca1,u=e.body;null==Jo.zpp_pool?p=new Jo:(p=Jo.zpp_pool,Jo.zpp_pool=p.next,p.next=null),p.elt=u;var c=p;c.next=h.head,h.head=c,h.modified=!0,h.length++}if(null!=t.cbSet){var d,_=this.mrca2;null==Jo.zpp_pool?d=new Jo:(d=Jo.zpp_pool,Jo.zpp_pool=d.next,d.next=null),d.elt=t;var y=d;y.next=_.head,_.head=y,_.modified=!0,_.length++}if(null!=t.body.cbSet){var m,f=this.mrca2,x=t.body;null==Jo.zpp_pool?m=new Jo:(m=Jo.zpp_pool,Jo.zpp_pool=m.next,m.next=null),m.elt=x;var v=m;v.next=f.head,f.head=v,f.modified=!0,f.length++}for(var z=e.body.compound,g=t.body.compound;z!=g;)if((null==z?0:z.depth)<(null==g?0:g.depth)){if(null!=g.cbSet){var b,w=this.mrca2;null==Jo.zpp_pool?b=new Jo:(b=Jo.zpp_pool,Jo.zpp_pool=b.next,b.next=null),b.elt=g;var S=b;S.next=w.head,w.head=S,w.modified=!0,w.length++}g=g.compound}else{if(null!=z.cbSet){var C,M=this.mrca1;null==Jo.zpp_pool?C=new Jo:(C=Jo.zpp_pool,Jo.zpp_pool=C.next,C.next=null),C.elt=z;var P=C;P.next=M.head,M.head=P,M.modified=!0,M.length++}z=z.compound}},si.prototype.inlined_MRCA_chains=function(e,t){for(var i=this.mrca1;null!=i.head;){var n=i.head;i.head=n.next,n.elt=null,n.next=Jo.zpp_pool,Jo.zpp_pool=n,null==i.head&&(i.pushmod=!0),i.modified=!0,i.length--}i.pushmod=!0;for(var r=this.mrca2;null!=r.head;){var o=r.head;r.head=o.next,o.elt=null,o.next=Jo.zpp_pool,Jo.zpp_pool=o,null==r.head&&(r.pushmod=!0),r.modified=!0,r.length--}if(r.pushmod=!0,null!=e.cbSet){var a,s=this.mrca1;null==Jo.zpp_pool?a=new Jo:(a=Jo.zpp_pool,Jo.zpp_pool=a.next,a.next=null),a.elt=e;var l=a;l.next=s.head,s.head=l,s.modified=!0,s.length++}if(null!=e.body.cbSet){var p,h=this.mrca1,u=e.body;null==Jo.zpp_pool?p=new Jo:(p=Jo.zpp_pool,Jo.zpp_pool=p.next,p.next=null),p.elt=u;var c=p;c.next=h.head,h.head=c,h.modified=!0,h.length++}if(null!=t.cbSet){var d,_=this.mrca2;null==Jo.zpp_pool?d=new Jo:(d=Jo.zpp_pool,Jo.zpp_pool=d.next,d.next=null),d.elt=t;var y=d;y.next=_.head,_.head=y,_.modified=!0,_.length++}if(null!=t.body.cbSet){var m,f=this.mrca2,x=t.body;null==Jo.zpp_pool?m=new Jo:(m=Jo.zpp_pool,Jo.zpp_pool=m.next,m.next=null),m.elt=x;var v=m;v.next=f.head,f.head=v,f.modified=!0,f.length++}for(var z=e.body.compound,g=t.body.compound;z!=g;)if((null==z?0:z.depth)<(null==g?0:g.depth)){if(null!=g.cbSet){var b,w=this.mrca2;null==Jo.zpp_pool?b=new Jo:(b=Jo.zpp_pool,Jo.zpp_pool=b.next,b.next=null),b.elt=g;var S=b;S.next=w.head,w.head=S,w.modified=!0,w.length++}g=g.compound}else{if(null!=z.cbSet){var C,M=this.mrca1;null==Jo.zpp_pool?C=new Jo:(C=Jo.zpp_pool,Jo.zpp_pool=C.next,C.next=null),C.elt=z;var P=C;P.next=M.head,M.head=P,M.modified=!0,M.length++}z=z.compound}},si.prototype.__class__=si;var li=zpp_nape.space.ZPP_SweepData=function(){this.aabb=null,this.shape=null,this.prev=null,this.next=null};li.__name__=["zpp_nape","space","ZPP_SweepData"],li.prototype.next=null,li.prototype.prev=null,li.prototype.shape=null,li.prototype.aabb=null,li.prototype.free=function(){this.prev=null,this.shape=null,this.aabb=null},li.prototype.alloc=function(){},li.prototype.gt=function(e){return this.aabb.minx>e.aabb.minx},li.prototype.__class__=li;var pi=zpp_nape.space.ZPP_SweepPhase=function(e){this.failed=null,this.list=null,ti.call(this),this.space=e,this.is_sweep=!0,this.sweep=this};pi.__name__=["zpp_nape","space","ZPP_SweepPhase"],pi.__super__=ti,pi.prototype=Object.create(ti.prototype),pi.prototype.list=null,pi.prototype.__insert=function(e){var t;null==li.zpp_pool?t=new li:(t=li.zpp_pool,li.zpp_pool=t.next,t.next=null),(e.sweep=t).shape=e,t.aabb=e.aabb,t.next=this.list,null!=this.list&&(this.list.prev=t),this.list=t},pi.prototype.__remove=function(e){var t=e.sweep;null==t.prev?this.list=t.next:t.prev.next=t.next,null!=t.next&&(t.next.prev=t.prev),e.sweep=null,t.prev=null,t.shape=null,t.aabb=null,t.next=li.zpp_pool,li.zpp_pool=t},pi.prototype.__sync=function(e){if(!this.space.continuous&&e.zip_aabb&&null!=e.body)if(e.zip_aabb=!1,0==e.type){var t=e.circle;if(t.zip_worldCOM&&null!=t.body){if(t.zip_worldCOM=!1,t.zip_localCOM){if(t.zip_localCOM=!1,1==t.type){var i=t.polygon;if(null==i.lverts.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y;else if(null==i.lverts.next.next.next)i.localCOMx=i.lverts.next.x,i.localCOMy=i.lverts.next.y,i.localCOMx+=i.lverts.next.next.x,i.localCOMy+=i.lverts.next.next.y,i.localCOMx*=.5,i.localCOMy*=.5;else{i.localCOMx=0;var n=i.localCOMy=0,r=i.lverts.next,o=r,a=r=r.next;for(r=r.next;null!=r;){var s=r;n+=a.x*(s.y-o.y);var l=s.y*a.x-s.x*a.y;i.localCOMx+=(a.x+s.x)*l,i.localCOMy+=(a.y+s.y)*l,o=a,a=s,r=r.next}var p=r=i.lverts.next;n+=a.x*(p.y-o.y);var h=p.y*a.x-p.x*a.y;i.localCOMx+=(a.x+p.x)*h,i.localCOMy+=(a.y+p.y)*h,o=a;var u=r=r.next;n+=p.x*(u.y-o.y);var c=u.y*p.x-u.x*p.y;i.localCOMx+=(p.x+u.x)*c,i.localCOMy+=(p.y+u.y)*c;var d=n=1/(3*n);i.localCOMx*=d,i.localCOMy*=d}}null!=t.wrap_localCOM&&(t.wrap_localCOM.zpp_inner.x=t.localCOMx,t.wrap_localCOM.zpp_inner.y=t.localCOMy)}var _=t.body;_.zip_axis&&(_.zip_axis=!1,_.axisx=Math.sin(_.rot),_.axisy=Math.cos(_.rot)),t.worldCOMx=t.body.posx+(t.body.axisy*t.localCOMx-t.body.axisx*t.localCOMy),t.worldCOMy=t.body.posy+(t.localCOMx*t.body.axisx+t.localCOMy*t.body.axisy)}var y=t.radius,m=t.radius;t.aabb.minx=t.worldCOMx-y,t.aabb.miny=t.worldCOMy-m,t.aabb.maxx=t.worldCOMx+y,t.aabb.maxy=t.worldCOMy+m}else{var f=e.polygon;if(f.zip_gverts&&null!=f.body){f.zip_gverts=!1,f.validate_lverts();var x=f.body;x.zip_axis&&(x.zip_axis=!1,x.axisx=Math.sin(x.rot),x.axisy=Math.cos(x.rot));for(var v=f.lverts.next,z=f.gverts.next;null!=z;){var g=z,b=v;v=v.next,g.x=f.body.posx+(f.body.axisy*b.x-f.body.axisx*b.y),g.y=f.body.posy+(b.x*f.body.axisx+b.y*f.body.axisy),z=z.next}}var w=f.gverts.next;f.aabb.minx=w.x,f.aabb.miny=w.y,f.aabb.maxx=w.x,f.aabb.maxy=w.y;for(var S=f.gverts.next.next;null!=S;){var C=S;C.x<f.aabb.minx&&(f.aabb.minx=C.x),C.x>f.aabb.maxx&&(f.aabb.maxx=C.x),C.y<f.aabb.miny&&(f.aabb.miny=C.y),C.y>f.aabb.maxy&&(f.aabb.maxy=C.y),S=S.next}}},pi.prototype.sync_broadphase=function(){if(this.space.validation(),null!=this.list)for(var e=this.list.next;null!=e;){var t=e.next,i=e.prev;if(e.aabb.minx>i.aabb.minx)e=t;else{for(;null!=i.prev&&i.prev.aabb.minx>e.aabb.minx;)i=i.prev;var n=e.prev;n.next=e.next,null!=e.next&&(e.next.prev=n),null==i.prev?(e.prev=null,((this.list=e).next=i).prev=e):(e.prev=i.prev,((i.prev=e).prev.next=e).next=i),e=t}}},pi.prototype.sync_broadphase_fast=function(){for(var e=this.list.next;null!=e;){var t=e.next,i=e.prev;if(e.aabb.minx>i.aabb.minx)e=t;else{for(;null!=i.prev&&i.prev.aabb.minx>e.aabb.minx;)i=i.prev;var n=e.prev;n.next=e.next,null!=e.next&&(e.next.prev=n),null==i.prev?(e.prev=null,((this.list=e).next=i).prev=e):(e.prev=i.prev,((i.prev=e).prev.next=e).next=i),e=t}}},pi.prototype.broadphase=function(e,t){if(null!=this.list){for(var i=this.list.next;null!=i;){var n=i.next,r=i.prev;if(i.aabb.minx>r.aabb.minx)i=n;else{for(;null!=r.prev&&r.prev.aabb.minx>i.aabb.minx;)r=r.prev;var o=i.prev;o.next=i.next,null!=i.next&&(i.next.prev=o),null==r.prev?(i.prev=null,((this.list=i).next=r).prev=i):(i.prev=r.prev,((r.prev=i).prev.next=i).next=r),i=n}}for(var a=this.list;null!=a;){for(var s=a.next,l=a.shape,p=l.body,h=a.aabb.maxx;null!=s&&!(s.aabb.minx>h);){var u=s.shape,c=u.body;if(c!=p)if(1!=p.type||1!=c.type)if(p.component.sleeping&&c.component.sleeping)s=s.next;else{var d=l.aabb,_=u.aabb;_.miny>d.maxy||d.miny>_.maxy||(t?e.narrowPhase(l,u,2!=p.type||2!=c.type,null,!1):e.continuousEvent(l,u,2!=p.type||2!=c.type,null,!1)),s=s.next}else s=s.next;else s=s.next}a=a.next}}},pi.prototype.clear=function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),this.__remove(this.list.shape)},pi.prototype.shapesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;for(var o=r,a=null==n?new fe:n,s=this.list;null!=s&&s.aabb.minx>e;)s=s.next;for(;null!=s&&s.aabb.minx<=e;){if(s.aabb.maxx>=e&&s.aabb.miny<=t&&s.aabb.maxy>=t){var l,p=s.shape;if(null!=i){var h=p.filter;l=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else l=!0;l&&(0==p.type?$s.circleContains(p.circle,o)&&a.push(p.outer):$s.polyContains(p.polygon,o)&&a.push(p.outer))}s=s.next}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=el.zpp_pool,el.zpp_pool=o,a},pi.prototype.bodiesUnderPoint=function(e,t,i,n){var r;this.sync_broadphase(),null==el.zpp_pool?r=new el:(r=el.zpp_pool,el.zpp_pool=r.next,r.next=null),r.weak=!1,r._immutable=!1,r.x=e,r.y=t;for(var o=r,a=null==n?new ee:n,s=this.list;null!=s&&s.aabb.minx>e;)s=s.next;for(;null!=s&&s.aabb.minx<=e;){if(s.aabb.maxx>=e&&s.aabb.miny<=t&&s.aabb.maxy>=t){var l=s.shape,p=l.body.outer;if(!a.has(p)){var h;if(null!=i){var u=l.filter;h=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else h=!0;h&&(0==l.type?$s.circleContains(l.circle,o)&&a.push(p):$s.polyContains(l.polygon,o)&&a.push(p))}}s=s.next}return null!=o.outer&&(o.outer.zpp_inner=null,o.outer=null),o._isimmutable=null,o._validate=null,o._invalidate=null,o.next=el.zpp_pool,el.zpp_pool=o,a},pi.prototype.shapesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);for(var o=this.aabbShape.zpp_inner.aabb,a=null==r?new fe:r,s=this.list;null!=s&&s.aabb.maxx<o.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=o.maxx;){var l,p=s.shape;if(null!=n){var h=p.filter;l=0!=(h.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&h.collisionGroup)}else l=!0;if(l)if(t)if(i)$s.containTest(this.aabbShape.zpp_inner,p)&&a.push(p.outer);else{var u=s.aabb;if(u.minx>=o.minx&&u.miny>=o.miny&&u.maxx<=o.maxx&&u.maxy<=o.maxy)a.push(p.outer);else{var c=s.aabb;o.miny<=c.maxy&&c.miny<=o.maxy&&o.minx<=c.maxx&&c.minx<=o.maxx&&$s.testCollide_safe(p,this.aabbShape.zpp_inner)&&a.push(p.outer)}}else{var d;if(i){var _=s.aabb;d=_.minx>=o.minx&&_.miny>=o.miny&&_.maxx<=o.maxx&&_.maxy<=o.maxy}else{var y=s.aabb;d=o.miny<=y.maxy&&y.miny<=o.maxy&&o.minx<=y.maxx&&y.minx<=o.maxx}d&&a.push(p.outer)}s=s.next}return a},pi.prototype.failed=null,pi.prototype.bodiesInAABB=function(e,t,i,n,r){this.sync_broadphase(),this.updateAABBShape(e);var o=this.aabbShape.zpp_inner.aabb,a=null==r?new ee:r;null==this.failed&&(this.failed=new ee);for(var s=this.list;null!=s&&s.aabb.maxx<o.minx;)s=s.next;for(;null!=s&&s.aabb.minx<=o.maxx;){var l=s.shape,p=l.body.outer,h=s.aabb;if(o.miny<=h.maxy&&h.miny<=o.maxy&&o.minx<=h.maxx&&h.minx<=o.maxx){var u;if(null!=n){var c=l.filter;u=0!=(c.collisionMask&n.collisionGroup)&&0!=(n.collisionMask&c.collisionGroup)}else u=!0;if(u)if(t)if(i){if(!this.failed.has(p)){var d=$s.containTest(this.aabbShape.zpp_inner,l);!a.has(p)&&d?a.push(p):d||(a.remove(p),this.failed.push(p))}}else!a.has(p)&&$s.testCollide_safe(l,this.aabbShape.zpp_inner)&&a.push(p);else if(i){if(!this.failed.has(p)){var _=l.aabb,y=_.minx>=o.minx&&_.miny>=o.miny&&_.maxx<=o.maxx&&_.maxy<=o.maxy;!a.has(p)&&y?a.push(p):y||(a.remove(p),this.failed.push(p))}}else{var m;if(a.has(p))m=!1;else{var f=l.aabb;m=f.minx>=o.minx&&f.miny>=o.miny&&f.maxx<=o.maxx&&f.maxy<=o.maxy}m&&a.push(p)}}s=s.next}return this.failed.clear(),a},pi.prototype.shapesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);for(var a=this.circShape.zpp_inner.aabb,s=null==o?new fe:o,l=this.list;null!=l&&l.aabb.maxx<a.minx;)l=l.next;for(;null!=l&&l.aabb.minx<=a.maxx;){var p=l.aabb;if(a.miny<=p.maxy&&p.miny<=a.maxy&&a.minx<=p.maxx&&p.minx<=a.maxx){var h,u=l.shape;if(null!=r){var c=u.filter;h=0!=(c.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&c.collisionGroup)}else h=!0;h&&(n?$s.containTest(this.circShape.zpp_inner,u)&&s.push(u.outer):$s.testCollide_safe(u,this.circShape.zpp_inner)&&s.push(u.outer))}l=l.next}return s},pi.prototype.bodiesInCircle=function(e,t,i,n,r,o){this.sync_broadphase(),this.updateCircShape(e,t,i);var a=this.circShape.zpp_inner.aabb,s=null==o?new ee:o;null==this.failed&&(this.failed=new ee);for(var l=this.list;null!=l&&l.aabb.maxx<a.minx;)l=l.next;for(;null!=l&&l.aabb.minx<=a.maxx;){var p=l.aabb;if(a.miny<=p.maxy&&p.miny<=a.maxy&&a.minx<=p.maxx&&p.minx<=a.maxx){var h,u=l.shape,c=u.body.outer;if(null!=r){var d=u.filter;h=0!=(d.collisionMask&r.collisionGroup)&&0!=(r.collisionMask&d.collisionGroup)}else h=!0;if(h)if(n){if(!this.failed.has(c)){var _=$s.containTest(this.circShape.zpp_inner,u);!s.has(c)&&_?s.push(c):_||(s.remove(c),this.failed.push(c))}}else!s.has(c)&&$s.testCollide_safe(u,this.circShape.zpp_inner)&&s.push(c)}l=l.next}return this.failed.clear(),s},pi.prototype.shapesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);for(var r=e.aabb,o=null==n?new fe:n,a=this.list;null!=a&&a.aabb.maxx<r.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=r.maxx;){var s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx){var l,p=a.shape;if(null!=i){var h=p.filter;l=0!=(h.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&h.collisionGroup)}else l=!0;l&&(t?$s.containTest(e,p)&&o.push(p.outer):$s.testCollide_safe(p,e)&&o.push(p.outer))}a=a.next}return o},pi.prototype.bodiesInShape=function(e,t,i,n){this.sync_broadphase(),this.validateShape(e);var r=e.aabb,o=null==n?new ee:n;null==this.failed&&(this.failed=new ee);for(var a=this.list;null!=a&&a.aabb.maxx<r.minx;)a=a.next;for(;null!=a&&a.aabb.minx<=r.maxx;){var s=a.aabb;if(r.miny<=s.maxy&&s.miny<=r.maxy&&r.minx<=s.maxx&&s.minx<=r.maxx){var l,p=a.shape,h=p.body.outer;if(null!=i){var u=p.filter;l=0!=(u.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&u.collisionGroup)}else l=!0;if(l)if(t){if(!this.failed.has(h)){var c=$s.containTest(e,p);!o.has(h)&&c?o.push(h):c||(o.remove(h),this.failed.push(h))}}else!o.has(h)&&$s.testCollide_safe(e,p)&&o.push(h)}a=a.next}return this.failed.clear(),o},pi.prototype.rayCast=function(e,t,i){this.sync_broadphase(),e.validate_dir();var n=e.rayAABB(),r=e.maxdist,o=null;if(0==e.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=n.minx;){var s,l=a.aabb;if(n.miny<=l.maxy&&l.miny<=n.maxy&&n.minx<=l.maxx&&l.minx<=n.maxx)if(null!=i){var p=a.shape.filter;s=0!=(p.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&p.collisionGroup)}else s=!0;else s=!1;if(s){var h=e.aabbsect(a.aabb);if(0<=h&&h<r){var u=0==a.shape.type?e.circlesect(a.shape.circle,t,r):e.polysect(a.shape.polygon,t,r);null!=u&&(r=u.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=u)}}a=a.next}else if(e.dirx<0){for(var c=this.list,d=null;null!=c&&c.aabb.minx<=n.maxx;)c=(d=c).next;for(c=d;null!=c;){var _,y=c.aabb;if(n.miny<=y.maxy&&y.miny<=n.maxy&&n.minx<=y.maxx&&y.minx<=n.maxx)if(null!=i){var m=c.shape.filter;_=0!=(m.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&m.collisionGroup)}else _=!0;else _=!1;if(_){var f=e.aabbsect(c.aabb);if(0<=f&&f<r){var x=0==c.shape.type?e.circlesect(c.shape.circle,t,r):e.polysect(c.shape.polygon,t,r);null!=x&&(r=x.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=x)}}c=c.prev}}else for(var v=this.list;null!=v&&v.aabb.minx<=n.maxx&&v.aabb.minx<e.originx+e.dirx*r;){var z,g=v.aabb;if(n.miny<=g.maxy&&g.miny<=n.maxy&&n.minx<=g.maxx&&g.minx<=n.maxx)if(null!=i){var b=v.shape.filter;z=0!=(b.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&b.collisionGroup)}else z=!0;else z=!1;if(z){var w=e.aabbsect(v.aabb);if(0<=w&&w<r){var S=0==v.shape.type?e.circlesect(v.shape.circle,t,r):e.polysect(v.shape.polygon,t,r);null!=S&&(r=S.zpp_inner.toiDistance,null!=o&&o.zpp_inner.free(),o=S)}}v=v.next}return null!=n.outer&&(n.outer.zpp_inner=null,n.outer=null),n.wrap_min=n.wrap_max=null,n._invalidate=null,n._validate=null,n.next=Ao.zpp_pool,Ao.zpp_pool=n,o},pi.prototype.rayMultiCast=function(e,t,i,n){this.sync_broadphase(),e.validate_dir();var r=e.rayAABB(),o=null==n?new K:n;if(0==e.dirx)for(var a=this.list;null!=a&&a.aabb.minx<=r.minx;){var s,l=a.aabb;if(r.miny<=l.maxy&&l.miny<=r.maxy&&r.minx<=l.maxx&&l.minx<=r.maxx)if(null!=i){var p=a.shape.filter;s=0!=(p.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&p.collisionGroup)}else s=!0;else s=!1;s&&0<=e.aabbsect(a.aabb)&&(0==a.shape.type?e.circlesect2(a.shape.circle,t,o):e.polysect2(a.shape.polygon,t,o)),a=a.next}else if(e.dirx<0){for(var h=this.list,u=null;null!=h&&h.aabb.minx<=r.maxx;)h=(u=h).next;for(h=u;null!=h;){var c,d=h.aabb;if(r.miny<=d.maxy&&d.miny<=r.maxy&&r.minx<=d.maxx&&d.minx<=r.maxx)if(null!=i){var _=h.shape.filter;c=0!=(_.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&_.collisionGroup)}else c=!0;else c=!1;c&&0<=e.aabbsect(h.aabb)&&(0==h.shape.type?e.circlesect2(h.shape.circle,t,o):e.polysect2(h.shape.polygon,t,o)),h=h.prev}}else for(var y=this.list;null!=y&&y.aabb.minx<=r.maxx;){var m,f=y.aabb;if(r.miny<=f.maxy&&f.miny<=r.maxy&&r.minx<=f.maxx&&f.minx<=r.maxx)if(null!=i){var x=y.shape.filter;m=0!=(x.collisionMask&i.collisionGroup)&&0!=(i.collisionMask&x.collisionGroup)}else m=!0;else m=!1;m&&0<=e.aabbsect(y.aabb)&&(0==y.shape.type?e.circlesect2(y.shape.circle,t,o):e.polysect2(y.shape.polygon,t,o)),y=y.next}return null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r.wrap_min=r.wrap_max=null,r._invalidate=null,r._validate=null,r.next=Ao.zpp_pool,Ao.zpp_pool=r,o},pi.prototype.__class__=pi;var hi=zpp_nape.util.ZNPArray2_Float=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};hi.__name__=["zpp_nape","util","ZNPArray2_Float"],hi.prototype.list=null,hi.prototype.width=null,hi.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},hi.prototype.get=function(e,t){return this.list[t*this.width+e]},hi.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},hi.prototype.__class__=hi;var ui=zpp_nape.util.ZNPArray2_ZPP_GeomVert=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};ui.__name__=["zpp_nape","util","ZNPArray2_ZPP_GeomVert"],ui.prototype.list=null,ui.prototype.width=null,ui.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},ui.prototype.get=function(e,t){return this.list[t*this.width+e]},ui.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},ui.prototype.__class__=ui;var ci=zpp_nape.util.ZNPArray2_ZPP_MarchPair=function(e,t){this.width=0,this.list=null,this.width=e,this.list=[]};ci.__name__=["zpp_nape","util","ZNPArray2_ZPP_MarchPair"],ci.prototype.list=null,ci.prototype.width=null,ci.prototype.resize=function(e,t,i){for(var n=0,r=(this.width=e)*t;n<r;)this.list[n++]=i},ci.prototype.get=function(e,t){return this.list[t*this.width+e]},ci.prototype.set=function(e,t,i){return this.list[t*this.width+e]=i},ci.prototype.__class__=ci;var di=zpp_nape.util.Hashable2_Boolfalse=function(){this.di=0,this.id=0,this.hnext=null,this.next=null,this.value=!1};di.__name__=["zpp_nape","util","Hashable2_Boolfalse"],di.get=function(e,t,i){var n;null==di.zpp_pool?n=new di:(n=di.zpp_pool,di.zpp_pool=n.next,n.next=null),n.id=e,n.di=t;var r=n;return r.value=i,r},di.getpersist=function(e,t){var i;return null==di.zpp_pool?i=new di:(i=di.zpp_pool,di.zpp_pool=i.next,i.next=null),i.id=e,i.di=t,i},di.ordered_get=function(e,t,i){if(e<=t){var n;null==di.zpp_pool?n=new di:(n=di.zpp_pool,di.zpp_pool=n.next,n.next=null),n.id=e,n.di=t;var r=n;return r.value=i,r}var o;null==di.zpp_pool?o=new di:(o=di.zpp_pool,di.zpp_pool=o.next,o.next=null),o.id=t,o.di=e;var a=o;return a.value=i,a},di.ordered_get_persist=function(e,t){var i,n;return e<=t?(null==di.zpp_pool?i=new di:(i=di.zpp_pool,di.zpp_pool=i.next,i.next=null),i.id=e,i.di=t,i):(null==di.zpp_pool?n=new di:(n=di.zpp_pool,di.zpp_pool=n.next,n.next=null),n.id=t,n.di=e,n)},di.prototype.value=null,di.prototype.next=null,di.prototype.hnext=null,di.prototype.id=null,di.prototype.di=null,di.prototype.free=function(){},di.prototype.alloc=function(){},di.prototype.__class__=di;var _i=zpp_nape.util.FastHash2_Hashable2_Boolfalse=function(){this.cnt=0,this.table=null,this.cnt=0,this.table=[];for(var e=0;e<1048576;)++e,this.table.push(null)};_i.__name__=["zpp_nape","util","FastHash2_Hashable2_Boolfalse"],_i.prototype.table=null,_i.prototype.cnt=null,_i.prototype.empty=function(){return 0==this.cnt},_i.prototype.clear=function(){for(var e=0,t=this.table.length;e<t;){var i=e++,n=this.table[i];if(null!=n){for(;null!=n;){var r=n.hnext;n.hnext=null,n=r}this.table[i]=null}}},_i.prototype.get=function(e,t){var i=this.table[106039*e+t&1048575];if(null==i)return null;if(i.id==e&&i.di==t)return i;for(;null!=(i=i.hnext)&&(i.id!=e||i.di!=t););return i},_i.prototype.ordered_get=function(e,t){if(t<e){var i=e;e=t,t=i}var n=this.table[106039*e+t&1048575];if(null==n)return null;if(n.id==e&&n.di==t)return n;for(;null!=(n=n.hnext)&&(n.id!=e||n.di!=t););return n},_i.prototype.has=function(e,t){var i=this.table[106039*e+t&1048575];if(null==i)return!1;if(i.id==e&&i.di==t)return!0;for(;null!=(i=i.hnext)&&(i.id!=e||i.di!=t););return null!=i},_i.prototype.maybeAdd=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];null==i?(this.table[t]=e).hnext=null:(e.hnext=i.hnext,i.hnext=e),this.cnt++},_i.prototype.add=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];null==i?(this.table[t]=e).hnext=null:(e.hnext=i.hnext,i.hnext=e),this.cnt++},_i.prototype.remove=function(e){var t=106039*e.id+e.di&1048575,i=this.table[t];if(i==e)this.table[t]=i.hnext;else if(null!=i){for(var n;null!=(i=(n=i).hnext)&&i!=e;);n.hnext=i.hnext}e.hnext=null,this.cnt--},_i.prototype.hash=function(e,t){return 106039*e+t&1048575},_i.prototype.__class__=_i;var yi=zpp_nape.util.ZNPList_ZPP_CallbackSet=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};yi.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"],yi.prototype.head=null,yi.prototype.begin=function(){return this.head},yi.prototype.modified=null,yi.prototype.pushmod=null,yi.prototype.length=null,yi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},yi.prototype.add=function(e){var t;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},yi.prototype.inlined_add=function(e){var t;null==Ni.zpp_pool?t=new Ni:(t=Ni.zpp_pool,Ni.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},yi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},yi.prototype.insert=function(e,t){var i;null==Ni.zpp_pool?i=new Ni:(i=Ni.zpp_pool,Ni.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},yi.prototype.inlined_insert=function(e,t){var i;null==Ni.zpp_pool?i=new Ni:(i=Ni.zpp_pool,Ni.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},yi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},yi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},yi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},yi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},yi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ni.zpp_pool,Ni.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},yi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},yi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ni.zpp_pool,Ni.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},yi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ni.zpp_pool,Ni.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},yi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ni.zpp_pool,Ni.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},yi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ni.zpp_pool,Ni.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},yi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},yi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},yi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ni.zpp_pool,Ni.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},yi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},yi.prototype.empty=function(){return null==this.head},yi.prototype.size=function(){return this.length},yi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},yi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},yi.prototype.front=function(){return this.head.elt},yi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},yi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},yi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},yi.prototype.__class__=yi;var mi=zpp_nape.util.ZNPList_ZPP_Shape=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};mi.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"],mi.prototype.head=null,mi.prototype.begin=function(){return this.head},mi.prototype.modified=null,mi.prototype.pushmod=null,mi.prototype.length=null,mi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},mi.prototype.add=function(e){var t;null==Ui.zpp_pool?t=new Ui:(t=Ui.zpp_pool,Ui.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},mi.prototype.inlined_add=function(e){var t;null==Ui.zpp_pool?t=new Ui:(t=Ui.zpp_pool,Ui.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},mi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},mi.prototype.insert=function(e,t){var i;null==Ui.zpp_pool?i=new Ui:(i=Ui.zpp_pool,Ui.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},mi.prototype.inlined_insert=function(e,t){var i;null==Ui.zpp_pool?i=new Ui:(i=Ui.zpp_pool,Ui.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},mi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},mi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},mi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},mi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},mi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ui.zpp_pool,Ui.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},mi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ui.zpp_pool,Ui.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},mi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ui.zpp_pool,Ui.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},mi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ui.zpp_pool,Ui.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},mi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ui.zpp_pool,Ui.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},mi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},mi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},mi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ui.zpp_pool,Ui.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},mi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},mi.prototype.empty=function(){return null==this.head},mi.prototype.size=function(){return this.length},mi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},mi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},mi.prototype.front=function(){return this.head.elt},mi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},mi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},mi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},mi.prototype.__class__=mi;var fi=zpp_nape.util.ZNPList_ZPP_Body=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};fi.__name__=["zpp_nape","util","ZNPList_ZPP_Body"],fi.prototype.head=null,fi.prototype.begin=function(){return this.head},fi.prototype.modified=null,fi.prototype.pushmod=null,fi.prototype.length=null,fi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},fi.prototype.add=function(e){var t;null==Vi.zpp_pool?t=new Vi:(t=Vi.zpp_pool,Vi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},fi.prototype.inlined_add=function(e){var t;null==Vi.zpp_pool?t=new Vi:(t=Vi.zpp_pool,Vi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},fi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},fi.prototype.insert=function(e,t){var i;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},fi.prototype.inlined_insert=function(e,t){var i;null==Vi.zpp_pool?i=new Vi:(i=Vi.zpp_pool,Vi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},fi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},fi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},fi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},fi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},fi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Vi.zpp_pool,Vi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},fi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},fi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Vi.zpp_pool,Vi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},fi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Vi.zpp_pool,Vi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},fi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Vi.zpp_pool,Vi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},fi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Vi.zpp_pool,Vi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},fi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},fi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},fi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Vi.zpp_pool,Vi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},fi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},fi.prototype.empty=function(){return null==this.head},fi.prototype.size=function(){return this.length},fi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},fi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},fi.prototype.front=function(){return this.head.elt},fi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},fi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},fi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},fi.prototype.__class__=fi;var xi=zpp_nape.util.ZNPList_ZPP_Compound=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};xi.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"],xi.prototype.head=null,xi.prototype.begin=function(){return this.head},xi.prototype.modified=null,xi.prototype.pushmod=null,xi.prototype.length=null,xi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},xi.prototype.add=function(e){var t;null==Wi.zpp_pool?t=new Wi:(t=Wi.zpp_pool,Wi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},xi.prototype.inlined_add=function(e){var t;null==Wi.zpp_pool?t=new Wi:(t=Wi.zpp_pool,Wi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},xi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},xi.prototype.insert=function(e,t){var i;null==Wi.zpp_pool?i=new Wi:(i=Wi.zpp_pool,Wi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},xi.prototype.inlined_insert=function(e,t){var i;null==Wi.zpp_pool?i=new Wi:(i=Wi.zpp_pool,Wi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},xi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},xi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},xi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},xi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},xi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Wi.zpp_pool,Wi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},xi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Wi.zpp_pool,Wi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},xi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Wi.zpp_pool,Wi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},xi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Wi.zpp_pool,Wi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},xi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Wi.zpp_pool,Wi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},xi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},xi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},xi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Wi.zpp_pool,Wi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},xi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},xi.prototype.empty=function(){return null==this.head},xi.prototype.size=function(){return this.length},xi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},xi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},xi.prototype.front=function(){return this.head.elt},xi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},xi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},xi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},xi.prototype.__class__=xi;var vi=zpp_nape.util.ZNPList_ZPP_Arbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};vi.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"],vi.prototype.head=null,vi.prototype.begin=function(){return this.head},vi.prototype.modified=null,vi.prototype.pushmod=null,vi.prototype.length=null,vi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},vi.prototype.add=function(e){var t;null==Ko.zpp_pool?t=new Ko:(t=Ko.zpp_pool,Ko.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vi.prototype.inlined_add=function(e){var t;null==Ko.zpp_pool?t=new Ko:(t=Ko.zpp_pool,Ko.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},vi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},vi.prototype.insert=function(e,t){var i;null==Ko.zpp_pool?i=new Ko:(i=Ko.zpp_pool,Ko.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vi.prototype.inlined_insert=function(e,t){var i;null==Ko.zpp_pool?i=new Ko:(i=Ko.zpp_pool,Ko.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},vi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},vi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},vi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},vi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ko.zpp_pool,Ko.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},vi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ko.zpp_pool,Ko.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},vi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ko.zpp_pool,Ko.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ko.zpp_pool,Ko.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},vi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},vi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ko.zpp_pool,Ko.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},vi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},vi.prototype.empty=function(){return null==this.head},vi.prototype.size=function(){return this.length},vi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},vi.prototype.front=function(){return this.head.elt},vi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},vi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},vi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},vi.prototype.__class__=vi;var zi=zpp_nape.util.ZNPList_ZPP_CbSetPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};zi.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"],zi.prototype.head=null,zi.prototype.begin=function(){return this.head},zi.prototype.modified=null,zi.prototype.pushmod=null,zi.prototype.length=null,zi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},zi.prototype.add=function(e){var t;null==Yi.zpp_pool?t=new Yi:(t=Yi.zpp_pool,Yi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zi.prototype.inlined_add=function(e){var t;null==Yi.zpp_pool?t=new Yi:(t=Yi.zpp_pool,Yi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},zi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},zi.prototype.insert=function(e,t){var i;null==Yi.zpp_pool?i=new Yi:(i=Yi.zpp_pool,Yi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zi.prototype.inlined_insert=function(e,t){var i;null==Yi.zpp_pool?i=new Yi:(i=Yi.zpp_pool,Yi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},zi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},zi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},zi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Yi.zpp_pool,Yi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},zi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Yi.zpp_pool,Yi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},zi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Yi.zpp_pool,Yi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},zi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Yi.zpp_pool,Yi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Yi.zpp_pool,Yi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},zi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},zi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Yi.zpp_pool,Yi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},zi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},zi.prototype.empty=function(){return null==this.head},zi.prototype.size=function(){return this.length},zi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},zi.prototype.front=function(){return this.head.elt},zi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},zi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},zi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},zi.prototype.__class__=zi;var Pn=zpp_nape.util.ZNPList_ZPP_CutInt=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Pn.__name__=["zpp_nape","util","ZNPList_ZPP_CutInt"],Pn.prototype.head=null,Pn.prototype.begin=function(){return this.head},Pn.prototype.modified=null,Pn.prototype.pushmod=null,Pn.prototype.length=null,Pn.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Pn.prototype.add=function(e){var t;null==Zi.zpp_pool?t=new Zi:(t=Zi.zpp_pool,Zi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pn.prototype.inlined_add=function(e){var t;null==Zi.zpp_pool?t=new Zi:(t=Zi.zpp_pool,Zi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pn.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Pn.prototype.insert=function(e,t){var i;null==Zi.zpp_pool?i=new Zi:(i=Zi.zpp_pool,Zi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pn.prototype.inlined_insert=function(e,t){var i;null==Zi.zpp_pool?i=new Zi:(i=Zi.zpp_pool,Zi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pn.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pn.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pn.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pn.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pn.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zi.zpp_pool,Zi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pn.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Pn.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Zi.zpp_pool,Zi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pn.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Zi.zpp_pool,Zi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Pn.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zi.zpp_pool,Zi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pn.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Zi.zpp_pool,Zi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pn.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Pn.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pn.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Zi.zpp_pool,Zi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pn.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Pn.prototype.empty=function(){return null==this.head},Pn.prototype.size=function(){return this.length},Pn.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pn.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pn.prototype.front=function(){return this.head.elt},Pn.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Pn.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Pn.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Pn.prototype.__class__=Pn;var kn=zpp_nape.util.ZNPList_ZPP_CutVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};kn.__name__=["zpp_nape","util","ZNPList_ZPP_CutVert"],kn.prototype.head=null,kn.prototype.begin=function(){return this.head},kn.prototype.modified=null,kn.prototype.pushmod=null,kn.prototype.length=null,kn.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},kn.prototype.add=function(e){var t;null==Ji.zpp_pool?t=new Ji:(t=Ji.zpp_pool,Ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},kn.prototype.inlined_add=function(e){var t;null==Ji.zpp_pool?t=new Ji:(t=Ji.zpp_pool,Ji.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},kn.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},kn.prototype.insert=function(e,t){var i;null==Ji.zpp_pool?i=new Ji:(i=Ji.zpp_pool,Ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},kn.prototype.inlined_insert=function(e,t){var i;null==Ji.zpp_pool?i=new Ji:(i=Ji.zpp_pool,Ji.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},kn.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},kn.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},kn.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},kn.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},kn.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ji.zpp_pool,Ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},kn.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},kn.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Ji.zpp_pool,Ji.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},kn.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Ji.zpp_pool,Ji.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},kn.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ji.zpp_pool,Ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},kn.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Ji.zpp_pool,Ji.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},kn.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},kn.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},kn.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Ji.zpp_pool,Ji.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},kn.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},kn.prototype.empty=function(){return null==this.head},kn.prototype.size=function(){return this.length},kn.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},kn.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},kn.prototype.front=function(){return this.head.elt},kn.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},kn.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},kn.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},kn.prototype.__class__=kn;var gi=zpp_nape.util.ZNPList_ZPP_PartitionVertex=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};gi.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionVertex"],gi.prototype.head=null,gi.prototype.begin=function(){return this.head},gi.prototype.modified=null,gi.prototype.pushmod=null,gi.prototype.length=null,gi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},gi.prototype.add=function(e){var t;null==Qi.zpp_pool?t=new Qi:(t=Qi.zpp_pool,Qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gi.prototype.inlined_add=function(e){var t;null==Qi.zpp_pool?t=new Qi:(t=Qi.zpp_pool,Qi.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},gi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},gi.prototype.insert=function(e,t){var i;null==Qi.zpp_pool?i=new Qi:(i=Qi.zpp_pool,Qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gi.prototype.inlined_insert=function(e,t){var i;null==Qi.zpp_pool?i=new Qi:(i=Qi.zpp_pool,Qi.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},gi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},gi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},gi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qi.zpp_pool,Qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},gi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qi.zpp_pool,Qi.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},gi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Qi.zpp_pool,Qi.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},gi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qi.zpp_pool,Qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qi.zpp_pool,Qi.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},gi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},gi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qi.zpp_pool,Qi.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},gi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},gi.prototype.empty=function(){return null==this.head},gi.prototype.size=function(){return this.length},gi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},gi.prototype.front=function(){return this.head.elt},gi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},gi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},gi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},gi.prototype.__class__=gi;var bi=zpp_nape.util.ZNPList_ZPP_SimplifyP=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};bi.__name__=["zpp_nape","util","ZNPList_ZPP_SimplifyP"],bi.prototype.head=null,bi.prototype.begin=function(){return this.head},bi.prototype.modified=null,bi.prototype.pushmod=null,bi.prototype.length=null,bi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},bi.prototype.add=function(e){var t;null==$i.zpp_pool?t=new $i:(t=$i.zpp_pool,$i.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},bi.prototype.inlined_add=function(e){var t;null==$i.zpp_pool?t=new $i:(t=$i.zpp_pool,$i.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},bi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},bi.prototype.insert=function(e,t){var i;null==$i.zpp_pool?i=new $i:(i=$i.zpp_pool,$i.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},bi.prototype.inlined_insert=function(e,t){var i;null==$i.zpp_pool?i=new $i:(i=$i.zpp_pool,$i.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},bi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},bi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},bi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},bi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},bi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$i.zpp_pool,$i.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},bi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},bi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$i.zpp_pool,$i.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},bi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=$i.zpp_pool,$i.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},bi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$i.zpp_pool,$i.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},bi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$i.zpp_pool,$i.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},bi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},bi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},bi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$i.zpp_pool,$i.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},bi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},bi.prototype.empty=function(){return null==this.head},bi.prototype.size=function(){return this.length},bi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},bi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},bi.prototype.front=function(){return this.head.elt},bi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},bi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},bi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},bi.prototype.__class__=bi;var wi=zpp_nape.util.ZNPList_ZPP_PartitionedPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};wi.__name__=["zpp_nape","util","ZNPList_ZPP_PartitionedPoly"],wi.prototype.head=null,wi.prototype.begin=function(){return this.head},wi.prototype.modified=null,wi.prototype.pushmod=null,wi.prototype.length=null,wi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},wi.prototype.add=function(e){var t;null==en.zpp_pool?t=new en:(t=en.zpp_pool,en.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},wi.prototype.inlined_add=function(e){var t;null==en.zpp_pool?t=new en:(t=en.zpp_pool,en.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},wi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},wi.prototype.insert=function(e,t){var i;null==en.zpp_pool?i=new en:(i=en.zpp_pool,en.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},wi.prototype.inlined_insert=function(e,t){var i;null==en.zpp_pool?i=new en:(i=en.zpp_pool,en.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},wi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},wi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},wi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},wi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},wi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=en.zpp_pool,en.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},wi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},wi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=en.zpp_pool,en.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},wi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=en.zpp_pool,en.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},wi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=en.zpp_pool,en.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},wi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=en.zpp_pool,en.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},wi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},wi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},wi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=en.zpp_pool,en.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},wi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},wi.prototype.empty=function(){return null==this.head},wi.prototype.size=function(){return this.length},wi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},wi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},wi.prototype.front=function(){return this.head.elt},wi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},wi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},wi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},wi.prototype.__class__=wi;var Si=zpp_nape.util.ZNPList_ZPP_GeomVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Si.__name__=["zpp_nape","util","ZNPList_ZPP_GeomVert"],Si.prototype.head=null,Si.prototype.begin=function(){return this.head},Si.prototype.modified=null,Si.prototype.pushmod=null,Si.prototype.length=null,Si.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Si.prototype.add=function(e){var t;null==tn.zpp_pool?t=new tn:(t=tn.zpp_pool,tn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Si.prototype.inlined_add=function(e){var t;null==tn.zpp_pool?t=new tn:(t=tn.zpp_pool,tn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Si.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Si.prototype.insert=function(e,t){var i;null==tn.zpp_pool?i=new tn:(i=tn.zpp_pool,tn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Si.prototype.inlined_insert=function(e,t){var i;null==tn.zpp_pool?i=new tn:(i=tn.zpp_pool,tn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Si.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Si.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Si.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Si.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Si.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=tn.zpp_pool,tn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Si.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Si.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=tn.zpp_pool,tn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Si.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=tn.zpp_pool,tn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Si.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=tn.zpp_pool,tn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Si.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=tn.zpp_pool,tn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Si.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Si.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Si.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=tn.zpp_pool,tn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Si.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Si.prototype.empty=function(){return null==this.head},Si.prototype.size=function(){return this.length},Si.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Si.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Si.prototype.front=function(){return this.head.elt},Si.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Si.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Si.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Si.prototype.__class__=Si;var Ci=zpp_nape.util.ZNPList_ZPP_SimpleVert=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ci.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleVert"],Ci.prototype.head=null,Ci.prototype.begin=function(){return this.head},Ci.prototype.modified=null,Ci.prototype.pushmod=null,Ci.prototype.length=null,Ci.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ci.prototype.add=function(e){var t;null==nn.zpp_pool?t=new nn:(t=nn.zpp_pool,nn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ci.prototype.inlined_add=function(e){var t;null==nn.zpp_pool?t=new nn:(t=nn.zpp_pool,nn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ci.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ci.prototype.insert=function(e,t){var i;null==nn.zpp_pool?i=new nn:(i=nn.zpp_pool,nn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ci.prototype.inlined_insert=function(e,t){var i;null==nn.zpp_pool?i=new nn:(i=nn.zpp_pool,nn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ci.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ci.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ci.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ci.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ci.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=nn.zpp_pool,nn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ci.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ci.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=nn.zpp_pool,nn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ci.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=nn.zpp_pool,nn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ci.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=nn.zpp_pool,nn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ci.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=nn.zpp_pool,nn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ci.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ci.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ci.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=nn.zpp_pool,nn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ci.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ci.prototype.empty=function(){return null==this.head},Ci.prototype.size=function(){return this.length},Ci.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ci.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ci.prototype.front=function(){return this.head.elt},Ci.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ci.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ci.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ci.prototype.__class__=Ci;var Mi=zpp_nape.util.ZNPList_ZPP_SimpleEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Mi.__name__=["zpp_nape","util","ZNPList_ZPP_SimpleEvent"],Mi.prototype.head=null,Mi.prototype.begin=function(){return this.head},Mi.prototype.modified=null,Mi.prototype.pushmod=null,Mi.prototype.length=null,Mi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Mi.prototype.add=function(e){var t;null==rn.zpp_pool?t=new rn:(t=rn.zpp_pool,rn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Mi.prototype.inlined_add=function(e){var t;null==rn.zpp_pool?t=new rn:(t=rn.zpp_pool,rn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Mi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Mi.prototype.insert=function(e,t){var i;null==rn.zpp_pool?i=new rn:(i=rn.zpp_pool,rn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Mi.prototype.inlined_insert=function(e,t){var i;null==rn.zpp_pool?i=new rn:(i=rn.zpp_pool,rn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Mi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Mi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Mi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Mi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Mi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rn.zpp_pool,rn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Mi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Mi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rn.zpp_pool,rn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Mi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=rn.zpp_pool,rn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Mi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rn.zpp_pool,rn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Mi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rn.zpp_pool,rn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Mi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Mi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Mi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rn.zpp_pool,rn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Mi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Mi.prototype.empty=function(){return null==this.head},Mi.prototype.size=function(){return this.length},Mi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Mi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Mi.prototype.front=function(){return this.head.elt},Mi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Mi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Mi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Mi.prototype.__class__=Mi;var Pi=zpp_nape.util.ZNPList_ZPP_AABBPair=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Pi.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"],Pi.prototype.head=null,Pi.prototype.begin=function(){return this.head},Pi.prototype.modified=null,Pi.prototype.pushmod=null,Pi.prototype.length=null,Pi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Pi.prototype.add=function(e){var t;null==rr.zpp_pool?t=new rr:(t=rr.zpp_pool,rr.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pi.prototype.inlined_add=function(e){var t;null==rr.zpp_pool?t=new rr:(t=rr.zpp_pool,rr.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Pi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Pi.prototype.insert=function(e,t){var i;null==rr.zpp_pool?i=new rr:(i=rr.zpp_pool,rr.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pi.prototype.inlined_insert=function(e,t){var i;null==rr.zpp_pool?i=new rr:(i=rr.zpp_pool,rr.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Pi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Pi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Pi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rr.zpp_pool,rr.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Pi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=rr.zpp_pool,rr.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Pi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=rr.zpp_pool,rr.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Pi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rr.zpp_pool,rr.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=rr.zpp_pool,rr.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Pi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Pi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=rr.zpp_pool,rr.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Pi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Pi.prototype.empty=function(){return null==this.head},Pi.prototype.size=function(){return this.length},Pi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Pi.prototype.front=function(){return this.head.elt},Pi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Pi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Pi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Pi.prototype.__class__=Pi;var ki=zpp_nape.util.ZNPList_ZPP_Edge=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};ki.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"],ki.prototype.head=null,ki.prototype.begin=function(){return this.head},ki.prototype.modified=null,ki.prototype.pushmod=null,ki.prototype.length=null,ki.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},ki.prototype.add=function(e){var t;null==an.zpp_pool?t=new an:(t=an.zpp_pool,an.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},ki.prototype.inlined_add=function(e){var t;null==an.zpp_pool?t=new an:(t=an.zpp_pool,an.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},ki.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},ki.prototype.insert=function(e,t){var i;null==an.zpp_pool?i=new an:(i=an.zpp_pool,an.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},ki.prototype.inlined_insert=function(e,t){var i;null==an.zpp_pool?i=new an:(i=an.zpp_pool,an.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},ki.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},ki.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},ki.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},ki.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},ki.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=an.zpp_pool,an.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ki.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},ki.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=an.zpp_pool,an.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},ki.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=an.zpp_pool,an.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},ki.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=an.zpp_pool,an.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},ki.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=an.zpp_pool,an.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},ki.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},ki.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},ki.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=an.zpp_pool,an.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},ki.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},ki.prototype.empty=function(){return null==this.head},ki.prototype.size=function(){return this.length},ki.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},ki.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},ki.prototype.front=function(){return this.head.elt},ki.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},ki.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},ki.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},ki.prototype.__class__=ki;var Ti=zpp_nape.util.ZNPList_ZPP_AABBNode=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ti.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"],Ti.prototype.head=null,Ti.prototype.begin=function(){return this.head},Ti.prototype.modified=null,Ti.prototype.pushmod=null,Ti.prototype.length=null,Ti.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ti.prototype.add=function(e){var t;null==sn.zpp_pool?t=new sn:(t=sn.zpp_pool,sn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ti.prototype.inlined_add=function(e){var t;null==sn.zpp_pool?t=new sn:(t=sn.zpp_pool,sn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ti.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ti.prototype.insert=function(e,t){var i;null==sn.zpp_pool?i=new sn:(i=sn.zpp_pool,sn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ti.prototype.inlined_insert=function(e,t){var i;null==sn.zpp_pool?i=new sn:(i=sn.zpp_pool,sn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ti.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ti.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ti.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ti.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ti.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=sn.zpp_pool,sn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ti.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ti.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=sn.zpp_pool,sn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ti.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=sn.zpp_pool,sn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ti.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=sn.zpp_pool,sn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ti.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=sn.zpp_pool,sn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ti.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ti.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ti.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=sn.zpp_pool,sn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ti.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ti.prototype.empty=function(){return null==this.head},Ti.prototype.size=function(){return this.length},Ti.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ti.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ti.prototype.front=function(){return this.head.elt},Ti.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ti.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ti.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ti.prototype.__class__=Ti;var Oi=zpp_nape.util.ZNPList_ZPP_Component=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Oi.__name__=["zpp_nape","util","ZNPList_ZPP_Component"],Oi.prototype.head=null,Oi.prototype.begin=function(){return this.head},Oi.prototype.modified=null,Oi.prototype.pushmod=null,Oi.prototype.length=null,Oi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Oi.prototype.add=function(e){var t;null==ln.zpp_pool?t=new ln:(t=ln.zpp_pool,ln.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oi.prototype.inlined_add=function(e){var t;null==ln.zpp_pool?t=new ln:(t=ln.zpp_pool,ln.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Oi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Oi.prototype.insert=function(e,t){var i;null==ln.zpp_pool?i=new ln:(i=ln.zpp_pool,ln.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oi.prototype.inlined_insert=function(e,t){var i;null==ln.zpp_pool?i=new ln:(i=ln.zpp_pool,ln.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Oi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ln.zpp_pool,ln.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ln.zpp_pool,ln.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Oi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Oi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ln.zpp_pool,ln.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Oi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ln.zpp_pool,ln.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Oi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ln.zpp_pool,ln.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Oi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ln.zpp_pool,ln.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ln.zpp_pool,ln.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Oi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Oi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ln.zpp_pool,ln.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ln.zpp_pool,ln.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Oi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Oi.prototype.empty=function(){return null==this.head},Oi.prototype.size=function(){return this.length},Oi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Oi.prototype.front=function(){return this.head.elt},Oi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Oi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Oi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Oi.prototype.__class__=Oi;var Ai=zpp_nape.util.ZNPList_ZPP_FluidArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ai.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"],Ai.prototype.head=null,Ai.prototype.begin=function(){return this.head},Ai.prototype.modified=null,Ai.prototype.pushmod=null,Ai.prototype.length=null,Ai.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ai.prototype.add=function(e){var t;null==Qo.zpp_pool?t=new Qo:(t=Qo.zpp_pool,Qo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ai.prototype.inlined_add=function(e){var t;null==Qo.zpp_pool?t=new Qo:(t=Qo.zpp_pool,Qo.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ai.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ai.prototype.insert=function(e,t){var i;null==Qo.zpp_pool?i=new Qo:(i=Qo.zpp_pool,Qo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ai.prototype.inlined_insert=function(e,t){var i;null==Qo.zpp_pool?i=new Qo:(i=Qo.zpp_pool,Qo.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ai.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ai.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ai.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ai.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ai.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qo.zpp_pool,Qo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ai.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ai.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=Qo.zpp_pool,Qo.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ai.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=Qo.zpp_pool,Qo.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ai.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qo.zpp_pool,Qo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ai.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=Qo.zpp_pool,Qo.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ai.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ai.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ai.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=Qo.zpp_pool,Qo.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ai.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ai.prototype.empty=function(){return null==this.head},Ai.prototype.size=function(){return this.length},Ai.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ai.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ai.prototype.front=function(){return this.head.elt},Ai.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ai.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ai.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ai.prototype.__class__=Ai;var Ei=zpp_nape.util.ZNPList_ZPP_SensorArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ei.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"],Ei.prototype.head=null,Ei.prototype.begin=function(){return this.head},Ei.prototype.modified=null,Ei.prototype.pushmod=null,Ei.prototype.length=null,Ei.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ei.prototype.add=function(e){var t;null==$o.zpp_pool?t=new $o:(t=$o.zpp_pool,$o.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ei.prototype.inlined_add=function(e){var t;null==$o.zpp_pool?t=new $o:(t=$o.zpp_pool,$o.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ei.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ei.prototype.insert=function(e,t){var i;null==$o.zpp_pool?i=new $o:(i=$o.zpp_pool,$o.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ei.prototype.inlined_insert=function(e,t){var i;null==$o.zpp_pool?i=new $o:(i=$o.zpp_pool,$o.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ei.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ei.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ei.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ei.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ei.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$o.zpp_pool,$o.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ei.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ei.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=$o.zpp_pool,$o.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ei.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=$o.zpp_pool,$o.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ei.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$o.zpp_pool,$o.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ei.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=$o.zpp_pool,$o.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ei.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ei.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ei.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=$o.zpp_pool,$o.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ei.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ei.prototype.empty=function(){return null==this.head},Ei.prototype.size=function(){return this.length},Ei.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ei.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ei.prototype.front=function(){return this.head.elt},Ei.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ei.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ei.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ei.prototype.__class__=Ei;var Gi=zpp_nape.util.ZNPList_ZPP_Listener=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Gi.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"],Gi.prototype.head=null,Gi.prototype.begin=function(){return this.head},Gi.prototype.modified=null,Gi.prototype.pushmod=null,Gi.prototype.length=null,Gi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Gi.prototype.add=function(e){var t;null==hn.zpp_pool?t=new hn:(t=hn.zpp_pool,hn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Gi.prototype.inlined_add=function(e){var t;null==hn.zpp_pool?t=new hn:(t=hn.zpp_pool,hn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Gi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Gi.prototype.insert=function(e,t){var i;null==hn.zpp_pool?i=new hn:(i=hn.zpp_pool,hn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Gi.prototype.inlined_insert=function(e,t){var i;null==hn.zpp_pool?i=new hn:(i=hn.zpp_pool,hn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Gi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Gi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Gi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Gi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Gi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=hn.zpp_pool,hn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Gi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Gi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=hn.zpp_pool,hn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Gi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=hn.zpp_pool,hn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Gi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=hn.zpp_pool,hn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Gi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=hn.zpp_pool,hn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Gi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Gi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Gi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=hn.zpp_pool,hn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Gi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Gi.prototype.empty=function(){return null==this.head},Gi.prototype.size=function(){return this.length},Gi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Gi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Gi.prototype.front=function(){return this.head.elt},Gi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Gi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Gi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Gi.prototype.__class__=Gi;var Ii=zpp_nape.util.ZNPList_ZPP_ColArbiter=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ii.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"],Ii.prototype.head=null,Ii.prototype.begin=function(){return this.head},Ii.prototype.modified=null,Ii.prototype.pushmod=null,Ii.prototype.length=null,Ii.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ii.prototype.add=function(e){var t;null==ea.zpp_pool?t=new ea:(t=ea.zpp_pool,ea.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ii.prototype.inlined_add=function(e){var t;null==ea.zpp_pool?t=new ea:(t=ea.zpp_pool,ea.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ii.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ii.prototype.insert=function(e,t){var i;null==ea.zpp_pool?i=new ea:(i=ea.zpp_pool,ea.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ii.prototype.inlined_insert=function(e,t){var i;null==ea.zpp_pool?i=new ea:(i=ea.zpp_pool,ea.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ii.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ii.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ii.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ii.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ii.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ea.zpp_pool,ea.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ii.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ii.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=ea.zpp_pool,ea.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ii.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=ea.zpp_pool,ea.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ii.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ea.zpp_pool,ea.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ii.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=ea.zpp_pool,ea.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ii.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ii.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ii.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=ea.zpp_pool,ea.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ii.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ii.prototype.empty=function(){return null==this.head},Ii.prototype.size=function(){return this.length},Ii.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ii.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ii.prototype.front=function(){return this.head.elt},Ii.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ii.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ii.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ii.prototype.__class__=Ii;var Bi=zpp_nape.util.ZNPList_ZPP_InteractionGroup=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Bi.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionGroup"],Bi.prototype.head=null,Bi.prototype.begin=function(){return this.head},Bi.prototype.modified=null,Bi.prototype.pushmod=null,Bi.prototype.length=null,Bi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Bi.prototype.add=function(e){var t;null==un.zpp_pool?t=new un:(t=un.zpp_pool,un.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Bi.prototype.inlined_add=function(e){var t;null==un.zpp_pool?t=new un:(t=un.zpp_pool,un.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Bi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Bi.prototype.insert=function(e,t){var i;null==un.zpp_pool?i=new un:(i=un.zpp_pool,un.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Bi.prototype.inlined_insert=function(e,t){var i;null==un.zpp_pool?i=new un:(i=un.zpp_pool,un.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Bi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Bi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Bi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Bi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Bi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=un.zpp_pool,un.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Bi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Bi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=un.zpp_pool,un.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Bi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=un.zpp_pool,un.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Bi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=un.zpp_pool,un.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Bi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=un.zpp_pool,un.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Bi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Bi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Bi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=un.zpp_pool,un.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Bi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Bi.prototype.empty=function(){return null==this.head},Bi.prototype.size=function(){return this.length},Bi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Bi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Bi.prototype.front=function(){return this.head.elt},Bi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Bi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Bi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Bi.prototype.__class__=Bi;var Li=zpp_nape.util.ZNPList_ZPP_ToiEvent=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Li.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"],Li.prototype.head=null,Li.prototype.begin=function(){return this.head},Li.prototype.modified=null,Li.prototype.pushmod=null,Li.prototype.length=null,Li.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Li.prototype.add=function(e){var t;null==cn.zpp_pool?t=new cn:(t=cn.zpp_pool,cn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Li.prototype.inlined_add=function(e){var t;null==cn.zpp_pool?t=new cn:(t=cn.zpp_pool,cn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Li.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Li.prototype.insert=function(e,t){var i;null==cn.zpp_pool?i=new cn:(i=cn.zpp_pool,cn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Li.prototype.inlined_insert=function(e,t){var i;null==cn.zpp_pool?i=new cn:(i=cn.zpp_pool,cn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Li.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Li.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Li.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Li.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Li.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=cn.zpp_pool,cn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Li.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Li.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=cn.zpp_pool,cn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Li.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=cn.zpp_pool,cn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Li.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=cn.zpp_pool,cn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Li.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=cn.zpp_pool,cn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Li.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Li.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Li.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=cn.zpp_pool,cn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Li.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Li.prototype.empty=function(){return null==this.head},Li.prototype.size=function(){return this.length},Li.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Li.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Li.prototype.front=function(){return this.head.elt},Li.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Li.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Li.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Li.prototype.__class__=Li;var Di=zpp_nape.util.ZNPList_ConvexResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Di.__name__=["zpp_nape","util","ZNPList_ConvexResult"],Di.prototype.head=null,Di.prototype.begin=function(){return this.head},Di.prototype.modified=null,Di.prototype.pushmod=null,Di.prototype.length=null,Di.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Di.prototype.add=function(e){var t;null==dn.zpp_pool?t=new dn:(t=dn.zpp_pool,dn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Di.prototype.inlined_add=function(e){var t;null==dn.zpp_pool?t=new dn:(t=dn.zpp_pool,dn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Di.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Di.prototype.insert=function(e,t){var i;null==dn.zpp_pool?i=new dn:(i=dn.zpp_pool,dn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Di.prototype.inlined_insert=function(e,t){var i;null==dn.zpp_pool?i=new dn:(i=dn.zpp_pool,dn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Di.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Di.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Di.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Di.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Di.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=dn.zpp_pool,dn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Di.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Di.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=dn.zpp_pool,dn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Di.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=dn.zpp_pool,dn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Di.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=dn.zpp_pool,dn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Di.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=dn.zpp_pool,dn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Di.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Di.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Di.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=dn.zpp_pool,dn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Di.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Di.prototype.empty=function(){return null==this.head},Di.prototype.size=function(){return this.length},Di.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Di.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Di.prototype.front=function(){return this.head.elt},Di.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Di.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Di.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Di.prototype.__class__=Di;var Ri=zpp_nape.util.ZNPList_ZPP_GeomPoly=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Ri.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"],Ri.prototype.head=null,Ri.prototype.begin=function(){return this.head},Ri.prototype.modified=null,Ri.prototype.pushmod=null,Ri.prototype.length=null,Ri.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Ri.prototype.add=function(e){var t;null==_n.zpp_pool?t=new _n:(t=_n.zpp_pool,_n.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ri.prototype.inlined_add=function(e){var t;null==_n.zpp_pool?t=new _n:(t=_n.zpp_pool,_n.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Ri.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Ri.prototype.insert=function(e,t){var i;null==_n.zpp_pool?i=new _n:(i=_n.zpp_pool,_n.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ri.prototype.inlined_insert=function(e,t){var i;null==_n.zpp_pool?i=new _n:(i=_n.zpp_pool,_n.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Ri.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ri.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Ri.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ri.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Ri.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=_n.zpp_pool,_n.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ri.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Ri.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=_n.zpp_pool,_n.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Ri.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=_n.zpp_pool,_n.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Ri.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=_n.zpp_pool,_n.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ri.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=_n.zpp_pool,_n.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Ri.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Ri.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ri.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=_n.zpp_pool,_n.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Ri.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Ri.prototype.empty=function(){return null==this.head},Ri.prototype.size=function(){return this.length},Ri.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ri.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Ri.prototype.front=function(){return this.head.elt},Ri.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Ri.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Ri.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Ri.prototype.__class__=Ri;var Fi=zpp_nape.util.ZNPList_RayResult=function(){this.length=0,this.pushmod=!1,this.modified=!1,this.head=null};Fi.__name__=["zpp_nape","util","ZNPList_RayResult"],Fi.prototype.head=null,Fi.prototype.begin=function(){return this.head},Fi.prototype.modified=null,Fi.prototype.pushmod=null,Fi.prototype.length=null,Fi.prototype.setbegin=function(e){this.head=e,this.modified=!0,this.pushmod=!0},Fi.prototype.add=function(e){var t;null==yn.zpp_pool?t=new yn:(t=yn.zpp_pool,yn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fi.prototype.inlined_add=function(e){var t;null==yn.zpp_pool?t=new yn:(t=yn.zpp_pool,yn.zpp_pool=t.next,t.next=null),t.elt=e;var i=t;return i.next=this.head,this.head=i,this.modified=!0,this.length++,e},Fi.prototype.addAll=function(e){for(var t=e.head;null!=t;)this.add(t.elt),t=t.next},Fi.prototype.insert=function(e,t){var i;null==yn.zpp_pool?i=new yn:(i=yn.zpp_pool,yn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fi.prototype.inlined_insert=function(e,t){var i;null==yn.zpp_pool?i=new yn:(i=yn.zpp_pool,yn.zpp_pool=i.next,i.next=null),i.elt=t;var n=i;return null==e?(n.next=this.head,this.head=n):(n.next=e.next,e.next=n),this.pushmod=this.modified=!0,this.length++,n},Fi.prototype.pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fi.prototype.inlined_pop=function(){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--},Fi.prototype.pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fi.prototype.inlined_pop_unsafe=function(){var e=this.head.elt;return this.pop(),e},Fi.prototype.remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=yn.zpp_pool,yn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fi.prototype.try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){this.erase(t),n=!0;break}i=(t=i).next}return n},Fi.prototype.inlined_remove=function(e){for(var t=null,i=this.head;null!=i;){if(i.elt==e){var n,r;null==t?(r=(n=this.head).next,this.head=r,null==this.head&&(this.pushmod=!0)):(r=(n=t.next).next,null==(t.next=r)&&(this.pushmod=!0));var o=n;o.elt=null,o.next=yn.zpp_pool,yn.zpp_pool=o,this.modified=!0,this.length--,this.pushmod=!0;break}i=(t=i).next}},Fi.prototype.inlined_try_remove=function(e){for(var t=null,i=this.head,n=!1;null!=i;){if(i.elt==e){var r,o;null==t?(o=(r=this.head).next,this.head=o,null==this.head&&(this.pushmod=!0)):(o=(r=t.next).next,null==(t.next=o)&&(this.pushmod=!0));var a=r;a.elt=null,a.next=yn.zpp_pool,yn.zpp_pool=a,this.modified=!0,this.length--,n=this.pushmod=!0;break}i=(t=i).next}return n},Fi.prototype.erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=yn.zpp_pool,yn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fi.prototype.inlined_erase=function(e){var t,i;null==e?(i=(t=this.head).next,this.head=i,null==this.head&&(this.pushmod=!0)):(i=(t=e.next).next,null==(e.next=i)&&(this.pushmod=!0));var n=t;return n.elt=null,n.next=yn.zpp_pool,yn.zpp_pool=n,this.modified=!0,this.length--,this.pushmod=!0,i},Fi.prototype.splice=function(e,t){for(;0<t--&&null!=e.next;)this.erase(e);return e.next},Fi.prototype.clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fi.prototype.inlined_clear=function(){for(;null!=this.head;){var e=this.head;this.head=e.next,e.elt=null,e.next=yn.zpp_pool,yn.zpp_pool=e,null==this.head&&(this.pushmod=!0),this.modified=!0,this.length--}this.pushmod=!0},Fi.prototype.reverse=function(){for(var e=this.head,t=null;null!=e;){var i=e.next;e.next=t,t=this.head=e,e=i}this.modified=!0,this.pushmod=!0},Fi.prototype.empty=function(){return null==this.head},Fi.prototype.size=function(){return this.length},Fi.prototype.has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fi.prototype.inlined_has=function(e){var t;t=!1;for(var i=this.head;null!=i;){if(i.elt==e){t=!0;break}i=i.next}return t},Fi.prototype.front=function(){return this.head.elt},Fi.prototype.back=function(){for(var e=this.head,t=e;null!=t;)t=(e=t).next;return e.elt},Fi.prototype.iterator_at=function(e){for(var t=this.head;0<e--&&null!=t;)t=t.next;return t},Fi.prototype.at=function(e){var t=this.iterator_at(e);return null!=t?t.elt:null},Fi.prototype.__class__=Fi;var ji=zpp_nape.util.ZNPNode_ZPP_CbType=function(){this.elt=null,this.next=null};ji.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"],ji.prototype.next=null,ji.prototype.alloc=function(){},ji.prototype.free=function(){this.elt=null},ji.prototype.elt=null,ji.prototype.elem=function(){return this.elt},ji.prototype.__class__=ji;var Ni=zpp_nape.util.ZNPNode_ZPP_CallbackSet=function(){this.elt=null,this.next=null};Ni.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"],Ni.prototype.next=null,Ni.prototype.alloc=function(){},Ni.prototype.free=function(){this.elt=null},Ni.prototype.elt=null,Ni.prototype.elem=function(){return this.elt},Ni.prototype.__class__=Ni;var Ui=zpp_nape.util.ZNPNode_ZPP_Shape=function(){this.elt=null,this.next=null};Ui.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"],Ui.prototype.next=null,Ui.prototype.alloc=function(){},Ui.prototype.free=function(){this.elt=null},Ui.prototype.elt=null,Ui.prototype.elem=function(){return this.elt},Ui.prototype.__class__=Ui;var Vi=zpp_nape.util.ZNPNode_ZPP_Body=function(){this.elt=null,this.next=null};Vi.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"],Vi.prototype.next=null,Vi.prototype.alloc=function(){},Vi.prototype.free=function(){this.elt=null},Vi.prototype.elt=null,Vi.prototype.elem=function(){return this.elt},Vi.prototype.__class__=Vi;var Hi=zpp_nape.util.ZNPNode_ZPP_Constraint=function(){this.elt=null,this.next=null};Hi.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"],Hi.prototype.next=null,Hi.prototype.alloc=function(){},Hi.prototype.free=function(){this.elt=null},Hi.prototype.elt=null,Hi.prototype.elem=function(){return this.elt},Hi.prototype.__class__=Hi;var Wi=zpp_nape.util.ZNPNode_ZPP_Compound=function(){this.elt=null,this.next=null};Wi.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"],Wi.prototype.next=null,Wi.prototype.alloc=function(){},Wi.prototype.free=function(){this.elt=null},Wi.prototype.elt=null,Wi.prototype.elem=function(){return this.elt},Wi.prototype.__class__=Wi;var Ko=zpp_nape.util.ZNPNode_ZPP_Arbiter=function(){this.elt=null,this.next=null};Ko.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"],Ko.prototype.next=null,Ko.prototype.alloc=function(){},Ko.prototype.free=function(){this.elt=null},Ko.prototype.elt=null,Ko.prototype.elem=function(){return this.elt},Ko.prototype.__class__=Ko;var Zo=zpp_nape.util.ZNPNode_ZPP_InteractionListener=function(){this.elt=null,this.next=null};Zo.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"],Zo.prototype.next=null,Zo.prototype.alloc=function(){},Zo.prototype.free=function(){this.elt=null},Zo.prototype.elt=null,Zo.prototype.elem=function(){return this.elt},Zo.prototype.__class__=Zo;var Xi=zpp_nape.util.ZNPNode_ZPP_CbSet=function(){this.elt=null,this.next=null};Xi.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"],Xi.prototype.next=null,Xi.prototype.alloc=function(){},Xi.prototype.free=function(){this.elt=null},Xi.prototype.elt=null,Xi.prototype.elem=function(){return this.elt},Xi.prototype.__class__=Xi;var Jo=zpp_nape.util.ZNPNode_ZPP_Interactor=function(){this.elt=null,this.next=null};Jo.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"],Jo.prototype.next=null,Jo.prototype.alloc=function(){},Jo.prototype.free=function(){this.elt=null},Jo.prototype.elt=null,Jo.prototype.elem=function(){return this.elt},Jo.prototype.__class__=Jo;var qi=zpp_nape.util.ZNPNode_ZPP_BodyListener=function(){this.elt=null,this.next=null};qi.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"],qi.prototype.next=null,qi.prototype.alloc=function(){},qi.prototype.free=function(){this.elt=null},qi.prototype.elt=null,qi.prototype.elem=function(){return this.elt},qi.prototype.__class__=qi;var Yi=zpp_nape.util.ZNPNode_ZPP_CbSetPair=function(){this.elt=null,this.next=null};Yi.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"],Yi.prototype.next=null,Yi.prototype.alloc=function(){},Yi.prototype.free=function(){this.elt=null},Yi.prototype.elt=null,Yi.prototype.elem=function(){return this.elt},Yi.prototype.__class__=Yi;var Ki=zpp_nape.util.ZNPNode_ZPP_ConstraintListener=function(){this.elt=null,this.next=null};Ki.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"],Ki.prototype.next=null,Ki.prototype.alloc=function(){},Ki.prototype.free=function(){this.elt=null},Ki.prototype.elt=null,Ki.prototype.elem=function(){return this.elt},Ki.prototype.__class__=Ki;var Zi=zpp_nape.util.ZNPNode_ZPP_CutInt=function(){this.elt=null,this.next=null};Zi.__name__=["zpp_nape","util","ZNPNode_ZPP_CutInt"],Zi.prototype.next=null,Zi.prototype.alloc=function(){},Zi.prototype.free=function(){this.elt=null},Zi.prototype.elt=null,Zi.prototype.elem=function(){return this.elt},Zi.prototype.__class__=Zi;var Ji=zpp_nape.util.ZNPNode_ZPP_CutVert=function(){this.elt=null,this.next=null};Ji.__name__=["zpp_nape","util","ZNPNode_ZPP_CutVert"],Ji.prototype.next=null,Ji.prototype.alloc=function(){},Ji.prototype.free=function(){this.elt=null},Ji.prototype.elt=null,Ji.prototype.elem=function(){return this.elt},Ji.prototype.__class__=Ji;var Qi=zpp_nape.util.ZNPNode_ZPP_PartitionVertex=function(){this.elt=null,this.next=null};Qi.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionVertex"],Qi.prototype.next=null,Qi.prototype.alloc=function(){},Qi.prototype.free=function(){this.elt=null},Qi.prototype.elt=null,Qi.prototype.elem=function(){return this.elt},Qi.prototype.__class__=Qi;var $i=zpp_nape.util.ZNPNode_ZPP_SimplifyP=function(){this.elt=null,this.next=null};$i.__name__=["zpp_nape","util","ZNPNode_ZPP_SimplifyP"],$i.prototype.next=null,$i.prototype.alloc=function(){},$i.prototype.free=function(){this.elt=null},$i.prototype.elt=null,$i.prototype.elem=function(){return this.elt},$i.prototype.__class__=$i;var en=zpp_nape.util.ZNPNode_ZPP_PartitionedPoly=function(){this.elt=null,this.next=null};en.__name__=["zpp_nape","util","ZNPNode_ZPP_PartitionedPoly"],en.prototype.next=null,en.prototype.alloc=function(){},en.prototype.free=function(){this.elt=null},en.prototype.elt=null,en.prototype.elem=function(){return this.elt},en.prototype.__class__=en;var tn=zpp_nape.util.ZNPNode_ZPP_GeomVert=function(){this.elt=null,this.next=null};tn.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomVert"],tn.prototype.next=null,tn.prototype.alloc=function(){},tn.prototype.free=function(){this.elt=null},tn.prototype.elt=null,tn.prototype.elem=function(){return this.elt},tn.prototype.__class__=tn;var nn=zpp_nape.util.ZNPNode_ZPP_SimpleVert=function(){this.elt=null,this.next=null};nn.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleVert"],nn.prototype.next=null,nn.prototype.alloc=function(){},nn.prototype.free=function(){this.elt=null},nn.prototype.elt=null,nn.prototype.elem=function(){return this.elt},nn.prototype.__class__=nn;var rn=zpp_nape.util.ZNPNode_ZPP_SimpleEvent=function(){this.elt=null,this.next=null};rn.__name__=["zpp_nape","util","ZNPNode_ZPP_SimpleEvent"],rn.prototype.next=null,rn.prototype.alloc=function(){},rn.prototype.free=function(){this.elt=null},rn.prototype.elt=null,rn.prototype.elem=function(){return this.elt},rn.prototype.__class__=rn;var on=zpp_nape.util.ZNPNode_ZPP_Vec2=function(){this.elt=null,this.next=null};on.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"],on.prototype.next=null,on.prototype.alloc=function(){},on.prototype.free=function(){this.elt=null},on.prototype.elt=null,on.prototype.elem=function(){return this.elt},on.prototype.__class__=on;var rr=zpp_nape.util.ZNPNode_ZPP_AABBPair=function(){this.elt=null,this.next=null};rr.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"],rr.prototype.next=null,rr.prototype.alloc=function(){},rr.prototype.free=function(){this.elt=null},rr.prototype.elt=null,rr.prototype.elem=function(){return this.elt},rr.prototype.__class__=rr;var an=zpp_nape.util.ZNPNode_ZPP_Edge=function(){this.elt=null,this.next=null};an.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"],an.prototype.next=null,an.prototype.alloc=function(){},an.prototype.free=function(){this.elt=null},an.prototype.elt=null,an.prototype.elem=function(){return this.elt},an.prototype.__class__=an;var sn=zpp_nape.util.ZNPNode_ZPP_AABBNode=function(){this.elt=null,this.next=null};sn.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"],sn.prototype.next=null,sn.prototype.alloc=function(){},sn.prototype.free=function(){this.elt=null},sn.prototype.elt=null,sn.prototype.elem=function(){return this.elt},sn.prototype.__class__=sn;var ln=zpp_nape.util.ZNPNode_ZPP_Component=function(){this.elt=null,this.next=null};ln.__name__=["zpp_nape","util","ZNPNode_ZPP_Component"],ln.prototype.next=null,ln.prototype.alloc=function(){},ln.prototype.free=function(){this.elt=null},ln.prototype.elt=null,ln.prototype.elem=function(){return this.elt},ln.prototype.__class__=ln;var Qo=zpp_nape.util.ZNPNode_ZPP_FluidArbiter=function(){this.elt=null,this.next=null};Qo.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"],Qo.prototype.next=null,Qo.prototype.alloc=function(){},Qo.prototype.free=function(){this.elt=null},Qo.prototype.elt=null,Qo.prototype.elem=function(){return this.elt},Qo.prototype.__class__=Qo;var $o=zpp_nape.util.ZNPNode_ZPP_SensorArbiter=function(){this.elt=null,this.next=null};$o.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"],$o.prototype.next=null,$o.prototype.alloc=function(){},$o.prototype.free=function(){this.elt=null},$o.prototype.elt=null,$o.prototype.elem=function(){return this.elt},$o.prototype.__class__=$o;var hn=zpp_nape.util.ZNPNode_ZPP_Listener=function(){this.elt=null,this.next=null};hn.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"],hn.prototype.next=null,hn.prototype.alloc=function(){},hn.prototype.free=function(){this.elt=null},hn.prototype.elt=null,hn.prototype.elem=function(){return this.elt},hn.prototype.__class__=hn;var ea=zpp_nape.util.ZNPNode_ZPP_ColArbiter=function(){this.elt=null,this.next=null};ea.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"],ea.prototype.next=null,ea.prototype.alloc=function(){},ea.prototype.free=function(){this.elt=null},ea.prototype.elt=null,ea.prototype.elem=function(){return this.elt},ea.prototype.__class__=ea;var un=zpp_nape.util.ZNPNode_ZPP_InteractionGroup=function(){this.elt=null,this.next=null};un.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"],un.prototype.next=null,un.prototype.alloc=function(){},un.prototype.free=function(){this.elt=null},un.prototype.elt=null,un.prototype.elem=function(){return this.elt},un.prototype.__class__=un;var cn=zpp_nape.util.ZNPNode_ZPP_ToiEvent=function(){this.elt=null,this.next=null};cn.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"],cn.prototype.next=null,cn.prototype.alloc=function(){},cn.prototype.free=function(){this.elt=null},cn.prototype.elt=null,cn.prototype.elem=function(){return this.elt},cn.prototype.__class__=cn;var dn=zpp_nape.util.ZNPNode_ConvexResult=function(){this.elt=null,this.next=null};dn.__name__=["zpp_nape","util","ZNPNode_ConvexResult"],dn.prototype.next=null,dn.prototype.alloc=function(){},dn.prototype.free=function(){this.elt=null},dn.prototype.elt=null,dn.prototype.elem=function(){return this.elt},dn.prototype.__class__=dn;var _n=zpp_nape.util.ZNPNode_ZPP_GeomPoly=function(){this.elt=null,this.next=null};_n.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"],_n.prototype.next=null,_n.prototype.alloc=function(){},_n.prototype.free=function(){this.elt=null},_n.prototype.elt=null,_n.prototype.elem=function(){return this.elt},_n.prototype.__class__=_n;var yn=zpp_nape.util.ZNPNode_RayResult=function(){this.elt=null,this.next=null};yn.__name__=["zpp_nape","util","ZNPNode_RayResult"],yn.prototype.next=null,yn.prototype.alloc=function(){},yn.prototype.free=function(){this.elt=null},yn.prototype.elt=null,yn.prototype.elem=function(){return this.elt},yn.prototype.__class__=yn;var mn=zpp_nape.util.ZPP_MixVec2List=function(){this.at_index=0,this.at_ite=null,this.zip_length=!1,this._length=0,this.inner=null,ge.call(this),this.at_ite=null,this.at_index=0,this.zip_length=!0,this._length=0};mn.__name__=["zpp_nape","util","ZPP_MixVec2List"],mn.__super__=ge,mn.prototype=Object.create(ge.prototype),mn.get=function(e,t){null==t&&(t=!1);var i=new mn;return i.inner=e,i.zpp_inner.immutable=t,i},mn.prototype.inner=null,mn.prototype._length=null,mn.prototype.zip_length=null,mn.prototype.at_ite=null,mn.prototype.at_index=null,mn.prototype.zpp_gl=function(){if(this.zpp_vm(),this.zip_length){this._length=0;for(var e=this.inner.next;null!=e;)this._length++,e=e.next;this.zip_length=!1}return this._length},mn.prototype.zpp_vm=function(){this.zpp_inner.validate(),this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},mn.prototype.at=function(e){for(this.zpp_vm(),this.zpp_inner.reverse_flag&&(e=this.zpp_gl()-1-e),(e<this.at_index||null==this.at_ite)&&(this.at_index=0,this.at_ite=this.inner.next);this.at_index!=e;)this.at_index++,this.at_ite=this.at_ite.next;var t=this.at_ite;if(null==t.outer){t.outer=new ht;var i=t.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i,t.outer.zpp_inner=t}return t.outer},mn.prototype.push=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.inner.add(e.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},mn.prototype.unshift=function(e){this.zpp_inner.modify_test(),this.zpp_vm();var t=null==this.zpp_inner.adder||this.zpp_inner.adder(e);return t&&(this.zpp_inner.reverse_flag?this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),e.zpp_inner):this.inner.add(e.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(e)),t},mn.prototype.pop=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){if(null==(e=this.inner.next).outer){e.outer=new ht;var t=e.outer.zpp_inner;null!=t.outer&&(t.outer.zpp_inner=null,t.outer=null),t._isimmutable=null,t._validate=null,t._invalidate=null,t.next=el.zpp_pool,el.zpp_pool=t,e.outer.zpp_inner=e}var i=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(i),this.zpp_inner.dontremove||this.inner.pop()}else{null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var n=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==n?this.inner.next:n.next).outer){e.outer=new ht;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.inner.erase(n)}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new ht;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},mn.prototype.shift=function(){this.zpp_inner.modify_test(),this.zpp_vm();var e=null;if(this.zpp_inner.reverse_flag){null!=this.at_ite&&null==this.at_ite.next&&(this.at_ite=null);var t=1==this.zpp_gl()?null:this.inner.iterator_at(this.zpp_gl()-2);if(null==(e=null==t?this.inner.next:t.next).outer){e.outer=new ht;var i=e.outer.zpp_inner;null!=i.outer&&(i.outer.zpp_inner=null,i.outer=null),i._isimmutable=null,i._validate=null,i._invalidate=null,i.next=el.zpp_pool,el.zpp_pool=i,e.outer.zpp_inner=e}var n=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(n),this.zpp_inner.dontremove||this.inner.erase(t)}else{if(null==(e=this.inner.next).outer){e.outer=new ht;var r=e.outer.zpp_inner;null!=r.outer&&(r.outer.zpp_inner=null,r.outer=null),r._isimmutable=null,r._validate=null,r._invalidate=null,r.next=el.zpp_pool,el.zpp_pool=r,e.outer.zpp_inner=e}var o=e.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(o),this.zpp_inner.dontremove||this.inner.pop()}if(this.zpp_inner.invalidate(),null==e.outer){e.outer=new ht;var a=e.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null),a._isimmutable=null,a._validate=null,a._invalidate=null,a.next=el.zpp_pool,el.zpp_pool=a,e.outer.zpp_inner=e}return e.outer},mn.prototype.remove=function(e){var t;this.zpp_inner.modify_test(),this.zpp_vm(),t=!1;for(var i=this.inner.next;null!=i;){if(e.zpp_inner==i){t=!0;break}i=i.next}return t&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(e),this.zpp_inner.dontremove||this.inner.remove(e.zpp_inner),this.zpp_inner.invalidate()),t},mn.prototype.clear=function(){if(this.zpp_inner.reverse_flag)for(;!this.empty();)this.pop();else for(;!this.empty();)this.shift()},mn.prototype.__class__=mn;var fn=zpp_nape.util.ZPP_ConstraintList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ee,this._invalidated=!0};fn.__name__=["zpp_nape","util","ZPP_ConstraintList"],fn.get=function(e,t){null==t&&(t=!1);var i=new b;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},fn.prototype.outer=null,fn.prototype.inner=null,fn.prototype.immutable=null,fn.prototype._invalidated=null,fn.prototype._invalidate=null,fn.prototype._validate=null,fn.prototype._modifiable=null,fn.prototype.adder=null,fn.prototype.post_adder=null,fn.prototype.subber=null,fn.prototype.dontremove=null,fn.prototype.reverse_flag=null,fn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},fn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},fn.prototype.modify_test=function(){},fn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},fn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},fn.prototype.at_index=null,fn.prototype.at_ite=null,fn.prototype.push_ite=null,fn.prototype.zip_length=null,fn.prototype.user_length=null,fn.prototype.__class__=fn;var xn=zpp_nape.util.ZPP_BodyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new fi,this._invalidated=!0};xn.__name__=["zpp_nape","util","ZPP_BodyList"],xn.get=function(e,t){null==t&&(t=!1);var i=new ee;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},xn.prototype.outer=null,xn.prototype.inner=null,xn.prototype.immutable=null,xn.prototype._invalidated=null,xn.prototype._invalidate=null,xn.prototype._validate=null,xn.prototype._modifiable=null,xn.prototype.adder=null,xn.prototype.post_adder=null,xn.prototype.subber=null,xn.prototype.dontremove=null,xn.prototype.reverse_flag=null,xn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},xn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},xn.prototype.modify_test=function(){},xn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},xn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},xn.prototype.at_index=null,xn.prototype.at_ite=null,xn.prototype.push_ite=null,xn.prototype.zip_length=null,xn.prototype.user_length=null,xn.prototype.__class__=xn;var vn=zpp_nape.util.ZPP_InteractorList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ge,this._invalidated=!0};vn.__name__=["zpp_nape","util","ZPP_InteractorList"],vn.get=function(e,t){null==t&&(t=!1);var i=new he;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},vn.prototype.outer=null,vn.prototype.inner=null,vn.prototype.immutable=null,vn.prototype._invalidated=null,vn.prototype._invalidate=null,vn.prototype._validate=null,vn.prototype._modifiable=null,vn.prototype.adder=null,vn.prototype.post_adder=null,vn.prototype.subber=null,vn.prototype.dontremove=null,vn.prototype.reverse_flag=null,vn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},vn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},vn.prototype.modify_test=function(){},vn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},vn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},vn.prototype.at_index=null,vn.prototype.at_ite=null,vn.prototype.push_ite=null,vn.prototype.zip_length=null,vn.prototype.user_length=null,vn.prototype.__class__=vn;var zn=zpp_nape.util.ZPP_CompoundList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new xi,this._invalidated=!0};zn.__name__=["zpp_nape","util","ZPP_CompoundList"],zn.get=function(e,t){null==t&&(t=!1);var i=new ae;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},zn.prototype.outer=null,zn.prototype.inner=null,zn.prototype.immutable=null,zn.prototype._invalidated=null,zn.prototype._invalidate=null,zn.prototype._validate=null,zn.prototype._modifiable=null,zn.prototype.adder=null,zn.prototype.post_adder=null,zn.prototype.subber=null,zn.prototype.dontremove=null,zn.prototype.reverse_flag=null,zn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},zn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},zn.prototype.modify_test=function(){},zn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},zn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},zn.prototype.at_index=null,zn.prototype.at_ite=null,zn.prototype.push_ite=null,zn.prototype.zip_length=null,zn.prototype.user_length=null,zn.prototype.__class__=zn;var gn=zpp_nape.util.ZPP_ListenerList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Gi,this._invalidated=!0};gn.__name__=["zpp_nape","util","ZPP_ListenerList"],gn.get=function(e,t){null==t&&(t=!1);var i=new h;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},gn.prototype.outer=null,gn.prototype.inner=null,gn.prototype.immutable=null,gn.prototype._invalidated=null,gn.prototype._invalidate=null,gn.prototype._validate=null,gn.prototype._modifiable=null,gn.prototype.adder=null,gn.prototype.post_adder=null,gn.prototype.subber=null,gn.prototype.dontremove=null,gn.prototype.reverse_flag=null,gn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},gn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},gn.prototype.modify_test=function(){},gn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},gn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},gn.prototype.at_index=null,gn.prototype.at_ite=null,gn.prototype.push_ite=null,gn.prototype.zip_length=null,gn.prototype.user_length=null,gn.prototype.__class__=gn;var Tn=zpp_nape.util.ZPP_CbTypeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Fe,this._invalidated=!0};Tn.__name__=["zpp_nape","util","ZPP_CbTypeList"],Tn.get=function(e,t){null==t&&(t=!1);var i=new m;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Tn.prototype.outer=null,Tn.prototype.inner=null,Tn.prototype.immutable=null,Tn.prototype._invalidated=null,Tn.prototype._invalidate=null,Tn.prototype._validate=null,Tn.prototype._modifiable=null,Tn.prototype.adder=null,Tn.prototype.post_adder=null,Tn.prototype.subber=null,Tn.prototype.dontremove=null,Tn.prototype.reverse_flag=null,Tn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Tn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Tn.prototype.modify_test=function(){},Tn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Tn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Tn.prototype.at_index=null,Tn.prototype.at_ite=null,Tn.prototype.push_ite=null,Tn.prototype.zip_length=null,Tn.prototype.user_length=null,Tn.prototype.__class__=Tn;var On=zpp_nape.util.ZPP_Vec2List=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new zt,this._invalidated=!0};On.__name__=["zpp_nape","util","ZPP_Vec2List"],On.get=function(e,t){null==t&&(t=!1);var i=new ge;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},On.prototype.outer=null,On.prototype.inner=null,On.prototype.immutable=null,On.prototype._invalidated=null,On.prototype._invalidate=null,On.prototype._validate=null,On.prototype._modifiable=null,On.prototype.adder=null,On.prototype.post_adder=null,On.prototype.subber=null,On.prototype.dontremove=null,On.prototype.reverse_flag=null,On.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},On.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},On.prototype.modify_test=function(){},On.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},On.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},On.prototype.at_index=null,On.prototype.at_ite=null,On.prototype.push_ite=null,On.prototype.zip_length=null,On.prototype.user_length=null,On.prototype.__class__=On;var An=zpp_nape.util.ZPP_GeomPolyList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Ri,this._invalidated=!0};An.__name__=["zpp_nape","util","ZPP_GeomPolyList"],An.get=function(e,t){null==t&&(t=!1);var i=new wn;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},An.prototype.outer=null,An.prototype.inner=null,An.prototype.immutable=null,An.prototype._invalidated=null,An.prototype._invalidate=null,An.prototype._validate=null,An.prototype._modifiable=null,An.prototype.adder=null,An.prototype.post_adder=null,An.prototype.subber=null,An.prototype.dontremove=null,An.prototype.reverse_flag=null,An.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},An.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},An.prototype.modify_test=function(){},An.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},An.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},An.prototype.at_index=null,An.prototype.at_ite=null,An.prototype.push_ite=null,An.prototype.zip_length=null,An.prototype.user_length=null,An.prototype.__class__=An;var En=zpp_nape.util.ZPP_RayResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Fi,this._invalidated=!0};En.__name__=["zpp_nape","util","ZPP_RayResultList"],En.get=function(e,t){null==t&&(t=!1);var i=new K;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},En.prototype.outer=null,En.prototype.inner=null,En.prototype.immutable=null,En.prototype._invalidated=null,En.prototype._invalidate=null,En.prototype._validate=null,En.prototype._modifiable=null,En.prototype.adder=null,En.prototype.post_adder=null,En.prototype.subber=null,En.prototype.dontremove=null,En.prototype.reverse_flag=null,En.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},En.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},En.prototype.modify_test=function(){},En.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},En.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},En.prototype.at_index=null,En.prototype.at_ite=null,En.prototype.push_ite=null,En.prototype.zip_length=null,En.prototype.user_length=null,En.prototype.__class__=En;var Gn=zpp_nape.util.ZPP_ConvexResultList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Di,this._invalidated=!0};Gn.__name__=["zpp_nape","util","ZPP_ConvexResultList"],Gn.get=function(e,t){null==t&&(t=!1);var i=new pt;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Gn.prototype.outer=null,Gn.prototype.inner=null,Gn.prototype.immutable=null,Gn.prototype._invalidated=null,Gn.prototype._invalidate=null,Gn.prototype._validate=null,Gn.prototype._modifiable=null,Gn.prototype.adder=null,Gn.prototype.post_adder=null,Gn.prototype.subber=null,Gn.prototype.dontremove=null,Gn.prototype.reverse_flag=null,Gn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Gn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Gn.prototype.modify_test=function(){},Gn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Gn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Gn.prototype.at_index=null,Gn.prototype.at_ite=null,Gn.prototype.push_ite=null,Gn.prototype.zip_length=null,Gn.prototype.user_length=null,Gn.prototype.__class__=Gn;var In=zpp_nape.util.ZPP_EdgeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new ki,this._invalidated=!0};In.__name__=["zpp_nape","util","ZPP_EdgeList"],In.get=function(e,t){null==t&&(t=!1);var i=new ye;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},In.prototype.outer=null,In.prototype.inner=null,In.prototype.immutable=null,In.prototype._invalidated=null,In.prototype._invalidate=null,In.prototype._validate=null,In.prototype._modifiable=null,In.prototype.adder=null,In.prototype.post_adder=null,In.prototype.subber=null,In.prototype.dontremove=null,In.prototype.reverse_flag=null,In.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},In.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},In.prototype.modify_test=function(){},In.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},In.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},In.prototype.at_index=null,In.prototype.at_ite=null,In.prototype.push_ite=null,In.prototype.zip_length=null,In.prototype.user_length=null,In.prototype.__class__=In;var Bn=zpp_nape.util.ZPP_ShapeList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new mi,this._invalidated=!0};Bn.__name__=["zpp_nape","util","ZPP_ShapeList"],Bn.get=function(e,t){null==t&&(t=!1);var i=new fe;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Bn.prototype.outer=null,Bn.prototype.inner=null,Bn.prototype.immutable=null,Bn.prototype._invalidated=null,Bn.prototype._invalidate=null,Bn.prototype._validate=null,Bn.prototype._modifiable=null,Bn.prototype.adder=null,Bn.prototype.post_adder=null,Bn.prototype.subber=null,Bn.prototype.dontremove=null,Bn.prototype.reverse_flag=null,Bn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Bn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Bn.prototype.modify_test=function(){},Bn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Bn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Bn.prototype.at_index=null,Bn.prototype.at_ite=null,Bn.prototype.push_ite=null,Bn.prototype.zip_length=null,Bn.prototype.user_length=null,Bn.prototype.__class__=Bn;var Ln=zpp_nape.util.ZPP_InteractionGroupList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Bi,this._invalidated=!0};Ln.__name__=["zpp_nape","util","ZPP_InteractionGroupList"],Ln.get=function(e,t){null==t&&(t=!1);var i=new j;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Ln.prototype.outer=null,Ln.prototype.inner=null,Ln.prototype.immutable=null,Ln.prototype._invalidated=null,Ln.prototype._invalidate=null,Ln.prototype._validate=null,Ln.prototype._modifiable=null,Ln.prototype.adder=null,Ln.prototype.post_adder=null,Ln.prototype.subber=null,Ln.prototype.dontremove=null,Ln.prototype.reverse_flag=null,Ln.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Ln.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Ln.prototype.modify_test=function(){},Ln.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Ln.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Ln.prototype.at_index=null,Ln.prototype.at_ite=null,Ln.prototype.push_ite=null,Ln.prototype.zip_length=null,Ln.prototype.user_length=null,Ln.prototype.__class__=Ln;var Dn=zpp_nape.util.ZPP_ArbiterList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new vi,this._invalidated=!0};Dn.__name__=["zpp_nape","util","ZPP_ArbiterList"],Dn.get=function(e,t){null==t&&(t=!1);var i=new E;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Dn.prototype.outer=null,Dn.prototype.inner=null,Dn.prototype.immutable=null,Dn.prototype._invalidated=null,Dn.prototype._invalidate=null,Dn.prototype._validate=null,Dn.prototype._modifiable=null,Dn.prototype.adder=null,Dn.prototype.post_adder=null,Dn.prototype.subber=null,Dn.prototype.dontremove=null,Dn.prototype.reverse_flag=null,Dn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Dn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Dn.prototype.modify_test=function(){},Dn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Dn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Dn.prototype.at_index=null,Dn.prototype.at_ite=null,Dn.prototype.push_ite=null,Dn.prototype.zip_length=null,Dn.prototype.user_length=null,Dn.prototype.__class__=Dn;var Rn=zpp_nape.util.ZPP_ContactList=function(){this.user_length=0,this.zip_length=!1,this.push_ite=null,this.at_ite=null,this.at_index=0,this.reverse_flag=!1,this.dontremove=!1,this.subber=null,this.post_adder=null,this.adder=null,this._modifiable=null,this._validate=null,this._invalidate=null,this._invalidated=!1,this.immutable=!1,this.inner=null,this.outer=null,this.inner=new Xo,this._invalidated=!0};Rn.__name__=["zpp_nape","util","ZPP_ContactList"],Rn.get=function(e,t){null==t&&(t=!1);var i=new L;return i.zpp_inner.inner=e,t&&(i.zpp_inner.immutable=!0),i.zpp_inner.zip_length=!0,i},Rn.prototype.outer=null,Rn.prototype.inner=null,Rn.prototype.immutable=null,Rn.prototype._invalidated=null,Rn.prototype._invalidate=null,Rn.prototype._validate=null,Rn.prototype._modifiable=null,Rn.prototype.adder=null,Rn.prototype.post_adder=null,Rn.prototype.subber=null,Rn.prototype.dontremove=null,Rn.prototype.reverse_flag=null,Rn.prototype.valmod=function(){this.validate(),this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},Rn.prototype.modified=function(){this.zip_length=!0,this.at_ite=null,this.push_ite=null},Rn.prototype.modify_test=function(){},Rn.prototype.validate=function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},Rn.prototype.invalidate=function(){this._invalidated=!0,null!=this._invalidate&&this._invalidate(this)},Rn.prototype.at_index=null,Rn.prototype.at_ite=null,Rn.prototype.push_ite=null,Rn.prototype.zip_length=null,Rn.prototype.user_length=null,Rn.prototype.__class__=Rn;var Fn=zpp_nape.util.ZPP_Math=function(){};Fn.__name__=["zpp_nape","util","ZPP_Math"],Fn.sqrt=function(e){return Math.sqrt(e)},Fn.invsqrt=function(e){return 1/Math.sqrt(e)},Fn.sqr=function(e){return e*e},Fn.clamp2=function(e,t){var i=-t;return e<i?i:t<e?t:e},Fn.clamp=function(e,t,i){return e<t?t:i<e?i:e},Fn.prototype.__class__=Fn;var jn=zpp_nape.util.ZPP_PubPool=function(){};jn.__name__=["zpp_nape","util","ZPP_PubPool"],jn.prototype.__class__=jn;var Nn=zpp_nape.util.ZPP_Set_ZPP_Body=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Nn.__name__=["zpp_nape","util","ZPP_Set_ZPP_Body"],Nn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Nn.prototype.alloc=function(){},Nn.prototype.lt=null,Nn.prototype.swapped=null,Nn.prototype.data=null,Nn.prototype.prev=null,Nn.prototype.next=null,Nn.prototype.parent=null,Nn.prototype.colour=null,Nn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Nn.prototype.empty=function(){return null==this.parent},Nn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Nn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Nn.prototype.has=function(e){return null!=this.find(e)},Nn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Nn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Nn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Nn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Nn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Nn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Nn.prototype.remove=function(e){this.remove_node(this.find(e))},Nn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Nn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Nn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Nn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Nn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Nn.zpp_pool,Nn.zpp_pool=l},Nn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Nn.zpp_pool,Nn.zpp_pool=i,e=t}this.parent=null}},Nn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Nn.zpp_pool,Nn.zpp_pool=n,t=i}this.parent=null}},Nn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Nn.zpp_pool,Nn.zpp_pool=e,i},Nn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Nn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Nn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Nn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Nn.prototype.insert=function(e){var t;if(null==Nn.zpp_pool?t=new Nn:(t=Nn.zpp_pool,Nn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Nn.prototype.__class__=Nn;var Un=zpp_nape.util.ZPP_Set_ZPP_CbSetPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Un.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"],Un.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Un.prototype.alloc=function(){},Un.prototype.lt=null,Un.prototype.swapped=null,Un.prototype.data=null,Un.prototype.prev=null,Un.prototype.next=null,Un.prototype.parent=null,Un.prototype.colour=null,Un.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Un.prototype.empty=function(){return null==this.parent},Un.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Un.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Un.prototype.has=function(e){return null!=this.find(e)},Un.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Un.prototype.has_weak=function(e){return null!=this.find_weak(e)},Un.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Un.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Un.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Un.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Un.prototype.remove=function(e){this.remove_node(this.find(e))},Un.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Un.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Un.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Un.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Un.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Un.zpp_pool,Un.zpp_pool=l},Un.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Un.zpp_pool,Un.zpp_pool=i,e=t}this.parent=null}},Un.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Un.zpp_pool,Un.zpp_pool=n,t=i}this.parent=null}},Un.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Un.zpp_pool,Un.zpp_pool=e,i},Un.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Un.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Un.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Un.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Un.prototype.insert=function(e){var t;if(null==Un.zpp_pool?t=new Un:(t=Un.zpp_pool,Un.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Un.prototype.__class__=Un;var Vn=zpp_nape.util.ZPP_Set_ZPP_PartitionVertex=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Vn.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionVertex"],Vn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Vn.prototype.alloc=function(){},Vn.prototype.lt=null,Vn.prototype.swapped=null,Vn.prototype.data=null,Vn.prototype.prev=null,Vn.prototype.next=null,Vn.prototype.parent=null,Vn.prototype.colour=null,Vn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Vn.prototype.empty=function(){return null==this.parent},Vn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Vn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Vn.prototype.has=function(e){return null!=this.find(e)},Vn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Vn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Vn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Vn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Vn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Vn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Vn.prototype.remove=function(e){this.remove_node(this.find(e))},Vn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Vn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Vn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Vn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Vn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Vn.zpp_pool,Vn.zpp_pool=l},Vn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Vn.zpp_pool,Vn.zpp_pool=i,e=t}this.parent=null}},Vn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Vn.zpp_pool,Vn.zpp_pool=n,t=i}this.parent=null}},Vn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Vn.zpp_pool,Vn.zpp_pool=e,i},Vn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Vn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Vn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Vn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Vn.prototype.insert=function(e){var t;if(null==Vn.zpp_pool?t=new Vn:(t=Vn.zpp_pool,Vn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Vn.prototype.__class__=Vn;var Hn=zpp_nape.util.ZPP_Set_ZPP_PartitionPair=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Hn.__name__=["zpp_nape","util","ZPP_Set_ZPP_PartitionPair"],Hn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Hn.prototype.alloc=function(){},Hn.prototype.lt=null,Hn.prototype.swapped=null,Hn.prototype.data=null,Hn.prototype.prev=null,Hn.prototype.next=null,Hn.prototype.parent=null,Hn.prototype.colour=null,Hn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Hn.prototype.empty=function(){return null==this.parent},Hn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Hn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Hn.prototype.has=function(e){return null!=this.find(e)},Hn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Hn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Hn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Hn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Hn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Hn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Hn.prototype.remove=function(e){this.remove_node(this.find(e))},Hn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Hn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Hn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Hn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Hn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Hn.zpp_pool,Hn.zpp_pool=l},Hn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Hn.zpp_pool,Hn.zpp_pool=i,e=t}this.parent=null}},Hn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Hn.zpp_pool,Hn.zpp_pool=n,t=i}this.parent=null}},Hn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Hn.zpp_pool,Hn.zpp_pool=e,i},Hn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Hn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Hn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Hn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Hn.prototype.insert=function(e){var t;if(null==Hn.zpp_pool?t=new Hn:(t=Hn.zpp_pool,Hn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Hn.prototype.__class__=Hn;var Wn=zpp_nape.util.ZPP_Set_ZPP_SimpleVert=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Wn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleVert"],Wn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Wn.prototype.alloc=function(){},Wn.prototype.lt=null,Wn.prototype.swapped=null,Wn.prototype.data=null,Wn.prototype.prev=null,Wn.prototype.next=null,Wn.prototype.parent=null,Wn.prototype.colour=null,Wn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Wn.prototype.empty=function(){return null==this.parent},Wn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Wn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Wn.prototype.has=function(e){return null!=this.find(e)},Wn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Wn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Wn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Wn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Wn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Wn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Wn.prototype.remove=function(e){this.remove_node(this.find(e))},Wn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Wn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Wn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Wn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Wn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Wn.zpp_pool,Wn.zpp_pool=l},Wn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Wn.zpp_pool,Wn.zpp_pool=i,e=t}this.parent=null}},Wn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Wn.zpp_pool,Wn.zpp_pool=n,t=i}this.parent=null}},Wn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Wn.zpp_pool,Wn.zpp_pool=e,i},Wn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Wn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Wn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Wn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Wn.prototype.insert=function(e){var t;if(null==Wn.zpp_pool?t=new Wn:(t=Wn.zpp_pool,Wn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Wn.prototype.__class__=Wn;var Xn=zpp_nape.util.ZPP_Set_ZPP_SimpleSeg=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Xn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleSeg"],Xn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Xn.prototype.alloc=function(){},Xn.prototype.lt=null,Xn.prototype.swapped=null,Xn.prototype.data=null,Xn.prototype.prev=null,Xn.prototype.next=null,Xn.prototype.parent=null,Xn.prototype.colour=null,Xn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Xn.prototype.empty=function(){return null==this.parent},Xn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Xn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Xn.prototype.has=function(e){return null!=this.find(e)},Xn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Xn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Xn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Xn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Xn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Xn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Xn.prototype.remove=function(e){this.remove_node(this.find(e))},Xn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Xn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Xn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Xn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Xn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Xn.zpp_pool,Xn.zpp_pool=l},Xn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Xn.zpp_pool,Xn.zpp_pool=i,e=t}this.parent=null}},Xn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Xn.zpp_pool,Xn.zpp_pool=n,t=i}this.parent=null}},Xn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Xn.zpp_pool,Xn.zpp_pool=e,i},Xn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Xn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Xn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Xn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Xn.prototype.insert=function(e){var t;if(null==Xn.zpp_pool?t=new Xn:(t=Xn.zpp_pool,Xn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Xn.prototype.__class__=Xn;var qn=zpp_nape.util.ZPP_Set_ZPP_SimpleEvent=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};qn.__name__=["zpp_nape","util","ZPP_Set_ZPP_SimpleEvent"],qn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},qn.prototype.alloc=function(){},qn.prototype.lt=null,qn.prototype.swapped=null,qn.prototype.data=null,qn.prototype.prev=null,qn.prototype.next=null,qn.prototype.parent=null,qn.prototype.colour=null,qn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},qn.prototype.empty=function(){return null==this.parent},qn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},qn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},qn.prototype.has=function(e){return null!=this.find(e)},qn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},qn.prototype.has_weak=function(e){return null!=this.find_weak(e)},qn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},qn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},qn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},qn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},qn.prototype.remove=function(e){this.remove_node(this.find(e))},qn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},qn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},qn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},qn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},qn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=qn.zpp_pool,qn.zpp_pool=l},qn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=qn.zpp_pool,qn.zpp_pool=i,e=t}this.parent=null}},qn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=qn.zpp_pool,qn.zpp_pool=n,t=i}this.parent=null}},qn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=qn.zpp_pool,qn.zpp_pool=e,i},qn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},qn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},qn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},qn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},qn.prototype.insert=function(e){var t;if(null==qn.zpp_pool?t=new qn:(t=qn.zpp_pool,qn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},qn.prototype.__class__=qn;var Yn=zpp_nape.util.ZPP_Set_ZPP_CbSet=function(){this.colour=0,this.parent=null,this.next=null,this.prev=null,this.data=null,this.swapped=null,this.lt=null};Yn.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"],Yn.prototype.free=function(){this.data=null,this.lt=null,this.swapped=null},Yn.prototype.alloc=function(){},Yn.prototype.lt=null,Yn.prototype.swapped=null,Yn.prototype.data=null,Yn.prototype.prev=null,Yn.prototype.next=null,Yn.prototype.parent=null,Yn.prototype.colour=null,Yn.prototype.verify=function(){if(!this.empty()){for(var e=this.parent;null!=e.prev;)e=e.prev;for(;null!=e;){var t=e.data,i=!0;if(!this.empty()){for(var n=this.parent;null!=n.prev;)n=n.prev;for(;null!=n;){var r=n.data;if(i){if(t==r)i=!1;else if(!this.lt(r,t)&&this.lt(t,r))return!1}else if(!this.lt(t,r)&&this.lt(r,t))return!1;if(null!=n.next)for(n=n.next;null!=n.prev;)n=n.prev;else{for(;null!=n.parent&&n==n.parent.next;)n=n.parent;n=n.parent}}}if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{for(;null!=e.parent&&e==e.parent.next;)e=e.parent;e=e.parent}}}return!0},Yn.prototype.empty=function(){return null==this.parent},Yn.prototype.singular=function(){return null!=this.parent&&null==this.parent.prev&&null==this.parent.next},Yn.prototype.size=function(){var e=0;if(!this.empty()){for(var t=this.parent;null!=t.prev;)t=t.prev;for(;null!=t;)if(++e,null!=t.next)for(t=t.next;null!=t.prev;)t=t.prev;else{for(;null!=t.parent&&t==t.parent.next;)t=t.parent;t=t.parent}}return e},Yn.prototype.has=function(e){return null!=this.find(e)},Yn.prototype.find=function(e){for(var t=this.parent;null!=t&&t.data!=e;)t=this.lt(e,t.data)?t.prev:t.next;return t},Yn.prototype.has_weak=function(e){return null!=this.find_weak(e)},Yn.prototype.find_weak=function(e){for(var t=this.parent;null!=t;)if(this.lt(e,t.data))t=t.prev;else{if(!this.lt(t.data,e))break;t=t.next}return t},Yn.prototype.lower_bound=function(e){var t=null;if(!this.empty()){for(var i=this.parent;null!=i.prev;)i=i.prev;for(;null!=i;){var n=i.data;if(!this.lt(n,e)){t=n;break}if(null!=i.next)for(i=i.next;null!=i.prev;)i=i.prev;else{for(;null!=i.parent&&i==i.parent.next;)i=i.parent;i=i.parent}}}return t},Yn.prototype.first=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;return e.data},Yn.prototype.pop_front=function(){for(var e=this.parent;null!=e.prev;)e=e.prev;var t=e.data;return this.remove_node(e),t},Yn.prototype.remove=function(e){this.remove_node(this.find(e))},Yn.prototype.successor_node=function(e){if(null!=e.next)for(e=e.next;null!=e.prev;)e=e.prev;else{var t=e;for(e=e.parent;null!=e&&e.prev!=t;)e=(t=e).parent}return e},Yn.prototype.predecessor_node=function(e){if(null!=e.prev)for(e=e.prev;null!=e.next;)e=e.next;else{var t=e;for(e=e.parent;null!=e&&e.next!=t;)e=(t=e).parent}return e},Yn.prototype.successor=function(e){var t=this.successor_node(this.find(e));return null==t?null:t.data},Yn.prototype.predecessor=function(e){var t=this.predecessor_node(this.find(e));return null==t?null:t.data},Yn.prototype.remove_node=function(e){if(null!=e.next&&null!=e.prev){for(var t=e.next;null!=t.prev;)t=t.prev;var i=e.data;e.data=t.data,t.data=i,null!=this.swapped&&this.swapped(e.data,t.data),e=t}var n=null==e.prev?e.next:e.prev;if(1==e.colour)if(null!=e.prev||null!=e.next)n.colour=1;else if(null!=e.parent)for(var r=e.parent;;){r.colour++,r.prev.colour--,r.next.colour--;var o=r.prev;if(-1==o.colour){this.__fix_neg_red(o);break}if(0==o.colour){if(null!=o.prev&&0==o.prev.colour){this.__fix_dbl_red(o.prev);break}if(null!=o.next&&0==o.next.colour){this.__fix_dbl_red(o.next);break}}var a=r.next;if(-1==a.colour){this.__fix_neg_red(a);break}if(0==a.colour){if(null!=a.prev&&0==a.prev.colour){this.__fix_dbl_red(a.prev);break}if(null!=a.next&&0==a.next.colour){this.__fix_dbl_red(a.next);break}}if(2==r.colour){if(null!=r.parent){r=r.parent;continue}r.colour=1}break}var s=e.parent;null==s?this.parent=n:s.prev==e?s.prev=n:s.next=n,null!=n&&(n.parent=s),e.parent=e.prev=e.next=null;var l=e;l.data=null,l.lt=null,l.swapped=null,l.next=Yn.zpp_pool,Yn.zpp_pool=l},Yn.prototype.clear=function(){if(null!=this.parent){for(var e=this.parent;null!=e;)if(null!=e.prev)e=e.prev;else if(null!=e.next)e=e.next;else{var t=e.parent;null!=t&&(e==t.prev?t.prev=null:t.next=null,e.parent=null);var i=e;i.data=null,i.lt=null,i.swapped=null,i.next=Yn.zpp_pool,Yn.zpp_pool=i,e=t}this.parent=null}},Yn.prototype.clear_with=function(e){if(null!=this.parent){for(var t=this.parent;null!=t;)if(null!=t.prev)t=t.prev;else if(null!=t.next)t=t.next;else{e(t.data);var i=t.parent;null!=i&&(t==i.prev?i.prev=null:i.next=null,t.parent=null);var n=t;n.data=null,n.lt=null,n.swapped=null,n.next=Yn.zpp_pool,Yn.zpp_pool=n,t=i}this.parent=null}},Yn.prototype.clear_node=function(e,t){t(e.data);var i=e.parent;return null!=i&&(e==i.prev?i.prev=null:i.next=null,e.parent=null),e.data=null,e.lt=null,e.swapped=null,e.next=Yn.zpp_pool,Yn.zpp_pool=e,i},Yn.prototype.__fix_neg_red=function(e){var t,i=e.parent;if(i.prev==e){var n=e.prev,r=e.next,o=r.prev,a=r.next;n.colour=0,e.colour=i.colour=1,null!=(e.next=o)&&(o.parent=e);var s=i.data;i.data=r.data,r.data=s,null!=this.swapped&&this.swapped(i.data,r.data),null!=(r.prev=a)&&(a.parent=r),r.next=i.next,null!=i.next&&(i.next.parent=r),null!=(i.next=r)&&(r.parent=i),t=n}else{var l=e.next,p=e.prev,h=p.next,u=p.prev;l.colour=0,e.colour=i.colour=1,null!=(e.prev=h)&&(h.parent=e);var c=i.data;i.data=p.data,p.data=c,null!=this.swapped&&this.swapped(i.data,p.data),null!=(p.next=u)&&(u.parent=p),p.prev=i.prev,null!=i.prev&&(i.prev.parent=p),null!=(i.prev=p)&&(p.parent=i),t=l}null!=t.prev&&0==t.prev.colour?this.__fix_dbl_red(t.prev):null!=t.next&&0==t.next.colour&&this.__fix_dbl_red(t.next)},Yn.prototype.__fix_dbl_red=function(e){for(;;){var t,i,n,r,o,a,s,l=e.parent,p=l.parent;if(null==p){l.colour=1;break}l==p.prev?(s=(n=p).next,e==l.prev?(i=l,r=(t=e).prev,o=e.next,a=l.next):(i=e,r=(t=l).prev,o=e.prev,a=e.next)):(r=(t=p).prev,e==l.prev?(n=l,o=(i=e).prev,a=e.next,s=l.next):(n=e,o=(i=l).prev,a=e.prev,s=e.next));var h=p.parent;if(null==h?this.parent=i:h.prev==p?h.prev=i:h.next=i,null!=i&&(i.parent=h),null!=(t.prev=r)&&(r.parent=t),null!=(t.next=o)&&(o.parent=t),null!=(i.prev=t)&&(t.parent=i),null!=(i.next=n)&&(n.parent=i),null!=(n.prev=a)&&(a.parent=n),null!=(n.next=s)&&(s.parent=n),i.colour=p.colour-1,t.colour=1,n.colour=1,i==this.parent)this.parent.colour=1;else if(0==i.colour&&0==i.parent.colour){e=i;continue}break}},Yn.prototype.try_insert_bool=function(e){var t=null,i=null;if(null==this.parent)null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null!=t&&(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),!0)},Yn.prototype.try_insert=function(e){var t=null,i=null;if(null==this.parent)null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,this.parent=t;else for(i=this.parent;;)if(this.lt(e,i.data)){if(null==i.prev){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.prev=t).parent=i;break}i=i.prev}else{if(!this.lt(i.data,e))break;if(null==i.next){null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,(i.next=t).parent=i;break}i=i.next}return null==t?i:(null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t)},Yn.prototype.insert=function(e){var t;if(null==Yn.zpp_pool?t=new Yn:(t=Yn.zpp_pool,Yn.zpp_pool=t.next,t.next=null),t.data=e,null==this.parent)this.parent=t;else for(var i=this.parent;;)if(this.lt(t.data,i.data)){if(null==i.prev){(i.prev=t).parent=i;break}i=i.prev}else{if(null==i.next){(i.next=t).parent=i;break}i=i.next}return null==t.parent?t.colour=1:(t.colour=0)==t.parent.colour&&this.__fix_dbl_red(t),t},Yn.prototype.__class__=Yn,String.prototype.__class__=String,String.__name__=!0,Array.__name__=!0;var Kn={__name__:["Int"]},Zn={__name__:["Dynamic"]},Jn=Number;Jn.__name__=["Float"];var Qn=Boolean;Qn.__ename__=["Bool"];var $n={__name__:["Class"]},er={};ze.__toStr={}.toString,Qs.epsilon=1e-8,Qs.fluidAngularDragFriction=2.5,Qs.fluidAngularDrag=100,Qs.fluidVacuumDrag=.5,Qs.fluidLinearDrag=.5,Qs.collisionSlop=.2,Qs.collisionSlopCCD=.5,Qs.distanceThresholdCCD=.05,Qs.staticCCDLinearThreshold=.05,Qs.staticCCDAngularThreshold=.005,Qs.bulletCCDLinearThreshold=.125,Qs.bulletCCDAngularThreshold=.0125,Qs.dynamicSweepLinearThreshold=17,Qs.dynamicSweepAngularThreshold=.6,Qs.angularCCDSlipScale=.75,Qs.arbiterExpirationDelay=6,Qs.staticFrictionThreshold=2,Qs.elasticThreshold=20,Qs.sleepDelay=60,Qs.linearSleepThreshold=.2,Qs.angularSleepThreshold=.4,Qs.contactBiasCoef=.3,Qs.contactStaticBiasCoef=.6,Qs.contactContinuousBiasCoef=.4,Qs.contactContinuousStaticBiasCoef=.5,Qs.constraintLinearSlop=.1,Qs.constraintAngularSlop=.001,Qs.illConditionedThreshold=2e8,Ve.zpp_pool=null,He.zpp_pool=null,We.zpp_pool=null,Xe.zpp_pool=null,qe.zpp_pool=null,Ye.zpp_pool=null,Ke.zpp_pool=null,Ze.zpp_pool=null,Je.zpp_pool=null,Qe.zpp_pool=null,$e.zpp_pool=null,et.zpp_pool=null,tt.zpp_pool=null,it.zpp_pool=null,ut.zpp_pool=null,Pe.FMAX=1e100,ke._Constraint=0,ke._Interactor=0,ke._CbType=0,ke._CbSet=0,ke._Listener=0,ke._ZPP_SimpleVert=0,ke._ZPP_SimpleSeg=0,ke._Space=0,ke._InteractionGroup=0,nt.zpp_pool=null,jo.zpp_pool=null,No.zpp_pool=null,Be.ANY_SHAPE=new y,Be.ANY_BODY=new y,Be.ANY_COMPOUND=new y,Be.ANY_CONSTRAINT=new y,Uo.internal=!1,Uo.id_ImmState_ACCEPT=1,Uo.id_ImmState_IGNORE=2,Uo.id_ImmState_ALWAYS=4,Uo.id_GravMassMode_DEFAULT=0,Uo.id_GravMassMode_FIXED=1,Uo.id_GravMassMode_SCALED=2,Uo.id_InertiaMode_DEFAULT=0,Uo.id_InertiaMode_FIXED=1,Uo.id_MassMode_DEFAULT=0,Uo.id_MassMode_FIXED=1,Uo.id_BodyType_STATIC=1,Uo.id_BodyType_DYNAMIC=2,Uo.id_BodyType_KINEMATIC=3,Uo.id_ListenerType_BODY=0,Uo.id_PreFlag_ACCEPT=1,Uo.id_ListenerType_CONSTRAINT=1,Uo.id_PreFlag_IGNORE=2,Uo.id_ListenerType_INTERACTION=2,Uo.id_PreFlag_ACCEPT_ONCE=3,Uo.id_ListenerType_PRE=3,Uo.id_PreFlag_IGNORE_ONCE=4,Uo.id_CbEvent_BEGIN=0,Uo.id_InteractionType_COLLISION=1,Uo.id_CbEvent_ONGOING=6,Uo.id_InteractionType_SENSOR=2,Uo.id_CbEvent_END=1,Uo.id_InteractionType_FLUID=4,Uo.id_CbEvent_WAKE=2,Uo.id_InteractionType_ANY=7,Uo.id_CbEvent_SLEEP=3,Uo.id_CbEvent_BREAK=4,Uo.id_CbEvent_PRE=5,Uo.id_Winding_UNDEFINED=0,Uo.id_Winding_CLOCKWISE=1,Uo.id_Winding_ANTICLOCKWISE=2,Uo.id_ValidationResult_VALID=0,Uo.id_ValidationResult_DEGENERATE=1,Uo.id_ValidationResult_CONCAVE=2,Uo.id_ValidationResult_SELF_INTERSECTING=3,Uo.id_ShapeType_CIRCLE=0,Uo.id_ShapeType_POLYGON=1,Uo.id_Broadphase_DYNAMIC_AABB_TREE=0,Uo.id_Broadphase_SWEEP_AND_PRUNE=1,Uo.id_ArbiterType_COLLISION=1,Uo.id_ArbiterType_SENSOR=2,Uo.id_ArbiterType_FLUID=4,Le.types=function(e){null==Uo.ListenerType_BODY&&(Uo.internal=!0,Uo.ListenerType_BODY=new f,Uo.internal=!1);var t=Uo.ListenerType_BODY;null==Uo.ListenerType_CONSTRAINT&&(Uo.internal=!0,Uo.ListenerType_CONSTRAINT=new f,Uo.internal=!1);var i=Uo.ListenerType_CONSTRAINT;null==Uo.ListenerType_INTERACTION&&(Uo.internal=!0,Uo.ListenerType_INTERACTION=new f,Uo.internal=!1);var n=Uo.ListenerType_INTERACTION;return null==Uo.ListenerType_PRE&&(Uo.internal=!0,Uo.ListenerType_PRE=new f,Uo.internal=!1),[t,i,n,Uo.ListenerType_PRE]}(),Le.events=function(e){null==Uo.CbEvent_BEGIN&&(Uo.internal=!0,Uo.CbEvent_BEGIN=new d,Uo.internal=!1);var t=Uo.CbEvent_BEGIN;null==Uo.CbEvent_END&&(Uo.internal=!0,Uo.CbEvent_END=new d,Uo.internal=!1);var i=Uo.CbEvent_END;null==Uo.CbEvent_WAKE&&(Uo.internal=!0,Uo.CbEvent_WAKE=new d,Uo.internal=!1);var n=Uo.CbEvent_WAKE;null==Uo.CbEvent_SLEEP&&(Uo.internal=!0,Uo.CbEvent_SLEEP=new d,Uo.internal=!1);var r=Uo.CbEvent_SLEEP;null==Uo.CbEvent_BREAK&&(Uo.internal=!0,Uo.CbEvent_BREAK=new d,Uo.internal=!1);var o=Uo.CbEvent_BREAK;null==Uo.CbEvent_PRE&&(Uo.internal=!0,Uo.CbEvent_PRE=new d,Uo.internal=!1);var a=Uo.CbEvent_PRE;return null==Uo.CbEvent_ONGOING&&(Uo.internal=!0,Uo.CbEvent_ONGOING=new d,Uo.internal=!1),[t,i,n,r,o,a,Uo.CbEvent_ONGOING]}(),ri.UCbSet=new Ie,ri.VCbSet=new Ie,ri.WCbSet=new Ie,ri.UCbType=new Fe,ri.VCbType=new Fe,ri.WCbType=new Fe,pn.internal=!1,pn.COL=1,pn.FLUID=4,pn.SENSOR=2,pn.types=function(e){null==Uo.ArbiterType_COLLISION&&(Uo.internal=!0,Uo.ArbiterType_COLLISION=new G,Uo.internal=!1);var t=Uo.ArbiterType_COLLISION;null==Uo.ArbiterType_SENSOR&&(Uo.internal=!0,Uo.ArbiterType_SENSOR=new G,Uo.internal=!1);var i=Uo.ArbiterType_SENSOR;return null==Uo.ArbiterType_FLUID&&(Uo.internal=!0,Uo.ArbiterType_FLUID=new G,Uo.internal=!1),[null,t,i,null,Uo.ArbiterType_FLUID]}(),Vo.zpp_pool=null,Ho.zpp_pool=null,Wo.FACE1=0,Wo.FACE2=1,Wo.CIRCLE=2,Wo.zpp_pool=null,Xo.internal=!1,Xo.zpp_pool=null,ft.zpp_pool=null,xt.SHAPE=1,xt.BODY=2,Ao.zpp_pool=null,$s.flowpoly=new zt,$s.flowsegs=new zt,bt.convexPool=null,bt.rayPool=null,bt.internal=!1,Sn.zpp_pool=null,Cn.zpp_pool=null,Mn.ints=null,Mn.paths=null,dr.zpp_pool=null,Ct.zpp_pool=null,Mt.zpp_pool=null,_r.zpp_pool=null,yr.me=new yr,yr.look_march=[-1,224,56,216,14,-1,54,214,131,99,-1,91,141,109,181,85],Pt.zpp_pool=null,Tt.queue=null,Tt.edges=null,Ot.nextId=0,Ot.zpp_pool=null,At.zpp_pool=null,Gt.zpp_pool=null,It.zpp_pool=null,Bt.zpp_pool=null,Dt.sweep=null,Dt.inthash=null,Dt.vertices=null,Dt.queue=null,Dt.ints=null,Dt.list_vertices=null,Dt.list_queue=null,Rt.zpp_pool=null,Ft.zpp_pool=null,jt.stack=null,Vt.zpp_pool=null,Nt.zpp_pool=null,Ut.queue=null,Ut.stack=null,Ut.edgeSet=null,el.zpp_pool=null,qt.types=function(e){null==Uo.BodyType_STATIC&&(Uo.internal=!0,Uo.BodyType_STATIC=new oe,Uo.internal=!1);var t=Uo.BodyType_STATIC;null==Uo.BodyType_DYNAMIC&&(Uo.internal=!0,Uo.BodyType_DYNAMIC=new oe,Uo.internal=!1);var i=Uo.BodyType_DYNAMIC;return null==Uo.BodyType_KINEMATIC&&(Uo.internal=!0,Uo.BodyType_KINEMATIC=new oe,Uo.internal=!1),[null,t,i,Uo.BodyType_KINEMATIC]}(),qt.bodystack=null,qt.bodyset=null,qt.cur_graph_depth=0,Kt.zpp_pool=null,Zt.zpp_pool=null,Zt.WAKE=1,Zt.PROPS=2,Zt.ANGDRAG=4,Zt.ARBITERS=8,Jt.types=function(e){null==Uo.ShapeType_CIRCLE&&(Uo.internal=!0,Uo.ShapeType_CIRCLE=new xe,Uo.internal=!1);var t=Uo.ShapeType_CIRCLE;return null==Uo.ShapeType_POLYGON&&(Uo.internal=!0,Uo.ShapeType_POLYGON=new xe,Uo.internal=!1),[t,Uo.ShapeType_POLYGON]}(),$t.zpp_pool=null,$t.internal=!1,Eo.zpp_pool=null,nr.zpp_pool=null,Go.tmpaabb=new Ao,ii.FATTEN=3,ii.VEL_STEPS=2,ni.zpp_pool=null,oi.zpp_pool=null,Yo.zpp_pool=null,li.zpp_pool=null,di.zpp_pool=null,ji.zpp_pool=null,Ni.zpp_pool=null,Ui.zpp_pool=null,Vi.zpp_pool=null,Hi.zpp_pool=null,Wi.zpp_pool=null,Ko.zpp_pool=null,Zo.zpp_pool=null,Xi.zpp_pool=null,Jo.zpp_pool=null,qi.zpp_pool=null,Yi.zpp_pool=null,Ki.zpp_pool=null,Zi.zpp_pool=null,Ji.zpp_pool=null,Qi.zpp_pool=null,$i.zpp_pool=null,en.zpp_pool=null,tn.zpp_pool=null,nn.zpp_pool=null,rn.zpp_pool=null,on.zpp_pool=null,rr.zpp_pool=null,an.zpp_pool=null,sn.zpp_pool=null,ln.zpp_pool=null,Qo.zpp_pool=null,$o.zpp_pool=null,hn.zpp_pool=null,ea.zpp_pool=null,un.zpp_pool=null,cn.zpp_pool=null,dn.zpp_pool=null,_n.zpp_pool=null,yn.zpp_pool=null,fn.internal=!1,xn.internal=!1,vn.internal=!1,zn.internal=!1,gn.internal=!1,Tn.internal=!1,On.internal=!1,An.internal=!1,En.internal=!1,Gn.internal=!1,In.internal=!1,Bn.internal=!1,Ln.internal=!1,Dn.internal=!1,Rn.internal=!1,jn.poolGeomPoly=null,jn.poolVec2=null,jn.poolVec3=null,Nn.zpp_pool=null,Un.zpp_pool=null,Vn.zpp_pool=null,Hn.zpp_pool=null,Wn.zpp_pool=null,Xn.zpp_pool=null,qn.zpp_pool=null,Yn.zpp_pool=null,Me.main()}();__extends=this&&this.__extends||function(){var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(e,t)};return function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}();var Fabrique,CitrusEngine=function(){function e(){this._playing=!0,this.input=Input.Init(),this.input.addKeyAction("jump",Phaser.Keyboard.UP,Game.bouncerInputChannel),this.input.addKeyAction("right",Phaser.Keyboard.RIGHT,Game.bouncerInputChannel),this.input.addKeyAction("left",Phaser.Keyboard.LEFT,Game.bouncerInputChannel),this.input.addKeyAction("grab",Phaser.Keyboard.SPACEBAR,Game.bouncerInputChannel),this.input.addKeyAction("grabDown",Phaser.Keyboard.DOWN,Game.bouncerInputChannel),this.input.addKeyAction("down",Phaser.Keyboard.S,Game.hustlerInputChannel),this.input.addKeyAction("jump",Phaser.Keyboard.W,Game.hustlerInputChannel),this.input.addKeyAction("right",Phaser.Keyboard.D,Game.hustlerInputChannel),this.input.addKeyAction("left",Phaser.Keyboard.A,Game.hustlerInputChannel),this.input.addKeyAction("restart",Phaser.Keyboard.R),this.input.addKeyAction("pause",Phaser.Keyboard.P),this.input.addKeyAction("next",Phaser.Keyboard.SPACEBAR),this.input.addKeyAction("change",Phaser.Keyboard.C),this.input.addKeyAction("active",Phaser.Keyboard.ONE),this.input.addKeyAction("passive",Phaser.Keyboard.TWO),this.input.addKeyAction("decor",Phaser.Keyboard.THREE),this.input.addKeyAction("block",Phaser.Keyboard.FOUR),this.input.addKeyAction("grid",Phaser.Keyboard.FIVE),this.input.addKeyAction("delete",Phaser.Keyboard.DELETE),this.input.addKeyAction("escape",Phaser.Keyboard.ESC),this.input.addKeyAction("enter",Phaser.Keyboard.ENTER),this.input.addKeyAction("undo",Phaser.Keyboard.Z),this.input.addKeyAction("redo",Phaser.Keyboard.X),this.input.addKeyAction("testLevel",Phaser.Keyboard.T)}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.Init=function(){return e.instance=new e},Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},set:function(e){this._playing=e},enumerable:!1,configurable:!0}),e.instance=null,e}(),Constants=function(){function e(){}return e.GAMEDISTRIBUTION_ID="6e8bacb1a63a4565bd29bd5bfc3ebceb",e.GAMEDISTRIBUTION_USER="FB2B5D8E-9E6E-40E0-9909-634EBA5E5F8F-s1",e.GAME_KEY="6f9b04b7512b4e33ea5295509162fbc5",e.SECRET_KEY="986ab5b06013e8d86aa313bed64fed4efbd2a02d",e.GOOGLE_ID="UA-114327842-9",e.GOOGLE_APP_NAME="Money Movers Maker Viral",e}();!function(e){var t=function(){function e(){}return e.show=function(){var e=document.getElementById("loader");e&&(e.style.display="block")},e.hide=function(){var e=document.getElementById("loader");e&&(e.style.display="none")},e}();e.LoaderHelper=t}(Fabrique||(Fabrique={}));var Input=function(){function t(){this.channels=new Array;for(var e=0;e<t.NUM_CHANNELS;e++)this.channels[e]={}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),t.instance},t.Init=function(){return t.instance=new t},t.prototype.addKeyAction=function(e,t,i){void 0===i&&(i=0),this.channels[i][e]=-1;var n=Game.getGame().input.keyboard.addKey(t);n.onDown.add(function(){this.channels[i][e]=Game.frame},this),n.onUp.add(function(){this.channels[i][e]=-1},this)},t.prototype.setDoing=function(e,t,i){i?this.channels[e][t]<0&&(this.channels[e][t]=Game.frame):this.channels[e][t]=-1},t.prototype.isDoing=function(e,t){return void 0===t&&(t=0),0<=this.channels[t][e]},t.prototype.justDid=function(e,t){void 0===t&&(t=0);var i=this.channels[t][e];return 0<=i&&Game.frame-i==1},t.NUM_CHANNELS=20,t.instance=null,t}();!function(e){var t=function(){function e(e,t){this._initialized=!1,this._x=0,this._y=0,this.params=null,this._inverted=!1,this.group=0,this.offsetX=0,this.offsetY=0,this._ce=null,this.updateCallEnabled=!1,this._registration="center",this._radius=0,this._width=30,this._height=30,this.view=null,this.name=null,this.kill=!1,this.name=e,this.params=t,this.initialize(),this._ce=CitrusEngine.getInstance(),this._initialized=!0}return e.prototype.initialize=function(e){void 0===e&&(e=null),e&&(this.params=e),this.params?this.setParams(this.params):this._initialized=!0},e.prototype.setParams=function(e){e.view&&(this.view=e.view),e.x&&(this._x=e.x),e.y&&(this._y=e.y),e.group&&(this.group=e.group),e.radius&&(this._radius=e.radius),e.width&&(this._width=e.width),e.height&&(this._height=e.height),e.x instanceof String||e.y instanceof String||e.width instanceof String||(e.height,String),this._initialized=!0,this.view&&this.view.params.flippedHorizontally&&(this.inverted=!0)},Object.defineProperty(e.prototype,"inverted",{get:function(){return this._inverted},set:function(e){this._inverted=e,this.view&&(this._inverted?this.view.scale.x=-1:this.view.scale.x=1)},enumerable:!1,configurable:!0}),e.prototype.halfWidth=function(){return 0<this._width?this._width/2:this._radius},e.prototype.halfHeight=function(){return 0<this._height?this._height/2:this._radius},e.prototype.draw=function(){if(this.view)if("center"==this.registration)this.view.x=this._x+this.offsetX,this.view.y=this._y+this.offsetY;else{if("topLeft"!=this.registration)throw Error("NO SUCH REGISTRATION "+this.registration);this.view.x=this._x+this.offsetX,this.view.y=this._y+this.offsetY}},e.prototype.removeArt=function(){this.view&&this.view.parent&&this.view.parent.removeChild(this.view)},e.prototype.update=function(e){this._timeDelta=e},Object.defineProperty(e.prototype,"registration",{get:function(){return this._registration},set:function(e){this._registration=e},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this._initialized=!1},e}();e.CitrusObject=t}(objects||(objects={})),function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._registration="topLeft",1<i.view.totalFrames()&&i.view.playLoop(),i}return __extends(e,n),e}(e.CitrusObject);e.CitrusSprite=t}(objects||(objects={})),function(t){var e=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._rotation=0,i._bodyType=null,i._body=null,i._shape=null,i._material=null,i._beginContactCallEnabled=!1,i._endContactCallEnabled=!1,i._visible=!0,i.points=null,t.rotation&&(i.rotation=t.rotation),i}return __extends(e,n),e.prototype.addPhysics=function(){this._nape=Game.levelState._nape,this.defineBody(),this.createBody(),this.createMaterial(),this.createShape(),this.createFilter(),this.createConstraint()},e.prototype.destroy=function(){e.space.bodies.remove(this._body)},e.prototype.handlePreContact=function(e){return nape.callbacks.PreFlag.ACCEPT},e.prototype.handleBeginContact=function(e){},e.prototype.handleEndContact=function(e){},e.prototype.defineBody=function(){this._bodyType=nape.phys.BodyType.DYNAMIC},e.prototype.createBody=function(){if(this._body=new nape.phys.Body(this._bodyType,new nape.geom.Vec2(this._x,this._y)),(this._body.userData.myData=this).view){var e=0,t=0,i=0,n=0;if("topLeft"==this.registration){var r=Math.round((this.view.degrees+360)%360/90);"TriggerGraphics"==this.view.mc?1==r?(i=-5,n=-2):3==r&&(i=-4):"PushButtonGraphics"==this.view.mc?(2==r&&(n=-1),3==r&&(i=n=-7)):(e=-this.width/2,t=-this.height/2)}this._body.rotate(new nape.geom.Vec2(this._x+e,this._y+t),this.view.degrees*Math.PI/180),0!=i&&(this.x+=i),0!=n&&(this.y+=n)}this._body.rotate(new nape.geom.Vec2(this._x,this._y),this._rotation)},e.prototype.createMaterial=function(){this._material=new nape.phys.Material(.65,.57,1.2,1,0)},e.prototype.createShape=function(){if(null!=this.points&&1<this.points.length){for(var e=new nape.geom.Vec2List,t=0,i=this.points;t<i.length;t++){var n=i[t];e.push(new nape.geom.Vec2(n.x,n.y))}var r=new nape.shape.Polygon(e,this._material),o=r.validity();if(o!=nape.shape.ValidationResult.VALID){if(o==nape.shape.ValidationResult.CONCAVE)return void new nape.geom.GeomPoly(e).convexDecomposition().foreach(function(e){this._body.shapes.add(new nape.shape.Polygon(e))});throw new Error("Invalid polygon/polyline")}this._shape=r}else 0!=this._radius?this._shape=new nape.shape.Circle(this._radius,null,this._material):this._shape=new nape.shape.Polygon(nape.shape.Polygon.box(this._width,this._height),this._material);this._body.shapes.add(this._shape)},e.prototype.createFilter=function(){this._body.setShapeFilters(new nape.dynamics.InteractionFilter(t.PhysicsCollisionCategories.Get("Level"),t.PhysicsCollisionCategories.GetAll()))},e.prototype.createConstraint=function(){this._body.space=e.space,this._body.cbTypes.add(e.PHYSICS_OBJECT)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(e){this._visible=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._body?this._body.position.x:this._x},set:function(e){if(this._x=e,this._body){var t=this._body.position;t.x=this._x,this._body.position=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._body?this._body.position.y:this._y},set:function(e){if(this._y=e,this._body){var t=this._body.position;t.y=this._y,this._body.position=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._body?180*this._body.rotation/Math.PI:180*this._rotation/Math.PI},set:function(e){this._rotation=e*Math.PI/180,this._body&&(this._body.rotation=this._rotation)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depth",{get:function(){return 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!1,configurable:!0}),e.prototype.getBody=function(){return this._body},Object.defineProperty(e.prototype,"velocity",{get:function(){return[this._body.velocity.x,this._body.velocity.y,0]},set:function(e){this._body.velocity.setxy(e[0],e[1])},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"beginContactCallEnabled",{get:function(){return this._beginContactCallEnabled},set:function(e){this._beginContactCallEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endContactCallEnabled",{get:function(){return this._endContactCallEnabled},set:function(e){this._endContactCallEnabled=e},enumerable:!1,configurable:!0}),e.prototype.draw=function(){this.view&&(this.view.degrees=this.rotation,this.view.x=this.x+this.offsetX,this.view.y=this.y+this.offsetY)},e.PHYSICS_OBJECT=new nape.callbacks.CbType,e}(t.CitrusObject);t.NapePhysicsObject=e}(objects||(objects={})),function(e){var t=function(n){function e(e,t){var i=n.call(this,e,t)||this;return i._vec=new Vec2,i.registration="topLeft",Game.levelState.addObject(i),i}return __extends(e,n),e.prototype.hit=function(e){},e.prototype.action=function(){},e.prototype.moveHorizontally=function(e,t){(0<t&&e.velocity.x<t||t<0&&e.velocity.x>t)&&(e.velocity.x=t)},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.density=1,this._material.staticFriction=.1,this._material.dynamicFriction=1},e.prototype.destroy=function(){n.prototype.destroy.call(this),Game.levelState.removeObject(this)},e}(e.NapePhysicsObject);e.LevelObject=t}(objects||(objects={}));var NBody=nape.phys.Body;!function(e){var t=function(n){function e(e,t){void 0===t&&(t=null);var i=n.call(this,e,t)||this;return i.acceleration=30,i.maxVelocity=240,i.jumpHeight=330,i.inputChannel=0,i._groundContacts=[],i._groundContactsCount=0,i._onGround=!1,i._dynamicFriction=.5,i._playerMovingHero=!1,i._controlsEnabled=!0,i._isMoveKeyPressed=!1,i._isJustJumped=!1,i.registration="center",i.updateCallEnabled=!0,i.beginContactCallEnabled=!0,i.endContactCallEnabled=!0,i}return __extends(e,n),Object.defineProperty(e.prototype,"controlsEnabled",{get:function(){return this._controlsEnabled},set:function(e){this._controlsEnabled=e,this._body.velocity=Vec2.weak()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onGround",{get:function(){return this._onGround},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dynamicFriction",{get:function(){return this._dynamicFriction},set:function(e){this._material.dynamicFriction=this._dynamicFriction=e},enumerable:!1,configurable:!0}),e.prototype.update=function(e){n.prototype.update.call(this,e);var t=this._body.velocity;this._controlsEnabled&&(this._isMoveKeyPressed=!1,this._ce.input.isDoing("right",this.inputChannel)?(t.x+=this.acceleration,this._isMoveKeyPressed=!0,this.inverted=!1):this._ce.input.isDoing("left",this.inputChannel)?(t.x-=this.acceleration,this._isMoveKeyPressed=!0,this.inverted=!0):t.x*=.75,this._isMoveKeyPressed&&!this._playerMovingHero?(this._playerMovingHero=!0,this._material.dynamicFriction=0):!this._isMoveKeyPressed&&this._playerMovingHero&&(this._playerMovingHero=!1,this._material.dynamicFriction=this._dynamicFriction),this._onGround&&this._ce.input.isDoing("jump",this.inputChannel)&&(this._isMoveKeyPressed=!0,"bouncer"==name?0<this._groundContacts.length&&this._groundContacts[0]==Game.hustler.body&&0==Game.hustler.onGround||(t.y=-this.jumpHeight,this.jump()):0<this._groundContacts.length&&this._groundContacts[0]==Game.bouncer.body&&0==Game.bouncer.onGround||(t.y=-this.jumpHeight,this.jump())),t.x>this.maxVelocity?t.x=this.maxVelocity:t.x<-this.maxVelocity&&(t.x=-this.maxVelocity),this._body.velocity=t),this.updateAnimation(e)},e.prototype.createBody=function(){n.prototype.createBody.call(this),this._body.allowRotation=!1},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.staticFriction=0},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);if(0<e.arbiters.length&&e.arbiters.at(0).collisionArbiter){var i=Math.round(180*e.arbiters.at(0).collisionArbiter.normal.angle/Math.PI);(45<=i&&i<=135||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&(this._groundContacts.push(t.body),this._onGround=!0)}},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e),i=this._groundContacts.indexOf(t.body);-1!=i&&(this._groundContacts.splice(i,1),0==this._groundContacts.length&&(this._onGround=!1))},e.prototype.jump=function(){this._isJustJumped=!0,this._onGround=!1},e.prototype.updateAnimation=function(e){},e}(e.LevelObject);e.Hero=t}(objects||(objects={})),function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.adjustWorld=function(){var e=Math.min(window.innerWidth/Game.WIDTH,window.innerHeight/Game.HEIGHT);this.game.scale.setGameSize(window.innerWidth/e,Game.HEIGHT),this.game.scale.setUserScale(e,e,0,0),this.camera.bounds.x=-1/0,this.camera.bounds.width=1/0,this.camera.x=-Math.floor((window.innerWidth/e-Game.WIDTH)/2),window.innerWidth<window.innerHeight?(Game.getGame().paused=!0,Game.RotateDevice.visible=!0):(Game.getGame().paused=!1,Game.RotateDevice.visible=!1)},t.prototype.create=function(){this.adjustWorld(),Game.JoypadLeft&&(Game.JoypadLeft.visible=Game.JoypadRight.visible=!1),Game.stateSwitcher._isSwitchingState&&Game.stateSwitcher.openCurtains(.1)},t}(Phaser.State);e.OzState=t}(states||(states={})),function(i){var e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.init=function(){this.game.plugins.add(PhaserCachebuster.CacheBuster),this.game.load.cacheBuster=version;var e=new h5ads.GameDistribution("6e8bacb1a63a4565bd29bd5bfc3ebceb");h5ads.adWrapper.setAdProvider(e),window.hasOwnProperty("fbrqSA")&&!0===window.fbrqSA&&(h5branding.Utils.ASSET_LOCATION="assets/"),SoundManager.Init(),Game.levelParser=new LevelParseSystem,Game.stateSwitcher=new StateSwitchSystem,Game.initCollisionCategories()},t.prototype.preload=function(){var i=this;if(Fabrique.LoaderHelper.hide(),this.game.load.onFileComplete.add(function(e){h5branding.SplashLoader.getInstance().setLoadProgress(e)}),this.game.load.onLoadComplete.add(function(){h5branding.SplashLoader.getInstance().setLoadProgress(100)}),h5ads.adWrapper.preloadAd(h5ads.AdType.interstitial),h5branding.SplashLoader.getInstance().setButtonCallback(function(){h5branding.SplashLoader.getInstance().destroy(),Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Game.getGame().sound.mute=!0,Fabrique.LoaderHelper.hide()}),h5ads.adWrapper.on(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=t,SoundManager.decodeSounds(),window.Game.getGame().add.plugin(PhaserInput.Plugin);var e=Game.VIRAL;e?Game.stateSwitcher.switchToMainMenu():i.levelId<0||!LevelLoader.IsLoading&&!LevelLoader.GetNextLevel()?Game.stateSwitcher.directToEdit():0<=i.levelId&&LevelLoader.IsLoading?e=!0:(LevelLoader.PlayLevelAt(0),Game.stateSwitcher.switchToPlay()),h5ads.adWrapper.preloadAd(h5ads.AdType.interstitial),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)}),this.game.load.image(h5branding.Branding.LOGO_KEY,h5branding.Branding.brandingLogoUrl),this.load.image("rotateDevice","assets/images/rotateDevice.png"),this.load.atlas("PreloaderObjects","assets/images/PreloaderObjects.png",null,PreloaderObjects.data),MovieClip.RegisterSpritesheet("Objects",Objects.data),MovieClip.RegisterSpritesheet("PreloaderObjects",PreloaderObjects.data),MovieClip.RegisterSpritesheet("WinningObjects",WinningObjects.data),this.game.load.atlas("Objects","assets/images/Objects.png",null,Objects.data),this.game.load.atlas("WinningObjects","assets/images/WinningObjects.png",null,WinningObjects.data),SoundManager.Preload(),this.levelId=-1,!Game.VIRAL){var e=OzUtil.GetCurrentURL(),t=(e.indexOf("ozdy.com"),OzUtil.GetAllURLParams());t.id&&(this.levelId=parseInt(t.id))}LevelLoader.Init(this.levelId)},t.prototype.onSizeChange=function(){t.InW==Math.round(window.innerWidth)&&t.InH==Math.round(window.innerHeight)&&3<t.NUMRESIZE||i.EditState.TextFocused||(t.InW=Math.round(window.innerWidth),t.InH=Math.round(window.innerHeight),Game.JoypadLeft&&t.NUMRESIZE++,this.adjustWorld(),t.PADH=Math.round(-this.camera.x),Game.AdjustJoypad(),Game.AdjustPad())},t.prototype.create=function(){this.game.stage.backgroundColor=0,this.game.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.game.scale.setResizeCallback(this.onSizeChange,this),this.game.scale.refresh(),Game.PadLeft||(Game.CurtainContainer=new MovieClip,Game.getGame().stage.addChild(Game.CurtainContainer),Game.LeftCurtain=new MovieClip("LeftCurtainGraphics",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),Game.LeftCurtain.x=Game.LEFT_CURTAIN_OPEN_X,Game.CurtainContainer.addChild(Game.LeftCurtain),Game.RightCurtain=new MovieClip("RightCurtainGraphics",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),Game.RightCurtain.x=Game.RIGHT_CURTAIN_OPEN_X,Game.CurtainContainer.addChild(Game.RightCurtain),Game.PadLeft=new MovieClip("cmcSidePad",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),Game.PadLeft.x=0,Game.getGame().stage.addChild(Game.PadLeft),Game.PadRight=new MovieClip("cmcSidePad",0,0,null,"PreloaderObjects",PreloaderObjectsLayouts.data),Game.PadRight.x=Game.WIDTH,Game.PadRight.scaleX=-1,Game.getGame().stage.addChild(Game.PadRight),Game.AdjustPad(),Game.BothJoypads=new MovieClip,Game.getGame().stage.addChild(Game.BothJoypads),Game.RotateDevice=new Phaser.Sprite(Game.getGame(),0,0,"rotateDevice"),Game.getGame().stage.addChild(Game.RotateDevice),Game.RotateDevice.visible=!1)},t.InW=-1,t.InH=-1,t.PADH=0,t.NUMRESIZE=0,t}(i.OzState);i.Boot=e}(states||(states={})),function(e){var t=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.cnt=0,e}return __extends(r,t),r.prototype.create=function(){this.cnt=0,Game._ce=CitrusEngine.Init(),r.NumShown++,SoundManager.getInstance().playSound("MenuMusic"),this.mc=new MovieClip("cmcMainMenu"),this.game.world.addChild(this.mc);var e=new MovieClip("cmcPreloaderBG",0,0,"bg","PreloaderObjects",PreloaderObjectsLayouts.data);if(this.mc.addChildAt(e,0),this.mc.addChild(new MovieClip("cmcKizi",8,9,"sponsor","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.getChild("sponsor").visible=!1,this.mc.getChild("playButton").makeButton(this.goLevels,!1,this,!0),this.mc.getChild("playButton").centerInputRect(),this.mc.getChild("creditsButton").makeButton(this.showCredits,!1,this,!0),this.mc.getChild("creditsButton").centerInputRect(),this.mc.getChild("createNewLevel").makeButton(Game.CreateNewLevel,!1,this,!0),this.mc.getChild("createNewLevel").centerInputRect(),h5branding.Branding.outGoingLinksAllowed()&&this.mc.getChild("sponsor").makeButton(Game.sponsor,!1),this.mc.addChild(new MovieClip("SoundButtonGraphics",584,9,"btnSound","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.addChild(new MovieClip("MusicButtonGraphics",622,9,"btnMusic","PreloaderObjects",PreloaderObjectsLayouts.data)),this.mc.addChild(new MovieClip("HelpButtonGraphics",660,9,"btnHelp")),Game.Touch()){this.mc.changeChildByName("btnSound","BigSoundButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this.mc.changeChildByName("btnMusic","BigMusicMenuButton","PreloaderObjects",PreloaderObjectsLayouts.data),this.mc.changeChildByName("btnHelp","BigHelpMenuButton","Objects",ObjectsLayouts.data);var t=this.mc.getChild("btnMusic"),i=this.mc.getChild("btnSound"),n=this.mc.getChild("btnHelp");n.x=646,n.y=3,t.x=590,t.y=3,i.x=534,i.y=3}this.mc.getChild("btnMusic").makeMusicButton(),this.mc.getChild("btnSound").makeSoundButton(),this.mc.getChild("btnHelp").makeButton(this.showHelp,!0,this,!0),this._black=Game.getGame().add.graphics(0,0),this._black.beginFill(0),this._black.drawRect(0,0,Game.WIDTH,Game.HEIGHT),this._black.endFill(),this._black.visible=!1,this.creditsSprite=new MovieClip("cmcCredits",350,-525),this.game.world.addChild(this.creditsSprite),this.creditsSprite.visible=!1,h5branding.Branding.outGoingLinksAllowed()&&this.creditsSprite.getChild("sponsor").makeButton(Game.sponsor,!1,this,!0),this.creditsSprite.getChild("backButton").makeButton(this.unShowCredits,!1,this,!0),this.creditsSprite.getChild("backButton").centerInputRect(),this.helpSprite=new MovieClip("cmcHelpPlay",350,-525,"help","WinningObjects",WinningObjectsLayouts.data),this.helpSprite.getChild("content").gotoAndStop(Game.Touch()?2:1),this.game.world.addChild(this.helpSprite),this.helpSprite.visible=!1,this.helpSprite.getChild("close").makeButton(this.unShowHelp,!1,this,!0),this.helpSprite.getChild("close").centerInputRect(),Game.SetEnterButton(this.mc.getChild("playButton"))},r.prototype.update=function(){t.prototype.update.call(this),1==this.cnt&&t.prototype.create.call(this),this.cnt++,Game.frame++,Game.ProcessEnter()},r.prototype.goLevels=function(){Fabrique.LoaderHelper.show();var e=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),Game.VIRAL?LevelLoader.GetNextLevel()&&(LevelLoader.PlayLevelAt(0),Game.stateSwitcher.switchToPlay()):Game.stateSwitcher.switchToEdit(),Game.getGame().sound.mute=e,h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial),this.game.stage.disableVisibilityChange=!0},r.prototype.showHelp=function(){this.helpSprite.visible||(this.helpSprite.visible=!0,this.helpSprite.getChild("close").changeFrame1(),this.disableInput(),this._black.visible=!0,this._black.alpha=0,this.tweenY=TweenMax.to(this.helpSprite,.4,{y:0,ease:"Quad.easeOut"}),TweenMax.to(this._black,.4,{alpha:.7,ease:"Quad.easeOut"}),Game.SetEnterButton(this.helpSprite.getChild("close")))},r.prototype.unShowHelp=function(){this.tweenY&&(this.tweenY.kill(),this.tweenY=null),TweenMax.to(this.helpSprite,.25,{y:-525,onComplete:this.hideHelp,onCompleteContext:this}),TweenMax.to(this._black,.25,{alpha:0,ease:"Quad.easeOut"})},r.prototype.hideHelp=function(){this.helpSprite.visible=!1,this.enableInput(),Game.SetEnterButton(this.mc.getChild("playButton"))},r.prototype.showCredits=function(){this.creditsSprite.visible||(this.creditsSprite.visible=!0,this.creditsSprite.getChild("backButton").changeFrame1(),this.disableInput(),this._black.visible=!0,this._black.alpha=0,this.tweenY=TweenMax.to(this.creditsSprite,.4,{y:0,ease:"Quad.easeOut"}),TweenMax.to(this._black,.4,{alpha:.7,ease:"Quad.easeOut"}),Game.SetEnterButton(this.creditsSprite.getChild("backButton")))},r.prototype.unShowCredits=function(){this.tweenY&&(this.tweenY.kill(),this.tweenY=null),TweenMax.to(this.creditsSprite,.25,{y:-525,onComplete:this.hideCredits,onCompleteContext:this}),TweenMax.to(this._black,.25,{alpha:0,ease:"Quad.easeOut"})},r.prototype.hideCredits=function(){this.creditsSprite.visible=!1,this.enableInput(),Game.SetEnterButton(this.mc.getChild("playButton"))},r.prototype.depressButtons=function(){this.mc.getChild("playButton").changeFrame1(),this.mc.getChild("creditsButton").changeFrame1()},r.prototype.disableInput=function(){this.mc.getChild("playButton").input.enabled=!1,this.mc.getChild("creditsButton").input.enabled=!1,this.mc.getChild("createNewLevel").input.enabled=!1,this.mc.getChild("btnMusic").input.enabled=!1,this.mc.getChild("btnSound").input.enabled=!1,this.mc.getChild("btnHelp").input.enabled=!1,h5branding.Branding.outGoingLinksAllowed()&&(this.mc.getChild("sponsor").input.enabled=!1),TweenMax.delayedCall(.1,this.depressButtons,this)},r.prototype.enableInput=function(){this._black.visible=!1,this.mc.getChild("playButton").input.enabled=!0,this.mc.getChild("creditsButton").input.enabled=!0,this.mc.getChild("createNewLevel").input.enabled=!0,this.mc.getChild("btnMusic").input.enabled=!0,this.mc.getChild("btnSound").input.enabled=!0,this.mc.getChild("btnHelp").input.enabled=!0,h5branding.Branding.outGoingLinksAllowed()&&(this.mc.getChild("sponsor").input.enabled=!0)},r.NumShown=0,r}(e.OzState);e.MainMenuState=t}(states||(states={})),function(e){var t=function(b){function w(){var e=b.call(this)||this;return e.cnt=0,e}return __extends(w,b),w.prototype.loadCurSavedStep=function(){w.DontSave=!0,this.destroyPreviousPut(),this.clear(w.SavedSteps[w.SaveStepId]);var e=w.SelectedId[w.SaveStepId];0<=e&&this.setSelected(w._objects[e]),w.DontSave=!1,this.adjustUndoRedoButtons()},w.prototype.saveCurrentStep=function(){if(!w.DontSave){var e=OzUtil.CopyJsonWithout(w._objects,["mc"]),t=w.SavedSteps[w.SaveStepId];if(t){if(JSON.stringify(e)==JSON.stringify(t))return;(w.SaveStepId=(w.SaveStepId+1)%w.NumSavedSteps)==w.MinSavedStep&&(w.MinSavedStep=(w.SaveStepId+1)%w.NumSavedSteps),w.MaxSavedStep=w.SaveStepId}w.SavedSteps[w.SaveStepId]=e;var i=-1;this.selectedObject&&(i=w._objects.indexOf(this.selectedObject)),w.SelectedId[w.SaveStepId]=i,this.adjustUndoRedoButtons()}},w.prototype.adjustUndoRedoButtons=function(){this.topPanel.getChild("btnUndo").gotoAndStop(w.SaveStepId!=w.MinSavedStep?1:2),this.topPanel.getChild("btnRedo").gotoAndStop(w.SaveStepId!=w.MaxSavedStep?1:2)},w.prototype.undo=function(){w.SaveStepId!=w.MinSavedStep&&(w.SaveStepId=(w.SaveStepId-1+w.NumSavedSteps)%w.NumSavedSteps,this.loadCurSavedStep()),!this.mdown&&this.game.input.activePointer.isDown&&(this.mdown=!0)},w.prototype.redo=function(){w.SaveStepId!=w.MaxSavedStep&&(w.SaveStepId=(w.SaveStepId+1)%w.NumSavedSteps,this.loadCurSavedStep()),!this.mdown&&this.game.input.activePointer.isDown&&(this.mdown=!0)},w.getTileMCStr=function(e,t,i){var n=w.isSetTile(e,t,i+1)?1:0,r=w.isSetTile(e,t+1,i)?1:0,o=w.isSetTile(e,t,i-1)?1:0,a=w.isSetTile(e,t-1,i)?1:0;return w.tileMCs[8*a+4*o+2*r+n]},w.prototype.OKMC=function(e,t,i){return e.visible&&e.pointSelects(t,i)},w.prototype.okPutClick=function(e,t){var i=!0;return(this.OKMC(this.activeButtons,e,t)||this.OKMC(this.passiveButtons,e,t)||this.OKMC(this.decorButtons,e,t)||this.OKMC(this.topPanel.getChild("active"),e,t)||this.OKMC(this.topPanel.getChild("passive"),e,t)||this.OKMC(this.topPanel.getChild("decor"),e,t)||this.OKMC(this.topPanel.getChild("block"),e,t))&&(i=!1),i||(this.mdown=!0),i},w.isSetTile=function(e,t,i){if(t<0||i<0||15<=t||20<=i)return!0;var n=Math.floor((20*t+i)/4),r=e.charAt(n);return 0<(this.tn.indexOf(r)&1<<i%4)},w.prototype.setTile=function(e,t,i,n){if(!(t<0||i<0||15<=t||20<=i)){var r=e.tiles,o=Math.floor((20*t+i)/4),a=r.charAt(o),s=(w.tn.indexOf(a)&~(1<<i%4))+(n<<i%4);e.tiles=r.substring(0,o)+w.tn.charAt(s)+r.substring(o+1)}},w.prototype.updateTiles=function(e){for(var t=w.ObjNameToDepth("TileVisual");0<this.groupSprites[t].children.length;){var i=this.groupSprites[t].children[0];i.parent.removeChild(i)}for(var n=0;n<15;n++)for(var r=0;r<20;r++)if(w.isSetTile(e,n,r)){var o=w.getTileMCStr(e,n,r);this.groupSprites[t].addChild(new MovieClip(o,35*r,35*(n+1)))}},w.prototype.removeAllObjects=function(){if(w._objects)for(var e=w._objects.length,t=0;t<e;t++){var i=w._objects[e-t-1];"LevelText"!=i.type&&this.deleteObj(i)}},w.prototype.toggleGrid=function(){this.gridMC.visible?(this.gridMC.visible=!1,this.topPanel.getChild("grid").gotoAndStop(1)):(this.gridMC.visible=!0,this.topPanel.getChild("grid").gotoAndStop(2))},w.prototype.createNewLevel=function(){this.hidePublishDialogue(),this.clear()},w.prototype.showPublishDialogue=function(){this.hideAll(),this.destroyPreviousPut(),this.disableEditButtons(),this._black.visible=!0;var e=JSON.stringify(LevelLoader.GetNextLevel()),t=JSON.stringify(w.SavedSteps[w.SaveStepId]);LevelLoader.GetNextLevel()&&e==t?(this.publish.visible=!0,Game.SetEnterButton(this.publish.getChild("close"))):(this.publishNo.visible=!0,Game.SetEnterButton(this.publishNo.getChild("close")))},w.prototype.hidePublishDialogue=function(){this.enableEditButtons(),this._black.visible=!1,this.publish.visible=!1,Game.SetEnterButton(null)},w.prototype.hidePublishNoDialogue=function(){this.enableEditButtons(),this._black.visible=!1,this.publishNo.visible=!1,Game.SetEnterButton(null)},w.prototype.disableEditButtons=function(){for(var e=0;e<this.editButtons.length;e++)this.editButtons[e].input.enabled=!1;this.inputText.input.enabled=!1},w.prototype.enableEditButtons=function(){for(var e=0;e<this.editButtons.length;e++)this.editButtons[e].input.enabled=!0;this.inputText.input.enabled=!0},w.prototype.hideClearDialogue=function(){this.enableEditButtons(),this.clearDLG.visible=!1,Game.SetEnterButton(null)},w.prototype.showClearDialogue=function(){this.hideAll(),this.destroyPreviousPut(),this.disableEditButtons(),this.clearDLG.visible=!0,Game.SetEnterButton(this.clearDLG.getChild("close"))},w.prototype.hideHelpDialogue=function(){this.enableEditButtons(),this._black.visible=!1,this.helpDLG.visible=!1,Game.SetEnterButton(null)},w.prototype.showHelpDialogue=function(){this.hideAll(),this.destroyPreviousPut(),this.disableEditButtons(),this._black.visible=!0,this.helpDLG.visible=!0,Game.SetEnterButton(this.helpDLG.getChild("close"))},w.prototype.clear=function(e){void 0===e&&(e=null),this.destroyPreviousPut(),this.removeAllObjects(),e||(e=w.defaultObjects),w._objects=[];for(var t=0;t<e.length;t++){var i=e[t];w._objects.push(JSON.parse(JSON.stringify(i)))}this.loadCurrentObjects()},w.prototype.getFirstObjectByType=function(e){for(var t=0;t<w._objects.length;t++)if(w._objects[t].type==e)return w._objects[t];return null},w.prototype.loadCurrentObjects=function(){for(var e=0;e<w._objects.length;e++){var t=w._objects[e];"tiles"==t.type?(this.tileObj=t,this.updateTiles(t.tiles)):"LevelText"==t.type?this.inputText.setText(t.text):this.addObject(w._objects[e],null)}},w.prototype.create=function(){var e=this;MovieClip.DownButton=!0,SoundManager.getInstance().stopSound("GameMusic"),this.cnt=0,Game._ce=CitrusEngine.Init(),this.mClicksX=new Array,this.mClicksY=new Array,this.numClicks=0,this.moveSpecial=null,this.levelTextMC=null,(Game.editState=this).levelMC=new MovieClip,this.game.world.addChild(this.levelMC),this.bg=new MovieClip("Background1Graphics"),this.levelMC.addChild(this.bg),this.groupSprites=new Array;for(var t=0;t<7;t++)this.groupSprites[t]=new MovieClip(null,0,0),this.levelMC.addChild(this.groupSprites[t]);this.gridMC=new MovieClip("cmcGrid",0,0,"grid","WinningObjects",WinningObjectsLayouts.data),this.gridMC.visible=!1,this.game.world.addChild(this.gridMC),this.putX=new MovieClip("cmcX",0,0,"x","WinningObjects",WinningObjectsLayouts.data),this.putRotCW=new MovieClip("cmcRotCW",0,0,"rotCW","WinningObjects",WinningObjectsLayouts.data),this.putRotCW.centerInputRect(),this.putRotCW.makeButton(this.rotateSelected,!1,this,!1),this.putFlipH=new MovieClip("cmcFlipH",0,0,"flipH","WinningObjects",WinningObjectsLayouts.data),this.putFlipH.centerInputRect(),this.putFlipH.makeButton(this.flipHSelected,!1,this,!1),this.putDirs=new MovieClip("cmcPutDirs",0,0,"dirs","WinningObjects",WinningObjectsLayouts.data),this.putColors=new MovieClip("cmcColors",0,0,"colors","WinningObjects",WinningObjectsLayouts.data),this.put1=new MovieClip("cmcPut1",0,0,"put1","WinningObjects",WinningObjectsLayouts.data),this.put2=new MovieClip("cmcPut2",0,0,"put2","WinningObjects",WinningObjectsLayouts.data),this.putEdge12=new MovieClip("cmcPath",0,0,"putEdge12","WinningObjects",WinningObjectsLayouts.data),this.put1.centerInputRect(),this.put2.centerInputRect(),this.put1.makeButton(this.cam1,!1,this,!1),this.put2.makeButton(this.cam2,!1,this,!1);for(t=0;t<6;t++){var i=this.putColors.getChild("col"+(t+1));i.makeButton(i.colorClick,!1,i,!1),i.centerInputRect()}this.topPanel=new MovieClip("cmcEditPanel",0,0,"topPanel","WinningObjects",WinningObjectsLayouts.data),this.activeButtons=new MovieClip("cmcActiveButtons",0,0,"activeButtons","WinningObjects",WinningObjectsLayouts.data),this.passiveButtons=new MovieClip("cmcPassiveButtons",0,0,"passiveButtons","WinningObjects",WinningObjectsLayouts.data),this.decorButtons=new MovieClip("cmcDecorButtons",0,0,"decorButtons","WinningObjects",WinningObjectsLayouts.data),this.hideAll(),this.clearDLG=new MovieClip("cmcClearDialogue",Game.WIDTH/2,Game.HEIGHT/2,"clearDLG","WinningObjects",WinningObjectsLayouts.data),this.clearDLG.getChild("yes").makeButton(function(){e.clear(),e.hideClearDialogue()},!1,this,!1),this.clearDLG.getChild("yes").centerInputRect(),this.clearDLG.getChild("no").makeButton(this.hideClearDialogue,!1,this,!1),this.clearDLG.getChild("no").centerInputRect(),this.clearDLG.getChild("close").makeButton(this.hideClearDialogue,!1,this,!1),this.clearDLG.getChild("close").centerInputRect(),this.clearDLG.visible=!1,MovieClip.DownButton=!1,this.publish=new MovieClip("cmcPublishDialogue",Game.WIDTH/2,0,"publish","WinningObjects",WinningObjectsLayouts.data),this.publish.getChild("close").makeButton(this.hidePublishDialogue,!1,this,!1),this.publish.getChild("close").centerInputRect(),this.publish.getChild("copyURL").makeButton(function(){LevelLoader.copyURL(e.publishURLinputText)},!1,this,!1),this.publish.getChild("copyURL").centerInputRect(),this.publish.getChild("mail").makeButton(LevelLoader.shareMail,!1,this,!1),this.publish.getChild("mail").centerInputRect(),this.publish.getChild("reddit").makeButton(LevelLoader.shareReddit,!1,this,!1),this.publish.getChild("reddit").centerInputRect(),this.publish.getChild("tumblr").makeButton(LevelLoader.shareTumblr,!1,this,!1),this.publish.getChild("tumblr").centerInputRect(),this.publish.getChild("twitter").makeButton(LevelLoader.shareTwitter,!1,this,!1),this.publish.getChild("twitter").centerInputRect(),this.publish.getChild("facebook").makeButton(LevelLoader.shareFacebook,!1,this,!1),this.publish.getChild("facebook").centerInputRect(),this.publish.getChild("editLevel").makeButton(this.hidePublishDialogue,!1,this,!1),this.publish.getChild("editLevel").centerInputRect(),this.publish.getChild("createNewLevel").makeButton(this.createNewLevel,!1,this,!1),this.publish.getChild("createNewLevel").centerInputRect(),this.publish.getChild("playYourLevel").makeButton(this.testLevel,!1,this,!1),this.publish.getChild("playYourLevel").centerInputRect(),this.publish.visible=!1,MovieClip.DownButton=!0,this.publishURLinputText=Game.getGame().add.text(-225,229,LevelLoader.ShortenURL(),LevelLoader.PublishURLStyle),this.publish.addChild(this.publishURLinputText),this.publish.addChild(this.publish.getChild("copyURL")),this.publishNo=new MovieClip("cmcNoteDialogue",Game.WIDTH/2,Game.HEIGHT/2,"publishNo","WinningObjects",WinningObjectsLayouts.data),this.publishNo.getChild("close").makeButton(this.hidePublishNoDialogue,!1,this,!1),this.publishNo.getChild("close").centerInputRect(),this.publishNo.visible=!1,this.helpDLG=new MovieClip("cmcHelpEdit",Game.WIDTH/2,0,"helpDLG","WinningObjects",WinningObjectsLayouts.data),this.helpDLG.getChild("close").makeButton(this.hideHelpDialogue,!1,this,!1),this.helpDLG.getChild("close").centerInputRect(),this.helpDLG.visible=!1,this.helpDLG.getChild("content").inputEnabled=!0,this.helpDLG.getChild("content").gotoAndStop(Game.Touch()?2:1),this.axisX=new MovieClip("cmcAxis",0,0,"axisX","WinningObjects",WinningObjectsLayouts.data),this.axisY=new MovieClip("cmcAxis",0,0,"axisY","WinningObjects",WinningObjectsLayouts.data),this.axisY.degrees=90,this.game.world.addChild(this.axisX),this.game.world.addChild(this.axisY),this.game.world.addChild(this.putRotCW),this.game.world.addChild(this.putFlipH),this.game.world.addChild(this.putDirs),this.game.world.addChild(this.putColors),this.game.world.addChild(this.putEdge12),this.game.world.addChild(this.put1),this.game.world.addChild(this.put2),this.game.world.addChild(this.activeButtons),this.game.world.addChild(this.passiveButtons),this.game.world.addChild(this.decorButtons),this.game.world.addChild(this.topPanel),this.inputText=window.Game.getGame().add.inputField(this.topPanel.getChild("caption").x-66,this.topPanel.getChild("caption").y-4,{backgroundColor:"#0B4938",borderColor:"#0B4938",font:"14px Arial",fill:"#FFF",max:15,cursorColor:"#FFF",textAlign:"center",width:132}),this.inputText.focusIn.add(this.inputTextFocusIn,this),this.inputText.focusOut.add(this.updateText,this),this.resettingInputText=!1,this._black=Game.getGame().add.graphics(0,0),this._black.beginFill(0),this._black.drawRect(0,0,Game.WIDTH,Game.HEIGHT),this._black.endFill(),this._black.visible=!1,this._black.alpha=.7,this.game.world.addChild(this.clearDLG),this.game.world.addChild(this.helpDLG),this.game.world.addChild(this.publishNo),this.game.world.addChild(this.publish),w._objects?this.loadCurrentObjects():this.clear(),this.topPanel.getChild("active").makeButton(this.clickActive,!1,this,!1),this.topPanel.getChild("active").centerInputRect(),this.topPanel.getChild("active").frameOffset=Game.Touch()?2:0,this.topPanel.getChild("passive").makeButton(this.clickPassive,!1,this,!1),this.topPanel.getChild("passive").centerInputRect(),this.topPanel.getChild("passive").frameOffset=Game.Touch()?2:0,this.topPanel.getChild("decor").makeButton(this.clickDecor,!1,this,!1),this.topPanel.getChild("decor").centerInputRect(),this.topPanel.getChild("decor").frameOffset=Game.Touch()?2:0,this.topPanel.getChild("block").makeButton(this.clickBlock,!1,this,!1),this.topPanel.getChild("block").centerInputRect(),this.topPanel.getChild("block").frameOffset=Game.Touch()?2:0,this.topPanel.getChild("btnTrash").makeButton(this.deleteSelected,!1,this,!1),this.topPanel.getChild("btnTrash").centerInputRect(),this.topPanel.getChild("btnTrash").frameOffset=Game.Touch()?1:0,this.topPanel.getChild("btnTest").makeButton(this.testLevel,!1,this,!0),this.topPanel.getChild("btnTest").centerInputRect(),this.topPanel.getChild("btnTest").frameOffset=Game.Touch()?1:0,this.topPanel.getChild("btnClear").makeButton(this.showClearDialogue,!1,this,!1),this.topPanel.getChild("btnClear").centerInputRect(),this.topPanel.getChild("grid").makeButton(this.toggleGrid,!1,this,!1),this.topPanel.getChild("grid").centerInputRect(),this.topPanel.getChild("grid").frameOffset=Game.Touch()?2:0,this.topPanel.getChild("help").makeButton(this.showHelpDialogue,!1,this,!1),this.topPanel.getChild("help").centerInputRect(),this.topPanel.getChild("share").makeButton(this.showPublishDialogue,!1,this,!1),this.topPanel.getChild("share").centerInputRect(),this.topPanel.getChild("btnUndo").makeButton(this.undo,!1,this,!1),this.topPanel.getChild("btnUndo").centerInputRect(),this.topPanel.getChild("btnUndo").frameOffset=Game.Touch()?2:0,this.topPanel.getChild("btnRedo").makeButton(this.redo,!1,this,!1),this.topPanel.getChild("btnRedo").centerInputRect(),this.topPanel.getChild("btnRedo").frameOffset=Game.Touch()?2:0,this.editButtons=[this.topPanel.getChild("active"),this.topPanel.getChild("passive"),this.topPanel.getChild("decor"),this.topPanel.getChild("block"),this.topPanel.getChild("btnTrash"),this.topPanel.getChild("btnTest"),this.topPanel.getChild("btnClear"),this.topPanel.getChild("grid"),this.topPanel.getChild("btnUndo"),this.topPanel.getChild("btnRedo"),this.topPanel.getChild("help"),this.topPanel.getChild("share")],this.activeButtons.getChild("minimize").makeButton(this.hideAll,!1,this,!1),this.passiveButtons.getChild("minimize").makeButton(this.hideAll,!1,this,!1),this.decorButtons.getChild("minimize").makeButton(this.hideAll,!1,this,!1);t=0;for(t=0;t<this.activeButtons.children.length;t++){(n=this.activeButtons.children[t])&&0==n.mc.indexOf("cbtn")&&n.makeButton(n.editClick,!1,n,!1)}for(t=0;t<this.passiveButtons.children.length;t++){(n=this.passiveButtons.children[t])&&0==n.mc.indexOf("cbtn")&&n.makeButton(n.editClick,!1,n,!1)}for(t=0;t<this.decorButtons.children.length;t++){var n;(n=this.decorButtons.children[t])&&0==n.mc.indexOf("cbtn")&&n.makeButton(n.editClick,!1,n,!1)}this.game.world.addChild(this.putX),this.changeState(w.NOTHING),this.saveCurrentStep(),this.adjustUndoRedoButtons(),MovieClip.DownButton=!1},w.StripMCs=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.hasOwnProperty("mc")&&delete i.mc}},w.prototype.testLevel=function(){this.destroyPreviousPut(),this.photo(),w.StripMCs(w._objects),e.LevelState.Objects=w._objects,Game.stateSwitcher.switchToPlay()},w.prototype.photo=function(){var e=new Phaser.RenderTexture(Game.getGame(),300,225,null,PIXI.scaleModes.LINEAR);this.levelMC.scaleX=this.levelMC.scaleY=300/Game.WIDTH,e.renderXY(this.levelMC,0,0,!0),w.Thumb64=e.getBase64(),this.levelMC.scaleX=this.levelMC.scaleY=1},w.GetLevelText=function(){for(var e=0;e<w._objects.length;e++){var t=w._objects[e];if("LevelText"==t.type)return t}return null},w.prototype.inputTextFocusIn=function(){this.inputText.setText2(""),w.TextFocused=!0},w.prototype.updateText=function(){var e=w.GetLevelText();e&&(objects.LevelText.updateText(e.mc,null,this.inputText.value),e.text=this.inputText.value),w.TextFocused=!1},w.prototype.recordClick=function(){this.mClicksX[this.numClicks]=this.MouseX(),this.mClicksY[this.numClicks]=this.MouseY(),this.numClicks++},w.Deletable=function(e){return!(0==e.indexOf("Hustler")||0==e.indexOf("Bouncer")||0<=e.indexOf("Text"))},w.Rotatable=function(e){return 0<=e.indexOf("Plank")||0<=e.indexOf("PushButton")||0<=e.indexOf("Trigger")||0<=e.indexOf("Door")},w.FlipHable=function(e){return 0<=e.indexOf("Decor")||0<=e.indexOf("Turrel")||0<=e.indexOf("Toilet")},w.Colorable=function(e){return 0<=e.indexOf("Door")||0<=e.indexOf("Elevator")||0<=e.indexOf("PushButton")||0<=e.indexOf("Trigger")},w.prototype.setSelected=function(e){this.changeState(w.SELECTED);var t=(this.selectedObject=e).mc;this.outline=t.drawOutline(),this.updateIcons()},w.prototype.updateIcons=function(){if(this.selectedObject){var e=this.selectedObject,t=e.mc;if(w.Deletable(e.type)&&(this.topPanel.getChild("btnTrash").visible=!0),w.Rotatable(e.type)){var i=t.getMcBounds();this.putRotCW.visible=!0,this.putRotCW.x=t.x+i.x+i.width*t.scaleX+14,this.putRotCW.y=t.y+i.y-14}if(w.FlipHable(e.type)){i=t.getMcBounds();this.putFlipH.visible=!0,this.putFlipH.x=t.x+t.getOffsetToCenterX()*t.scaleX,this.putFlipH.y=t.y+i.y-14}if(w.Colorable(e.type)){i=t.getMcBounds();this.putColors.visible=!0,this.putColors.x=t.x+t.getOffsetToCenterX()*t.scaleX,this.putColors.y=t.y+i.y+i.height+14;for(var n=0;n<6;n++)this.putColors.getChild("col"+(n+1)).gotoAndStop(n+1);this.selectedObject.color?this.putColors.getChild("col"+this.selectedObject.color).gotoAndStop(this.selectedObject.color+6):this.putColors.getChild("col1").gotoAndStop(7),t.getChild("putElevator")&&(1<t.getChild("putElevator").y&&(this.putColors.y-=i.height+28),this.putDirs.visible=!0,this.putDirs.x=t.x+t.getChild("putElevator").x,this.putDirs.y=t.y+t.getChild("putElevator").y)}0<=e.type.indexOf("Camera")&&(this.put1.visible=this.put2.visible=this.putEdge12.visible=!0,this.moveSpecial||this.updateCam12(this.selectedObject,e.rot1,e.rot2))}},w.prototype.updateCam12=function(e,t,i){var n=t*Math.PI/180,r=i*Math.PI/180+n;this.put1.x=120*Math.cos(n)+e.mc.x,this.put1.y=120*Math.sin(n)+e.mc.y,this.put2.x=140*Math.cos(r)+e.mc.x,this.put2.y=140*Math.sin(r)+e.mc.y;var o=this.put2.x-this.put1.x,a=this.put2.y-this.put1.y;this.putEdge12.scaleX=Math.sqrt(o*o+a*a)/20,this.putEdge12.x=this.put1.x,this.putEdge12.y=this.put1.y,this.putEdge12.degrees=Math.atan2(a,o)/Math.PI*180,e.mc.getChild("camera1").degrees=t+180,e.mc.getChild("camera2").degrees=t+i+180,e.mc.getChild("cross1").x=130*Math.cos(n),e.mc.getChild("cross1").y=130*Math.sin(n),e.mc.getChild("cross2").x=130*Math.cos(r),e.mc.getChild("cross2").y=130*Math.sin(r);var s=e.mc.getChild("ray1");s.x=-18.55*Math.cos(n+Math.PI),s.y=-18.55*Math.sin(n+Math.PI),s.degrees=e.mc.getChild("camera1").degrees,s.scaleX=111.45/101;var l=e.mc.getChild("ray2");l.x=-18.55*Math.cos(r+Math.PI),l.y=-18.55*Math.sin(r+Math.PI),l.degrees=e.mc.getChild("camera2").degrees,l.scaleX=111.45/101},w.prototype.deleteSelected=function(){this.deleteObj(this.selectedObject),this.changeState(w.NOTHING),this.saveCurrentStep()},w.prototype.rotateSelected=function(){if(this.selectedObject){var e=Math.round(this.selectedObject.mc.degrees);e+=90,e%=360,this.selectedObject.mc.degrees=Math.round(e),this.mdown=!0,this.bMoving=!1,this.updateSelectedFromMC(),this.updateIcons()}},w.prototype.flipHSelected=function(){if(this.selectedObject){var e=this.selectedObject.mc;e.scaleX*=-1,e.x-=e.getOffsetToCenterX()*e.scaleX*2,this.updateSelectedFromMC(),this.mdown=!0,this.bMoving=!1,this.updateIcons()}},w.prototype.color=function(e,t){e.color=t,e.mc&&(0<=e.mc.mc.indexOf("Elevator")?(e.mc.getChild("front").gotoAndStop(t),e.mc.getChild("putElevator").gotoAndStop(t)):0<=e.mc.mc.indexOf("Door")?(e.mc.gotoAndStop(t),e.mc.getChild("putDoor").getChild("door").gotoAndStop(t),e.mc.getChild("putDoor").getChild("glassDoor").gotoAndStop(t)):0<=e.mc.mc.indexOf("PushButton")?e.mc.getChild("top").gotoAndStop(t):0<=e.mc.mc.indexOf("Trigger")&&(e.mc.getChild("handle").gotoAndStop(t),e.mc.getChild("base").gotoAndStop(t)))},w.prototype.cam1=function(){this.mdown=!0},w.prototype.cam2=function(){this.mdown=!0},w.prototype.colorClick=function(e){this.selectedObject&&(this.mdown=!0,this.bMoving=!1,this.color(this.selectedObject,e),this.updateIcons())},w.prototype.updateSelectedFromMC=function(){this.selectedObject.x=this.selectedObject.mc.x,this.selectedObject.y=this.selectedObject.mc.y,this.selectedObject.mc.scaleX<0?this.selectedObject.flippedHorizontally=!0:this.selectedObject.flippedHorizontally&&(this.selectedObject.flippedHorizontally=!1);var e=Math.round(this.selectedObject.mc.degrees);(0!=e||this.selectedObject.degrees&&e!=this.selectedObject.degrees)&&(this.selectedObject.degrees=e)},w.prototype.destroyPreviousPut=function(){this.putSprite&&this.putSprite.parent&&this.putSprite.parent.removeChild(this.putSprite),this.putSprite=null,this.putX.visible=!1,this.putRotCW.visible=!1,this.putFlipH.visible=!1,this.putColors.visible=!1,this.putDirs.visible=!1,this.put1.visible=!1,this.put2.visible=!1,this.putEdge12.visible=!1,this.axisX.visible=!1,this.axisY.visible=!1,this.topPanel.getChild("btnTrash").visible=!1,this.outline&&this.outline.parent&&this.outline.parent.removeChild(this.outline),this.outline=null,this.selectedObject=null,this.numClicks=0,this.currentState=w.NOTHING,this.bMoving=!1,this.tileDragging=!1},w.prototype.changeState=function(e){this.destroyPreviousPut(),this.currentState=e},w.prototype.paletteClick=function(e){this.mdown=!0,this.canHaveMore(e.mc)&&(this.changeState(w.PUT),this.putSprite=w.BtnToMC(e.mc),this.putSprite.alpha=.5,this.world.addChild(this.putSprite))},w.prototype.hideAll=function(){this.hidePassive(),this.hideActive(),this.hideDecor(),this.hideBlock(),!this.mdown&&this.game.input.activePointer.isDown&&(this.mdown=!0)},w.prototype.showBlock=function(){this.topPanel.getChild("block").currentFrameNumber=2},w.prototype.hideBlock=function(){this.topPanel.getChild("block").currentFrameNumber=1},w.prototype.showDecor=function(){this.topPanel.getChild("decor").currentFrameNumber=2,this.decorButtons.visible=!0},w.prototype.hideDecor=function(){this.topPanel.getChild("decor").currentFrameNumber=1,this.decorButtons.visible=!1},w.prototype.showPassive=function(){this.topPanel.getChild("passive").currentFrameNumber=2,this.passiveButtons.visible=!0},w.prototype.hidePassive=function(){this.topPanel.getChild("passive").currentFrameNumber=1,this.passiveButtons.visible=!1},w.prototype.showActive=function(){this.topPanel.getChild("active").currentFrameNumber=2,this.activeButtons.visible=!0},w.prototype.hideActive=function(){this.topPanel.getChild("active").currentFrameNumber=1,this.activeButtons.visible=!1},w.prototype.clickBlock=function(){1==this.topPanel.getChild("block").currentFrameNumber?(this.hideAll(),this.showBlock(),this.paletteClick(this.topPanel.getChild("block"))):(this.changeState(w.NOTHING),this.hideAll())},w.prototype.clickDecor=function(){1==this.topPanel.getChild("decor").currentFrameNumber?(this.hideAll(),this.showDecor(),this.changeState(w.NOTHING)):this.hideAll()},w.prototype.clickPassive=function(){1==this.topPanel.getChild("passive").currentFrameNumber?(this.hideAll(),this.showPassive(),this.changeState(w.NOTHING)):this.hideAll()},w.prototype.clickActive=function(){1==this.topPanel.getChild("active").currentFrameNumber?(this.hideAll(),this.showActive(),this.changeState(w.NOTHING)):this.hideAll()},w.prototype.mouseDown=function(){},w.prototype.MouseX=function(){return Game.MX(this.game.input.activePointer.clientX)},w.prototype.MouseY=function(){return Game.MY(this.game.input.activePointer.clientY)},w.DT=function(e){return Math.floor(e/35)},w.prototype.update=function(){if(b.prototype.update.call(this),1==this.cnt&&b.prototype.create.call(this),this.cnt++,Game.frame++,!Game.ProcessEnter()&&!(this.publish.visible||this.publishNo.visible||this.clearDLG.visible||this.helpDLG.visible))if(Input.getInstance().justDid("testLevel"))this.testLevel();else{if(Input.getInstance().justDid("active"))this.clickActive();else if(Input.getInstance().justDid("passive"))this.clickPassive();else if(Input.getInstance().justDid("decor"))this.clickDecor();else if(Input.getInstance().justDid("block"))this.clickBlock();else if(Input.getInstance().justDid("grid"))this.toggleGrid();else if(Input.getInstance().justDid("escape"))this.changeState(w.NOTHING);else{if(Input.getInstance().justDid("undo"))return void this.undo();if(Input.getInstance().justDid("redo"))return void this.redo()}var e=!1;if(this.game.input.activePointer.isUp&&this.mdown&&(e=!(this.mdown=!1)),this.currentState==w.NOTHING||this.currentState==w.SELECTED){if(!this.mdown&&this.game.input.activePointer.isDown&&this.okPutClick(this.MouseX(),this.MouseY())){var t;this.mdown=!0;var i=null;for(t=0;t<w._objects.length;t++){var n=w._objects[t],r=n.mc;n.mc instanceof MovieClip&&r.pointSelects(this.MouseX(),this.MouseY())&&(!i||w.ObjNameToDepth(n.type)>=w.ObjNameToDepth(i.type))&&(i=n)}i?(this.changeState(w.SELECTED),this.setSelected(i)):this.changeState(w.NOTHING)}}else if(this.currentState==w.PUT){this.putSprite.x=this.MouseX()-this.putSprite.getOffsetToCenterX()*this.putSprite.scaleX,this.putSprite.y=this.MouseY()-this.putSprite.getOffsetToCenterY()*this.putSprite.scaleY;var o=w.DT(this.MouseX()),a=w.DT(this.MouseY());if("singleTile"==this.putSprite.mc){this.putSprite.x=35*w.DT(this.putSprite.x+17.5),this.putSprite.y=35*w.DT(this.putSprite.y+17.5),this.putX.x=35*w.DT(this.MouseX())+17.5,this.putX.y=35*w.DT(this.MouseY())+17.5;var s=this.putX.visible,l=this.mdown&&this.removingTiles||!this.mdown&&w.isSetTile(this.tileObj.tiles,a,o);l||(this.putX.visible=!1),l&&!s&&(this.putX.parent&&this.putX.parent.removeChild(this.putX),this.world.addChild(this.putX),this.putX.visible=!0)}else this.putX.visible=!1;if(!this.mdown&&this.game.input.activePointer.isDown&&this.okPutClick(this.MouseX(),this.MouseY()))if(this.mdown=!0,"singleTile"==this.putSprite.mc)w.isSetTile(this.tileObj.tiles,a,o)?(this.setTile(this.tileObj,a,o,0),this.removingTiles=!0):(this.setTile(this.tileObj,a,o,1),this.removingTiles=!1),this.tileDragging=!0,this.updateTiles(this.tileObj.tiles);else{var p=this.game.input.keyboard.isDown(Phaser.Keyboard.SHIFT),h=this.putSprite.mc,u=this.putSprite;u.alpha=1,this.destroyPreviousPut();var c={type:w.PutMcNameToObjName(u.mc),x:u.x,y:u.y};this.addObject(c,u),p&&this.canHaveMore(h)?(this.changeState(w.PUT),this.putSprite=new MovieClip(h),this.putSprite.alpha=.5,this.world.addChild(this.putSprite)):this.setSelected(c)}else this.mdown&&"singleTile"==this.putSprite.mc&&this.tileDragging&&(this.removingTiles&&w.isSetTile(this.tileObj.tiles,a,o)?(this.setTile(this.tileObj,a,o,0),this.updateTiles(this.tileObj.tiles)):this.removingTiles||w.isSetTile(this.tileObj.tiles,a,o)||(this.setTile(this.tileObj,a,o,1),this.updateTiles(this.tileObj.tiles)))}if(this.currentState==w.SELECTED){var d=this.selectedObject,_=this.selectedObject.mc;if(Game._ce.input.justDid("delete")&&w.Deletable(d.type))this.deleteSelected();else if(this.bMoving){var y=this.MouseX()-this.mClicksX[0],m=this.MouseY()-this.mClicksY[0];if(this.mdown)if(this.moveSpecial&&"putElevator"==this.moveSpecial.name){var f=w.getAxisX(y+d.eleX,m+d.eleY),x=w.getAxisY(y+d.eleX,m+d.eleY);this.moveSpecial.x=f,this.moveSpecial.y=x,w.AdjustPutVector(_.getChild("putVector"),f,x)}else if(this.moveSpecial==this.put1)this.updateCam12(d,Math.atan2(this.MouseY()-d.y,this.MouseX()-d.x)/Math.PI*180,d.rot2);else if(this.moveSpecial==this.put2){var v=Math.atan2(this.MouseY()-d.y,this.MouseX()-d.x)/Math.PI*180-d.rot1;(357<(v=(v%360+360)%360)||v<3)&&(v=0),this.updateCam12(d,d.rot1,v)}else this.selectedObject.mc.x=this.selectedObject.x+y,this.selectedObject.mc.y=this.selectedObject.y+m;else{if(this.moveSpecial&&"putElevator"==this.moveSpecial.name){f=w.getAxisX(y+d.eleX,m+d.eleY),x=w.getAxisY(y+d.eleX,m+d.eleY);_.getChild("putElevator").x=f,_.getChild("putElevator").y=x,d.eleX=f,d.eleY=x,w.AdjustPutVector(_.getChild("putVector"),f,x)}else if(this.moveSpecial==this.put1){var z=Math.round(Math.atan2(this.MouseY()-d.y,this.MouseX()-d.x)/Math.PI*180);d.rot1=(z%360+360)%360,this.updateCam12(d,d.rot1,d.rot2)}else if(this.moveSpecial==this.put2){var g=Math.round(Math.atan2(this.MouseY()-d.y,this.MouseX()-d.x)/Math.PI*180)-d.rot1;d.rot2=(g%360+360)%360,(357<d.rot2||d.rot2<3)&&(d.rot2=0),this.updateCam12(d,d.rot1,d.rot2)}else this.updateSelectedFromMC();this.axisX.visible=this.axisY.visible=!1,this.bMoving=!1,this.moveSpecial=null,this.numClicks=0}this.updateIcons()}else this.mdown&&0<=this.selectedObject.type.indexOf("Camera")&&0==this.numClicks&&this.put1.pointSelects(this.MouseX(),this.MouseY())?(this.recordClick(),this.bMoving=!0,this.moveSpecial=this.put1):this.mdown&&0<=this.selectedObject.type.indexOf("Camera")&&0==this.numClicks&&this.put2.pointSelects(this.MouseX(),this.MouseY())?(this.recordClick(),this.bMoving=!0,this.moveSpecial=this.put2):this.mdown&&this.selectedObject.mc.pointSelects(this.MouseX(),this.MouseY())&&0==this.numClicks&&(this.recordClick(),this.bMoving=!0,this.moveSpecial=null,0<=this.selectedObject.type.indexOf("Elevator")&&(_.getChild("putElevator").pointSelects(this.MouseX()-_.x,this.MouseY()-_.y)&&d.eleX&&d.eleY||this.putDirs.pointSelects(this.MouseX(),this.MouseY()))&&(this.moveSpecial=_.getChild("putElevator"),this.axisX.visible=this.axisY.visible=!0,this.axisX.y=d.y,this.axisY.x=d.x))}e&&this.saveCurrentStep()}},w.prototype.numObjectsStartingWith=function(e){for(var t=0,i=0;i<w._objects.length;i++)0==w._objects[i].type.indexOf(e)&&t++;return t},w.prototype.canHaveMore=function(e){return 0==e.indexOf("Exit")||0==e.indexOf("cbtnExit")?this.numObjectsStartingWith("Exit")<1:0!=e.indexOf("Burger")&&0!=e.indexOf("cbtnBags")||this.numObjectsStartingWith("Burger")<3},w.AdjustPutVector=function(e,t,i){e.visible=!0;var n=Math.max(Math.abs(t),Math.abs(i));n<5?e.visible=!1:(e.getChild("path").scaleX=n/20,e.getChild("trig").x=n,e.degrees=5<t?0:5<i?90:t<0?180:270)},w.getAxisX=function(e,t){return Math.abs(e)>Math.abs(t)&&9<Math.abs(e)?e:0},w.getAxisY=function(e,t){return Math.abs(e)>Math.abs(t)||Math.abs(t)<9?0:t},w.prototype.updateGUI=function(){var e=this.numObjectsStartingWith("Burger");this.activeButtons.getChild("bags").gotoAndStop(1+e);var t=this.numObjectsStartingWith("Exit");this.activeButtons.getChild("exit").gotoAndStop(0==t?1:2)},w.prototype.deleteObj=function(e){for(var t=0;t<w._objects.length;t++)w._objects[t]==e&&w._objects.splice(t,1);e.mc&&e.mc.parent&&e.mc.parent.removeChild(e.mc),this.updateGUI()},w.prototype.addObject=function(e,t){var i=!1;if(t||(i=!0,t=new MovieClip(w.ObjNameToPutMC(e.type))),(e.mc=t).x=e.x,t.y=e.y,(t.scaleX<0||e.flippedHorizontally)&&(t.scaleX=-1,e.flippedHorizontally=!0),(t.scaleY<0||e.flippedVertically)&&(t.scaleY=-1,e.flippedVertically=!0),e.degrees?t.degrees=e.degrees:0!=t.degrees&&(e.degrees=t.degrees),0<=e.type.indexOf("Door")){e.mc.addChild(new MovieClip("cmcPutDoorComp",0,0,"putDoor","WinningObjects",WinningObjectsLayouts.data));var n=0==e.type.indexOf("Glass");e.mc.getChild("putDoor").getChild("glassDoor").visible=n,e.mc.getChild("putDoor").getChild("door").visible=!n}0<=e.type.indexOf("Elevator")&&(e.eleX||(e.eleX=0),e.eleY||(e.eleY=0),0<=e.type.indexOf("BigElevator")?e.mc.addChild(new MovieClip("cmcPutBigElevator",e.eleX,e.eleY,"putElevator","WinningObjects",WinningObjectsLayouts.data)):e.mc.addChild(new MovieClip("cmcPutElevator",e.eleX,e.eleY,"putElevator","WinningObjects",WinningObjectsLayouts.data)),e.mc.getChild("putElevator").alpha=.5,e.mc.addChild(new MovieClip("cmcPutVector",0,0,"putVector","WinningObjects",WinningObjectsLayouts.data)),w.AdjustPutVector(e.mc.getChild("putVector"),e.eleX,e.eleY)),0<=e.type.indexOf("Camera")&&(e.hasOwnProperty("rot1")||(e.rot1=180),e.hasOwnProperty("rot2")||(e.rot2=0),this.updateCam12(e,e.rot1,e.rot2)),e.color&&this.color(e,e.color),i||w._objects.push(e),this.groupSprites[w.ObjNameToDepth(e.type)].addChild(t),this.updateGUI()},w.prototype.shutdown=function(){b.prototype.shutdown.call(this);for(var e=w._objects.length,t=0;t<e;++t){var i=w._objects[t].mc;i&&i.parent&&i.parent.removeChild(i)}},w.ObjNameToDepth=function(e){var t=0;return"Turrel"==e?t=6:"Trigger"==e||"PushButton"==e?t=5:"BasketBall"==e||"Toilet"==e||0<=e.indexOf("Plank")||"Monitor"==e||"Burger"==e||"Hustler"==e||"Bouncer"==e||"Guardian"==e||0<=e.indexOf("Elevator")||0<=e.indexOf("Camera")?t=4:"TileVisual"==e?t=1:0<=e.indexOf("Door")&&(t=2),t},w.ObjNameToPutMC=function(e){return"TileVisual"==e?"singleTile":"Exit"==e||"Camera"==e?e+"GraphicsComp":e+"Graphics"},w.PutMcNameToObjName=function(e){var t="TileVisual";return"singleTile"!=e&&(t=e.substring(0,e.indexOf("Graphics"))),t},w.BtnToMC=function(e){var t="HustlerGraphics",i=!1;if(0==e.indexOf("cbtnDecor8"))t="Decor8Graphics",0<=e.indexOf("Right")&&(i=!0);else if(0==e.indexOf("cbtnToilet"))t="ToiletGraphics",0<=e.indexOf("Left")&&(i=!0);else switch(e){case"cbtnBlock":t="singleTile";break;case"cbtnExit":t="ExitGraphicsComp";break;case"cbtnBags":t="BurgerGraphics";break;case"cbtnButton":t="PushButtonGraphics";break;case"cbtnCamera":t="CameraGraphicsComp";break;default:t=e.substring(4)+"Graphics"}var n=new MovieClip(t,Game.getGame().input.activePointer.worldX,Game.getGame().input.activePointer.worldY,"putSprite");return i&&(n.scaleX=-1),n},w.ObjsToLevelJSON=function(e){for(var t=new Array,i=new Array,n=new Array,r=new Array,o=new Array,a=JSON.parse(JSON.stringify(w.levelJsonHeader)),s=w.levelJsonHeader.tileset,l=new Array(20),p=0;p<e.length;p++){var h=e[p];if("tiles"!=h.type)if(0==h.type.indexOf("Hustler")||0==h.type.indexOf("Bouncer"))w.AddObjToJson(o,h,s[1]);else if(0==h.type.indexOf("Decor")||0==h.type.indexOf("LevelText"))w.AddObjToJson(t,h,s[3]);else if(0==h.type.indexOf("Exit")||0==h.type.indexOf("PushButton")||0==h.type.indexOf("Trigger")||0==h.type.indexOf("Door")||0==h.type.indexOf("Niche")||0==h.type.indexOf("GlassDoor")||0==h.type.indexOf("Elevator")||0==h.type.indexOf("BigElevator")||0==h.type.indexOf("Guardian")||0==h.type.indexOf("Camera")||0==h.type.indexOf("Turrel")||0==h.type.indexOf("Burger")){if(w.AddObjToJson(r,h,s[1]),0==h.type.indexOf("Exit")){var u={x:""+(h.x-20),y:""+(h.y-35),type:"Decor7"};w.AddObjToJson(t,u,s[3])}}else 0!=h.type.indexOf("Monitor")&&0!=h.type.indexOf("Stool")&&0!=h.type.indexOf("Plank")&&0!=h.type.indexOf("BigPlank")&&0!=h.type.indexOf("Toilet")&&0!=h.type.indexOf("BasketBall")&&0!=h.type.indexOf("Box")&&0!=h.type.indexOf("BigBox")||w.AddObjToJson(r,h,s[2]);else for(var c=h.tiles,d=0;d<15;d++)for(var _=0;_<20;_++){w.isSetTile(c,d,_)&&i.push({"@x":""+35*_,"@y":""+35*(d+1),"@width":"35","@height":"35","@gid":""+w.GetGid(s[0],w.getTileMCStr(c,d,_))});for(var y=0,m=1;_+y<20&&w.isSetTile(c,d,_+y)&&0==(l[d]&1<<_+y);)y++;if(0<y){for(var f=!0;f;){if(f=!1,d+m<15){f=!0;for(var x=_;x<_+y;x++)if(!w.isSetTile(c,d+m,x)||0<(l[d+m]&1<<x)){f=!1;break}}f&&m++}for(var v=d;v<d+m;v++)for(var z=_;z<_+y;z++)l[v]=l[v]|1<<z;n.push({"@x":""+35*_,"@y":""+35*d,"@width":""+35*y,"@height":""+35*m})}}}var g=0;return g=w.fillIds(t,g),g=w.fillIds(i,g),g=w.fillIds(n,g),g=w.fillIds(r,g),g=w.fillIds(o,g),a.objectgroup=[{"@name":"decorations",object:t},{"@name":"tiles",object:i},{"@name":"active",object:r},{"@name":"characters",object:o},{"@name":"physics",object:n}],a},w.AddObjToJson=function(e,t,i){var n={"@x":""+t.x,"@y":""+t.y,"@gid":""+w.GetGid(i,t.type)};t.degrees&&0!=t.degrees&&(n["@rotation"]=""+t.degrees),t.color&&(n["@type"]=""+t.color),(t.eleX||t.eleY)&&(1<Math.abs(t.eleX)?(w.AddJsonProp(n,"distanceX",""+Math.abs(t.eleX)),w.AddJsonProp(n,"speedX",(t.eleX<0?"-":"")+"40")):1<Math.abs(t.eleY)&&(w.AddJsonProp(n,"distanceY",""+Math.abs(t.eleY)),w.AddJsonProp(n,"speedY",(t.eleY<0?"-":"")+"40"))),"Camera"==t.type&&(w.AddJsonProp(n,"minAngle",""+(180-t.rot1)),w.AddJsonProp(n,"maxAngle",""+(180-(t.rot1+t.rot2))),w.AddJsonProp(n,"delay","1")),w.AdjustJsonObj(n,t.type,i),e.push(n),t.text&&w.AddJsonProp(n,"text",t.text),t.flippedHorizontally&&(n["@gid"]=""+(parseInt(n["@gid"])+LevelParseSystem.FLIPPED_HORIZONTALLY_MASK)),t.flippedVertically&&(n["@gid"]=""+(parseInt(n["@gid"])+LevelParseSystem.FLIPPED_VERTICALLY_MASK))},w.AddJsonProp=function(e,t,i){e.properties||(e.properties={property:new Array}),e.properties.property.push({"@name":t,"@value":i})},w.fillIds=function(e,t){for(var i=0;i<e.length;i++)e[i]["@id"]=""+t,t++;return t},w.AdjustJsonObj=function(e,t,i){parseInt(i["@firstgid"]);var n=t+("tiles"==i["@name"]?"":"Graphics"),r=n+".png";0==t.indexOf("Elevator")&&(e["@y"]=""+(parseInt(e["@y"])+2));for(var o=0;o<i.tile.length;o++){var a=i.tile[o];a.image["@source"]==r&&(0==t.indexOf("Decor")?(e["@x"]=""+(parseInt(e["@x"])+MovieClip.getSpriteSourceX(n)),e["@y"]=""+(parseInt(e["@y"])-MovieClip.getSpriteSourceY(n))):(e["@x"]=""+(parseInt(e["@x"])-parseInt(a.image["@width"])/2),e["@y"]=""+(parseInt(e["@y"])+parseInt(a.image["@height"])/2)))}},w.GetGid=function(e,t){for(var i=parseInt(e["@firstgid"]),n=t+("tiles"==e["@name"]?".png":"Graphics.png"),r=0;r<e.tile.length;r++){var o=e.tile[r];if(o.image["@source"]==n)return i+parseInt(o["@id"])}return 0},w.NOTHING=0,w.PUT=1,w.SELECTED=2,w._objects=null,w.Thumb64=null,w.DontSave=!1,w.NumSavedSteps=1e3,w.SavedSteps=[],w.SelectedId=[],w.SaveStepId=0,w.MinSavedStep=0,w.MaxSavedStep=0,w.LevelTextX=350,w.LevelTextY=22,w.defaultObjects=[{type:"Hustler",x:140,y:491},{type:"Bouncer",x:560,y:491},{type:"Exit",x:350,y:457},{type:"LevelText",x:350,y:22,text:"New Level"},{type:"tiles",tiles:"0000000000000000000000000000000000000000000000000000000000000000000000FFFFFF"}],w.tn="0123456789ABCDEF",w.tileMCs=["singleTile","platformLeft","verticalPlatformTop","tileTopLeft","platformRight","platformCenter","tileTopRight","tileTopCenter","verticalPlatformBottom","tileBottomLeft","verticalPlatformCenter","tileCenterLeft","tileBottomRight","tileBottomCenter","tileCenterRight","tileCenter"],w.TextFocused=!1,w.levelJsonHeader={"@level":"1","@version":"1.0","@tiledversion":"1.0.3","@orientation":"orthogonal","@renderorder":"right-down","@width":"20","@height":"15","@tilewidth":"35","@tileheight":"35","@nextobjectid":"136",tileset:[{"@firstgid":"1","@name":"tiles","@tilewidth":"35","@tileheight":"35","@tilecount":"16","@columns":"0",tile:[{"@id":"0",image:{"@width":"35","@height":"35","@source":"singleTile.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"platformLeft.png"}},{"@id":"2",image:{"@width":"35","@height":"35","@source":"platformCenter.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"platformRight.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"verticalPlatformTop.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"verticalPlatformCenter.png"}},{"@id":"6",image:{"@width":"35","@height":"35","@source":"verticalPlatformBottom.png"}},{"@id":"7",image:{"@width":"35","@height":"35","@source":"tileTopLeft.png"}},{"@id":"8",image:{"@width":"35","@height":"35","@source":"tileTopCenter.png"}},{"@id":"9",image:{"@width":"35","@height":"35","@source":"tileTopRight.png"}},{"@id":"10",image:{"@width":"35","@height":"35","@source":"tileCenterLeft.png"}},{"@id":"11",image:{"@width":"35","@height":"35","@source":"tileCenter.png"}},{"@id":"12",image:{"@width":"35","@height":"35","@source":"tileCenterRight.png"}},{"@id":"13",image:{"@width":"35","@height":"35","@source":"tileBottomLeft.png"}},{"@id":"14",image:{"@width":"35","@height":"35","@source":"tileBottomCenter.png"}},{"@id":"15",image:{"@width":"35","@height":"35","@source":"tileBottomRight.png"}}]},{"@firstgid":"17","@name":"active","@tilewidth":"105","@tileheight":"73","@tilecount":"18","@columns":"0",tile:[{"@id":"0",image:{"@width":"24","@height":"11","@source":"PushButtonGraphics.png"}},{"@id":"1",image:{"@width":"25","@height":"19","@source":"TriggerGraphics.png"}},{"@id":"2",image:{"@width":"20","@height":"70","@source":"DoorGraphics.png"}},{"@id":"3",image:{"@width":"20","@height":"70","@source":"GlassDoorGraphics.png"}},{"@id":"4",image:{"@width":"70","@height":"19","@source":"ElevatorGraphics.png"}},{"@id":"5",image:{"@width":"105","@height":"20","@source":"BigElevatorGraphics.png"}},{"@id":"6",image:{"@width":"70","@height":"70","@source":"ExitGraphics.png"}},{"@id":"7",image:{"@width":"63","@height":"60","@source":"BouncerGraphics.png"}},{"@id":"8",image:{"@width":"44","@height":"52","@source":"HustlerGraphics.png"}},{"@id":"9",image:{"@width":"74","@height":"73","@source":"NicheGraphics.png"}},{"@id":"10",image:{"@width":"32","@height":"22","@source":"CameraGraphics.png"}},{"@id":"11",image:{"@width":"52","@height":"53","@source":"Guardian2Graphics.png"}},{"@id":"12",image:{"@width":"60","@height":"54","@source":"GuardianGraphics.png"}},{"@id":"13",image:{"@width":"60","@height":"56","@source":"Guardian3Graphics.png"}},{"@id":"14",image:{"@width":"60","@height":"55","@source":"Guardian4Graphics.png"}},{"@id":"15",image:{"@width":"15","@height":"15","@source":"EnemyLimiterGraphics.png"}},{"@id":"16",image:{"@width":"31","@height":"34","@source":"BurgerGraphics.png"}},{"@id":"17",image:{"@width":"50","@height":"29","@source":"TurrelGraphics.png"}}]},{"@firstgid":"35","@name":"passive","@tilewidth":"210","@tileheight":"50","@tilecount":"18","@columns":"0",tile:[{"@id":"0",image:{"@width":"50","@height":"50","@source":"BigBoxGraphics.png"}},{"@id":"1",image:{"@width":"35","@height":"35","@source":"BoxGraphics.png"}},{"@id":"2",image:{"@width":"37","@height":"35","@source":"ToiletGraphics.png"}},{"@id":"3",image:{"@width":"35","@height":"35","@source":"MonitorGraphics.png"}},{"@id":"4",image:{"@width":"35","@height":"35","@source":"BasketBallGraphics.png"}},{"@id":"5",image:{"@width":"35","@height":"35","@source":"StoolGraphics.png"}},{"@id":"6",image:{"@width":"210","@height":"20","@source":"BigPlankGraphics.png"}},{"@id":"7",image:{"@width":"150","@height":"20","@source":"PlankGraphics.png"}},{"@id":"8",image:{"@width":"150","@height":"20","@source":"Plank2Graphics.png"}},{"@id":"9",image:{"@width":"100","@height":"20","@source":"Plank3Graphics.png"}},{"@id":"10",image:{"@width":"100","@height":"20","@source":"Plank4Graphics.png"}},{"@id":"11",image:{"@width":"100","@height":"20","@source":"Plank5Graphics.png"}},{"@id":"12",image:{"@width":"70","@height":"20","@source":"Plank6Graphics.png"}},{"@id":"13",image:{"@width":"70","@height":"20","@source":"Plank7Graphics.png"}},{"@id":"14",image:{"@width":"70","@height":"20","@source":"Plank8Graphics.png"}},{"@id":"15",image:{"@width":"50","@height":"20","@source":"Plank9Graphics.png"}},{"@id":"16",image:{"@width":"50","@height":"20","@source":"Plank10Graphics.png"}},{"@id":"17",image:{"@width":"50","@height":"20","@source":"Plank11Graphics.png"}}]},{"@firstgid":"53","@name":"decor","@tilewidth":"232","@tileheight":"135","@tilecount":"30","@columns":"0",tile:[{"@id":"0",image:{"@width":"180","@height":"80","@source":"LevelTextGraphics.png"}},{"@id":"1",image:{"@width":"54","@height":"20","@source":"Decor1Graphics.png"}},{"@id":"2",image:{"@width":"53","@height":"19","@source":"Decor2Graphics.png"}},{"@id":"3",image:{"@width":"33","@height":"26","@source":"Decor3Graphics.png"}},{"@id":"4",image:{"@width":"34","@height":"26","@source":"Decor4Graphics.png"}},{"@id":"5",image:{"@width":"22","@height":"31","@source":"Decor5Graphics.png"}},{"@id":"6",image:{"@width":"125","@height":"58","@source":"Decor6Graphics.png"}},{"@id":"7",image:{"@width":"38","@height":"19","@source":"Decor7Graphics.png"}},{"@id":"8",image:{"@width":"24","@height":"21","@source":"Decor8Graphics.png"}},{"@id":"9",image:{"@width":"18","@height":"22","@source":"Decor9Graphics.png"}},{"@id":"10",image:{"@width":"38","@height":"58","@source":"Decor10Graphics.png"}},{"@id":"11",image:{"@width":"19","@height":"66","@source":"Decor11Graphics.png"}},{"@id":"12",image:{"@width":"23","@height":"33","@source":"Decor12Graphics.png"}},{"@id":"13",image:{"@width":"39","@height":"26","@source":"Decor13Graphics.png"}},{"@id":"14",image:{"@width":"43","@height":"77","@source":"Decor14Graphics.png"}},{"@id":"15",image:{"@width":"60","@height":"86","@source":"Decor15Graphics.png"}},{"@id":"16",image:{"@width":"42","@height":"69","@source":"Decor16Graphics.png"}},{"@id":"17",image:{"@width":"53","@height":"58","@source":"Decor17Graphics.png"}},{"@id":"18",image:{"@width":"51","@height":"58","@source":"Decor18Graphics.png"}},{"@id":"19",image:{"@width":"40","@height":"23","@source":"Decor19Graphics.png"}},{"@id":"20",image:{"@width":"42","@height":"49","@source":"Decor20Graphics.png"}},{"@id":"21",image:{"@width":"51","@height":"38","@source":"Decor21Graphics.png"}},{"@id":"22",image:{"@width":"54","@height":"54","@source":"Decor22Graphics.png"}},{"@id":"23",image:{"@width":"62","@height":"135","@source":"Decor23Graphics.png"}},{"@id":"24",image:{"@width":"48","@height":"45","@source":"Decor24Graphics.png"}},{"@id":"25",image:{"@width":"104","@height":"50","@source":"Decor25Graphics.png"}},{"@id":"26",image:{"@width":"104","@height":"46","@source":"Decor26Graphics.png"}},{"@id":"27",image:{"@width":"86","@height":"38","@source":"Decor27Graphics.png"}}]}],imagelayer:{"@name":"background",image:{"@source":"Background1Graphics.png","@width":"700","@height":"525"}}},w}(e.OzState);e.EditState=t}(states||(states={}));var states,CitrusObject=objects.CitrusObject;!function(a){var e=function(u){function o(){var e=u.call(this)||this;return e.showCreditsAfterMenu=!1,e.showHelpAfterMenu=!1,e}return __extends(o,u),o.prototype.create=function(){var e=this;Game.attempts[Game.currentLevel]?Game.attempts[Game.currentLevel]++:Game.attempts[Game.currentLevel]=1,this.achievementMC=null,this.curHero=null,this.controlsPointer=null,Game._ce=CitrusEngine.Init(),(Game.levelState=this)._paused=!1,this.groupSprites=new Array;for(var t=0;t<7;t++)this.groupSprites[t]=new MovieClip(null,0,0),this.game.world.addChild(this.groupSprites[t]);this._objects=new Array,this._nape=new objects.Nape("nape"),this._nape.gravity=new Vec2(0,300),this.addObject(this._nape);var i=new LevelParseSystem;o.LoadedObjects=o.Objects?o.Objects:a.EditState._objects;var n,r=a.EditState.ObjsToLevelJSON(o.LoadedObjects);(i.parseFromJSON(r),new objects.FixedBox2(-10,-55,720,20),new objects.FixedBox2(700,-45,10,580),new objects.FixedBox2(-10,-45,10,580),new objects.FixedBox2(-10,525,720,20),this.topPanel=new TopPanel,this.topPanel.init(),this._black=Game.getGame().add.graphics(0,0),this._black.beginFill(0),this._black.drawRect(0,0,Game.WIDTH,Game.HEIGHT),this._black.endFill(),this._black.visible=!1,this.pauseSprite=new MovieClip("cmcPause",350,-500),this.pauseSprite.getChild("resume").makeButton(this.unShowMenu,!1,this,!0),this.pauseSprite.getChild("resume").centerInputRect(),this.pauseSprite.getChild("backButton").makeButton(this.unShowMenu,!1,this,!0),this.pauseSprite.getChild("backButton").centerInputRect(),this.pauseSprite.getChild("replay").makeButton(this.ozRestartLevel,!1,this,!0),this.pauseSprite.getChild("replay").centerInputRect(),this.pauseSprite.getChild("help").makeButton(this.showHelp,!1,this,!0),this.pauseSprite.getChild("help").centerInputRect(),this.pauseSprite.getChild("credits").makeButton(this.goToMenu,!1,this,!0),this.pauseSprite.getChild("credits").centerInputRect(),this.pauseSprite.getChild("createNewLevel").makeButton(Game.CreateNewLevel,!1,this,!0),this.pauseSprite.getChild("createNewLevel").centerInputRect(),this.pauseSprite.getChild("allLevels").makeButton(Game.AllLevels,!1,this,!0),this.pauseSprite.getChild("allLevels").centerInputRect(),h5branding.Branding.outGoingLinksAllowed()?(this.pauseSprite.getChild("moreGames").makeButton(Game.sponsor,!1,this,!0),this.pauseSprite.getChild("moreGames").centerInputRect(),this.pauseSprite.getChild("walkthrough").makeButton(Game.walkthrough,!1,this,!0),this.pauseSprite.getChild("walkthrough").centerInputRect()):(this.pauseSprite.getChild("moreGames").remove(),this.pauseSprite.getChild("walkthrough").remove()),this.pauseSprite.visible=!1,this.game.world.addChild(this.pauseSprite),this.creditsSprite=new MovieClip("cmcCredits",350,-525),this.game.world.addChild(this.creditsSprite),this.creditsSprite.visible=!1,this.creditsSprite.getChild("sponsor").makeButton(Game.sponsor,!1,this,!0),this.creditsSprite.getChild("backButton").makeButton(this.unShowCredits,!1,this,!0),this.creditsSprite.getChild("backButton").centerInputRect(),this.helpSprite=new MovieClip("cmcHelpPlay",350,-525,"help","WinningObjects",WinningObjectsLayouts.data),this.helpSprite.getChild("content").gotoAndStop(Game.Touch()?2:1),this.game.world.addChild(this.helpSprite),this.helpSprite.visible=!1,this.helpSprite.getChild("close").makeButton(this.unShowHelp,!1,this,!0),this.helpSprite.getChild("close").centerInputRect(),this.topPanel._view.getChild("menuButton").makeButton(this.showMenu,!0,this),this.topPanel._view.getChild("soundButton").makeSoundButton(),this.topPanel._view.getChild("musicButton").makeMusicButton(),this.topPanel._view.getChild("replayButton").makeButton(this.ozRestartLevel,!0,this),21!=Game.currentLevel&&this.topPanel._view.getChild("walkthroughButton").makeButton(this.goWalkthroughIngame,!0,this),this.topPanel._view.getChild("walkthroughButton").visible=!1,Game.VIRAL)||((n=Game.Touch()?new MovieClip("cbtnEditBig",642,28,"btnEdit","WinningObjects",WinningObjectsLayouts.data):new MovieClip("cbtnEdit",658,22,"btnEdit","WinningObjects",WinningObjectsLayouts.data)).centerInputRect(),n.makeButton(this.goLevels,!1,this,!0),n.frameOffset=Game.Touch()?1:0,this.topPanel._view.addChild(n),this.topPanel.hideMenuAndRestart());this._isStarting=!0,this._isFinishing=!1,Game.hustler.controlsEnabled=Game.bouncer.controlsEnabled=!1,TweenMax.delayedCall(.1,function(){Game.hustler.controlsEnabled=Game.bouncer.controlsEnabled=!0,this._isStarting=!1},this),SoundManager.getInstance().playSound("GameMusic"),this.initFix=!1,this.frUpdate=0,this.game.onBlur.add(function(){e.showMenu()})},o.prototype.completeLevel=function(){this._isFinishing||(this.completeActivities(),20!=Game.currentLevel?this.getObjectByName("exit").getBrothers(this.ozGoNextLevel,this):this.getObjectByName("dad").getBrothers(this.ozGoNextLevel,this),Game.levelsComplete[Game.currentLevel]=!0,Game.bouncer.burgers>Game.burgers[Game.currentLevel]&&(Game.burgers[Game.currentLevel]=Game.bouncer.burgers),Game.saveCookies())},o.prototype.goWalkthroughIngame=function(){Game.walkthrough(),this.topPanel._view.getChild("walkthroughButton").changeFrame1()},o.prototype.goLevels=function(){Game.stateSwitcher.switchToEdit()},o.prototype.killDlgTweenY=function(){this.dlgTweenY&&(this.dlgTweenY.kill(),this.dlgTweenY=null)},o.prototype.showMenu=function(){this.pauseSprite.visible||Game.stateSwitcher._isSwitchingState||(this._paused=!0,this.pauseSprite.visible=!0,this.pauseSprite.getChild("backButton").changeFrame1(),Game.SetEnterButton(this.pauseSprite.getChild("resume")),this.pauseAllAnimations(),Game.Touch()&&Game.HideJoypad(),TweenMax.pauseAll(),this.topPanel.disableInput(),this._black.visible=!0,this.showCreditsAfterMenu||this.showHelpAfterMenu||(this._black.alpha=0,TweenMax.to(this._black,.4,{alpha:.7})),this.showCreditsAfterMenu=this.showHelpAfterMenu=!1,this.dlgTweenY=TweenMax.to(this.pauseSprite,.4,{y:0,ease:"Quad.easeOut"}))},o.prototype.showHelp=function(){this.showHelpAfterMenu=!0,this.unShowMenu()},o.prototype.realShowHelp=function(){this.helpSprite.visible||(this.helpSprite.visible=!0,this.helpSprite.getChild("close").changeFrame1(),this.dlgTweenY=TweenMax.to(this.helpSprite,.4,{y:0,ease:"Quad.easeOut"}),Game.SetEnterButton(this.helpSprite.getChild("close")))},o.prototype.unShowHelp=function(){this.killDlgTweenY(),this.dlgTweenY=TweenMax.to(this.helpSprite,.25,{y:-525,onComplete:this.hideHelp,onCompleteContext:this}),Game.SetEnterButton(null)},o.prototype.hideHelp=function(){this.helpSprite.visible=!1,this.showMenu()},o.prototype.realShowCredits=function(){this.creditsSprite.visible||(this.creditsSprite.visible=!0,this.creditsSprite.getChild("backButton").changeFrame1(),this.dlgTweenY=TweenMax.to(this.creditsSprite,.4,{y:0,ease:"Quad.easeOut"}),Game.SetEnterButton(this.creditsSprite.getChild("backButton")))},o.prototype.showCredits=function(){this.showCreditsAfterMenu=!0,this.unShowMenu()},o.prototype.unShowCredits=function(){this.killDlgTweenY(),this.dlgTweenY=TweenMax.to(this.creditsSprite,.25,{y:-525,onComplete:this.hideCredits,onCompleteContext:this}),Game.SetEnterButton(null)},o.prototype.hideCredits=function(){this.creditsSprite.visible=!1,this.showMenu()},o.prototype.unShowMenu=function(){var e=this;Game.Touch()&&Game.ShowJoypad(),Game.SetEnterButton(null),this.showHelpAfterMenu||this.showCreditsAfterMenu||TweenMax.to(this._black,.25,{alpha:0}),this.killDlgTweenY(),Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.on(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=t,e.dlgTweenY=TweenMax.to(e.pauseSprite,.25,{y:-500,onComplete:e.hideMenu,onCompleteContext:e}),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},o.prototype.hideMenu=function(){this.showHelpAfterMenu?this.realShowHelp():this.showCreditsAfterMenu?this.realShowCredits():(TweenMax.resumeAll(),this.resumeAllAnimations(),this._paused=!1,this._black.visible=!1,this.topPanel.enableInput()),this.pauseSprite.visible=!1},o.prototype.pauseAllAnimations=function(){for(var e=0;e<this._objects.length;e++){var t=this._objects[e];t.view&&t.view.animations&&t.view.animations.currentAnim&&(t.view.animations.paused=!0)}},o.prototype.resumeAllAnimations=function(){for(var e=0;e<this._objects.length;e++){var t=this._objects[e];t.view&&t.view.animations&&t.view.animations.currentAnim&&(t.view.animations.paused=!1)}},o.prototype.ozGoNextLevel=function(){this._paused=!0,this.topPanel.disableInput(),Game.stateSwitcher.switchToLevelCompleted()},o.prototype.ozRestartLevel=function(){Game.stateSwitcher._isSwitchingState||(Game.DEBUG?Game.stateSwitcher.directToPlay():(this._paused=!0,this.topPanel.disableInput(),Game.stateSwitcher.switchToPlay()))},o.prototype.switchToLevelState=function(){},o.prototype.finishLevelComplete=function(){Game.isFinalAnimationPlayed||(Game.currentAnimation=!0,Game.isFinalAnimationPlayed=!0,Game.saveCookies())},o.prototype.failLevel=function(){this._isFinishing||(this.completeActivities(),TweenMax.delayedCall(.5,this.loseLevel,this))},o.prototype.loseLevel=function(){this._paused=!0,this.topPanel.disableInput(),Game.stateSwitcher.switchToLose()},o.prototype.restartLevel=function(){this._isFinishing},o.prototype.goToMenu=function(){if(!this._isFinishing){Fabrique.LoaderHelper.show();var e=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.on(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=e,Game.stateSwitcher.switchToMainMenu(),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)}},o.prototype.completeActivities=function(){this._isFinishing=!0,Game.hustler.controlsEnabled=!1,Game.bouncer.controlsEnabled=!1},o.prototype.addObject=function(e){e instanceof objects.NapePhysicsObject&&e.addPhysics(),e.view&&this.groupSprites[e.group].addChild(e.view),this._objects.push(e)},o.prototype.removeObject=function(e){e.kill=!0},o.prototype.getObjectByName=function(e){for(var t=0,i=this._objects;t<i.length;t++){var n=i[t];if(n.name==e)return n}return null},o.prototype.getObjectsByName=function(e){for(var t=null,i=0,n=this._objects;i<n.length;i++){var r=n[i];r.name==e&&(t||(t=new Array),t.push(r))}return t},o.prototype.stateUpdate=function(e){e/=1e3;for(var t=[],i=this._objects.length,n=0;n<i;++n){var r=this._objects[n];r.kill?t.push(r):r.updateCallEnabled&&r.update(e)}for(i=t.length,n=0;n<i;++n){var o=t[n];this._objects.splice(this._objects.indexOf(o),1),o.removeArt(),o.destroy()}this.drawObjects()},o.prototype.drawObjects=function(){for(var e=0,t=this._objects;e<t.length;e++){var i=t[e];Game.bouncer._grabbedObject!=i&&i.draw()}},o.prototype.butDistSquared=function(e,t){var i=e.worldX-(t.x+t.parent.x-a.Boot.PADH),n=e.worldY-(t.y+t.parent.y);return i*i+n*n},o.prototype.closerBut=function(e,t,i){return t?this.butDistSquared(e,i)<this.butDistSquared(e,t)?i:t:i},o.prototype.changeControls=function(){this.curHero?this.curHero==Game.bouncer?this.curHero=Game.hustler:this.curHero=Game.bouncer:(this.controlsPointer=new MovieClip("cmcActiveSign"),this.groupSprites[Game.hustler.group].addChild(this.controlsPointer),this.curHero=Game.hustler),this.curHero==Game.hustler?(Game._ce.input.setDoing(Game.bouncerInputChannel,"left",!1),Game._ce.input.setDoing(Game.bouncerInputChannel,"right",!1),Game._ce.input.setDoing(Game.bouncerInputChannel,"jump",!1),Game._ce.input.setDoing(Game.bouncerInputChannel,"grabDown",!1),Game._ce.input.setDoing(Game.bouncerInputChannel,"grab",!1),Game.JoypadRight.getChild("change").gotoAndStop(1)):(Game._ce.input.setDoing(Game.hustlerInputChannel,"left",!1),Game._ce.input.setDoing(Game.hustlerInputChannel,"right",!1),Game._ce.input.setDoing(Game.hustlerInputChannel,"jump",!1),Game._ce.input.setDoing(Game.hustlerInputChannel,"down",!1),Game.JoypadRight.getChild("change").gotoAndStop(2)),Game.JoypadRight.getChild("grab").visible=this.curHero==Game.bouncer},o.prototype.update=function(){if(this.frUpdate++,!this.initFix&&1<this.frUpdate&&(this.initFix=!0,u.prototype.create.call(this),Game.JoypadLeft||(Game.JoypadLeft=new MovieClip("cmcJoypadLeft"),Game.JoypadLeft.x=120,Game.JoypadLeft.y=Game.HEIGHT-55,Game.BothJoypads.addChild(Game.JoypadLeft),Game.JoypadRight=new MovieClip("cmcJoypadRight"),Game.JoypadRight.x=this.game.width-120,Game.JoypadRight.y=Game.HEIGHT-55,Game.BothJoypads.addChild(Game.JoypadRight),Game.AdjustJoypad()),Game.Touch()&&(Game.JoypadLeft.visible=!0,Game.JoypadRight.visible=!0,this.changeControls())),Input.getInstance().justDid("next")){var e=Game.stateSwitcher;e.winSprite&&e.winSprite.visible&&e.winSprite.getChild("nextButton")&&e.winSprite.getChild("nextButton").visible&&e.sw2&&e.publishLevel()}if(Game.frame++,!Game.ProcessEnter()&&this.frUpdate%3!=0)if(this._paused)this.topPanel._lastTime=Game.getGame().time.totalElapsedSeconds();else{if(this.topPanel.tick(),Game.Touch()&&this.curHero){this.controlsPointer.x=this.curHero.view.x,this.controlsPointer.y=this.curHero.view.y;for(var t=!1,i=!1,n=!1,r=!1,o=!1,a=!1,s=0;s<2;s++){var l=this.game.input.pointers[s],p=null;l.isDown&&(p=this.closerBut(l,p,Game.JoypadLeft.getChild("left")),p=this.closerBut(l,p,Game.JoypadLeft.getChild("right")),p=this.closerBut(l,p,Game.JoypadRight.getChild("up")),p=this.closerBut(l,p,Game.JoypadRight.getChild("down")),Game.JoypadRight.getChild("grab").visible&&(p=this.closerBut(l,p,Game.JoypadRight.getChild("grab"))),p=this.closerBut(l,p,Game.JoypadRight.getChild("change"))),p&&this.butDistSquared(l,p)<4e4&&("left"==p.name?t=!0:"right"==p.name?i=!0:"up"==p.name?n=!0:"down"==p.name?r=!0:"grab"==p.name?o=!0:"change"==p.name&&(a=!0))}var h=Game.hustlerInputChannel;this.curHero==Game.bouncer&&(h=Game.bouncerInputChannel),Game._ce.input.setDoing(h,"left",t),Game._ce.input.setDoing(h,"right",i),Game._ce.input.setDoing(h,"jump",n),Game._ce.input.setDoing(h,"down",r),Game._ce.input.setDoing(h,"grabDown",r),Game._ce.input.setDoing(h,"grab",o),Game._ce.input.setDoing(0,"change",a),Game._ce.input.channels[0].change==Game.frame&&this.changeControls()}this.stateUpdate(Game.getGame().time.elapsed),this._isStarting||!Game._ce.playing||this._isFinishing||(!Input.getInstance().justDid("testLevel")||Game.VIRAL?(Game.DEBUG&&(Input.getInstance().justDid("nextLevel")?(Game.currentLevel<21?Game.currentLevel++:Game.currentLevel=1,Game.stateSwitcher.directToPlay()):Input.getInstance().justDid("previousLevel")&&(1<Game.currentLevel?Game.currentLevel--:Game.currentLevel=Game.maxLevel,Game.stateSwitcher.directToPlay())),Input.getInstance().justDid("restart")&&this.ozRestartLevel(),Input.getInstance().justDid("pause")&&(this._paused||Game.stateSwitcher._isSwitchingState?this._paused&&this._black.visible&&.49<this._black.alpha&&this.unShowMenu():this.showMenu()),Game.bouncer.isAtLevelExit&&Game.bouncer.onGround&&Game.hustler.isAtLevelExit&&Game.hustler.onGround&&this.completeLevel()):Game.stateSwitcher.switchToEdit())}},o.prototype.shutdown=function(){u.prototype.shutdown.call(this);for(var e=this._objects.length,t=0;t<e;++t){var i=this._objects[t];i.view&&(i.removeArt(),i.destroy())}this.game.onBlur.removeAll(this.game)},o.Mode=0,o.Objects=null,o.PLAY_MODE=0,o.EDIT_MODE=1,o}(a.OzState);a.LevelState=e}(states||(states={}));var InteractionGroup=nape.dynamics.InteractionGroup,Boot=states.Boot,NapeBody=nape.phys.Body,LevelState=states.LevelState,MainMenuState=states.MainMenuState,EditState=states.EditState,Game=function(){function i(){var e=this;i.instance=this,i.LEFT_CURTAIN_OPEN_X=-386,i.RIGHT_CURTAIN_OPEN_X=i.WIDTH+422,i.initCookies(),i.readCookies(),i.maxLevel=21,i.currentLevel=1,i.mainMenuState=new MainMenuState;var t=Phaser.AUTO;navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&navigator.userAgent.match(/AppleWebKit/)&&(t=Phaser.CANVAS),this.game=new Phaser.Game({width:700,height:525,renderer:t,parent:"content",forceSetTimeOut:!1,antialias:!0}),TweenMax.Init(this.game),MovieClip.game=this.game,h5branding.Branding.analyticsEnabled=!1,h5branding.SplashLoader.getInstance({gameId:"6e8bacb1a63a4565bd29bd5bfc3ebceb",gameTitle:Constants.GOOGLE_APP_NAME,gameName:Constants.GOOGLE_APP_NAME,libs:[],version:version,barColor:""}).create().then(function(){e.game.state.add("game",{create:function(){e.game.state.add("Boot",states.Boot),e.game.state.add("MainMenu",states.MainMenuState),e.game.state.add("Level",states.LevelState),e.game.state.add("Edit",states.EditState),e.game.state.start("Boot"),e.game.state.remove("game")},preload:null},!0)})}return i.CustomLevelURL=function(){return"https://kizi.com/money-movers-maker"},i.AllLevels=function(){OzUtil.GetURL("https://kizi.com/money-movers-maker")},i.CreateNewLevel=function(){OzUtil.GetURL("https://kizi.com/money-movers-maker/new")},i.sponsor=function(){OzUtil.GetURL("https://kizi.com/?ch=3278&utm_source=GameDistribution")},i.walkthrough=function(){OzUtil.GetURL("https://kizi.com/videos/money-movers-maker/?ch=3279&utm_source=GameDistribution")},i.SetEnterButton=function(e){i.EnterButton=e},i.ProcessEnter=function(){if(Input.getInstance().justDid("enter")){var e=i.EnterButton;if(e&&e.visible&&e.input.enabled)return e.isDownButton?e.events.onInputDown.dispatch():e.events.onInputUp.dispatch(),!0}return!1},i.getGame=function(){return i.instance.game},i.Touch=function(){return i.isTouchInitted||(i.isTouchInitted=!0,i.isTouch=!i.getGame().device.desktop&&i.getGame().device.touch),i.isTouch},i.AdjustPad=function(){i.PadLeft&&(i.PadLeft.x=Math.floor(Boot.PADH+1.9),i.PadLeft.y=0,i.PadRight.x=Boot.PADH+i.WIDTH-.9,i.PadRight.y=0,i.CurtainContainer.x=Boot.PADH)},i.AdjustJoypad=function(){i.JoypadLeft&&(i.JoypadLeft.x=120,i.JoypadLeft.y=i.HEIGHT-55,i.JoypadRight.x=i.getGame().width-120,i.JoypadRight.y=i.HEIGHT-55,i.Touch()||i.HideJoypad())},i.HideJoypad=function(){i.JoypadLeft&&(i.JoypadLeft.visible=i.JoypadRight.visible=!1)},i.ShowJoypad=function(){i.JoypadLeft&&(i.JoypadLeft.visible=i.JoypadRight.visible=!0)},i.LS=function(e){return e+i.LocalStorageName},i.initCookies=function(){},i.readCookies=function(){localStorage.getItem(i.LS("levelsComplete"))?(i.levelsComplete=JSON.parse(localStorage.getItem(i.LS("levelsComplete"))),i.burgers=JSON.parse(localStorage.getItem(i.LS("burgers"))),i.isIntroAnimationPlayed=JSON.parse(localStorage.getItem(i.LS("isIntroAnimationPlayed"))),i.isFinalAnimationPlayed=JSON.parse(localStorage.getItem(i.LS("isFinalAnimationPlayed")))):i.clearProgress()},i.saveCookies=function(){localStorage.setItem(i.LS("levelsComplete"),JSON.stringify(i.levelsComplete)),localStorage.setItem(i.LS("burgers"),JSON.stringify(i.burgers)),localStorage.setItem(i.LS("isIntroAnimationPlayed"),JSON.stringify(i.isIntroAnimationPlayed)),localStorage.setItem(i.LS("isFinalAnimationPlayed"),JSON.stringify(i.isFinalAnimationPlayed))},i.totalPoints=function(){for(var e=0,t=1;t<=i.NUMLEVELS;t++)e+=i.burgers[t];return e},i.MX=function(e){return Math.round(e*i.getGame().scale.scaleFactor.x+i.getGame().world.camera.x)},i.MY=function(e){return Math.round(e*i.getGame().scale.scaleFactor.y)},i.clearProgress=function(){i.isIntroAnimationPlayed=!1,i.isFinalAnimationPlayed=!1,i.burgers=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i.levelsComplete=[!0,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],i.saveCookies()},i.initCollisionCategories=function(){objects.PhysicsCollisionCategories.Add("grab"),objects.PhysicsCollisionCategories.Add("hidden"),objects.PhysicsCollisionCategories.Add("enemy"),objects.PhysicsCollisionCategories.Add("limiter"),objects.PhysicsCollisionCategories.Add("tile"),objects.PhysicsCollisionCategories.Add("hero"),objects.PhysicsCollisionCategories.Add("bouncer"),this.nonCollidable=new InteractionGroup(!0)},i.VIRAL=!0,i.ID=5301,i.DEBUG=!1,i.instance=null,i.bouncerInputChannel=11,i.hustlerInputChannel=12,i.frame=0,i.attempts=[],i.WIDTH=700,i.HEIGHT=525,i.WIDTH_HALF=350,i.HEIGHT_HALF=262.5,i.TILE_SIZE=35,i.NUMLEVELS=21,i.RotateDevice=null,i.JoypadLeft=null,i.JoypadRight=null,i.PadLeft=null,i.PadRight=null,i.BothJoypads=null,i.CurtainContainer=null,i.LeftCurtain=null,i.RightCurtain=null,i.isTouchInitted=!1,i.isTouch=!1,i.LocalStorageName="DODGERS2",i}();window.onload=function(){new Game},PhaserInput.InputField.prototype.setText2=function(e){void 0===e&&(e=""),null!==this.placeHolder&&(0<e.length?this.placeHolder.visible=!1:this.placeHolder.visible=!0),this.value=this.getFormattedText(e),this.domElement.value=this.value,this.updateText(),this.updateCursor()};var HttpResponse=function(){this.success=!1,this.message=""},HttpRequest=function(){function n(){}return n.request=function(e,t,i,n){var r;if(window.XMLHttpRequest){(r=new XMLHttpRequest).onreadystatechange=function(){4==r.readyState&&(200===r.status?n({success:!0,message:r.responseText}):0<r.status&&n({success:!1,message:"Error: There was a problem with the request: status "+r.status}))};try{r.open(e,t,!0),r.setRequestHeader("Content-Type","application/json"),r.send(i)}catch(e){n({success:!1,message:"Error: Unable to send request, CORS not allowed."})}}else n({success:!1,message:"Error: Unable to send request, XMLHttpRequest not supported"})},n.get=function(e,t){n.request("GET",e,void 0,t)},n.post=function(e,t,i){n.request("POST",e,void 0,i)},n}(),LevelLoader=function(){function o(){}return o.Init=function(e){void 0===e&&(e=-1),o.SavedId=-1,o.LevelId=e,o.IsLoading=!1,o.PlayedLevels=new Array,o.LevelJSONs=new Array,o.Thumbs=new Array,o.ThumbLoaded=new Array,Game.VIRAL?o.LoadRandomLevels():0<=e&&this.LoadLevel(e)},o.GetNextLevel=function(){return o.LevelJSONs&&o.LevelJSONs[0]?JSON.parse(o.LevelJSONs[0].level_json):null},o.PlayLevelAt=function(e){void 0===e&&(e=0);var t=o.LevelJSONs[e].id;o.PlayedLevels.push(t),Game.currentLevel=t,states.LevelState.Objects=JSON.parse(o.LevelJSONs[e].level_json),Game.VIRAL&&(o.LevelJSONs=[],o.LoadRandomLevels())},o.LoadRandomLevels=function(){var r=this;o.IsLoading||(o.IsLoading=!0,HttpRequest.get("https://kizi.com/game_levels/show_random?game_id="+Game.ID,function(e){if(o.IsLoading=!1,e.success){var t;try{t=JSON.parse(e.message)}catch(e){}if(t){for(var i=0;i<t.length;i++)o.LevelJSONs[i]=t[i];for(var n=t.length;n<4;n++)o.LevelJSONs[n]=t[n%t.length];o.LevelJSONs.sort(function(e,t){var i=e.id,n=t.id;return(i=o.PlayedLevels.indexOf(i))-(n=o.PlayedLevels.indexOf(n))})}}else TweenMax.delayedCall(5,o.LoadRandomLevels,r)}))},o.LoadLevel=function(e){o.IsLoading||(o.IsLoading=!0,HttpRequest.get("http://kizi.com/game_levels/"+e,function(e){if(o.IsLoading=!1,e.success){var t;try{t=JSON.parse(e.message)}catch(e){}t&&(o.LevelJSONs[0]=t,o.LevelId=t.id,EditState._objects=JSON.parse(t.level_json))}}))},o.GetNextLevelTitle=function(){var e=OzUtil.PE(o.GetNextLevel(),null,"type","LevelText");return e?OzUtil.TextToURL(e.text):""},o.ShortenURL=function(e){void 0===e&&(e=null),e||(e=o.LevelURL());var t="/money-movers-maker/",i=e.indexOf(t);if(0<=i){var n=e.substring(0,i+1);for(i+=t.length+1;"/"!=e.charAt(i)&&i<e.length;)i++;return n+"[...]"+e.substring(i)}return e},o.LevelURL=function(e){return void 0===e&&(e=-1),e<0&&(e=o.SavedId),e<0&&(e=o.LevelId),Game.CustomLevelURL()+"/"+e+"/"+o.GetNextLevelTitle()},o.copyURL=function(e){(o.copyUrlText=e)&&o.copyUrlText.setStyle(o.PublishURLStyleSelected),window.clipboard.writeText(o.LevelURL())},o.shareMail=function(){OzUtil.GetURL("mailto:?subject=Check out this great Money Movers level&body=Hi, Check out this great level I made in Money Movers Maker - "+o.LevelURL())},o.shareReddit=function(){OzUtil.GetURL("//www.reddit.com/submit?url="+OzUtil.EscapeURL(o.LevelURL()))},o.shareTumblr=function(){OzUtil.GetURL("https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl="+OzUtil.EscapeURL(o.LevelURL())+"&posttype=link")},o.shareTwitter=function(){OzUtil.GetURL("https://twitter.com/home?status="+o.LevelURL())},o.shareFacebook=function(){OzUtil.GetURL("https://www.facebook.com/sharer/sharer.php?u="+OzUtil.EscapeURL(o.LevelURL()))},o.PublishURLStyle={font:"18px Arial",fill:"#000",width:200,maxWidth:300,align:"center",backgroundColor:"#FFF"},o.PublishURLStyleSelected={font:"18px Arial",fill:"#FFF",width:200,maxWidth:300,align:"center",backgroundColor:"#000"},o}(),LevelParseSystem=function(){function v(){this._objectsList=[]}return v.prototype.parse=function(e){},v.prototype.parseFromJSON=function(e){if(this._map=e,this.parseTileset("tiles"),this.parseTileset("decor"),this.parseTileset("active"),this.parseTileset("passive"),e.imagelayer){var t=e.imagelayer.image["@source"].split(".")[0],i=new MovieClip(t);this.createLevelObject(i)}if(OzUtil.PE(e,"objectgroup","@name","decorations")&&this.parseObjectGroup("decorations"),OzUtil.PE(e,"objectgroup","@name","active")&&this.parseObjectGroup("active"),OzUtil.PE(e,"objectgroup","@name","tiles")){var n=null,r=OzUtil.PE(e,"objectgroup","@name","tiles").properties;r&&(n=OzUtil.PE(r,"property","@name","physics")),n?this.parseObjectGroup("tiles",!0):this.parseObjectGroup("tiles")}OzUtil.PE(e,"objectgroup","@name","physics")&&this.parseObjectGroup("physics"),OzUtil.PE(e,"objectgroup","@name","characters")&&this.parseObjectGroup("characters")},v.prototype.parseTileset=function(e){for(var t=OzUtil.PE(this._map,"tileset","@name",e),i=parseInt(t["@firstgid"]),n=0,r=OzUtil.ARR(t,"tile");n<r.length;n++){var o=r[n];this._objectsList[parseInt(o["@id"])+i]=o.image["@source"].split(".")[0]}},v.prototype.parseObjectGroup=function(e,t){void 0===t&&(t=!1);var i=OzUtil.PE(this._map,"objectgroup","@name",e),n=null,r=OzUtil.ARR(i,"object");if(r)for(var o=0,a=r;o<a.length;o++){var s=a[o],l=parseInt(s["@gid"]),p=0!=(l&v.FLIPPED_HORIZONTALLY_MASK),h=0!=(l&v.FLIPPED_VERTICALLY_MASK);if(0==(l&=~(v.FLIPPED_HORIZONTALLY_MASK|v.FLIPPED_VERTICALLY_MASK)))new objects.FixedBox2(s["@x"],s["@y"],s["@width"],s["@height"]);else{var u=this._objectsList[l];"MoneyBagGraphics"==u&&(u="BurgerGraphics"),n=new MovieClip(u),"LevelTextGraphics"==u?(n.x=260,n.y=62):(n.x=s["@x"],n.y=s["@y"]),p&&(n.params.flippedHorizontally=!0),h&&(n.params.flippedVertically=!0);var c=s["@rotation"];c&&(n.degrees=parseFloat(c)),(f=s["@name"])&&(n.name=f);var d=s["@type"];d&&(n.params.type=d);var _=s.properties;if(_)for(var y=0,m=OzUtil.ARR(_,"property");y<m.length;y++){var f,x=m[y];"target"==(f=x["@name"])?n.params.target=x["@value"]:"target2"==f?n.params.target2=x["@value"]:"target3"==f?n.params.target3=x["@value"]:"speedX"==f?n.params.speedX=x["@value"]:"speedY"==f?n.params.speedY=x["@value"]:"distanceX"==f?n.params.distanceX=x["@value"]:"distanceY"==f?n.params.distanceY=x["@value"]:"minAngle"==f?n.params.minAngle=x["@value"]:"maxAngle"==f?n.params.maxAngle=x["@value"]:"delay"==f?n.params.delay=x["@value"]:"text"==f&&(n.params.name=x["@value"])}t&&new objects.Tile(n),this.createLevelObject(n)}}},v.prototype.createLevelObject=function(e){var t=e.mc;0<=["HustlerGraphics"].indexOf(t)?new objects.Hustler(e):0<=["BouncerGraphics"].indexOf(t)?new objects.Bouncer(e):0<=["BlockGraphics"].indexOf(t)?new objects.FixedBox(e):0<=["DoorGraphics","GlassDoorGraphics"].indexOf(t)?new objects.Door(e):0<=["BoxGraphics"].indexOf(t)?new objects.Box(e):0<=["PlankGraphics","Plank2Graphics","Plank3Graphics","Plank4Graphics","Plank5Graphics","Plank6Graphics","Plank7Graphics","Plank8Graphics","Plank9Graphics","Plank10Graphics","Plank11Graphics","BigPlankGraphics"].indexOf(t)?new objects.Plank(e):0<=["StoolGraphics"].indexOf(t)?new objects.Stool(e):0<=["ToiletGraphics"].indexOf(t)?new objects.Toilet(e):0<=["MonitorGraphics"].indexOf(t)?new objects.Monitor(e):0<=["BasketBallGraphics"].indexOf(t)?new objects.BasketBall(e):0<=["BigBoxGraphics"].indexOf(t)?new objects.BigBox(e):0<=["PushButtonGraphics"].indexOf(t)?new objects.PushButton(e):0<=["TriggerGraphics"].indexOf(t)?new objects.Trigger(e):0<=["ElevatorGraphics","BigElevatorGraphics"].indexOf(t)?new objects.Elevator(e):0<=["ExitGraphics"].indexOf(t)?new objects.Exit(e):0<=["NicheGraphics"].indexOf(t)?new objects.Niche(e):0<=["TurrelGraphics"].indexOf(t)?new objects.Turrel(e):0<=["CameraGraphics"].indexOf(t)?new objects.Camera(e):0<=["BurgerGraphics"].indexOf(t)?new objects.Burger(e):0<=["EnemyLimiterGraphics"].indexOf(t)?new objects.EnemyLimiter(e):0<=["DadGraphics"].indexOf(t)?new objects.Dad(e):0<=["GuardianGraphics","Guardian2Graphics","Guardian3Graphics","Guardian4Graphics"].indexOf(t)?new objects.Guardian(e):0<=["Tip6Graphics","Tip7Graphics"].indexOf(t)?new objects.TopDecoration(e):0<=["platformCenter","platformLeft","platformRight","singleTile","tileBottomCenter","tileBottomLeft","tileBottomRight","tileCenter","tileCenterLeft","tileCenterRight","tileTopCenter","tileTopLeft","tileTopRight","verticalPlatformBottom","verticalPlatformCenter","verticalPlatformTop"].indexOf(t)?new objects.TileVisual(e):"LevelTextGraphics"==t?new objects.LevelText(e):"TxtGraphics"==t?new objects.Txt(e):Game.levelState.addObject(new objects.CitrusSprite("sprite",{view:e,x:+e.x,y:+e.y}))},v.FLIPPED_HORIZONTALLY_MASK=2147483648,v.FLIPPED_VERTICALLY_MASK=1073741824,v}(),Levels=function(){function e(){}return e.data=[],e}(),SoundManager=function(){function r(){}return r.AddSound=function(e,t){Game.getGame().load.audio(e,["assets/sounds/"+e+".mp3","assets/sound/"+e+".ogg"]),this.dicSounds[e]={},t.music?this.dicSounds[e].music=!0:this.dicSounds[e].music=!1,10<t.loops?this.dicSounds[e].loops=!0:this.dicSounds[e].loops=!1,t.volume?this.dicSounds[e].volume=t.volume:this.dicSounds[e].volume=1,r.NumSounds++},r.Init=function(){r.AllDecoded=!1,r.NumSounds=0,r.muteMusic=!1,r.muteSound=!1,r.curMusic=null,r.arrSounds=new Array},r.decodeSounds=function(){var t=Game.getGame();Object.keys(r.dicSounds).forEach(function(e){r.dicSounds[e].sound=t.add.audio(e)})},r.Preload=function(){r.AddSound("GameMusic",{music:!0,loops:9999,volume:.5}),r.AddSound("MenuMusic",{music:!0,loops:9999,volume:.7}),r.AddSound("AnimationMusic",{music:!0,loops:9999,volume:.7}),r.AddSound("MouseClickSound",{}),r.AddSound("MouseOverSound",{volume:.6}),r.AddSound("ExitSound",{}),r.AddSound("LevelCompleteAnimationSound",{}),r.AddSound("LevelWinSound",{}),r.AddSound("LevelFailedSound",{}),r.AddSound("BoxDownSound",{volume:.6}),r.AddSound("PlankDownSound",{}),r.AddSound("ElectricitySound",{}),r.AddSound("Hamburger1Sound",{}),r.AddSound("Hamburger2Sound",{}),r.AddSound("Hamburger3Sound",{}),r.AddSound("GetHamburger1Sound",{}),r.AddSound("GetHamburger2Sound",{}),r.AddSound("GetHamburger3Sound",{}),r.AddSound("BrickWallOpenSound",{}),r.AddSound("BrickWallCloseSound",{}),r.AddSound("MonitorCrashSound",{}),r.AddSound("WaterSound",{}),r.AddSound("YellowCameraSound",{}),r.AddSound("RedCameraSound",{}),r.AddSound("OpenDoorSound",{volume:1}),r.AddSound("ElevatorSound",{loops:9999,volume:.4}),r.AddSound("ToiletSound",{}),r.AddSound("TriggerSound",{}),r.AddSound("PushButtonSound",{}),r.AddSound("AttackSound",{}),r.AddSound("StoolDownSound",{}),r.AddSound("TurrelFireSound",{volume:.7}),r.AddSound("RicochetSound",{volume:.7}),r.AddSound("Comix1Sound",{}),r.AddSound("Comix2Sound",{}),r.AddSound("Comix3Sound",{}),r.AddSound("Comix4Sound",{}),r.AddSound("Comix5Sound",{}),r.AddSound("Comix6Sound",{}),r.AddSound("Comix7Sound",{}),r.AddSound("Comix8Sound",{}),r.AddSound("Comix9Sound",{}),r.AddSound("Comix10Sound",{}),r.AddSound("Comix11Sound",{}),r.AddSound("AchievementUnlockedSound",{}),r.AddSound("BouncerJumpSound",{}),r.AddSound("BouncerStepSound",{}),r.AddSound("BouncerThrowSound",{}),r.AddSound("BouncerGetSound",{}),r.AddSound("BouncerPushSound",{volume:.8}),r.AddSound("BouncerIdleSound2",{volume:.5}),r.AddSound("BouncerIdleSound1",{volume:.5}),r.AddSound("HustlerJumpSound",{}),r.AddSound("HustlerStepSound",{volume:.5}),r.AddSound("HustlerSlideSound",{volume:.5}),r.AddSound("HustlerPushSound",{volume:.5}),r.AddSound("HustlerIdleSound1",{volume:.5}),r.AddSound("HustlerIdleSound2",{volume:.5}),r.AddSound("GuardianStepSound",{volume:.5}),r.AddSound("GuardianRunSound",{volume:.5}),r.AddSound("GuardianHurtSound",{}),r.AddSound("GuardianStarsSound",{}),r.AddSound("CriminalStepSound",{volume:.5}),r.AddSound("CriminalRunSound",{volume:.5}),r.AddSound("CriminalBoomSound",{})},r.getInstance=function(){return null==r.instance&&(r.instance=new r),r.instance},r.prototype.stopMusic=function(){},r.prototype.playSound=function(e){var t=r.dicSounds[e];if(t)if(t.music){if(r.playingMusic&&r.playingMusic!=e){var i=r.dicSounds[r.playingMusic];i.sound&&i.sound.stop()}r.curMusic!=e&&e&&(r.muteMusic?r.playingMusic=null:(r._playSound(e,t.volume,t.loops),r.playingMusic=e),r.curMusic=e)}else r.muteSound||(this.isPlaying(e)&&this.stopSound(e),r._playSound(e,t.volume,t.loops))},r.prototype.stopSound=function(e){var t=r.dicSounds[e];t&&(t.sound.stop(),r.playingMusic==e&&(r.playingMusic=null))},r.prototype.isPlaying=function(e){var t=r.dicSounds[e];return!(!t||!t.sound)&&t.sound.isPlaying},r.ToggleMuteMusic=function(){if(r.muteMusic=!r.muteMusic)r.playingMusic&&(e=r.dicSounds[r.playingMusic]).sound&&e.sound.pause();else if(r.curMusic)if(r.playingMusic){var e;(e=r.dicSounds[r.playingMusic]).sound&&e.sound.resume()}else{var t=r.dicSounds[r.curMusic];r._playSound(r.curMusic,t.volume,t.loops),r.playingMusic=r.curMusic}},r._playSound=function(e,t,i){var n=r.dicSounds[e].sound;i?(n.loopFull(t),n.onLoop.getNumListeners()<1&&n.onLoop.add(r._loopSound,r,0,e,t)):n.play("",0,t)},r._loopSound=function(e,t,i){e.loopFull(i)},r.ToggleMuteSound=function(){if(r.muteSound=!r.muteSound)for(var e in r.dicSounds){var t=r.dicSounds[e];if(!t.music){var i=t.sound;i&&i.isPlaying&&i.stop()}}},r.instance=null,r.dicSounds={},r}(),TaskManager=function(){function e(e){void 0===e&&(e=!1),this._tasks=[],this._pauseCount=0,this.isStarted=!1,this.isPaused=!1,this.cycle=e}return Object.defineProperty(e.prototype,"currentTask",{get:function(){return 0<this._tasks.length?this._tasks[0].func:null},enumerable:!1,configurable:!0}),e.prototype.addTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.push({func:t,params:i,ignoreCycle:n,context:e}),this.start()},e.prototype.addInstantTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.push({func:t,params:i,ignoreCycle:n,isInstant:!0,context:e}),this.start()},e.prototype.addUrgentTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.unshift({func:t,params:i,ignoreCycle:n,context:e}),this.start()},e.prototype.addUrgentInstantTask=function(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=!1),this._tasks.unshift({func:t,params:i,ignoreCycle:n,isInstant:!0,context:e}),this.start()},e.prototype.addPause=function(e,t){void 0===t&&(t=!1),this.addTask(this,this.timerFrame,[e],t)},e.prototype.timerFrame=function(e){this._pauseCount++,this._pauseCount>=e&&(this._pauseCount=0,this.nextTask())},e.prototype.removeAllTasks=function(){this._tasks=new Array},e.prototype.nextTask=function(e){void 0===e&&(e=!1),this.cycle&&!e?this._tasks.push(this._tasks.shift()):this._tasks.shift()},e.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.isPaused=!1)},e.prototype.stop=function(){this.isStarted=!1},e.prototype.update=function(){var e=this._tasks[0];e?(this.result=e.func.call(e.context,e.params),e==this._tasks[0]&&(e.isInstant||this.result)&&this.nextTask(e.ignoreCycle)):stop()},Object.defineProperty(e.prototype,"pause",{get:function(){return this.isPaused},set:function(e){e&&!this.isPaused?this.isPaused=!0:this._tasks[0]&&this.isPaused&&(this.isPaused=!1)},enumerable:!1,configurable:!0}),e.prototype.tasksNum=function(){return this._tasks.length},e.ALL_TASKS_DONE="allTasksDone",e}(),MovieClip=function(l){function _(e,t,i,n,r,o){void 0===e&&(e=null),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=""),void 0===r&&(r=null),void 0===o&&(o=null);var a=this;r||(r="Objects"),o||(o=ObjectsLayouts.data);var s=OzUtil.PE(o,null,"name",e);return e?s?(a=l.call(this,_.game,t,i,null)||this).createLayout(o,e,r):a=l.call(this,_.game,t,i,r,e+"0000")||this:a=l.call(this,_.game,t,i,null)||this,a._frameOffset=0,a.mc=e,a.name=n,a.params={},a.spriteSheetName=r,a._currentFrameNumber=1,a._degrees=a.rotation=0,a.butFrameOffset=0,a.physicsEnabled=!1,a}return __extends(_,l),_.RegisterSpritesheet=function(e,t){_.SpriteSheetDatas||(_.SpriteSheetDatas={}),_.SpriteSheetDatas[e]=t},_.FrameRate=function(e){return e<0?40:Math.round(60*e/40)},Object.defineProperty(_.prototype,"tintRed",{get:function(){return this.tint>>16&255},set:function(e){this.tint=(Math.round(Math.min(255,Math.max(0,e)))<<16)+(65535&this.tint)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"tintGreen",{get:function(){return this.tint>>8&255},set:function(e){this.tint=(Math.round(Math.min(255,Math.max(0,e)))<<8)+(this.tint&510<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"tintBlue",{get:function(){return 255&this.tint},set:function(e){this.tint=Math.round(Math.min(255,Math.max(0,e)))+(16776960&this.tint)},enumerable:!1,configurable:!0}),_.prototype.generateDefaultAnimation=function(){var e=Phaser.Animation.generateFrameNames(this.mc,0,this.totalFrames(),"",4);this.animations.add("_null",e,_.FrameRate(-1))},_.prototype.playLoop=function(){this.animations.getAnimation("_null")||this.generateDefaultAnimation(),this.play("_null",_.FrameRate(-1),!0)},_.prototype.playOnce=function(){this.animations.getAnimation("_null")||this.generateDefaultAnimation(),this.play("_null",_.FrameRate(-1),!1)},_.prototype.getOffsetToCenterX=function(){var e=this.mc+_.getPaddedNumber(this.currentFrameNumber-1,4),t=_.SpriteSheetDatas[this.spriteSheetName],i=OzUtil.PE(t,"frames","filename",e);return i?i.frame.w/2+i.spriteSourceSize.x:0},_.prototype.getOffsetToCenterY=function(){var e=this.mc+_.getPaddedNumber(this.currentFrameNumber-1,4),t=_.SpriteSheetDatas[this.spriteSheetName],i=OzUtil.PE(t,"frames","filename",e);return i?i.frame.h/2+i.spriteSourceSize.y:0},_.getSpriteSourceX=function(e,t){void 0===t&&(t=null),t||(t="Objects");var i=e+_.getPaddedNumber(0,4),n=_.SpriteSheetDatas[t],r=OzUtil.PE(n,"frames","filename",i);return r&&r.spriteSourceSize.x,0},_.getSpriteSourceY=function(e,t){void 0===t&&(t=null),t||(t="Objects");var i=e+_.getPaddedNumber(0,4),n=_.SpriteSheetDatas[t],r=OzUtil.PE(n,"frames","filename",i);return r&&r.spriteSourceSize.y,0},_.prototype.getMcBounds=function(){var e=1e6,t=-1e6,i=1e6,n=-1e6;if(this.mc){var r=this.mc+_.getPaddedNumber(this.currentFrameNumber-1,4),o=_.SpriteSheetDatas[this.spriteSheetName],a=OzUtil.PE(o,"frames","filename",r);a&&(e=a.spriteSourceSize.x,i=a.spriteSourceSize.y,t=e+a.frame.w,n=i+a.frame.h)}if(0<this.children.length){var s=0;for(s=0;s<this.children.length;s++)if(this.children[s]instanceof _){var l=this.children[s];if("putDoor"!=l.name&&"putElevator"!=l.name&&"putVector"!=l.name){var p=l.getMcBounds();p.x+=l.x,p.y+=l.y,p.x<e&&(e=p.x),p.x+p.width>t&&(t=p.x+p.width),p.y<i&&(i=p.y),p.y+p.height>n&&(n=p.y+p.height)}}}var h=this.degrees*Math.PI/180,u=new PIXI.Rectangle;return _.updateRectWithPointRot(u,e,i,h,!0),_.updateRectWithPointRot(u,t,i,h),_.updateRectWithPointRot(u,t,n,h),_.updateRectWithPointRot(u,e,n,h),u.width=u.width-u.x,u.height=u.height-u.y,u},_.updateRectWithPointRot=function(e,t,i,n,r){void 0===r&&(r=!1);var o=t*Math.cos(n)-i*Math.sin(n),a=t*Math.sin(n)+i*Math.cos(n);r?(e.x=o,e.width=o,e.y=a,e.height=a):(o<e.x&&(e.x=o),o>e.width&&(e.width=o),a<e.y&&(e.y=a),a>e.height&&(e.height=a))},_.prototype.drawOutline=function(){var e=Game.getGame().add.graphics(0,0);if(this.addChildAt(e,0),e.lineStyle(3,7798750),"CameraGraphicsComp"==this.mc)e.drawCircle(0,-2,24);else{var t=this.getMcBounds();e.drawPolygon([new Phaser.Point(t.x,t.y),new Phaser.Point(t.x+t.width,t.y),new Phaser.Point(t.x+t.width,t.y+t.height),new Phaser.Point(t.x,t.y+t.height),new Phaser.Point(t.x,t.y)])}return e.endFill(),e.rotation=this.rotation,e},_.prototype.pointSelects=function(e,t){if("putVector"==this.name)return!1;e-=this.x,t-=this.y,e/=this.scaleX,t/=this.scaleY;var i=-this.degrees*Math.PI/180,n=e*Math.cos(i)-t*Math.sin(i),r=e*Math.sin(i)+t*Math.cos(i);e=n,t=r;if(0<this.children.length){var o=0;for(o=0;o<this.children.length;o++){var a=this.children[o];if(this.children[o]instanceof _&&a.pointSelects(e,t))return!0}}if(this.mc){var s=this.mc+_.getPaddedNumber(this.currentFrameNumber-1,4),l=_.SpriteSheetDatas[this.spriteSheetName],p=OzUtil.PE(l,"frames","filename",s);if(p){var h=p.spriteSourceSize.x,u=p.spriteSourceSize.y,c=h+p.frame.w,d=u+p.frame.h;if(OzUtil.OnSegment(h,e,c)&&OzUtil.OnSegment(u,t,d))return!0}}return!1},_.prototype.xyFrom=function(e){this.x=e.x,this.y=e.y},_.prototype.setxy=function(e,t){this.x=e,this.y=t},Object.defineProperty(_.prototype,"scaleX",{get:function(){return this.scale.x},set:function(e){this.scale.x=e},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"scaleY",{get:function(){return this.scale.y},set:function(e){this.scale.y=e},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"degrees",{get:function(){return 180*this.rotation/Math.PI},set:function(e){this._degrees=e,this.rotation=e*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"frameOffset",{get:function(){return this._frameOffset},set:function(e){this._frameOffset=e,this.gotoAndStop(this.currentFrameNumber)},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"currentFrameNumber",{get:function(){return this._currentFrameNumber},set:function(e){this.gotoAndStop(Math.round(e))},enumerable:!1,configurable:!0}),_.prototype.totalFrames=function(){for(var e=0;;){var t=this.mc+_.getPaddedNumber(e,4),i=_.SpriteSheetDatas[this.spriteSheetName];if(!OzUtil.PE(i,"frames","filename",t))break;e++}return e},_.getPaddedNumber=function(e,t){for(var i=""+Math.round(e),n=t-i.length,r=0;r<n;r++)i="0"+i;return i},_.prototype.addAnimation=function(e,t,i,n,r,o,a){void 0===r&&(r=!1),void 0===o&&(o=null),void 0===a&&(a=null);var s=Phaser.Animation.generateFrameNames(this.mc,t-1,i-1,"",4),l=this.animations.add(e,s,_.FrameRate(n),r);o&&l.onComplete.add(o,a)},_.prototype.playAnimation=function(e){this.currentAnimation=e;this.animations.play(e)},_.prototype.gotoAndStop=function(e){this._currentFrameNumber=e,e--,e+=this.frameOffset;var t=this.mc;t+=_.getPaddedNumber(e,4),this.frameName=t},_.prototype.stop=function(){this.animations.stop()},_.prototype.centerInputRect=function(){this.hitArea=new Phaser.Rectangle(-this.width/2,-this.height/2,this.width,this.height)},_.prototype.getChild=function(e){for(var t=0,i=this.children;t<i.length;t++){var n=i[t];if(n instanceof _){var r=n;if(r.name==e)return r}}return null},_.prototype.clickedLevelSelect=function(){},_.prototype.makeButton=function(e,t,i,n,r){void 0===t&&(t=!0),void 0===i&&(i=null),void 0===n&&(n=!0),void 0===r&&(r=!0),i||(i=this),this.isDownButton=!!_.DownButton,this.inputEnabled=!0,this.input.useHandCursor=!0,this.isDownButton?this.events.onInputDown.add(e,i):this.events.onInputUp.add(e,i),t&&(Game.Touch()?(this.events.onInputDown.add(this.changeFrame2,this),this.events.onInputUp.add(this.changeFrame1,this)):(this.events.onInputOver.add(this.changeFrame2,this),this.events.onInputOut.add(this.changeFrame1,this),n&&this.events.onInputOver.add(this.mouseOverSound,this))),n&&this.events.onInputDown.add(this.mouseClickSound,this)},_.prototype.mouseOverSound=function(){SoundManager.getInstance().playSound("MouseOverSound")},_.prototype.mouseClickSound=function(){SoundManager.getInstance().playSound("MouseClickSound")},_.prototype.editClick=function(){Game.editState.paletteClick(this)},_.prototype.colorClick=function(){Game.editState.colorClick(parseInt(this.name.substr(this.name.indexOf("l")+1)))},_.prototype.getButFrameOffset=function(){return this.butFrameOffset},_.prototype.changeButtonFrameOffset=function(e){var t=e-this.butFrameOffset;this.butFrameOffset=e,this.currentFrameNumber=this.currentFrameNumber+t},_.prototype.fromBase64=function(e,n,r,o){var a=this;void 0===n&&(n=0),void 0===r&&(r=0),void 0===o&&(o=0);var s=new Image;s.src=e,s.onload=function(){var e=new PIXI.BaseTexture(s,PIXI.scaleModes.LINEAR),t=new PIXI.Texture(e),i=new Phaser.Sprite(Game.getGame(),n,r,t);0<o&&(i.scale.x=i.scale.y=o/i.width),a.addChild(i)}},_.prototype.changeFrame1=function(){this.currentFrameNumber=1+this.butFrameOffset},_.prototype.changeFrame2=function(){this.currentFrameNumber=2+this.butFrameOffset},_.prototype.makeMusicButton=function(){this.butFrameOffset=SoundManager.muteMusic?2:0,this.changeFrame1(),this.makeButton(this.toggleMuteMusic,!0,this,!1)},_.prototype.toggleMuteMusic=function(){SoundManager.ToggleMuteMusic(),this.changeButtonFrameOffset(1<this.getButFrameOffset()?0:2)},_.prototype.makeSoundButton=function(){this.butFrameOffset=SoundManager.muteSound?2:0,this.changeFrame1(),this.makeButton(this.toggleMuteSound,!0,this,!1)},_.prototype.toggleMuteSound=function(){SoundManager.ToggleMuteSound(),this.changeButtonFrameOffset(1<this.getButFrameOffset()?0:2)},_.prototype.createLayout=function(e,t,i){for(var n=OzUtil.PE(e,null,"name",t),r=OzUtil.ARR(n.children),o=0;o<r.length;o++){var a=r[o],s=new _(a.mc,a.x,a.y,a.name,i,e);a.degrees&&(s.degrees=a.degrees),a.scaleX&&(s.scale.x=a.scaleX),a.scaleY&&(s.scale.y=a.scaleY),a.alpha&&(s.alpha=a.alpha),this.addChild(s)}},_.prototype.inputEnableImmediateChildren=function(e,t){void 0===t&&(t=null);for(var i=this.children.length,n=0;n<i;n++){var r=this.children[n];r&&r.input&&r.visible&&(!t||t.indexOf(r.name)<0)&&(r.input.enabled=e)}},_.prototype.changeChildByName=function(e,t,i,n){var r=this.getChild(e);this.removeChild(r);var o=new _(t,r.x,r.y,r.name,i,n);this.addChild(o)},_.prototype.remove=function(){this.parent&&this.parent.removeChild(this),this.destroy(!0)},_.DownButton=!0,_}(Phaser.Sprite),NapeUtils=function(){function e(){}return e.CollisionGetOther=function(e,t){return e==t.int1.userData.myData?t.int2.userData.myData:t.int1.userData.myData},e.CollisionGetSelf=function(e,t){return e==t.int1.userData.myData?t.int1.userData.myData:t.int2.userData.myData},e}(),Objects=function(){function e(){}return e.data={frames:[{filename:"BackButton0000",frame:{x:2881,y:1966,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.7,y:.2,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"BackButton0001",frame:{x:3681,y:1973,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.7,y:.2,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"BackButton0002",frame:{x:2717,y:1977,w:122,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:.7,y:.2,w:122,h:54},sourceSize:{w:122,h:54}},{filename:"Background1Graphics0000",frame:{x:3,y:3,w:700,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:700,h:525},sourceSize:{w:700,h:525}},{filename:"BasketBallGraphics0000",frame:{x:3180,y:1277,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.6,y:-17.6,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"BigBoxGraphics0000",frame:{x:2908,y:3015,w:50,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-25,w:50,h:50},sourceSize:{w:50,h:50}},{filename:"BigHelpMenuButton0000",frame:{x:1198,y:2118,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigHelpMenuButton0001",frame:{x:2594,y:2746,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigHelpMenuButton0002",frame:{x:2594,y:2746,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigPlankGraphics0000",frame:{x:691,y:3117,w:210,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-105,y:-10,w:210,h:20},sourceSize:{w:210,h:20}},{filename:"BouncerGraphics0000",frame:{x:1107,y:3172,w:64,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-58,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0001",frame:{x:407,y:3047,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0002",frame:{x:3555,y:3047,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0003",frame:{x:907,y:3048,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0004",frame:{x:1195,y:3048,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0005",frame:{x:2444,y:3049,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0006",frame:{x:815,y:3050,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0007",frame:{x:2371,y:3050,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0008",frame:{x:71,y:3051,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0009",frame:{x:700,y:3052,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0010",frame:{x:142,y:3055,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0011",frame:{x:1427,y:3058,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0012",frame:{x:1266,y:3059,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0013",frame:{x:1627,y:3063,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0014",frame:{x:1698,y:3063,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0015",frame:{x:2515,y:3063,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0016",frame:{x:2682,y:3065,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0017",frame:{x:3483,y:3067,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0018",frame:{x:2908,y:3068,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0019",frame:{x:3816,y:3071,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0020",frame:{x:1840,y:3072,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0021",frame:{x:1911,y:3073,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0022",frame:{x:213,y:3074,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0023",frame:{x:2753,y:3076,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0024",frame:{x:3626,y:3076,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0025",frame:{x:3995,y:3079,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0026",frame:{x:2240,y:3080,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0027",frame:{x:2824,y:3080,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0028",frame:{x:3887,y:3080,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0029",frame:{x:2979,y:3083,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0030",frame:{x:2068,y:3084,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0031",frame:{x:3174,y:3088,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0032",frame:{x:978,y:3089,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0033",frame:{x:1982,y:3091,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0034",frame:{x:1337,y:3099,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0035",frame:{x:1498,y:3099,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0036",frame:{x:1769,y:3099,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0037",frame:{x:3050,y:3100,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0038",frame:{x:478,y:3101,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0039",frame:{x:549,y:3101,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0040",frame:{x:620,y:3101,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0041",frame:{x:2139,y:3101,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0042",frame:{x:3368,y:3101,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0043",frame:{x:1049,y:3102,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0044",frame:{x:1049,y:3102,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0045",frame:{x:1049,y:3102,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0046",frame:{x:1049,y:3102,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0047",frame:{x:1120,y:3107,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0048",frame:{x:1120,y:3107,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0049",frame:{x:3245,y:3109,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0050",frame:{x:3015,y:1702,w:83,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0051",frame:{x:1666,y:1705,w:83,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0052",frame:{x:3578,y:1755,w:82,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0053",frame:{x:3265,y:1763,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0054",frame:{x:509,y:1707,w:82,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0055",frame:{x:3984,y:1708,w:81,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0056",frame:{x:244,y:1769,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0057",frame:{x:866,y:1712,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0058",frame:{x:2208,y:1671,w:81,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0059",frame:{x:1571,y:1712,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0060",frame:{x:3495,y:1712,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0061",frame:{x:1232,y:1770,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0062",frame:{x:4014,y:1799,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0063",frame:{x:3,y:1808,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0064",frame:{x:85,y:1808,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0065",frame:{x:1565,y:1804,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0066",frame:{x:3260,y:1853,w:79,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0067",frame:{x:2723,y:1866,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0068",frame:{x:3474,y:1804,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0069",frame:{x:2640,y:1805,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0070",frame:{x:3096,y:1808,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0071",frame:{x:3178,y:1811,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0072",frame:{x:1826,y:1820,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0073",frame:{x:2369,y:1770,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0074",frame:{x:3663,y:1771,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0075",frame:{x:3832,y:1771,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0076",frame:{x:2839,y:1710,w:81,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0077",frame:{x:1036,y:1774,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0078",frame:{x:2746,y:1775,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0079",frame:{x:3578,y:1664,w:82,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0080",frame:{x:587,y:1829,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0081",frame:{x:669,y:1829,w:79,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0082",frame:{x:2452,y:1855,w:79,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0083",frame:{x:2469,y:1672,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0084",frame:{x:3746,y:1706,w:83,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0085",frame:{x:1798,y:1999,w:84,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0086",frame:{x:3903,y:2137,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0087",frame:{x:3995,y:1613,w:80,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-80,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0088",frame:{x:3581,y:1136,w:84,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-80,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0089",frame:{x:3230,y:1616,w:74,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0090",frame:{x:4017,y:2298,w:69,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0091",frame:{x:2136,y:2533,w:72,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0092",frame:{x:2551,y:2074,w:83,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-71,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0093",frame:{x:2745,y:2247,w:77,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0094",frame:{x:1495,y:2231,w:82,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0095",frame:{x:526,y:2544,w:76,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0096",frame:{x:3006,y:2162,w:82,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-69,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0097",frame:{x:784,y:2149,w:76,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-70,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0098",frame:{x:84,y:2294,w:80,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0099",frame:{x:2057,y:2274,w:82,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0100",frame:{x:1198,y:2248,w:78,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-71,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0101",frame:{x:387,y:1948,w:86,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-69,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0102",frame:{x:336,y:1659,w:84,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-81,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0103",frame:{x:3499,y:2601,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0104",frame:{x:3414,y:2608,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0105",frame:{x:1647,y:2609,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0106",frame:{x:2744,y:2609,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0107",frame:{x:3740,y:2609,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0108",frame:{x:2987,y:2653,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0109",frame:{x:2125,y:2611,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0110",frame:{x:1281,y:2615,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0111",frame:{x:1440,y:2615,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0112",frame:{x:453,y:2618,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0113",frame:{x:1885,y:2e3,w:77,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0114",frame:{x:533,y:2618,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0115",frame:{x:1941,y:2657,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0116",frame:{x:2900,y:2659,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0117",frame:{x:1118,y:2207,w:77,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0118",frame:{x:3175,y:2621,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0119",frame:{x:3820,y:2621,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0120",frame:{x:2589,y:2627,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0121",frame:{x:2610,y:1276,w:89,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-71,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0122",frame:{x:751,y:1872,w:79,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-81,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0123",frame:{x:3796,y:234,w:76,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0124",frame:{x:89,y:1519,w:76,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0125",frame:{x:2196,y:2113,w:73,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0126",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0127",frame:{x:89,y:2215,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0128",frame:{x:2663,y:2216,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0129",frame:{x:917,y:1951,w:79,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0130",frame:{x:702,y:2218,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0131",frame:{x:2234,y:1294,w:88,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0132",frame:{x:3728,y:1888,w:82,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0133",frame:{x:2310,y:1945,w:78,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0134",frame:{x:3279,y:2397,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0135",frame:{x:3689,y:2438,w:70,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0136",frame:{x:1617,y:2363,w:72,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0137",frame:{x:450,y:1287,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0138",frame:{x:2498,y:1483,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0139",frame:{x:613,y:2623,w:68,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0140",frame:{x:267,y:1484,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0141",frame:{x:1873,y:1485,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0142",frame:{x:3325,y:1485,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0143",frame:{x:3666,y:1288,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0144",frame:{x:3753,y:1297,w:88,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-80,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0145",frame:{x:3983,y:2137,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0146",frame:{x:3827,y:1862,w:81,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-71,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0147",frame:{x:3432,y:1894,w:83,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0148",frame:{x:800,y:1978,w:85,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0149",frame:{x:2383,y:1585,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0150",frame:{x:623,y:1149,w:90,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0151",frame:{x:2463,y:1765,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0152",frame:{x:810,y:519,w:80,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-81,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0153",frame:{x:3051,y:1161,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-81,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0154",frame:{x:2856,y:1520,w:87,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0155",frame:{x:1421,y:1938,w:75,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0156",frame:{x:167,y:1741,w:74,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0157",frame:{x:3349,y:1805,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0158",frame:{x:3349,y:1805,w:80,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0159",frame:{x:2292,y:1744,w:74,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0160",frame:{x:2391,y:1945,w:78,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0161",frame:{x:3,y:1422,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0162",frame:{x:2168,y:2019,w:75,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0163",frame:{x:697,y:1550,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0164",frame:{x:2272,y:2120,w:68,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-69,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0165",frame:{x:2151,y:1849,w:74,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-71,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0166",frame:{x:1481,y:1768,w:81,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0167",frame:{x:476,y:1973,w:75,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0168",frame:{x:1797,y:1431,w:73,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0169",frame:{x:3376,y:1384,w:82,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0170",frame:{x:3,y:1899,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0171",frame:{x:1659,y:2114,w:73,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0172",frame:{x:2123,y:1506,w:84,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-69,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0173",frame:{x:3557,y:1844,w:81,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0174",frame:{x:2472,y:2014,w:76,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0175",frame:{x:617,y:1529,w:77,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0176",frame:{x:1342,y:2122,w:71,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0177",frame:{x:3055,y:1428,w:92,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0178",frame:{x:2146,y:1251,w:85,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0179",frame:{x:698,y:1460,w:89,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0180",frame:{x:3811,y:1617,w:85,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0181",frame:{x:841,y:1804,w:82,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0182",frame:{x:1906,y:1153,w:90,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0183",frame:{x:2274,y:1081,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-80,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0184",frame:{x:2964,y:1142,w:84,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0185",frame:{x:1099,y:1145,w:84,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-79,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0186",frame:{x:182,y:1368,w:88,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-70,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0187",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0188",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0189",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0190",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0191",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0192",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0193",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0194",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0195",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0196",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0197",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0198",frame:{x:364,y:1258,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0199",frame:{x:182,y:1368,w:88,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-70,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0200",frame:{x:3412,y:1528,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-77,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0201",frame:{x:1472,y:1858,w:89,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0202",frame:{x:554,y:2008,w:84,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0203",frame:{x:3,y:1519,w:83,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-70,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0204",frame:{x:164,y:1174,w:84,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0205",frame:{x:4011,y:1423,w:79,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-77,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0206",frame:{x:2414,y:1386,w:81,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-77,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0207",frame:{x:2126,y:1405,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0208",frame:{x:2663,y:1713,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0209",frame:{x:965,y:1408,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0210",frame:{x:641,y:2008,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0211",frame:{x:3833,y:1516,w:78,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0212",frame:{x:3914,y:1518,w:78,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0213",frame:{x:3840,y:1415,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0214",frame:{x:2413,y:1488,w:82,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0215",frame:{x:3410,y:1621,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0216",frame:{x:3307,y:1671,w:81,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0217",frame:{x:3725,y:1586,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0218",frame:{x:3116,y:1623,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0219",frame:{x:3391,y:1713,w:80,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0220",frame:{x:90,y:1422,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0221",frame:{x:1140,y:1512,w:86,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0222",frame:{x:3752,y:1393,w:85,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0223",frame:{x:1941,y:1588,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0224",frame:{x:1229,y:1512,w:86,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0225",frame:{x:1627,y:1424,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0226",frame:{x:177,y:1463,w:87,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0227",frame:{x:3235,y:1524,w:85,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0228",frame:{x:1460,y:1376,w:83,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0229",frame:{x:1119,y:1777,w:88,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0230",frame:{x:2874,y:1428,w:88,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0231",frame:{x:3461,y:1431,w:83,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0232",frame:{x:2325,y:1368,w:86,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0233",frame:{x:2771,y:1492,w:82,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0234",frame:{x:1908,y:1820,w:78,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0235",frame:{x:949,y:1786,w:79,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0236",frame:{x:1720,y:1939,w:75,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0237",frame:{x:3006,y:1975,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0238",frame:{x:1648,y:1887,w:69,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0239",frame:{x:3756,y:2103,w:70,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0240",frame:{x:2123,y:2108,w:70,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0241",frame:{x:3577,y:2110,w:70,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0242",frame:{x:2941,y:2067,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0243",frame:{x:3015,y:2070,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0244",frame:{x:3089,y:2070,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0245",frame:{x:3409,y:2070,w:71,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0246",frame:{x:3502,y:2020,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0247",frame:{x:3251,y:2025,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0248",frame:{x:1185,y:2026,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0249",frame:{x:387,y:2028,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0250",frame:{x:1380,y:2030,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0251",frame:{x:3681,y:2030,w:72,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0252",frame:{x:3426,y:1978,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0253",frame:{x:1499,y:1981,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0254",frame:{x:2616,y:1982,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0255",frame:{x:3,y:1987,w:73,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0256",frame:{x:866,y:2128,w:77,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0257",frame:{x:301,y:2222,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0258",frame:{x:833,y:2374,w:70,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0259",frame:{x:718,y:1961,w:79,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-70,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0260",frame:{x:708,y:2483,w:68,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0261",frame:{x:1053,y:2556,w:68,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0262",frame:{x:3,y:2252,w:78,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0263",frame:{x:2692,y:2034,w:74,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0264",frame:{x:3166,y:1990,w:82,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0265",frame:{x:1260,y:2090,w:79,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0266",frame:{x:702,y:2138,w:79,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0267",frame:{x:3819,y:2219,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0268",frame:{x:3901,y:2219,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0269",frame:{x:3983,y:2219,w:79,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0270",frame:{x:85,y:1899,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0271",frame:{x:3089,y:1899,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0272",frame:{x:3171,y:1902,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0273",frame:{x:1818,y:1911,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0274",frame:{x:1900,y:1912,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0275",frame:{x:554,y:1920,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0276",frame:{x:636,y:1920,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0277",frame:{x:2534,y:1926,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0278",frame:{x:1119,y:1927,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0279",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0280",frame:{x:2228,y:1931,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0281",frame:{x:526,y:1619,w:86,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0282",frame:{x:3541,y:2278,w:77,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0283",frame:{x:2411,y:2102,w:82,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0284",frame:{x:2004,y:2428,w:72,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0285",frame:{x:946,y:2128,w:81,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0286",frame:{x:1666,y:1619,w:88,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-70,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0287",frame:{x:1564,y:1894,w:80,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-71,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0288",frame:{x:2547,y:1841,w:84,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0289",frame:{x:1869,y:1250,w:97,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0290",frame:{x:305,y:2449,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0291",frame:{x:204,y:2563,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0292",frame:{x:371,y:2563,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0293",frame:{x:685,y:2567,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0294",frame:{x:2211,y:2572,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0295",frame:{x:3958,y:2572,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0296",frame:{x:3584,y:2575,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0297",frame:{x:1810,y:2577,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0298",frame:{x:1892,y:2577,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0299",frame:{x:3004,y:2582,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0300",frame:{x:1974,y:2586,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0301",frame:{x:2905,y:2588,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0302",frame:{x:1892,y:2577,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0303",frame:{x:3004,y:2582,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0304",frame:{x:1974,y:2586,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0305",frame:{x:2905,y:2588,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0306",frame:{x:1892,y:2577,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0307",frame:{x:3004,y:2582,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0308",frame:{x:1974,y:2586,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0309",frame:{x:2293,y:2592,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0310",frame:{x:2375,y:2593,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0311",frame:{x:841,y:2595,w:79,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0312",frame:{x:895,y:2524,w:80,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0313",frame:{x:3135,y:2449,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0314",frame:{x:321,y:2378,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0315",frame:{x:1165,y:2327,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0316",frame:{x:2711,y:2327,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0317",frame:{x:1945,y:2331,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0318",frame:{x:2971,y:2344,w:84,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0319",frame:{x:3193,y:2378,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0320",frame:{x:906,y:2382,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0321",frame:{x:2798,y:2384,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0322",frame:{x:3771,y:2384,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0323",frame:{x:906,y:2453,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0324",frame:{x:2774,y:2455,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0325",frame:{x:3762,y:2455,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0326",frame:{x:3847,y:2455,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0327",frame:{x:623,y:2457,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0328",frame:{x:810,y:2458,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0329",frame:{x:1038,y:2103,w:82,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0330",frame:{x:1427,y:2458,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0331",frame:{x:1455,y:2073,w:82,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0332",frame:{x:1289,y:2459,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0333",frame:{x:3390,y:2274,w:82,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0334",frame:{x:3932,y:2460,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0335",frame:{x:1663,y:2461,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0336",frame:{x:3437,y:2461,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0337",frame:{x:3437,y:2461,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0338",frame:{x:3437,y:2461,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0339",frame:{x:2162,y:2462,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0340",frame:{x:2516,y:2463,w:82,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0341",frame:{x:3857,y:2384,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0342",frame:{x:1427,y:2387,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0343",frame:{x:3943,y:2389,w:83,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0344",frame:{x:3815,y:826,w:85,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0345",frame:{x:1814,y:2087,w:87,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0346",frame:{x:2795,y:2176,w:89,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0347",frame:{x:3756,y:2032,w:94,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0348",frame:{x:3820,y:2693,w:75,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0349",frame:{x:2342,y:2806,w:72,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0350",frame:{x:1203,y:2637,w:72,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0351",frame:{x:3467,y:2819,w:71,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0352",frame:{x:3541,y:2861,w:70,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0353",frame:{x:3231,y:2753,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0354",frame:{x:584,y:2754,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0355",frame:{x:1264,y:2754,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0356",frame:{x:660,y:2758,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0357",frame:{x:736,y:2758,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0358",frame:{x:812,y:2758,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0359",frame:{x:3130,y:2759,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0360",frame:{x:2579,y:2862,w:70,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0361",frame:{x:1668,y:2763,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0362",frame:{x:3811,y:2764,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0363",frame:{x:421,y:2767,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0364",frame:{x:497,y:2767,w:73,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0365",frame:{x:2352,y:2734,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0366",frame:{x:2094,y:2735,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0367",frame:{x:2266,y:2743,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0368",frame:{x:256,y:2746,w:73,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0369",frame:{x:1589,y:2819,w:70,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0370",frame:{x:2411,y:2181,w:70,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0371",frame:{x:304,y:2132,w:70,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0372",frame:{x:314,y:1943,w:70,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-73,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0373",frame:{x:951,y:2207,w:69,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0374",frame:{x:2336,y:2216,w:69,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0375",frame:{x:3049,y:2254,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0376",frame:{x:3319,y:2223,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0377",frame:{x:458,y:2227,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0378",frame:{x:529,y:2255,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0379",frame:{x:1023,y:2256,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0380",frame:{x:3731,y:2269,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0381",frame:{x:600,y:2270,w:68,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0382",frame:{x:1279,y:2286,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0383",frame:{x:1094,y:2288,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0384",frame:{x:2217,y:2288,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0385",frame:{x:2288,y:2306,w:68,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-64,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0386",frame:{x:3,y:2331,w:68,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0387",frame:{x:3091,y:2162,w:68,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-68,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0388",frame:{x:1799,y:2246,w:70,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0389",frame:{x:3162,y:2231,w:68,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0390",frame:{x:1339,y:1932,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0391",frame:{x:3518,y:1932,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0392",frame:{x:3518,y:1932,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0393",frame:{x:3518,y:1932,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0394",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0395",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0396",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0397",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0398",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0399",frame:{x:4011,y:1890,w:79,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0400",frame:{x:367,y:1169,w:98,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0401",frame:{x:3081,y:1277,w:96,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0402",frame:{x:1136,y:1697,w:93,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0403",frame:{x:3726,y:703,w:93,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-87,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0404",frame:{x:2046,y:1148,w:93,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-77,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0405",frame:{x:3876,y:1222,w:93,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0406",frame:{x:86,y:1277,w:93,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-75,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0407",frame:{x:484,y:728,w:96,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-83,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0408",frame:{x:3972,y:1222,w:93,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0409",frame:{x:1773,y:1226,w:93,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-76,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0410",frame:{x:2177,y:1051,w:94,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0411",frame:{x:1969,y:1303,w:95,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-72,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0412",frame:{x:3055,y:1516,w:85,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0413",frame:{x:167,y:1840,w:70,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-86,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0414",frame:{x:360,y:739,w:85,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-89,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0415",frame:{x:481,y:1873,w:70,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0416",frame:{x:1315,y:1770,w:73,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0417",frame:{x:551,y:1246,w:81,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0418",frame:{x:95,y:658,w:81,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0419",frame:{x:1914,y:915,w:81,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0420",frame:{x:2915,y:1246,w:81,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0421",frame:{x:1087,y:1249,w:81,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0422",frame:{x:93,y:778,w:81,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0423",frame:{x:3320,y:1165,w:81,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0424",frame:{x:3991,y:1026,w:83,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0425",frame:{x:450,y:1062,w:83,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0426",frame:{x:1523,y:1162,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0427",frame:{x:3235,y:1165,w:82,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0428",frame:{x:3136,y:1170,w:81,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0429",frame:{x:2748,y:1108,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0430",frame:{x:3497,y:1112,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0431",frame:{x:1440,y:1145,w:80,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0432",frame:{x:2361,y:1081,w:80,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-94,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0433",frame:{x:81,y:1146,w:80,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0434",frame:{x:912,y:1205,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0435",frame:{x:635,y:1258,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0436",frame:{x:2527,y:1175,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0437",frame:{x:1382,y:1254,w:80,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0438",frame:{x:2524,y:1283,w:79,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0439",frame:{x:1547,y:1291,w:79,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0440",frame:{x:279,y:1278,w:80,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0441",frame:{x:3931,y:1315,w:79,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0442",frame:{x:882,y:1314,w:80,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-89,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0443",frame:{x:2606,y:1372,w:79,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-89,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0444",frame:{x:1773,y:1319,w:79,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0445",frame:{x:799,y:1283,w:80,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-90,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0446",frame:{x:3,y:1255,w:80,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0447",frame:{x:3404,y:1175,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0448",frame:{x:717,y:1258,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0449",frame:{x:2714,y:1216,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0450",frame:{x:2444,y:1081,w:80,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-94,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0451",frame:{x:3487,y:1220,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0452",frame:{x:1691,y:1222,w:79,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0453",frame:{x:3663,y:1027,w:82,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0454",frame:{x:2999,y:1267,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0455",frame:{x:468,y:1179,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0456",frame:{x:1608,y:1183,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0457",frame:{x:3415,y:1063,w:79,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0458",frame:{x:3149,y:1063,w:83,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0459",frame:{x:3991,y:1026,w:83,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0460",frame:{x:2787,y:1394,w:84,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0461",frame:{x:2006,y:1697,w:77,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-88,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0462",frame:{x:362,y:1361,w:80,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0463",frame:{x:1351,y:753,w:83,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0464",frame:{x:3,y:1093,w:75,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0465",frame:{x:1788,y:1541,w:69,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0466",frame:{x:327,y:1843,w:71,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0467",frame:{x:273,y:1384,w:83,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0468",frame:{x:1587,y:1612,w:76,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0469",frame:{x:2041,y:1405,w:82,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0470",frame:{x:3499,y:1612,w:76,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0471",frame:{x:3568,y:1424,w:81,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0472",frame:{x:1752,y:1747,w:71,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0473",frame:{x:2112,y:1693,w:74,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-92,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0474",frame:{x:537,y:1419,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0475",frame:{x:167,y:1942,w:68,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0476",frame:{x:3748,y:1100,w:86,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0477",frame:{x:874,y:1419,w:81,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-93,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0478",frame:{x:280,y:1171,w:81,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-91,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0479",frame:{x:2583,y:1658,w:77,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-89,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0480",frame:{x:632,y:940,w:81,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-88,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0481",frame:{x:3731,y:807,w:81,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-86,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0482",frame:{x:2935,y:1702,w:77,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0483",frame:{x:781,y:752,w:93,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0484",frame:{x:783,y:1595,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0485",frame:{x:1465,y:1268,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0486",frame:{x:2832,y:1183,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0487",frame:{x:1738,y:1114,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0488",frame:{x:1822,y:1118,w:81,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0489",frame:{x:195,y:1066,w:82,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0490",frame:{x:448,y:828,w:86,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0491",frame:{x:2255,y:621,w:93,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0492",frame:{x:370,y:936,w:86,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0493",frame:{x:994,y:1252,w:85,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0494",frame:{x:3220,y:1271,w:79,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0495",frame:{x:359,y:1465,w:79,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0496",frame:{x:4010,y:336,w:83,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0497",frame:{x:3545,y:633,w:79,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0498",frame:{x:1989,y:1793,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0499",frame:{x:2443,y:1277,w:78,h:106},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0500",frame:{x:3822,y:703,w:78,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0501",frame:{x:551,y:960,w:78,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0502",frame:{x:677,y:821,w:78,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0503",frame:{x:3,y:1614,w:78,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0504",frame:{x:2070,y:1793,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0505",frame:{x:3910,y:898,w:79,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0506",frame:{x:3,y:1715,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0507",frame:{x:85,y:1715,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0508",frame:{x:3101,y:1715,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0509",frame:{x:3183,y:1718,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0510",frame:{x:594,y:1736,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0511",frame:{x:1402,y:628,w:79,h:122},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0512",frame:{x:790,y:1496,w:80,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0513",frame:{x:367,y:1043,w:80,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0514",frame:{x:1488,y:1675,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0515",frame:{x:252,y:1676,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0516",frame:{x:2040,y:1505,w:80,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0517",frame:{x:2380,y:1677,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0518",frame:{x:1840,y:1678,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0519",frame:{x:3663,y:1678,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0520",frame:{x:1923,y:1680,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0521",frame:{x:816,y:628,w:80,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0522",frame:{x:2263,y:1186,w:80,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0523",frame:{x:2688,y:1427,w:80,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0524",frame:{x:899,y:628,w:80,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0525",frame:{x:2756,y:1682,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0526",frame:{x:277,y:746,w:80,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0527",frame:{x:2324,y:1465,w:86,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0528",frame:{x:783,y:1688,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0529",frame:{x:615,y:1643,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0530",frame:{x:699,y:1643,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0531",frame:{x:954,y:1600,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0532",frame:{x:168,y:1555,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0533",frame:{x:3284,y:746,w:83,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0534",frame:{x:1318,y:1600,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0535",frame:{x:2123,y:1600,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0536",frame:{x:2689,y:753,w:82,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0537",frame:{x:1039,y:1601,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0538",frame:{x:2124,y:623,w:82,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0539",frame:{x:1124,y:1604,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0540",frame:{x:2297,y:1558,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0541",frame:{x:2585,y:1565,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0542",frame:{x:3370,y:746,w:83,h:111},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0543",frame:{x:1821,y:665,w:83,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0544",frame:{x:3716,y:533,w:83,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0545",frame:{x:2612,y:546,w:83,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0546",frame:{x:354,y:1566,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0547",frame:{x:440,y:1569,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0548",frame:{x:3629,y:533,w:84,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0549",frame:{x:1209,y:1604,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0550",frame:{x:2027,y:1604,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0551",frame:{x:1415,y:1569,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0552",frame:{x:3639,y:1571,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0553",frame:{x:615,y:531,w:83,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0554",frame:{x:2210,y:1578,w:83,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0555",frame:{x:2290,y:281,w:92,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0556",frame:{x:2946,y:1609,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0557",frame:{x:3031,y:1609,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0558",frame:{x:1487,y:936,w:82,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0559",frame:{x:1173,y:628,w:82,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0560",frame:{x:3787,y:3,w:84,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0561",frame:{x:168,y:1648,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0562",frame:{x:2296,y:1651,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0563",frame:{x:102,y:531,w:81,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0564",frame:{x:953,y:1693,w:80,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0565",frame:{x:2209,y:729,w:80,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0566",frame:{x:676,y:1736,w:79,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0567",frame:{x:4004,y:694,w:79,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0568",frame:{x:3143,y:1530,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0569",frame:{x:1420,y:1476,w:86,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0570",frame:{x:1654,y:1794,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0571",frame:{x:3746,y:1795,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BouncerGraphics0572",frame:{x:1736,y:552,w:82,h:120},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-85,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"BoxGraphics0000",frame:{x:1691,y:1183,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"BulletFxGraphics0000",frame:{x:3036,y:550,w:15,h:9},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.1,y:-4.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0001",frame:{x:1531,y:798,w:41,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.1,y:-19.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0002",frame:{x:2067,y:1303,w:54,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29.1,y:-21.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0003",frame:{x:2883,y:3272,w:54,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.1,y:-26.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0004",frame:{x:2572,y:3233,w:56,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.1,y:-27.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletFxGraphics0005",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-.8,w:57,h:53},sourceSize:{w:57,h:53}},{filename:"BulletGraphics0000",frame:{x:2800,y:293,w:11,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5.4,y:-3.8,w:11,h:7},sourceSize:{w:11,h:7}},{filename:"BurgerGraphics0000",frame:{x:781,y:715,w:30,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14.9,y:-20.7,w:30,h:34},sourceSize:{w:30,h:34}},{filename:"BurgerIndicator0000",frame:{x:958,y:2849,w:114,h:42},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.8,y:-3.5,w:114,h:42},sourceSize:{w:114,h:42}},{filename:"BurgerSmallGraphics0000",frame:{x:3514,y:690,w:27,h:29},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14.2,y:-17.5,w:27,h:29},sourceSize:{w:27,h:29}},{filename:"CameraGraphics0000",frame:{x:1062,y:819,w:26,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6,y:-10,w:26,h:24},sourceSize:{w:26,h:24}},{filename:"CameraGun0000",frame:{x:2448,y:665,w:24,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-10.9,w:68,h:23},sourceSize:{w:68,h:23}},{filename:"CameraGun0001",frame:{x:1665,y:640,w:68,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-11.9,w:68,h:23},sourceSize:{w:68,h:23}},{filename:"CreditsButton0000",frame:{x:3211,y:1379,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"DadGraphics0000",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0001",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0002",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0003",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0004",frame:{x:2837,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0005",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0006",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0007",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0008",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0009",frame:{x:3226,y:3023,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0010",frame:{x:3226,y:3023,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0011",frame:{x:982,y:3024,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0012",frame:{x:982,y:3024,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0013",frame:{x:1997,y:3026,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0014",frame:{x:1997,y:3026,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0015",frame:{x:1997,y:3026,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0016",frame:{x:3226,y:3023,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0017",frame:{x:3226,y:3023,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0018",frame:{x:3226,y:3023,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0019",frame:{x:3226,y:3023,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0020",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0021",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0022",frame:{x:2098,y:3019,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0023",frame:{x:1356,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0024",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0025",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0026",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0027",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0028",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0029",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0030",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0031",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0032",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0033",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0034",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0035",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0036",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0037",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0038",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0039",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0040",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0041",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0042",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0043",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0044",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0045",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0046",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0047",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0048",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0049",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0050",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0051",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0052",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0053",frame:{x:487,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0054",frame:{x:487,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0055",frame:{x:487,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0056",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0057",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0058",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0059",frame:{x:3103,y:3035,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0060",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0061",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0062",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0063",frame:{x:1769,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0064",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0065",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0066",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0067",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0068",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0069",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0070",frame:{x:1556,y:3034,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0071",frame:{x:558,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0072",frame:{x:558,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0073",frame:{x:558,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0074",frame:{x:629,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0075",frame:{x:629,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0076",frame:{x:629,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0077",frame:{x:629,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0078",frame:{x:629,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0079",frame:{x:2169,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0080",frame:{x:2169,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0081",frame:{x:2169,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0082",frame:{x:2169,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0083",frame:{x:2169,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0084",frame:{x:3412,y:3036,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0085",frame:{x:2300,y:3015,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0086",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0087",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0088",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0089",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0090",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0091",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0092",frame:{x:1053,y:3037,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0093",frame:{x:1124,y:3042,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0094",frame:{x:1124,y:3042,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0095",frame:{x:1124,y:3042,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0096",frame:{x:1124,y:3042,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0097",frame:{x:1124,y:3042,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0098",frame:{x:1124,y:3042,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0099",frame:{x:3297,y:3044,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0100",frame:{x:3297,y:3044,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0101",frame:{x:3745,y:3044,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0102",frame:{x:2611,y:3046,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0103",frame:{x:336,y:3047,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0104",frame:{x:336,y:3047,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0105",frame:{x:336,y:3047,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"DadGraphics0106",frame:{x:336,y:3047,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-58.3,w:68,h:62},sourceSize:{w:68,h:62}},{filename:"Decor10Graphics0000",frame:{x:3120,y:2254,w:38,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-57.7,w:38,h:57},sourceSize:{w:38,h:57}},{filename:"Decor11Graphics0000",frame:{x:4070,y:151,w:19,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.7,y:-66.2,w:19,h:66},sourceSize:{w:19,h:66}},{filename:"Decor12Graphics0000",frame:{x:2797,y:651,w:24,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-32.9,w:24,h:32},sourceSize:{w:24,h:32}},{filename:"Decor13Graphics0000",frame:{x:3637,y:757,w:86,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.3,y:-34.8,w:86,h:34},sourceSize:{w:86,h:34}},{filename:"Decor14Graphics0000",frame:{x:2547,y:690,w:43,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:-77.4,w:43,h:77},sourceSize:{w:43,h:77}},{filename:"Decor15Graphics0000",frame:{x:129,y:2672,w:60,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-86.2,w:60,h:86},sourceSize:{w:60,h:86}},{filename:"Decor16Graphics0000",frame:{x:1435,y:2971,w:52,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.2,y:-76.3,w:52,h:84},sourceSize:{w:52,h:84}},{filename:"Decor17Graphics0000",frame:{x:2517,y:242,w:38,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:.4,y:-49.2,w:38,h:48},sourceSize:{w:38,h:48}},{filename:"Decor18Graphics0000",frame:{x:1024,y:2894,w:38,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.2,y:-49.6,w:38,h:49},sourceSize:{w:38,h:49}},{filename:"Decor19Graphics0000",frame:{x:3183,y:395,w:40,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-23.2,w:40,h:23},sourceSize:{w:40,h:23}},{filename:"Decor1Graphics0000",frame:{x:4036,y:556,w:54,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-20,w:54,h:20},sourceSize:{w:54,h:20}},{filename:"Decor20Graphics0000",frame:{x:2437,y:2355,w:41,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-56.7,w:41,h:56},sourceSize:{w:41,h:56}},{filename:"Decor21Graphics0000",frame:{x:1659,y:1988,w:51,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-38.1,w:51,h:38},sourceSize:{w:51,h:38}},{filename:"Decor22Graphics0000",frame:{x:2081,y:1886,w:64,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-54.3,w:64,h:54},sourceSize:{w:64,h:54}},{filename:"Decor23Graphics0000",frame:{x:1583,y:697,w:68,h:138},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-135.3,w:68,h:138},sourceSize:{w:68,h:138}},{filename:"Decor24Graphics0000",frame:{x:3571,y:961,w:48,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.2,y:-45.4,w:48,h:45},sourceSize:{w:48,h:45}},{filename:"Decor25Graphics0000",frame:{x:2094,y:2683,w:105,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-49.3,w:105,h:49},sourceSize:{w:105,h:49}},{filename:"Decor26Graphics0000",frame:{x:1116,y:2822,w:105,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-46.6,w:105,h:46},sourceSize:{w:105,h:46}},{filename:"Decor27Graphics0000",frame:{x:1023,y:3235,w:87,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-36,w:87,h:36},sourceSize:{w:87,h:36}},{filename:"Decor2Graphics0000",frame:{x:1756,y:986,w:53,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.9,y:-20,w:53,h:19},sourceSize:{w:53,h:19}},{filename:"Decor3Graphics0000",frame:{x:1487,y:901,w:33,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-26.8,w:33,h:26},sourceSize:{w:33,h:26}},{filename:"Decor4Graphics0000",frame:{x:2736,y:867,w:35,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-26,w:35,h:26},sourceSize:{w:35,h:26}},{filename:"Decor5Graphics0000",frame:{x:1998,y:915,w:22,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-31.2,w:22,h:31},sourceSize:{w:22,h:31}},{filename:"Decor6Graphics0000",frame:{x:3832,y:1711,w:125,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-57.3,w:125,h:57},sourceSize:{w:125,h:57}},{filename:"Decor7Graphics0000",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0001",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0002",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0003",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0004",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0005",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0006",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0007",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0008",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0009",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0010",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0011",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0012",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0013",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0014",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0015",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0016",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0017",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0018",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0019",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0020",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0021",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0022",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0023",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0024",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0025",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0026",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0027",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0028",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0029",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0030",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0031",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0032",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0033",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0034",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0035",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0036",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0037",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0038",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0039",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0040",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0041",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0042",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0043",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0044",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0045",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0046",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0047",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0048",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0049",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0050",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0051",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0052",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0053",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0054",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0055",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0056",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0057",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0058",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0059",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0060",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0061",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0062",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0063",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0064",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0065",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0066",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0067",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0068",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0069",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0070",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0071",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0072",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0073",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0074",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0075",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0076",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0077",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0078",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0079",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0080",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0081",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0082",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0083",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0084",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0085",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0086",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0087",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0088",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0089",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0090",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0091",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0092",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0093",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0094",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0095",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0096",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0097",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0098",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0099",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0100",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0101",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0102",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0103",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0104",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0105",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0106",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0107",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0108",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0109",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0110",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0111",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0112",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0113",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0114",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0115",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0116",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0117",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0118",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0119",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0120",frame:{x:3054,y:809,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0121",frame:{x:3054,y:809,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0122",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0123",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0124",frame:{x:3054,y:809,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0125",frame:{x:3054,y:809,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0126",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor7Graphics0127",frame:{x:1617,y:525,w:42,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-20,w:42,h:20},sourceSize:{w:42,h:20}},{filename:"Decor8Graphics0000",frame:{x:588,y:630,w:24,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-21.3,w:24,h:21},sourceSize:{w:24,h:21}},{filename:"Decor9Graphics0000",frame:{x:4010,y:460,w:18,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.7,y:-21.8,w:18,h:21},sourceSize:{w:18,h:21}},{filename:"DoorGraphics0000",frame:{x:3006,y:641,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0001",frame:{x:2096,y:644,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0002",frame:{x:448,y:739,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0003",frame:{x:1159,y:846,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0004",frame:{x:2090,y:953,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"DoorGraphics0005",frame:{x:2527,y:1081,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"ElectroSplashGraphics0000",frame:{x:360,y:707,w:31,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-16,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0001",frame:{x:537,y:828,w:42,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0002",frame:{x:2316,y:949,w:54,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-13.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0003",frame:{x:2626,y:376,w:59,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-16.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0004",frame:{x:2941,y:2023,w:51,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-22.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0005",frame:{x:1344,y:967,w:44,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:-8,y:-29.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0006",frame:{x:1629,y:1291,w:50,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-32.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0007",frame:{x:1443,y:1002,w:36,h:37},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-32.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0008",frame:{x:2796,y:1216,w:33,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-40.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0009",frame:{x:3827,y:305,w:36,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-44.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0010",frame:{x:2832,y:1108,w:22,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6,y:-30.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0011",frame:{x:3860,y:126,w:10,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-19.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0012",frame:{x:3866,y:305,w:5,h:13},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2,y:-18.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0013",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"ElectroSplashGraphics0014",frame:{x:360,y:707,w:31,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-16,y:-10.6,w:76,h:73},sourceSize:{w:76,h:73}},{filename:"EnemyLimiterGraphics0000",frame:{x:2271,y:408,w:15,h:15},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.5,y:-7.5,w:15,h:15},sourceSize:{w:15,h:15}},{filename:"ExitGraphics0000",frame:{x:1984,y:2178,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0001",frame:{x:1984,y:2178,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0002",frame:{x:541,y:2181,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0003",frame:{x:1030,y:2182,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0004",frame:{x:3731,y:2195,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0005",frame:{x:2072,y:2200,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0006",frame:{x:3403,y:2200,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0007",frame:{x:2160,y:2201,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0008",frame:{x:1623,y:2202,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0009",frame:{x:1711,y:2202,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0010",frame:{x:3491,y:2202,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0011",frame:{x:2575,y:2204,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0012",frame:{x:3579,y:2204,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0013",frame:{x:863,y:2211,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0014",frame:{x:1284,y:2212,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0015",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0016",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0017",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0018",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0019",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0020",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0021",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0022",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0023",frame:{x:2248,y:2214,w:85,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0024",frame:{x:1617,y:552,w:116,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61,y:-37.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0025",frame:{x:2479,y:600,w:113,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-39.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0026",frame:{x:394,y:531,w:111,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0027",frame:{x:701,y:625,w:112,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55,y:-35.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0028",frame:{x:982,y:734,w:113,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-47.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0029",frame:{x:1509,y:1503,w:100,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-37.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0030",frame:{x:2316,y:995,w:106,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-54,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0031",frame:{x:1665,y:675,w:105,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-48.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0032",frame:{x:1848,y:1029,w:101,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0033",frame:{x:97,y:1052,w:95,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-43.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0034",frame:{x:1443,y:1048,w:92,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0035",frame:{x:1098,y:749,w:98,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-42.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0036",frame:{x:2188,y:848,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0037",frame:{x:2283,y:848,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0038",frame:{x:2028,y:852,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0039",frame:{x:3802,y:602,w:100,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0040",frame:{x:758,y:854,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0041",frame:{x:853,y:857,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0042",frame:{x:3152,y:858,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0043",frame:{x:537,y:859,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0044",frame:{x:3247,y:860,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0045",frame:{x:3342,y:860,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0046",frame:{x:3437,y:860,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0047",frame:{x:3532,y:860,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0048",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0049",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0050",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0051",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0052",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0053",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0054",frame:{x:275,y:863,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0055",frame:{x:1297,y:866,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0056",frame:{x:2641,y:867,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0057",frame:{x:1629,y:871,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0058",frame:{x:2479,y:878,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0059",frame:{x:1724,y:885,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0060",frame:{x:3,y:893,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0061",frame:{x:2378,y:894,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0062",frame:{x:3815,y:898,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0063",frame:{x:2736,y:900,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0064",frame:{x:1392,y:901,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0065",frame:{x:2831,y:906,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0066",frame:{x:3627,y:910,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0067",frame:{x:1819,y:912,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"ExitGraphics0068",frame:{x:1819,y:912,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-46.1,w:121,h:100},sourceSize:{w:121,h:100}},{filename:"FightingGraphics0000",frame:{x:1536,y:2307,w:39,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.3,y:-19.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0001",frame:{x:898,y:3178,w:62,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31.3,y:-22.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0002",frame:{x:1031,y:1865,w:85,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43.3,y:-36.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0003",frame:{x:2038,y:433,w:109,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-51.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0004",frame:{x:3697,y:425,w:111,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-53.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0005",frame:{x:3066,y:395,w:114,h:108},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-55.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0006",frame:{x:2038,y:321,w:116,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59.4,y:-56.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0007",frame:{x:3470,y:305,w:119,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-58.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0008",frame:{x:2941,y:305,w:122,h:115},rotated:!1,trimmed:!0,spriteSourceSize:{x:-62.4,y:-60.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0009",frame:{x:1062,y:846,w:94,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.4,y:-51.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0010",frame:{x:2514,y:376,w:109,h:113},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-63.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0011",frame:{x:3713,y:305,w:111,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59.4,y:-65.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0012",frame:{x:3353,y:305,w:114,h:119},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-66.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0013",frame:{x:2822,y:305,w:116,h:121},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-67.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0014",frame:{x:2167,y:281,w:120,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-63.4,y:-69.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0015",frame:{x:3875,y:223,w:122,h:127},rotated:!1,trimmed:!0,spriteSourceSize:{x:-64.4,y:-70.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0016",frame:{x:991,y:515,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-49.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0017",frame:{x:1096,y:515,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-55.4,y:-49.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0018",frame:{x:2831,y:429,w:104,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0019",frame:{x:1918,y:434,w:104,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0020",frame:{x:3310,y:427,w:108,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0021",frame:{x:1918,y:321,w:117,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-53.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0022",frame:{x:3592,y:305,w:118,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-54.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0023",frame:{x:3230,y:305,w:120,h:116},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57.4,y:-56.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0024",frame:{x:2697,y:305,w:122,h:118},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58.4,y:-57.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0025",frame:{x:2386,y:279,w:125,h:122},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-59.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0026",frame:{x:2386,y:152,w:128,h:124},rotated:!1,trimmed:!0,spriteSourceSize:{x:-62.4,y:-60.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0027",frame:{x:3584,y:420,w:110,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0028",frame:{x:2941,y:423,w:110,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-60.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0029",frame:{x:2290,y:404,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0030",frame:{x:2157,y:408,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"FightingGraphics0031",frame:{x:3470,y:420,w:111,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.4,y:-50.6,w:130,h:134},sourceSize:{w:130,h:134}},{filename:"Fragment1Graphics0000",frame:{x:3238,y:626,w:19,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9.1,y:-3.5,w:19,h:7},sourceSize:{w:19,h:7}},{filename:"Fragment2Graphics0000",frame:{x:3036,y:562,w:15,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.1,y:-3.3,w:15,h:7},sourceSize:{w:15,h:7}},{filename:"Fragment3Graphics0000",frame:{x:2612,y:492,w:11,h:5},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5.4,y:-2.6,w:11,h:5},sourceSize:{w:11,h:5}},{filename:"GlassDoorGraphics0000",frame:{x:4070,y:3,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0001",frame:{x:4070,y:77,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0002",frame:{x:2479,y:521,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0003",frame:{x:2124,y:538,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0004",frame:{x:2698,y:546,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"GlassDoorGraphics0005",frame:{x:367,y:633,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"Guardian2Graphics0000",frame:{x:874,y:3241,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0001",frame:{x:247,y:3242,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0002",frame:{x:1170,y:3243,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0003",frame:{x:2401,y:3245,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0004",frame:{x:3,y:3246,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0005",frame:{x:59,y:3246,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0006",frame:{x:1226,y:3248,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0007",frame:{x:115,y:3250,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0008",frame:{x:1517,y:3252,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0009",frame:{x:342,y:3234,w:54,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0010",frame:{x:1573,y:3252,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0011",frame:{x:2457,y:3252,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0012",frame:{x:2513,y:3252,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0013",frame:{x:1113,y:3235,w:54,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0014",frame:{x:1361,y:3253,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0015",frame:{x:2631,y:3254,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0016",frame:{x:3376,y:3256,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0017",frame:{x:3432,y:3256,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0018",frame:{x:2827,y:3257,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0019",frame:{x:3740,y:3260,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0020",frame:{x:1830,y:3261,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0021",frame:{x:1886,y:3262,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0022",frame:{x:171,y:3263,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0023",frame:{x:3164,y:3263,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0024",frame:{x:3220,y:3263,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0025",frame:{x:678,y:3264,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0026",frame:{x:734,y:3264,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0027",frame:{x:790,y:3264,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0028",frame:{x:2248,y:3264,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0029",frame:{x:2304,y:3264,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0030",frame:{x:2687,y:3265,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0031",frame:{x:1675,y:3235,w:54,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0032",frame:{x:3563,y:3265,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0033",frame:{x:3877,y:3268,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0034",frame:{x:3506,y:3239,w:54,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0035",frame:{x:3933,y:3268,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0036",frame:{x:3989,y:3268,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0037",frame:{x:2167,y:3269,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0038",frame:{x:2743,y:3269,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0039",frame:{x:3796,y:3269,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0040",frame:{x:3619,y:3270,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0041",frame:{x:4048,y:2572,w:39,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0042",frame:{x:1722,y:1331,w:39,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0043",frame:{x:3432,y:1805,w:39,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0044",frame:{x:1999,y:1153,w:39,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0045",frame:{x:3248,y:2117,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0046",frame:{x:923,y:2595,w:62,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0047",frame:{x:2517,y:152,w:43,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0048",frame:{x:1773,y:675,w:45,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0049",frame:{x:3421,y:427,w:46,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0050",frame:{x:1099,y:1041,w:48,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0051",frame:{x:4043,y:1134,w:50,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0052",frame:{x:3483,y:2112,w:73,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0053",frame:{x:2332,y:2033,w:76,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0054",frame:{x:345,y:2932,w:52,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0055",frame:{x:833,y:2666,w:61,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0056",frame:{x:1735,y:1850,w:80,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-56,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0057",frame:{x:858,y:2285,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0058",frame:{x:1258,y:628,w:44,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0059",frame:{x:2209,y:623,w:43,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0060",frame:{x:2046,y:1055,w:41,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21,y:-59,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0061",frame:{x:3829,y:2130,w:71,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0062",frame:{x:2277,y:1843,w:81,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0063",frame:{x:1199,y:749,w:56,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0064",frame:{x:1435,y:2883,w:55,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0065",frame:{x:4048,y:2572,w:39,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19,y:-53,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0066",frame:{x:1520,y:2615,w:54,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-57,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0067",frame:{x:833,y:1892,w:81,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0068",frame:{x:2188,y:2870,w:55,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0069",frame:{x:629,y:2181,w:70,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0070",frame:{x:2641,y:775,w:41,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0071",frame:{x:767,y:2624,w:63,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0072",frame:{x:2385,y:733,w:54,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0073",frame:{x:3033,y:3165,w:68,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0074",frame:{x:2915,y:1183,w:45,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-57,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0075",frame:{x:3190,y:3174,w:61,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0076",frame:{x:1495,y:2153,w:41,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0077",frame:{x:771,y:3052,w:38,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0078",frame:{x:2447,y:3179,w:58,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0079",frame:{x:2246,y:2972,w:51,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0080",frame:{x:3350,y:2826,w:39,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0081",frame:{x:1520,y:2615,w:54,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22,y:-57,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0082",frame:{x:874,y:3241,w:53,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-58,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0083",frame:{x:3364,y:535,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-57,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0084",frame:{x:1142,y:2871,w:55,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-55,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0085",frame:{x:1846,y:2725,w:58,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-56,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0086",frame:{x:1477,y:3164,w:67,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-54,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0087",frame:{x:420,y:3166,w:69,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-36,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0088",frame:{x:1682,y:2689,w:72,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-36,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0089",frame:{x:1340,y:2792,w:75,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0090",frame:{x:3561,y:2792,w:75,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0091",frame:{x:2044,y:2807,w:74,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0092",frame:{x:1418,y:2814,w:74,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0093",frame:{x:1730,y:2864,w:72,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0094",frame:{x:2328,y:2877,w:71,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0095",frame:{x:2904,y:2877,w:71,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0096",frame:{x:771,y:2906,w:70,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0097",frame:{x:2978,y:2937,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian2Graphics0098",frame:{x:2817,y:2942,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-44,w:54,h:54},sourceSize:{w:54,h:54}},{filename:"Guardian3Graphics0000",frame:{x:2279,y:3180,w:62,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-54,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0001",frame:{x:2224,y:949,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0002",frame:{x:1325,y:1420,w:92,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0003",frame:{x:508,y:531,w:104,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0004",frame:{x:1701,y:1526,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0005",frame:{x:401,y:1856,w:77,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0006",frame:{x:2796,y:1291,w:82,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0007",frame:{x:2899,y:699,w:93,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0008",frame:{x:1757,y:1653,w:80,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0009",frame:{x:1714,y:1425,w:80,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0010",frame:{x:2727,y:544,w:95,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0011",frame:{x:188,y:944,w:84,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0012",frame:{x:1860,y:1580,w:78,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0013",frame:{x:794,y:1389,w:77,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0014",frame:{x:2271,y:514,w:101,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-57,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0015",frame:{x:2448,y:690,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0016",frame:{x:2857,y:1098,w:104,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-75,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0017",frame:{x:2698,y:651,w:96,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-75,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0018",frame:{x:3,y:531,w:96,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0019",frame:{x:4013,y:1315,w:77,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0020",frame:{x:3,y:749,w:87,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0021",frame:{x:3905,y:1015,w:83,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0022",frame:{x:916,y:1098,w:82,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0023",frame:{x:3238,y:638,w:92,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0024",frame:{x:3844,y:1315,w:84,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-74,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0025",frame:{x:1546,y:1398,w:78,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0026",frame:{x:1960,y:1485,w:77,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0027",frame:{x:535,y:1520,w:79,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0028",frame:{x:2995,y:717,w:105,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0029",frame:{x:2702,y:1325,w:82,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0030",frame:{x:182,y:1277,w:94,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0031",frame:{x:3235,y:1063,w:87,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0032",frame:{x:1998,y:953,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0033",frame:{x:3325,y:1063,w:87,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0034",frame:{x:2224,y:949,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0035",frame:{x:716,y:955,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0036",frame:{x:808,y:958,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0037",frame:{x:280,y:1066,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0038",frame:{x:98,y:944,w:87,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0039",frame:{x:1151,y:1039,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0040",frame:{x:3992,y:921,w:88,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0041",frame:{x:2565,y:1070,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0042",frame:{x:2177,y:1146,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0043",frame:{x:877,y:752,w:90,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0044",frame:{x:1305,y:627,w:94,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0045",frame:{x:2150,y:518,w:102,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0046",frame:{x:2969,y:1037,w:85,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0047",frame:{x:3722,y:922,w:88,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0048",frame:{x:536,y:1074,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0049",frame:{x:3021,y:931,w:87,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0050",frame:{x:1258,y:733,w:90,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0051",frame:{x:2002,y:704,w:91,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0052",frame:{x:1012,y:1041,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0053",frame:{x:2351,y:627,w:94,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0054",frame:{x:1001,y:1147,w:83,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0055",frame:{x:1907,y:704,w:92,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0056",frame:{x:280,y:1066,w:84,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0057",frame:{x:1394,y:1753,w:84,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0058",frame:{x:3662,y:1389,w:87,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0059",frame:{x:2210,y:1483,w:84,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0060",frame:{x:3396,y:1283,w:84,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0061",frame:{x:3253,y:1943,w:84,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0062",frame:{x:2081,y:1945,w:84,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0063",frame:{x:3342,y:1895,w:85,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0064",frame:{x:2926,y:914,w:92,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0065",frame:{x:3456,y:746,w:84,h:109},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0066",frame:{x:2292,y:733,w:90,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0067",frame:{x:3924,y:1421,w:84,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0068",frame:{x:2684,y:1528,w:84,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0069",frame:{x:3568,y:1332,w:91,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0070",frame:{x:1394,y:1753,w:84,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-79,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0071",frame:{x:808,y:958,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0072",frame:{x:2797,y:699,w:99,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0073",frame:{x:1428,y:2687,w:87,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-58,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0074",frame:{x:3989,y:1978,w:100,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-51,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0075",frame:{x:900,y:1015,w:109,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-61,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0076",frame:{x:1281,y:2020,w:96,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-52,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0077",frame:{x:2946,y:1521,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-82,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0078",frame:{x:3483,y:1329,w:82,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0079",frame:{x:3111,y:959,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0080",frame:{x:3197,y:745,w:84,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0081",frame:{x:3811,y:489,w:97,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0082",frame:{x:893,y:515,w:95,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0083",frame:{x:1821,y:552,w:89,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0084",frame:{x:687,y:715,w:91,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0085",frame:{x:1855,y:1339,w:91,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0086",frame:{x:459,y:960,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0087",frame:{x:1409,y:525,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0088",frame:{x:2666,y:1001,w:96,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0089",frame:{x:1642,y:1088,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0090",frame:{x:3905,y:694,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0091",frame:{x:445,y:1388,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0092",frame:{x:2962,y:809,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0093",frame:{x:1952,y:1055,w:91,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0094",frame:{x:1186,y:1158,w:89,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0095",frame:{x:3547,y:1524,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0096",frame:{x:1053,y:945,w:95,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-70,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0097",frame:{x:2096,y:745,w:89,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0098",frame:{x:2508,y:492,w:101,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0099",frame:{x:3203,y:961,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0100",frame:{x:1513,y:525,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0101",frame:{x:1344,y:1002,w:96,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0102",frame:{x:2652,y:1095,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0103",frame:{x:1484,y:697,w:96,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0104",frame:{x:445,y:1388,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0105",frame:{x:2962,y:809,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0106",frame:{x:1141,y:1420,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-67,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0107",frame:{x:484,y:630,w:101,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0108",frame:{x:716,y:1160,w:89,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0109",frame:{x:3302,y:1272,w:91,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0110",frame:{x:459,y:960,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0111",frame:{x:186,y:531,w:101,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-72,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0112",frame:{x:1642,y:1088,w:93,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0113",frame:{x:2590,y:1477,w:91,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0114",frame:{x:2962,y:809,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0115",frame:{x:3837,y:1123,w:100,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0116",frame:{x:1048,y:1512,w:89,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0117",frame:{x:706,y:519,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0118",frame:{x:459,y:960,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0119",frame:{x:290,y:531,w:101,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0120",frame:{x:3295,y:961,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0121",frame:{x:3387,y:961,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0122",frame:{x:3479,y:961,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0123",frame:{x:275,y:964,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0124",frame:{x:3137,y:626,w:98,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0125",frame:{x:1252,y:967,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0126",frame:{x:2574,y:968,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0127",frame:{x:1572,y:972,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0128",frame:{x:2473,y:979,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0129",frame:{x:1664,y:986,w:89,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0130",frame:{x:1159,y:937,w:90,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0131",frame:{x:3813,y:999,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0132",frame:{x:588,y:654,w:96,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0133",frame:{x:394,y:624,w:87,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-85,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0134",frame:{x:2361,y:1861,w:84,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-59,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0135",frame:{x:3015,y:1791,w:78,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-85,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0136",frame:{x:1171,y:1256,w:83,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-85,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0137",frame:{x:1589,y:2750,w:76,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-61,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0138",frame:{x:873,y:1520,w:78,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-78,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0139",frame:{x:3421,y:530,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59,y:-84,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0140",frame:{x:2552,y:1755,w:85,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0141",frame:{x:3898,y:2720,w:77,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-41,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0142",frame:{x:1119,y:1860,w:107,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-60,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0143",frame:{x:2842,y:2023,w:96,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-41,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0144",frame:{x:3680,y:2962,w:98,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-43,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0145",frame:{x:682,y:2906,w:86,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-40,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0146",frame:{x:488,y:1797,w:96,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-53,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0147",frame:{x:1294,y:1693,w:97,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-51,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0148",frame:{x:1278,y:1188,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-60,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0149",frame:{x:2610,y:1190,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-60,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian3Graphics0150",frame:{x:2346,y:1191,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-60,w:62,h:58},sourceSize:{w:62,h:58}},{filename:"Guardian4Graphics0000",frame:{x:3554,y:3112,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0001",frame:{x:904,y:3113,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0002",frame:{x:1191,y:3113,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0003",frame:{x:2442,y:3114,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0004",frame:{x:2311,y:3115,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0005",frame:{x:3,y:3116,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0006",frame:{x:72,y:3116,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0007",frame:{x:141,y:3120,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0008",frame:{x:1408,y:3123,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0009",frame:{x:1260,y:3124,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0010",frame:{x:1569,y:3128,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0011",frame:{x:1638,y:3128,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0012",frame:{x:2511,y:3128,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0013",frame:{x:2667,y:3130,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0014",frame:{x:3439,y:3132,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0015",frame:{x:2895,y:3133,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0016",frame:{x:3768,y:3136,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0017",frame:{x:1840,y:3137,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0018",frame:{x:1909,y:3138,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0019",frame:{x:210,y:3139,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0020",frame:{x:691,y:3140,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0021",frame:{x:760,y:3140,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0022",frame:{x:829,y:3140,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0023",frame:{x:2736,y:3141,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0024",frame:{x:3623,y:3141,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0025",frame:{x:3958,y:3144,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0026",frame:{x:4027,y:3144,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0027",frame:{x:2210,y:3145,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0028",frame:{x:2805,y:3145,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0029",frame:{x:3837,y:3145,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0030",frame:{x:2964,y:3148,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0031",frame:{x:2053,y:3149,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0032",frame:{x:3121,y:3153,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0033",frame:{x:973,y:3154,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0034",frame:{x:904,y:3113,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0035",frame:{x:1978,y:3156,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0036",frame:{x:3554,y:3112,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0037",frame:{x:2498,y:1578,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0038",frame:{x:1612,y:1521,w:86,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0039",frame:{x:3899,y:1619,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0040",frame:{x:958,y:1509,w:87,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0041",frame:{x:868,y:1620,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0042",frame:{x:1403,y:1662,w:82,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0043",frame:{x:1233,y:1420,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0044",frame:{x:2346,y:1277,w:94,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0045",frame:{x:948,y:924,w:102,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0046",frame:{x:3323,y:1580,w:84,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0047",frame:{x:1325,y:1509,w:87,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0048",frame:{x:1501,y:1583,w:83,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0049",frame:{x:3235,y:1432,w:87,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0050",frame:{x:2232,y:1390,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0051",frame:{x:1629,y:1331,w:90,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0052",frame:{x:2771,y:1589,w:82,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0053",frame:{x:3569,y:1240,w:94,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0054",frame:{x:2671,y:1621,w:82,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0055",frame:{x:1257,y:1274,w:92,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0056",frame:{x:2498,y:1578,w:82,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0057",frame:{x:1372,y:2236,w:83,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0058",frame:{x:2881,y:1885,w:87,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0059",frame:{x:3163,y:2072,w:82,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0060",frame:{x:2923,y:1798,w:83,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0061",frame:{x:286,y:2597,w:82,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0062",frame:{x:3178,y:2553,w:83,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0063",frame:{x:3531,y:2436,w:85,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-65,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0064",frame:{x:3652,y:1484,w:92,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-64,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0065",frame:{x:3150,y:1432,w:82,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0066",frame:{x:2498,y:1390,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-49,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0067",frame:{x:3813,y:1949,w:82,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-43,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0068",frame:{x:2246,y:2033,w:83,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-65,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0069",frame:{x:2829,y:1801,w:91,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-66,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0070",frame:{x:1372,y:2236,w:83,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-67,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0071",frame:{x:3554,y:3112,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0072",frame:{x:3262,y:535,w:99,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-78,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0073",frame:{x:2594,y:2800,w:84,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-58,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0074",frame:{x:1238,y:1069,w:100,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-72,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0075",frame:{x:2857,y:1015,w:109,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-61,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0076",frame:{x:2887,y:2237,w:89,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-52,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0077",frame:{x:3086,y:2598,w:86,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-60,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0078",frame:{x:3577,y:2034,w:87,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-58,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0079",frame:{x:1989,y:1886,w:89,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-61,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0080",frame:{x:2090,y:1042,w:84,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-77,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0081",frame:{x:632,y:1057,w:97,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0082",frame:{x:2938,y:533,w:95,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-79,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0083",frame:{x:2595,y:668,w:91,h:104},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-78,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0084",frame:{x:732,y:1060,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-71,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0085",frame:{x:1341,y:1096,w:96,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0086",frame:{x:583,y:756,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0087",frame:{x:3158,y:521,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0088",frame:{x:1936,y:810,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0089",frame:{x:2831,y:536,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0090",frame:{x:2765,y:1007,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0091",frame:{x:1949,y:1392,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0092",frame:{x:3057,y:1061,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0093",frame:{x:3,y:994,w:91,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0094",frame:{x:441,y:1481,w:91,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0095",frame:{x:3997,y:816,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0096",frame:{x:179,y:746,w:95,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0097",frame:{x:3,y:639,w:89,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0098",frame:{x:3054,y:506,w:101,h:105},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0099",frame:{x:3543,y:757,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0100",frame:{x:1201,y:523,w:101,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0101",frame:{x:970,y:819,w:89,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0102",frame:{x:2025,y:538,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0103",frame:{x:3571,y:1011,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-76,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0104",frame:{x:1949,y:1392,w:89,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0105",frame:{x:3057,y:1061,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0106",frame:{x:824,y:1098,w:89,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0107",frame:{x:1538,y:1074,w:101,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0108",frame:{x:702,y:1366,w:89,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0109",frame:{x:3103,y:728,w:91,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0110",frame:{x:583,y:756,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0111",frame:{x:1305,y:523,w:101,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0112",frame:{x:2831,y:536,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0113",frame:{x:3995,y:1525,w:89,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0114",frame:{x:3057,y:1061,w:89,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-68,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0115",frame:{x:3940,y:1134,w:100,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0116",frame:{x:1917,y:541,w:96,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-80,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0117",frame:{x:2375,y:521,w:101,h:103},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-77,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0118",frame:{x:583,y:756,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0119",frame:{x:3525,y:530,w:101,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0120",frame:{x:1654,y:768,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0121",frame:{x:2547,y:775,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0122",frame:{x:1748,y:782,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0123",frame:{x:2385,y:791,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0124",frame:{x:3036,y:614,w:98,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0125",frame:{x:3903,y:795,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0126",frame:{x:2774,y:797,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0127",frame:{x:1437,y:798,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0128",frame:{x:2868,y:803,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0129",frame:{x:3637,y:807,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0130",frame:{x:1842,y:809,w:91,h:100},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0131",frame:{x:1756,y:1013,w:89,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0132",frame:{x:3627,y:655,w:96,h:99},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51,y:-73,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0133",frame:{x:2965,y:1428,w:87,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-63,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0134",frame:{x:3641,y:1862,w:84,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44,y:-59,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0135",frame:{x:2352,y:2664,w:78,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-62,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0136",frame:{x:3747,y:1490,w:83,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-78,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0137",frame:{x:3482,y:2750,w:76,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-61,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0138",frame:{x:2856,y:1610,w:76,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-78,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0139",frame:{x:2123,y:949,w:98,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-59,y:-74,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0140",frame:{x:2189,y:1763,w:85,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0141",frame:{x:897,y:2752,w:76,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-41,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0142",frame:{x:1229,y:1869,w:107,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-60,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0143",frame:{x:2068,y:2027,w:96,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45,y:-41,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0144",frame:{x:3050,y:2964,w:98,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-43,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0145",frame:{x:3085,y:2907,w:86,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-40,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0146",frame:{x:3915,y:1799,w:96,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-53,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0147",frame:{x:1036,y:1697,w:97,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-51,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0148",frame:{x:808,y:1197,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-60,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0149",frame:{x:3668,y:1202,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-60,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"Guardian4Graphics0150",frame:{x:3772,y:1211,w:101,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47,y:-60,w:66,h:62},sourceSize:{w:66,h:62}},{filename:"GuardianGraphics0000",frame:{x:2551,y:2014,w:61,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0001",frame:{x:1237,y:3189,w:61,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0002",frame:{x:2825,y:2247,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0003",frame:{x:3058,y:2344,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0004",frame:{x:2380,y:3115,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0005",frame:{x:2645,y:3195,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0006",frame:{x:3382,y:3197,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0007",frame:{x:753,y:3205,w:58,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0008",frame:{x:814,y:3205,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0009",frame:{x:2707,y:3206,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0010",frame:{x:3575,y:3206,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0011",frame:{x:3906,y:3209,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0012",frame:{x:3966,y:3209,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0013",frame:{x:4026,y:3209,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0014",frame:{x:2188,y:3210,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0015",frame:{x:2767,y:3210,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0016",frame:{x:3817,y:3210,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0017",frame:{x:2936,y:3213,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0018",frame:{x:3317,y:3231,w:56,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0019",frame:{x:480,y:3232,w:56,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0020",frame:{x:2047,y:3214,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0021",frame:{x:3104,y:3218,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0022",frame:{x:963,y:3219,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0023",frame:{x:1960,y:3221,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0024",frame:{x:420,y:3227,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0025",frame:{x:2996,y:3227,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0026",frame:{x:1457,y:3228,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0027",frame:{x:1301,y:3229,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0028",frame:{x:558,y:3231,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0029",frame:{x:618,y:3231,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0030",frame:{x:1770,y:3231,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0031",frame:{x:2107,y:3231,w:57,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0032",frame:{x:3444,y:3197,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0033",frame:{x:2874,y:3198,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0034",frame:{x:3755,y:3201,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0035",frame:{x:1836,y:3202,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0036",frame:{x:1898,y:3203,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0037",frame:{x:185,y:3204,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0038",frame:{x:691,y:3205,w:59,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0039",frame:{x:1547,y:3193,w:61,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0040",frame:{x:1611,y:3193,w:61,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0041",frame:{x:2508,y:3193,w:61,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0042",frame:{x:2551,y:2014,w:61,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-55,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0043",frame:{x:3827,y:2526,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0044",frame:{x:2528,y:2534,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0045",frame:{x:1220,y:2541,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0046",frame:{x:68,y:2545,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0047",frame:{x:3040,y:2486,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0048",frame:{x:3619,y:2478,w:59,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-63,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0049",frame:{x:1840,y:2480,w:59,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-63,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0050",frame:{x:1864,y:2383,w:60,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0051",frame:{x:2942,y:2492,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0052",frame:{x:142,y:2494,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0053",frame:{x:2403,y:2497,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0054",frame:{x:1748,y:2498,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0055",frame:{x:623,y:2528,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0056",frame:{x:779,y:2529,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0057",frame:{x:991,y:2501,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0058",frame:{x:3298,y:2503,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0059",frame:{x:3360,y:2503,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0060",frame:{x:4029,y:2385,w:60,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0061",frame:{x:560,y:2448,w:60,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0062",frame:{x:464,y:2504,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0063",frame:{x:3522,y:2505,w:59,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0064",frame:{x:2805,y:1881,w:73,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0065",frame:{x:1142,y:2554,w:58,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0066",frame:{x:1732,y:2594,w:58,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0067",frame:{x:3827,y:2526,w:59,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0068",frame:{x:558,y:3166,w:64,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-64,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0069",frame:{x:84,y:1622,w:81,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-63,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0070",frame:{x:3,y:2079,w:67,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-63,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0071",frame:{x:238,y:1959,w:70,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0072",frame:{x:4036,y:460,w:57,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0073",frame:{x:1742,y:2079,w:69,h:91},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0074",frame:{x:1174,y:3178,w:60,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0075",frame:{x:3939,y:2866,w:73,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0076",frame:{x:1398,y:3188,w:56,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0077",frame:{x:2304,y:2946,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0078",frame:{x:3,y:3181,w:58,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0079",frame:{x:125,y:3185,w:57,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-61,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0080",frame:{x:330,y:2859,w:68,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-29,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0081",frame:{x:1224,y:2448,w:62,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-62,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0082",frame:{x:64,y:3181,w:58,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0083",frame:{x:558,y:3166,w:64,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-64,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0084",frame:{x:3939,y:2934,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-60,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0085",frame:{x:3508,y:3177,w:64,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-58,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0086",frame:{x:284,y:3112,w:69,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-60,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0087",frame:{x:1153,y:2968,w:63,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-59,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0088",frame:{x:1757,y:2725,w:86,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-46,y:-58,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0089",frame:{x:3009,y:2869,w:73,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-43,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0090",frame:{x:1902,y:2481,w:77,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-38,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0091",frame:{x:1520,y:2678,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0092",frame:{x:3653,y:2678,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0093",frame:{x:3406,y:2680,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0094",frame:{x:3978,y:2720,w:77,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0095",frame:{x:3567,y:2723,w:77,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0096",frame:{x:3047,y:2800,w:75,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0097",frame:{x:1495,y:2824,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0098",frame:{x:3206,y:2824,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0099",frame:{x:3864,y:2866,w:72,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"GuardianGraphics0100",frame:{x:3639,y:2824,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-44,w:62,h:56},sourceSize:{w:62,h:56}},{filename:"HelpButtonGraphics0000",frame:{x:1284,y:2172,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"HelpButtonGraphics0001",frame:{x:1580,y:2231,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"HelpButtonGraphics0002",frame:{x:1580,y:2231,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"HustlerGraphics0000",frame:{x:4045,y:3268,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0001",frame:{x:2020,y:3273,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0002",frame:{x:1023,y:3274,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0003",frame:{x:3103,y:3277,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0004",frame:{x:930,y:3278,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0005",frame:{x:1942,y:3280,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0006",frame:{x:399,y:3286,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0007",frame:{x:2995,y:3286,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0008",frame:{x:1417,y:3287,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0009",frame:{x:1282,y:3288,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0010",frame:{x:2569,y:3289,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0011",frame:{x:539,y:3290,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0012",frame:{x:590,y:3290,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0013",frame:{x:1732,y:3290,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0014",frame:{x:2071,y:3290,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0015",frame:{x:3276,y:3290,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0016",frame:{x:303,y:3291,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0017",frame:{x:450,y:3291,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0018",frame:{x:1074,y:3292,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0019",frame:{x:1675,y:3292,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0020",frame:{x:3046,y:3294,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0021",frame:{x:3488,y:3296,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24,y:-54,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0022",frame:{x:1579,y:2445,w:81,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0023",frame:{x:3147,y:2693,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0024",frame:{x:2433,y:2702,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0025",frame:{x:2922,y:2159,w:81,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0026",frame:{x:1892,y:2220,w:81,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0027",frame:{x:1051,y:2638,w:81,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0028",frame:{x:1051,y:2706,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0029",frame:{x:2800,y:2716,w:81,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0030",frame:{x:1424,y:2749,w:81,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0031",frame:{x:3398,y:2749,w:81,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0032",frame:{x:2428,y:2768,w:80,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0033",frame:{x:2079,y:2441,w:80,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0034",frame:{x:3047,y:2734,w:80,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0035",frame:{x:1579,y:2445,w:81,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0036",frame:{x:1540,y:2152,w:80,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0037",frame:{x:516,y:2345,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0038",frame:{x:1003,y:2346,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0039",frame:{x:2032,y:2349,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0040",frame:{x:3384,y:2349,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0041",frame:{x:2359,y:2355,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0042",frame:{x:3541,y:2357,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0043",frame:{x:1147,y:2398,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0044",frame:{x:2697,y:2398,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0045",frame:{x:1976,y:2252,w:78,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0046",frame:{x:1927,y:2402,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0047",frame:{x:407,y:2403,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0048",frame:{x:2884,y:2403,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0049",frame:{x:733,y:2404,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0050",frame:{x:3058,y:2407,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0051",frame:{x:143,y:2415,w:74,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0052",frame:{x:3693,y:2359,w:75,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0053",frame:{x:3163,y:2152,w:80,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0054",frame:{x:1540,y:2152,w:80,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0055",frame:{x:2664,y:2554,w:77,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0056",frame:{x:2825,y:2307,w:78,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0057",frame:{x:2889,y:2946,w:69,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0058",frame:{x:3681,y:2521,w:72,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0059",frame:{x:467,y:2915,w:62,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0060",frame:{x:2622,y:2366,w:72,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0061",frame:{x:1659,y:2031,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0062",frame:{x:370,y:851,w:75,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-71,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0063",frame:{x:1982,y:2509,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0064",frame:{x:2934,y:2806,w:72,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0065",frame:{x:1935,y:2996,w:59,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0066",frame:{x:3900,y:2643,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0067",frame:{x:1106,y:2015,w:76,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-70,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0068",frame:{x:3009,y:1884,w:77,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-71,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0069",frame:{x:200,y:2818,w:64,h:76},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-71,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0070",frame:{x:2246,y:2884,w:55,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0071",frame:{x:1224,y:2825,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0072",frame:{x:356,y:3165,w:61,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0073",frame:{x:3,y:2863,w:68,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-60,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0074",frame:{x:3356,y:2428,w:78,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-59,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0075",frame:{x:929,y:2297,w:71,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-64,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0076",frame:{x:784,y:2232,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0077",frame:{x:2484,y:2236,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0078",frame:{x:377,y:2209,w:78,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0079",frame:{x:220,y:2482,w:71,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0080",frame:{x:545,y:2088,w:71,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0081",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0082",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0083",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0084",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0085",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0086",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0087",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0088",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0089",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0090",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0091",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0092",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0093",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0094",frame:{x:2408,y:2270,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0095",frame:{x:1575,y:2071,w:81,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0096",frame:{x:4027,y:2789,w:63,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0097",frame:{x:2186,y:2377,w:69,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0098",frame:{x:2961,y:2415,w:76,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0099",frame:{x:3220,y:2476,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0100",frame:{x:2110,y:2360,w:73,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0101",frame:{x:1361,y:2618,w:64,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0102",frame:{x:1142,y:2477,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0103",frame:{x:664,y:2368,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0104",frame:{x:3233,y:2295,w:73,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0105",frame:{x:2511,y:2817,w:65,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0106",frame:{x:2824,y:2641,w:73,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-60,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0107",frame:{x:3328,y:2676,w:75,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0108",frame:{x:1416,y:2153,w:76,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0109",frame:{x:979,y:2688,w:69,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0110",frame:{x:2205,y:2643,w:73,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-59,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0111",frame:{x:1252,y:2375,w:81,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0112",frame:{x:1198,y:2172,w:83,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0113",frame:{x:390,y:2482,w:71,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0114",frame:{x:266,y:2665,w:67,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0115",frame:{x:2402,y:2910,w:70,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0116",frame:{x:484,y:2424,w:73,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0117",frame:{x:2059,y:2514,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0118",frame:{x:2059,y:2514,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0119",frame:{x:2059,y:2514,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0120",frame:{x:2313,y:2515,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0121",frame:{x:2517,y:2746,w:74,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0122",frame:{x:3734,y:2746,w:74,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0123",frame:{x:2740,y:2924,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0124",frame:{x:1350,y:2311,w:74,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0125",frame:{x:3348,y:2968,w:61,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0126",frame:{x:3927,y:3012,w:65,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0127",frame:{x:2281,y:2663,w:68,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0128",frame:{x:682,y:2963,w:67,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0129",frame:{x:1654,y:2276,w:70,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0130",frame:{x:3856,y:2935,w:67,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0131",frame:{x:1872,y:2297,w:70,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-72,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0132",frame:{x:2681,y:2844,w:62,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0133",frame:{x:1365,y:2964,w:67,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0134",frame:{x:1135,y:2650,w:63,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0135",frame:{x:2183,y:2959,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0136",frame:{x:66,y:2731,w:60,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0137",frame:{x:3,y:2688,w:60,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0138",frame:{x:1793,y:2334,w:68,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0139",frame:{x:171,y:2237,w:71,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0140",frame:{x:440,y:2690,w:69,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0141",frame:{x:3974,y:2643,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0142",frame:{x:3715,y:2885,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0143",frame:{x:3494,y:2673,w:70,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0144",frame:{x:3282,y:2826,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0145",frame:{x:3467,y:2890,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0146",frame:{x:976,y:2765,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0147",frame:{x:2720,y:2767,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0148",frame:{x:1571,y:2891,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0149",frame:{x:3350,y:2891,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0150",frame:{x:1805,y:2892,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0151",frame:{x:1493,y:2893,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0152",frame:{x:1493,y:2893,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0153",frame:{x:3193,y:2893,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0154",frame:{x:3614,y:2893,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0155",frame:{x:3614,y:2893,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0156",frame:{x:3614,y:2893,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0157",frame:{x:538,y:2894,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0158",frame:{x:958,y:2894,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0159",frame:{x:958,y:2894,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0160",frame:{x:2485,y:2895,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0161",frame:{x:1493,y:2970,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0162",frame:{x:649,y:2829,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0163",frame:{x:853,y:2896,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0164",frame:{x:3398,y:2814,w:66,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0165",frame:{x:2034,y:2949,w:61,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0166",frame:{x:1969,y:2919,w:62,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0167",frame:{x:2735,y:2681,w:62,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0168",frame:{x:2479,y:791,w:65,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0169",frame:{x:717,y:2829,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0170",frame:{x:2656,y:2714,w:61,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0171",frame:{x:1361,y:2704,w:60,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0172",frame:{x:72,y:2459,w:67,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0173",frame:{x:785,y:2829,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0174",frame:{x:1046,y:2772,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0175",frame:{x:2547,y:2377,w:68,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0176",frame:{x:74,y:2370,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0177",frame:{x:1518,y:2747,w:68,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0178",frame:{x:2979,y:2239,w:67,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-72,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0179",frame:{x:3610,y:2970,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0180",frame:{x:2021,y:2675,w:70,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0181",frame:{x:3125,y:2830,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0182",frame:{x:2601,y:2533,w:60,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0183",frame:{x:3621,y:2304,w:69,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0184",frame:{x:1391,y:1840,w:78,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-72,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0185",frame:{x:919,y:2971,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0186",frame:{x:2689,y:2477,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0187",frame:{x:3579,y:2646,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0188",frame:{x:332,y:2782,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0189",frame:{x:2767,y:2526,w:68,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0190",frame:{x:3246,y:2206,w:70,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0191",frame:{x:3756,y:2526,w:68,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0192",frame:{x:372,y:2289,w:68,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0193",frame:{x:2790,y:2782,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0194",frame:{x:2202,y:2718,w:61,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0195",frame:{x:2719,y:2129,w:73,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0196",frame:{x:2475,y:2972,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0197",frame:{x:1744,y:2787,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0198",frame:{x:280,y:2932,w:62,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0199",frame:{x:3887,y:2789,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0200",frame:{x:3264,y:2599,w:72,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0201",frame:{x:3619,y:2391,w:67,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0202",frame:{x:2258,y:2394,w:67,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0203",frame:{x:594,y:2360,w:67,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0204",frame:{x:1201,y:2713,w:60,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0205",frame:{x:1135,y:2736,w:60,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0206",frame:{x:2121,y:2870,w:64,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0207",frame:{x:1580,y:2276,w:71,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0208",frame:{x:1814,y:2815,w:66,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0209",frame:{x:148,y:2897,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0210",frame:{x:66,y:2641,w:60,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-70,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0211",frame:{x:4015,y:2870,w:64,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0212",frame:{x:74,y:2951,w:61,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0213",frame:{x:2417,y:2833,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0214",frame:{x:1075,y:2871,w:64,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0215",frame:{x:1692,y:2372,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0216",frame:{x:2437,y:2420,w:76,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0217",frame:{x:192,y:2721,w:61,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0218",frame:{x:844,y:2973,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0219",frame:{x:3647,y:2747,w:68,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0220",frame:{x:443,y:2318,w:70,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0221",frame:{x:138,y:2974,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0222",frame:{x:1372,y:2883,w:60,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0223",frame:{x:2142,y:2275,w:72,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0224",frame:{x:3957,y:2789,w:67,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0225",frame:{x:752,y:2975,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0226",frame:{x:1662,y:2834,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0227",frame:{x:3462,y:2372,w:66,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0228",frame:{x:1981,y:2752,w:60,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0229",frame:{x:3796,y:2835,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0230",frame:{x:1793,y:2648,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0231",frame:{x:2669,y:2627,w:63,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0232",frame:{x:1089,y:2960,w:61,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0233",frame:{x:1579,y:2517,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0234",frame:{x:1761,y:2421,w:76,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0235",frame:{x:1024,y:2948,w:62,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0236",frame:{x:3328,y:2748,w:67,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0237",frame:{x:1907,y:2728,w:71,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0238",frame:{x:214,y:2901,w:63,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0239",frame:{x:760,y:2319,w:70,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0240",frame:{x:1867,y:2648,w:71,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0241",frame:{x:3067,y:2663,w:77,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0242",frame:{x:3781,y:2979,w:71,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0243",frame:{x:2457,y:2630,w:77,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0244",frame:{x:1696,y:2998,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0245",frame:{x:3855,y:3006,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0246",frame:{x:3,y:2936,w:68,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0247",frame:{x:625,y:3166,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0248",frame:{x:267,y:2818,w:60,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0249",frame:{x:2860,y:2804,w:71,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0250",frame:{x:512,y:2690,w:69,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0251",frame:{x:3255,y:2676,w:70,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0252",frame:{x:294,y:2520,w:74,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0253",frame:{x:3533,y:2932,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0254",frame:{x:402,y:2838,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0255",frame:{x:492,y:3166,w:63,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0256",frame:{x:401,y:2915,w:63,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-66,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0257",frame:{x:1637,y:2911,w:64,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0258",frame:{x:3,y:3006,w:65,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0259",frame:{x:264,y:3009,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0260",frame:{x:129,y:2807,w:68,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0261",frame:{x:2628,y:2981,w:71,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0262",frame:{x:201,y:2978,w:60,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-64,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0263",frame:{x:1704,y:2933,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0264",frame:{x:1293,y:2983,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0265",frame:{x:3692,y:3174,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0266",frame:{x:1633,y:2986,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0267",frame:{x:3259,y:2903,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0268",frame:{x:3102,y:2520,w:73,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0269",frame:{x:2826,y:2876,w:75,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0270",frame:{x:2702,y:2989,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0271",frame:{x:551,y:1179,w:69,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0272",frame:{x:2122,y:3166,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0273",frame:{x:1704,y:2933,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0274",frame:{x:1293,y:2983,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0275",frame:{x:3692,y:3174,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0276",frame:{x:1633,y:2986,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0277",frame:{x:3259,y:2903,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0278",frame:{x:3102,y:2520,w:73,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0279",frame:{x:2826,y:2876,w:75,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0280",frame:{x:2702,y:2989,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0281",frame:{x:551,y:1179,w:69,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0282",frame:{x:2122,y:3166,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0283",frame:{x:1704,y:2933,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0284",frame:{x:1293,y:2983,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0285",frame:{x:3692,y:3174,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0286",frame:{x:1633,y:2986,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0287",frame:{x:3259,y:2903,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0288",frame:{x:3102,y:2520,w:73,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0289",frame:{x:2765,y:3011,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0290",frame:{x:3748,y:1027,w:60,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0291",frame:{x:888,y:2821,w:67,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0292",frame:{x:1781,y:2969,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0293",frame:{x:3781,y:2912,w:72,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-59,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0294",frame:{x:4003,y:2947,w:72,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0295",frame:{x:3151,y:2970,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0296",frame:{x:532,y:2971,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0297",frame:{x:3339,y:2599,w:72,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0298",frame:{x:3309,y:2314,w:72,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-75,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0299",frame:{x:1123,y:2118,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-81,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0300",frame:{x:1123,y:2118,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-87,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0301",frame:{x:79,y:1987,w:72,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-85,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0302",frame:{x:1123,y:2118,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0303",frame:{x:386,y:2120,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-81,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0304",frame:{x:73,y:2080,w:72,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-82,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0305",frame:{x:73,y:2080,w:72,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-82,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0306",frame:{x:888,y:2037,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0307",frame:{x:963,y:2037,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0308",frame:{x:3853,y:2039,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0309",frame:{x:311,y:2041,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0310",frame:{x:154,y:2043,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0311",frame:{x:3928,y:2046,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0312",frame:{x:4003,y:2046,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0313",frame:{x:1781,y:2969,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0314",frame:{x:716,y:2047,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0315",frame:{x:1965,y:2047,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0316",frame:{x:229,y:2055,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0317",frame:{x:791,y:2058,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0318",frame:{x:888,y:2037,w:72,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0319",frame:{x:1123,y:2118,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0320",frame:{x:1123,y:2118,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0321",frame:{x:386,y:2120,w:72,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0322",frame:{x:3,y:2506,w:62,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0323",frame:{x:3,y:2597,w:60,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0324",frame:{x:167,y:2324,w:65,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0325",frame:{x:1513,y:2438,w:63,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0326",frame:{x:2465,y:2534,w:60,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0327",frame:{x:2247,y:2481,w:63,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0328",frame:{x:988,y:2597,w:60,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0329",frame:{x:758,y:1781,w:80,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-42,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0330",frame:{x:229,y:2146,w:69,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0331",frame:{x:4017,y:2481,w:63,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0332",frame:{x:2906,y:2307,w:62,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-88,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0333",frame:{x:3911,y:1948,w:75,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-83,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0334",frame:{x:415,y:1752,w:70,h:101},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-88,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0335",frame:{x:2574,y:878,w:63,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-82,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0336",frame:{x:1374,y:2529,w:63,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-81,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0337",frame:{x:3,y:2418,w:66,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-80,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0338",frame:{x:235,y:2395,w:67,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-79,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0339",frame:{x:200,y:2634,w:63,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-79,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0340",frame:{x:3802,y:2298,w:70,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-78,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0341",frame:{x:3120,y:2322,w:70,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0342",frame:{x:2450,y:1191,w:74,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-76,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0343",frame:{x:3600,y:1946,w:78,h:85},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-80,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0344",frame:{x:335,y:1748,w:77,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-79,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0345",frame:{x:1081,y:2377,w:63,h:90},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-78,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0346",frame:{x:3875,y:2298,w:70,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-78,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0347",frame:{x:2769,y:2034,w:69,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0348",frame:{x:1727,y:2276,w:63,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0349",frame:{x:2343,y:2120,w:65,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0350",frame:{x:2123,y:852,w:62,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0351",frame:{x:3667,y:2204,w:61,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0352",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0353",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0354",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0355",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0356",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0357",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0358",frame:{x:1289,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0359",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0360",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0361",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0362",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0363",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0364",frame:{x:2558,y:2278,w:61,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0365",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0366",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0367",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0368",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0369",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0370",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0371",frame:{x:1509,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0372",frame:{x:1289,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0373",frame:{x:1289,y:2530,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0374",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0375",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0376",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0377",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0378",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0379",frame:{x:1440,y:2529,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0380",frame:{x:3889,y:2531,w:66,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0381",frame:{x:2056,y:2591,w:66,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-76,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0382",frame:{x:1578,y:2594,w:66,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-76,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0383",frame:{x:371,y:2634,w:66,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-75,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0384",frame:{x:2483,y:2323,w:61,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0385",frame:{x:3475,y:2276,w:63,h:93},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0386",frame:{x:3948,y:2298,w:66,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-72,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0387",frame:{x:1026,y:1948,w:77,h:86},rotated:!1,trimmed:!0,spriteSourceSize:{x:-39,y:-72,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0388",frame:{x:2574,y:878,w:63,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-71,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0389",frame:{x:2838,y:2554,w:64,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-71,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0390",frame:{x:3666,y:2600,w:71,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-41,y:-70,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0391",frame:{x:3533,y:2932,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-70,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0392",frame:{x:2746,y:2859,w:77,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0393",frame:{x:3650,y:2122,w:78,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0394",frame:{x:279,y:3176,w:60,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0395",frame:{x:2634,y:1895,w:80,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-36,y:-78,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0396",frame:{x:3668,y:1136,w:77,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0397",frame:{x:3,y:2176,w:83,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0398",frame:{x:1656,y:2532,w:73,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0399",frame:{x:1219,y:2983,w:71,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0400",frame:{x:2328,y:2434,w:72,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0401",frame:{x:2044,y:2876,w:67,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0402",frame:{x:3718,y:2817,w:75,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0403",frame:{x:3673,y:3011,w:69,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0404",frame:{x:1042,y:3167,w:62,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0405",frame:{x:992,y:2425,w:77,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-38,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0406",frame:{x:3316,y:3166,w:63,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0407",frame:{x:3487,y:2997,w:65,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0408",frame:{x:3416,y:2967,w:68,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0409",frame:{x:1707,y:3164,w:60,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-59,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0410",frame:{x:3254,y:3174,w:59,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0411",frame:{x:2637,y:2123,w:79,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0412",frame:{x:604,y:2906,w:75,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0413",frame:{x:1458,y:2307,w:75,h:77},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-69,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0414",frame:{x:1907,y:2802,w:70,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0415",frame:{x:1232,y:1697,w:59,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-65,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0416",frame:{x:1814,y:2162,w:75,h:81},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-71,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0417",frame:{x:2884,y:2730,w:71,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-62,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0418",frame:{x:2251,y:2815,w:74,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0419",frame:{x:2551,y:2933,w:74,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0420",frame:{x:1871,y:2935,w:61,h:75},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-70,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0421",frame:{x:2841,y:2093,w:78,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-75,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0422",frame:{x:470,y:2838,w:65,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-67,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0423",frame:{x:2622,y:2295,w:86,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0424",frame:{x:1904,y:2138,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0425",frame:{x:2859,y:2482,w:80,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0426",frame:{x:573,y:2825,w:73,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-60,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0427",frame:{x:1200,y:2902,w:74,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0428",frame:{x:245,y:2313,w:73,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0429",frame:{x:1982,y:1965,w:83,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0430",frame:{x:3734,y:2681,w:83,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0431",frame:{x:3340,y:1977,w:83,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0432",frame:{x:2114,y:2947,w:66,h:69},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0433",frame:{x:1336,y:2392,w:88,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0434",frame:{x:3082,y:1987,w:81,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0435",frame:{x:2618,y:2448,w:68,h:82},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-77,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0436",frame:{x:671,y:2297,w:86,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0437",frame:{x:2376,y:2979,w:65,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-63,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0438",frame:{x:148,y:2134,w:78,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0439",frame:{x:2040,y:2097,w:80,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0440",frame:{x:1559,y:2968,w:71,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0441",frame:{x:619,y:2100,w:80,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0442",frame:{x:2170,y:2804,w:78,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-58,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0443",frame:{x:684,y:2638,w:80,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-61,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0444",frame:{x:74,y:2882,w:71,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-60,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0445",frame:{x:1980,y:2838,w:61,h:78},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-72,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0446",frame:{x:607,y:2971,w:72,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0447",frame:{x:1575,y:1988,w:81,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0448",frame:{x:897,y:2684,w:79,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-60,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0449",frame:{x:3326,y:2059,w:80,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0450",frame:{x:3697,y:3109,w:68,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0451",frame:{x:1278,y:2687,w:80,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-59,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0452",frame:{x:129,y:2590,w:68,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0453",frame:{x:2496,y:2153,w:76,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-73,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0454",frame:{x:1601,y:2681,w:78,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0455",frame:{x:1329,y:3164,w:66,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0456",frame:{x:1292,y:2861,w:77,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0457",frame:{x:3323,y:2141,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0458",frame:{x:2580,y:3168,w:62,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33,y:-57,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0459",frame:{x:462,y:2063,w:80,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0460",frame:{x:1072,y:2470,w:67,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34,y:-78,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0461",frame:{x:2980,y:2724,w:64,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-31,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0462",frame:{x:1536,y:2362,w:78,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-68,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0463",frame:{x:3037,y:3013,w:63,h:67},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-62,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"HustlerGraphics0464",frame:{x:461,y:2145,w:77,h:79},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37,y:-74,w:48,h:56},sourceSize:{w:48,h:56}},{filename:"LevelIconGraphics0000",frame:{x:900,y:958,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelIconGraphics0001",frame:{x:1873,y:1431,w:62,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelIconGraphics0002",frame:{x:2044,y:2752,w:42,h:49},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:62,h:50},sourceSize:{w:62,h:50}},{filename:"LevelTextGraphics0000",frame:{x:2514,y:293,w:180,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-90,y:-40,w:180,h:80},sourceSize:{w:180,h:80}},{filename:"LevelsMapButton0000",frame:{x:3911,y:579,w:179,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.1,y:.8,w:179,h:55},sourceSize:{w:179,h:55}},{filename:"LevelsMapButton0001",frame:{x:991,y:620,w:179,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.1,y:.8,w:179,h:55},sourceSize:{w:179,h:55}},{filename:"LevelsMapButton0002",frame:{x:991,y:620,w:179,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.1,y:.8,w:179,h:55},sourceSize:{w:179,h:55}},{filename:"LoserBouncer0000",frame:{x:2563,y:3,w:249,h:287},rotated:!1,trimmed:!0,spriteSourceSize:{x:-5,y:-24.9,w:249,h:287},sourceSize:{w:249,h:287}},{filename:"LoserHustler0000",frame:{x:3875,y:3,w:192,h:217},rotated:!1,trimmed:!0,spriteSourceSize:{x:-6.4,y:-4.3,w:192,h:217},sourceSize:{w:192,h:217}},{filename:"MenuButtonGraphics0000",frame:{x:3693,y:2304,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MenuButtonGraphics0001",frame:{x:2359,y:2306,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MenuButtonGraphics0002",frame:{x:3693,y:2304,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MonitorGraphics0000",frame:{x:1420,y:1420,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0001",frame:{x:3412,y:1485,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MonitorGraphics0002",frame:{x:3265,y:1718,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17.2,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"MusicButtonGraphics0000",frame:{x:3193,y:2322,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0001",frame:{x:3135,y:2407,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0002",frame:{x:2465,y:2497,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0003",frame:{x:3958,y:2531,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"NicheGraphics0000",frame:{x:3422,y:2532,w:74,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.2,y:-36.5,w:74,h:73},sourceSize:{w:74,h:73}},{filename:"Plank10Graphics0000",frame:{x:3057,y:1037,w:50,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:50,h:20},sourceSize:{w:50,h:20}},{filename:"Plank11Graphics0000",frame:{x:1842,y:782,w:51,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:51,h:20},sourceSize:{w:51,h:20}},{filename:"Plank2Graphics0000",frame:{x:2248,y:3241,w:150,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-75,y:-10,w:150,h:20},sourceSize:{w:150,h:20}},{filename:"Plank3Graphics0000",frame:{x:3,y:3303,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank4Graphics0000",frame:{x:1125,y:3305,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank5Graphics0000",frame:{x:1468,y:3309,w:100,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-50,y:-10,w:100,h:20},sourceSize:{w:100,h:20}},{filename:"Plank6Graphics0000",frame:{x:3,y:857,w:71,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10,w:71,h:21},sourceSize:{w:71,h:21}},{filename:"Plank7Graphics0000",frame:{x:3581,y:1112,w:71,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10,w:71,h:20},sourceSize:{w:71,h:20}},{filename:"Plank8Graphics0000",frame:{x:459,y:936,w:70,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-10.1,w:70,h:21},sourceSize:{w:70,h:21}},{filename:"Plank9Graphics0000",frame:{x:1297,y:839,w:50,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-25,y:-10,w:50,h:20},sourceSize:{w:50,h:20}},{filename:"PlankGraphics0000",frame:{x:3164,y:3239,w:150,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-75,y:-10.1,w:150,h:21},sourceSize:{w:150,h:21}},{filename:"PlayGameButton0000",frame:{x:706,y:456,w:184,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-97,y:-30,w:184,h:60},sourceSize:{w:184,h:60}},{filename:"ReplayButtonGraphics0000",frame:{x:4058,y:2719,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"ReplayButtonGraphics0001",frame:{x:129,y:2761,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"ReplayButtonGraphics0002",frame:{x:4058,y:2719,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SkipButton0000",frame:{x:2028,y:810,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SkipButton0001",frame:{x:3,y:1210,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SkipButton0002",frame:{x:3,y:1210,w:65,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:65,h:37},sourceSize:{w:65,h:37}},{filename:"SoundButtonGraphics0000",frame:{x:3,y:2776,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0001",frame:{x:2681,y:2800,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0002",frame:{x:3009,y:2806,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0003",frame:{x:1292,y:2825,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"StoolGraphics0000",frame:{x:2971,y:1923,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"Tip10Graphics0000",frame:{x:3911,y:489,w:122,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-88.5,w:122,h:87},sourceSize:{w:122,h:87}},{filename:"Tip11Graphics0000",frame:{x:1201,y:1936,w:77,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.6,y:-89.9,w:77,h:87},sourceSize:{w:77,h:87}},{filename:"Tip1Graphics0000",frame:{x:3911,y:1875,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.3,y:-68.3,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip2Graphics0000",frame:{x:926,y:1878,w:97,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.3,y:-68.3,w:97,h:70},sourceSize:{w:97,h:70}},{filename:"Tip3Graphics0000",frame:{x:4e3,y:223,w:93,h:110},rotated:!1,trimmed:!0,spriteSourceSize:{x:1.1,y:-110.9,w:93,h:110},sourceSize:{w:93,h:110}},{filename:"Tip4Graphics0000",frame:{x:621,y:1419,w:74,h:107},rotated:!1,trimmed:!0,spriteSourceSize:{x:8.5,y:-106.9,w:74,h:107},sourceSize:{w:74,h:107}},{filename:"Tip5Graphics0000",frame:{x:254,y:1579,w:79,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:-7.6,y:-96.2,w:79,h:94},sourceSize:{w:79,h:94}},{filename:"Tip6Graphics0000",frame:{x:1665,y:462,w:123,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.2,y:-44.7,w:123,h:87},sourceSize:{w:123,h:87}},{filename:"Tip7Graphics0000",frame:{x:1791,y:462,w:123,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-61.2,y:-43.7,w:123,h:87},sourceSize:{w:123,h:87}},{filename:"Tip8Graphics0000",frame:{x:423,y:1662,w:83,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-85.7,w:83,h:87},sourceSize:{w:83,h:87}},{filename:"Tip9Graphics0000",frame:{x:240,y:1860,w:71,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-97.7,w:71,h:96},sourceSize:{w:71,h:96}},{filename:"ToiletGraphics0000",frame:{x:1437,y:753,w:38,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.3,y:-20,w:38,h:40},sourceSize:{w:38,h:40}},{filename:"TurrelGraphics0000",frame:{x:2666,y:968,w:50,h:29},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-16.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0001",frame:{x:824,y:1060,w:56,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.4,y:-22.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0002",frame:{x:3726,y:655,w:64,h:41},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40.4,y:-28.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0003",frame:{x:1499,y:1938,w:60,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.4,y:-26.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0004",frame:{x:3497,y:1063,w:57,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35.4,y:-31.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0005",frame:{x:98,y:893,w:55,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:-33.4,y:-35.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0006",frame:{x:2940,y:3272,w:52,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.4,y:-39.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0007",frame:{x:2121,y:2807,w:46,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-42.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0008",frame:{x:3906,y:3145,w:49,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-48.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0009",frame:{x:2411,y:2033,w:57,h:66},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-53.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0010",frame:{x:2472,y:1945,w:59,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-51.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0011",frame:{x:1770,y:3164,w:63,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-51.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0012",frame:{x:1038,y:2037,w:64,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-50.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0013",frame:{x:3995,y:3013,w:67,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-50.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0014",frame:{x:2538,y:2998,w:70,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-28.4,y:-49.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0015",frame:{x:2961,y:3006,w:73,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-46.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0016",frame:{x:1856,y:3013,w:76,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-43.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0017",frame:{x:2586,y:3111,w:78,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-41.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0018",frame:{x:356,y:3112,w:82,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-37.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0019",frame:{x:400,y:2992,w:84,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-39.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0020",frame:{x:3259,y:2968,w:86,h:52},rotated:!1,trimmed:!0,spriteSourceSize:{x:-27.4,y:-39.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0021",frame:{x:2652,y:2924,w:85,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-41.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0022",frame:{x:1277,y:2926,w:85,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-26.4,y:-41.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0023",frame:{x:1883,y:2875,w:83,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-44.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0024",frame:{x:336,y:2717,w:82,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-44.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"TurrelGraphics0025",frame:{x:1392,y:866,w:40,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.4,y:-15.5,w:99,h:71},sourceSize:{w:99,h:71}},{filename:"WaterSplashGraphics0000",frame:{x:632,y:859,w:42,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0001",frame:{x:3056,y:3227,w:44,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0002",frame:{x:3499,y:1528,w:45,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0003",frame:{x:321,y:2313,w:46,h:62},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-62.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0004",frame:{x:1629,y:3252,w:43,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0005",frame:{x:2425,y:995,w:45,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0006",frame:{x:2228,y:1849,w:46,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0007",frame:{x:2537,y:2630,w:47,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0008",frame:{x:245,y:2237,w:48,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-65.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0009",frame:{x:1374,y:2459,w:48,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0010",frame:{x:3416,y:2891,w:48,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0011",frame:{x:3635,y:3206,w:49,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-61.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0012",frame:{x:3687,y:3240,w:50,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.2,y:-58.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0013",frame:{x:4048,y:2659,w:45,h:57},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.2,y:-57.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0014",frame:{x:227,y:3299,w:47,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-19.2,y:-56.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0015",frame:{x:846,y:3298,w:48,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-56.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0016",frame:{x:1339,y:1869,w:48,h:59},rotated:!1,trimmed:!0,spriteSourceSize:{x:-20.2,y:-59.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0017",frame:{x:841,y:2529,w:50,h:61},rotated:!1,trimmed:!0,spriteSourceSize:{x:-21.2,y:-61.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0018",frame:{x:1382,y:1188,w:51,h:63},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-63.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"WaterSplashGraphics0019",frame:{x:1281,y:1936,w:51,h:64},rotated:!1,trimmed:!0,spriteSourceSize:{x:-22.2,y:-64.9,w:53,h:65},sourceSize:{w:53,h:65}},{filename:"_beam0000",frame:{x:2697,y:293,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_beam0001",frame:{x:1484,y:628,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_beam0002",frame:{x:2466,y:3309,w:100,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-100,y:-4,w:100,h:8},sourceSize:{w:100,h:8}},{filename:"_bigElevBack0000",frame:{x:2881,y:1352,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"_bigElevatorFront0000",frame:{x:2360,y:3309,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0001",frame:{x:3327,y:3313,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0002",frame:{x:3675,y:3317,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0003",frame:{x:1783,y:3319,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0004",frame:{x:106,y:3320,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_bigElevatorFront0005",frame:{x:3154,y:3320,w:103,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-51.7,y:-5.1,w:103,h:11},sourceSize:{w:103,h:11}},{filename:"_burg10000",frame:{x:2404,y:404,w:101,h:114},rotated:!1,trimmed:!0,spriteSourceSize:{x:-45.2,y:-55.7,w:101,h:114},sourceSize:{w:101,h:114}},{filename:"_burg20000",frame:{x:2727,y:429,w:101,h:112},rotated:!1,trimmed:!0,spriteSourceSize:{x:-48.2,y:-56.8,w:101,h:112},sourceSize:{w:101,h:112}},{filename:"_burg30000",frame:{x:2626,y:426,w:98,h:117},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53.3,y:-53.7,w:98,h:117},sourceSize:{w:98,h:117}},{filename:"_burgersBackground0000",frame:{x:1918,y:152,w:246,h:166},rotated:!1,trimmed:!0,spriteSourceSize:{x:-122.4,y:-78.7,w:246,h:166},sourceSize:{w:246,h:166}},{filename:"_buttonTop0000",frame:{x:3158,y:506,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0001",frame:{x:3421,y:516,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0002",frame:{x:3444,y:516,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0003",frame:{x:3262,y:521,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0004",frame:{x:3285,y:521,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_buttonTop0005",frame:{x:2124,y:612,w:20,h:7},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-3.5,w:20,h:7},sourceSize:{w:20,h:7}},{filename:"_cogwheel0000",frame:{x:2096,y:717,w:18,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-8.9,w:18,h:18},sourceSize:{w:18,h:18}},{filename:"_cogwheel20000",frame:{x:3514,y:722,w:18,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-9,w:18,h:18},sourceSize:{w:18,h:18}},{filename:"_elevatorBack0000",frame:{x:3787,y:126,w:70,h:17},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-8.5,w:70,h:17},sourceSize:{w:70,h:17}},{filename:"_elevatorFront0000",frame:{x:1098,y:734,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0001",frame:{x:1748,y:768,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0002",frame:{x:195,y:1052,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0003",frame:{x:367,y:1154,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0004",frame:{x:86,y:1255,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_elevatorFront0005",frame:{x:537,y:1352,w:69,h:11},rotated:!1,trimmed:!0,spriteSourceSize:{x:-34.5,y:-5.3,w:69,h:11},sourceSize:{w:69,h:11}},{filename:"_levelCompletedSign0000",frame:{x:2815,y:3,w:483,h:141},rotated:!1,trimmed:!0,spriteSourceSize:{x:-241.8,y:-3.7,w:483,h:141},sourceSize:{w:483,h:141}},{filename:"_levelFailedSign0000",frame:{x:3301,y:3,w:483,h:141},rotated:!1,trimmed:!0,spriteSourceSize:{x:-241.7,y:-3.7,w:483,h:141},sourceSize:{w:483,h:141}},{filename:"_mainMenuButton0000",frame:{x:982,y:678,w:178,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-.6,w:178,h:53},sourceSize:{w:178,h:53}},{filename:"_mainMenuButton0001",frame:{x:179,y:690,w:178,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-.6,w:178,h:53},sourceSize:{w:178,h:53}},{filename:"_mainMenuButton0002",frame:{x:3333,y:690,w:178,h:53},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-.6,w:178,h:53},sourceSize:{w:178,h:53}},{filename:"_nextButton0000",frame:{x:186,y:633,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_nextButton0001",frame:{x:186,y:633,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_nextButton0002",frame:{x:186,y:633,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_pushButtonBase0000",frame:{x:1201,y:515,w:23,h:5},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.9,y:-2.3,w:23,h:5},sourceSize:{w:23,h:5}},{filename:"_replayButton0000",frame:{x:3364,y:633,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:.4,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_replayButton0001",frame:{x:3905,y:637,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:.4,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_replayButton0002",frame:{x:3905,y:637,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:.4,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_triggerBase0000",frame:{x:3197,y:728,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0001",frame:{x:1351,y:733,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0002",frame:{x:3152,y:833,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0003",frame:{x:3021,y:914,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0004",frame:{x:1159,y:919,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerBase0005",frame:{x:3111,y:931,w:30,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-7,w:30,h:14},sourceSize:{w:30,h:14}},{filename:"_triggerHandle0000",frame:{x:2271,y:426,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0001",frame:{x:2271,y:443,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0002",frame:{x:2271,y:460,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0003",frame:{x:2271,y:477,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0004",frame:{x:2271,y:494,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_triggerHandle0005",frame:{x:3036,y:533,w:15,h:14},rotated:!1,trimmed:!0,spriteSourceSize:{x:-15,y:-14,w:15,h:14},sourceSize:{w:15,h:14}},{filename:"_walkthroughButton0000",frame:{x:1484,y:640,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_walkthroughButton0001",frame:{x:2825,y:642,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_walkthroughButton0002",frame:{x:1913,y:647,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_walkthroughButtonBig0000",frame:{x:1484,y:640,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_walkthroughButtonBig0001",frame:{x:2825,y:642,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"_walkthroughButtonBig0002",frame:{x:2825,y:642,w:178,h:54},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:178,h:54},sourceSize:{w:178,h:54}},{filename:"cbtnAllLevels0000",frame:{x:1291,y:462,w:188,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-94,y:-29,w:188,h:58},sourceSize:{w:188,h:58}},{filename:"cbtnArrow0000",frame:{x:3054,y:833,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnBack0000",frame:{x:2380,y:3179,w:64,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32,y:-29,w:64,h:58},sourceSize:{w:64,h:58}},{filename:"cbtnChange0000",frame:{x:1531,y:838,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnChange0001",frame:{x:1199,y:839,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnCloseCredits0000",frame:{x:3325,y:1432,w:46,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-23,w:46,h:46},sourceSize:{w:46,h:46}},{filename:"cbtnCreateNewLevel0000",frame:{x:2167,y:152,w:216,h:126},rotated:!1,trimmed:!0,spriteSourceSize:{x:-108,y:-63,w:216,h:126},sourceSize:{w:216,h:126}},{filename:"cbtnCreateNewLevelMainMenu0000",frame:{x:2067,y:1352,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndEdit0000",frame:{x:965,y:1355,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndHelp0000",frame:{x:537,y:1366,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndPlayAllLevels0000",frame:{x:1826,y:1773,w:160,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-80,y:-22,w:160,h:44},sourceSize:{w:160,h:44}},{filename:"cbtnEndPlayCreateNewLevel0000",frame:{x:3827,y:353,w:172,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-86,y:-36,w:172,h:72},sourceSize:{w:172,h:72}},{filename:"cbtnEndPlayMainMenu0000",frame:{x:1130,y:1367,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndPlayMoreLevelsBG0000",frame:{x:1918,y:3,w:642,h:146},rotated:!1,trimmed:!0,spriteSourceSize:{x:-321,y:-73,w:642,h:146},sourceSize:{w:642,h:146}},{filename:"cbtnEndPlayNextLevel0000",frame:{x:1295,y:1367,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndPlayNextLevel0001",frame:{x:3,y:1369,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndPlayReplay0000",frame:{x:2881,y:1375,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndPlayReplay0001",frame:{x:3046,y:1375,w:162,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-81,y:-25,w:162,h:50},sourceSize:{w:162,h:50}},{filename:"cbtnEndPublish0000",frame:{x:2815,y:234,w:324,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-162,y:-34,w:324,h:68},sourceSize:{w:324,h:68}},{filename:"cbtnEndPublish0001",frame:{x:3142,y:234,w:324,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-162,y:-34,w:324,h:68},sourceSize:{w:324,h:68}},{filename:"cbtnEndPublish0002",frame:{x:3469,y:234,w:324,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:-162,y:-34,w:324,h:68},sourceSize:{w:324,h:68}},{filename:"cbtnEndReplay0000",frame:{x:1482,y:462,w:180,h:60},rotated:!1,trimmed:!0,spriteSourceSize:{x:-90,y:-30,w:180,h:60},sourceSize:{w:180,h:60}},{filename:"cbtnGrab0000",frame:{x:177,y:846,w:95,h:95},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.5,y:-47.5,w:95,h:95},sourceSize:{w:95,h:95}},{filename:"cbtnMoreGamesPause0000",frame:{x:2537,y:2699,w:116,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-22,w:116,h:44},sourceSize:{w:116,h:44}},{filename:"cbtnPauseCredits0000",frame:{x:584,y:2707,w:116,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-22,w:116,h:44},sourceSize:{w:116,h:44}},{filename:"cbtnPauseHelp0000",frame:{x:703,y:2711,w:116,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-22,w:116,h:44},sourceSize:{w:116,h:44}},{filename:"cbtnPauseMenu0000",frame:{x:3,y:2818,w:116,h:42},rotated:!1,trimmed:!0,spriteSourceSize:{x:-58,y:-20.3,w:116,h:42},sourceSize:{w:116,h:42}},{filename:"cbtnReplay0000",frame:{x:893,y:456,w:196,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-98,y:-28,w:196,h:56},sourceSize:{w:196,h:56}},{filename:"cbtnResume0000",frame:{x:3811,y:428,w:196,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-98,y:-29,w:196,h:58},sourceSize:{w:196,h:58}},{filename:"cbtnWalkthroughPause0000",frame:{x:1092,y:456,w:196,h:56},rotated:!1,trimmed:!0,spriteSourceSize:{x:-98,y:-28,w:196,h:56},sourceSize:{w:196,h:56}},{filename:"cmcActiveSign0000",frame:{x:3333,y:671,w:25,h:16},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12.5,y:6.5,w:25,h:16},sourceSize:{w:25,h:16}},{filename:"cmcBonusBag0000",frame:{x:2168,y:1945,w:56,h:68},rotated:!1,trimmed:!0,spriteSourceSize:{x:7,y:0,w:56,h:68},sourceSize:{w:56,h:68}},{filename:"cmcBonusHighlight0000",frame:{x:1049,y:1420,w:89,h:89},rotated:!1,trimmed:!0,spriteSourceSize:{x:-44.9,y:-44.8,w:89,h:89},sourceSize:{w:89,h:89}},{filename:"cmcCreditsDialog0000",frame:{x:706,y:3,w:612,h:450},rotated:!1,trimmed:!0,spriteSourceSize:{x:-312.2,y:0,w:612,h:450},sourceSize:{w:612,h:450}},{filename:"cmcKiziBig0000",frame:{x:3066,y:305,w:161,h:87},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:1.7,w:161,h:87},sourceSize:{w:161,h:87}},{filename:"cmcLock0000",frame:{x:2448,y:627,w:25,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.4,y:-2.4,w:25,h:35},sourceSize:{w:25,h:35}},{filename:"cmcNoteShare0000",frame:{x:2815,y:147,w:527,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-263.5,y:-42.1,w:527,h:84},sourceSize:{w:527,h:84}},{filename:"cmcNoteShare0001",frame:{x:3345,y:147,w:527,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-263.5,y:-42.1,w:527,h:84},sourceSize:{w:527,h:84}},{filename:"cmcPauseDialog0000",frame:{x:1321,y:3,w:594,h:456},rotated:!1,trimmed:!0,spriteSourceSize:{x:-300,y:0,w:594,h:456},sourceSize:{w:594,h:456}},{filename:"cmcThumbBg0000",frame:{x:3183,y:424,w:124,h:94},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:124,h:94},sourceSize:{w:124,h:94}},{filename:"cmcYouNeed0000",frame:{x:1999,y:1242,w:144,h:58},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-2.5,w:144,h:58},sourceSize:{w:144,h:58}},{filename:"crossPoint0000",frame:{x:2698,y:620,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"crossPoint0001",frame:{x:1252,y:937,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"crossPoint0002",frame:{x:2274,y:1051,w:26,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11,y:-11,w:26,h:26},sourceSize:{w:26,h:26}},{filename:"grabbedObject0000",frame:{x:3180,y:1315,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.5,y:-17.5,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"hamburgers0000",frame:{x:3,y:3,w:0,h:0},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.8,y:-.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0001",frame:{x:3333,y:638,w:28,h:30},rotated:!1,trimmed:!0,spriteSourceSize:{x:.2,y:-.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0002",frame:{x:1572,y:936,w:48,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-2.8,y:-1.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"hamburgers0003",frame:{x:3578,y:1612,w:48,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:-3.8,y:-12.2,w:49,h:43},sourceSize:{w:49,h:43}},{filename:"platformCenter0000",frame:{x:3349,y:1763,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"platformLeft0000",frame:{x:2151,y:1793,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"platformRight0000",frame:{x:2971,y:1885,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"singleTile0000",frame:{x:3518,y:1894,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomCenter0000",frame:{x:2842,y:1977,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomLeft0000",frame:{x:1455,y:2030,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileBottomRight0000",frame:{x:1742,y:2031,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenter0000",frame:{x:2637,y:2074,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenterLeft0000",frame:{x:1904,y:2087,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileCenterRight0000",frame:{x:2496,y:2102,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopCenter0000",frame:{x:2795,y:2129,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopLeft0000",frame:{x:1984,y:2138,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"tileTopRight0000",frame:{x:2575,y:2153,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformBottom0000",frame:{x:3403,y:2162,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformCenter0000",frame:{x:3441,y:2162,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"verticalPlatformTop0000",frame:{x:89,y:2170,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-35.1,w:35,h:35},sourceSize:{w:35,h:35}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"Objects.png",format:"RGBA8888",size:{w:4096,h:4096},scale:"1"}},e}(),Vec2=nape.geom.Vec2;!function(e){var t=function(i){function e(e){var t=i.call(this,"ball",{view:e,radius:17,x:+e.x+18,y:+e.y-18,group:4})||this;return t.beginContactCallEnabled=!0,t.body.allowRotation=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=1,this._material.density=1.4,this._material.staticFriction=.5,this._material.dynamicFriction=1},e.prototype.handleBeginContact=function(e){},e}(e.LevelObject);e.BasketBall=t}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"bigBox",{view:e,width:e.width,height:e.height,x:+e.x+e.width/2,y:+e.y-e.height/2,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=.1,this._material.density=.9,this._material.staticFriction=.1,this._material.dynamicFriction=.35},e.prototype.handleBeginContact=function(e){22<this._body.velocity.y&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,this.isReadyToPlaySoundTrue,this))},e.prototype.isReadyToPlaySoundTrue=function(){this._isReadyToPlaySound=!0},e}(e.LevelObject);e.BigBox=t}(objects||(objects={}));var Shape=nape.shape.Shape,PivotJoint=nape.constraint.PivotJoint,InteractionFilter=nape.dynamics.InteractionFilter;!function(t){var e=function(n){function e(e){var t=n.call(this,"bouncer",{view:e,width:48,height:55,x:+e.x+33,y:+e.y-24-25,group:4})||this;t.burgers=0,t._clip=e;var i=new MovieClip("grabbedObject",0,-74);return t.view.addChild(i),t._grabbedVisual=i,t._grabbedVisual.visible=!1,t.initialize2(),t}return __extends(e,n),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,(Game.bouncer=this).inputChannel=Game.bouncerInputChannel,this.jumpHeight=170,this.maxVelocity=39,this.acceleration=22,this._niche=null,this._idleTime=0,this._isReadyToPlayStepSound=!0,this._isReadyToPlayPushSound=!0,this._isReadyToGrab=!0,this.offsetY=28,this._clip.addAnimation("Stand",1,50,30,!0),this._clip.addAnimation("Walk",51,85,50,!0),this._clip.addAnimation("JumpUp",86,96,35),this._clip.addAnimation("JumpDown",97,103,35),this._clip.addAnimation("Push",104,121,40,!0),this._clip.addAnimation("GiveUp",122,122,1),this._clip.addAnimation("Hiding1",123,123,1),this._clip.addAnimation("Hiding2",124,124,1),this._clip.addAnimation("Hiding3",125,125,1),this._clip.addAnimation("Hiding4",126,126,1),this._clip.addAnimation("Idle1",127,279,40,!1,this.stand,this),this._clip.addAnimation("Idle2",280,400,40,!1,this.stand,this),this._clip.addAnimation("Grab",401,415,40,!1,this.stand,this),this._clip.addAnimation("WalkGrabbed",425,460,50,!0),this._clip.addAnimation("StandGrabbed",425,425,1),this._clip.addAnimation("JumpGrabbedUp",461,471,35),this._clip.addAnimation("JumpGrabbedDown",472,478,35),this._clip.addAnimation("Throw",479,496,50,!1,this.stand,this),this._clip.addAnimation("Balance",497,573,40),this._clip.playAnimation("Stand")},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"niche"==t.name&&(this._niche=t)},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"niche"==t.name&&(this._niche=null),this._lastGrabbedObject&&t==this._lastGrabbedObject&&this._isReadyToDrop&&(TweenMax.delayedCall(.1,function(){this._isReadyToGrab=!0},this),this._isReadyToDrop=!1,this._lastGrabbedObject.body.setShapeFilters(new InteractionFilter(1,-1,1,-1)),"box"!=this._lastGrabbedObject.name&&"removable"!=this._lastGrabbedObject.name&&"ball"!=this._lastGrabbedObject.name||(this._lastGrabbedObject.body.allowRotation=!0),this._lastGrabbedObject=null,this._material.density/=3)},e.prototype.jump=function(){this._isJustJumped||(this._grabbedObject?this._clip.playAnimation("JumpGrabbedUp"):this._clip.playAnimation("JumpUp"),SoundManager.getInstance().playSound("BouncerJumpSound"),this._isJustJumped=!0,TweenMax.delayedCall(.1,function(){this._isJustJumped=!1},this),this._onGround=!1)},e.prototype.hide=function(){this.isHidden||this._niche.isOccupied||(this._occupiedNiche=this._niche,this._niche.isOccupied=!0,this.controlsEnabled=!1,this.isHidden=!0,TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62}),TweenMax.to(this,.3,{x:this._niche.x}),TweenMax.to(this,.3,{offsetY:this.offsetY-3}),this._clip.playAnimation("Hiding"+String(Math.round(3*Math.random()+1))),this._shape.filter=this._nicheFilter,Game.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(.31,function(){this.controlsEnabled=!0},this))},e.prototype.unhide=function(){this.isHidden&&(this._occupiedNiche.isOccupied=!1,this._occupiedNiche=null,this.isHidden=!1,TweenMax.to(this.view,.1,{tintRed:255,tintGreen:255,tintBlue:255}),this.offsetY+=3,this._shape.filter=this._filter,Game.levelState.groupSprites[this.group].addChild(this.view))},e.prototype.giveUp=function(){this._grabbedObject&&this.drop(),this._isGaveUp=!0,this._clip.playAnimation("GiveUp"),this.controlsEnabled=!1,this._body.velocity.x=0},e.prototype.stand=function(){this._grabbedObject?this._clip.playAnimation("StandGrabbed"):this._clip.playAnimation("Stand")},e.prototype.grab=function(e){"fixedBox"==e.name||"hustler"==e.name||e instanceof t.Door||e instanceof t.Elevator||"sprite"==e.name||"tile"==e.name||"plank"==e.name||(this._isReadyToGrab=!1,this._isReadyToDrop=!1,e.body.setShapeFilters(new InteractionFilter(1,t.PhysicsCollisionCategories.GetAllExcept("bouncer"),1,-1)),"removable"==e.name&&e.action(),this._grabbedObject=e,this._grabbedObject.body.angularVel=0,this._grabbedObject.body.allowRotation=!1,this._grabbedObject.body.shapes.at(0).castShape.sensorEnabled=!0,this._joint=new PivotJoint(this.body,e.body,Vec2.get(0,-24),Vec2.get(0,0)),this._joint.space=this._body.space,this._material.density*=3,this._clip.playAnimation("Grab"),this._grabbedObject.x<this.x&&(this.inverted=!0),this.controlsEnabled=!1,TweenMax.delayedCall(.39,function(){this._grabbedObject.view.x=this._grabbedObject.view.y=0,this._grabbedObject.view.degrees=this._grabbedObject.rotation,this._grabbedVisual.visible=!0,this._grabbedVisualParent=this._grabbedObject.view.parent,this._grabbedVisual.addChild(this._grabbedObject.view),this.controlsEnabled=!0},this))},e.prototype.drop=function(e){void 0===e&&(e=!1),e?(this._grabbedObject.body.position.x+=this.inverted?-25:25,this._grabbedObject.body.position.y+=10,this._grabbedObject.body.velocity.y=-50):(this._grabbedObject.body.velocity.x=this.inverted?-80:80,this._grabbedObject.body.velocity.y=-240),this._joint.space=null,this._joint=null,this._grabbedObject.body.shapes.at(0).castShape.sensorEnabled=!1,this._grabbedVisualParent&&this._grabbedVisualParent.addChild(this._grabbedObject.view),this._grabbedObject.view.degrees=0,this._isReadyToDrop=!0,this._lastGrabbedObject=this._grabbedObject,this._grabbedObject=null,this._grabbedVisual.visible=!1},e.prototype.createFilter=function(){this._nicheFilter=new InteractionFilter(1,t.PhysicsCollisionCategories.Get("tile"),1,t.PhysicsCollisionCategories.Get("tile")),this._filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("bouncer"),t.PhysicsCollisionCategories.GetAllExcept("enemy")),this._shape.filter=this._filter,this._enemySensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.Get("enemy")),this._pushSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("tile","hidden")),this._balanceLeftSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden")),this._balanceRightSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden"))},e.prototype.createMaterial=function(){n.prototype.createMaterial.call(this),this._material.density=1.2},e.prototype.createShape=function(){this._shape=new Polygon([new Vec2(-this._width/2,-this._height/2+16),new Vec2(-this._width/2+9,-this._height/2),new Vec2(this._width/2-9,-this._height/2),new Vec2(this._width/2,-this._height/2+16),new Vec2(this._width/2,this._height/2-6),new Vec2(this._width/2-13,this._height/2),new Vec2(-this._width/2+13,this._height/2),new Vec2(-this._width/2,this._height/2-6)],this._material),this._body.shapes.add(this._shape),this._enemySensor=new Polygon([new Vec2(-this._width/2,-this._height/2+16),new Vec2(this._width/2,-this._height/2+16),new Vec2(this._width/2,this._height/2-4),new Vec2(-this._width/2,this._height/2-4)],this._material),this._enemySensor.sensorEnabled=!0,this._enemySensor.group=Game.nonCollidable,this._body.shapes.add(this._enemySensor),this._pushSensor=new Polygon([new Vec2(-this._width/2-4,0),new Vec2(this._width/2+2,-2),new Vec2(this._width/2+2,2),new Vec2(this._width/2-4,this._height/2-6),new Vec2(-this._width/2+4,this._height/2-6),new Vec2(-this._width/2-2,2)],this._material),this._pushSensor.sensorEnabled=!0,this._body.shapes.add(this._pushSensor),this._pushSensor.group=Game.nonCollidable,this._balanceLeftSensor=new Polygon([new Vec2(-this._width/2+1,this.height/2+2),new Vec2(-2,this.height/2+2),new Vec2(-2,this.height/2+5),new Vec2(-this._width/2+1,this.height/2+5)],this._material),this._balanceLeftSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceLeftSensor),this._balanceLeftSensor.group=Game.nonCollidable,this._balanceRightSensor=new Polygon([new Vec2(2,this.height/2+2),new Vec2(this._width/2-1,this.height/2+2),new Vec2(this._width/2-1,this.height/2+5),new Vec2(2,this.height/2+5)],this._material),this._balanceRightSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceRightSensor),this._balanceRightSensor.group=Game.nonCollidable},e.prototype.checkCollisions=function(){this._isObstacleOnLeft=!1,this._isObstacleOnRight=!1,this._isLeftBalanceSensor=!1,this._isRightBalanceSensor=!1;for(var e=this._groundContactsCount=0;e<this._body.arbiters.length;e++){var t=this._body.arbiters.at(e);t.shape1==this._pushSensor?this._isReadyToGrab&&(this._ce.input.justDid("grab",this.inputChannel)||this._ce.input.justDid("grabDown",this.inputChannel))?this.grab(t.body2.userData.myData):t.body2.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0:t.shape2==this._pushSensor&&(this._isReadyToGrab&&(this._ce.input.justDid("grab",this.inputChannel)||this._ce.input.justDid("grabDown",this.inputChannel))?this.grab(t.body1.userData.myData):t.body1.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0),t.shape1==this._balanceLeftSensor||t.shape2==this._balanceLeftSensor?this._isLeftBalanceSensor=!0:t.shape1!=this._balanceRightSensor&&t.shape2!=this._balanceRightSensor||(this._isRightBalanceSensor=!0),t.shape1==this._shape?this.checkGround(t,t.body2):t.shape2==this._shape&&this.checkGround(t,t.body1)}0==this._groundContactsCount&&(this._onGround=!1)},e.prototype.checkGround=function(e,t){if(e.collisionArbiter){var i=Math.round(180*e.collisionArbiter.normal.angle/Math.PI);if(t==Game.hustler.body&&!Game.hustler.onGround)return;(15<=i&&i<=175||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&this._body.position.y<t.position.y-15&&(this._groundContactsCount++,this._onGround=!0)}},e.prototype.update=function(e){this.checkCollisions(),n.prototype.update.call(this,e),!this._isGaveUp&&this._controlsEnabled&&(this._grabbedObject&&(this._ce.input.justDid("grab",this.inputChannel)?this.drop():this._ce.input.justDid("grabDown",this.inputChannel)&&this.drop(!0)),!this.isHidden&&!this._isMoveKeyPressed&&this._body.velocity.length<.1&&null==this._grabbedObject&&this._niche?this.hide():this.isHidden&&this._isMoveKeyPressed&&this.unhide())},e.prototype.updateAnimation=function(e){if(!this._isGaveUp&&"Grab"!=this._clip.currentAnimation&&"Throw"!=this._clip.currentAnimation){this._isMoveKeyPressed?this._idleTime=0:this._idleTime+=e,17<this._idleTime&&!this.isHidden&&null==this._grabbedObject&&(.5<Math.random()?(this._idleTime=0,SoundManager.getInstance().playSound("BouncerIdleSound1"),this._clip.playAnimation("Idle1")):(this._idleTime=0,SoundManager.getInstance().playSound("BouncerIdleSound2"),this._clip.playAnimation("Idle2")));var t=this._body.velocity.x;this._onGround&&!this._isJustJumped?null==this._grabbedObject&&(this._ce.input.isDoing("right",this.inputChannel)&&this._isObstacleOnRight||this._ce.input.isDoing("left",this.inputChannel)&&this._isObstacleOnLeft)?(this._isReadyToPlayPushSound&&(this._isReadyToPlayPushSound=!1,TweenMax.delayedCall(2,function(){this._isReadyToPlayPushSound=!0},this),SoundManager.getInstance().playSound("BouncerPushSound")),this._clip.playAnimation("Push")):t<-1||1<t?this._isMoveKeyPressed&&(this._grabbedObject?(SoundManager.getInstance().stopSound("BouncerPushSound"),this._clip.playAnimation("WalkGrabbed")):(SoundManager.getInstance().stopSound("BouncerIdleSound2"),SoundManager.getInstance().stopSound("BouncerIdleSound1"),SoundManager.getInstance().stopSound("BouncerPushSound"),this._clip.playAnimation("Walk")),this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.4,function(){this._isReadyToPlayStepSound=!0},this),SoundManager.getInstance().playSound("BouncerStepSound"))):"Idle1"==this._clip.currentAnimation||"Idle2"==this._clip.currentAnimation||this.isHidden||(SoundManager.getInstance().stopSound("BouncerPushSound"),this._grabbedObject?this._clip.playAnimation("StandGrabbed"):this._isLeftBalanceSensor&&!this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!0):!this._isLeftBalanceSensor&&this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!1):(this.inverted=!1,this._clip.playAnimation("Stand"))):"JumpDown"!=this._clip.currentAnimation&&"JumpGrabbedDown"!=this._clip.currentAnimation&&.2<this._body.velocity.y&&(this._grabbedObject?this._clip.playAnimation("JumpGrabbedDown"):this._clip.playAnimation("JumpDown"))}},e.prototype.goTo=function(e){this._grabbedObject&&this.drop(),this._isGaveUp=!0,this.body.space=null,this._clip.playAnimation("Walk"),this.inverted=this.x>e,TweenMax.to(this,.5,{x:e,ease:"Linear.easeNone",onComplete:function(){Game.bouncer.view.visible=!1}})},e}(t.Hero);t.Bouncer=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"box",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.density=1.5},e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("BoxDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,this.isReadyToPlaySoundTrue,this))},e.prototype.isReadyToPlaySoundTrue=function(){this._isReadyToPlaySound=!0},e}(e.LevelObject);e.Box=t}(objects||(objects={})),function(n){var e=function(i){function e(){var e=this,t=new MovieClip("BulletGraphics");return(e=i.call(this,"bullet",{view:t,width:12,height:6,group:5})||this)._shape.sensorEnabled=!0,e.beginContactCallEnabled=!0,e}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"hustler"==t.name||"bouncer"==t.name?(Game.hustler.giveUp(),Game.bouncer.giveUp(),Game.levelState.failLevel(),this.die()):"fixedBox"==t.name||t instanceof n.Door||t instanceof n.Elevator?(SoundManager.getInstance().playSound("RicochetSound"),this.die()):"box"==t.name||"plank"==t.name?(SoundManager.getInstance().playSound("RicochetSound"),this.die()):"removable"==t.name&&(SoundManager.getInstance().playSound("RicochetSound"),this.die())},e.prototype.hit=function(e){this.die()},e.prototype.die=function(){this.kill=!0;var e=new MovieClip("BulletFxGraphics");e.x=this.x,e.y=this.y,Game.levelState.groupSprites[6].addChild(e),e.playOnce(),TweenMax.delayedCall(.75,e.remove,e)},e.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},e}(n.LevelObject);n.Bullet=e}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"burger",{view:e,radius:12,x:+e.x+14,y:+e.y-12,group:4})||this;return t._shape.sensorEnabled=!0,t.beginContactCallEnabled=!0,t._body.setShapeFilters(new InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"!=t.name&&"hustler"!=t.name||Game.levelState.topPanel.collectBurger(this)},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Burger=e}(objects||(objects={}));var Ray=nape.geom.Ray,RayResult=nape.geom.RayResult;!function(o){var e=function(r){function e(e){var t=r.call(this,"camera",{view:e,width:20,height:20,x:+e.x+13+3,y:+e.y-13+2,group:4})||this;t._shape.sensorEnabled=!0,t.updateCallEnabled=!0,e.stop(),t._camera=new MovieClip("CameraGun",0,0),t._crossPoint=new MovieClip("crossPoint",-18,0),t._rayClip=new MovieClip("_beam",-18,0),t.view.addChild(t._camera),t._camera.addChild(t._rayClip),t.view.parent.addChild(t._crossPoint),t._filter=new InteractionFilter(1,o.PhysicsCollisionCategories.GetAllExcept("hidden")),t._minAngle=t._maxAngle=0,(e.params.minAngle||e.params.maxAngle)&&(t._minAngle=-parseFloat(e.params.minAngle),t._maxAngle=-parseFloat(e.params.maxAngle)),t._minAngle=(t._minAngle%360+360)%360,t._maxAngle=(t._maxAngle%360+360)%360,t._delay=parseFloat(e.params.delay);var i=1;if(e.params.speedX&&(i=parseFloat(e.params.speedX)),t._camera.degrees=t._minAngle,t._minAngle!=t._maxAngle){var n=Math.abs(t._maxAngle-t._minAngle);180<n&&(n=360-n,t._maxAngle-t._minAngle<0?t._maxAngle+=360:t._maxAngle-=360),t._motionTween=TweenMax.to(t._camera,n/6/i,{degrees:t._maxAngle,repeat:-1,yoyo:!0,repeatDelay:t._delay})}return t.relax(),t}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.relax=function(){this._state="relax",this._rayClip.gotoAndStop(e.GREEN_BEAM),this._crossPoint.gotoAndStop(e.GREEN_CROSS),this._motionTween&&this._motionTween.resume(),this._dangerTween&&(this._dangerTween.kill(),this._dangerTween=null),this._relaxTween=null},e.prototype.danger=function(){this._state="danger",SoundManager.getInstance().playSound("YellowCameraSound"),this._rayClip.gotoAndStop(e.YELLOW_BEAM),this._crossPoint.gotoAndStop(e.YELLOW_CROSS),this._motionTween&&this._motionTween.pause(),this._relaxTween&&this._relaxTween.kill(),this._relaxTween=null,this._dangerTween&&this._dangerTween.paused()?this._dangerTween.resume():this._dangerTween=TweenMax.delayedCall(.5,this.alert,this)},e.prototype.suspect=function(){this._state="suspect",this._dangerTween.pause(),this._relaxTween||(this._relaxTween=TweenMax.delayedCall(1,this.relax,this))},e.prototype.alert=function(){this._state="red",SoundManager.getInstance().playSound("RedCameraSound"),this._rayClip.gotoAndStop(e.RED_BEAM),this._crossPoint.gotoAndStop(e.RED_CROSS),Game.hustler.giveUp(),Game.bouncer.giveUp(),Game.levelState.failLevel()},e.prototype.update=function(e){if(r.prototype.update.call(this,e),this._ray=new Ray(this._body.worldCOM,Vec2.fromPolar(1,(this._camera.degrees+180)/180*Math.PI)),this._ray.maxDistance=1e3,this._rayResult=this._body.space.rayCast(this._ray,!1,this._filter),this._rayResult){var t=this._ray.at(this._rayResult.distance);this._crossPoint.x=t.x,this._crossPoint.y=t.y,this._rayClip.scale.x=(this._rayResult.distance-15.75)/100;var i=this._rayResult.shape.body.userData.myData.name;"bouncer"==i||"hustler"==i||"guardian"==i&&this._rayResult.shape.body.userData.myData.isWounded?"relax"!=this._state&&"suspect"!=this._state||this.danger():"danger"==this._state&&this.suspect()}},e.prototype.destroy=function(){r.prototype.destroy.call(this),this._motionTween&&this._motionTween.kill(),this._dangerTween&&this._dangerTween.kill(),this._relaxTween&&this._relaxTween.kill()},e.RED_CROSS=1,e.RED_BEAM=1,e.YELLOW_CROSS=3,e.YELLOW_BEAM=2,e.GREEN_CROSS=2,e.GREEN_BEAM=3,e}(o.LevelObject);o.Camera=e}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"dad",{view:e,width:60,height:20,x:+e.x+35,y:+e.y-11})||this;return t._clip=e,t.initialize2(),t._shape.sensorEnabled=!0,t.beginContactCallEnabled=!0,t.endContactCallEnabled=!0,t._body.group=Game.nonCollidable,t._body.setShapeFilters(new InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,this.offsetY=10,this._clip.addAnimation("Stand",1,41,25,!0),this._clip.addAnimation("Idle1",42,71,30,!1,this.stand,this),this._clip.addAnimation("Idle2",72,99,30,!1,this.stand,this),this._clip.addAnimation("GiveUp",100,107,30),this._clip.playAnimation("Stand"),this._lookTween=TweenMax.delayedCall(4+4*Math.random(),this.look,this)},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"==t.name?Game.bouncer.isAtLevelExit=!0:"hustler"==t.name&&(Game.hustler.isAtLevelExit=!0)},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"==t.name?Game.bouncer.isAtLevelExit=!1:"hustler"==t.name&&(Game.hustler.isAtLevelExit=!1)},e.prototype.look=function(){.5<Math.random()?this._clip.playAnimation("Idle1"):this._clip.playAnimation("Idle2"),this._lookTween=TweenMax.delayedCall(4+4*Math.random(),this.look,this)},e.prototype.stand=function(){"GiveUp"!=this._clip.currentAnimation&&this._clip.playAnimation("Stand")},e.prototype.getBrothers=function(e,t){this._clip.playAnimation("GiveUp"),TweenMax.delayedCall(1,e,t),this._lookTween&&this._lookTween.kill()},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Dad=e}(objects||(objects={})),function(h){var e=function(l){function p(e){var t=this,i=e._degrees,n=e.rotation=0;e.params.type&&(n=Math.round(parseFloat(e.params.type))),0==n&&(n=1);var r="subject"+n;e.gotoAndStop(n);var o=0,a=0,s=Math.round((i%360+360)%360);return 90==s?(o=-25,a=-45):180==s?(o=20,a=-70):270==s&&(o=45,a=-25),(t=l.call(this,r,{view:e,rotation:i,width:20,height:69,x:+e.x+10*Math.cos(i/180*Math.PI)+35*Math.sin(i/180*Math.PI)+o,y:+e.y-35*Math.cos(i/180*Math.PI)+10*Math.sin(i/180*Math.PI)+a,group:2})||this)._isGlass=0<=e.frameName.indexOf("GlassDoorGraphics"),i=(i%360+360)%360,0==Math.round(i)?t._direction=p.UP:180==Math.round(i)?t._direction=p.DOWN:270==Math.round(i)?t._direction=p.LEFT:90==Math.round(i)&&(t._direction=p.RIGHT),t._initX=t.x,t._initY=t.y,t.updateCallEnabled=!0,t._isGlass&&t._body.setShapeFilters(new InteractionFilter(h.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(p,l),p.prototype.action=function(){this._isOpened?this._isOpened=!1:this._isOpened=!0,this._isMoving=!0,SoundManager.getInstance().playSound("OpenDoorSound")},p.prototype.stop=function(){this._isMoving=!1,this.body.velocity.x=0,this.body.velocity.y=0},p.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},p.prototype.update=function(e){l.prototype.update.call(this,e),this._isMoving&&(this._direction==p.UP?this._isOpened?this.y<=this._initY-69.5?this.stop():this._body.velocity.y=-50:this.y>=this._initY-.5?this.stop():this._body.velocity.y=50:this._direction==p.DOWN?this._isOpened?this.y>=this._initY+69.5?this.stop():this._body.velocity.y=50:this.y<=this._initY+.5?this.stop():this._body.velocity.y=-50:this._direction==p.LEFT?this._isOpened?this.x<=this._initX-69.5?this.stop():this._body.velocity.x=-50:this.x>=this._initX-.5?this.stop():this._body.velocity.x=50:this._direction==p.RIGHT&&(this._isOpened?this.x>=this._initX+69.5?this.stop():this._body.velocity.x=50:this.x<=this._initX+.5?this.stop():this._body.velocity.x=-50))},p.UP=1,p.DOWN=2,p.LEFT=3,p.RIGHT=4,p}(h.LevelObject);h.Door=e}(objects||(objects={})),function(e){var t=function(o){function a(e){var t=this,i=0;e.params.type&&(i=Math.round(parseFloat(e.params.type))),0==i&&(i=1);var n="subject"+String(i),r=!1;return"BigElevatorGraphics"==e.mc&&(r=!0),(t=o.call(this,n,{view:e,width:+(r?102:70),height:+(r?20:16),x:+e.x+ +(r?104:70)/2,y:+e.y-(r?10:12),group:4})||this).view.getChild("front").gotoAndStop(i),t._isBig=r,t._distanceX=parseFloat(e.params.distanceX),t._distanceY=parseFloat(e.params.distanceY),t._speedX=parseFloat(e.params.speedX),t._speedY=parseFloat(e.params.speedY),t._speedY<0?t._direction=a.UP:0<t._speedY?t._direction=a.DOWN:t._speedX<0?t._direction=a.LEFT:0<t._speedX&&(t._direction=a.RIGHT),t._initX=t.x,t._initY=t.y,t.updateCallEnabled=!0,t}return __extends(a,o),a.prototype.action=function(){this._isMovingToTarget?this._isMovingToTarget=!1:this._isMovingToTarget=!0,this._isMoving=!0},a.prototype.defineBody=function(){this._bodyType=BodyType.KINEMATIC},a.prototype.createShape=function(){o.prototype.createShape.call(this),this._isBig?(this._sensor1=new Polygon(OzUtil.verticesArrayToVec2([[56,0],[56,13],[10,13],[10,0]]),this._material),this._sensor2=new Polygon(OzUtil.verticesArrayToVec2([[-56,0],[-56,13],[-10,13],[-10,0]]),this._material)):(this._sensor1=new Polygon(OzUtil.verticesArrayToVec2([[40,0],[40,13],[10,13],[10,0]]),this._material),this._sensor2=new Polygon(OzUtil.verticesArrayToVec2([[-40,0],[-40,13],[-10,13],[-10,0]]),this._material)),this._sensor3=new Polygon(OzUtil.verticesArrayToVec2([[-33,0],[-33,13],[33,13],[33,0]]),this._material),this._sensor1.sensorEnabled=!0,this._sensor2.sensorEnabled=!0,this._sensor3.sensorEnabled=!0,this._body.shapes.add(this._sensor1),this._body.shapes.add(this._sensor2),this._body.shapes.add(this._sensor3)},a.prototype.createMaterial=function(){o.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.dynamicFriction=8},a.prototype.pause=function(){this._isPaused=!0,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.stop=function(){this._isMoving=!1,this.body.velocity.x=0,this.body.velocity.y=0},a.prototype.update=function(e){if(this._isPaused=!1,this._isMoving){for(var t=0;t<this._body.arbiters.length;t++){var i=this._body.arbiters.at(t);this._direction==a.LEFT&&!this._isMovingToTarget||this._direction==a.RIGHT&&this._isMovingToTarget?i.shape1==this._sensor1?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor1&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause():this._direction==a.LEFT&&this._isMovingToTarget||this._direction==a.RIGHT&&!this._isMovingToTarget?i.shape1==this._sensor2?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor2&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause():(this._direction==a.DOWN&&this._isMovingToTarget||this._direction==a.UP&&!this._isMovingToTarget)&&(i.shape1==this._sensor3?i.body2.type==BodyType.DYNAMIC&&"box"!=i.body2.userData.myData.name&&this.pause():i.shape2==this._sensor3&&i.body1.type==BodyType.DYNAMIC&&"box"!=i.body1.userData.myData.name&&this.pause())}this._direction==a.UP?this._isMovingToTarget?this.y<=this._initY-this._distanceY?this.stop():this._isPaused||(this._body.velocity.y=this._speedY):this.y>=this._initY?this.stop():this._isPaused||(this._body.velocity.y=-this._speedY):this._direction==a.DOWN?this._isMovingToTarget?this.y>=this._initY+this._distanceY?this.stop():this._isPaused||(this._body.velocity.y=this._speedY):this.y<=this._initY?this.stop():this._isPaused||(this._body.velocity.y=-this._speedY):this._direction==a.LEFT?this._isMovingToTarget?this.x<=this._initX-this._distanceX?this.stop():this._isPaused||(this._body.velocity.x=this._speedX):this.x>=this._initX?this.stop():this._isPaused||(this._body.velocity.x=-this._speedX):this._direction==a.RIGHT&&(this._isMovingToTarget?this.x>=this._initX+this._distanceX?this.stop():this._isPaused||(this._body.velocity.x=this._speedX):this.x<=this._initX?this.stop():this._isPaused||(this._body.velocity.x=-this._speedX))}0!=this.body.velocity.x||0!=this.body.velocity.y?(this._isMovingToTarget?(this.view.getChild("cogwheel1").degrees-=6,this.view.getChild("cogwheel2").degrees+=6):(this.view.getChild("cogwheel1").degrees+=6,this.view.getChild("cogwheel2").degrees-=6),this._isPlayingSound||(SoundManager.getInstance().playSound("ElevatorSound"),this._isPlayingSound=!0)):this._isPlayingSound&&(SoundManager.getInstance().stopSound("ElevatorSound"),this._isPlayingSound=!1),o.prototype.update.call(this,e)},a.prototype.destroy=function(){o.prototype.destroy.call(this),SoundManager.getInstance().stopSound("ElevatorSound")},a.UP=1,a.DOWN=2,a.LEFT=3,a.RIGHT=4,a}(e.LevelObject);e.Elevator=t}(objects||(objects={}));var BodyType=nape.phys.BodyType;!function(i){var e=function(t){function e(e){return t.call(this,"limiter",{width:15,height:15,x:+e.x+7.5,y:+e.y-7.5})||this}return __extends(e,t),e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(i.PhysicsCollisionCategories.Get("limiter"),i.PhysicsCollisionCategories.Get("enemy"),i.PhysicsCollisionCategories.Get("limiter"),i.PhysicsCollisionCategories.Get("enemy")))},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(i.LevelObject);i.EnemyLimiter=e}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=this;return e.stop(),(t=i.call(this,"exit",{view:e,width:80,height:20,x:+e.x+35,y:+e.y-35+30})||this).offsetY=-30,t._shape.sensorEnabled=!0,t.beginContactCallEnabled=!0,t.endContactCallEnabled=!0,t._body.group=Game.nonCollidable,t._body.setShapeFilters(new InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"))),t}return __extends(e,i),e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"==t.name?Game.bouncer.isAtLevelExit=!0:"hustler"==t.name&&(Game.hustler.isAtLevelExit=!0)},e.prototype.handleEndContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"bouncer"==t.name?Game.bouncer.isAtLevelExit=!1:"hustler"==t.name&&(Game.hustler.isAtLevelExit=!1)},e.prototype.getBrothers=function(e,t){void 0===t&&(t=null),this.view.currentFrameNumber=1,TweenMax.to(this.view,.5,{currentFrameNumber:24,onComplete:this.delaySecondExitAnim,onCompleteContext:this}),Game.bouncer.goTo(this.x+22),Game.hustler.goTo(this.x-15),TweenMax.delayedCall(1.4,e,t),SoundManager.getInstance().playSound("ExitSound")},e.prototype.delaySecondExitAnim=function(){var e=this.view.totalFrames();this.view.currentFrameNumber=25,TweenMax.to(this.view,.8,{currentFrameNumber:e})},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Exit=e}(objects||(objects={})),function(i){var e=function(t){function e(e){return t.call(this,"fixedBox",{width:+e.width,height:+e.height,x:+(e.x+e.width/2),y:+(e.y+e.height/2)})||this}return __extends(e,t),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(i.PhysicsCollisionCategories.Get("tile"),i.PhysicsCollisionCategories.GetAll(),i.PhysicsCollisionCategories.Get("tile"),i.PhysicsCollisionCategories.GetAll()))},e}(i.LevelObject);i.FixedBox=e}(objects||(objects={})),function(t){var e=function(r){function e(e,t,i,n){return r.call(this,"fixedBox",{width:+i,height:+n,x:+(+e+ +i/2),y:+(+t+ +n/2)})||this}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll(),t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll()))},e}(t.LevelObject);t.FixedBox2=e}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"guardian",{view:e,width:38,height:48,x:+e.x+28,y:+e.y-24-25,group:4})||this;return t.WALK_SPEED=25,t.RUN_SPEED=40,t._clip=e,t._body.allowRotation=!1,t.initialize2(),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,this.updateCallEnabled=!0,this.beginContactCallEnabled=!0,this._isReadyToPlayStepSound=!0,this._timeNotMoving=0,this._direction=1,this.offsetX=0,this.offsetY=25,0<=this.view.frameName.indexOf("Guardian2Graphics")?(this.WALK_SPEED=20,this._clip.addAnimation("Stand",1,41,30,!0),this._clip.addAnimation("Walk",42,66,40,!0),this._clip.addAnimation("Run",67,82,40,!0),this._clip.addAnimation("Wound",83,99,40),this._clip.addAnimation("WoundStatic",98,98,1)):0<=this.view.frameName.indexOf("GuardianGraphics")?(this._clip.addAnimation("Stand",1,43,30,!0),this._clip.addAnimation("Walk",44,68,40,!0),this._clip.addAnimation("Run",69,84,40,!0),this._clip.addAnimation("Wound",85,101,40),this._clip.addAnimation("WoundStatic",100,100,1)):(this._clip.addAnimation("Stand",1,37,30,!0),this._clip.addAnimation("Walk",38,57,40,!0),this._clip.addAnimation("Run",58,71,40,!0),this._clip.addAnimation("Wound",132,151,40),this._clip.addAnimation("WoundStatic",151,151,1)),this._isWeak=!0,this._taskManager=new TaskManager(!0),this.assignTasks()},e.prototype.woundStatic=function(){this._clip.playAnimation("WoundStatic")},e.prototype.assignTasks=function(){this._taskManager.removeAllTasks(),this._taskManager.addTask(this,this.wait),this._taskManager.addPause(80),this._taskManager.addInstantTask(this,this.startPatrol),this._taskManager.addTask(this,this.patrol)},e.prototype.handleBeginContact=function(e){if(!this.isWounded){var t=NapeUtils.CollisionGetOther(this,e);if(("box"==t.name||"bigBox"==t.name||"removable"==t.name||"plank"==t.name)&&30<t.body.normalImpulse(this.body,!0).xy(!0).length&&t.y<this.y)this._taskManager.addUrgentInstantTask(this,this.wound);else if("bullet"==t.name)this._taskManager.addUrgentInstantTask(this,this.wound);else if("bouncer"==t.name&&!Game.bouncer.isHidden||"hustler"==t.name&&!Game.hustler.isHidden){this._taskManager.removeAllTasks(),this._clip.playAnimation("Stand"),this.isWounded=!0,Game.hustler.giveUp(),Game.bouncer.giveUp();var i=new MovieClip("FightingGraphics",0,0);i.playOnce(),i.y=this.y,i.x=this.x+.7*(t.x-this.x),this.view.parent.addChild(i),SoundManager.getInstance().playSound("AttackSound"),TweenMax.delayedCall(1,Game.levelState.failLevel,Game.levelState)}}},e.prototype.handleEndContact=function(e){i.prototype.handleEndContact.call(this,e);NapeUtils.CollisionGetOther(this,e)},e.prototype.createShape=function(){this._shape=new Polygon([new Vec2(-this._width/2,-this._height/2+3),new Vec2(0,-this._height/2-2),new Vec2(this._width/2,-this._height/2+3),new Vec2(this._width/2,this._height/2-8),new Vec2(this._width/2-6,this._height/2),new Vec2(-this._width/2+6,this._height/2),new Vec2(-this._width/2,this._height/2-8)],this._material),this._body.shapes.add(this._shape)},e.prototype.createMaterial=function(){i.prototype.createMaterial.call(this),this._material.elasticity=0,this._material.density=1,this._material.staticFriction=.01,this._material.dynamicFriction=.01},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("enemy"),t.PhysicsCollisionCategories.GetAllExcept("enemy"),t.PhysicsCollisionCategories.Get("enemy"),t.PhysicsCollisionCategories.GetAllExcept("enemy")))},e.prototype.wait=function(){return SoundManager.getInstance().stopSound("GuardianStepSound"),SoundManager.getInstance().stopSound("GuardianRunSound"),SoundManager.getInstance().stopSound("CriminalStepSound"),SoundManager.getInstance().stopSound("CriminalRunSound"),this._clip.playAnimation("Stand"),!0},e.prototype.startPatrol=function(){this.moveHorizontally(this._body,this.WALK_SPEED*this._direction),0<this._direction?this.inverted=!1:this.inverted=!0},e.prototype.patrol=function(){return this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.32,function(){this._isReadyToPlayStepSound=!0},this),this._isWeak?SoundManager.getInstance().playSound("GuardianStepSound"):SoundManager.getInstance().playSound("CriminalStepSound")),"Walk"!=this._clip.currentAnimation&&this._clip.playAnimation("Walk"),Math.abs(this._body.velocity.x)<=.05&&.05<this._timeNotMoving?(this._direction=-this._direction,!0):(this.moveHorizontally(this._body,this.WALK_SPEED*this._direction),!1)},e.prototype.pursue=function(){return this._target.x<this.x?(this.inverted=!0,this.moveHorizontally(this._body,-this.RUN_SPEED)):(this.inverted=!1,this.moveHorizontally(this._body,this.RUN_SPEED)),1.5<this._timeNotMoving?this._clip.playAnimation("Stand"):"Run"!=this._clip.currentAnimation?this._clip.playAnimation("Run"):this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.45,function(){this._isReadyToPlayStepSound=!0},this),this._isWeak?SoundManager.getInstance().playSound("GuardianRunSound"):SoundManager.getInstance().playSound("CriminalRunSound")),!1},e.prototype.woundDead=function(){SoundManager.getInstance().playSound("GuardianHurtSound"),TweenMax.delayedCall(.3,this.playGuardianStarsSound,this),this._body.space=null,Game.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(3,this.woundStatic,this),TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62})},e.prototype.wound=function(){this.isWounded||(this._clip.playAnimation("Wound"),this.isWounded=!0,this._taskManager.removeAllTasks(),this._isWeak?(SoundManager.getInstance().playSound("GuardianHurtSound"),TweenMax.delayedCall(.3,this.playGuardianStarsSound,this),this._body.space=null,Game.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(3,this.woundStatic,this),TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62})):SoundManager.getInstance().playSound("CriminalBoomSound"))},e.prototype.playGuardianStarsSound=function(){SoundManager.getInstance().playSound("GuardianStarsSound")},e.prototype.wakeUp=function(){this.isWounded=!1,this.assignTasks()},e.prototype.update=function(e){i.prototype.update.call(this,e),this.isWounded||(Math.abs(this._body.velocity.x)<=.05?this._timeNotMoving+=e:this._timeNotMoving=0,this._taskManager.update(),!Game.bouncer.isHidden&&Math.abs(this.y-Game.bouncer.y)<70&&(this._body.velocity.x<.5&&this.x-Game.bouncer.x<150&&-10<this.x-Game.bouncer.x||-.5<this._body.velocity.x&&Game.bouncer.x-this.x<150&&-10<Game.bouncer.x-this.x)?(this._target=Game.bouncer,this._taskManager.currentTask!=this.pursue&&this._taskManager.addUrgentTask(this,this.pursue)):!Game.hustler.isHidden&&Math.abs(this.y-Game.hustler.y)<70&&(this._body.velocity.x<.5&&this.x-Game.hustler.x<155&&-10<this.x-Game.hustler.x||-.5<this._body.velocity.x&&Game.hustler.x-this.x<155&&-10<Game.hustler.x-this.x)?(this._target=Game.hustler,this._taskManager.currentTask!=this.pursue&&this._taskManager.addUrgentTask(this,this.pursue)):this._taskManager.currentTask==this.pursue&&this.assignTasks())},e}(t.LevelObject);t.Guardian=e}(objects||(objects={}));var Polygon=nape.shape.Polygon,Arbiter=nape.dynamics.Arbiter;!function(t){var e=function(i){function e(e){var t=i.call(this,"hustler",{view:e,width:31,height:47,x:+e.x+23,y:+e.y-24-12,group:4})||this;return t._clip=e,t.dynamicFriction=0,t._container=e.parent.parent,t.initialize2(),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip=this.view,(Game.hustler=this).inputChannel=Game.hustlerInputChannel,this.jumpHeight=225,this.maxVelocity=80,this.acceleration=26,this._idleTime=0,this._isReadyToPlayStepSound=!0,this._isReadyToPlayPushSound=!0,this._niche=null,this.offsetY=24,this._clip.addAnimation("Stand",1,22,30,!0),this._clip.addAnimation("Walk",23,36,30,!0),this._clip.addAnimation("Sit",37,37,1),this._clip.addAnimation("SitWalk",37,55,40,!0),this._clip.addAnimation("JumpUp",56,64,30),this._clip.addAnimation("JumpDown",65,72,30),this._clip.addAnimation("Deceleration",82,95,40),this._clip.addAnimation("Push",96,112,15,!0),this._clip.addAnimation("GiveUp",113,113,1),this._clip.addAnimation("Hiding1",114,114,1),this._clip.addAnimation("Hiding2",115,115,1),this._clip.addAnimation("Hiding3",116,116,1),this._clip.addAnimation("Hiding4",117,117,1),this._clip.addAnimation("Idle1",118,253,40,!1,this.stand,this),this._clip.addAnimation("Idle2",254,391,40,!1,this.stand,this),this._clip.addAnimation("Balance",393,465,40,!0),this._clip.playAnimation("Stand")},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);"niche"==t.name&&(this._niche=t)},e.prototype.handleEndContact=function(e){"niche"==NapeUtils.CollisionGetOther(this,e).name&&(this._niche=null)},e.prototype.jump=function(){this._isJustJumped||(this._clip.playAnimation("JumpUp"),SoundManager.getInstance().playSound("HustlerJumpSound"),this._isJustJumped=!0,TweenMax.delayedCall(.1,function(){this._isJustJumped=!1},this),this._onGround=!1)},e.prototype.stand=function(){this._clip.playAnimation("Stand")},e.prototype.hide=function(){this.isHidden||this._niche.isOccupied||(this._occupiedNiche=this._niche,this._occupiedNiche.isOccupied=!0,this.controlsEnabled=!1,this.isHidden=!0,TweenMax.to(this.view,.3,{tintRed:27,tintGreen:36,tintBlue:62}),TweenMax.to(this,.3,{x:this._niche.x}),TweenMax.to(this,.3,{offsetY:this.offsetY-3}),this._clip.playAnimation("Hiding"+String(Math.round(3*Math.random()+1))),this._shape.filter=this._nicheFilter,Game.levelState.groupSprites[0].addChild(this.view),TweenMax.delayedCall(.31,function(){this.controlsEnabled=!0},this))},e.prototype.unhide=function(){this.isHidden&&(this._occupiedNiche.isOccupied=!1,this._occupiedNiche=null,this.isHidden=!1,TweenMax.to(this.view,.1,{tintRed:255,tintGreen:255,tintBlue:255}),this.offsetY=this.offsetY+3,this._shape.filter=this._filter,Game.levelState.groupSprites[this.group].addChild(this.view))},e.prototype.giveUp=function(){this._isGaveUp=!0,this._clip.playAnimation("GiveUp"),this.controlsEnabled=!1,this._body.velocity.x=0},e.prototype.createFilter=function(){this._nicheFilter=new InteractionFilter(1,t.PhysicsCollisionCategories.Get("tile"),1,t.PhysicsCollisionCategories.Get("tile")),this._filter=new InteractionFilter(t.PhysicsCollisionCategories.Get("hero"),t.PhysicsCollisionCategories.GetAllExcept("enemy")),this._shape.filter=this._filter,this._enemySensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.Get("enemy")),this._topShape.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,-1),this._pushSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("tile","hidden")),this._balanceLeftSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden")),this._balanceRightSensor.filter=new InteractionFilter(1,t.PhysicsCollisionCategories.GetNone(),1,t.PhysicsCollisionCategories.GetAllExcept("hidden"))},e.prototype.createShape=function(){this._shape=new Polygon([new Vec2(-this._width/2,-8),new Vec2(this._width/2,-8),new Vec2(this._width/2,this._height/2-5),new Vec2(this._width/2-8,this._height/2),new Vec2(-this._width/2+8,this._height/2),new Vec2(-this._width/2,this._height/2-5)],this._material),this._body.shapes.add(this._shape),this._enemySensor=new Polygon([new Vec2(-this._width/2,-8),new Vec2(this._width/2,-8),new Vec2(this._width/2,this._height/2-5),new Vec2(this._width/2-5,this._height/2),new Vec2(-this._width/2+5,this._height/2),new Vec2(-this._width/2,this._height/2-5)],this._material),this._enemySensor.sensorEnabled=!0,this._enemySensor.group=Game.nonCollidable,this._body.shapes.add(this._enemySensor),this._topShape=new Polygon([new Vec2(-this._width/2+2,-20),new Vec2(this._width/2-2,-20),new Vec2(this._width/2-2,-8),new Vec2(-this._width/2+2,-8)],this._material),this._topShape.sensorEnabled=!0,this._body.shapes.add(this._topShape),this._topShape.group=Game.nonCollidable,this._pushSensor=new Polygon([new Vec2(-this._width/2-2,-4),new Vec2(this._width/2+2,-4),new Vec2(this._width/2+2,0),new Vec2(-this._width/2-2,0)],this._material),this._pushSensor.sensorEnabled=!0,this._body.shapes.add(this._pushSensor),this._pushSensor.group=Game.nonCollidable,this._balanceLeftSensor=new Polygon([new Vec2(-this._width/2+1,this.height/2+2),new Vec2(-2,this.height/2+2),new Vec2(-2,this.height/2+5),new Vec2(-this._width/2+1,this.height/2+5)],this._material),this._balanceLeftSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceLeftSensor),this._balanceLeftSensor.group=Game.nonCollidable,this._balanceRightSensor=new Polygon([new Vec2(2,this.height/2+2),new Vec2(this._width/2-1,this.height/2+2),new Vec2(this._width/2-1,this.height/2+5),new Vec2(2,this.height/2+5)],this._material),this._balanceRightSensor.sensorEnabled=!0,this._body.shapes.add(this._balanceRightSensor),this._balanceRightSensor.group=Game.nonCollidable},e.prototype.checkCollisions=function(){this._isObstacleOnLeft=!1,this._isObstacleOnRight=!1,this._isLeftBalanceSensor=!1,this._isRightBalanceSensor=!1;for(var e=this._groundContactsCount=0;e<this._body.arbiters.length;e++){var t=this._body.arbiters.at(e);if(t.shape1==this._topShape||t.shape2==this._topShape){var i=t.shape1;t.shape1==this._topShape&&(i=t.shape2),i.sensorEnabled||(this._isDuck=!0)}t.shape1==this._pushSensor?t.body2.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0:t.shape2==this._pushSensor&&(t.body1.position.x<this.x?this._isObstacleOnLeft=!0:this._isObstacleOnRight=!0),t.shape1==this._balanceLeftSensor||t.shape2==this._balanceLeftSensor?this._isLeftBalanceSensor=!0:t.shape1!=this._balanceRightSensor&&t.shape2!=this._balanceRightSensor||(this._isRightBalanceSensor=!0),t.shape1==this._shape?this.checkGround(t,t.body2):t.shape2==this._shape&&this.checkGround(t,t.body1)}0==this._groundContactsCount&&(this._onGround=!1)},e.prototype.checkGround=function(e,t){if(e.collisionArbiter){var i=Math.round(180*e.collisionArbiter.normal.angle/Math.PI);if(t==Game.bouncer.body&&!Game.bouncer.onGround)return;(15<=i&&i<=175||-30<i&&i<10||-90==i||-135==i)&&(1<i||i<-1)&&this._body.position.y<t.position.y-15&&(this._groundContactsCount++,this._onGround=!0)}},e.prototype.update=function(e){this.checkCollisions(),i.prototype.update.call(this,e),this._isGaveUp||(this._ce.input.isDoing("down",this.inputChannel)?this._isDuck=!0:this._isDuck=!1,!this.isHidden&&!this._isMoveKeyPressed&&this._body.velocity.length<.1&&this._niche?this.hide():this.isHidden&&this._isMoveKeyPressed&&this.unhide())},e.prototype.updateAnimation=function(e){if(!this._isGaveUp){this._isMoveKeyPressed||this._isDuck?this._idleTime=0:this._idleTime+=e,14<this._idleTime&&!this.isHidden&&(.5<Math.random()?(this._idleTime=0,SoundManager.getInstance().playSound("HustlerIdleSound1"),this._clip.playAnimation("Idle1")):(this._idleTime=0,SoundManager.getInstance().playSound("HustlerIdleSound2"),this._clip.playAnimation("Idle2")));var t=this._body.velocity.x;this._onGround&&!this._isJustJumped?this._ce.input.isDoing("right",this.inputChannel)&&this._isObstacleOnRight||this._ce.input.isDoing("left",this.inputChannel)&&this._isObstacleOnLeft?(this._isReadyToPlayPushSound&&(this._isReadyToPlayPushSound=!1,TweenMax.delayedCall(2,function(){this._isReadyToPlayPushSound=!0},this),SoundManager.getInstance().playSound("HustlerPushSound")),this._clip.playAnimation("Push")):t<-1||1<t?(SoundManager.getInstance().stopSound("HustlerPushSound"),this._isDuck?this._clip.playAnimation("SitWalk"):this._isMoveKeyPressed?(SoundManager.getInstance().stopSound("HustlerIdleSound2"),SoundManager.getInstance().stopSound("HustlerIdleSound1"),this._clip.playAnimation("Walk")):this._clip.playAnimation("Deceleration"),"Deceleration"==this._clip.currentAnimation?SoundManager.getInstance().isPlaying("HustlerSlideSound")||SoundManager.getInstance().playSound("HustlerSlideSound"):this._isReadyToPlayStepSound&&(this._isReadyToPlayStepSound=!1,TweenMax.delayedCall(.2,function(){this._isReadyToPlayStepSound=!0},this),SoundManager.getInstance().playSound("HustlerStepSound"))):"Idle1"==this._clip.currentAnimation||"Idle2"==this._clip.currentAnimation||this.isHidden||(SoundManager.getInstance().stopSound("HustlerPushSound"),this._isDuck?this._clip.playAnimation("Sit"):(SoundManager.getInstance().stopSound("HustlerSlideSound"),this._isLeftBalanceSensor&&!this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!0):!this._isLeftBalanceSensor&&this._isRightBalanceSensor?(this._clip.playAnimation("Balance"),this.inverted=!1):(this.inverted=!1,this._clip.playAnimation("Stand")))):"JumpDown"!=this._clip.currentAnimation&&.2<this._body.velocity.y&&this._clip.playAnimation("JumpDown")}},e.prototype.goTo=function(e){this._isGaveUp=!0,this.body.space=null,this._clip.playAnimation("Walk"),this.inverted=this.x>e,TweenMax.to(this,.5,{x:e,ease:"Linear.easeNone",onComplete:function(){Game.hustler.view.visible=!1}})},e}(t.Hero);t.Hustler=e}(objects||(objects={})),function(e){var t=function(i){function s(e){var t=i.call(this,"levelText",{view:e,x:+e.x+90,y:+e.y-40})||this;return s.createText(t.view,"Custom Level:",t.view.params.name),Game.levelState.addObject(t),t}return __extends(s,i),s.createText=function(e,t,i){var n,r;(n=Game.getGame().add.text(0,0,t,{font:"18px sc_gum_kidsregular",fill:"#F7E35C",boundsAlignH:"center",boundsAlignV:"middle"})).stroke="#824E26",n.strokeThickness=4,n.setTextBounds(-96,-26,192,33);(r=Game.getGame().add.text(0,0,i,{font:"22px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"top"})).stroke="#824E26",r.strokeThickness=4,r.setTextBounds(-116,-6,232,64),e.addChild(n),e.addChild(r),s.updateText(e,t,i)},s.GetWideText=function(e){if(e&&0<e.length){for(var t=e[0],i=1;i<e.length;i++)t=t+""+e[i];return t}return""},s.updateText=function(e,t,i){if(e){if(null!=t){var n=e.getChildAt(0),r=s.GetWideText(t);n.text!=r&&n.setText(r)}if(null!=i){var o=e.getChildAt(1),a=s.GetWideText(i);o.text!=a&&o.setText(a)}}},s.prototype.destroy=function(){i.prototype.destroy.call(this),Game.levelState.removeObject(this)},s}(e.CitrusSprite);e.LevelText=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"removable",{view:e,width:33,height:33,x:+e.x+16.5,y:+e.y-16.5,group:4})||this;return e.stop(),t.beginContactCallEnabled=!0,t}return __extends(e,i),e.prototype.action=function(){if(this._body.type==BodyType.STATIC){this._body.space=null,this._body.type=BodyType.DYNAMIC,this._body.space=this._nape.space,this.view.gotoAndStop(2);var e=new MovieClip("ElectroSplashGraphics");this.fountain=new n.CitrusObject("electro",{view:e,x:this.x-1,y:this.y+14}),e.playLoop(),Game.levelState.addObject(this.fountain),SoundManager.getInstance().playSound("ElectricitySound"),TweenMax.delayedCall(1,this.removeFountain,this)}},e.prototype.removeFountain=function(){this.fountain.kill=!0},e.prototype.createBody=function(){this._bodyType=BodyType.STATIC,i.prototype.createBody.call(this)},e.prototype.handleBeginContact=function(e){if(100<NapeUtils.CollisionGetOther(this,e).body.normalImpulse(this.body,!0).xy(!0).length&&this._body.type==BodyType.DYNAMIC){this.view.gotoAndStop(3),this.beginContactCallEnabled=!1,SoundManager.getInstance().playSound("MonitorCrashSound");var t=new InteractionGroup(!0);this._body.group=t,this.fragment1=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment1Graphics"),registration:"topLeft",x:this.x+5,y:this.y-2,width:18,height:4,group:2}),Game.levelState.addObject(this.fragment1),this.fragment1.body.group=t,this.fragment1.body.applyImpulse(Vec2.weak(3*Math.random(),-12)),this.fragment1.body.applyAngularImpulse(40*Math.random()),this.fragment2=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment2Graphics"),registration:"topLeft",x:this.x-4,y:this.y,width:14,height:4,group:2}),Game.levelState.addObject(this.fragment2),this.fragment2.body.group=t,this.fragment2.body.applyImpulse(Vec2.weak(-3*Math.random(),-10)),this.fragment2.body.applyAngularImpulse(-40*Math.random()),this.fragment3=new n.NapePhysicsObject("f",{view:new MovieClip("Fragment3Graphics"),registration:"topLeft",x:this.x-4,y:this.y,width:14,height:4,group:2}),Game.levelState.addObject(this.fragment3),this.fragment3.body.group=t,this.fragment3.body.applyImpulse(Vec2.weak(-.5*Math.random(),-10)),this.fragment3.body.applyAngularImpulse(35*Math.random()),this.fragment1.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),this.fragment2.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),this.fragment3.body.setShapeFilters(new InteractionFilter(1,n.PhysicsCollisionCategories.GetAllExcept("tile","hidden"))),TweenMax.delayedCall(2.5,this.removeFragments,this)}},e.prototype.removeFragments=function(){this.fragment1.kill=!0,this.fragment2.kill=!0,this.fragment3.kill=!0},e}(n.LevelObject);n.Monitor=e}(objects||(objects={}));var Space=nape.space.Space;!function(t){var e=function(i){function e(e){var t=i.call(this,e,{})||this;return t.timeStep=.05,t.velocityIterations=8,t.positionIterations=8,t._gravity=new Vec2(0,450),t.updateCallEnabled=!0,t}return __extends(e,i),e.prototype.initialize=function(e){void 0===e&&(e=null),i.prototype.initialize.call(this),this._space=new Space(this._gravity),this._contactListener=new t.NapeContactListener(this._space),t.NapePhysicsObject.space=this._space,t.PhysicsCollisionCategories.Add("GoodGuys"),t.PhysicsCollisionCategories.Add("BadGuys"),t.PhysicsCollisionCategories.Add("Level"),t.PhysicsCollisionCategories.Add("Items")},e.prototype.destroy=function(){this._contactListener.destroy(),this._space.clear(),i.prototype.destroy.call(this)},Object.defineProperty(e.prototype,"space",{get:function(){return this._space},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gravity",{get:function(){return this._gravity},set:function(e){this._gravity=e,this._space&&(this._space.gravity=this._gravity)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"contactListener",{get:function(){return this._contactListener},enumerable:!1,configurable:!0}),e.prototype.update=function(e){i.prototype.update.call(this,e),this._space.step(this.timeStep,this.velocityIterations,this.positionIterations)},e}(t.CitrusObject);t.Nape=e}(objects||(objects={}));var InteractionListener=nape.callbacks.InteractionListener,InteractionType=nape.callbacks.InteractionType,CbType=nape.callbacks.CbType,CbEvent=nape.callbacks.CbEvent;!function(e){var t=function(){function e(e){this._space=e,this._space.listeners.add(new InteractionListener(nape.callbacks.CbEvent.BEGIN,InteractionType.ANY,CbType.ANY_BODY,CbType.ANY_BODY,this.onInteractionBegin)),this._space.listeners.add(new InteractionListener(nape.callbacks.CbEvent.END,InteractionType.ANY,CbType.ANY_BODY,CbType.ANY_BODY,this.onInteractionEnd))}return e.prototype.destroy=function(){this._space.listeners.clear()},e.prototype.onInteractionBegin=function(e){var t=e.int1.userData.myData,i=e.int2.userData.myData;t.beginContactCallEnabled&&t.handleBeginContact(e),i.beginContactCallEnabled&&i.handleBeginContact(e)},e.prototype.onInteractionEnd=function(e){var t=e.int1.userData.myData,i=e.int2.userData.myData;t.endContactCallEnabled&&t.handleEndContact(e),i.endContactCallEnabled&&i.handleEndContact(e)},e}();e.NapeContactListener=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"niche",{view:e,width:4,height:20,x:+e.x+ +e.width/2,y:+e.y-e.height/2+25})||this;return t.isOccupied=!1,t._shape.sensorEnabled=!0,t.offsetY=-25,t._body.group=Game.nonCollidable,t._body.setShapeFilters(new nape.dynamics.InteractionFilter(n.PhysicsCollisionCategories.Get("hidden"),-1,n.PhysicsCollisionCategories.Get("hidden"),-1)),t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(n.LevelObject);n.Niche=e}(objects||(objects={})),function(e){var t=function(){function a(){}return a.Has=function(e,t){return Boolean(e&t)},a.Add=function(e){if(15==a._numCategories)throw new Error("You can only have 15 categories.");a._categoryNames[e]||(a._categoryNames[e]=a._categoryIndexes[a._numCategories],a._allCategories|=a._categoryIndexes[a._numCategories],a._numCategories++)},a.Get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=0,r=e;n<r.length;n++){var o=r[n];0!=a._categoryNames[o]&&(i|=a._categoryNames[o])}return i},a.GetAll=function(){return a._allCategories},a.GetAllExcept=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=a._allCategories,n=0,r=e;n<r.length;n++){var o=r[n];0!=a._categoryNames[o]&&(i&=~a._categoryNames[o])}return i},a.GetNone=function(){return 0},a._allCategories=0,a._numCategories=0,a._categoryIndexes=[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,16384],a._categoryNames={},a}();e.PhysicsCollisionCategories=t}(objects||(objects={})),function(e){var t=function(o){function e(e){var t=this,i=0,n=0,r=Math.round(e.degrees);return r%180==0?(i=e.width/2,n=-10,180==r&&(i+=e.width,n+=20)):r%180==90&&(i=e.width+10,n=-e.width/2,270==r&&(n+=e.width,i-=20)),(t=o.call(this,"plank",{view:e,width:+e.width,height:20,x:+e.x+i,y:+e.y+n,group:4})||this).beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,o),e.prototype.createMaterial=function(){o.prototype.createMaterial.call(this),this._material.density=.8,this._material.staticFriction=.3,this._material.dynamicFriction=.65},e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("PlankDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.Plank=t}(objects||(objects={})),function(o){var e=function(r){function e(e){var t=this,i=e._degrees;for(e.rotation=0;i<-180;)i+=360;for(;180<i;)i-=360;var n=(t=r.call(this,e.name,{view:e,width:22,height:11,rotation:+i,x:+e.x+12,y:+e.y-5.5,group:5})||this)._touchingObjects=0;return e.params.type&&(n=Math.round(parseFloat(e.params.type))),0==n&&(n=1),t._name="subject"+String(n),e.getChild("top").gotoAndStop(n),t.beginContactCallEnabled=!0,t.endContactCallEnabled=!0,t._shape.sensorEnabled=!0,t}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.handleBeginContact=function(e){if(this._touchingObjects++,1==this._touchingObjects){this._targets||(this._targets=Game.levelState.getObjectsByName(this._name),this._targets||(this._targets=[]));for(var t=0,i=this._targets;t<i.length;t++){var n=i[t];if(n instanceof o.LevelObject)n.action()}this.view.totalFrames();TweenMax.to(this.view.getChild("top"),.3,{y:3}),SoundManager.getInstance().playSound("PushButtonSound")}},e.prototype.handleEndContact=function(e){if(this._touchingObjects--,0==this._touchingObjects){for(var t=0,i=this._targets;t<i.length;t++){var n=i[t];if(n instanceof o.LevelObject)n.action()}TweenMax.to(this.view.getChild("top"),.3,{y:-1}),SoundManager.getInstance().playSound("PushButtonSound")}},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(o.PhysicsCollisionCategories.Get("hidden"),-1,o.PhysicsCollisionCategories.Get("hidden"),-1))},e}(o.LevelObject);o.PushButton=e}(objects||(objects={}));var objects,InteractionCallback=nape.callbacks.InteractionCallback;!function(e){var t=function(i){function e(e){var t=i.call(this,"box",{view:e,width:+e.width-2,height:+e.height-3,x:+e.x+e.width/2,y:+e.y-e.height/2,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.handleBeginContact=function(e){15<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("StoolDownSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(e.LevelObject);e.Stool=t}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"fixedBox",{width:35,height:35,x:+(+e.x+17.5),y:+(+e.y-17.5)})||this;return t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll(),t.PhysicsCollisionCategories.Get("tile"),t.PhysicsCollisionCategories.GetAll()))},e}(t.LevelObject);t.Tile=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"tile",{view:e,x:+e.x,y:+e.y,group:3})||this;return Game.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Game.levelState.removeObject(this)},e}(e.CitrusSprite);e.TileVisual=t}(objects||(objects={})),function(n){var e=function(i){function e(e){var t=i.call(this,"removable",{view:e,width:33,height:33,x:+e.x+16.5+2,y:+e.y-16.5,group:4})||this;return t.beginContactCallEnabled=!0,t._isReadyToPlaySound=!0,t}return __extends(e,i),e.prototype.action=function(){if(this._body.type==BodyType.STATIC){this._body.space=null,this._body.type=BodyType.DYNAMIC,this._body.space=n.NapePhysicsObject.space,SoundManager.getInstance().playSound("ToiletSound"),SoundManager.getInstance().playSound("WaterSound");var e=new MovieClip("WaterSplashGraphics"),t=new n.CitrusObject("water",{view:e,x:this.x-1,y:this.y+16});e.playLoop(),Game.levelState.addObject(t)}},e.prototype.createBody=function(){this._bodyType=BodyType.STATIC,i.prototype.createBody.call(this)},e.prototype.handleBeginContact=function(e){10<Math.abs(this._body.velocity.y)&&(SoundManager.getInstance().playSound("ToiletSound"),this._isReadyToPlaySound=!1,TweenMax.delayedCall(1.25,function(){this._isReadyToPlaySound=!0},this))},e}(n.LevelObject);n.Toilet=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"sprite",{view:e,width:+e.width,height:+e.height,x:+e.x+ +e.width/2,y:+e.y-e.height/2,group:4})||this;return t._shape.sensorEnabled=!0,t}return __extends(e,i),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e}(e.LevelObject);e.TopDecoration=t}(objects||(objects={})),function(o){var e=function(r){function e(e){var t=this,i=e._degrees;for(e.rotation=0;i<-180;)i+=360;for(;180<i;)i-=360;t=r.call(this,e.name,{view:e,width:22,height:22,x:+e.x+12.5,rotation:+i,y:+e.y-9.5,group:5})||this;var n=0;return e.params.type&&(n=Math.round(parseFloat(e.params.type))),0==n&&(n=1),t._name="subject"+String(n),e.getChild("handle").gotoAndStop(n),e.getChild("base").gotoAndStop(n),e.stop(),t.beginContactCallEnabled=!0,t._shape.sensorEnabled=!0,t}return __extends(e,r),e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.handleBeginContact=function(e){var t=NapeUtils.CollisionGetOther(this,e);if("hustler"==t.name||"bouncer"==t.name){this._targets||(this._targets=Game.levelState.getObjectsByName(this._name),this._targets||(this._targets=[]));for(var i=0,n=this._targets;i<n.length;i++){var r=n[i];if(r instanceof o.LevelObject)r.action()}this._isActivated=!this._isActivated,SoundManager.getInstance().playSound("TriggerSound"),this._isActivated?TweenMax.to(this.view.getChild("handle"),.5,{degrees:90}):TweenMax.to(this.view.getChild("handle"),.5,{degrees:0})}},e.prototype.createFilter=function(){this._body.setShapeFilters(new InteractionFilter(o.PhysicsCollisionCategories.Get("hidden"),-1,o.PhysicsCollisionCategories.Get("hidden"),-1))},e}(o.LevelObject);o.Trigger=e}(objects||(objects={})),function(t){var e=function(i){function e(e){var t=i.call(this,"turrel",{view:e,width:35,height:35,x:+e.x+27,y:+e.y-16,group:6})||this;return t._clip=e,t._shape.sensorEnabled=!0,t.initialize2(),t._fireTween=TweenMax.delayedCall(4.5,t.fire,t),t}return __extends(e,i),e.prototype.initialize2=function(e){void 0===e&&(e=null),this._clip.addAnimation("Stop",26,26,1),this._clip.addAnimation("Fire",1,26,40,!1),this._clip.playAnimation("Stop")},e.prototype.fire=function(){var e=new t.Bullet;e.x=this.x,e.y=this.y-9,e.body.velocity=new Vec2(this.inverted?120:-120,0),this._clip.playAnimation("Fire"),SoundManager.getInstance().playSound("TurrelFireSound"),this._fireTween=TweenMax.delayedCall(4.5,this.fire,this)},e.prototype.defineBody=function(){this._bodyType=BodyType.STATIC},e.prototype.destroy=function(){i.prototype.destroy.call(this),this._fireTween&&this._fireTween.kill()},e}(t.LevelObject);t.Turrel=e}(objects||(objects={})),function(e){var t=function(i){function e(e){var t=i.call(this,"levelText",{view:e,x:+e.x+e.width/2,y:+e.y-e.height/2-2})||this;return Game.levelState.addObject(t),t}return __extends(e,i),e.prototype.destroy=function(){i.prototype.destroy.call(this),Game.levelState.removeObject(this)},e}(e.CitrusSprite);e.Txt=t}(objects||(objects={}));var ObjectsLayouts=function(){function e(){}return e.data=[{name:"BigElevatorGraphics",children:[{mc:"_bigElevBack",name:"",x:0,y:0},{mc:"_cogwheel",name:"cogwheel1",x:-14,y:0},{mc:"_cogwheel2",name:"cogwheel2",x:14,y:0},{mc:"_bigElevatorFront",name:"front",x:0,y:-4}]},{name:"CameraGraphicsComp",children:[{mc:"CameraGraphics",name:"",x:0,y:0},{mc:"CameraGun",name:"camera1",x:0,y:0},{mc:"_beam",name:"ray1",x:-19,y:0,scaleX:.3219451904296875},{mc:"crossPoint",name:"cross1",x:-51,y:0},{mc:"CameraGun",name:"camera2",x:0,y:0},{mc:"_beam",name:"ray2",x:-19,y:0,scaleX:.3219451904296875},{mc:"crossPoint",name:"cross2",x:-51,y:0}]},{name:"cmcCredits",children:[{mc:"cmcCreditsDialog",name:"",x:0,y:0},{mc:"cmcKiziBig",name:"sponsor",x:-189,y:188},{mc:"cbtnCloseCredits",name:"backButton",x:273,y:144}]},{name:"cmcJoypadLeft",children:[{mc:"cbtnArrow",name:"right",x:55,y:0,degrees:90},{mc:"cbtnArrow",name:"left",x:-55,y:0,degrees:-90}]},{name:"cmcJoypadRight",children:[{mc:"cbtnArrow",name:"up",x:54,y:0},{mc:"cbtnArrow",name:"down",x:-54,y:0,degrees:180},{mc:"cbtnGrab",name:"grab",x:-54,y:-108},{mc:"cbtnChange",name:"change",x:54,y:-108}]},{name:"cmcMainMenu",children:[{mc:"CreditsButton",name:"creditsButton",x:150,y:460},{mc:"cbtnCreateNewLevelMainMenu",name:"createNewLevel",x:550,y:460},{mc:"PlayGameButton",name:"playButton",x:350,y:458}]},{name:"cmcPause",children:[{mc:"cmcPauseDialog",name:"",x:0,y:0},{mc:"cbtnBack",name:"backButton",x:-255,y:420},{mc:"cbtnResume",name:"resume",x:-113,y:201},{mc:"cbtnReplay",name:"replay",x:-113,y:261},{mc:"cbtnWalkthroughPause",name:"walkthrough",x:-113,y:320},{mc:"cbtnPauseHelp",name:"help",x:-125,y:381},{mc:"cbtnPauseMenu",name:"credits",x:0,y:381},{mc:"cbtnCreateNewLevel",name:"createNewLevel",x:120,y:217},{mc:"cbtnAllLevels",name:"allLevels",x:106,y:321},{mc:"cbtnMoreGamesPause",name:"moreGames",x:125,y:381}]},{name:"cmcYouLose",children:[{mc:"_levelFailedSign",name:"levelFailed",x:354,y:-203},{mc:"LoserBouncer",name:"loserBouncer",x:-292,y:100},{mc:"LoserHustler",name:"loserHustler",x:812,y:128},{mc:"cbtnEndPlayMainMenu",name:"mainMenu",x:172,y:566},{mc:"cbtnEndPlayReplay",name:"replayButton",x:350,y:566},{mc:"cbtnEndPlayNextLevel",name:"nextButton",x:528,y:566},{mc:"cbtnEndPlayMoreLevelsBG",name:"allLevelsBG",x:352,y:677},{mc:"cbtnEndPlayCreateNewLevel",name:"createNewLevel",x:578,y:654},{mc:"cbtnEndPlayAllLevels",name:"allLevels",x:575,y:712},{mc:"cbtnEndReplay",name:"replayButtonEdit",x:350,y:566},{mc:"cbtnEndEdit",name:"editLevel",x:172,y:566},{mc:"cbtnEndHelp",name:"help",x:528,y:566},{mc:"cbtnEndPublish",name:"publish",x:350,y:722},{mc:"cmcNoteShare",name:"note",x:350,y:640}]},{name:"cmcYouWin",children:[{mc:"_burgersBackground",name:"burgerBG",x:350,y:207},{mc:"_burg1",name:"b1",x:282,y:222},{mc:"_burg2",name:"b2",x:348,y:188},{mc:"_burg3",name:"b3",x:418,y:221},{mc:"_levelCompletedSign",name:"levelCompleted",x:354,y:-203},{mc:"cbtnEndPlayMainMenu",name:"mainMenu",x:172,y:566},{mc:"cbtnEndPlayReplay",name:"replayButton",x:350,y:566},{mc:"cbtnEndPlayNextLevel",name:"nextButton",x:528,y:566},{mc:"cbtnEndPlayMoreLevelsBG",name:"allLevelsBG",x:352,y:677},{mc:"cbtnEndPlayCreateNewLevel",name:"createNewLevel",x:578,y:654},{mc:"cbtnEndPlayAllLevels",name:"allLevels",x:575,y:712},{mc:"cbtnEndReplay",name:"replayButtonEdit",x:350,y:566},{mc:"cbtnEndEdit",name:"editLevel",x:172,y:566},{mc:"cbtnEndHelp",name:"help",x:528,y:566},{mc:"cbtnEndPublish",name:"publish",x:350,y:722},{mc:"cmcNoteShare",name:"note",x:350,y:640}]},{name:"ElevatorGraphics",children:[{mc:"_elevatorBack",name:"",x:0,y:1},{mc:"_cogwheel",name:"cogwheel1",x:-8,y:2},{mc:"_cogwheel2",name:"cogwheel2",x:8,y:2},{mc:"_elevatorFront",name:"front",x:0,y:-2}]},{name:"ExitGraphicsComp",children:[{mc:"ExitGraphics",name:"",x:0,y:0},{mc:"Decor7Graphics",name:"",x:-20,y:-35}]},{name:"PushButtonGraphics",children:[{mc:"_buttonTop",name:"top",x:0,y:-1},{mc:"_pushButtonBase",name:"",x:0,y:4}]},{name:"TopPanelBonusGraphics",children:[{mc:"MenuButtonGraphics",name:"menuButton",x:664,y:4},{mc:"ReplayButtonGraphics",name:"replayButton",x:622,y:4},{mc:"SoundButtonGraphics",name:"soundButton",x:538,y:4},{mc:"MusicButtonGraphics",name:"musicButton",x:580,y:5}]},{name:"TopPanelGraphics",children:[{mc:"MenuButtonGraphics",name:"menuButton",x:664,y:4},{mc:"ReplayButtonGraphics",name:"replayButton",x:622,y:4},{mc:"SoundButtonGraphics",name:"soundButton",x:538,y:4},{mc:"MusicButtonGraphics",name:"musicButton",x:580,y:5},{mc:"BurgerIndicator",name:"burgerPanel",x:6,y:6},{mc:"_walkthroughButton",name:"walkthroughButton",x:273,y:4,scaleX:.75,scaleY:.75},{mc:"BurgerSmallGraphics",name:"b1",x:30,y:23},{mc:"BurgerSmallGraphics",name:"b2",x:61,y:23},{mc:"BurgerSmallGraphics",name:"b3",x:92,y:23}]},{name:"TriggerGraphics",children:[{mc:"_triggerHandle",name:"handle",x:2,y:5,scaleX:.999969482421875,scaleY:.999969482421875},{mc:"_triggerBase",name:"base",x:0,y:6}]}],e}(),OzUtil=function(){function e(){}return e.PE=function(e,t,i,n){if(e)if(e instanceof Array)for(var r=0,o=e;r<o.length;r++){if((p=o[r])[i]==n)return p}else if(e instanceof Object){var a=e[t];if(a instanceof Array)for(var s=0,l=a;s<l.length;s++){var p;if((p=l[s])[i]==n)return p}else if(a instanceof Object&&a[i]==n)return e}return null},e.CopyJsonWithout=function(e,t){for(var i=[],n=0;n<e.length;n++){var r={},o=e[n];for(var a in o)0<=t.indexOf(a)||(r[a]=o[a]);i.push(r)}return i},e.ARR=function(e,t){if(void 0===t&&(t=null),e instanceof Array)return e;if(e instanceof Object){var i=e[t];if(i instanceof Array)return i;if(i instanceof Object)return[i]}return null},e.verticesArrayToVec2=function(e){for(var t=new Array,i=0,n=e;i<n.length;i++){var r=n[i];t.push(new Vec2(r[0],r[1]))}return t},e.GetURL=function(e){window.open(e,"_blank")},e.TextToURL=function(e){var t=e.replace(" ","-");return t=(t=t.toLowerCase()).replace("\\n","")},e.EscapeURL=function(e){return e.replace("://","%3A%2F%2F")},e.OnSegment=function(e,t,i){return e<=t&&t<=i||i<=t&&t<=e},e.GetCurrentURL=function(){return window.location.href},e.GetAllURLParams=function(){var e=window.location.search.slice(1),t={};if(e)for(var i=(e=e.split("#")[0]).split("&"),n=0;n<i.length;n++){var r=i[n].split("="),o=void 0,a=r[0].replace(/\[\d*\]/,function(e){return o=e.slice(1,-1),""}),s=void 0===r[1]?"true":r[1];a=a.toLowerCase(),s=s.toLowerCase(),t[a]?("string"==typeof t[a]&&(t[a]=[t[a]]),void 0===o?t[a].push(s):t[a][o]=s):t[a]=s}return t},e}(),PreloaderObjects=function(){function e(){}return e.data={frames:[{filename:"BigMenuButtonGraphics0000",frame:{x:637,y:901,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMenuButtonGraphics0001",frame:{x:649,y:843,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMenuButtonGraphics0002",frame:{x:637,y:954,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0000",frame:{x:637,y:1007,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0001",frame:{x:544,y:901,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0002",frame:{x:544,y:954,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigMusicMenuButton0003",frame:{x:1140,y:118,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0000",frame:{x:1195,y:118,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0001",frame:{x:1250,y:118,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigReplayButtonGraphics0002",frame:{x:1305,y:118,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0000",frame:{x:1360,y:118,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0001",frame:{x:1384,y:3,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0002",frame:{x:1384,y:56,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"BigSoundButtonGraphics0003",frame:{x:1140,y:171,w:52,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:52,h:50},sourceSize:{w:52,h:50}},{filename:"LeftCurtainGraphics0000",frame:{x:3,y:532,w:385,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:385,h:525},sourceSize:{w:385,h:525}},{filename:"MusicButtonGraphics0000",frame:{x:653,y:794,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0001",frame:{x:544,y:1007,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0002",frame:{x:582,y:1007,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"MusicButtonGraphics0003",frame:{x:599,y:901,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.4,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"RightCurtainGraphics0000",frame:{x:707,y:531,w:420,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:-420,y:-1,w:420,h:526},sourceSize:{w:420,h:526}},{filename:"SoundButtonGraphics0000",frame:{x:599,y:937,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0001",frame:{x:1195,y:171,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0002",frame:{x:1233,y:171,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"SoundButtonGraphics0003",frame:{x:1271,y:171,w:35,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:33},sourceSize:{w:35,h:33}},{filename:"cbtnPlay0000",frame:{x:391,y:843,w:150,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-1.6,w:150,h:65},sourceSize:{w:150,h:65}},{filename:"cbtnPlay0001",frame:{x:391,y:911,w:150,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-1.6,w:150,h:65},sourceSize:{w:150,h:65}},{filename:"cbtnPlay0002",frame:{x:391,y:979,w:150,h:65},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-1.6,w:150,h:65},sourceSize:{w:150,h:65}},{filename:"cmcKizi0000",frame:{x:544,y:843,w:102,h:55},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:1,w:102,h:55},sourceSize:{w:102,h:55}},{filename:"cmcLoaderBar0000",frame:{x:3,y:1060,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0001",frame:{x:637,y:1060,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0002",frame:{x:247,y:1078,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0003",frame:{x:3,y:1083,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0004",frame:{x:881,y:1060,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0005",frame:{x:1125,y:1060,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0006",frame:{x:1140,y:3,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0007",frame:{x:1140,y:26,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0008",frame:{x:1140,y:49,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0009",frame:{x:1140,y:72,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBar0010",frame:{x:1140,y:95,w:241,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:9.6,y:12.8,w:241,h:20},sourceSize:{w:241,h:20}},{filename:"cmcLoaderBarBack0000",frame:{x:391,y:1047,w:243,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:8,y:9.3,w:243,h:28},sourceSize:{w:243,h:28}},{filename:"cmcLoaderBarFront0000",frame:{x:391,y:794,w:259,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:259,h:46},sourceSize:{w:259,h:46}},{filename:"cmcPreloaderBG0000",frame:{x:3,y:3,w:701,h:526},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.8,y:-.6,w:701,h:526},sourceSize:{w:701,h:526}},{filename:"cmcSidePad0000",frame:{x:707,y:3,w:430,h:525},rotated:!1,trimmed:!0,spriteSourceSize:{x:-430,y:0,w:430,h:525},sourceSize:{w:430,h:525}},{filename:"cmcTitlePreloader0000",frame:{x:391,y:532,w:309,h:259},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:309,h:259},sourceSize:{w:309,h:259}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"PreloaderObjects.png",format:"RGBA8888",size:{w:4096,h:4096},scale:"1"}},e}(),PreloaderObjectsLayouts=function(){function e(){}return e.data=[{name:"cmcPreloader",children:[{mc:"cmcPreloaderBG",name:"bg",x:0,y:0},{mc:"cbtnPlay",name:"btnPlay",x:279,y:443},{mc:"cmcLoaderBarBack",name:"barBack",x:222,y:452},{mc:"MusicButtonGraphics",name:"btnMusic",x:659,y:9},{mc:"SoundButtonGraphics",name:"btnSound",x:622,y:9},{mc:"cmcLoaderBar",name:"bar",x:222,y:451},{mc:"cmcLoaderBarFront",name:"barFront",x:222,y:452},{mc:"cmcKizi",name:"sponsor",x:8,y:9}]}],e}(),StateSwitchSystem=function(){function e(){this.sw2=!1,this._ce=CitrusEngine.getInstance(),this._isSwitchingState=!1}return e.prototype.delayLevelCompleteAnimationSound=function(){SoundManager.getInstance().playSound("LevelCompleteAnimationSound")},e.prototype.delayLevelWinSound=function(){SoundManager.getInstance().playSound("LevelWinSound")},e.prototype.delayHamburger1Sound=function(){SoundManager.getInstance().playSound("Hamburger1Sound")},e.prototype.delayHamburger2Sound=function(){SoundManager.getInstance().playSound("Hamburger2Sound")},e.prototype.delayHamburger3Sound=function(){SoundManager.getInstance().playSound("Hamburger3Sound")},e.prototype.switchToLevelCompleted=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.showWin))},e.prototype.endSpriteAdjustNewButtons=function(e){var t=this,i=e==this.winSprite;e.addChild(new MovieClip("cmcKizi",8,-80,"sponsor","PreloaderObjects",PreloaderObjectsLayouts.data)),h5branding.Branding.outGoingLinksAllowed()&&e.getChild("sponsor").makeButton(Game.sponsor,!1),e.getChild("sponsor").visible=!1,e.getChild("editLevel").makeButton(i?this.goLevelEditFromWin:this.goLevelEditFromLose,!1,this),e.getChild("editLevel").centerInputRect(),e.getChild("replayButtonEdit").makeButton(i?this.goRestartFromWin:this.goRestartFromLose,!1,this),e.getChild("replayButtonEdit").centerInputRect(),e.getChild("help").makeButton(this.showHelp,!1,this),e.getChild("help").centerInputRect(),e.getChild("mainMenu").makeButton(i?this.goMainMenuFromWin:this.goMainMenuFromLose,!1,this),e.getChild("mainMenu").centerInputRect(),e.getChild("replayButton").makeButton(i?this.goRestartFromWin:this.goRestartFromLose,!1,this),e.getChild("replayButton").centerInputRect(),e.getChild("nextButton").makeButton(this.goNextLevel,!1,this),e.getChild("nextButton").centerInputRect(),e.getChild("publish").makeButton(this.publishLevel,!0,this,!0),e.getChild("publish").centerInputRect(),e.getChild("allLevels").makeButton(Game.AllLevels,!1,this),e.getChild("allLevels").centerInputRect(),e.getChild("createNewLevel").makeButton(Game.CreateNewLevel,!1,this),e.getChild("createNewLevel").centerInputRect();var n=i&&2<Game.bouncer.burgers;if(e.getChild("note").gotoAndStop(n?2:1),Game.VIRAL){e.getChild("editLevel").visible=!1,e.getChild("replayButtonEdit").visible=!1,e.getChild("help").visible=!1,e.getChild("note").visible=!1,e.getChild("publish").visible=!1,i?e.getChild("nextButton").gotoAndStop(2):e.getChild("replayButton").gotoAndStop(2);for(var r=e.getChild("allLevelsBG"),o=0;o<3;o++){var a=new MovieClip("cmcThumbBg",150*o-298,-39,"thumb"+(o+1));a.fromBase64(LevelLoader.LevelJSONs[o].thumb,2,2,120),r.addChild(a)}r.getChild("thumb1").makeButton(function(){t.goThumbLevel(0)},!1,this,!0),r.getChild("thumb2").makeButton(function(){t.goThumbLevel(1)},!1,this,!0),r.getChild("thumb3").makeButton(function(){t.goThumbLevel(2)},!1,this,!0)}else e.getChild("mainMenu").visible=!1,e.getChild("replayButton").visible=!1,e.getChild("nextButton").visible=!1,e.getChild("createNewLevel").visible=!1,e.getChild("allLevels").visible=!1,e.getChild("allLevelsBG").visible=!1,e.getChild("publish").visible=n;this._black=Game.getGame().add.graphics(0,0),this._black.beginFill(0),this._black.drawRect(0,0,Game.WIDTH,Game.HEIGHT),this._black.endFill(),this._black.visible=!1,this._black.alpha=.7,e.addChild(this._black),this.helpSprite=new MovieClip("cmcHelpPlay",350,-525,"help","WinningObjects",WinningObjectsLayouts.data),this.helpSprite.visible=!1,this.helpSprite.getChild("close").makeButton(this.unShowHelp,!1,this,!0),this.helpSprite.getChild("close").centerInputRect(),e.addChild(this.helpSprite),this.newSpr=e},e.prototype.endSpriteShowNewButtons=function(e){var t=this;TweenMax.to(e.getChild("levelCompleted"),.5,{y:-3,ease:"Back.easeOut"}),TweenMax.to(e.getChild("winnerBouncer"),.6,{x:-138,ease:"Back.easeOut"}),TweenMax.to(e.getChild("winnerHustler"),.6,{x:138,ease:"Back.easeOut"}),TweenMax.to(e.getChild("sponsor"),.5,{y:8,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("editLevel"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("mainMenu"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("replayButton"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("replayButtonEdit"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("help"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("nextButton"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("publish"),.5,{y:319,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("note"),.5,{y:394,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("publish"),.5,{y:476,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("createNewLevel"),.5,{y:408,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("allLevels"),.5,{y:466,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("allLevelsBG"),.5,{y:431,ease:"Back.easeOut",delay:.5}),this.winSprite==e?Game.VIRAL?TweenMax.delayedCall(1.01,function(){Game.SetEnterButton(t.newSpr.getChild("nextButton"))},this):TweenMax.delayedCall(1.01,function(){Game.SetEnterButton(t.newSpr.getChild("editLevel"))},this):Game.VIRAL?TweenMax.delayedCall(1.01,function(){Game.SetEnterButton(t.newSpr.getChild("replayButton"))},this):TweenMax.delayedCall(1.01,function(){Game.SetEnterButton(t.newSpr.getChild("replayButtonEdit"))},this)},e.prototype.endSpriteHideNewButtons=function(e){TweenMax.to(e.getChild("sponsor"),.5,{y:-80,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("mainMenu"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("editLevel"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("replayButton"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("replayButtonEdit"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("help"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("nextButton"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("publish"),.5,{y:566,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("note"),.5,{y:640,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("publish"),.5,{y:640,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("createNewLevel"),.5,{y:654,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("allLevels"),.5,{y:712,ease:"Back.easeOut",delay:.5}),TweenMax.to(e.getChild("allLevelsBG"),.5,{y:677,ease:"Back.easeOut",delay:.5})},e.prototype.showHelp=function(){this.helpSprite.visible||(this.helpSprite.visible=!0,this.helpSprite.getChild("close").changeFrame1(),this._black.visible=!0,this._black.alpha=0,this.newSpr.inputEnableImmediateChildren(!1,["close"]),TweenMax.to(this._black,.4,{alpha:.5,ease:"Quad.easeOut"}),this.helpTweenY=TweenMax.to(this.helpSprite,.4,{y:0,ease:"Quad.easeOut"}),this.preHelpBut=Game.EnterButton,Game.SetEnterButton(this.helpSprite.getChild("close")))},e.prototype.unShowHelp=function(){TweenMax.to(this.helpSprite,.25,{y:-525,onComplete:this.hideHelp,onCompleteContext:this}),TweenMax.to(this._black,.25,{alpha:0,ease:"Quad.easeOut"}),this.helpTweenY&&(this.helpTweenY.kill(),this.helpTweenY=null),Game.SetEnterButton(null)},e.prototype.hideHelp=function(){this.helpSprite.visible=!1,this._black.visible=!1,this.newSpr.inputEnableImmediateChildren(!0,["close"]),Game.SetEnterButton(this.preHelpBut)},e.prototype.showWin=function(){this.winSprite=new MovieClip("cmcYouWin"),Game.CurtainContainer.addChild(this.winSprite),this.endSpriteAdjustNewButtons(this.winSprite),this.winSprite.getChild("burgerBG").visible=!1,this.winSprite.getChild("b1").visible=!1,this.winSprite.getChild("b2").visible=!1,this.winSprite.getChild("b3").visible=!1,this.winSprite.addChildAt(new MovieClip("cmcHustlerWin",0,-85,"winnerHustler","WinningObjects",null),5),this.winSprite.addChildAt(new MovieClip("cmcBouncerWin",0,-85,"winnerBouncer","WinningObjects",null),5),this.winSprite.getChild("winnerHustler").addAnimation("win",1,34,27,!1,this.showWin2,this),this.winSprite.getChild("winnerBouncer").addAnimation("win",1,34,27,!1),this.winSprite.getChild("winnerHustler").playAnimation("win"),this.winSprite.getChild("winnerBouncer").playAnimation("win"),this.delayLevelCompleteAnimationSound(),TweenMax.delayedCall(1.8,this.delayLevelWinSound,this)},e.prototype.showWin2=function(){this.sw2=this.winSprite.getChild("nextButton").visible;var e=this.winSprite.getChild("burgerBG"),t=this.winSprite.getChild("b1"),i=this.winSprite.getChild("b2"),n=this.winSprite.getChild("b3");e.visible=!0,e.scaleX=e.scaleY=0,TweenMax.to(e,.2,{scaleX:1,scaleY:1,ease:"Back.easeOut"}),(21==Game.currentLevel&&26<Game.bouncer.burgers||Game.currentLevel<21&&0<Game.bouncer.burgers)&&(t.visible=!0,t.scaleX=t.scaleY=0,TweenMax.to(t,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut"}),TweenMax.delayedCall(.05,this.delayHamburger1Sound,this)),(21==Game.currentLevel&&54<Game.bouncer.burgers||Game.currentLevel<21&&1<Game.bouncer.burgers)&&(i.visible=!0,i.scaleX=i.scaleY=0,TweenMax.to(i,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut",delay:.15}),TweenMax.delayedCall(.2,this.delayHamburger2Sound,this)),(21==Game.currentLevel&&79<Game.bouncer.burgers||Game.currentLevel<21&&2<Game.bouncer.burgers)&&(n.visible=!0,n.scaleX=n.scaleY=0,TweenMax.to(n,.4,{scaleX:1,scaleY:1,degrees:360,ease:"Back.easeOut",delay:.3}),TweenMax.delayedCall(.35,this.delayHamburger3Sound,this)),this.endSpriteShowNewButtons(this.winSprite)},e.prototype.goLevelEditFromWin=function(){this.hideWin(this.directToEdit)},e.prototype.goMainMenuFromWin=function(){var e=this;Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){Game.getGame().sound.mute=t,Fabrique.LoaderHelper.hide(),LevelLoader.PlayLevelAt(Math.floor(3*Math.random())),e.hideWin(e.directToMainMenu),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.goThumbLevel=function(e){LevelLoader.PlayLevelAt(e),this.newSpr==this.winSprite?this.hideWin(this.directToPlay):this.hideLose(this.directToPlay)},e.prototype.goNextLevel=function(){var e=this;Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),LevelLoader.PlayLevelAt(Math.floor(3*Math.random())),Game.getGame().sound.mute=t,e.newSpr===e.winSprite?e.hideWin(e.directToPlay):e.hideLose(e.directToPlay),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.goRestartFromWin=function(){var e=this;Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),LevelLoader.PlayLevelAt(Math.floor(3*Math.random())),Game.getGame().sound.mute=t,e.hideWin(e.directToPlay),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.hidePublishDialogue=function(){this.newSpr.getChild("publish").visible=!0,this.publish.visible=!1,this._black.visible=!1,this.newSpr.inputEnableImmediateChildren(!0),Game.SetEnterButton(this.preHelpBut)},e.prototype.showPublishDialogue=function(){var e=this;this.newSpr.getChild("publish").visible=!1,this.newSpr.inputEnableImmediateChildren(!1),this._black.visible=!0,this.publish=new MovieClip("cmcPublishDialogue",Game.WIDTH/2,0,"publishDLG","WinningObjects",WinningObjectsLayouts.data),this.newSpr.addChild(this.publish),this.publish.getChild("close").makeButton(this.hidePublishDialogue,!1,this,!1),this.publish.getChild("close").centerInputRect(),this.publish.getChild("copyURL").makeButton(function(){LevelLoader.copyURL(e.publishURLinputText)},!1,this,!1),this.publish.getChild("copyURL").centerInputRect(),this.publish.getChild("mail").makeButton(LevelLoader.shareMail,!1,this,!1),this.publish.getChild("mail").centerInputRect(),this.publish.getChild("reddit").makeButton(LevelLoader.shareReddit,!1,this,!1),this.publish.getChild("reddit").centerInputRect(),this.publish.getChild("tumblr").makeButton(LevelLoader.shareTumblr,!1,this,!1),this.publish.getChild("tumblr").centerInputRect(),this.publish.getChild("twitter").makeButton(LevelLoader.shareTwitter,!1,this,!1),this.publish.getChild("twitter").centerInputRect(),this.publish.getChild("facebook").makeButton(LevelLoader.shareFacebook,!1,this,!1),this.publish.getChild("facebook").centerInputRect(),this.publish.getChild("editLevel").makeButton(function(){e.hidePublishDialogue(),e.goLevelEditFromWin()},!1,this,!1),this.publish.getChild("editLevel").centerInputRect(),this.publish.getChild("createNewLevel").makeButton(function(){e.hidePublishDialogue(),EditState._objects=null,e.goLevelEditFromWin()},!1,this,!1),this.publish.getChild("createNewLevel").centerInputRect(),this.publish.getChild("playYourLevel").makeButton(function(){e.hidePublishDialogue(),e.goRestartFromWin()},!1,this,!1),this.publish.getChild("playYourLevel").centerInputRect(),this.publishURLinputText=Game.getGame().add.text(-225,229,LevelLoader.ShortenURL(),LevelLoader.PublishURLStyle),this.publish.addChild(this.publishURLinputText),this.publish.addChild(this.publish.getChild("copyURL")),this.preHelpBut=Game.EnterButton,Game.SetEnterButton(this.publish.getChild("close"))},e.prototype.publishLevel=function(){var n=this;if(this.newSpr.getChild("publish").visible=!1,LevelLoader.GetNextLevel()&&JSON.stringify(LevelLoader.GetNextLevel())==JSON.stringify(LevelState.LoadedObjects))this.showPublishDialogue();else{var e=EditState.GetLevelText(),t=e?e.text:"TestLevel",i={game_id:Game.ID,level_json:JSON.stringify(states.EditState._objects),title:t,thumb:EditState.Thumb64};HttpRequest.post("http://kizi.com/game_levels",JSON.stringify(i),function(e){if(e.success){var t;try{t=JSON.parse(e.message)}catch(e){}if(t)if(t){var i=t.id;LevelLoader.SavedId=i,LevelLoader.LevelJSONs[0]=t,n.showPublishDialogue()}else n.newSpr.getChild("publish").visible=!0}else n.newSpr.getChild("publish").visible=!0})}},e.prototype.hideWin=function(e){var t=this;Game.SetEnterButton(null),this.sw2=!1;TweenMax.to(this.winSprite.getChild("levelCompleted"),.5,{y:-203,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("winnerBouncer"),.5,{x:-400,ease:"Back.easeIn"}),TweenMax.to(this.winSprite.getChild("winnerHustler"),.5,{x:400,ease:"Back.easeIn"}),this.endSpriteHideNewButtons(this.winSprite);var i=this.winSprite.getChild("b1"),n=this.winSprite.getChild("b2"),r=this.winSprite.getChild("b3");TweenMax.to(i,.2,{scaleX:0,scaleY:0}),TweenMax.to(n,.2,{scaleX:0,scaleY:0,delay:.1}),TweenMax.to(r,.2,{scaleX:0,scaleY:0,delay:.2}),TweenMax.to(this.winSprite.getChild("burgerBG"),.2,{scaleX:0,scaleY:0,delay:.3}),TweenMax.delayedCall(1,function(){t.removeWin(),e()},this)},e.prototype.removeWin=function(){this.winSprite&&(this.winSprite.visible=!1,this.winSprite.remove(),this.winSprite=null)},e.prototype.switchToLose=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.showLose),SoundManager.getInstance().playSound("LevelFailedSound"))},e.prototype.showLose=function(){this.loseSprite=new MovieClip("cmcYouLose"),Game.CurtainContainer.addChild(this.loseSprite),this.endSpriteAdjustNewButtons(this.loseSprite),this.loseSprite.addChild(new MovieClip("cmcKizi",8,-80,"sponsor","PreloaderObjects",PreloaderObjectsLayouts.data)),h5branding.Branding.outGoingLinksAllowed()&&this.loseSprite.getChild("sponsor").makeButton(Game.sponsor,!1);TweenMax.to(this.loseSprite.getChild("levelFailed"),.5,{y:-3,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("loserBouncer"),.5,{x:8,ease:"Back.easeOut"}),TweenMax.to(this.loseSprite.getChild("loserHustler"),.5,{x:512,ease:"Back.easeOut"}),this.endSpriteShowNewButtons(this.loseSprite)},e.prototype.goLevelEditFromLose=function(){this.hideLose(this.directToEdit)},e.prototype.goRestartFromLose=function(){var e=this;Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),LevelLoader.PlayLevelAt(Math.floor(3*Math.random())),Game.getGame().sound.mute=t,e.hideLose(e.directToPlay),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.goMainMenuFromLose=function(){var e=this;Fabrique.LoaderHelper.show();var t=Game.getGame().sound.mute;h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED,function(){Fabrique.LoaderHelper.hide(),Game.getGame().sound.mute=!0}),h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED,function(){Fabrique.LoaderHelper.hide(),LevelLoader.PlayLevelAt(Math.floor(3*Math.random())),Game.getGame().sound.mute=t,e.hideLose(e.directToMainMenu),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED)}),h5ads.adWrapper.showAd(h5ads.AdType.interstitial)},e.prototype.goLevelsFromLose=function(){this.hideLose(this.directToLevelSelect)},e.prototype.goHelpFromLose=function(){},e.prototype.goEditFromLose=function(){this.hideLose(this.directToEdit)},e.prototype.hideLose=function(e){var t=this;Game.SetEnterButton(null);TweenMax.to(this.loseSprite.getChild("levelFailed"),.5,{y:-203,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("loserBouncer"),.5,{x:-292,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("loserHustler"),.5,{x:812,ease:"Back.easeIn"}),TweenMax.to(this.loseSprite.getChild("sponsor"),.5,{y:-80,ease:"Back.easeIn"}),this.endSpriteHideNewButtons(this.loseSprite),TweenMax.delayedCall(.55,function(){t.removeLoss(),e()},this)},e.prototype.removeLoss=function(){this.loseSprite&&(this.loseSprite.visible=!1,this.loseSprite.remove(),this.loseSprite=null)},e.prototype.switchToAnimation=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToAnimation))},e.prototype.switchToMainMenu=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToMainMenu))},e.prototype.switchToLevelSelect=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToLevelSelect))},e.prototype.switchToPlay=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToPlay))},e.prototype.switchToEdit=function(){Game.stateSwitcher._isSwitchingState||(Game.stateSwitcher._isSwitchingState=!0,this.closeCurtains(this.directToEdit))},e.prototype.directToEdit=function(){Game.getGame().state.start("Edit")},e.prototype.directToPlay=function(){Game.getGame().state.start("Level")},e.prototype.directToLevelSelect=function(){Game.getGame().state.start("LevelSelect")},e.prototype.directToMainMenu=function(){Game.getGame().state.start("MainMenu")},e.prototype.directToAnimation=function(){Game.getGame().state.start("Animation")},e.prototype.closeCurtains=function(e){void 0===e&&(e=null),Game.SetEnterButton(null),e!=this.directToPlay&&Game.HideJoypad(),Game.LeftCurtain.visible=Game.RightCurtain.visible=!0,Game.LeftCurtain.x=Game.LEFT_CURTAIN_OPEN_X,Game.RightCurtain.x=Game.RIGHT_CURTAIN_OPEN_X,SoundManager.getInstance().playSound("BrickWallCloseSound"),TweenMax.to(Game.LeftCurtain,.5,{x:0,ease:"Quad.easeOut"}),TweenMax.to(Game.RightCurtain,.5,{x:Game.WIDTH,onComplete:e,onCompleteContext:this,ease:"Quad.easeOut"})},e.prototype.openCurtains=function(e){TweenMax.delayedCall(e,this.delayBrickWallOpenSound,this),TweenMax.to(Game.LeftCurtain,.5,{x:Game.LEFT_CURTAIN_OPEN_X,ease:"Quad.easeIn",delay:e}),TweenMax.to(Game.RightCurtain,.5,{x:Game.RIGHT_CURTAIN_OPEN_X,ease:"Quad.easeIn",delay:e,onComplete:this.dispose})},e.prototype.delayBrickWallOpenSound=function(){SoundManager.getInstance().playSound("BrickWallOpenSound")},e.prototype.dispose=function(){Game.LeftCurtain.visible=Game.RightCurtain.visible=!1,Game.stateSwitcher._isSwitchingState=!1},e}(),TopPanel=function(){function e(){21==Game.currentLevel?this._view=new MovieClip("TopPanelBonusGraphics"):this._view=new MovieClip("TopPanelGraphics"),Game.getGame().world.addChild(this._view)}return e.prototype.depressButtons=function(){this._view.getChild("musicButton").changeFrame1(),this._view.getChild("soundButton").changeFrame1(),this._view.getChild("replayButton").changeFrame1(),this._view.getChild("menuButton").changeFrame1(),Game.currentLevel!=Game.NUMLEVELS&&this._view.getChild("walkthroughButton").changeFrame1()},e.prototype.disableInput=function(){this._view.getChild("musicButton").input.enabled=!1,this._view.getChild("soundButton").input.enabled=!1,this._view.getChild("replayButton").input.enabled=!1,this._view.getChild("menuButton").input.enabled=!1,Game.currentLevel!=Game.NUMLEVELS&&(this._view.getChild("walkthroughButton").input.enabled=!1),TweenMax.delayedCall(.1,this.depressButtons,this)},e.prototype.enableInput=function(){this._view.getChild("musicButton").input.enabled=!0,this._view.getChild("soundButton").input.enabled=!0,this._view.getChild("replayButton").input.enabled=!0,this._view.getChild("menuButton").input.enabled=!0,Game.currentLevel!=Game.NUMLEVELS&&(this._view.getChild("walkthroughButton").input.enabled=!0)},e.prototype.hideMenuAndRestart=function(){this._view.getChild("menuButton").visible=!1,Game.Touch()?this._view.getChild("replayButton").x=422:this._view.getChild("replayButton").x=496},e.prototype.init=function(){if(Game.Touch()){this._view.changeChildByName("musicButton","BigMusicMenuButton","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("soundButton","BigSoundButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("replayButton","BigReplayButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data),this._view.changeChildByName("menuButton","BigMenuButtonGraphics","PreloaderObjects",PreloaderObjectsLayouts.data);var e=this._view.getChild("musicButton"),t=this._view.getChild("soundButton"),i=this._view.getChild("replayButton"),n=this._view.getChild("menuButton");n.x=646,e.y=3,i.x=590,t.y=3,e.x=534,i.y=3,t.x=478,n.y=3}if(21==Game.currentLevel){Game.Touch()&&(e.alpha=.7,t.alpha=.7,i.alpha=.7,n.alpha=.7),this._secondsLeft=45,Game.Touch()&&(this._secondsLeft=50),this._maxBonusHearts=Game.levelState.getObjectsByName("burger").length;this.heartsText=Game.getGame().add.text(0,0,"Level "+Game.currentLevel+":",{font:"24px sc_gum_kidsregular",fill:"#FFFFFF",boundsAlignH:"center",boundsAlignV:"middle"}),this.heartsText.stroke="#4F2E1F",this.heartsText.strokeThickness=4,this.heartsText.setTextBounds(-7,4,105,36),this.heartsText.text="00 / "+String(this._maxBonusHearts),this._view.addChild(this.heartsText);this.timerText1=Game.getGame().add.text(0,0,"Level "+Game.currentLevel+":",{font:"24px sc_gum_kidsregular",fill:"#FFFF00",boundsAlignH:"right",boundsAlignV:"middle"}),this.timerText1.stroke="#4F2E1F",this.timerText1.strokeThickness=4,this.timerText1.setTextBounds(334,7,60,36),this.timerText1.text="30.",this._view.addChild(this.timerText1);this.timerText2=Game.getGame().add.text(0,0,"Level "+Game.currentLevel+":",{font:"18px sc_gum_kidsregular",fill:"#FFFF00",boundsAlignH:"left",boundsAlignV:"middle"}),this.timerText2.stroke="#4F2E1F",this.timerText2.strokeThickness=4,this.timerText2.setTextBounds(390,12,48,30),this.timerText2.text="00",this._view.addChild(this.timerText2),this._lastTime=Game.getGame().time.totalElapsedSeconds()}else this._view.getChild("b1").scaleX=this._view.getChild("b1").scaleY=0,this._view.getChild("b2").scaleX=this._view.getChild("b2").scaleY=0,this._view.getChild("b3").scaleX=this._view.getChild("b3").scaleY=0},e.prototype.tick=function(){if(21==Game.currentLevel){var e=Game.getGame().time.totalElapsedSeconds();this._secondsLeft-=e-this._lastTime,this._secondsLeft=Math.max(0,this._secondsLeft),this._lastTime=e,this.timerText1.text=String(Math.floor(this._secondsLeft))+".",this.timerText2.text=String(this._secondsLeft-Math.floor(this._secondsLeft)).substr(2,2),0<this._secondsLeft||Game.levelState.failLevel()}},e.prototype.getHeartX=function(){return 21==Game.currentLevel?31:0==Game.bouncer.burgers?this._view.getChild("b1").x:1==Game.bouncer.burgers?this._view.getChild("b2").x:this._view.getChild("b3").x},e.prototype.getHeartY=function(){return 21==Game.currentLevel?19:this._view.getChild("b1").y},e.prototype.collectBurger=function(e){var i=new MovieClip("BurgerSmallGraphics");i.x=e.x,i.y=e.y,this._view.addChild(i),TweenMax.to(i,.6,{x:this.getHeartX(),y:this.getHeartY(),rotation:360,onComplete:function(){i&&i.parent&&i.parent.removeChild(i);if(21==Game.currentLevel){var e=String(n);e.length<2&&(e="0"+e),Game.levelState.topPanel.heartsText.text=e+" / "+String(Game.levelState.topPanel._maxBonusHearts)}else{var t=Game.levelState.topPanel._view;1==n?t.getChild("b1").scaleX=t.getChild("b1").scaleY=1:2==n?t.getChild("b2").scaleX=t.getChild("b2").scaleY=1:3==n&&(t.getChild("b3").scaleX=t.getChild("b3").scaleY=1)}}}),Game.bouncer.burgers++,e.kill=!0,1==Game.bouncer.burgers?SoundManager.getInstance().playSound("GetHamburger1Sound"):2==Game.bouncer.burgers?SoundManager.getInstance().playSound("GetHamburger2Sound"):SoundManager.getInstance().playSound("GetHamburger3Sound");var n=Game.bouncer.burgers},e.prototype.dispose=function(){},e}(),TweenMax=function(){function c(){this.dummy=0}return c.Init=function(e){c.game=e},c.delayedCall=function(e,t,i){var n=new c;return e*=1e3,n.tween=this.game.add.tween(n).to({dummy:1},e,Phaser.Easing.Linear.None,!0),n.tween.onComplete.add(t,i),n},c.to=function(e,t,i){var n=new c,r=0;i.delay&&(r=i.delay,delete i.delay);var o=!1;i.yoyo&&(o=i.yoyo,delete i.yoyo);var a=0;i.repeat&&(a=i.repeat,delete i.repeat);var s=0;i.repeatDelay&&(s=i.repeatDelay,delete i.repeatDelay);var l=null;i.onComplete&&(l=i.onComplete,delete i.onComplete);var p=e;i.onCompleteContext&&(p=i.onCompleteContext,delete i.onCompleteContext);var h=Phaser.Easing.Linear.None;if(i.ease){var u=i.ease;"Linear.easeNone"==u?h=Phaser.Easing.Linear.None:"Quad.easeOut"==u?h=Phaser.Easing.Quadratic.Out:"Quad.easeIn"==u?h=Phaser.Easing.Quadratic.In:"Back.easeOut"==u?h=Phaser.Easing.Back.Out:"Back.easeIn"==u&&(h=Phaser.Easing.Back.In),delete i.ease}return n.tween=this.game.add.tween(e).to(i,1e3*t,h,!0,1e3*r,a,o),l&&n.tween.onComplete.add(l,p),0!=s&&(n.tween.repeatDelay(1e3*s),o&&n.tween.yoyoDelay(1e3*s)),n},c.pauseAll=function(){c.game.tweens.pauseAll()},c.resumeAll=function(){c.game.tweens.resumeAll()},c.prototype.pause=function(){this.tween.pause()},c.prototype.paused=function(){return this.tween.isPaused},c.prototype.resume=function(){this.tween.resume()},c.prototype.kill=function(){this.tween.stop()},c}(),WinningObjects=function(){function e(){}return e.data={frames:[{filename:"cbtnActive0000",frame:{x:3688,y:1046,w:35,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnActive0001",frame:{x:2271,y:921,w:35,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnActive0002",frame:{x:3203,y:1289,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnActive0003",frame:{x:3098,y:969,w:34,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnBags0000",frame:{x:4023,y:257,w:31,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.1,w:31,h:83},sourceSize:{w:31,h:83}},{filename:"cbtnBags0001",frame:{x:4057,y:257,w:31,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.1,w:31,h:83},sourceSize:{w:31,h:83}},{filename:"cbtnBags0002",frame:{x:4023,y:343,w:31,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.1,w:31,h:83},sourceSize:{w:31,h:83}},{filename:"cbtnBags0003",frame:{x:4057,y:343,w:31,h:83},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.1,w:31,h:83},sourceSize:{w:31,h:83}},{filename:"cbtnBasketBall0000",frame:{x:3311,y:1030,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},{filename:"cbtnBigBox0000",frame:{x:3354,y:552,w:51,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-3.3,y:-.5,w:51,h:46},sourceSize:{w:51,h:46}},{filename:"cbtnBigElevator0000",frame:{x:3885,y:1270,w:104,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:104,h:20},sourceSize:{w:104,h:20}},{filename:"cbtnBigPlank0000",frame:{x:851,y:1262,w:191,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:191,h:19},sourceSize:{w:191,h:19}},{filename:"cbtnBlock0000",frame:{x:474,y:1214,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnBlock0001",frame:{x:4016,y:1223,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnBlock0002",frame:{x:3731,y:1289,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnBlock0003",frame:{x:1486,y:1292,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnBox0000",frame:{x:3386,y:1283,w:35,h:35},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:35,h:35},sourceSize:{w:35,h:35}},{filename:"cbtnButton0000",frame:{x:3135,y:969,w:27,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:27,h:22},sourceSize:{w:27,h:22}},{filename:"cbtnCamera0000",frame:{x:3424,y:1172,w:85,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9,y:-14.4,w:85,h:40},sourceSize:{w:85,h:40}},{filename:"cbtnCaption0000",frame:{x:268,y:1214,w:203,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-101.1,y:-20,w:203,h:39},sourceSize:{w:203,h:39}},{filename:"cbtnClear0000",frame:{x:1523,y:1292,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17,y:-17,w:34,h:34},sourceSize:{w:34,h:34}},{filename:"cbtnCloseClear0000",frame:{x:1288,y:832,w:46,h:46},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23,y:-23,w:46,h:46},sourceSize:{w:46,h:46}},{filename:"cbtnCopyURL0000",frame:{x:405,y:1256,w:106,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-53,y:-20,w:106,h:40},sourceSize:{w:106,h:40}},{filename:"cbtnCreatePublish0000",frame:{x:3544,y:657,w:170,h:72},rotated:!1,trimmed:!0,spriteSourceSize:{x:-85,y:-36,w:170,h:72},sourceSize:{w:170,h:72}},{filename:"cbtnDecor10000",frame:{x:1369,y:1226,w:84,h:33},rotated:!1,trimmed:!0,spriteSourceSize:{x:-32.4,y:-2.6,w:84,h:33},sourceSize:{w:84,h:33}},{filename:"cbtnDecor100000",frame:{x:1597,y:1295,w:35,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:0,w:35,h:26},sourceSize:{w:35,h:26}},{filename:"cbtnDecor110000",frame:{x:4074,y:733,w:19,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.7,y:-1.7,w:19,h:24},sourceSize:{w:19,h:24}},{filename:"cbtnDecor120000",frame:{x:2309,y:921,w:24,h:25},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:24,h:25},sourceSize:{w:24,h:25}},{filename:"cbtnDecor130000",frame:{x:872,y:851,w:86,h:25},rotated:!1,trimmed:!0,spriteSourceSize:{x:-30.4,y:-10.3,w:86,h:25},sourceSize:{w:86,h:25}},{filename:"cbtnDecor140000",frame:{x:1288,y:881,w:43,h:42},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.6,y:-1.6,w:43,h:42},sourceSize:{w:43,h:42}},{filename:"cbtnDecor160000",frame:{x:4023,y:170,w:52,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-11.2,y:-16.3,w:52,h:84},sourceSize:{w:52,h:84}},{filename:"cbtnDecor170000",frame:{x:2271,y:837,w:38,h:48},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.1,y:-1.1,w:38,h:48},sourceSize:{w:38,h:48}},{filename:"cbtnDecor180000",frame:{x:1827,y:825,w:38,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.2,y:-1.1,w:38,h:50},sourceSize:{w:38,h:50}},{filename:"cbtnDecor190000",frame:{x:1457,y:1049,w:40,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-1.4,w:40,h:23},sourceSize:{w:40,h:23}},{filename:"cbtnDecor200000",frame:{x:1827,y:878,w:40,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-9.2,w:40,h:43},sourceSize:{w:40,h:43}},{filename:"cbtnDecor210000",frame:{x:1340,y:706,w:42,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:-1.4,w:42,h:26},sourceSize:{w:42,h:26}},{filename:"cbtnDecor220000",frame:{x:651,y:530,w:54,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-1.3,w:54,h:44},sourceSize:{w:54,h:44}},{filename:"cbtnDecor230000",frame:{x:651,y:577,w:53,h:31},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.3,y:0,w:53,h:31},sourceSize:{w:53,h:31}},{filename:"cbtnDecor240000",frame:{x:2271,y:789,w:48,h:45},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.2,y:-7.6,w:48,h:45},sourceSize:{w:48,h:45}},{filename:"cbtnDecor250000",frame:{x:3717,y:657,w:105,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:105,h:50},sourceSize:{w:105,h:50}},{filename:"cbtnDecor260000",frame:{x:3561,y:1226,w:105,h:47},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:105,h:47},sourceSize:{w:105,h:47}},{filename:"cbtnDecor270000",frame:{x:1614,y:1256,w:87,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:87,h:36},sourceSize:{w:87,h:36}},{filename:"cbtnDecor30000",frame:{x:3473,y:1295,w:33,h:26},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-1.7,w:33,h:26},sourceSize:{w:33,h:26}},{filename:"cbtnDecor40000",frame:{x:2271,y:747,w:56,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-23.2,y:-15.5,w:56,h:39},sourceSize:{w:56,h:39}},{filename:"cbtnDecor50000",frame:{x:4074,y:760,w:19,h:23},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-1.2,w:19,h:23},sourceSize:{w:19,h:23}},{filename:"cbtnDecor60000",frame:{x:3354,y:601,w:61,h:36},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.8,y:-2.6,w:61,h:36},sourceSize:{w:61,h:36}},{filename:"cbtnDecor8Left0000",frame:{x:3311,y:1065,w:24,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.5,y:-1.5,w:24,h:21},sourceSize:{w:24,h:21}},{filename:"cbtnDecor8Right0000",frame:{x:3240,y:1259,w:24,h:21},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.4,y:-1.5,w:24,h:21},sourceSize:{w:24,h:21}},{filename:"cbtnDecor90000",frame:{x:1805,y:1078,w:18,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.7,y:-2,w:18,h:22},sourceSize:{w:18,h:22}},{filename:"cbtnDecoration0000",frame:{x:3853,y:1161,w:35,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnDecoration0001",frame:{x:1827,y:924,w:35,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnDecoration0002",frame:{x:1560,y:1292,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnDecoration0003",frame:{x:1288,y:1e3,w:34,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17,y:-17,w:35,h:40},sourceSize:{w:35,h:40}},{filename:"cbtnDoor0000",frame:{x:2716,y:1040,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cbtnEdit0000",frame:{x:1206,y:1075,w:75,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.5,y:-19.9,w:75,h:39},sourceSize:{w:75,h:39}},{filename:"cbtnEdit0001",frame:{x:1206,y:1117,w:75,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.5,y:-19.9,w:75,h:39},sourceSize:{w:75,h:39}},{filename:"cbtnEditBig0000",frame:{x:2173,y:1075,w:95,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.8,y:-25,w:95,h:50},sourceSize:{w:95,h:50}},{filename:"cbtnEditBig0001",frame:{x:2337,y:1246,w:95,h:50},rotated:!1,trimmed:!0,spriteSourceSize:{x:-47.8,y:-25,w:95,h:50},sourceSize:{w:95,h:50}},{filename:"cbtnEditPublish0000",frame:{x:3853,y:1223,w:160,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-80,y:-22,w:160,h:44},sourceSize:{w:160,h:44}},{filename:"cbtnElevator0000",frame:{x:1043,y:1048,w:70,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-.1,w:70,h:19},sourceSize:{w:70,h:19}},{filename:"cbtnExit0000",frame:{x:3090,y:1207,w:110,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12.6,y:-10.1,w:110,h:96},sourceSize:{w:110,h:96}},{filename:"cbtnExit0001",frame:{x:155,y:1213,w:110,h:96},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12.6,y:-10.1,w:110,h:96},sourceSize:{w:110,h:96}},{filename:"cbtnFacebook0000",frame:{x:1043,y:882,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-40,w:80,h:80},sourceSize:{w:80,h:80}},{filename:"cbtnGlassDoor0000",frame:{x:4069,y:1042,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cbtnGrid0000",frame:{x:3203,y:1248,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.9,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnGrid0001",frame:{x:1704,y:1256,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.9,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnGrid0002",frame:{x:3992,y:1292,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.9,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnGrid0003",frame:{x:4029,y:1292,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.9,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnGuardian0000",frame:{x:4023,y:94,w:60,h:73},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.9,y:-6.6,w:60,h:73},sourceSize:{w:60,h:73}},{filename:"cbtnGuardian20000",frame:{x:4023,y:3,w:54,h:88},rotated:!1,trimmed:!0,spriteSourceSize:{x:-3.5,y:-6.5,w:54,h:88},sourceSize:{w:54,h:88}},{filename:"cbtnGuardian30000",frame:{x:2337,y:1146,w:93,h:97},rotated:!1,trimmed:!0,spriteSourceSize:{x:-13.9,y:-20.1,w:93,h:97},sourceSize:{w:93,h:97}},{filename:"cbtnGuardian40000",frame:{x:2173,y:974,w:93,h:98},rotated:!1,trimmed:!0,spriteSourceSize:{x:-13.9,y:-21.6,w:93,h:98},sourceSize:{w:93,h:98}},{filename:"cbtnHelp0000",frame:{x:3768,y:1293,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17,y:-17,w:34,h:34},sourceSize:{w:34,h:34}},{filename:"cbtnMail0000",frame:{x:1043,y:965,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-40,w:80,h:80},sourceSize:{w:80,h:80}},{filename:"cbtnMonitor0000",frame:{x:2138,y:1195,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},{filename:"cbtnNiche0000",frame:{x:573,y:530,w:75,h:74},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:75,h:74},sourceSize:{w:75,h:74}},{filename:"cbtnNo0000",frame:{x:3424,y:1226,w:134,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-67,y:-22,w:134,h:44},sourceSize:{w:134,h:44}},{filename:"cbtnPassive0000",frame:{x:1741,y:1256,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:40},sourceSize:{w:34,h:40}},{filename:"cbtnPassive0001",frame:{x:3274,y:1030,w:34,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:40},sourceSize:{w:34,h:40}},{filename:"cbtnPassive0002",frame:{x:3805,y:1293,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:40},sourceSize:{w:34,h:40}},{filename:"cbtnPassive0003",frame:{x:521,y:1040,w:34,h:40},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:40},sourceSize:{w:34,h:40}},{filename:"cbtnPlank0000",frame:{x:1045,y:1258,w:136,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:136,h:19},sourceSize:{w:136,h:19}},{filename:"cbtnPlank100000",frame:{x:1635,y:1295,w:46,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:46,h:19},sourceSize:{w:46,h:19}},{filename:"cbtnPlank110000",frame:{x:3424,y:1295,w:46,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:46,h:19},sourceSize:{w:46,h:19}},{filename:"cbtnPlank20000",frame:{x:686,y:1266,w:136,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:136,h:19},sourceSize:{w:136,h:19}},{filename:"cbtnPlank30000",frame:{x:3992,y:1270,w:91,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:91,h:19},sourceSize:{w:91,h:19}},{filename:"cbtnPlank40000",frame:{x:1184,y:1273,w:91,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:91,h:19},sourceSize:{w:91,h:19}},{filename:"cbtnPlank50000",frame:{x:3424,y:1273,w:91,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:91,h:19},sourceSize:{w:91,h:19}},{filename:"cbtnPlank60000",frame:{x:3664,y:1289,w:64,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:64,h:19},sourceSize:{w:64,h:19}},{filename:"cbtnPlank70000",frame:{x:1352,y:1292,w:64,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:-.1,y:0,w:64,h:19},sourceSize:{w:64,h:19}},{filename:"cbtnPlank80000",frame:{x:1419,y:1292,w:64,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:64,h:19},sourceSize:{w:64,h:19}},{filename:"cbtnPlank90000",frame:{x:622,y:1267,w:46,h:19},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:46,h:19},sourceSize:{w:46,h:19}},{filename:"cbtnPlayPublish0000",frame:{x:1206,y:1226,w:160,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-80,y:-22,w:160,h:44},sourceSize:{w:160,h:44}},{filename:"cbtnReddit0000",frame:{x:2448,y:967,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-40,w:80,h:80},sourceSize:{w:80,h:80}},{filename:"cbtnRedo0000",frame:{x:2092,y:1268,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnRedo0001",frame:{x:2129,y:1268,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnRedo0002",frame:{x:3842,y:1293,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnRedo0003",frame:{x:3879,y:1293,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnShare0000",frame:{x:2716,y:1113,w:28,h:28},rotated:!1,trimmed:!0,spriteSourceSize:{x:-14,y:-14,w:28,h:28},sourceSize:{w:28,h:28}},{filename:"cbtnStool0000",frame:{x:2138,y:1230,w:32,h:32},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:32,h:32},sourceSize:{w:32,h:32}},{filename:"cbtnTest0000",frame:{x:2092,y:1153,w:75,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.5,y:-19.9,w:75,h:39},sourceSize:{w:75,h:39}},{filename:"cbtnTest0001",frame:{x:1206,y:1159,w:75,h:39},rotated:!1,trimmed:!0,spriteSourceSize:{x:-37.5,y:-19.9,w:75,h:39},sourceSize:{w:75,h:39}},{filename:"cbtnToiletLeft0000",frame:{x:3354,y:506,w:56,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:-24.4,y:-11.4,w:56,h:43},sourceSize:{w:56,h:43}},{filename:"cbtnToiletRight0000",frame:{x:4023,y:429,w:57,h:43},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1.2,y:-11.4,w:57,h:43},sourceSize:{w:57,h:43}},{filename:"cbtnTrash0000",frame:{x:3203,y:1207,w:35,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-18.3,y:-17,w:35,h:38},sourceSize:{w:35,h:38}},{filename:"cbtnTrash0001",frame:{x:3916,y:1293,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.3,y:-17,w:35,h:38},sourceSize:{w:35,h:38}},{filename:"cbtnTrigger0000",frame:{x:3241,y:1207,w:30,h:22},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:30,h:22},sourceSize:{w:30,h:22}},{filename:"cbtnTumblr0000",frame:{x:2448,y:1050,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-40,w:80,h:80},sourceSize:{w:80,h:80}},{filename:"cbtnTurrel0000",frame:{x:2271,y:888,w:50,h:30},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:0,w:50,h:30},sourceSize:{w:50,h:30}},{filename:"cbtnTwitter0000",frame:{x:3424,y:1089,w:80,h:80},rotated:!1,trimmed:!0,spriteSourceSize:{x:-40,y:-40,w:80,h:80},sourceSize:{w:80,h:80}},{filename:"cbtnUndo0000",frame:{x:1278,y:1273,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnUndo0001",frame:{x:1315,y:1273,w:34,h:38},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnUndo0002",frame:{x:3953,y:1293,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnUndo0003",frame:{x:1219,y:1295,w:34,h:34},rotated:!1,trimmed:!0,spriteSourceSize:{x:-17.8,y:-17,w:34,h:38},sourceSize:{w:34,h:38}},{filename:"cbtnYes0000",frame:{x:268,y:1256,w:134,h:44},rotated:!1,trimmed:!0,spriteSourceSize:{x:-67,y:-22,w:134,h:44},sourceSize:{w:134,h:44}},{filename:"cmcAxis0000",frame:{x:514,y:1295,w:702,h:2},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-1,w:702,h:2},sourceSize:{w:702,h:2}},{filename:"cmcBouncerWin0000",frame:{x:3182,y:506,w:169,h:279},rotated:!1,trimmed:!0,spriteSourceSize:{x:-202,y:191,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0001",frame:{x:3736,y:820,w:159,h:265},rotated:!1,trimmed:!0,spriteSourceSize:{x:-101.9,y:155,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0002",frame:{x:1520,y:825,w:154,h:251},rotated:!1,trimmed:!0,spriteSourceSize:{x:-9.9,y:117,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0003",frame:{x:1132,y:832,w:153,h:240},rotated:!1,trimmed:!0,spriteSourceSize:{x:87.1,y:77,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0004",frame:{x:385,y:530,w:185,h:248},rotated:!1,trimmed:!0,spriteSourceSize:{x:160,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0005",frame:{x:3165,y:788,w:179,h:239},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:32,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0006",frame:{x:3354,y:657,w:187,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:161,y:33,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0007",frame:{x:769,y:611,w:190,h:237},rotated:!1,trimmed:!0,spriteSourceSize:{x:161,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0008",frame:{x:573,y:611,w:193,h:234},rotated:!1,trimmed:!0,spriteSourceSize:{x:161,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0009",frame:{x:2980,y:506,w:199,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:166,y:27,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0010",frame:{x:2337,y:506,w:211,h:231},rotated:!1,trimmed:!0,spriteSourceSize:{x:162,y:31,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0011",frame:{x:1896,y:506,w:219,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:162,y:28,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0012",frame:{x:1653,y:506,w:240,h:229},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0013",frame:{x:3830,y:496,w:247,h:234},rotated:!1,trimmed:!0,spriteSourceSize:{x:162,y:34,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0014",frame:{x:1403,y:506,w:247,h:227},rotated:!1,trimmed:!0,spriteSourceSize:{x:166,y:36,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0015",frame:{x:2551,y:506,w:212,h:229},rotated:!1,trimmed:!0,spriteSourceSize:{x:163,y:36,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0016",frame:{x:2766,y:506,w:211,h:226},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:40,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0017",frame:{x:2118,y:506,w:216,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:164,y:39,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0018",frame:{x:3,y:530,w:205,h:227},rotated:!1,trimmed:!0,spriteSourceSize:{x:172,y:51,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0019",frame:{x:2766,y:735,w:195,h:226},rotated:!1,trimmed:!0,spriteSourceSize:{x:179,y:60,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0020",frame:{x:3544,y:820,w:189,h:223},rotated:!1,trimmed:!0,spriteSourceSize:{x:185,y:73,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0021",frame:{x:1340,y:825,w:177,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:194,y:84,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0022",frame:{x:211,y:530,w:171,h:272},rotated:!1,trimmed:!0,spriteSourceSize:{x:199,y:93,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0023",frame:{x:962,y:611,w:167,h:268},rotated:!1,trimmed:!0,spriteSourceSize:{x:203,y:99,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0024",frame:{x:400,y:781,w:165,h:256},rotated:!1,trimmed:!0,spriteSourceSize:{x:199,y:114,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0025",frame:{x:3898,y:820,w:180,h:219},rotated:!1,trimmed:!0,spriteSourceSize:{x:189,y:157,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0026",frame:{x:2337,y:740,w:195,h:224},rotated:!1,trimmed:!0,spriteSourceSize:{x:149,y:162,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0027",frame:{x:2074,y:747,w:194,h:224},rotated:!1,trimmed:!0,spriteSourceSize:{x:150,y:162,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0028",frame:{x:2551,y:738,w:195,h:225},rotated:!1,trimmed:!0,spriteSourceSize:{x:151,y:164,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0029",frame:{x:1132,y:611,w:205,h:218},rotated:!1,trimmed:!0,spriteSourceSize:{x:144,y:168,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0030",frame:{x:1870,y:747,w:201,h:217},rotated:!1,trimmed:!0,spriteSourceSize:{x:148,y:169,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0031",frame:{x:2964,y:747,w:198,h:219},rotated:!1,trimmed:!0,spriteSourceSize:{x:150,y:167,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0032",frame:{x:3,y:760,w:196,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:151,y:165,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcBouncerWin0033",frame:{x:202,y:805,w:195,h:221},rotated:!1,trimmed:!0,spriteSourceSize:{x:152,y:165,w:619,h:443},sourceSize:{w:619,h:443}},{filename:"cmcClearAllLevel0000",frame:{x:3420,y:496,w:407,h:158},rotated:!1,trimmed:!0,spriteSourceSize:{x:-204,y:-79,w:407,h:158},sourceSize:{w:407,h:158}},{filename:"cmcColor0000",frame:{x:173,y:984,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0001",frame:{x:3135,y:994,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0002",frame:{x:3241,y:1232,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0003",frame:{x:4066,y:1292,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0004",frame:{x:1684,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0005",frame:{x:1711,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0006",frame:{x:1738,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0007",frame:{x:3509,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0008",frame:{x:3536,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0009",frame:{x:3563,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0010",frame:{x:3590,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcColor0011",frame:{x:3617,y:1297,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcDropdownBG0000",frame:{x:708,y:506,w:692,h:102},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-1,w:692,h:102},sourceSize:{w:692,h:102}},{filename:"cmcFlipH0000",frame:{x:405,y:1299,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcGrid0000",frame:{x:3,y:3,w:702,h:524},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-1,w:702,h:524},sourceSize:{w:702,h:524}},{filename:"cmcHelpEditorBG0000",frame:{x:708,y:3,w:700,h:500},rotated:!1,trimmed:!0,spriteSourceSize:{x:-350,y:-300,w:700,h:500},sourceSize:{w:700,h:500}},{filename:"cmcHelpEditorBG0001",frame:{x:1411,y:3,w:700,h:500},rotated:!1,trimmed:!0,spriteSourceSize:{x:-350,y:-300,w:700,h:500},sourceSize:{w:700,h:500}},{filename:"cmcHustlerWin0000",frame:{x:1457,y:1079,w:154,h:187},rotated:!1,trimmed:!0,spriteSourceSize:{x:714,y:216.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0001",frame:{x:2448,y:1143,w:152,h:184},rotated:!1,trimmed:!0,spriteSourceSize:{x:632,y:177.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0002",frame:{x:1782,y:1153,w:152,h:179},rotated:!1,trimmed:!0,spriteSourceSize:{x:549,y:144.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0003",frame:{x:1043,y:1075,w:160,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:456,y:103.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0004",frame:{x:2749,y:964,w:174,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:358,y:63.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0005",frame:{x:3098,y:1030,w:173,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:355,y:64.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0006",frame:{x:2271,y:967,w:174,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:63.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0007",frame:{x:343,y:1040,w:175,h:171},rotated:!1,trimmed:!0,spriteSourceSize:{x:347,y:61.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0008",frame:{x:2535,y:966,w:178,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:342,y:59.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0009",frame:{x:1998,y:974,w:172,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:343,y:57.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0010",frame:{x:1288,y:1049,w:166,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:347,y:56.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0011",frame:{x:1614,y:1079,w:165,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:348,y:55.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0012",frame:{x:2173,y:1146,w:161,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:55.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0013",frame:{x:2766,y:1152,w:161,h:172},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:56.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0014",frame:{x:3688,y:1088,w:162,h:175},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:57.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0015",frame:{x:521,y:1089,w:162,h:175},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:58.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0016",frame:{x:686,y:1089,w:162,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:60.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0017",frame:{x:872,y:1083,w:163,h:176},rotated:!1,trimmed:!0,spriteSourceSize:{x:348,y:61.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0018",frame:{x:2603,y:1145,w:160,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:350,y:73.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0019",frame:{x:2930,y:1152,w:157,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:351,y:85.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0020",frame:{x:1937,y:1153,w:152,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:352,y:92.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0021",frame:{x:3,y:1168,w:149,h:174},rotated:!1,trimmed:!0,spriteSourceSize:{x:353,y:108.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0022",frame:{x:1677,y:825,w:147,h:250},rotated:!1,trimmed:!0,spriteSourceSize:{x:352,y:117.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0023",frame:{x:568,y:848,w:149,h:238},rotated:!1,trimmed:!0,spriteSourceSize:{x:348,y:131.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0024",frame:{x:720,y:851,w:149,h:231},rotated:!1,trimmed:!0,spriteSourceSize:{x:347,y:140.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0025",frame:{x:3274,y:1089,w:147,h:191},rotated:!1,trimmed:!0,spriteSourceSize:{x:349,y:185.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0026",frame:{x:872,y:882,w:168,h:198},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:185.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0027",frame:{x:3347,y:898,w:168,h:188},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:195.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0028",frame:{x:1827,y:967,w:168,h:183},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:200.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0029",frame:{x:3518,y:1046,w:167,h:177},rotated:!1,trimmed:!0,spriteSourceSize:{x:362,y:206.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0030",frame:{x:3898,y:1042,w:168,h:178},rotated:!1,trimmed:!0,spriteSourceSize:{x:361,y:205.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0031",frame:{x:2926,y:969,w:169,h:180},rotated:!1,trimmed:!0,spriteSourceSize:{x:360,y:203.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0032",frame:{x:3,y:984,w:167,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:362,y:202.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcHustlerWin0033",frame:{x:173,y:1029,w:167,h:181},rotated:!1,trimmed:!0,spriteSourceSize:{x:362,y:202.3,w:526,h:348},sourceSize:{w:526,h:348}},{filename:"cmcMinimize0000",frame:{x:1340,y:611,w:24,h:92},rotated:!1,trimmed:!0,spriteSourceSize:{x:-1,y:-1,w:24,h:92},sourceSize:{w:24,h:92}},{filename:"cmcNode0000",frame:{x:4080,y:15,w:8,h:8},rotated:!1,trimmed:!0,spriteSourceSize:{x:-4,y:-4,w:8,h:8},sourceSize:{w:8,h:8}},{filename:"cmcNoteShare0000",frame:{x:3544,y:733,w:527,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-263.5,y:-42.1,w:527,h:84},sourceSize:{w:527,h:84}},{filename:"cmcNoteShare0001",frame:{x:1340,y:738,w:527,h:84},rotated:!1,trimmed:!0,spriteSourceSize:{x:-263.5,y:-42.1,w:527,h:84},sourceSize:{w:527,h:84}},{filename:"cmcPath0000",frame:{x:3354,y:640,w:20,h:4},rotated:!1,trimmed:!0,spriteSourceSize:{x:0,y:-2,w:20,h:4},sourceSize:{w:20,h:4}},{filename:"cmcPlayHelpDialogue0000",frame:{x:2114,y:3,w:650,h:500},rotated:!1,trimmed:!0,spriteSourceSize:{x:-325,y:0,w:650,h:500},sourceSize:{w:650,h:500}},{filename:"cmcPlayHelpDialogue0001",frame:{x:2767,y:3,w:650,h:500},rotated:!1,trimmed:!0,spriteSourceSize:{x:-325,y:0,w:650,h:500},sourceSize:{w:650,h:500}},{filename:"cmcPublishDialogBG0000",frame:{x:3420,y:3,w:600,h:490},rotated:!1,trimmed:!0,spriteSourceSize:{x:-300,y:0,w:600,h:490},sourceSize:{w:600,h:490}},{filename:"cmcPut10000",frame:{x:2312,y:837,w:20,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-10,w:20,h:20},sourceSize:{w:20,h:20}},{filename:"cmcPut20000",frame:{x:2312,y:860,w:20,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-10,w:20,h:20},sourceSize:{w:20,h:20}},{filename:"cmcPutBigElevator0000",frame:{x:3717,y:710,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"cmcPutBigElevator0001",frame:{x:3669,y:1266,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"cmcPutBigElevator0002",frame:{x:514,y:1267,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"cmcPutBigElevator0003",frame:{x:1369,y:1269,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"cmcPutBigElevator0004",frame:{x:1477,y:1269,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"cmcPutBigElevator0005",frame:{x:3777,y:1270,w:105,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-52.5,y:-10,w:105,h:20},sourceSize:{w:105,h:20}},{filename:"cmcPutDirs0000",frame:{x:825,y:1266,w:20,h:20},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-10,w:20,h:20},sourceSize:{w:20,h:20}},{filename:"cmcPutDoor0000",frame:{x:1782,y:1078,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cmcPutDoor0001",frame:{x:3853,y:1088,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cmcPutDoor0002",frame:{x:4069,y:1115,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cmcPutDoor0003",frame:{x:4069,y:1188,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cmcPutDoor0004",frame:{x:2092,y:1195,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cmcPutDoor0005",frame:{x:2115,y:1195,w:20,h:70},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:70},sourceSize:{w:20,h:70}},{filename:"cmcPutElevator0000",frame:{x:4023,y:475,w:70,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-7.9,w:70,h:18},sourceSize:{w:70,h:18}},{filename:"cmcPutElevator0001",frame:{x:1206,y:1201,w:70,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-7.9,w:70,h:18},sourceSize:{w:70,h:18}},{filename:"cmcPutElevator0002",frame:{x:3518,y:1276,w:70,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-7.9,w:70,h:18},sourceSize:{w:70,h:18}},{filename:"cmcPutElevator0003",frame:{x:3591,y:1276,w:70,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-7.9,w:70,h:18},sourceSize:{w:70,h:18}},{filename:"cmcPutElevator0004",frame:{x:3240,y:1283,w:70,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-7.9,w:70,h:18},sourceSize:{w:70,h:18}},{filename:"cmcPutElevator0005",frame:{x:3313,y:1283,w:70,h:18},rotated:!1,trimmed:!0,spriteSourceSize:{x:-35,y:-7.9,w:70,h:18},sourceSize:{w:70,h:18}},{filename:"cmcPutGlassDoor0000",frame:{x:1367,y:611,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"cmcPutGlassDoor0001",frame:{x:3518,y:898,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"cmcPutGlassDoor0002",frame:{x:1288,y:926,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"cmcPutGlassDoor0003",frame:{x:1311,y:926,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"cmcPutGlassDoor0004",frame:{x:2716,y:966,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"cmcPutGlassDoor0005",frame:{x:3518,y:972,w:20,h:71},rotated:!1,trimmed:!0,spriteSourceSize:{x:-10,y:-35,w:20,h:71},sourceSize:{w:20,h:71}},{filename:"cmcRotCW0000",frame:{x:432,y:1299,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}},{filename:"cmcTrig0000",frame:{x:4080,y:3,w:8,h:9},rotated:!1,trimmed:!0,spriteSourceSize:{x:-3,y:-4.5,w:8,h:9},sourceSize:{w:8,h:9}},{filename:"cmcX0000",frame:{x:459,y:1299,w:24,h:24},rotated:!1,trimmed:!0,spriteSourceSize:{x:-12,y:-12,w:24,h:24},sourceSize:{w:24,h:24}}],meta:{app:"Adobe Flash Professional",version:"13.1.0.226",image:"WinningObjects.png",format:"RGBA8888",size:{w:4096,h:4096},scale:"1"}},e}(),WinningObjectsLayouts=function(){function e(){}return e.data=[{name:"cmcActiveButtons",children:[{mc:"cmcDropdownBG",name:"bg",x:5,y:42},{mc:"cmcMinimize",name:"minimize",x:10,y:47},{mc:"cbtnExit",name:"exit",x:37,y:47},{mc:"cbtnBags",name:"bags",x:129,y:51},{mc:"cbtnButton",name:"",x:167,y:52},{mc:"cbtnTrigger",name:"",x:205,y:50},{mc:"cbtnElevator",name:"",x:167,y:80},{mc:"cbtnBigElevator",name:"",x:166,y:104},{mc:"cbtnDoor",name:"",x:276,y:55},{mc:"cbtnGlassDoor",name:"",x:303,y:55},{mc:"cbtnCamera",name:"",x:335,y:58},{mc:"cbtnTurrel",name:"",x:330,y:95},{mc:"cbtnGuardian",name:"",x:396,y:66},{mc:"cbtnGuardian2",name:"",x:463,y:68},{mc:"cbtnGuardian3",name:"",x:521,y:69},{mc:"cbtnGuardian4",name:"",x:585,y:70}]},{name:"cmcClearDialogue",children:[{mc:"cmcClearAllLevel",name:"",x:-9,y:5},{mc:"cbtnCloseClear",name:"close",x:190,y:-61},{mc:"cbtnNo",name:"no",x:78,y:41},{mc:"cbtnYes",name:"yes",x:-79,y:41}]},{name:"cmcColors",children:[{mc:"cmcColor",name:"col2",x:-36,y:0},{mc:"cmcColor",name:"col3",x:-12,y:0},{mc:"cmcColor",name:"col1",x:-60,y:0},{mc:"cmcColor",name:"col5",x:36,y:0},{mc:"cmcColor",name:"col6",x:60,y:0},{mc:"cmcColor",name:"col4",x:12,y:0}]},{name:"cmcDecorButtons",children:[{mc:"cmcDropdownBG",name:"bg",x:5,y:42},{mc:"cmcMinimize",name:"minimize",x:10,y:47},{mc:"cbtnDecor25",name:"",x:37,y:49},{mc:"cbtnDecor21",name:"",x:43,y:109},{mc:"cbtnDecor23",name:"",x:94,y:106},{mc:"cbtnDecor26",name:"",x:141,y:50},{mc:"cbtnDecor10",name:"",x:156,y:108},{mc:"cbtnDecor20",name:"",x:200,y:107},{mc:"cbtnDecor27",name:"",x:250,y:58},{mc:"cbtnDecor6",name:"",x:250,y:109},{mc:"cbtnDecor1",name:"",x:307,y:112},{mc:"cbtnDecor18",name:"",x:343,y:50},{mc:"cbtnDecor4",name:"",x:374,y:110},{mc:"cbtnDecor17",name:"",x:389,y:50},{mc:"cbtnDecor3",name:"",x:424,y:111},{mc:"cbtnDecor14",name:"",x:442,y:54},{mc:"cbtnDecor11",name:"",x:472,y:110},{mc:"cbtnDecor22",name:"",x:496,y:52},{mc:"cbtnDecor12",name:"",x:530,y:109},{mc:"cbtnDecor16",name:"",x:553,y:49},{mc:"cbtnDecor5",name:"",x:560,y:111},{mc:"cbtnDecor24",name:"",x:598,y:55},{mc:"cbtnDecor13",name:"",x:594,y:115},{mc:"cbtnDecor8Left",name:"",x:631,y:111},{mc:"cbtnDecor19",name:"",x:651,y:63},{mc:"cbtnDecor8Right",name:"",x:666,y:111},{mc:"cbtnDecor9",name:"",x:505,y:111}]},{name:"cmcEditPanel",children:[{mc:"cbtnActive",name:"active",x:21,y:21},{mc:"cbtnPassive",name:"passive",x:58,y:21},{mc:"cbtnDecoration",name:"decor",x:95,y:21},{mc:"cbtnBlock",name:"block",x:140,y:21},{mc:"cbtnCaption",name:"caption",x:350,y:20},{mc:"cbtnTrash",name:"btnTrash",x:484,y:21},{mc:"cbtnTest",name:"btnTest",x:658,y:22},{mc:"cbtnClear",name:"btnClear",x:522,y:21},{mc:"cbtnGrid",name:"grid",x:180,y:21},{mc:"cbtnUndo",name:"btnUndo",x:560,y:21},{mc:"cbtnRedo",name:"btnRedo",x:598,y:21},{mc:"cbtnHelp",name:"help",x:220,y:21},{mc:"cbtnShare",name:"share",x:434,y:21}]},{name:"cmcHelpEdit",children:[{mc:"cmcHelpEditorBG",name:"content",x:0,y:300},{mc:"cbtnCloseClear",name:"close",x:307,y:90}]},{name:"cmcHelpPlay",children:[{mc:"cmcPlayHelpDialogue",name:"content",x:0,y:0},{mc:"cbtnCloseClear",name:"close",x:299,y:93}]},{name:"cmcNoteDialogue",children:[{mc:"cmcNoteShare",name:"",x:0,y:0},{mc:"cbtnCloseClear",name:"close",x:260,y:-33}]},{name:"cmcPassiveButtons",children:[{mc:"cmcDropdownBG",name:"bg",x:5,y:42},{mc:"cmcMinimize",name:"minimize",x:10,y:47},{mc:"cbtnNiche",name:"",x:37,y:55},{mc:"cbtnMonitor",name:"",x:123,y:56},{mc:"cbtnBasketBall",name:"",x:219,y:55},{mc:"cbtnStool",name:"",x:263,y:65},{mc:"cbtnToiletRight",name:"",x:123,y:97},{mc:"cbtnBigBox",name:"",x:163,y:83},{mc:"cbtnBigPlank",name:"",x:258,y:109},{mc:"cbtnPlank",name:"",x:312,y:83},{mc:"cbtnPlank2",name:"",x:312,y:55},{mc:"cbtnPlank3",name:"",x:461,y:55},{mc:"cbtnPlank4",name:"",x:461,y:83},{mc:"cbtnPlank5",name:"",x:461,y:109},{mc:"cbtnPlank6",name:"",x:563,y:55},{mc:"cbtnPlank7",name:"",x:563,y:83},{mc:"cbtnPlank8",name:"",x:563,y:109},{mc:"cbtnPlank9",name:"",x:639,y:55},{mc:"cbtnPlank10",name:"",x:639,y:83},{mc:"cbtnPlank11",name:"",x:639,y:109},{mc:"cbtnBox",name:"",x:219,y:96,scaleX:.9024505615234375,scaleY:.9024505615234375}]},{name:"cmcPublishDialogue",children:[{mc:"cmcPublishDialogBG",name:"",x:0,y:0},{mc:"cbtnCopyURL",name:"copyURL",x:190,y:239},{mc:"cbtnMail",name:"mail",x:-180,y:321},{mc:"cbtnReddit",name:"reddit",x:-90,y:321},{mc:"cbtnTumblr",name:"tumblr",x:0,y:321},{mc:"cbtnTwitter",name:"twitter",x:90,y:321},{mc:"cbtnFacebook",name:"facebook",x:180,y:321},{mc:"cbtnEditPublish",name:"editLevel",x:-175,y:419},{mc:"cbtnPlayPublish",name:"playYourLevel",x:178,y:419},{mc:"cbtnCreatePublish",name:"createNewLevel",x:5,y:416},{mc:"cbtnCloseClear",name:"close",x:272,y:90}]},{name:"cmcPutDoorComp",children:[{mc:"cmcPutDoor",name:"door",x:0,y:-70,alpha:.49},{mc:"cmcPutGlassDoor",name:"glassDoor",x:0,y:-70,alpha:.49},{mc:"cmcTrig",name:"",x:0,y:-35,degrees:-90}]},{name:"cmcPutVector",children:[{mc:"cmcPath",name:"path",x:0,y:0},{mc:"cmcNode",name:"node",x:0,y:0},{mc:"cmcTrig",name:"trig",x:20,y:0}]}],e}();